{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, Optional, Inject, EventEmitter, Component, Input, Output, Directive, ViewChild, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i1 from '@backbase/foundation-ang/core';\nimport { BbTemplate, BackbaseCoreModule } from '@backbase/foundation-ang/core';\nimport * as i1$1 from '@backbase/data-ang/notifications';\nimport * as i5 from '@backbase/notifications-common-ang';\nimport { BaseWidgetPropertiesService, getPropertyValue, modelItemToBoolean, shareReplayOnce, secondsToMilliseconds as secondsToMilliseconds$1, NOTIFICATIONS_BADGE_FORCE_UPDATE_EVENT, NOTIFICATIONS_CREATE_LOCAL_EVENT, leaveZone, enterZone, NotificationsCommonModule } from '@backbase/notifications-common-ang';\nimport { map, first, switchMap, take, tap, delayWhen, delay, observeOn, takeUntil } from 'rxjs/operators';\nimport { BehaviorSubject, Subject, of, combineLatest, asyncScheduler, merge } from 'rxjs';\nimport { PUBSUB } from '@backbase/foundation-ang/web-sdk';\nimport * as i1$2 from '@backbase/ui-ang/alert';\nimport { AlertModule } from '@backbase/ui-ang/alert';\nimport { BbTemplate as BbTemplate$1 } from '@backbase/foundation-ang/core/';\nimport * as i1$3 from '@backbase/ui-ang/notification';\nimport * as i6 from '@backbase/ui-ang/ellipsis';\nimport { EllipsisModule } from '@backbase/ui-ang/ellipsis';\n\nfunction NotificationsStickyListItemComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"bb-alert-ui\", 2);\n    i0.ɵɵlistener(\"close\", function NotificationsStickyListItemComponent_ng_template_1_Template_bb_alert_ui_close_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const notification_r2 = restoredCtx.context;\n      const host_r1 = restoredCtx.$implicit;\n      return host_r1.onClose(notification_r2);\n    });\n    i0.ɵɵelement(1, \"div\", 3);\n    i0.ɵɵpipe(2, \"interpolateLink\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const host_r1 = ctx.$implicit;\n    const notification_r2 = ctx.context;\n    i0.ɵɵproperty(\"dismissible\", true)(\"modifier\", host_r1.parseNotificationSeverityLevel(notification_r2 == null ? null : notification_r2.level))(\"title\", (notification_r2 == null ? null : notification_r2.title) || \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind4(2, 4, notification_r2 == null ? null : notification_r2.message, notification_r2, true, \"alert-link\"), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction NotificationsStickyListComponent_ng_template_2_bb_notifications_sticky_list_item_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"bb-notifications-sticky-list-item\", 3);\n    i0.ɵɵlistener(\"focusin\", function NotificationsStickyListComponent_ng_template_2_bb_notifications_sticky_list_item_0_Template_bb_notifications_sticky_list_item_focusin_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const host_r1 = i0.ɵɵnextContext().$implicit;\n      return host_r1.onFocus($event);\n    })(\"close\", function NotificationsStickyListComponent_ng_template_2_bb_notifications_sticky_list_item_0_Template_bb_notifications_sticky_list_item_close_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const host_r1 = i0.ɵɵnextContext().$implicit;\n      return host_r1.onReadNotification($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"notification\", item_r4);\n  }\n}\n\nfunction NotificationsStickyListComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, NotificationsStickyListComponent_ng_template_2_bb_notifications_sticky_list_item_0_Template, 1, 1, \"bb-notifications-sticky-list-item\", 2);\n  }\n\n  if (rf & 2) {\n    const host_r1 = ctx.$implicit;\n    const notifications_r2 = ctx.context.notifications;\n    i0.ɵɵproperty(\"ngForOf\", notifications_r2)(\"ngForTrackBy\", host_r1.trackById);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    notifications: a0\n  };\n};\n\nconst _c1 = [\"popupHeader\"];\nconst _c2 = [\"popupMessage\"];\n\nfunction NotificationsPopupsItemComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0, 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"bbHostRef\", ctx_r1)(\"bbTemplateContext\", ctx_r1.notification);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0, 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"bbHostRef\", ctx_r3)(\"bbTemplateContext\", ctx_r3.notification);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(2, \"span\", 7);\n    i0.ɵɵpipe(3, \"notificationLocalization\");\n  }\n\n  if (rf & 2) {\n    const notification_r7 = ctx.context;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (notification_r7 == null ? null : notification_r7.level) || \"\", \", \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind2(3, 2, notification_r7, \"title\"), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_5_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_5_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function NotificationsPopupsItemComponent_ng_template_5_button_3_Template_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const hostRef_r8 = i0.ɵɵnextContext().$implicit;\n      return hostRef_r8.openNotificationDetails($event);\n    });\n    i0.ɵɵi18nStart(1, 14);\n    i0.ɵɵelement(2, \"span\");\n    i0.ɵɵi18nEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_5_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelement(1, \"div\", 7);\n    i0.ɵɵpipe(2, \"interpolateLink\");\n    i0.ɵɵpipe(3, \"notificationLocalization\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext();\n    const hostRef_r8 = ctx_r19.$implicit;\n    const notification_r9 = ctx_r19.context;\n    i0.ɵɵproperty(\"hostRef\", hostRef_r8);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind4(2, 2, i0.ɵɵpipeBind2(3, 7, notification_r9, \"message\"), notification_r9, true, \"bb-notification__message-link\"), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_5_ng_template_7_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_5_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"bb-ellipsis-ui\", 16);\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵtemplate(2, NotificationsPopupsItemComponent_ng_template_5_ng_template_7_ng_container_2_Template, 1, 0, \"ng-container\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const hostRef_r8 = i0.ɵɵnextContext().$implicit;\n\n    const _r12 = i0.ɵɵreference(6);\n\n    i0.ɵɵproperty(\"tooltipTriggers\", \"\")(\"lineClamp\", i0.ɵɵpipeBind1(1, 3, hostRef_r8.popupMessageLineAmount$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r12);\n  }\n}\n\nfunction NotificationsPopupsItemComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, NotificationsPopupsItemComponent_ng_template_5_ng_container_0_Template, 1, 0, \"ng-container\", 8);\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵelement(2, \"bb-notifications-capability-icon\", 9);\n    i0.ɵɵtemplate(3, NotificationsPopupsItemComponent_ng_template_5_button_3_Template, 3, 0, \"button\", 10);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵtemplate(5, NotificationsPopupsItemComponent_ng_template_5_ng_template_5_Template, 4, 10, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(7, NotificationsPopupsItemComponent_ng_template_5_ng_template_7_Template, 3, 5, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const hostRef_r8 = ctx.$implicit;\n    const notification_r9 = ctx.context;\n\n    const _r12 = i0.ɵɵreference(6);\n\n    const _r14 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"ngTemplateOutlet\", i0.ɵɵpipeBind1(1, 3, hostRef_r8.popupMessageLineAmount$) ? _r14 : _r12);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"origin\", notification_r9 == null ? null : notification_r9.origin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", hostRef_r8.isMessageTruncated && i0.ɵɵpipeBind1(4, 5, hostRef_r8.displayShowMoreButtonInPopup$));\n  }\n}\n\nfunction NotificationsPopupsListComponent_ng_template_2_bb_notifications_popups_item_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"bb-notifications-popups-item\", 3);\n  }\n\n  if (rf & 2) {\n    const notification_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext();\n    const notifications_r2 = ctx_r6.context;\n    const hostRef_r1 = ctx_r6.$implicit;\n    i0.ɵɵproperty(\"notification\", notification_r4)(\"notificationTimeout\", hostRef_r1.getNotificationTimeoutByIndex(i_r5, notifications_r2.length));\n  }\n}\n\nfunction NotificationsPopupsListComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, NotificationsPopupsListComponent_ng_template_2_bb_notifications_popups_item_0_Template, 1, 2, \"bb-notifications-popups-item\", 2);\n  }\n\n  if (rf & 2) {\n    const notifications_r2 = ctx.context;\n    i0.ɵɵproperty(\"ngForOf\", notifications_r2);\n  }\n}\n\nconst NOTIFICATION_LOCAL = 'NOTIFICATION_LOCAL';\n\nconst secondsToMilliseconds = seconds => seconds * 1000;\n\nconst fromHttpResponse = response => {\n  if (response.body === null) {\n    throw new Error('Response body not set');\n  }\n\n  return response.body;\n};\n\nconst notificationsStreamToSticky = notificationsStream => notificationsStream.filter(item => !!item.expiresOn);\n\nconst notificationsStreamToPopups = notificationsStream => notificationsStream.filter(item => !item.expiresOn); // eslint-disable-next-line arrow-body-style\n\n\nconst parseNotificationSeverityLevel = level => {\n  return level === 'ALERT' ? 'error' : level.toLowerCase();\n}; // eslint-disable-next-line arrow-body-style\n\n\nconst severityTypeToSeverityLevel = type => {\n  return type === 'error' ? 'ALERT' : type.toUpperCase();\n};\n\nconst notificationLocalToStreamItem = notification => {\n  const timestamp = Date.now();\n  const date = new Date(timestamp).toISOString();\n  return Object.assign({\n    id: `${NOTIFICATION_LOCAL}_${timestamp + Math.floor(Math.random() * 1000)}`,\n    createdOn: date,\n    title: notification.title,\n    message: notification.message,\n    level: severityTypeToSeverityLevel(notification.level)\n  }, notification.sticky && {\n    expiresOn: date\n  });\n};\n\nconst DefaultWidgetProperties = {\n  allowedRoutes: [],\n  autofocus: true,\n  popupMessageLineAmount: 2,\n  displayShowMoreButtonInPopup: false,\n  origins: [],\n  severityLevels: [],\n  pollingInterval: 15\n};\n\nclass WidgetPropertiesService extends BaseWidgetPropertiesService {\n  constructor(itemModel) {\n    super(itemModel);\n    this.itemModel = itemModel;\n    this.autofocus$$ = new BehaviorSubject(undefined);\n    this.popupMessageLineAmount$$ = new BehaviorSubject(undefined);\n    this.displayShowMoreButtonInPopup$$ = new BehaviorSubject(undefined);\n    this.pollingInterval$$ = new BehaviorSubject(undefined);\n    this.autofocus$ = getPropertyValue(this.autofocus$$, this.autofocus);\n    this.popupMessageLineAmount$ = getPropertyValue(this.popupMessageLineAmount$$, this.popupMessageLineAmount);\n    this.displayShowMoreButtonInPopup$ = getPropertyValue(this.displayShowMoreButtonInPopup$$, this.displayShowMoreButtonInPopup);\n    this.pollingInterval$ = getPropertyValue(this.pollingInterval$$, this.pollingInterval);\n  }\n\n  get autofocus() {\n    if (!this.itemModel) {\n      return this.defaultModelObservable(DefaultWidgetProperties.autofocus);\n    }\n\n    return this.itemModel.property('autofocus', DefaultWidgetProperties.autofocus).pipe(map(modelItemToBoolean), first());\n  }\n\n  get popupMessageLineAmount() {\n    if (!this.itemModel) {\n      return this.defaultModelObservable(DefaultWidgetProperties.popupMessageLineAmount);\n    }\n\n    return this.itemModel.property('popupMessageLineAmount', '').pipe(map(Number), first());\n  }\n\n  get displayShowMoreButtonInPopup() {\n    if (!this.itemModel) {\n      return this.defaultModelObservable(DefaultWidgetProperties.displayShowMoreButtonInPopup);\n    }\n\n    return this.itemModel.property('displayShowMoreButtonInPopup', DefaultWidgetProperties.displayShowMoreButtonInPopup).pipe(map(modelItemToBoolean), first());\n  }\n\n  get pollingInterval() {\n    if (!this.itemModel) {\n      return this.defaultModelObservable(DefaultWidgetProperties.pollingInterval * 1000);\n    }\n\n    return this.itemModel.property('pollingInterval', DefaultWidgetProperties.pollingInterval).pipe(map(Number), map(n => n * 1000), shareReplayOnce());\n  }\n\n  setAutofocus(value) {\n    this.autofocus$$.next(modelItemToBoolean(value));\n  }\n\n  setPopupMessageLineAmount(value) {\n    this.popupMessageLineAmount$$.next(Number(value));\n  }\n\n  setDisplayShowMoreButtonInPopup(value) {\n    this.displayShowMoreButtonInPopup$$.next(modelItemToBoolean(value));\n  }\n\n  setPollingInterval(value) {\n    const pollingInterval = Number(value);\n\n    if (!isNaN(pollingInterval) && pollingInterval > 0) {\n      this.pollingInterval$$.next(secondsToMilliseconds$1(pollingInterval));\n    }\n  }\n\n}\n/** @nocollapse */\n\n\nWidgetPropertiesService.ɵfac = function WidgetPropertiesService_Factory(t) {\n  return new (t || WidgetPropertiesService)(i0.ɵɵinject(i1.ItemModel, 8));\n};\n/** @nocollapse */\n\n\nWidgetPropertiesService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: WidgetPropertiesService,\n  factory: WidgetPropertiesService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(WidgetPropertiesService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.ItemModel,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\nconst DEFAULT_POLLING_INTERVAL = 15;\n\nclass NotificationsPopupsDataService {\n  constructor(dataHttpService, ngZone, properties, pubSub) {\n    this.dataHttpService = dataHttpService;\n    this.ngZone = ngZone;\n    this.properties = properties;\n    this.pubSub = pubSub;\n    /**\n     * Mark notification as read stream\n     */\n\n    this.markNotificationAsRead$ = new Subject();\n    this.notificationsStreamForceUpdate$ = new Subject();\n    this.polling$ = new Subject();\n    this.notificationsLocalStickySource = new Map();\n    this.origins$ = this.properties.origins$;\n    this.severityLevels$ = this.properties.severityLevels$;\n    this.pollingInterval$ = this.properties.pollingInterval$;\n    this.notificationsStream$ = this.initializeNotificationsStreamPolling();\n    this.stickyNotificationsStream$ = this.notificationsStream$.pipe(map(notificationsStreamToSticky));\n    this.popupsNotificationsStream$ = this.notificationsStream$.pipe(map(notificationsStreamToPopups));\n    this.markNotificationAsRead$.subscribe(payload => {\n      this.pubSub.publish(NOTIFICATIONS_BADGE_FORCE_UPDATE_EVENT, typeof payload === 'object' ? {\n        origin: payload.origin,\n        level: payload.level\n      } : undefined);\n    });\n    this.pubSub.subscribe(NOTIFICATIONS_CREATE_LOCAL_EVENT, notification => {\n      const parsedNotification = notificationLocalToStreamItem(notification);\n\n      if (notification.sticky) {\n        this.notificationsLocalStickySource.set(parsedNotification.id, parsedNotification);\n      }\n\n      this.notificationsStream$.pipe(switchMap(stream => {\n        const popup = !notification.sticky && [parsedNotification] || [];\n        const stickies = this.notificationsLocalSticky;\n        return of([...stream, ...stickies, ...popup]);\n      }), map(concatenatedStream => Array.from(new Map(concatenatedStream.map(item => [item.id, item])).values())), take(1)).subscribe(notificationsStream => this.notificationsStreamForceUpdate$.next(notificationsStream));\n    });\n  }\n\n  get notificationsLocalSticky() {\n    return Array.from(this.notificationsLocalStickySource.values());\n  }\n  /**\n   * Mark notification as read\n   *\n   * @param notification Notification data\n   */\n\n\n  markNotificationAsRead(notification) {\n    const id = typeof notification === 'string' ? notification : notification.id;\n\n    if (id.match(NOTIFICATION_LOCAL)) {\n      this.removeNotificationItemFromStream(id);\n      this.notificationsLocalStickySource.delete(id);\n    } else {\n      this.dataHttpService.putMarkAsRead({\n        id,\n        markAsReadPutRequestBody: {\n          read: true\n        }\n      }).subscribe(() => {\n        this.removeNotificationItemFromStream(id);\n        this.markNotificationAsRead$.next(notification);\n      });\n    }\n  }\n\n  requestNotificationsStream() {\n    return combineLatest([this.pollingInterval$, this.origins$, this.severityLevels$]).pipe(first(), switchMap(([interval, origins, levels]) => this.dataHttpService.getNotificationsStream(Object.assign(Object.assign({\n      interval\n    }, origins.length && {\n      origins\n    }), levels && {\n      levels: levels.join(', ')\n    }), 'response')), map(fromHttpResponse));\n  }\n\n  removeNotificationItemFromStream(notificationId) {\n    this.notificationsStream$.pipe(first(), map(notificationsStream => notificationsStream.filter(({\n      id\n    }) => id !== notificationId))).subscribe(notificationsStream => this.notificationsStreamForceUpdate$.next(notificationsStream));\n  }\n\n  initializeNotificationsStreamPolling() {\n    const pollAndRequest$ = of(undefined).pipe(tap(() => this.polling$.next()), switchMap(() => this.requestNotificationsStream()));\n    const pollingNotificationsStream$ = this.polling$.pipe(switchMap(() => this.pollingInterval$), delayWhen(pollingInterval => of().pipe(delay(pollingInterval, leaveZone(this.ngZone, asyncScheduler)))), switchMap(() => pollAndRequest$), observeOn(enterZone(this.ngZone, asyncScheduler)));\n    return merge(this.notificationsStreamForceUpdate$, pollingNotificationsStream$.pipe(switchMap(stream => of([...stream, ...this.notificationsLocalSticky]))), pollAndRequest$.pipe(switchMap(stream => of([...stream, ...this.notificationsLocalSticky])))).pipe(shareReplayOnce());\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsPopupsDataService.ɵfac = function NotificationsPopupsDataService_Factory(t) {\n  return new (t || NotificationsPopupsDataService)(i0.ɵɵinject(i1$1.NotificationsHttpService), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(WidgetPropertiesService), i0.ɵɵinject(PUBSUB));\n};\n/** @nocollapse */\n\n\nNotificationsPopupsDataService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NotificationsPopupsDataService,\n  factory: NotificationsPopupsDataService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsDataService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1$1.NotificationsHttpService\n    }, {\n      type: i0.NgZone\n    }, {\n      type: WidgetPropertiesService\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PUBSUB]\n      }]\n    }];\n  }, null);\n})();\n\nclass NotificationsPopupsRouterService {\n  constructor() {\n    this.popupsRoutingSubject = new Subject();\n    /**\n     * Popups notification routing stream\n     */\n\n    this.popupsRouting$ = this.popupsRoutingSubject.asObservable();\n  }\n  /**\n   * Emit popups routing\n   *\n   * @param routing Notification routing data\n   */\n\n\n  emitPopupsRouting(routing) {\n    this.popupsRoutingSubject.next(routing);\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsPopupsRouterService.ɵfac = function NotificationsPopupsRouterService_Factory(t) {\n  return new (t || NotificationsPopupsRouterService)();\n};\n/** @nocollapse */\n\n\nNotificationsPopupsRouterService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NotificationsPopupsRouterService,\n  factory: NotificationsPopupsRouterService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsRouterService, [{\n    type: Injectable\n  }], null, null);\n})();\n\nclass NotificationsStickyListItemComponent {\n  constructor() {\n    /**\n     * Notification stream item close event\n     * Emits notification stream item id\n     */\n    // eslint-disable-next-line @angular-eslint/no-output-native\n    this.close = new EventEmitter();\n  }\n  /**\n   * Method to handle close event from alert component\n   *\n   * @param notification Notification data\n   */\n\n\n  onClose(notification) {\n    this.close.emit(notification);\n  }\n  /**\n   * Method to parse severity level into alert modifier\n   *\n   * @param level Severity level\n   * @returns Notification severity level type\n   */\n\n\n  parseNotificationSeverityLevel(level) {\n    return parseNotificationSeverityLevel(level);\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsStickyListItemComponent.ɵfac = function NotificationsStickyListItemComponent_Factory(t) {\n  return new (t || NotificationsStickyListItemComponent)();\n};\n/** @nocollapse */\n\n\nNotificationsStickyListItemComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationsStickyListItemComponent,\n  selectors: [[\"bb-notifications-sticky-list-item\"]],\n  inputs: {\n    notification: \"notification\"\n  },\n  outputs: {\n    close: \"close\"\n  },\n  decls: 2,\n  vars: 2,\n  consts: [[\"bbNotificationsStickyListItemCustomizable\", \"\", 3, \"bbHostRef\", \"bbTemplateContext\"], [\"bbNotificationsStickyListItemCustomizable\", \"\"], [3, \"dismissible\", \"modifier\", \"title\", \"close\"], [\"data-role\", \"notification-sticky-message\", 1, \"bb-subtitle\", 3, \"innerHTML\"]],\n  template: function NotificationsStickyListItemComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainer(0, 0);\n      i0.ɵɵtemplate(1, NotificationsStickyListItemComponent_ng_template_1_Template, 3, 9, \"ng-template\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"bbHostRef\", ctx)(\"bbTemplateContext\", ctx.notification);\n    }\n  },\n  directives: function () {\n    return [NotificationsStickyListItemCustomizableDirective, i1$2.AlertComponent];\n  },\n  pipes: function () {\n    return [i5.ӨInterpolateLinkPipe];\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsStickyListItemComponent, [{\n    type: Component,\n    args: [{\n      selector: 'bb-notifications-sticky-list-item',\n      templateUrl: './notifications-sticky-list-item.component.html'\n    }]\n  }], null, {\n    notification: [{\n      type: Input\n    }],\n    close: [{\n      type: Output\n    }]\n  });\n})();\n\nclass NotificationsStickyListItemCustomizableDirective extends BbTemplate {}\n/** @nocollapse */\n\n\nNotificationsStickyListItemCustomizableDirective.ɵfac = /* @__PURE__ */function () {\n  let ɵNotificationsStickyListItemCustomizableDirective_BaseFactory;\n  return function NotificationsStickyListItemCustomizableDirective_Factory(t) {\n    return (ɵNotificationsStickyListItemCustomizableDirective_BaseFactory || (ɵNotificationsStickyListItemCustomizableDirective_BaseFactory = i0.ɵɵgetInheritedFactory(NotificationsStickyListItemCustomizableDirective)))(t || NotificationsStickyListItemCustomizableDirective);\n  };\n}();\n/** @nocollapse */\n\n\nNotificationsStickyListItemCustomizableDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NotificationsStickyListItemCustomizableDirective,\n  selectors: [[\"\", \"bbNotificationsStickyListItemCustomizable\", \"\"]],\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsStickyListItemCustomizableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bbNotificationsStickyListItemCustomizable]'\n    }]\n  }], null, null);\n})();\n\nclass NotificationsStickyListComponent {\n  constructor(dataService, elem) {\n    this.dataService = dataService;\n    this.elem = elem;\n    /**\n     * Notification sticky stream data\n     */\n\n    this.notifications$ = this.dataService.stickyNotificationsStream$;\n  }\n  /**\n   * Method to call mark notification as read request by id\n   *\n   * @param notification Notification data\n   */\n\n\n  onReadNotification(notification) {\n    this.dataService.markNotificationAsRead(notification);\n    const notifications = this.elem.nativeElement.querySelectorAll('bb-notifications-sticky-list-item');\n    const deletedNotificationIndex$ = this.notifications$.pipe(map(notificationElements => notificationElements.findIndex(item => typeof notification === 'string' ? notification === item.id : notification.id === item.id)));\n    deletedNotificationIndex$.pipe(first()).subscribe(index => {\n      if (notifications[index + 1]) {\n        notifications[index + 1].getElementsByTagName('button')[0].focus();\n      } else if (notifications[index - 1]) {\n        notifications[index - 1].getElementsByTagName('button')[0].focus();\n      } else if (this.previousFocusedElement) {\n        this.previousFocusedElement.focus();\n      }\n    });\n  }\n  /**\n   * Method to differentiate notifications by IDs.\n   *\n   * @param _index List item index\n   * @param notification Notification list item\n   * @returns Notification id\n   */\n\n\n  trackById(_index, notification) {\n    return notification.id;\n  }\n  /**\n   * Method to change focus.\n   *\n   * @param event Focus event\n   */\n\n\n  onFocus(event) {\n    if (!this.previousFocusedElement) {\n      this.previousFocusedElement = event.relatedTarget;\n    }\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsStickyListComponent.ɵfac = function NotificationsStickyListComponent_Factory(t) {\n  return new (t || NotificationsStickyListComponent)(i0.ɵɵdirectiveInject(NotificationsPopupsDataService), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n/** @nocollapse */\n\n\nNotificationsStickyListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationsStickyListComponent,\n  selectors: [[\"bb-notifications-sticky-list\"]],\n  decls: 3,\n  vars: 6,\n  consts: [[\"bbNotificationsStickyListCustomizable\", \"\", 3, \"bbHostRef\", \"bbTemplateContext\"], [\"bbNotificationsStickyListCustomizable\", \"\"], [3, \"notification\", \"focusin\", \"close\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"notification\", \"focusin\", \"close\"]],\n  template: function NotificationsStickyListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainer(0, 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵtemplate(2, NotificationsStickyListComponent_ng_template_2_Template, 1, 2, \"ng-template\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"bbHostRef\", ctx)(\"bbTemplateContext\", i0.ɵɵpureFunction1(4, _c0, i0.ɵɵpipeBind1(1, 2, ctx.notifications$)));\n    }\n  },\n  directives: function () {\n    return [NotificationsStickyListCustomizableDirective, i3.NgForOf, NotificationsStickyListItemComponent];\n  },\n  pipes: function () {\n    return [i3.AsyncPipe];\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsStickyListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'bb-notifications-sticky-list',\n      templateUrl: './notifications-sticky-list.component.html'\n    }]\n  }], function () {\n    return [{\n      type: NotificationsPopupsDataService\n    }, {\n      type: i0.ElementRef\n    }];\n  }, null);\n})();\n\nclass NotificationsStickyListCustomizableDirective extends BbTemplate {}\n/** @nocollapse */\n\n\nNotificationsStickyListCustomizableDirective.ɵfac = /* @__PURE__ */function () {\n  let ɵNotificationsStickyListCustomizableDirective_BaseFactory;\n  return function NotificationsStickyListCustomizableDirective_Factory(t) {\n    return (ɵNotificationsStickyListCustomizableDirective_BaseFactory || (ɵNotificationsStickyListCustomizableDirective_BaseFactory = i0.ɵɵgetInheritedFactory(NotificationsStickyListCustomizableDirective)))(t || NotificationsStickyListCustomizableDirective);\n  };\n}();\n/** @nocollapse */\n\n\nNotificationsStickyListCustomizableDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NotificationsStickyListCustomizableDirective,\n  selectors: [[\"\", \"bbNotificationsStickyListCustomizable\", \"\"]],\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsStickyListCustomizableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bbNotificationsStickyListCustomizable]'\n    }]\n  }], null, null);\n})();\n/** @dynamic */\n\n\nclass NotificationsPopupsItemComponent {\n  constructor(notificationService, dataService, routerService, properties) {\n    this.notificationService = notificationService;\n    this.dataService = dataService;\n    this.routerService = routerService;\n    this.properties = properties;\n    /**\n     * Notification close delay timeout\n     */\n\n    this.notificationTimeout = 0;\n    /**\n     * Routes available for navigation.\n     */\n\n    this.allowedRoutes$ = this.properties.allowedRoutes$;\n    /**\n     * Stream of widget property with a flag that defines if notification popup should be auto-focused.\n     */\n\n    this.autofocus$ = this.properties.autofocus$;\n    /**\n     * Stream of widget property with a flag that defines if we should display Show More button.\n     */\n\n    this.displayShowMoreButtonInPopup$ = this.properties.displayShowMoreButtonInPopup$;\n    /**\n     * Stream of widget property with the number of lines to show as a notification message.\n     */\n\n    this.popupMessageLineAmount$ = this.properties.popupMessageLineAmount$;\n    /**\n     * The boolean flag that shows if the notification message text exceeds the number of visible lines and is truncated.\n     */\n\n    this.isMessageTruncated = false;\n    /**\n     * destroy$ should emit only when component is destroyed to\n     * signal subscriptions to unsubscribe.\n     */\n\n    this.destroy$ = new Subject();\n  }\n\n  ngAfterViewInit() {\n    if (this.notification) {\n      combineLatest([this.allowedRoutes$, this.displayShowMoreButtonInPopup$, this.autofocus$]).pipe(map(([routes, isShowMoreButtonEnabled, autofocus]) => [this.hasRouting(routes), isShowMoreButtonEnabled, autofocus]), takeUntil(this.destroy$)).subscribe(preferences => {\n        this.createNotificationPopup(preferences);\n      });\n    }\n  }\n  /**\n   * Open notification details in external widget\n   *\n   * @param event Click event\n   */\n\n\n  openNotificationDetails(event) {\n    event.stopPropagation();\n    const routing = {\n      ['where-to']: 'notification-details',\n      data: this.notification\n    };\n    this.readNotification(this.notification);\n    this.routerService.emitPopupsRouting(routing);\n    this.hideNotification();\n  }\n  /**\n   * Set truncation status of notification message\n   *\n   * @param isMessageTruncated Is message truncated flag\n   */\n\n\n  setIsContentTruncated(isMessageTruncated) {\n    this.isMessageTruncated = isMessageTruncated;\n  }\n\n  createNotificationPopup([hasRouting, isShowMoreButtonEnabled, autofocus]) {\n    this.hideNotification = this.notificationService.showNotification(Object.assign(Object.assign(Object.assign({\n      modifier: parseNotificationSeverityLevel(this.notification.level),\n      header: this.popupHeaderTemplate,\n      message: this.popupMessageTemplate,\n      ttl: secondsToMilliseconds(this.notificationTimeout),\n      closeAction: this.readNotification.bind(this, this.notification)\n    }, hasRouting && {\n      hostAction: this.navigateFromPopup.bind(this)\n    }), !hasRouting && isShowMoreButtonEnabled && {\n      hostAction: this.openNotificationDetails.bind(this)\n    }), {\n      autofocus\n    }));\n  }\n\n  readNotification(notification) {\n    this.dataService.markNotificationAsRead(notification);\n  }\n\n  hasRouting(routes) {\n    const route = this.notification.routing && this.notification.routing['where-to'];\n    return Boolean(this.notification.routing) && routes.some(allowedRoute => route === allowedRoute);\n  }\n\n  navigateFromPopup() {\n    this.readNotification(this.notification);\n\n    if (this.notification.routing) {\n      this.routerService.emitPopupsRouting(this.notification.routing);\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsPopupsItemComponent.ɵfac = function NotificationsPopupsItemComponent_Factory(t) {\n  return new (t || NotificationsPopupsItemComponent)(i0.ɵɵdirectiveInject(i1$3.NotificationService), i0.ɵɵdirectiveInject(NotificationsPopupsDataService), i0.ɵɵdirectiveInject(NotificationsPopupsRouterService), i0.ɵɵdirectiveInject(WidgetPropertiesService));\n};\n/** @nocollapse */\n\n\nNotificationsPopupsItemComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationsPopupsItemComponent,\n  selectors: [[\"bb-notifications-popups-item\"]],\n  viewQuery: function NotificationsPopupsItemComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.popupHeaderTemplate = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.popupMessageTemplate = _t.first);\n    }\n  },\n  inputs: {\n    notification: \"notification\",\n    notificationTimeout: \"notificationTimeout\"\n  },\n  decls: 6,\n  vars: 0,\n  consts: function () {\n    let i18n_3;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc Aria-label for See more button\n       */\n      const MSG_C__USERS_HBAYLON_DOCUMENTS_WEST_MONROE_PROJECTS_BACKBASE2_WEB_RETAIL_USA_WEB_NODE_MODULES__BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_FESM2015_BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_JS__4 = goog.getMsg(\"See more notification details\");\n      i18n_3 = MSG_C__USERS_HBAYLON_DOCUMENTS_WEST_MONROE_PROJECTS_BACKBASE2_WEB_RETAIL_USA_WEB_NODE_MODULES__BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_FESM2015_BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_JS__4;\n    } else {\n      i18n_3 = $localize`:Aria-label for See more button@@notification.popup.see-more.button.aria-label:See more notification details`;\n    }\n\n    let i18n_5;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      /**\n       * @desc Notification pop-up See more button\\@notification.popup.see-more.button\n       */\n      const MSG_C__USERS_HBAYLON_DOCUMENTS_WEST_MONROE_PROJECTS_BACKBASE2_WEB_RETAIL_USA_WEB_NODE_MODULES__BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_FESM2015_BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_JS___6 = goog.getMsg(\"{$startTagSpan}See more{$closeTagSpan}\", {\n        \"startTagSpan\": \"\\uFFFD#2\\uFFFD\",\n        \"closeTagSpan\": \"\\uFFFD/#2\\uFFFD\"\n      });\n      i18n_5 = MSG_C__USERS_HBAYLON_DOCUMENTS_WEST_MONROE_PROJECTS_BACKBASE2_WEB_RETAIL_USA_WEB_NODE_MODULES__BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_FESM2015_BACKBASE_NOTIFICATIONS_POPUPS_WIDGET_ANG_JS___6;\n    } else {\n      i18n_5 = $localize`:Notification pop-up See more button@notification.popup.see-more.button:${\"\\uFFFD#2\\uFFFD\"}:START_TAG_SPAN:See more${\"\\uFFFD/#2\\uFFFD\"}:CLOSE_TAG_SPAN:`;\n    }\n\n    return [[\"popupHeader\", \"\"], [\"popupMessage\", \"\"], [\"bbNotificationsPopupsItemHeaderCustomizable\", \"\"], [\"bbNotificationsPopupsItemMessageCustomizable\", \"\"], [\"bbNotificationsPopupsItemHeaderCustomizable\", \"\", 3, \"bbHostRef\", \"bbTemplateContext\"], [\"bbNotificationsPopupsItemMessageCustomizable\", \"\", 3, \"bbHostRef\", \"bbTemplateContext\"], [1, \"sr-only\"], [3, \"innerHTML\"], [4, \"ngTemplateOutlet\"], [3, \"origin\"], [\"type\", \"button\", \"class\", \"btn-link-text bb-text-bold bb-notification__details-button\", \"aria-label\", i18n_3, 3, \"click\", 4, \"ngIf\"], [\"messageContent\", \"\"], [\"truncatedMessageContent\", \"\"], [\"type\", \"button\", \"aria-label\", i18n_3, 1, \"btn-link-text\", \"bb-text-bold\", \"bb-notification__details-button\", 3, \"click\"], i18n_5, [\"bbIsElementContentTruncated\", \"\", 1, \"bb-block\", 3, \"hostRef\"], [3, \"tooltipTriggers\", \"lineClamp\"]];\n  },\n  template: function NotificationsPopupsItemComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, NotificationsPopupsItemComponent_ng_template_0_Template, 1, 2, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(2, NotificationsPopupsItemComponent_ng_template_2_Template, 1, 2, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(4, NotificationsPopupsItemComponent_ng_template_4_Template, 4, 5, \"ng-template\", 2);\n      i0.ɵɵtemplate(5, NotificationsPopupsItemComponent_ng_template_5_Template, 9, 7, \"ng-template\", 3);\n    }\n  },\n  directives: function () {\n    return [NotificationsPopupsItemHeaderCustomizableDirective, NotificationsPopupsItemMessageCustomizableDirective, i3.NgTemplateOutlet, i5.NotificationsCapabilityIconComponent, i3.NgIf, i5.ӨIsElementContentTruncatedDirective, i6.EllipsisComponent];\n  },\n  pipes: function () {\n    return [i5.ӨNotificationLocalizationPipe, i3.AsyncPipe, i5.ӨInterpolateLinkPipe];\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsItemComponent, [{\n    type: Component,\n    args: [{\n      selector: 'bb-notifications-popups-item',\n      templateUrl: './notifications-popups-item.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1$3.NotificationService\n    }, {\n      type: NotificationsPopupsDataService\n    }, {\n      type: NotificationsPopupsRouterService\n    }, {\n      type: WidgetPropertiesService\n    }];\n  }, {\n    notification: [{\n      type: Input\n    }],\n    notificationTimeout: [{\n      type: Input\n    }],\n    popupHeaderTemplate: [{\n      type: ViewChild,\n      args: ['popupHeader']\n    }],\n    popupMessageTemplate: [{\n      type: ViewChild,\n      args: ['popupMessage']\n    }]\n  });\n})();\n\nclass NotificationsPopupsItemHeaderCustomizableDirective extends BbTemplate {}\n/** @nocollapse */\n\n\nNotificationsPopupsItemHeaderCustomizableDirective.ɵfac = /* @__PURE__ */function () {\n  let ɵNotificationsPopupsItemHeaderCustomizableDirective_BaseFactory;\n  return function NotificationsPopupsItemHeaderCustomizableDirective_Factory(t) {\n    return (ɵNotificationsPopupsItemHeaderCustomizableDirective_BaseFactory || (ɵNotificationsPopupsItemHeaderCustomizableDirective_BaseFactory = i0.ɵɵgetInheritedFactory(NotificationsPopupsItemHeaderCustomizableDirective)))(t || NotificationsPopupsItemHeaderCustomizableDirective);\n  };\n}();\n/** @nocollapse */\n\n\nNotificationsPopupsItemHeaderCustomizableDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NotificationsPopupsItemHeaderCustomizableDirective,\n  selectors: [[\"\", \"bbNotificationsPopupsItemHeaderCustomizable\", \"\"]],\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsItemHeaderCustomizableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bbNotificationsPopupsItemHeaderCustomizable]'\n    }]\n  }], null, null);\n})();\n\nclass NotificationsPopupsItemMessageCustomizableDirective extends BbTemplate {}\n/** @nocollapse */\n\n\nNotificationsPopupsItemMessageCustomizableDirective.ɵfac = /* @__PURE__ */function () {\n  let ɵNotificationsPopupsItemMessageCustomizableDirective_BaseFactory;\n  return function NotificationsPopupsItemMessageCustomizableDirective_Factory(t) {\n    return (ɵNotificationsPopupsItemMessageCustomizableDirective_BaseFactory || (ɵNotificationsPopupsItemMessageCustomizableDirective_BaseFactory = i0.ɵɵgetInheritedFactory(NotificationsPopupsItemMessageCustomizableDirective)))(t || NotificationsPopupsItemMessageCustomizableDirective);\n  };\n}();\n/** @nocollapse */\n\n\nNotificationsPopupsItemMessageCustomizableDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NotificationsPopupsItemMessageCustomizableDirective,\n  selectors: [[\"\", \"bbNotificationsPopupsItemMessageCustomizable\", \"\"]],\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsItemMessageCustomizableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bbNotificationsPopupsItemMessageCustomizable]'\n    }]\n  }], null, null);\n})();\n\nconst DEFAULT_NOTIFICATION_TIMEOUT = 5;\n\nclass NotificationsPopupsListComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    /**\n     * Notification popups stream data in reversed order\n     */\n\n    this.popups$ = this.dataService.popupsNotificationsStream$.pipe(map(this.parsePopupsData));\n  }\n  /**\n   * Method to parse popups stream data in reversed order\n   * for correct rendering by show notificaton service\n   */\n\n\n  parsePopupsData(array) {\n    return array.reverse();\n  }\n  /**\n   * Method to get close notification timeout value for each popup\n   *\n   * @param index List item index\n   * @param length List length\n   * @returns Number of seconds before notification popup close\n   */\n\n\n  getNotificationTimeoutByIndex(index, length) {\n    return DEFAULT_NOTIFICATION_TIMEOUT + length - index - 1;\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsPopupsListComponent.ɵfac = function NotificationsPopupsListComponent_Factory(t) {\n  return new (t || NotificationsPopupsListComponent)(i0.ɵɵdirectiveInject(NotificationsPopupsDataService));\n};\n/** @nocollapse */\n\n\nNotificationsPopupsListComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationsPopupsListComponent,\n  selectors: [[\"bb-notifications-popups-list\"]],\n  decls: 3,\n  vars: 4,\n  consts: [[\"bbNotificationsPopupsListCustomizable\", \"\", 3, \"bbHostRef\", \"bbTemplateContext\"], [\"bbNotificationsPopupsListCustomizable\", \"\"], [3, \"notification\", \"notificationTimeout\", 4, \"ngFor\", \"ngForOf\"], [3, \"notification\", \"notificationTimeout\"]],\n  template: function NotificationsPopupsListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementContainer(0, 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵtemplate(2, NotificationsPopupsListComponent_ng_template_2_Template, 1, 1, \"ng-template\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"bbHostRef\", ctx)(\"bbTemplateContext\", i0.ɵɵpipeBind1(1, 2, ctx.popups$));\n    }\n  },\n  directives: function () {\n    return [NotificationsPopupsListCustomizableDirective, i3.NgForOf, NotificationsPopupsItemComponent];\n  },\n  pipes: function () {\n    return [i3.AsyncPipe];\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsListComponent, [{\n    type: Component,\n    args: [{\n      selector: 'bb-notifications-popups-list',\n      templateUrl: './notifications-popups-list.component.html'\n    }]\n  }], function () {\n    return [{\n      type: NotificationsPopupsDataService\n    }];\n  }, null);\n})();\n\nclass NotificationsPopupsListCustomizableDirective extends BbTemplate$1 {}\n/** @nocollapse */\n\n\nNotificationsPopupsListCustomizableDirective.ɵfac = /* @__PURE__ */function () {\n  let ɵNotificationsPopupsListCustomizableDirective_BaseFactory;\n  return function NotificationsPopupsListCustomizableDirective_Factory(t) {\n    return (ɵNotificationsPopupsListCustomizableDirective_BaseFactory || (ɵNotificationsPopupsListCustomizableDirective_BaseFactory = i0.ɵɵgetInheritedFactory(NotificationsPopupsListCustomizableDirective)))(t || NotificationsPopupsListCustomizableDirective);\n  };\n}();\n/** @nocollapse */\n\n\nNotificationsPopupsListCustomizableDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NotificationsPopupsListCustomizableDirective,\n  selectors: [[\"\", \"bbNotificationsPopupsListCustomizable\", \"\"]],\n  features: [i0.ɵɵInheritDefinitionFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsListCustomizableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bbNotificationsPopupsListCustomizable]'\n    }]\n  }], null, null);\n})();\n/* eslint-disable @angular-eslint/no-input-rename */\n\n\nclass NotificationsPopupsWidgetComponent {\n  constructor(routerService, properties) {\n    this.routerService = routerService;\n    this.properties = properties;\n    /**\n     * Navigation Data emitter.\n     */\n\n    this.notificationRouting = new EventEmitter();\n    this.destroy$ = new Subject();\n  }\n  /**\n   * Comma-separated list of notifications origins to process (empty for all).\n   */\n\n\n  set originsValue(value) {\n    if (value !== undefined) {\n      this.properties.setOrigins(value);\n    }\n  }\n  /**\n   * Comma-separated list of notifications severity levels to process (empty for all).\n   */\n\n\n  set severityLevelsValue(value) {\n    if (value !== undefined) {\n      this.properties.setSeverityLevels(value);\n    }\n  }\n  /**\n   * Polling interval (in seconds).\n   */\n\n\n  set pollingIntervalValue(value) {\n    if (value !== undefined) {\n      this.properties.setPollingInterval(value);\n    }\n  }\n  /**\n   * String of allowed routes for navigation (conversation-view, arrangement-view, transaction-view, party-view, etc.).\n   */\n\n\n  set allowedRoutesValue(value) {\n    if (value !== undefined) {\n      this.properties.setAllowedRoutes(value);\n    }\n  }\n  /**\n   * Auto-focus.\n   */\n\n\n  set autofocusValue(value) {\n    if (value !== undefined) {\n      this.properties.setAutofocus(value);\n    }\n  }\n  /**\n   * Display See More button.\n   */\n\n\n  set displayShowMoreButtonInPopupValue(value) {\n    if (value !== undefined) {\n      this.properties.setDisplayShowMoreButtonInPopup(value);\n    }\n  }\n  /**\n   * Number of displayed lines in notification message emitter.\n   */\n\n\n  set popupMessageLineAmountValue(value) {\n    if (value !== undefined) {\n      this.properties.setPopupMessageLineAmount(value);\n    }\n  }\n\n  ngOnInit() {\n    this.routerService.popupsRouting$.pipe(takeUntil(this.destroy$)).subscribe(this.notificationRouting);\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n}\n/** @nocollapse */\n\n\nNotificationsPopupsWidgetComponent.ɵfac = function NotificationsPopupsWidgetComponent_Factory(t) {\n  return new (t || NotificationsPopupsWidgetComponent)(i0.ɵɵdirectiveInject(NotificationsPopupsRouterService), i0.ɵɵdirectiveInject(WidgetPropertiesService));\n};\n/** @nocollapse */\n\n\nNotificationsPopupsWidgetComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NotificationsPopupsWidgetComponent,\n  selectors: [[\"bb-notifications-popups-widget\"]],\n  inputs: {\n    originsValue: [\"origins\", \"originsValue\"],\n    severityLevelsValue: [\"severityLevels\", \"severityLevelsValue\"],\n    pollingIntervalValue: [\"pollingInterval\", \"pollingIntervalValue\"],\n    allowedRoutesValue: [\"allowedRoutes\", \"allowedRoutesValue\"],\n    autofocusValue: [\"autofocus\", \"autofocusValue\"],\n    displayShowMoreButtonInPopupValue: [\"displayShowMoreButtonInPopup\", \"displayShowMoreButtonInPopupValue\"],\n    popupMessageLineAmountValue: [\"popupMessageLineAmount\", \"popupMessageLineAmountValue\"]\n  },\n  outputs: {\n    notificationRouting: \"notificationRouting\"\n  },\n  features: [i0.ɵɵProvidersFeature([NotificationsPopupsDataService, NotificationsPopupsRouterService, WidgetPropertiesService])],\n  decls: 2,\n  vars: 0,\n  template: function NotificationsPopupsWidgetComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"bb-notifications-sticky-list\");\n      i0.ɵɵelement(1, \"bb-notifications-popups-list\");\n    }\n  },\n  directives: [NotificationsStickyListComponent, NotificationsPopupsListComponent],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsWidgetComponent, [{\n    type: Component,\n    args: [{\n      selector: 'bb-notifications-popups-widget',\n      template: `\n    <bb-notifications-sticky-list></bb-notifications-sticky-list>\n    <bb-notifications-popups-list></bb-notifications-popups-list>\n  `,\n      providers: [NotificationsPopupsDataService, NotificationsPopupsRouterService, WidgetPropertiesService]\n    }]\n  }], function () {\n    return [{\n      type: NotificationsPopupsRouterService\n    }, {\n      type: WidgetPropertiesService\n    }];\n  }, {\n    originsValue: [{\n      type: Input,\n      args: ['origins']\n    }],\n    severityLevelsValue: [{\n      type: Input,\n      args: ['severityLevels']\n    }],\n    pollingIntervalValue: [{\n      type: Input,\n      args: ['pollingInterval']\n    }],\n    allowedRoutesValue: [{\n      type: Input,\n      args: ['allowedRoutes']\n    }],\n    autofocusValue: [{\n      type: Input,\n      args: ['autofocus']\n    }],\n    displayShowMoreButtonInPopupValue: [{\n      type: Input,\n      args: ['displayShowMoreButtonInPopup']\n    }],\n    popupMessageLineAmountValue: [{\n      type: Input,\n      args: ['popupMessageLineAmount']\n    }],\n    notificationRouting: [{\n      type: Output\n    }]\n  });\n})();\n\nconst components = [NotificationsPopupsWidgetComponent, NotificationsStickyListComponent, NotificationsStickyListItemComponent, NotificationsPopupsListComponent, NotificationsPopupsItemComponent];\nconst directives = [NotificationsStickyListCustomizableDirective, NotificationsStickyListItemCustomizableDirective, NotificationsPopupsItemHeaderCustomizableDirective, NotificationsPopupsItemMessageCustomizableDirective, NotificationsPopupsListCustomizableDirective];\nconst uiModules = [AlertModule, EllipsisModule];\n\nclass NotificationsPopupsWidgetModule {}\n/** @nocollapse */\n\n\nNotificationsPopupsWidgetModule.ɵfac = function NotificationsPopupsWidgetModule_Factory(t) {\n  return new (t || NotificationsPopupsWidgetModule)();\n};\n/** @nocollapse */\n\n\nNotificationsPopupsWidgetModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NotificationsPopupsWidgetModule\n});\n/** @nocollapse */\n\nNotificationsPopupsWidgetModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, NotificationsCommonModule, BackbaseCoreModule.withConfig({\n    classMap: {\n      NotificationsPopupsWidgetComponent\n    }\n  }), ...uiModules], NotificationsCommonModule, AlertModule, EllipsisModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NotificationsPopupsWidgetModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [...components, ...directives],\n      imports: [CommonModule, NotificationsCommonModule, BackbaseCoreModule.withConfig({\n        classMap: {\n          NotificationsPopupsWidgetComponent\n        }\n      }), ...uiModules],\n      exports: [NotificationsCommonModule, ...components, ...directives, ...uiModules]\n    }]\n  }], null, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NotificationsPopupsWidgetComponent, NotificationsPopupsWidgetModule, WidgetPropertiesService, NotificationsPopupsItemComponent as ӨNotificationsPopupsItemComponent, NotificationsPopupsItemHeaderCustomizableDirective as ӨNotificationsPopupsItemHeaderCustomizableDirective, NotificationsPopupsItemMessageCustomizableDirective as ӨNotificationsPopupsItemMessageCustomizableDirective, NotificationsPopupsListComponent as ӨNotificationsPopupsListComponent, NotificationsPopupsListCustomizableDirective as ӨNotificationsPopupsListCustomizableDirective, NotificationsStickyListComponent as ӨNotificationsStickyListComponent, NotificationsStickyListCustomizableDirective as ӨNotificationsStickyListCustomizableDirective, NotificationsStickyListItemComponent as ӨNotificationsStickyListItemComponent, NotificationsStickyListItemCustomizableDirective as ӨNotificationsStickyListItemCustomizableDirective };","map":{"version":3,"sources":["C:/Users/hbaylon/Documents/West Monroe/Projects/Backbase2/web/retail-usa-web/node_modules/@backbase/notifications-popups-widget-ang/fesm2015/backbase-notifications-popups-widget-ang.js"],"names":["i0","Injectable","Optional","Inject","EventEmitter","Component","Input","Output","Directive","ViewChild","NgModule","i3","CommonModule","i1","BbTemplate","BackbaseCoreModule","i1$1","i5","BaseWidgetPropertiesService","getPropertyValue","modelItemToBoolean","shareReplayOnce","secondsToMilliseconds","secondsToMilliseconds$1","NOTIFICATIONS_BADGE_FORCE_UPDATE_EVENT","NOTIFICATIONS_CREATE_LOCAL_EVENT","leaveZone","enterZone","NotificationsCommonModule","map","first","switchMap","take","tap","delayWhen","delay","observeOn","takeUntil","BehaviorSubject","Subject","of","combineLatest","asyncScheduler","merge","PUBSUB","i1$2","AlertModule","BbTemplate$1","i1$3","i6","EllipsisModule","NOTIFICATION_LOCAL","seconds","fromHttpResponse","response","body","Error","notificationsStreamToSticky","notificationsStream","filter","item","expiresOn","notificationsStreamToPopups","parseNotificationSeverityLevel","level","toLowerCase","severityTypeToSeverityLevel","type","toUpperCase","notificationLocalToStreamItem","notification","timestamp","Date","now","date","toISOString","Object","assign","id","Math","floor","random","createdOn","title","message","sticky","DefaultWidgetProperties","allowedRoutes","autofocus","popupMessageLineAmount","displayShowMoreButtonInPopup","origins","severityLevels","pollingInterval","WidgetPropertiesService","constructor","itemModel","autofocus$$","undefined","popupMessageLineAmount$$","displayShowMoreButtonInPopup$$","pollingInterval$$","autofocus$","popupMessageLineAmount$","displayShowMoreButtonInPopup$","pollingInterval$","defaultModelObservable","property","pipe","Number","n","setAutofocus","value","next","setPopupMessageLineAmount","setDisplayShowMoreButtonInPopup","setPollingInterval","isNaN","ɵfac","ItemModel","ɵprov","decorators","DEFAULT_POLLING_INTERVAL","NotificationsPopupsDataService","dataHttpService","ngZone","properties","pubSub","markNotificationAsRead$","notificationsStreamForceUpdate$","polling$","notificationsLocalStickySource","Map","origins$","severityLevels$","notificationsStream$","initializeNotificationsStreamPolling","stickyNotificationsStream$","popupsNotificationsStream$","subscribe","payload","publish","origin","parsedNotification","set","stream","popup","stickies","notificationsLocalSticky","concatenatedStream","Array","from","values","markNotificationAsRead","match","removeNotificationItemFromStream","delete","putMarkAsRead","markAsReadPutRequestBody","read","requestNotificationsStream","interval","levels","getNotificationsStream","length","join","notificationId","pollAndRequest$","pollingNotificationsStream$","NotificationsHttpService","NgZone","args","NotificationsPopupsRouterService","popupsRoutingSubject","popupsRouting$","asObservable","emitPopupsRouting","routing","NotificationsStickyListItemComponent","close","onClose","emit","ɵcmp","NotificationsStickyListItemCustomizableDirective","AlertComponent","ӨInterpolateLinkPipe","selector","templateUrl","ɵdir","NotificationsStickyListComponent","dataService","elem","notifications$","onReadNotification","notifications","nativeElement","querySelectorAll","deletedNotificationIndex$","notificationElements","findIndex","index","getElementsByTagName","focus","previousFocusedElement","trackById","_index","onFocus","event","relatedTarget","ElementRef","NotificationsStickyListCustomizableDirective","NgForOf","AsyncPipe","NotificationsPopupsItemComponent","notificationService","routerService","notificationTimeout","allowedRoutes$","isMessageTruncated","destroy$","ngAfterViewInit","routes","isShowMoreButtonEnabled","hasRouting","preferences","createNotificationPopup","openNotificationDetails","stopPropagation","data","readNotification","hideNotification","setIsContentTruncated","showNotification","modifier","header","popupHeaderTemplate","popupMessageTemplate","ttl","closeAction","bind","hostAction","navigateFromPopup","route","Boolean","some","allowedRoute","ngOnDestroy","complete","NotificationService","NotificationsPopupsItemHeaderCustomizableDirective","NotificationsPopupsItemMessageCustomizableDirective","NgTemplateOutlet","NotificationsCapabilityIconComponent","NgIf","ӨIsElementContentTruncatedDirective","EllipsisComponent","ӨNotificationLocalizationPipe","DEFAULT_NOTIFICATION_TIMEOUT","NotificationsPopupsListComponent","popups$","parsePopupsData","array","reverse","getNotificationTimeoutByIndex","NotificationsPopupsListCustomizableDirective","NotificationsPopupsWidgetComponent","notificationRouting","originsValue","setOrigins","severityLevelsValue","setSeverityLevels","pollingIntervalValue","allowedRoutesValue","setAllowedRoutes","autofocusValue","displayShowMoreButtonInPopupValue","popupMessageLineAmountValue","ngOnInit","template","providers","components","directives","uiModules","NotificationsPopupsWidgetModule","ɵmod","ɵinj","withConfig","classMap","declarations","imports","exports","ӨNotificationsPopupsItemComponent","ӨNotificationsPopupsItemHeaderCustomizableDirective","ӨNotificationsPopupsItemMessageCustomizableDirective","ӨNotificationsPopupsListComponent","ӨNotificationsPopupsListCustomizableDirective","ӨNotificationsStickyListComponent","ӨNotificationsStickyListCustomizableDirective","ӨNotificationsStickyListItemComponent","ӨNotificationsStickyListItemCustomizableDirective"],"mappings":"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","sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, Optional, Inject, EventEmitter, Component, Input, Output, Directive, ViewChild, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i1 from '@backbase/foundation-ang/core';\nimport { BbTemplate, BackbaseCoreModule } from '@backbase/foundation-ang/core';\nimport * as i1$1 from '@backbase/data-ang/notifications';\nimport * as i5 from '@backbase/notifications-common-ang';\nimport { BaseWidgetPropertiesService, getPropertyValue, modelItemToBoolean, shareReplayOnce, secondsToMilliseconds as secondsToMilliseconds$1, NOTIFICATIONS_BADGE_FORCE_UPDATE_EVENT, NOTIFICATIONS_CREATE_LOCAL_EVENT, leaveZone, enterZone, NotificationsCommonModule } from '@backbase/notifications-common-ang';\nimport { map, first, switchMap, take, tap, delayWhen, delay, observeOn, takeUntil } from 'rxjs/operators';\nimport { BehaviorSubject, Subject, of, combineLatest, asyncScheduler, merge } from 'rxjs';\nimport { PUBSUB } from '@backbase/foundation-ang/web-sdk';\nimport * as i1$2 from '@backbase/ui-ang/alert';\nimport { AlertModule } from '@backbase/ui-ang/alert';\nimport { BbTemplate as BbTemplate$1 } from '@backbase/foundation-ang/core/';\nimport * as i1$3 from '@backbase/ui-ang/notification';\nimport * as i6 from '@backbase/ui-ang/ellipsis';\nimport { EllipsisModule } from '@backbase/ui-ang/ellipsis';\n\nconst NOTIFICATION_LOCAL = 'NOTIFICATION_LOCAL';\n\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\nconst fromHttpResponse = (response) => {\n    if (response.body === null) {\n        throw new Error('Response body not set');\n    }\n    return response.body;\n};\nconst notificationsStreamToSticky = (notificationsStream) => notificationsStream.filter(item => !!item.expiresOn);\nconst notificationsStreamToPopups = (notificationsStream) => notificationsStream.filter(item => !item.expiresOn);\n// eslint-disable-next-line arrow-body-style\nconst parseNotificationSeverityLevel = (level) => {\n    return level === 'ALERT' ? 'error' : level.toLowerCase();\n};\n// eslint-disable-next-line arrow-body-style\nconst severityTypeToSeverityLevel = (type) => {\n    return type === 'error' ? 'ALERT' : type.toUpperCase();\n};\nconst notificationLocalToStreamItem = (notification) => {\n    const timestamp = Date.now();\n    const date = new Date(timestamp).toISOString();\n    return Object.assign({ id: `${NOTIFICATION_LOCAL}_${timestamp + Math.floor(Math.random() * 1000)}`, createdOn: date, title: notification.title, message: notification.message, level: severityTypeToSeverityLevel(notification.level) }, (notification.sticky && { expiresOn: date }));\n};\n\nconst DefaultWidgetProperties = {\n    allowedRoutes: [],\n    autofocus: true,\n    popupMessageLineAmount: 2,\n    displayShowMoreButtonInPopup: false,\n    origins: [],\n    severityLevels: [],\n    pollingInterval: 15,\n};\nclass WidgetPropertiesService extends BaseWidgetPropertiesService {\n    constructor(itemModel) {\n        super(itemModel);\n        this.itemModel = itemModel;\n        this.autofocus$$ = new BehaviorSubject(undefined);\n        this.popupMessageLineAmount$$ = new BehaviorSubject(undefined);\n        this.displayShowMoreButtonInPopup$$ = new BehaviorSubject(undefined);\n        this.pollingInterval$$ = new BehaviorSubject(undefined);\n        this.autofocus$ = getPropertyValue(this.autofocus$$, this.autofocus);\n        this.popupMessageLineAmount$ = getPropertyValue(this.popupMessageLineAmount$$, this.popupMessageLineAmount);\n        this.displayShowMoreButtonInPopup$ = getPropertyValue(this.displayShowMoreButtonInPopup$$, this.displayShowMoreButtonInPopup);\n        this.pollingInterval$ = getPropertyValue(this.pollingInterval$$, this.pollingInterval);\n    }\n    get autofocus() {\n        if (!this.itemModel) {\n            return this.defaultModelObservable(DefaultWidgetProperties.autofocus);\n        }\n        return this.itemModel\n            .property('autofocus', DefaultWidgetProperties.autofocus)\n            .pipe(map(modelItemToBoolean), first());\n    }\n    get popupMessageLineAmount() {\n        if (!this.itemModel) {\n            return this.defaultModelObservable(DefaultWidgetProperties.popupMessageLineAmount);\n        }\n        return this.itemModel.property('popupMessageLineAmount', '').pipe(map(Number), first());\n    }\n    get displayShowMoreButtonInPopup() {\n        if (!this.itemModel) {\n            return this.defaultModelObservable(DefaultWidgetProperties.displayShowMoreButtonInPopup);\n        }\n        return this.itemModel\n            .property('displayShowMoreButtonInPopup', DefaultWidgetProperties.displayShowMoreButtonInPopup)\n            .pipe(map(modelItemToBoolean), first());\n    }\n    get pollingInterval() {\n        if (!this.itemModel) {\n            return this.defaultModelObservable(DefaultWidgetProperties.pollingInterval * 1000);\n        }\n        return this.itemModel.property('pollingInterval', DefaultWidgetProperties.pollingInterval).pipe(map(Number), map(n => n * 1000), shareReplayOnce());\n    }\n    setAutofocus(value) {\n        this.autofocus$$.next(modelItemToBoolean(value));\n    }\n    setPopupMessageLineAmount(value) {\n        this.popupMessageLineAmount$$.next(Number(value));\n    }\n    setDisplayShowMoreButtonInPopup(value) {\n        this.displayShowMoreButtonInPopup$$.next(modelItemToBoolean(value));\n    }\n    setPollingInterval(value) {\n        const pollingInterval = Number(value);\n        if (!isNaN(pollingInterval) && pollingInterval > 0) {\n            this.pollingInterval$$.next(secondsToMilliseconds$1(pollingInterval));\n        }\n    }\n}\n/** @nocollapse */ WidgetPropertiesService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: WidgetPropertiesService, deps: [{ token: i1.ItemModel, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\n/** @nocollapse */ WidgetPropertiesService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: WidgetPropertiesService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: WidgetPropertiesService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.ItemModel, decorators: [{\n                    type: Optional\n                }] }]; } });\n\nconst DEFAULT_POLLING_INTERVAL = 15;\nclass NotificationsPopupsDataService {\n    constructor(dataHttpService, ngZone, properties, pubSub) {\n        this.dataHttpService = dataHttpService;\n        this.ngZone = ngZone;\n        this.properties = properties;\n        this.pubSub = pubSub;\n        /**\n         * Mark notification as read stream\n         */\n        this.markNotificationAsRead$ = new Subject();\n        this.notificationsStreamForceUpdate$ = new Subject();\n        this.polling$ = new Subject();\n        this.notificationsLocalStickySource = new Map();\n        this.origins$ = this.properties.origins$;\n        this.severityLevels$ = this.properties.severityLevels$;\n        this.pollingInterval$ = this.properties.pollingInterval$;\n        this.notificationsStream$ = this.initializeNotificationsStreamPolling();\n        this.stickyNotificationsStream$ = this.notificationsStream$.pipe(map(notificationsStreamToSticky));\n        this.popupsNotificationsStream$ = this.notificationsStream$.pipe(map(notificationsStreamToPopups));\n        this.markNotificationAsRead$.subscribe((payload) => {\n            this.pubSub.publish(NOTIFICATIONS_BADGE_FORCE_UPDATE_EVENT, typeof payload === 'object'\n                ? {\n                    origin: payload.origin,\n                    level: payload.level,\n                }\n                : undefined);\n        });\n        this.pubSub.subscribe(NOTIFICATIONS_CREATE_LOCAL_EVENT, (notification) => {\n            const parsedNotification = notificationLocalToStreamItem(notification);\n            if (notification.sticky) {\n                this.notificationsLocalStickySource.set(parsedNotification.id, parsedNotification);\n            }\n            this.notificationsStream$\n                .pipe(switchMap(stream => {\n                const popup = (!notification.sticky && [parsedNotification]) || [];\n                const stickies = this.notificationsLocalSticky;\n                return of([...stream, ...stickies, ...popup]);\n            }), map(concatenatedStream => Array.from(new Map(concatenatedStream.map(item => [item.id, item])).values())), take(1))\n                .subscribe(notificationsStream => this.notificationsStreamForceUpdate$.next(notificationsStream));\n        });\n    }\n    get notificationsLocalSticky() {\n        return Array.from(this.notificationsLocalStickySource.values());\n    }\n    /**\n     * Mark notification as read\n     *\n     * @param notification Notification data\n     */\n    markNotificationAsRead(notification) {\n        const id = typeof notification === 'string' ? notification : notification.id;\n        if (id.match(NOTIFICATION_LOCAL)) {\n            this.removeNotificationItemFromStream(id);\n            this.notificationsLocalStickySource.delete(id);\n        }\n        else {\n            this.dataHttpService.putMarkAsRead({ id, markAsReadPutRequestBody: { read: true } }).subscribe(() => {\n                this.removeNotificationItemFromStream(id);\n                this.markNotificationAsRead$.next(notification);\n            });\n        }\n    }\n    requestNotificationsStream() {\n        return combineLatest([this.pollingInterval$, this.origins$, this.severityLevels$]).pipe(first(), switchMap(([interval, origins, levels]) => this.dataHttpService.getNotificationsStream(Object.assign(Object.assign({ interval }, (origins.length && { origins })), (levels && { levels: levels.join(', ') })), 'response')), map(fromHttpResponse));\n    }\n    removeNotificationItemFromStream(notificationId) {\n        this.notificationsStream$\n            .pipe(first(), map(notificationsStream => notificationsStream.filter(({ id }) => id !== notificationId)))\n            .subscribe(notificationsStream => this.notificationsStreamForceUpdate$.next(notificationsStream));\n    }\n    initializeNotificationsStreamPolling() {\n        const pollAndRequest$ = of(undefined).pipe(tap(() => this.polling$.next()), switchMap(() => this.requestNotificationsStream()));\n        const pollingNotificationsStream$ = this.polling$.pipe(switchMap(() => this.pollingInterval$), delayWhen(pollingInterval => of().pipe(delay(pollingInterval, leaveZone(this.ngZone, asyncScheduler)))), switchMap(() => pollAndRequest$), observeOn(enterZone(this.ngZone, asyncScheduler)));\n        return merge(this.notificationsStreamForceUpdate$, pollingNotificationsStream$.pipe(switchMap(stream => of([...stream, ...this.notificationsLocalSticky]))), pollAndRequest$.pipe(switchMap(stream => of([...stream, ...this.notificationsLocalSticky])))).pipe(shareReplayOnce());\n    }\n}\n/** @nocollapse */ NotificationsPopupsDataService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsDataService, deps: [{ token: i1$1.NotificationsHttpService }, { token: i0.NgZone }, { token: WidgetPropertiesService }, { token: PUBSUB }], target: i0.ɵɵFactoryTarget.Injectable });\n/** @nocollapse */ NotificationsPopupsDataService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsDataService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsDataService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1$1.NotificationsHttpService }, { type: i0.NgZone }, { type: WidgetPropertiesService }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [PUBSUB]\n                }] }]; } });\n\nclass NotificationsPopupsRouterService {\n    constructor() {\n        this.popupsRoutingSubject = new Subject();\n        /**\n         * Popups notification routing stream\n         */\n        this.popupsRouting$ = this.popupsRoutingSubject.asObservable();\n    }\n    /**\n     * Emit popups routing\n     *\n     * @param routing Notification routing data\n     */\n    emitPopupsRouting(routing) {\n        this.popupsRoutingSubject.next(routing);\n    }\n}\n/** @nocollapse */ NotificationsPopupsRouterService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsRouterService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\n/** @nocollapse */ NotificationsPopupsRouterService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsRouterService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsRouterService, decorators: [{\n            type: Injectable\n        }] });\n\nclass NotificationsStickyListItemComponent {\n    constructor() {\n        /**\n         * Notification stream item close event\n         * Emits notification stream item id\n         */\n        // eslint-disable-next-line @angular-eslint/no-output-native\n        this.close = new EventEmitter();\n    }\n    /**\n     * Method to handle close event from alert component\n     *\n     * @param notification Notification data\n     */\n    onClose(notification) {\n        this.close.emit(notification);\n    }\n    /**\n     * Method to parse severity level into alert modifier\n     *\n     * @param level Severity level\n     * @returns Notification severity level type\n     */\n    parseNotificationSeverityLevel(level) {\n        return parseNotificationSeverityLevel(level);\n    }\n}\n/** @nocollapse */ NotificationsStickyListItemComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListItemComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\n/** @nocollapse */ NotificationsStickyListItemComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsStickyListItemComponent, selector: \"bb-notifications-sticky-list-item\", inputs: { notification: \"notification\" }, outputs: { close: \"close\" }, ngImport: i0, template: \"<ng-container\\n  bbNotificationsStickyListItemCustomizable\\n  [bbHostRef]=\\\"this\\\"\\n  [bbTemplateContext]=\\\"notification\\\"\\n></ng-container>\\n\\n<ng-template bbNotificationsStickyListItemCustomizable let-host let-notification=\\\"context\\\">\\n  <bb-alert-ui\\n    [dismissible]=\\\"true\\\"\\n    [modifier]=\\\"host.parseNotificationSeverityLevel(notification?.level)\\\"\\n    [title]=\\\"notification?.title || ''\\\"\\n    (close)=\\\"host.onClose(notification)\\\"\\n  >\\n    <div\\n      class=\\\"bb-subtitle\\\"\\n      data-role=\\\"notification-sticky-message\\\"\\n      [innerHTML]=\\\"notification?.message | interpolateLink: notification:true:'alert-link'\\\"\\n    ></div>\\n  </bb-alert-ui>\\n</ng-template>\\n\", components: [{ type: i0.forwardRef(function () { return i1$2.AlertComponent; }), selector: \"bb-alert-ui\", inputs: [\"modifier\", \"dismissible\", \"title\", \"message\"], outputs: [\"close\"] }], directives: [{ type: i0.forwardRef(function () { return NotificationsStickyListItemCustomizableDirective; }), selector: \"[bbNotificationsStickyListItemCustomizable]\" }], pipes: { \"interpolateLink\": i0.forwardRef(function () { return i5.ӨInterpolateLinkPipe; }) } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListItemComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'bb-notifications-sticky-list-item',\n                    templateUrl: './notifications-sticky-list-item.component.html',\n                }]\n        }], propDecorators: { notification: [{\n                type: Input\n            }], close: [{\n                type: Output\n            }] } });\nclass NotificationsStickyListItemCustomizableDirective extends BbTemplate {\n}\n/** @nocollapse */ NotificationsStickyListItemCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListItemCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });\n/** @nocollapse */ NotificationsStickyListItemCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsStickyListItemCustomizableDirective, selector: \"[bbNotificationsStickyListItemCustomizable]\", usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListItemCustomizableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[bbNotificationsStickyListItemCustomizable]',\n                }]\n        }] });\n\nclass NotificationsStickyListComponent {\n    constructor(dataService, elem) {\n        this.dataService = dataService;\n        this.elem = elem;\n        /**\n         * Notification sticky stream data\n         */\n        this.notifications$ = this.dataService.stickyNotificationsStream$;\n    }\n    /**\n     * Method to call mark notification as read request by id\n     *\n     * @param notification Notification data\n     */\n    onReadNotification(notification) {\n        this.dataService.markNotificationAsRead(notification);\n        const notifications = this.elem.nativeElement.querySelectorAll('bb-notifications-sticky-list-item');\n        const deletedNotificationIndex$ = this.notifications$.pipe(map((notificationElements) => notificationElements.findIndex(item => typeof notification === 'string' ? notification === item.id : notification.id === item.id)));\n        deletedNotificationIndex$.pipe(first()).subscribe(index => {\n            if (notifications[index + 1]) {\n                notifications[index + 1].getElementsByTagName('button')[0].focus();\n            }\n            else if (notifications[index - 1]) {\n                notifications[index - 1].getElementsByTagName('button')[0].focus();\n            }\n            else if (this.previousFocusedElement) {\n                this.previousFocusedElement.focus();\n            }\n        });\n    }\n    /**\n     * Method to differentiate notifications by IDs.\n     *\n     * @param _index List item index\n     * @param notification Notification list item\n     * @returns Notification id\n     */\n    trackById(_index, notification) {\n        return notification.id;\n    }\n    /**\n     * Method to change focus.\n     *\n     * @param event Focus event\n     */\n    onFocus(event) {\n        if (!this.previousFocusedElement) {\n            this.previousFocusedElement = event.relatedTarget;\n        }\n    }\n}\n/** @nocollapse */ NotificationsStickyListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListComponent, deps: [{ token: NotificationsPopupsDataService }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\n/** @nocollapse */ NotificationsStickyListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsStickyListComponent, selector: \"bb-notifications-sticky-list\", ngImport: i0, template: \"<ng-container\\n  bbNotificationsStickyListCustomizable\\n  [bbHostRef]=\\\"this\\\"\\n  [bbTemplateContext]=\\\"{\\n    notifications: notifications$ | async\\n  }\\\"\\n></ng-container>\\n\\n<ng-template bbNotificationsStickyListCustomizable let-host let-notifications=\\\"context.notifications\\\">\\n  <bb-notifications-sticky-list-item\\n    (focusin)=\\\"host.onFocus($event)\\\"\\n    *ngFor=\\\"let item of notifications; trackBy: host.trackById\\\"\\n    [notification]=\\\"item\\\"\\n    (close)=\\\"host.onReadNotification($event)\\\"\\n  ></bb-notifications-sticky-list-item>\\n</ng-template>\\n\", components: [{ type: i0.forwardRef(function () { return NotificationsStickyListItemComponent; }), selector: \"bb-notifications-sticky-list-item\", inputs: [\"notification\"], outputs: [\"close\"] }], directives: [{ type: i0.forwardRef(function () { return NotificationsStickyListCustomizableDirective; }), selector: \"[bbNotificationsStickyListCustomizable]\" }, { type: i0.forwardRef(function () { return i3.NgForOf; }), selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], pipes: { \"async\": i0.forwardRef(function () { return i3.AsyncPipe; }) } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'bb-notifications-sticky-list',\n                    templateUrl: './notifications-sticky-list.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: NotificationsPopupsDataService }, { type: i0.ElementRef }]; } });\nclass NotificationsStickyListCustomizableDirective extends BbTemplate {\n}\n/** @nocollapse */ NotificationsStickyListCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });\n/** @nocollapse */ NotificationsStickyListCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsStickyListCustomizableDirective, selector: \"[bbNotificationsStickyListCustomizable]\", usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsStickyListCustomizableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[bbNotificationsStickyListCustomizable]',\n                }]\n        }] });\n\n/** @dynamic */\nclass NotificationsPopupsItemComponent {\n    constructor(notificationService, dataService, routerService, properties) {\n        this.notificationService = notificationService;\n        this.dataService = dataService;\n        this.routerService = routerService;\n        this.properties = properties;\n        /**\n         * Notification close delay timeout\n         */\n        this.notificationTimeout = 0;\n        /**\n         * Routes available for navigation.\n         */\n        this.allowedRoutes$ = this.properties.allowedRoutes$;\n        /**\n         * Stream of widget property with a flag that defines if notification popup should be auto-focused.\n         */\n        this.autofocus$ = this.properties.autofocus$;\n        /**\n         * Stream of widget property with a flag that defines if we should display Show More button.\n         */\n        this.displayShowMoreButtonInPopup$ = this.properties.displayShowMoreButtonInPopup$;\n        /**\n         * Stream of widget property with the number of lines to show as a notification message.\n         */\n        this.popupMessageLineAmount$ = this.properties.popupMessageLineAmount$;\n        /**\n         * The boolean flag that shows if the notification message text exceeds the number of visible lines and is truncated.\n         */\n        this.isMessageTruncated = false;\n        /**\n         * destroy$ should emit only when component is destroyed to\n         * signal subscriptions to unsubscribe.\n         */\n        this.destroy$ = new Subject();\n    }\n    ngAfterViewInit() {\n        if (this.notification) {\n            combineLatest([this.allowedRoutes$, this.displayShowMoreButtonInPopup$, this.autofocus$])\n                .pipe(map(([routes, isShowMoreButtonEnabled, autofocus]) => [\n                this.hasRouting(routes),\n                isShowMoreButtonEnabled,\n                autofocus,\n            ]), takeUntil(this.destroy$))\n                .subscribe((preferences) => {\n                this.createNotificationPopup(preferences);\n            });\n        }\n    }\n    /**\n     * Open notification details in external widget\n     *\n     * @param event Click event\n     */\n    openNotificationDetails(event) {\n        event.stopPropagation();\n        const routing = {\n            ['where-to']: 'notification-details',\n            data: this.notification,\n        };\n        this.readNotification(this.notification);\n        this.routerService.emitPopupsRouting(routing);\n        this.hideNotification();\n    }\n    /**\n     * Set truncation status of notification message\n     *\n     * @param isMessageTruncated Is message truncated flag\n     */\n    setIsContentTruncated(isMessageTruncated) {\n        this.isMessageTruncated = isMessageTruncated;\n    }\n    createNotificationPopup([hasRouting, isShowMoreButtonEnabled, autofocus]) {\n        this.hideNotification = this.notificationService.showNotification(Object.assign(Object.assign(Object.assign({ modifier: parseNotificationSeverityLevel(this.notification.level), header: this.popupHeaderTemplate, message: this.popupMessageTemplate, ttl: secondsToMilliseconds(this.notificationTimeout), closeAction: this.readNotification.bind(this, this.notification) }, (hasRouting && {\n            hostAction: this.navigateFromPopup.bind(this),\n        })), (!hasRouting &&\n            isShowMoreButtonEnabled && {\n            hostAction: this.openNotificationDetails.bind(this),\n        })), { autofocus }));\n    }\n    readNotification(notification) {\n        this.dataService.markNotificationAsRead(notification);\n    }\n    hasRouting(routes) {\n        const route = this.notification.routing && this.notification.routing['where-to'];\n        return Boolean(this.notification.routing) && routes.some(allowedRoute => route === allowedRoute);\n    }\n    navigateFromPopup() {\n        this.readNotification(this.notification);\n        if (this.notification.routing) {\n            this.routerService.emitPopupsRouting(this.notification.routing);\n        }\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n}\n/** @nocollapse */ NotificationsPopupsItemComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsItemComponent, deps: [{ token: i1$3.NotificationService }, { token: NotificationsPopupsDataService }, { token: NotificationsPopupsRouterService }, { token: WidgetPropertiesService }], target: i0.ɵɵFactoryTarget.Component });\n/** @nocollapse */ NotificationsPopupsItemComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsPopupsItemComponent, selector: \"bb-notifications-popups-item\", inputs: { notification: \"notification\", notificationTimeout: \"notificationTimeout\" }, viewQueries: [{ propertyName: \"popupHeaderTemplate\", first: true, predicate: [\"popupHeader\"], descendants: true }, { propertyName: \"popupMessageTemplate\", first: true, predicate: [\"popupMessage\"], descendants: true }], ngImport: i0, template: \"<ng-template #popupHeader>\\n  <ng-container\\n    bbNotificationsPopupsItemHeaderCustomizable\\n    [bbHostRef]=\\\"this\\\"\\n    [bbTemplateContext]=\\\"notification\\\"\\n  ></ng-container>\\n</ng-template>\\n\\n<ng-template #popupMessage>\\n  <ng-container bbNotificationsPopupsItemMessageCustomizable [bbHostRef]=\\\"this\\\" [bbTemplateContext]=\\\"notification\\\">\\n  </ng-container>\\n</ng-template>\\n\\n<ng-template bbNotificationsPopupsItemHeaderCustomizable let-hostRef let-notification=\\\"context\\\">\\n  <span class=\\\"sr-only\\\"> {{ notification?.level || '' }}, </span>\\n  <span [innerHTML]=\\\"notification | notificationLocalization: 'title'\\\"></span>\\n</ng-template>\\n\\n<ng-template bbNotificationsPopupsItemMessageCustomizable let-hostRef let-notification=\\\"context\\\">\\n  <ng-container\\n    *ngTemplateOutlet=\\\"(hostRef.popupMessageLineAmount$ | async) ? truncatedMessageContent : messageContent\\\"\\n  ></ng-container>\\n  <bb-notifications-capability-icon [origin]=\\\"notification?.origin\\\"></bb-notifications-capability-icon>\\n  <button\\n    type=\\\"button\\\"\\n    *ngIf=\\\"hostRef.isMessageTruncated && (hostRef.displayShowMoreButtonInPopup$ | async)\\\"\\n    class=\\\"btn-link-text bb-text-bold bb-notification__details-button\\\"\\n    (click)=\\\"hostRef.openNotificationDetails($event)\\\"\\n    aria-label=\\\"See more notification details\\\"\\n    i18n=\\\"Notification pop-up See more button@notification.popup.see-more.button\\\"\\n    i18n-aria-label=\\\"Aria-label for See more button@@notification.popup.see-more.button.aria-label\\\"\\n  >\\n    <span>See more</span>\\n  </button>\\n\\n  <ng-template #messageContent>\\n    <div class=\\\"bb-block\\\" bbIsElementContentTruncated [hostRef]=\\\"hostRef\\\">\\n      <div\\n        [innerHTML]=\\\"\\n          notification\\n            | notificationLocalization: 'message'\\n            | interpolateLink: notification:true:'bb-notification__message-link'\\n        \\\"\\n      ></div>\\n    </div>\\n  </ng-template>\\n\\n  <ng-template #truncatedMessageContent>\\n    <bb-ellipsis-ui [tooltipTriggers]=\\\"''\\\" [lineClamp]=\\\"hostRef.popupMessageLineAmount$ | async\\\">\\n      <ng-container *ngTemplateOutlet=\\\"messageContent\\\"></ng-container>\\n    </bb-ellipsis-ui>\\n  </ng-template>\\n</ng-template>\\n\", components: [{ type: i0.forwardRef(function () { return i5.NotificationsCapabilityIconComponent; }), selector: \"bb-notifications-capability-icon\", inputs: [\"origin\"] }, { type: i0.forwardRef(function () { return i6.EllipsisComponent; }), selector: \"bb-ellipsis-ui\", inputs: [\"text\", \"tooltipTriggers\", \"lineClamp\"] }], directives: [{ type: i0.forwardRef(function () { return NotificationsPopupsItemHeaderCustomizableDirective; }), selector: \"[bbNotificationsPopupsItemHeaderCustomizable]\" }, { type: i0.forwardRef(function () { return NotificationsPopupsItemMessageCustomizableDirective; }), selector: \"[bbNotificationsPopupsItemMessageCustomizable]\" }, { type: i0.forwardRef(function () { return i3.NgTemplateOutlet; }), selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }, { type: i0.forwardRef(function () { return i3.NgIf; }), selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i0.forwardRef(function () { return i5.ӨIsElementContentTruncatedDirective; }), selector: \"[bbIsElementContentTruncated]\", inputs: [\"hostRef\"] }], pipes: { \"notificationLocalization\": i0.forwardRef(function () { return i5.ӨNotificationLocalizationPipe; }), \"async\": i0.forwardRef(function () { return i3.AsyncPipe; }), \"interpolateLink\": i0.forwardRef(function () { return i5.ӨInterpolateLinkPipe; }) } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsItemComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'bb-notifications-popups-item',\n                    templateUrl: './notifications-popups-item.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: i1$3.NotificationService }, { type: NotificationsPopupsDataService }, { type: NotificationsPopupsRouterService }, { type: WidgetPropertiesService }]; }, propDecorators: { notification: [{\n                type: Input\n            }], notificationTimeout: [{\n                type: Input\n            }], popupHeaderTemplate: [{\n                type: ViewChild,\n                args: ['popupHeader']\n            }], popupMessageTemplate: [{\n                type: ViewChild,\n                args: ['popupMessage']\n            }] } });\nclass NotificationsPopupsItemHeaderCustomizableDirective extends BbTemplate {\n}\n/** @nocollapse */ NotificationsPopupsItemHeaderCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsItemHeaderCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });\n/** @nocollapse */ NotificationsPopupsItemHeaderCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsPopupsItemHeaderCustomizableDirective, selector: \"[bbNotificationsPopupsItemHeaderCustomizable]\", usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsItemHeaderCustomizableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[bbNotificationsPopupsItemHeaderCustomizable]',\n                }]\n        }] });\nclass NotificationsPopupsItemMessageCustomizableDirective extends BbTemplate {\n}\n/** @nocollapse */ NotificationsPopupsItemMessageCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsItemMessageCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });\n/** @nocollapse */ NotificationsPopupsItemMessageCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsPopupsItemMessageCustomizableDirective, selector: \"[bbNotificationsPopupsItemMessageCustomizable]\", usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsItemMessageCustomizableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[bbNotificationsPopupsItemMessageCustomizable]',\n                }]\n        }] });\n\nconst DEFAULT_NOTIFICATION_TIMEOUT = 5;\nclass NotificationsPopupsListComponent {\n    constructor(dataService) {\n        this.dataService = dataService;\n        /**\n         * Notification popups stream data in reversed order\n         */\n        this.popups$ = this.dataService.popupsNotificationsStream$.pipe(map(this.parsePopupsData));\n    }\n    /**\n     * Method to parse popups stream data in reversed order\n     * for correct rendering by show notificaton service\n     */\n    parsePopupsData(array) {\n        return array.reverse();\n    }\n    /**\n     * Method to get close notification timeout value for each popup\n     *\n     * @param index List item index\n     * @param length List length\n     * @returns Number of seconds before notification popup close\n     */\n    getNotificationTimeoutByIndex(index, length) {\n        return DEFAULT_NOTIFICATION_TIMEOUT + length - index - 1;\n    }\n}\n/** @nocollapse */ NotificationsPopupsListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsListComponent, deps: [{ token: NotificationsPopupsDataService }], target: i0.ɵɵFactoryTarget.Component });\n/** @nocollapse */ NotificationsPopupsListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsPopupsListComponent, selector: \"bb-notifications-popups-list\", ngImport: i0, template: \"<ng-container\\n  bbNotificationsPopupsListCustomizable\\n  [bbHostRef]=\\\"this\\\"\\n  [bbTemplateContext]=\\\"popups$ | async\\\"\\n></ng-container>\\n\\n<ng-template bbNotificationsPopupsListCustomizable let-hostRef let-notifications=\\\"context\\\">\\n  <bb-notifications-popups-item\\n    *ngFor=\\\"let notification of notifications; index as i\\\"\\n    [notification]=\\\"notification\\\"\\n    [notificationTimeout]=\\\"hostRef.getNotificationTimeoutByIndex(i, notifications.length)\\\"\\n  >\\n  </bb-notifications-popups-item>\\n</ng-template>\\n\", components: [{ type: i0.forwardRef(function () { return NotificationsPopupsItemComponent; }), selector: \"bb-notifications-popups-item\", inputs: [\"notification\", \"notificationTimeout\"] }], directives: [{ type: i0.forwardRef(function () { return NotificationsPopupsListCustomizableDirective; }), selector: \"[bbNotificationsPopupsListCustomizable]\" }, { type: i0.forwardRef(function () { return i3.NgForOf; }), selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], pipes: { \"async\": i0.forwardRef(function () { return i3.AsyncPipe; }) } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsListComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'bb-notifications-popups-list',\n                    templateUrl: './notifications-popups-list.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: NotificationsPopupsDataService }]; } });\nclass NotificationsPopupsListCustomizableDirective extends BbTemplate$1 {\n}\n/** @nocollapse */ NotificationsPopupsListCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsListCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });\n/** @nocollapse */ NotificationsPopupsListCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsPopupsListCustomizableDirective, selector: \"[bbNotificationsPopupsListCustomizable]\", usesInheritance: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsListCustomizableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[bbNotificationsPopupsListCustomizable]',\n                }]\n        }] });\n\n/* eslint-disable @angular-eslint/no-input-rename */\nclass NotificationsPopupsWidgetComponent {\n    constructor(routerService, properties) {\n        this.routerService = routerService;\n        this.properties = properties;\n        /**\n         * Navigation Data emitter.\n         */\n        this.notificationRouting = new EventEmitter();\n        this.destroy$ = new Subject();\n    }\n    /**\n     * Comma-separated list of notifications origins to process (empty for all).\n     */\n    set originsValue(value) {\n        if (value !== undefined) {\n            this.properties.setOrigins(value);\n        }\n    }\n    /**\n     * Comma-separated list of notifications severity levels to process (empty for all).\n     */\n    set severityLevelsValue(value) {\n        if (value !== undefined) {\n            this.properties.setSeverityLevels(value);\n        }\n    }\n    /**\n     * Polling interval (in seconds).\n     */\n    set pollingIntervalValue(value) {\n        if (value !== undefined) {\n            this.properties.setPollingInterval(value);\n        }\n    }\n    /**\n     * String of allowed routes for navigation (conversation-view, arrangement-view, transaction-view, party-view, etc.).\n     */\n    set allowedRoutesValue(value) {\n        if (value !== undefined) {\n            this.properties.setAllowedRoutes(value);\n        }\n    }\n    /**\n     * Auto-focus.\n     */\n    set autofocusValue(value) {\n        if (value !== undefined) {\n            this.properties.setAutofocus(value);\n        }\n    }\n    /**\n     * Display See More button.\n     */\n    set displayShowMoreButtonInPopupValue(value) {\n        if (value !== undefined) {\n            this.properties.setDisplayShowMoreButtonInPopup(value);\n        }\n    }\n    /**\n     * Number of displayed lines in notification message emitter.\n     */\n    set popupMessageLineAmountValue(value) {\n        if (value !== undefined) {\n            this.properties.setPopupMessageLineAmount(value);\n        }\n    }\n    ngOnInit() {\n        this.routerService.popupsRouting$.pipe(takeUntil(this.destroy$)).subscribe(this.notificationRouting);\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n}\n/** @nocollapse */ NotificationsPopupsWidgetComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsWidgetComponent, deps: [{ token: NotificationsPopupsRouterService }, { token: WidgetPropertiesService }], target: i0.ɵɵFactoryTarget.Component });\n/** @nocollapse */ NotificationsPopupsWidgetComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.2.16\", type: NotificationsPopupsWidgetComponent, selector: \"bb-notifications-popups-widget\", inputs: { originsValue: [\"origins\", \"originsValue\"], severityLevelsValue: [\"severityLevels\", \"severityLevelsValue\"], pollingIntervalValue: [\"pollingInterval\", \"pollingIntervalValue\"], allowedRoutesValue: [\"allowedRoutes\", \"allowedRoutesValue\"], autofocusValue: [\"autofocus\", \"autofocusValue\"], displayShowMoreButtonInPopupValue: [\"displayShowMoreButtonInPopup\", \"displayShowMoreButtonInPopupValue\"], popupMessageLineAmountValue: [\"popupMessageLineAmount\", \"popupMessageLineAmountValue\"] }, outputs: { notificationRouting: \"notificationRouting\" }, providers: [NotificationsPopupsDataService, NotificationsPopupsRouterService, WidgetPropertiesService], ngImport: i0, template: `\n    <bb-notifications-sticky-list></bb-notifications-sticky-list>\n    <bb-notifications-popups-list></bb-notifications-popups-list>\n  `, isInline: true, components: [{ type: NotificationsStickyListComponent, selector: \"bb-notifications-sticky-list\" }, { type: NotificationsPopupsListComponent, selector: \"bb-notifications-popups-list\" }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsWidgetComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'bb-notifications-popups-widget',\n                    template: `\n    <bb-notifications-sticky-list></bb-notifications-sticky-list>\n    <bb-notifications-popups-list></bb-notifications-popups-list>\n  `,\n                    providers: [NotificationsPopupsDataService, NotificationsPopupsRouterService, WidgetPropertiesService],\n                }]\n        }], ctorParameters: function () { return [{ type: NotificationsPopupsRouterService }, { type: WidgetPropertiesService }]; }, propDecorators: { originsValue: [{\n                type: Input,\n                args: ['origins']\n            }], severityLevelsValue: [{\n                type: Input,\n                args: ['severityLevels']\n            }], pollingIntervalValue: [{\n                type: Input,\n                args: ['pollingInterval']\n            }], allowedRoutesValue: [{\n                type: Input,\n                args: ['allowedRoutes']\n            }], autofocusValue: [{\n                type: Input,\n                args: ['autofocus']\n            }], displayShowMoreButtonInPopupValue: [{\n                type: Input,\n                args: ['displayShowMoreButtonInPopup']\n            }], popupMessageLineAmountValue: [{\n                type: Input,\n                args: ['popupMessageLineAmount']\n            }], notificationRouting: [{\n                type: Output\n            }] } });\n\nconst components = [\n    NotificationsPopupsWidgetComponent,\n    NotificationsStickyListComponent,\n    NotificationsStickyListItemComponent,\n    NotificationsPopupsListComponent,\n    NotificationsPopupsItemComponent,\n];\nconst directives = [\n    NotificationsStickyListCustomizableDirective,\n    NotificationsStickyListItemCustomizableDirective,\n    NotificationsPopupsItemHeaderCustomizableDirective,\n    NotificationsPopupsItemMessageCustomizableDirective,\n    NotificationsPopupsListCustomizableDirective,\n];\nconst uiModules = [AlertModule, EllipsisModule];\nclass NotificationsPopupsWidgetModule {\n}\n/** @nocollapse */ NotificationsPopupsWidgetModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsWidgetModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n/** @nocollapse */ NotificationsPopupsWidgetModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsWidgetModule, declarations: [NotificationsPopupsWidgetComponent,\n        NotificationsStickyListComponent,\n        NotificationsStickyListItemComponent,\n        NotificationsPopupsListComponent,\n        NotificationsPopupsItemComponent, NotificationsStickyListCustomizableDirective,\n        NotificationsStickyListItemCustomizableDirective,\n        NotificationsPopupsItemHeaderCustomizableDirective,\n        NotificationsPopupsItemMessageCustomizableDirective,\n        NotificationsPopupsListCustomizableDirective], imports: [CommonModule,\n        NotificationsCommonModule, i1.BackbaseCoreModule, AlertModule, EllipsisModule], exports: [NotificationsCommonModule, NotificationsPopupsWidgetComponent,\n        NotificationsStickyListComponent,\n        NotificationsStickyListItemComponent,\n        NotificationsPopupsListComponent,\n        NotificationsPopupsItemComponent, NotificationsStickyListCustomizableDirective,\n        NotificationsStickyListItemCustomizableDirective,\n        NotificationsPopupsItemHeaderCustomizableDirective,\n        NotificationsPopupsItemMessageCustomizableDirective,\n        NotificationsPopupsListCustomizableDirective, AlertModule, EllipsisModule] });\n/** @nocollapse */ NotificationsPopupsWidgetModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsWidgetModule, imports: [[\n            CommonModule,\n            NotificationsCommonModule,\n            BackbaseCoreModule.withConfig({\n                classMap: { NotificationsPopupsWidgetComponent },\n            }),\n            ...uiModules,\n        ], NotificationsCommonModule, AlertModule, EllipsisModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.2.16\", ngImport: i0, type: NotificationsPopupsWidgetModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [...components, ...directives],\n                    imports: [\n                        CommonModule,\n                        NotificationsCommonModule,\n                        BackbaseCoreModule.withConfig({\n                            classMap: { NotificationsPopupsWidgetComponent },\n                        }),\n                        ...uiModules,\n                    ],\n                    exports: [NotificationsCommonModule, ...components, ...directives, ...uiModules],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NotificationsPopupsWidgetComponent, NotificationsPopupsWidgetModule, WidgetPropertiesService, NotificationsPopupsItemComponent as ӨNotificationsPopupsItemComponent, NotificationsPopupsItemHeaderCustomizableDirective as ӨNotificationsPopupsItemHeaderCustomizableDirective, NotificationsPopupsItemMessageCustomizableDirective as ӨNotificationsPopupsItemMessageCustomizableDirective, NotificationsPopupsListComponent as ӨNotificationsPopupsListComponent, NotificationsPopupsListCustomizableDirective as ӨNotificationsPopupsListCustomizableDirective, NotificationsStickyListComponent as ӨNotificationsStickyListComponent, NotificationsStickyListCustomizableDirective as ӨNotificationsStickyListCustomizableDirective, NotificationsStickyListItemComponent as ӨNotificationsStickyListItemComponent, NotificationsStickyListItemCustomizableDirective as ӨNotificationsStickyListItemCustomizableDirective };\n"]},"metadata":{},"sourceType":"module"}