{"version":3,"file":"transactions-details.component.js","sourceRoot":"","sources":["../../../../../../libs/accounts-transactions-journey/src/lib/views/transactions-details.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  InquireAndDisputeTopics,\n  Transaction,\n  TransactionCheckImageResponse,\n  TransactionDetailsService,\n  TransactionsDetailsLoading,\n} from '@backbase/transactions-common-ang';\n\nimport { Observable, of, Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport { AccountsTransactionsJourneyService } from '../accounts-transactions-journey-config.service';\nimport { TransactionsHelperService } from '../transactions-details-helper.service';\n\n@Component({\n  selector: 'bb-transactions-details',\n  providers: [TransactionDetailsService],\n  template: `\n    <bb-transaction-details-modal\n      *ngIf=\"currentTransaction | async as transaction\"\n      [isDetailsOpen]=\"isDetailsOpen\"\n      [transaction]=\"transaction\"\n      [showChangeCategory]=\"true\"\n      [checkImagesList]=\"checkImagesList\"\n      [transactionDetailsLoadingStatus]=\"transactionDetailsLoadingStatus\"\n      [inquireAndDisputeTopics]=\"inquireAndDisputeTopics\"\n      (close)=\"closeDialog()\"\n    ></bb-transaction-details-modal>\n  `,\n})\nexport class TransactionDetailsComponent implements OnInit, OnDestroy {\n  checkImagesList: TransactionCheckImageResponse | undefined;\n  transactionDetailsLoadingStatus: TransactionsDetailsLoading | undefined;\n  isDetailsOpen = true;\n  inquireAndDisputeTopics: InquireAndDisputeTopics;\n  currentTransaction: Observable<Transaction | undefined> | undefined;\n  private unsubscribeSubject = new Subject<void>();\n\n  constructor(\n    readonly config: AccountsTransactionsJourneyService,\n    public shared: TransactionsHelperService,\n    private readonly transactionDetailsService: TransactionDetailsService,\n    cd: ChangeDetectorRef,\n  ) {\n    this.transactionDetailsService\n      .fromCheckImages(of(this.config.showCheckImages))\n      .pipe(takeUntil(this.unsubscribeSubject))\n      .subscribe((checkImagesList) => {\n        this.checkImagesList = checkImagesList;\n      });\n\n    this.transactionDetailsService.fromInquiryAndDispute(\n      of(config.enableDisputeAndInquiry),\n      of(config.disputeByBillingStatus),\n      of(config.disputeEligibilityDays),\n      of(config.disputeTransactionTypes.split(',')),\n    );\n\n    this.transactionDetailsService.loadingState\n      .pipe(takeUntil(this.unsubscribeSubject))\n      .subscribe((transactionDetailsLoadingStatus) => {\n        this.transactionDetailsLoadingStatus = transactionDetailsLoadingStatus;\n        cd.markForCheck();\n      });\n\n    this.transactionDetailsService\n      .fromGeolocation(of(this.config.apiKey))\n      .pipe(takeUntil(this.unsubscribeSubject))\n      .subscribe();\n\n    this.inquireAndDisputeTopics = {\n      inquire: this.config.inquireTopicId,\n      dispute: this.config.disputeTopicId,\n    };\n  }\n\n  ngOnInit() {\n    this.currentTransaction = this.shared.currentTransaction.pipe(\n      tap((transaction) => {\n        if (transaction) {\n          this.transactionDetailsService.selectTransaction(transaction);\n        }\n      }),\n    );\n  }\n\n  ngOnDestroy() {\n    this.unsubscribeSubject.next();\n    this.unsubscribeSubject.complete();\n  }\n\n  closeDialog() {\n    this.isDetailsOpen = false;\n    this.shared.setCloseDetail();\n  }\n}\n"]}