{"version":3,"file":"backbase-actions-retail-notification-preferences-journey-ang.umd.js","sources":["../../../../libs/actions-retail-notification-preferences-journey/src/actions-retail-notification-preferences-journey-config.service.ts","../../../../libs/actions-retail-notification-preferences-journey/src/actions-retail-notification-preferences-view.component.ts","../../../../libs/actions-retail-notification-preferences-journey/src/actions-retail-notification-preferences-view.component.html","../../../../libs/actions-retail-notification-preferences-journey/src/components/product-notifications-settings/product-notifications-settings.component.ts","../../../../libs/actions-retail-notification-preferences-journey/src/components/product-notifications-settings/product-notifications-settings.component.html","../../../../libs/actions-retail-notification-preferences-journey/src/actions-retail-notification-preferences.routes.ts","../../../../libs/actions-retail-notification-preferences-journey/src/services/actions-notifications-preferences-data.factory.ts","../../../../libs/actions-retail-notification-preferences-journey/src/actions-retail-notification-preferences-journey.module.ts","../../../../libs/actions-retail-notification-preferences-journey/backbase-actions-retail-notification-preferences-journey-ang.ts"],"sourcesContent":["import { Inject, Injectable, InjectionToken, Optional, Provider } from '@angular/core';\nimport { ApiMode, secondsToMilliseconds } from '@backbase/actions-common-ang';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport interface ActionsRetailNotificationPreferencesJourneyConfiguration {\n  notificationDismissTime: number;\n  specificationIDs: string;\n  apiMode: ApiMode;\n}\n\nexport const ActionsRetailNotificationPreferencesJourneyToken = new InjectionToken<\n  Partial<ActionsRetailNotificationPreferencesJourneyConfiguration>\n>('ActionsRetailNotificationPreferencesJourneyConfiguration injection token');\n\nexport function provideConfig<T>(defaults: new () => T): Provider {\n  return {\n    provide: defaults,\n    useFactory: (custom: T) => ({ ...new defaults(), ...custom }),\n    deps: [ActionsRetailNotificationPreferencesJourneyToken],\n  };\n}\n\nexport const configDefaults: ActionsRetailNotificationPreferencesJourneyConfiguration = {\n  notificationDismissTime: 5,\n  specificationIDs: '1, 4',\n  apiMode: 'engagements',\n};\n\n@Injectable()\nexport class ActionsRetailNotificationPreferencesJourneyConfigService {\n  private readonly staticConfig: ActionsRetailNotificationPreferencesJourneyConfiguration;\n  constructor(\n    @Optional()\n    @Inject(ActionsRetailNotificationPreferencesJourneyToken)\n    staticConfigOverrides?: ActionsRetailNotificationPreferencesJourneyConfiguration,\n  ) {\n    this.staticConfig = { ...configDefaults, ...staticConfigOverrides };\n  }\n\n  /**\n   * Method to get notification dismiss time preference value.\n   *\n   * @returns notification dismiss time in seconds\n   */\n  get notificationDismissTime$(): Observable<number> {\n    return of(this.staticConfig.notificationDismissTime).pipe(\n      map(Number),\n      map(number => (isNaN(number) ? configDefaults.notificationDismissTime : number)),\n      map(secondsToMilliseconds),\n    );\n  }\n\n  /**\n   * Method to get specification IDs.\n   *\n   * @returns specification IDs array\n   */\n  get specificationIDs$(): Observable<string[]> {\n    return of(this.staticConfig.specificationIDs).pipe(map(data => data.replace(/\\s/g, '').split(',')));\n  }\n\n  /**\n   * Method to get api mode.\n   *\n   * @returns api mode string\n   */\n  get apiMode(): ApiMode {\n    return this.staticConfig.apiMode;\n  }\n}\n","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ActionsRetailNotificationPreferencesJourneyConfigService } from './actions-retail-notification-preferences-journey-config.service';\n\n@Component({\n  selector: 'bb-actions-retail-notification-preferences',\n  templateUrl: 'actions-retail-notification-preferences-view.component.html',\n})\nexport class ActionsRetailNotificationPreferencesViewComponent {\n  constructor(\n    readonly config: ActionsRetailNotificationPreferencesJourneyConfigService,\n    private readonly router: Router,\n    private readonly route: ActivatedRoute,\n  ) {}\n\n  onAccountSelect(accountId: string) {\n    this.router.navigate(['../notification-details', { notificationSettingsAccountId: accountId }], {\n      relativeTo: this.route,\n    });\n  }\n}\n","<bb-header-ui\n  heading=\"Manage Notifications\"\n  i18n-heading=\"Actions retail notifications preferences heading@@actions-retail-notifications.preferences.heading\"\n  customClassName=\"px-0\"\n  headingType=\"h1\"\n>\n</bb-header-ui>\n<bb-header-ui\n  heading=\"Select your account\"\n  i18n-heading=\"\n    Actions retail notifications preferences subheading@@actions-retail-notifications.preferences.subheading\"\n  customClassName=\"px-0\"\n  headingType=\"h2\"\n></bb-header-ui>\n<div>\n  <bb-product-summary-list-widget (selectedAccount)=\"onAccountSelect($event)\"></bb-product-summary-list-widget>\n</div>\n","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ActionsRetailNotificationPreferencesJourneyConfigService } from '../../actions-retail-notification-preferences-journey-config.service';\n\n@Component({\n  selector: 'bb-product-notifications-settings',\n  templateUrl: './product-notifications-settings.component.html',\n})\nexport class ProductNotificationsSettingsComponent {\n  readonly selectedAccountId$: Observable<string> = this.route.params.pipe(\n    map(params => params.notificationSettingsAccountId || ''),\n  );\n\n  constructor(\n    private readonly router: Router,\n    private readonly route: ActivatedRoute,\n    readonly config: ActionsRetailNotificationPreferencesJourneyConfigService,\n  ) {}\n\n  navigateBack() {\n    this.router.navigate(['../manage-notifications'], { relativeTo: this.route });\n  }\n}\n","<!-- TODO: replace bootstrap classes -->\n<div class=\"heading-widget bb-heading-widget px-0 pt-4 pb-5 flex-column-reverse align-items-start\">\n  <button\n    class=\"bb-heading-widget__button btn btn-link pl-0 ml-0 mb-3\"\n    (click)=\"navigateBack()\"\n    i18n-buttonTitle=\"Product notifications settings button title@@product-notifications.settings.button.title\"\n  >\n    <i aria-hidden=\"true\" class=\"bb-icon bb-icon-arrow-back\"></i>\n    <span>Back to Manage notifications</span>\n  </button>\n  <bb-header-ui\n    heading=\"Notification details\"\n    i18n-heading=\"Product notifications settings heading@@product-notifications.settings.heading\"\n    headingType=\"h2\"\n  ></bb-header-ui>\n</div>\n<bb-actions-product-notifications-settings-widget\n  [selectedAccountId]=\"selectedAccountId$ | async\"\n  [specificationIDs]=\"config.specificationIDs$ | async\"\n  [notificationDismissTime]=\"config.notificationDismissTime$ | async\"\n>\n</bb-actions-product-notifications-settings-widget>\n","import { Route } from '@angular/router';\nimport { ActionsRetailNotificationPreferencesViewComponent } from './actions-retail-notification-preferences-view.component';\nimport { ProductNotificationsSettingsComponent } from './components/product-notifications-settings/product-notifications-settings.component';\n\nexport const routes: Route = {\n  path: '',\n  children: [\n    {\n      path: '',\n      redirectTo: 'manage-notifications',\n      pathMatch: 'full',\n    },\n    { path: 'manage-notifications', component: ActionsRetailNotificationPreferencesViewComponent },\n    {\n      path: 'notification-details',\n      component: ProductNotificationsSettingsComponent,\n    },\n  ],\n};\n","import { Injector } from '@angular/core';\nimport {\n  ActionsNotificationsSettingsDataService,\n  ActionsNotificationsPreferencesDataService,\n} from '@backbase/actions-common-ang';\nimport { ActionsRetailNotificationPreferencesJourneyConfigService } from '../actions-retail-notification-preferences-journey-config.service';\n\nexport const ActionNotificationsPreferencesDataFactory = (injector: Injector) => {\n  if (injector.get(ActionsRetailNotificationPreferencesJourneyConfigService).apiMode === 'engagements') {\n    return injector.get(ActionsNotificationsPreferencesDataService);\n  } else {\n    return injector.get(ActionsNotificationsSettingsDataService);\n  }\n};\n","import { ModuleWithProviders, NgModule, Injector } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { provideRoutes, Route, RouterModule } from '@angular/router';\nimport { BackbaseCoreModule } from '@backbase/foundation-ang/core';\nimport { ActionsProductNotificationsSettingsWidgetModule } from '@backbase/actions-product-notifications-settings-widget-ang';\nimport { ActionsRetailNotificationPreferencesViewComponent } from './actions-retail-notification-preferences-view.component';\nimport { ProductSummaryListWidgetModule } from '@backbase/product-summary-list-widget-ang';\nimport { HeaderModule } from '@backbase/ui-ang/header';\nimport { ProductNotificationsSettingsComponent } from './components/product-notifications-settings/product-notifications-settings.component';\nimport { routes } from './actions-retail-notification-preferences.routes';\nimport { ActionsRetailNotificationPreferencesJourneyConfigService } from './actions-retail-notification-preferences-journey-config.service';\nimport { NotificationsPreferencesBaseDataService } from '@backbase/actions-common-ang';\nimport { ActionNotificationsPreferencesDataFactory } from './services/actions-notifications-preferences-data.factory';\n\n@NgModule({\n  declarations: [ActionsRetailNotificationPreferencesViewComponent, ProductNotificationsSettingsComponent],\n  imports: [\n    CommonModule,\n    HeaderModule,\n    BackbaseCoreModule,\n    RouterModule,\n    ActionsProductNotificationsSettingsWidgetModule,\n    ProductSummaryListWidgetModule,\n  ],\n  providers: [\n    ActionsRetailNotificationPreferencesJourneyConfigService,\n    {\n      provide: NotificationsPreferencesBaseDataService,\n      useFactory: ActionNotificationsPreferencesDataFactory,\n      deps: [Injector],\n    },\n  ],\n})\nexport class ActionsRetailNotificationPreferencesJourneyModule {\n  static forRoot(\n    data: { routes: Route; [key: string]: any } = { routes },\n  ): ModuleWithProviders<ActionsRetailNotificationPreferencesJourneyModule> {\n    return {\n      ngModule: ActionsRetailNotificationPreferencesJourneyModule,\n      providers: [provideRoutes([data.routes])],\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["InjectionToken","of","map","secondsToMilliseconds","Injectable","Optional","Inject","Component","ActionsNotificationsPreferencesDataService","ActionsNotificationsSettingsDataService","provideRoutes","CommonModule","HeaderModule","BackbaseCoreModule","RouterModule","ActionsProductNotificationsSettingsWidgetModule","ProductSummaryListWidgetModule","NotificationsPreferencesBaseDataService","Injector","NgModule"],"mappings":"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"}