import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpParameterCodec } from '../encoder';
import { ACTIONS_BASE_PATH } from '../variables';
import { ActionsConfiguration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
export class ActionRecipesHttpService {
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = '';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new ActionsConfiguration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                value.forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, value.toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    deleteActionRecipe(requestParameters, observe = 'body', reportProgress = false, options) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling deleteActionRecipe.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    deleteActionRecipeUrl(requestParameters) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling deleteActionRecipe.');
        }
        return `${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}`;
    }
    getActionRecipe(requestParameters, observe = 'body', reportProgress = false, options) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling getActionRecipe.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getActionRecipeUrl(requestParameters) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling getActionRecipe.');
        }
        return `${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}`;
    }
    getActionRecipes(requestParameters, observe = 'body', reportProgress = false, options) {
        const _specificationId = requestParameters["specificationId"];
        const _active = requestParameters["active"];
        const _offset = requestParameters["offset"];
        const _limit = requestParameters["limit"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_specificationId !== undefined && _specificationId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _specificationId, 'specificationId');
        }
        if (_active !== undefined && _active !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _active, 'active');
        }
        if (_offset !== undefined && _offset !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _offset, 'offset');
        }
        if (_limit !== undefined && _limit !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _limit, 'limit');
        }
        if (_orderBy !== undefined && _orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _orderBy, 'orderBy');
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/action-recipes`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getActionRecipesUrl(requestParameters) {
        const _specificationId = requestParameters["specificationId"];
        const _active = requestParameters["active"];
        const _offset = requestParameters["offset"];
        const _limit = requestParameters["limit"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_specificationId !== undefined && _specificationId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _specificationId, 'specificationId');
        }
        if (_active !== undefined && _active !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _active, 'active');
        }
        if (_offset !== undefined && _offset !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _offset, 'offset');
        }
        if (_limit !== undefined && _limit !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _limit, 'limit');
        }
        if (_orderBy !== undefined && _orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _orderBy, 'orderBy');
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/action-recipes${queryString ? `?${queryString}` : ''}`;
    }
    getActionsHistory(requestParameters, observe = 'body', reportProgress = false, options) {
        const _offset = requestParameters["offset"];
        const _limit = requestParameters["limit"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_offset !== undefined && _offset !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _offset, 'offset');
        }
        if (_limit !== undefined && _limit !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _limit, 'limit');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/action-recipes/history`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getActionsHistoryUrl(requestParameters) {
        const _offset = requestParameters["offset"];
        const _limit = requestParameters["limit"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_offset !== undefined && _offset !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _offset, 'offset');
        }
        if (_limit !== undefined && _limit !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _limit, 'limit');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/action-recipes/history${queryString ? `?${queryString}` : ''}`;
    }
    getActionsHistoryByUser(requestParameters, observe = 'body', reportProgress = false, options) {
        const _userId = requestParameters["userId"];
        if (_userId === null || _userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling getActionsHistoryByUser.');
        }
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        const _offset = requestParameters["offset"];
        const _limit = requestParameters["limit"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_serviceAgreementId !== undefined && _serviceAgreementId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _serviceAgreementId, 'serviceAgreementId');
        }
        if (_offset !== undefined && _offset !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _offset, 'offset');
        }
        if (_limit !== undefined && _limit !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _limit, 'limit');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/action-recipes/history/${encodeURIComponent(String(_userId))}`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getActionsHistoryByUserUrl(requestParameters) {
        const _userId = requestParameters["userId"];
        if (_userId === null || _userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling getActionsHistoryByUser.');
        }
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        const _offset = requestParameters["offset"];
        const _limit = requestParameters["limit"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_serviceAgreementId !== undefined && _serviceAgreementId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _serviceAgreementId, 'serviceAgreementId');
        }
        if (_offset !== undefined && _offset !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _offset, 'offset');
        }
        if (_limit !== undefined && _limit !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _limit, 'limit');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/action-recipes/history/${encodeURIComponent(String(_userId))}${queryString ? `?${queryString}` : ''}`;
    }
    getPaymentStatuses(observe = 'body', reportProgress = false, options) {
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/action-recipes/payment-statuses`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getPaymentStatusesUrl() {
        return `${this.configuration.basePath}/client-api/v2/action-recipes/payment-statuses`;
    }
    getPaymentTypes(observe = 'body', reportProgress = false, options) {
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/action-recipes/payment-types`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getPaymentTypesUrl() {
        return `${this.configuration.basePath}/client-api/v2/action-recipes/payment-types`;
    }
    postActionRecipes(requestParameters, observe = 'body', reportProgress = false, options) {
        const _actionRecipesPostRequestBody = requestParameters["actionRecipesPostRequestBody"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/action-recipes`, _actionRecipesPostRequestBody, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postActionRecipesUrl(requestParameters) {
        const _actionRecipesPostRequestBody = requestParameters["actionRecipesPostRequestBody"];
        return `${this.configuration.basePath}/client-api/v2/action-recipes`;
    }
    postActivationRequest(requestParameters, observe = 'body', reportProgress = false, options) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling postActivationRequest.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}/activation-request`, null, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postActivationRequestUrl(requestParameters) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling postActivationRequest.');
        }
        return `${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}/activation-request`;
    }
    postDeactivationRequest(requestParameters, observe = 'body', reportProgress = false, options) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling postDeactivationRequest.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}/deactivation-request`, null, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postDeactivationRequestUrl(requestParameters) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling postDeactivationRequest.');
        }
        return `${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}/deactivation-request`;
    }
    putActionRecipe(requestParameters, observe = 'body', reportProgress = false, options) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling putActionRecipe.');
        }
        const _actionRecipePutRequestBody = requestParameters["actionRecipePutRequestBody"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}`, _actionRecipePutRequestBody, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putActionRecipeUrl(requestParameters) {
        const _recipeId = requestParameters["recipeId"];
        if (_recipeId === null || _recipeId === undefined) {
            throw new Error('Required parameter recipeId was null or undefined when calling putActionRecipe.');
        }
        const _actionRecipePutRequestBody = requestParameters["actionRecipePutRequestBody"];
        return `${this.configuration.basePath}/client-api/v2/action-recipes/${encodeURIComponent(String(_recipeId))}`;
    }
    putBatchProcessing(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchProcessingPutRequestBody = requestParameters["batchProcessingPutRequestBody"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/action-recipes/batch`, _batchProcessingPutRequestBody, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putBatchProcessingUrl(requestParameters) {
        const _batchProcessingPutRequestBody = requestParameters["batchProcessingPutRequestBody"];
        return `${this.configuration.basePath}/client-api/v2/action-recipes/batch`;
    }
}
ActionRecipesHttpService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ActionRecipesHttpService, deps: [{ token: i1.HttpClient }, { token: ACTIONS_BASE_PATH, optional: true }, { token: i2.ActionsConfiguration, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
ActionRecipesHttpService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ActionRecipesHttpService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ActionRecipesHttpService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [ACTIONS_BASE_PATH]
                }] }, { type: i2.ActionsConfiguration, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uUmVjaXBlcy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYXBpL2FjdGlvblJlY2lwZXMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFjQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBMkIsZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBYyxXQUFXLEVBQUUsVUFBVSxFQUNVLE1BQVksc0JBQXNCLENBQUM7QUFDekYsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQStCLFlBQVksQ0FBQztBQWtCL0UsT0FBTyxFQUFFLGlCQUFpQixFQUFzQixNQUEwQixjQUFjLENBQUM7QUFDekYsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQTBDLGtCQUFrQixDQUFDOzs7O0FBa0U1RixNQUFNLE9BQU8sd0JBQXdCO0lBT2pDLFlBQXNCLFVBQXNCLEVBQXlDLFFBQWdCLEVBQWMsYUFBbUM7UUFBaEksZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUxsQyxhQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLG1CQUFjLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztRQUNuQyxrQkFBYSxHQUFHLElBQUksb0JBQW9CLEVBQUUsQ0FBQztRQUk5QyxJQUFJLGFBQWEsRUFBRTtZQUNmLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1NBQ3RDO1FBQ0QsSUFBSSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxLQUFLLFFBQVEsRUFBRTtZQUNqRCxJQUFJLE9BQU8sUUFBUSxLQUFLLFFBQVEsRUFBRTtnQkFDOUIsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7YUFDNUI7WUFDRCxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDMUM7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxJQUFJLElBQUksd0JBQXdCLEVB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LE1BQU07MkJBQUMsaUJBQWlCOzswQkFBcUIsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQWN0aW9ucyBjbGllbnRcbiAqIFJldHJpZXZlIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbnMuIENyZWF0ZSwgcmVhZCwgdXBkYXRlLCBhbmQgZGVsZXRlIGFjdGlvbiByZWNpcGVzLiBSZXRyaWV2ZSBwYXltZW50IHN0YXR1c2VzIGFuZCB0eXBlcy5cbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMi4wLjEyXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL2dpdGh1Yi5jb20vQmFja2Jhc2UvYmFja2Jhc2Utb3BlbmFwaS10b29scykuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vQmFja2Jhc2UvYmFja2Jhc2Utb3BlbmFwaS10b29sc1xuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG5cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBBY3Rpb25SZWNpcGVHZXRSZXNwb25zZUJvZHkgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQWN0aW9uUmVjaXBlUHV0UmVxdWVzdEJvZHkgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQWN0aW9uUmVjaXBlc0dldFJlc3BvbnNlQm9keSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBBY3Rpb25SZWNpcGVzUG9zdFJlcXVlc3RCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEFjdGlvblJlY2lwZXNQb3N0UmVzcG9uc2VCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEFjdGlvbnNIaXN0b3J5R2V0UmVzcG9uc2VCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaFByb2Nlc3NpbmdQdXRSZXF1ZXN0Qm9keSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaFByb2Nlc3NpbmdQdXRSZXNwb25zZUJvZHkgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgRm9yYmlkZGVuRXJyb3IgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQYXltZW50U3RhdHVzZXNHZXRSZXNwb25zZUJvZHkgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUGF5bWVudFR5cGVzR2V0UmVzcG9uc2VCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFVuYXV0aG9yaXplZEVycm9yIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcblxuaW1wb3J0IHsgQUNUSU9OU19CQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IEFjdGlvbnNDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVBY3Rpb25SZWNpcGVSZXF1ZXN0UGFyYW1zIHtcbiAgICBbXCJyZWNpcGVJZFwiXTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMge1xuICAgIFtcInJlY2lwZUlkXCJdOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0QWN0aW9uUmVjaXBlc1JlcXVlc3RQYXJhbXMge1xuICAgIFtcInNwZWNpZmljYXRpb25JZFwiXT86IHN0cmluZztcbiAgICBbXCJhY3RpdmVcIl0/OiBib29sZWFuO1xuICAgIC8qKiBSZXByZXNlbnRzIGEgbnVtYmVyIG9mIHBhZ2UgKi9cbiAgICBbXCJvZmZzZXRcIl0/OiBudW1iZXI7XG4gICAgLyoqIFJlcHJlc2VudHMgYSBwYWdlIHNpemUgKi9cbiAgICBbXCJsaW1pdFwiXT86IG51bWJlcjtcbiAgICAvKiogT3JkZXIgYnkgZmllbGQ6IG5hbWUsIGFjdGl2ZSwgc3BlY2lmaWNhdGlvbklkLCBhbW91bnQsIGNyZWF0ZWRPbiAqL1xuICAgIFtcIm9yZGVyQnlcIl0/OiBzdHJpbmc7XG4gICAgLyoqIERpcmVjdGlvbiAqL1xuICAgIFtcImRpcmVjdGlvblwiXT86ICdBU0MnIHwgJ0RFU0MnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEFjdGlvbnNIaXN0b3J5UmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFJlcHJlc2VudHMgYSBudW1iZXIgb2YgcGFnZSAqL1xuICAgIFtcIm9mZnNldFwiXT86IG51bWJlcjtcbiAgICAvKiogUmVwcmVzZW50cyBhIHBhZ2Ugc2l6ZSAqL1xuICAgIFtcImxpbWl0XCJdPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEFjdGlvbnNIaXN0b3J5QnlVc2VyUmVxdWVzdFBhcmFtcyB7XG4gICAgW1widXNlcklkXCJdOiBzdHJpbmc7XG4gICAgLyoqIFNlcnZpY2UgYWdyZWVtZW50IElEIG9mIGJ1c2luZXNzIHVzZXIuICovXG4gICAgW1wic2VydmljZUFncmVlbWVudElkXCJdPzogc3RyaW5nO1xuICAgIC8qKiBSZXByZXNlbnRzIGEgbnVtYmVyIG9mIHBhZ2UgKi9cbiAgICBbXCJvZmZzZXRcIl0/OiBudW1iZXI7XG4gICAgLyoqIFJlcHJlc2VudHMgYSBwYWdlIHNpemUgKi9cbiAgICBbXCJsaW1pdFwiXT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3N0QWN0aW9uUmVjaXBlc1JlcXVlc3RQYXJhbXMge1xuICAgIFtcImFjdGlvblJlY2lwZXNQb3N0UmVxdWVzdEJvZHlcIl0/OiBBY3Rpb25SZWNpcGVzUG9zdFJlcXVlc3RCb2R5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RBY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMge1xuICAgIFtcInJlY2lwZUlkXCJdOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdERlYWN0aXZhdGlvblJlcXVlc3RSZXF1ZXN0UGFyYW1zIHtcbiAgICBbXCJyZWNpcGVJZFwiXTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFB1dEFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMge1xuICAgIFtcInJlY2lwZUlkXCJdOiBzdHJpbmc7XG4gICAgW1wiYWN0aW9uUmVjaXBlUHV0UmVxdWVzdEJvZHlcIl0/OiBBY3Rpb25SZWNpcGVQdXRSZXF1ZXN0Qm9keTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQdXRCYXRjaFByb2Nlc3NpbmdSZXF1ZXN0UGFyYW1zIHtcbiAgICBbXCJiYXRjaFByb2Nlc3NpbmdQdXRSZXF1ZXN0Qm9keVwiXT86IEJhdGNoUHJvY2Vzc2luZ1B1dFJlcXVlc3RCb2R5O1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEFjdGlvblJlY2lwZXNIdHRwU2VydmljZSB7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnJztcbiAgICBwdWJsaWMgZGVmYXVsdEhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKTtcbiAgICBwdWJsaWMgY29uZmlndXJhdGlvbiA9IG5ldyBBY3Rpb25zQ29uZmlndXJhdGlvbigpO1xuICAgIHB1YmxpYyBlbmNvZGVyOiBIdHRwUGFyYW1ldGVyQ29kZWM7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChBQ1RJT05TX0JBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZywgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbjogQWN0aW9uc0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGJhc2VQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGJhc2VQYXRoID0gdGhpcy5iYXNlUGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5jb2RlciA9IHRoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVyIHx8IG5ldyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMoKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgYWRkVG9IdHRwUGFyYW1zKGh0dHBQYXJhbXM6IEh0dHBQYXJhbXMsIHZhbHVlOiBhbnksIGtleT86IHN0cmluZyk6IEh0dHBQYXJhbXMge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtczogSHR0cFBhcmFtcywgdmFsdWU/OiBhbnksIGtleT86IHN0cmluZyk6IEh0dHBQYXJhbXMge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAodmFsdWUgYXMgYW55W10pLmZvckVhY2goIGVsZW0gPT4gaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIGVsZW0sIGtleSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaHR0cFBhcmFtcyA9IGh0dHBQYXJhbXMuYXBwZW5kKGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICh2YWx1ZSBhcyBEYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIERhdGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCggayA9PiBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoXG4gICAgICAgICAgICAgICAgICAgIGh0dHBQYXJhbXMsIHZhbHVlW2tdLCBrZXkgIT0gbnVsbCA/IGAke2tleX0uJHtrfWAgOiBrKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwia2V5IG1heSBub3QgYmUgbnVsbCBpZiB2YWx1ZSBpcyBub3Qgb2JqZWN0IG9yIGFycmF5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtkZWxldGUmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSB0aGF0IG5lZWRzIHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUFjdGlvblJlY2lwZShyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtkZWxldGUmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSB0aGF0IG5lZWRzIHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUFjdGlvblJlY2lwZShyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtkZWxldGUmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSB0aGF0IG5lZWRzIHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUFjdGlvblJlY2lwZShyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHJlY2lwZS4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOywgJiN4NjA7ZGVsZXRlJiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSBpbiB0d28gY2FzZXM6ICAgLSBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIHRoZSBjYXRlZ29yeSAmI3g2MDthcnJhbmdlbWVudEJhc2VkJiN4NjA7ICAgLSBEZXByZWNhdGVkLiBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIGFuIElEICYjeDYwOzEmI3g2MDsgb3IgJiN4NjA7NCYjeDYwOyBpZiB0aGVyZSBpcyBubyBjYXRlZ29yeSBzcGVjaWZpZWQgICBBcnJhbmdlbWVudCB2YWxpZGF0aW9uIGltcGxpZXMgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIGxvZ2dlZC1pbiB1c2VyIGhhcyB0aGUgJiN4NjA7dmlldyYjeDYwOyBwcml2aWxlZ2UgZm9yIHRoZSAmI3g2MDtQcm9kdWN0IFN1bW1hcnkmI3g2MDsgYnVzaW5lc3MgZnVuY3Rpb24gZm9yIHRoZSAmI3g2MDthcnJhbmdlbWVudCYjeDYwOyBzcGVjaWZpZWQgaW4gdGhlIGFjdGlvbiByZWNpcGUgdGhhdCBuZWVkcyB0byBiZSBkZWxldGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVBY3Rpb25SZWNpcGUocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQWN0aW9uUmVjaXBlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3JlY2lwZUlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlbGV0ZUFjdGlvblJlY2lwZVVybChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQWN0aW9uUmVjaXBlLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9yZWNpcGVJZCkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHJlY2lwZS4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7XG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEFjdGlvblJlY2lwZShyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBY3Rpb25SZWNpcGVHZXRSZXNwb25zZUJvZHk+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwO1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBY3Rpb25SZWNpcGUocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBY3Rpb25SZWNpcGVHZXRSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDtcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uUmVjaXBlKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY3Rpb25SZWNpcGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFjdGlvblJlY2lwZUdldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwO1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBY3Rpb25SZWNpcGUocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QWN0aW9uUmVjaXBlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxBY3Rpb25SZWNpcGVHZXRSZXNwb25zZUJvZHk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3JlY2lwZUlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFjdGlvblJlY2lwZVVybChyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QWN0aW9uUmVjaXBlLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9yZWNpcGVJZCkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWN0aW9uIHJlY2lwZXMuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwO1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBY3Rpb25SZWNpcGVzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY3Rpb25SZWNpcGVzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBY3Rpb25SZWNpcGVzR2V0UmVzcG9uc2VCb2R5PjtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhY3Rpb24gcmVjaXBlcy4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7XG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEFjdGlvblJlY2lwZXMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvblJlY2lwZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QWN0aW9uUmVjaXBlc0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGFjdGlvbiByZWNpcGVzLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDtcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uUmVjaXBlcyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uUmVjaXBlc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QWN0aW9uUmVjaXBlc0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGFjdGlvbiByZWNpcGVzLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDtcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uUmVjaXBlcyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uUmVjaXBlc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9zcGVjaWZpY2F0aW9uSWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNwZWNpZmljYXRpb25JZFwiXTtcbiAgICAgICAgY29uc3QgX2FjdGl2ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYWN0aXZlXCJdO1xuICAgICAgICBjb25zdCBfb2Zmc2V0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvZmZzZXRcIl07XG4gICAgICAgIGNvbnN0IF9saW1pdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibGltaXRcIl07XG4gICAgICAgIGNvbnN0IF9vcmRlckJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvcmRlckJ5XCJdO1xuICAgICAgICBjb25zdCBfZGlyZWN0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkaXJlY3Rpb25cIl07XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9zcGVjaWZpY2F0aW9uSWQgIT09IHVuZGVmaW5lZCAmJiBfc3BlY2lmaWNhdGlvbklkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc3BlY2lmaWNhdGlvbklkLCAnc3BlY2lmaWNhdGlvbklkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9hY3RpdmUgIT09IHVuZGVmaW5lZCAmJiBfYWN0aXZlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fYWN0aXZlLCAnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9vZmZzZXQgIT09IHVuZGVmaW5lZCAmJiBfb2Zmc2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fb2Zmc2V0LCAnb2Zmc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9saW1pdCAhPT0gdW5kZWZpbmVkICYmIF9saW1pdCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2xpbWl0LCAnbGltaXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX29yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBfb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X29yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfZGlyZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGlyZWN0aW9uLCAnZGlyZWN0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFjdGlvblJlY2lwZXNHZXRSZXNwb25zZUJvZHk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBY3Rpb25SZWNpcGVzVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY3Rpb25SZWNpcGVzUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9zcGVjaWZpY2F0aW9uSWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNwZWNpZmljYXRpb25JZFwiXTtcbiAgICAgICAgY29uc3QgX2FjdGl2ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYWN0aXZlXCJdO1xuICAgICAgICBjb25zdCBfb2Zmc2V0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvZmZzZXRcIl07XG4gICAgICAgIGNvbnN0IF9saW1pdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibGltaXRcIl07XG4gICAgICAgIGNvbnN0IF9vcmRlckJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvcmRlckJ5XCJdO1xuICAgICAgICBjb25zdCBfZGlyZWN0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkaXJlY3Rpb25cIl07XG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfc3BlY2lmaWNhdGlvbklkICE9PSB1bmRlZmluZWQgJiYgX3NwZWNpZmljYXRpb25JZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NwZWNpZmljYXRpb25JZCwgJ3NwZWNpZmljYXRpb25JZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfYWN0aXZlICE9PSB1bmRlZmluZWQgJiYgX2FjdGl2ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2FjdGl2ZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgX29mZnNldCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X29mZnNldCwgJ29mZnNldCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfbGltaXQgIT09IHVuZGVmaW5lZCAmJiBfbGltaXQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9vcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgX29yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZGlyZWN0aW9uICE9PSB1bmRlZmluZWQgJiYgX2RpcmVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2RpcmVjdGlvbiwgJ2RpcmVjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnJ31gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgaGlzdG9yeSBvZiBhbGwgYWN0aW9ucyBmb3IgdGhlIGxvZ2dlZC1pbiB1c2VyLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBY3Rpb25zSGlzdG9yeShyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uc0hpc3RvcnlSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFjdGlvbnNIaXN0b3J5R2V0UmVzcG9uc2VCb2R5PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGhpc3Rvcnkgb2YgYWxsIGFjdGlvbnMgZm9yIHRoZSBsb2dnZWQtaW4gdXNlci5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uc0hpc3RvcnkocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvbnNIaXN0b3J5UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFjdGlvbnNIaXN0b3J5R2V0UmVzcG9uc2VCb2R5Pj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBoaXN0b3J5IG9mIGFsbCBhY3Rpb25zIGZvciB0aGUgbG9nZ2VkLWluIHVzZXIuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEFjdGlvbnNIaXN0b3J5KHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY3Rpb25zSGlzdG9yeVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QWN0aW9uc0hpc3RvcnlHZXRSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGhpc3Rvcnkgb2YgYWxsIGFjdGlvbnMgZm9yIHRoZSBsb2dnZWQtaW4gdXNlci5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uc0hpc3RvcnkocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvbnNIaXN0b3J5UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX29mZnNldCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wib2Zmc2V0XCJdO1xuICAgICAgICBjb25zdCBfbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImxpbWl0XCJdO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfb2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgX29mZnNldCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X29mZnNldCwgJ29mZnNldCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfbGltaXQgIT09IHVuZGVmaW5lZCAmJiBfbGltaXQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFjdGlvbnNIaXN0b3J5R2V0UmVzcG9uc2VCb2R5PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvaGlzdG9yeWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBY3Rpb25zSGlzdG9yeVVybChyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uc0hpc3RvcnlSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX29mZnNldCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wib2Zmc2V0XCJdO1xuICAgICAgICBjb25zdCBfbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImxpbWl0XCJdO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX29mZnNldCAhPT0gdW5kZWZpbmVkICYmIF9vZmZzZXQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9vZmZzZXQsICdvZmZzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2xpbWl0ICE9PSB1bmRlZmluZWQgJiYgX2xpbWl0ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fbGltaXQsICdsaW1pdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvaGlzdG9yeSR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBhbGVydHMgaGlzdG9yeSByZWNvcmRzIGJ5IHRhcmdldCB1c2VyIElELiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtBY2Nlc3MgQWN0aW9ucyBIaXN0b3J5JiN4NjA7ICAgVGhlIHBlcm1pc3Npb24gY2hlY2sgY291bGQgYmUgc3dpdGNoZWQgb2ZmIGJ5IHNldHRpbmcgdGhlIHBhcmFtZXRlciAmI3g2MDtiYWNrYmFzZS5hY2Nlc3MtY29udHJvbC5lbmFibGVkJiN4NjA7IHRvICYjeDYwO2ZhbHNlJiN4NjA7LlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBY3Rpb25zSGlzdG9yeUJ5VXNlcihyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uc0hpc3RvcnlCeVVzZXJSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFjdGlvbnNIaXN0b3J5R2V0UmVzcG9uc2VCb2R5PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGFsZXJ0cyBoaXN0b3J5IHJlY29yZHMgYnkgdGFyZ2V0IHVzZXIgSUQuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO0FjY2VzcyBBY3Rpb25zIEhpc3RvcnkmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEFjdGlvbnNIaXN0b3J5QnlVc2VyKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY3Rpb25zSGlzdG9yeUJ5VXNlclJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBY3Rpb25zSGlzdG9yeUdldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgYWxlcnRzIGhpc3RvcnkgcmVjb3JkcyBieSB0YXJnZXQgdXNlciBJRC4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7QWNjZXNzIEFjdGlvbnMgSGlzdG9yeSYjeDYwOyAgIFRoZSBwZXJtaXNzaW9uIGNoZWNrIGNvdWxkIGJlIHN3aXRjaGVkIG9mZiBieSBzZXR0aW5nIHRoZSBwYXJhbWV0ZXIgJiN4NjA7YmFja2Jhc2UuYWNjZXNzLWNvbnRyb2wuZW5hYmxlZCYjeDYwOyB0byAmI3g2MDtmYWxzZSYjeDYwOy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uc0hpc3RvcnlCeVVzZXIocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvbnNIaXN0b3J5QnlVc2VyUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBY3Rpb25zSGlzdG9yeUdldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgYWxlcnRzIGhpc3RvcnkgcmVjb3JkcyBieSB0YXJnZXQgdXNlciBJRC4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7QWNjZXNzIEFjdGlvbnMgSGlzdG9yeSYjeDYwOyAgIFRoZSBwZXJtaXNzaW9uIGNoZWNrIGNvdWxkIGJlIHN3aXRjaGVkIG9mZiBieSBzZXR0aW5nIHRoZSBwYXJhbWV0ZXIgJiN4NjA7YmFja2Jhc2UuYWNjZXNzLWNvbnRyb2wuZW5hYmxlZCYjeDYwOyB0byAmI3g2MDtmYWxzZSYjeDYwOy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aW9uc0hpc3RvcnlCeVVzZXIocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjdGlvbnNIaXN0b3J5QnlVc2VyUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3VzZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcklkXCJdO1xuICAgICAgICBpZiAoX3VzZXJJZCA9PT0gbnVsbCB8fCBfdXNlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEFjdGlvbnNIaXN0b3J5QnlVc2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNlcnZpY2VBZ3JlZW1lbnRJZFwiXTtcbiAgICAgICAgY29uc3QgX29mZnNldCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wib2Zmc2V0XCJdO1xuICAgICAgICBjb25zdCBfbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImxpbWl0XCJdO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfc2VydmljZUFncmVlbWVudElkICE9PSB1bmRlZmluZWQgJiYgX3NlcnZpY2VBZ3JlZW1lbnRJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NlcnZpY2VBZ3JlZW1lbnRJZCwgJ3NlcnZpY2VBZ3JlZW1lbnRJZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgX29mZnNldCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X29mZnNldCwgJ29mZnNldCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfbGltaXQgIT09IHVuZGVmaW5lZCAmJiBfbGltaXQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9saW1pdCwgJ2xpbWl0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFjdGlvbnNIaXN0b3J5R2V0UmVzcG9uc2VCb2R5PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvaGlzdG9yeS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3VzZXJJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBY3Rpb25zSGlzdG9yeUJ5VXNlclVybChyZXF1ZXN0UGFyYW1ldGVyczogR2V0QWN0aW9uc0hpc3RvcnlCeVVzZXJSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX3VzZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcklkXCJdO1xuICAgICAgICBpZiAoX3VzZXJJZCA9PT0gbnVsbCB8fCBfdXNlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEFjdGlvbnNIaXN0b3J5QnlVc2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNlcnZpY2VBZ3JlZW1lbnRJZFwiXTtcbiAgICAgICAgY29uc3QgX29mZnNldCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wib2Zmc2V0XCJdO1xuICAgICAgICBjb25zdCBfbGltaXQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImxpbWl0XCJdO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX3NlcnZpY2VBZ3JlZW1lbnRJZCAhPT0gdW5kZWZpbmVkICYmIF9zZXJ2aWNlQWdyZWVtZW50SWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zZXJ2aWNlQWdyZWVtZW50SWQsICdzZXJ2aWNlQWdyZWVtZW50SWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX29mZnNldCAhPT0gdW5kZWZpbmVkICYmIF9vZmZzZXQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9vZmZzZXQsICdvZmZzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2xpbWl0ICE9PSB1bmRlZmluZWQgJiYgX2xpbWl0ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fbGltaXQsICdsaW1pdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvaGlzdG9yeS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3VzZXJJZCkpfSR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBhdmFpbGFibGUgcGF5bWVudCBzdGF0dXNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UGF5bWVudFN0YXR1c2VzKG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8UGF5bWVudFN0YXR1c2VzR2V0UmVzcG9uc2VCb2R5PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGF2YWlsYWJsZSBwYXltZW50IHN0YXR1c2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQYXltZW50U3RhdHVzZXMob2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFBheW1lbnRTdGF0dXNlc0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgYXZhaWxhYmxlIHBheW1lbnQgc3RhdHVzZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFBheW1lbnRTdGF0dXNlcyhvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFBheW1lbnRTdGF0dXNlc0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgYXZhaWxhYmxlIHBheW1lbnQgc3RhdHVzZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFBheW1lbnRTdGF0dXNlcyhvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UGF5bWVudFN0YXR1c2VzR2V0UmVzcG9uc2VCb2R5PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvcGF5bWVudC1zdGF0dXNlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQYXltZW50U3RhdHVzZXNVcmwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlcy9wYXltZW50LXN0YXR1c2VzYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGF2YWlsYWJsZSBwYXltZW50IHR5cGVzIGZvciB0aGUgbG9nZ2VkLWluIHVzZXIuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFBheW1lbnRUeXBlcyhvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPFBheW1lbnRUeXBlc0dldFJlc3BvbnNlQm9keT47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBhdmFpbGFibGUgcGF5bWVudCB0eXBlcyBmb3IgdGhlIGxvZ2dlZC1pbiB1c2VyLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQYXltZW50VHlwZXMob2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFBheW1lbnRUeXBlc0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgYXZhaWxhYmxlIHBheW1lbnQgdHlwZXMgZm9yIHRoZSBsb2dnZWQtaW4gdXNlci5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UGF5bWVudFR5cGVzKG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UGF5bWVudFR5cGVzR2V0UmVzcG9uc2VCb2R5Pj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBhdmFpbGFibGUgcGF5bWVudCB0eXBlcyBmb3IgdGhlIGxvZ2dlZC1pbiB1c2VyLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQYXltZW50VHlwZXMob2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFBheW1lbnRUeXBlc0dldFJlc3BvbnNlQm9keT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjdGlvbi1yZWNpcGVzL3BheW1lbnQtdHlwZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UGF5bWVudFR5cGVzVXJsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvcGF5bWVudC10eXBlc2A7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtjcmVhdGUmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgcGF5bG9hZCB3aGVuIGNyZWF0aW5nIGEgbmV3IGFjdGlvbiByZWNpcGUuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RBY3Rpb25SZWNpcGVzKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0QWN0aW9uUmVjaXBlc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8QWN0aW9uUmVjaXBlc1Bvc3RSZXNwb25zZUJvZHk+O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYWN0aW9uIHJlY2lwZS4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOywgJiN4NjA7Y3JlYXRlJiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSBpbiB0d28gY2FzZXM6ICAgLSBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIHRoZSBjYXRlZ29yeSAmI3g2MDthcnJhbmdlbWVudEJhc2VkJiN4NjA7ICAgLSBEZXByZWNhdGVkLiBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIGFuIElEICYjeDYwOzEmI3g2MDsgb3IgJiN4NjA7NCYjeDYwOyBpZiB0aGVyZSBpcyBubyBjYXRlZ29yeSBzcGVjaWZpZWQgICBBcnJhbmdlbWVudCB2YWxpZGF0aW9uIGltcGxpZXMgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIGxvZ2dlZC1pbiB1c2VyIGhhcyB0aGUgJiN4NjA7dmlldyYjeDYwOyBwcml2aWxlZ2UgZm9yIHRoZSAmI3g2MDtQcm9kdWN0IFN1bW1hcnkmI3g2MDsgYnVzaW5lc3MgZnVuY3Rpb24gZm9yIHRoZSAmI3g2MDthcnJhbmdlbWVudCYjeDYwOyBzcGVjaWZpZWQgaW4gdGhlIHBheWxvYWQgd2hlbiBjcmVhdGluZyBhIG5ldyBhY3Rpb24gcmVjaXBlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWN0aW9uUmVjaXBlcyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEFjdGlvblJlY2lwZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QWN0aW9uUmVjaXBlc1Bvc3RSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDssICYjeDYwO2NyZWF0ZSYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7ICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBwYXlsb2FkIHdoZW4gY3JlYXRpbmcgYSBuZXcgYWN0aW9uIHJlY2lwZS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEFjdGlvblJlY2lwZXMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY3Rpb25SZWNpcGVzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBY3Rpb25SZWNpcGVzUG9zdFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYWN0aW9uIHJlY2lwZS4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOywgJiN4NjA7Y3JlYXRlJiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSBpbiB0d28gY2FzZXM6ICAgLSBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIHRoZSBjYXRlZ29yeSAmI3g2MDthcnJhbmdlbWVudEJhc2VkJiN4NjA7ICAgLSBEZXByZWNhdGVkLiBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIGFuIElEICYjeDYwOzEmI3g2MDsgb3IgJiN4NjA7NCYjeDYwOyBpZiB0aGVyZSBpcyBubyBjYXRlZ29yeSBzcGVjaWZpZWQgICBBcnJhbmdlbWVudCB2YWxpZGF0aW9uIGltcGxpZXMgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIGxvZ2dlZC1pbiB1c2VyIGhhcyB0aGUgJiN4NjA7dmlldyYjeDYwOyBwcml2aWxlZ2UgZm9yIHRoZSAmI3g2MDtQcm9kdWN0IFN1bW1hcnkmI3g2MDsgYnVzaW5lc3MgZnVuY3Rpb24gZm9yIHRoZSAmI3g2MDthcnJhbmdlbWVudCYjeDYwOyBzcGVjaWZpZWQgaW4gdGhlIHBheWxvYWQgd2hlbiBjcmVhdGluZyBhIG5ldyBhY3Rpb24gcmVjaXBlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWN0aW9uUmVjaXBlcyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEFjdGlvblJlY2lwZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfYWN0aW9uUmVjaXBlc1Bvc3RSZXF1ZXN0Qm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYWN0aW9uUmVjaXBlc1Bvc3RSZXF1ZXN0Qm9keVwiXTtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxBY3Rpb25SZWNpcGVzUG9zdFJlc3BvbnNlQm9keT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjdGlvbi1yZWNpcGVzYCxcbiAgICAgICAgICAgIF9hY3Rpb25SZWNpcGVzUG9zdFJlcXVlc3RCb2R5LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdEFjdGlvblJlY2lwZXNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY3Rpb25SZWNpcGVzUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9hY3Rpb25SZWNpcGVzUG9zdFJlcXVlc3RCb2R5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhY3Rpb25SZWNpcGVzUG9zdFJlcXVlc3RCb2R5XCJdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjdGlvbi1yZWNpcGVzYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtleGVjdXRlJiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgYWN0aXZhdGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWN0aXZhdGlvblJlcXVlc3QocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtleGVjdXRlJiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgYWN0aXZhdGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWN0aXZhdGlvblJlcXVlc3QocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtleGVjdXRlJiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgYWN0aXZhdGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWN0aXZhdGlvblJlcXVlc3QocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogQWN0aXZhdGVzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHJlY2lwZS4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOywgJiN4NjA7ZXhlY3V0ZSYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7ICAgVGhlIHBlcm1pc3Npb24gY2hlY2sgY291bGQgYmUgc3dpdGNoZWQgb2ZmIGJ5IHNldHRpbmcgdGhlIHBhcmFtZXRlciAmI3g2MDtiYWNrYmFzZS5hY2Nlc3MtY29udHJvbC5lbmFibGVkJiN4NjA7IHRvICYjeDYwO2ZhbHNlJiN4NjA7LiAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSB0aGF0IG5lZWRzIHRvIGJlIGFjdGl2YXRlZC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEFjdGl2YXRpb25SZXF1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0QWN0aXZhdGlvblJlcXVlc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfcmVjaXBlSWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInJlY2lwZUlkXCJdO1xuICAgICAgICBpZiAoX3JlY2lwZUlkID09PSBudWxsIHx8IF9yZWNpcGVJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZWNpcGVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3RBY3RpdmF0aW9uUmVxdWVzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjdGlvbi1yZWNpcGVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfcmVjaXBlSWQpKX0vYWN0aXZhdGlvbi1yZXF1ZXN0YCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBwb3N0QWN0aXZhdGlvblJlcXVlc3RVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfcmVjaXBlSWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInJlY2lwZUlkXCJdO1xuICAgICAgICBpZiAoX3JlY2lwZUlkID09PSBudWxsIHx8IF9yZWNpcGVJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZWNpcGVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3RBY3RpdmF0aW9uUmVxdWVzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjdGlvbi1yZWNpcGVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfcmVjaXBlSWQpKX0vYWN0aXZhdGlvbi1yZXF1ZXN0YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWFjdGl2YXRlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDssICYjeDYwO2V4ZWN1dGUmI3g2MDsgICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgZGVhY3RpdmF0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3REZWFjdGl2YXRpb25SZXF1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0RGVhY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICAvKipcbiAgICAgKiBEZWFjdGl2YXRlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDssICYjeDYwO2V4ZWN1dGUmI3g2MDsgICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgZGVhY3RpdmF0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3REZWFjdGl2YXRpb25SZXF1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0RGVhY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICAvKipcbiAgICAgKiBEZWFjdGl2YXRlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDssICYjeDYwO2V4ZWN1dGUmI3g2MDsgICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgZGVhY3RpdmF0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3REZWFjdGl2YXRpb25SZXF1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0RGVhY3RpdmF0aW9uUmVxdWVzdFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogRGVhY3RpdmF0ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtleGVjdXRlJiN4NjA7ICAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7ICAgVGhlIHBlcm1pc3Npb24gY2hlY2sgY291bGQgYmUgc3dpdGNoZWQgb2ZmIGJ5IHNldHRpbmcgdGhlIHBhcmFtZXRlciAmI3g2MDtiYWNrYmFzZS5hY2Nlc3MtY29udHJvbC5lbmFibGVkJiN4NjA7IHRvICYjeDYwO2ZhbHNlJiN4NjA7LiAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSB0aGF0IG5lZWRzIHRvIGJlIGRlYWN0aXZhdGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0RGVhY3RpdmF0aW9uUmVxdWVzdChyZXF1ZXN0UGFyYW1ldGVyczogUG9zdERlYWN0aXZhdGlvblJlcXVlc3RSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfcmVjaXBlSWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInJlY2lwZUlkXCJdO1xuICAgICAgICBpZiAoX3JlY2lwZUlkID09PSBudWxsIHx8IF9yZWNpcGVJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZWNpcGVJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3REZWFjdGl2YXRpb25SZXF1ZXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9yZWNpcGVJZCkpfS9kZWFjdGl2YXRpb24tcmVxdWVzdGAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdERlYWN0aXZhdGlvblJlcXVlc3RVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3REZWFjdGl2YXRpb25SZXF1ZXN0UmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcG9zdERlYWN0aXZhdGlvblJlcXVlc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3JlY2lwZUlkKSl9L2RlYWN0aXZhdGlvbi1yZXF1ZXN0YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHJlY2lwZS4gQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDssICYjeDYwO2VkaXQmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIGluIHR3byBjYXNlczogICAtIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsgICAtIERlcHJlY2F0ZWQuIElmIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggYW4gSUQgJiN4NjA7MSYjeDYwOyBvciAmI3g2MDs0JiN4NjA7IGlmIHRoZXJlIGlzIG5vIGNhdGVnb3J5IHNwZWNpZmllZCAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSB0aGF0IG5lZWRzIHRvIGJlIHVwZGF0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dEFjdGlvblJlY2lwZShyZXF1ZXN0UGFyYW1ldGVyczogUHV0QWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gcmVjaXBlLiBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOywgJiN4NjA7ZWRpdCYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7ICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2UgaW4gdHdvIGNhc2VzOiAgIC0gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOyAgIC0gRGVwcmVjYXRlZC4gSWYgdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCBhbiBJRCAmI3g2MDsxJiN4NjA7IG9yICYjeDYwOzQmI3g2MDsgaWYgdGhlcmUgaXMgbm8gY2F0ZWdvcnkgc3BlY2lmaWVkICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIHRoYXQgbmVlZHMgdG8gYmUgdXBkYXRlZC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QWN0aW9uUmVjaXBlKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBY3Rpb25SZWNpcGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtlZGl0JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSBpbiB0d28gY2FzZXM6ICAgLSBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIHRoZSBjYXRlZ29yeSAmI3g2MDthcnJhbmdlbWVudEJhc2VkJiN4NjA7ICAgLSBEZXByZWNhdGVkLiBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIGFuIElEICYjeDYwOzEmI3g2MDsgb3IgJiN4NjA7NCYjeDYwOyBpZiB0aGVyZSBpcyBubyBjYXRlZ29yeSBzcGVjaWZpZWQgICBBcnJhbmdlbWVudCB2YWxpZGF0aW9uIGltcGxpZXMgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIGxvZ2dlZC1pbiB1c2VyIGhhcyB0aGUgJiN4NjA7dmlldyYjeDYwOyBwcml2aWxlZ2UgZm9yIHRoZSAmI3g2MDtQcm9kdWN0IFN1bW1hcnkmI3g2MDsgYnVzaW5lc3MgZnVuY3Rpb24gZm9yIHRoZSAmI3g2MDthcnJhbmdlbWVudCYjeDYwOyBzcGVjaWZpZWQgaW4gdGhlIGFjdGlvbiByZWNpcGUgdGhhdCBuZWVkcyB0byBiZSB1cGRhdGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRBY3Rpb25SZWNpcGUocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc3BlY2lmaWVkIGFjdGlvbiByZWNpcGUuIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtlZGl0JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSBpbiB0d28gY2FzZXM6ICAgLSBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIHRoZSBjYXRlZ29yeSAmI3g2MDthcnJhbmdlbWVudEJhc2VkJiN4NjA7ICAgLSBEZXByZWNhdGVkLiBJZiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIGFuIElEICYjeDYwOzEmI3g2MDsgb3IgJiN4NjA7NCYjeDYwOyBpZiB0aGVyZSBpcyBubyBjYXRlZ29yeSBzcGVjaWZpZWQgICBBcnJhbmdlbWVudCB2YWxpZGF0aW9uIGltcGxpZXMgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIGxvZ2dlZC1pbiB1c2VyIGhhcyB0aGUgJiN4NjA7dmlldyYjeDYwOyBwcml2aWxlZ2UgZm9yIHRoZSAmI3g2MDtQcm9kdWN0IFN1bW1hcnkmI3g2MDsgYnVzaW5lc3MgZnVuY3Rpb24gZm9yIHRoZSAmI3g2MDthcnJhbmdlbWVudCYjeDYwOyBzcGVjaWZpZWQgaW4gdGhlIGFjdGlvbiByZWNpcGUgdGhhdCBuZWVkcyB0byBiZSB1cGRhdGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRBY3Rpb25SZWNpcGUocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEFjdGlvblJlY2lwZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QWN0aW9uUmVjaXBlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9hY3Rpb25SZWNpcGVQdXRSZXF1ZXN0Qm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYWN0aW9uUmVjaXBlUHV0UmVxdWVzdEJvZHlcIl07XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3JlY2lwZUlkKSl9YCxcbiAgICAgICAgICAgIF9hY3Rpb25SZWNpcGVQdXRSZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHB1dEFjdGlvblJlY2lwZVVybChyZXF1ZXN0UGFyYW1ldGVyczogUHV0QWN0aW9uUmVjaXBlUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9yZWNpcGVJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVjaXBlSWRcIl07XG4gICAgICAgIGlmIChfcmVjaXBlSWQgPT09IG51bGwgfHwgX3JlY2lwZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlY2lwZUlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QWN0aW9uUmVjaXBlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9hY3Rpb25SZWNpcGVQdXRSZXF1ZXN0Qm9keSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYWN0aW9uUmVjaXBlUHV0UmVxdWVzdEJvZHlcIl07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9yZWNpcGVJZCkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBzZXJ0cyBhY3Rpb24gcmVjaXBlcyBpbiBiYXRjaC4gU2luZ2xlIGVuZHBvaW50IGZvciBhbiB1cGRhdGUvaW5zZXJ0IG11bHRpcGxlIGFjdGlvbiByZWNpcGVzLiAgVGhlIGFjdGlvbiByZWNpcGUgd2lsbCBiZSBjcmVhdGVkIGlmIGl0IGhhcyBubyBJRC4gV2hlbiB0aGUgYWN0aW9uIHJlY2lwZSBoYXMgYW4gSUQsIGl0IHdpbGwgYmUgdXBkYXRlZC4gIFRoZSAmI3g2MDtzcGVjaWZpY2F0aW9uSWQmI3g2MDsgaXMgdGFrZW4gaW50byBhY2NvdW50IG9ubHkgZm9yIGFjdGlvbiByZWNpcGUgY3JlYXRpb24uIFRoZXJlIGlzIG5vIGFiaWxpdHkgdG8gdXBkYXRlIHRoZSAmI3g2MDtzcGVjaWZpY2F0aW9uSWQmI3g2MDsgIGZpZWxkIHNvIGl0IHNob3VsZCBiZSB0aGUgc2FtZSBhcyBpbiB0aGUgb3JpZ2luYWwgcmVjaXBlLiAgQ2FsbGVyIG11c3QgaGF2ZSB0aGUgZm9sbG93aW5nIHBlcm1pc3Npb25zOiAgICAtIFByaXZpbGVnZXM6ICYjeDYwO3ZpZXcmI3g2MDssICYjeDYwO2NyZWF0ZSYjeDYwOywgJiN4NjA7ZWRpdCYjeDYwOyAgLSBCdXNpbmVzcyBmdW5jdGlvbjogJiN4NjA7TWFuYWdlIEFjdGlvbiBSZWNpcGVzJiN4NjA7ICAgVGhlIHBlcm1pc3Npb24gY2hlY2sgY291bGQgYmUgc3dpdGNoZWQgb2ZmIGJ5IHNldHRpbmcgdGhlIHBhcmFtZXRlciAmI3g2MDtiYWNrYmFzZS5hY2Nlc3MtY29udHJvbC5lbmFibGVkJiN4NjA7IHRvICYjeDYwO2ZhbHNlJiN4NjA7LiAgQWRkaXRpb25hbGx5LCBhcnJhbmdlbWVudCB2YWxpZGF0aW9uIHRha2VzIHBsYWNlIHdoZW4gdGhlIGFjdGlvbiByZWNpcGUgYmVsb25ncyB0byBhbiBhY3Rpb24gcmVjaXBlIHNwZWNpZmljYXRpb24gd2l0aCB0aGUgY2F0ZWdvcnkgJiN4NjA7YXJyYW5nZW1lbnRCYXNlZCYjeDYwOy4gICBBcnJhbmdlbWVudCB2YWxpZGF0aW9uIGltcGxpZXMgdmVyaWZpY2F0aW9uIHRoYXQgdGhlIGxvZ2dlZC1pbiB1c2VyIGhhcyB0aGUgJiN4NjA7dmlldyYjeDYwOyBwcml2aWxlZ2UgZm9yIHRoZSAmI3g2MDtQcm9kdWN0IFN1bW1hcnkmI3g2MDsgYnVzaW5lc3MgZnVuY3Rpb24gZm9yIHRoZSAmI3g2MDthcnJhbmdlbWVudCYjeDYwOyBzcGVjaWZpZWQgaW4gdGhlIGFjdGlvbiByZWNpcGUgb2JqZWN0LlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRCYXRjaFByb2Nlc3NpbmcocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEJhdGNoUHJvY2Vzc2luZ1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8QmF0Y2hQcm9jZXNzaW5nUHV0UmVzcG9uc2VCb2R5PjtcbiAgICAvKipcbiAgICAgKiBVcHNlcnRzIGFjdGlvbiByZWNpcGVzIGluIGJhdGNoLiBTaW5nbGUgZW5kcG9pbnQgZm9yIGFuIHVwZGF0ZS9pbnNlcnQgbXVsdGlwbGUgYWN0aW9uIHJlY2lwZXMuICBUaGUgYWN0aW9uIHJlY2lwZSB3aWxsIGJlIGNyZWF0ZWQgaWYgaXQgaGFzIG5vIElELiBXaGVuIHRoZSBhY3Rpb24gcmVjaXBlIGhhcyBhbiBJRCwgaXQgd2lsbCBiZSB1cGRhdGVkLiAgVGhlICYjeDYwO3NwZWNpZmljYXRpb25JZCYjeDYwOyBpcyB0YWtlbiBpbnRvIGFjY291bnQgb25seSBmb3IgYWN0aW9uIHJlY2lwZSBjcmVhdGlvbi4gVGhlcmUgaXMgbm8gYWJpbGl0eSB0byB1cGRhdGUgdGhlICYjeDYwO3NwZWNpZmljYXRpb25JZCYjeDYwOyAgZmllbGQgc28gaXQgc2hvdWxkIGJlIHRoZSBzYW1lIGFzIGluIHRoZSBvcmlnaW5hbCByZWNpcGUuICBDYWxsZXIgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgcGVybWlzc2lvbnM6ICAgIC0gUHJpdmlsZWdlczogJiN4NjA7dmlldyYjeDYwOywgJiN4NjA7Y3JlYXRlJiN4NjA7LCAmI3g2MDtlZGl0JiN4NjA7ICAtIEJ1c2luZXNzIGZ1bmN0aW9uOiAmI3g2MDtNYW5hZ2UgQWN0aW9uIFJlY2lwZXMmI3g2MDsgICBUaGUgcGVybWlzc2lvbiBjaGVjayBjb3VsZCBiZSBzd2l0Y2hlZCBvZmYgYnkgc2V0dGluZyB0aGUgcGFyYW1ldGVyICYjeDYwO2JhY2tiYXNlLmFjY2Vzcy1jb250cm9sLmVuYWJsZWQmI3g2MDsgdG8gJiN4NjA7ZmFsc2UmI3g2MDsuICBBZGRpdGlvbmFsbHksIGFycmFuZ2VtZW50IHZhbGlkYXRpb24gdGFrZXMgcGxhY2Ugd2hlbiB0aGUgYWN0aW9uIHJlY2lwZSBiZWxvbmdzIHRvIGFuIGFjdGlvbiByZWNpcGUgc3BlY2lmaWNhdGlvbiB3aXRoIHRoZSBjYXRlZ29yeSAmI3g2MDthcnJhbmdlbWVudEJhc2VkJiN4NjA7LiAgIEFycmFuZ2VtZW50IHZhbGlkYXRpb24gaW1wbGllcyB2ZXJpZmljYXRpb24gdGhhdCB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIHRoZSAmI3g2MDt2aWV3JiN4NjA7IHByaXZpbGVnZSBmb3IgdGhlICYjeDYwO1Byb2R1Y3QgU3VtbWFyeSYjeDYwOyBidXNpbmVzcyBmdW5jdGlvbiBmb3IgdGhlICYjeDYwO2FycmFuZ2VtZW50JiN4NjA7IHNwZWNpZmllZCBpbiB0aGUgYWN0aW9uIHJlY2lwZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dEJhdGNoUHJvY2Vzc2luZyhyZXF1ZXN0UGFyYW1ldGVyczogUHV0QmF0Y2hQcm9jZXNzaW5nUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEJhdGNoUHJvY2Vzc2luZ1B1dFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFVwc2VydHMgYWN0aW9uIHJlY2lwZXMgaW4gYmF0Y2guIFNpbmdsZSBlbmRwb2ludCBmb3IgYW4gdXBkYXRlL2luc2VydCBtdWx0aXBsZSBhY3Rpb24gcmVjaXBlcy4gIFRoZSBhY3Rpb24gcmVjaXBlIHdpbGwgYmUgY3JlYXRlZCBpZiBpdCBoYXMgbm8gSUQuIFdoZW4gdGhlIGFjdGlvbiByZWNpcGUgaGFzIGFuIElELCBpdCB3aWxsIGJlIHVwZGF0ZWQuICBUaGUgJiN4NjA7c3BlY2lmaWNhdGlvbklkJiN4NjA7IGlzIHRha2VuIGludG8gYWNjb3VudCBvbmx5IGZvciBhY3Rpb24gcmVjaXBlIGNyZWF0aW9uLiBUaGVyZSBpcyBubyBhYmlsaXR5IHRvIHVwZGF0ZSB0aGUgJiN4NjA7c3BlY2lmaWNhdGlvbklkJiN4NjA7ICBmaWVsZCBzbyBpdCBzaG91bGQgYmUgdGhlIHNhbWUgYXMgaW4gdGhlIG9yaWdpbmFsIHJlY2lwZS4gIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtjcmVhdGUmI3g2MDssICYjeDYwO2VkaXQmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgIFRoZSBwZXJtaXNzaW9uIGNoZWNrIGNvdWxkIGJlIHN3aXRjaGVkIG9mZiBieSBzZXR0aW5nIHRoZSBwYXJhbWV0ZXIgJiN4NjA7YmFja2Jhc2UuYWNjZXNzLWNvbnRyb2wuZW5hYmxlZCYjeDYwOyB0byAmI3g2MDtmYWxzZSYjeDYwOy4gIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSB3aGVuIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsuICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QmF0Y2hQcm9jZXNzaW5nKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRCYXRjaFByb2Nlc3NpbmdSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEJhdGNoUHJvY2Vzc2luZ1B1dFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFVwc2VydHMgYWN0aW9uIHJlY2lwZXMgaW4gYmF0Y2guIFNpbmdsZSBlbmRwb2ludCBmb3IgYW4gdXBkYXRlL2luc2VydCBtdWx0aXBsZSBhY3Rpb24gcmVjaXBlcy4gIFRoZSBhY3Rpb24gcmVjaXBlIHdpbGwgYmUgY3JlYXRlZCBpZiBpdCBoYXMgbm8gSUQuIFdoZW4gdGhlIGFjdGlvbiByZWNpcGUgaGFzIGFuIElELCBpdCB3aWxsIGJlIHVwZGF0ZWQuICBUaGUgJiN4NjA7c3BlY2lmaWNhdGlvbklkJiN4NjA7IGlzIHRha2VuIGludG8gYWNjb3VudCBvbmx5IGZvciBhY3Rpb24gcmVjaXBlIGNyZWF0aW9uLiBUaGVyZSBpcyBubyBhYmlsaXR5IHRvIHVwZGF0ZSB0aGUgJiN4NjA7c3BlY2lmaWNhdGlvbklkJiN4NjA7ICBmaWVsZCBzbyBpdCBzaG91bGQgYmUgdGhlIHNhbWUgYXMgaW4gdGhlIG9yaWdpbmFsIHJlY2lwZS4gIENhbGxlciBtdXN0IGhhdmUgdGhlIGZvbGxvd2luZyBwZXJtaXNzaW9uczogICAgLSBQcml2aWxlZ2VzOiAmI3g2MDt2aWV3JiN4NjA7LCAmI3g2MDtjcmVhdGUmI3g2MDssICYjeDYwO2VkaXQmI3g2MDsgIC0gQnVzaW5lc3MgZnVuY3Rpb246ICYjeDYwO01hbmFnZSBBY3Rpb24gUmVjaXBlcyYjeDYwOyAgIFRoZSBwZXJtaXNzaW9uIGNoZWNrIGNvdWxkIGJlIHN3aXRjaGVkIG9mZiBieSBzZXR0aW5nIHRoZSBwYXJhbWV0ZXIgJiN4NjA7YmFja2Jhc2UuYWNjZXNzLWNvbnRyb2wuZW5hYmxlZCYjeDYwOyB0byAmI3g2MDtmYWxzZSYjeDYwOy4gIEFkZGl0aW9uYWxseSwgYXJyYW5nZW1lbnQgdmFsaWRhdGlvbiB0YWtlcyBwbGFjZSB3aGVuIHRoZSBhY3Rpb24gcmVjaXBlIGJlbG9uZ3MgdG8gYW4gYWN0aW9uIHJlY2lwZSBzcGVjaWZpY2F0aW9uIHdpdGggdGhlIGNhdGVnb3J5ICYjeDYwO2FycmFuZ2VtZW50QmFzZWQmI3g2MDsuICAgQXJyYW5nZW1lbnQgdmFsaWRhdGlvbiBpbXBsaWVzIHZlcmlmaWNhdGlvbiB0aGF0IHRoZSBsb2dnZWQtaW4gdXNlciBoYXMgdGhlICYjeDYwO3ZpZXcmI3g2MDsgcHJpdmlsZWdlIGZvciB0aGUgJiN4NjA7UHJvZHVjdCBTdW1tYXJ5JiN4NjA7IGJ1c2luZXNzIGZ1bmN0aW9uIGZvciB0aGUgJiN4NjA7YXJyYW5nZW1lbnQmI3g2MDsgc3BlY2lmaWVkIGluIHRoZSBhY3Rpb24gcmVjaXBlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QmF0Y2hQcm9jZXNzaW5nKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRCYXRjaFByb2Nlc3NpbmdSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfYmF0Y2hQcm9jZXNzaW5nUHV0UmVxdWVzdEJvZHkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoUHJvY2Vzc2luZ1B1dFJlcXVlc3RCb2R5XCJdO1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8QmF0Y2hQcm9jZXNzaW5nUHV0UmVzcG9uc2VCb2R5PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWN0aW9uLXJlY2lwZXMvYmF0Y2hgLFxuICAgICAgICAgICAgX2JhdGNoUHJvY2Vzc2luZ1B1dFJlcXVlc3RCb2R5LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHV0QmF0Y2hQcm9jZXNzaW5nVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRCYXRjaFByb2Nlc3NpbmdSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoUHJvY2Vzc2luZ1B1dFJlcXVlc3RCb2R5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaFByb2Nlc3NpbmdQdXRSZXF1ZXN0Qm9keVwiXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY3Rpb24tcmVjaXBlcy9iYXRjaGA7XG4gICAgfVxuXG59XG4iXX0=