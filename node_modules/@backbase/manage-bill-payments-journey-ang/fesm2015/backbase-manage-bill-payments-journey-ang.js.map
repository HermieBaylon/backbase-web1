{"version":3,"file":"backbase-manage-bill-payments-journey-ang.js","sources":["../../../../libs/manage-bill-payments-journey/src/services/manage-bill-payments-journey-config.service.ts","../../../../libs/manage-bill-payments-journey/src/communication.service.ts","../../../../libs/manage-bill-payments-journey/src/services/manage-bill-payments-navigation.service.ts","../../../../libs/manage-bill-payments-journey/src/model/payment-status.model.ts","../../../../libs/manage-bill-payments-journey/src/services/manage-bill-payments-data.service.ts","../../../../libs/manage-bill-payments-journey/src/components/billpay-payment-status-badge/billpay-payment-status-badge.component.ts","../../../../libs/manage-bill-payments-journey/src/components/billpay-payment-status-badge/billpay-payment-status-badge.component.html","../../../../libs/manage-bill-payments-journey/src/components/billpay-payment-card/billpay-payment-card.component.ts","../../../../libs/manage-bill-payments-journey/src/components/billpay-payment-card/billpay-payment-card.component.html","../../../../libs/manage-bill-payments-journey/src/components/billpay-payments-group/billpay-payments-group.component.ts","../../../../libs/manage-bill-payments-journey/src/components/billpay-payments-group/billpay-payments-group.component.html","../../../../libs/manage-bill-payments-journey/src/views/billpay-payments-list-view/billpay-payments-list-view.component.ts","../../../../libs/manage-bill-payments-journey/src/views/billpay-payments-list-view/billpay-payments-list-view.component.html","../../../../libs/manage-bill-payments-journey/src/components/billpay-payment-details/billpay-payment-details.component.ts","../../../../libs/manage-bill-payments-journey/src/components/billpay-payment-details/billpay-payment-details.component.html","../../../../libs/manage-bill-payments-journey/src/components/billpay-payments-delete-modal/billpay-payments-delete-modal.component.ts","../../../../libs/manage-bill-payments-journey/src/components/billpay-payments-delete-modal/billpay-payments-delete-modal.component.html","../../../../libs/manage-bill-payments-journey/src/views/billpay-payment-details-view/billpay-payment-details-view.component.ts","../../../../libs/manage-bill-payments-journey/src/views/billpay-payment-details-view/billpay-payment-details-view.component.html","../../../../libs/manage-bill-payments-journey/src/views/billpay-enrolment-view/billpay-enrolment-view.component.ts","../../../../libs/manage-bill-payments-journey/src/manage-bill-payments-journey.component.ts","../../../../libs/manage-bill-payments-journey/src/manage-bill-payments-journey.module.ts","../../../../libs/manage-bill-payments-journey/backbase-manage-bill-payments-journey-ang.ts"],"sourcesContent":["import { Injectable, Optional, Inject, InjectionToken } from '@angular/core';\nimport '@angular/localize/init';\n\nexport const ManageBillPaymentsJourneyConfigurationToken = new InjectionToken<ManageBillPaymentsJourneyConfiguration>(\n  'ManageBillPaymentsJourneyJourneyConfiguration injection token',\n);\n\nexport interface ManageBillPaymentsJourneyConfiguration {\n  notificationDismissTime: number;\n  pageSize: number;\n  pageFilter: PaymentsFilterStatus;\n  accountNumberMasked: boolean;\n  pageTitle: string;\n}\n\nexport enum PaymentsFilterStatus {\n  PENDING = 'PENDING',\n  HISTORICAL = 'HISTORICAL',\n  ALL = 'ALL',\n}\n\nconst configDefaults: ManageBillPaymentsJourneyConfiguration = {\n  notificationDismissTime: 5000,\n  pageSize: 0,\n  pageFilter: PaymentsFilterStatus.PENDING,\n  accountNumberMasked: false,\n  pageTitle: $localize`:@@manage-bill-payments.page-title:Pending payments`,\n};\n\n@Injectable()\nexport class ManageBillPaymentsJourneyConfigService {\n  private _config: ManageBillPaymentsJourneyConfiguration;\n\n  constructor(\n    @Optional() @Inject(ManageBillPaymentsJourneyConfigurationToken) config: ManageBillPaymentsJourneyConfiguration,\n  ) {\n    config = config || {};\n    this._config = { ...configDefaults, ...config };\n  }\n\n  get defaults(): ManageBillPaymentsJourneyConfiguration {\n    return configDefaults;\n  }\n\n  get notificationDismissTime(): number {\n    return this._config.notificationDismissTime;\n  }\n\n  get pageSize(): number {\n    return this._config.pageSize;\n  }\n\n  get pageFilter(): PaymentsFilterStatus {\n    return this._config.pageFilter;\n  }\n\n  get accountNumberMasked(): boolean {\n    return this._config.accountNumberMasked;\n  }\n\n  get pageTitle(): string {\n    return this._config.pageTitle;\n  }\n}\n","export abstract class CommunicationService {\n  abstract navigateToEditOneOffPayment(_: string): void;\n  abstract navigateToEditRecurringPayment(_: string): void;\n  abstract navigateToPaymentsHistory(): void;\n  abstract navigateToPaymentsList(): void;\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ONE_OFF_PAYMENT, RECURRING_PAYMENT } from '@backbase/billpay-journeys-common';\nimport { PaymentsFilterStatus } from './manage-bill-payments-journey-config.service';\nimport { CommunicationService } from '../communication.service';\n\n@Injectable()\nexport class ManageBillPaymentsNavigationService {\n  constructor(\n    private readonly router: Router,\n    private readonly route: ActivatedRoute,\n    @Optional() private readonly communicationService: CommunicationService,\n  ) {}\n\n  navigateToPayment(id: string, isRecurring: boolean = false) {\n    const paymentType = isRecurring ? RECURRING_PAYMENT : ONE_OFF_PAYMENT;\n    this.router.navigate([id], { queryParams: { type: paymentType }, relativeTo: this.route });\n  }\n\n  navigateToPaymentsList(filter: string) {\n    if (this.communicationService) {\n      filter === PaymentsFilterStatus.HISTORICAL\n        ? this.communicationService.navigateToPaymentsHistory()\n        : this.communicationService.navigateToPaymentsList();\n    } else {\n      this.router.navigate(['./']);\n    }\n  }\n\n  navigateToEditRecurringPayment(id: string) {\n    this.communicationService?.navigateToEditRecurringPayment(id);\n  }\n  navigateToEditOneOffPayment(id: string) {\n    this.communicationService?.navigateToEditOneOffPayment(id);\n  }\n}\n","export enum PaymentStatus {\n  PENDING = 'PENDING',\n  INPROCESS = 'INPROCESS',\n  PROCESSED = 'PROCESSED',\n  FAILED = 'FAILED',\n  CANCELED = 'CANCELED',\n  UNAPPROVED = 'UNAPPROVED',\n}\n\nexport enum PaymentsFilterStatus {\n  PENDING = 'PENDING',\n  HISTORICAL = 'HISTORICAL',\n  ALL = 'ALL',\n}\n","import { Injectable } from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport {\n  BillPayPaymentsService,\n  BillPayPayeesService,\n  PayeeByIdGetResponseBody,\n  BillPayPaymentsGetResponseBody,\n  PaymentByIdGetResponseBody,\n  RecurringPaymentByIdGetResponseBody,\n} from '@backbase/data-ang/billpay';\nimport { PaymentsFilterStatus } from '../model';\nimport { PaymentType, ONE_OFF_PAYMENT, Direction } from '@backbase/billpay-journeys-common';\n\n@Injectable()\nexport class ManageBillPaymentsDataService {\n  /** @internal */\n  constructor(\n    private readonly paymentsData: BillPayPaymentsService,\n    private readonly payeesData: BillPayPayeesService,\n  ) {}\n\n  getPayments(pageSize: number, paymentFilter: PaymentsFilterStatus): Observable<BillPayPaymentsGetResponseBody> {\n    const getDirection = (status: PaymentsFilterStatus): Direction =>\n      status === PaymentsFilterStatus.PENDING ? Direction.ASC : Direction.DESC;\n\n    return this.paymentsData.getBillPayPayments({\n      status: paymentFilter,\n      direction: getDirection(paymentFilter),\n      ...(pageSize && { size: pageSize }),\n    });\n  }\n\n  getPayment(\n    id: string,\n    paymentType: PaymentType = ONE_OFF_PAYMENT,\n  ): Observable<PaymentByIdGetResponseBody | RecurringPaymentByIdGetResponseBody> {\n    return paymentType === ONE_OFF_PAYMENT\n      ? this.paymentsData.getPaymentById({ id })\n      : this.paymentsData.getRecurringPaymentById({ id });\n  }\n\n  getPayee(id: string): Observable<PayeeByIdGetResponseBody> {\n    return this.payeesData.getPayeeById({ id });\n  }\n\n  deletePayment(id: string, paymentType: PaymentType = ONE_OFF_PAYMENT): Observable<HttpResponse<any>> {\n    return paymentType === ONE_OFF_PAYMENT\n      ? this.paymentsData.deletePaymentById({ id })\n      : this.paymentsData.deleteRecurringPaymentById({ id });\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { PaymentStatus } from '../../model';\n\n@Component({\n  selector: 'bb-billpay-payment-status-badge',\n  templateUrl: './billpay-payment-status-badge.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BillpayPaymentStatusBadgeComponent {\n  /**\n   * Current status of the payment\n   */\n  @Input() status?: PaymentStatus;\n  readonly paymentStatus = PaymentStatus;\n}\n","<ng-container [ngSwitch]=\"status\">\n  <bb-badge-ui\n    *ngSwitchCase=\"paymentStatus.INPROCESS\"\n    text=\"In progress\"\n    i18n-text=\"In process badge@@billpay-payment-badge.inprocess\"\n  ></bb-badge-ui>\n  <bb-badge-ui\n    *ngSwitchCase=\"paymentStatus.PENDING\"\n    color=\"warning\"\n    text=\"Pending\"\n    i18n-text=\"Pending badge@@billpay-payment-badge.pending\"\n  ></bb-badge-ui>\n  <bb-badge-ui\n    *ngSwitchCase=\"paymentStatus.FAILED\"\n    color=\"danger\"\n    text=\"Failed\"\n    i18n-text=\"Failed badge@@billpay-payment-badge.failed\"\n  ></bb-badge-ui>\n  <bb-badge-ui\n    *ngSwitchCase=\"paymentStatus.CANCELED\"\n    color=\"danger\"\n    text=\"Canceled\"\n    i18n-text=\"Canceled badge@@billpay-payment-badge.canceled\"\n  ></bb-badge-ui>\n  <bb-badge-ui\n    *ngSwitchCase=\"paymentStatus.UNAPPROVED\"\n    color=\"danger\"\n    text=\"Unapproved\"\n    i18n-text=\"Unapproved badge@@billpay-payment-badge.unapproved\"\n  ></bb-badge-ui>\n  <bb-badge-ui\n    *ngSwitchCase=\"paymentStatus.PROCESSED\"\n    color=\"success\"\n    text=\"Processed\"\n    i18n-text=\"Processed badge@@billpay-payment-badge.processed\"\n  ></bb-badge-ui>\n</ng-container>\n","import { Component, Input } from '@angular/core';\nimport { Payment } from '@backbase/data-ang/billpay';\n\n@Component({\n  selector: 'bb-billpay-payment-card',\n  templateUrl: './billpay-payment-card.component.html',\n})\nexport class BillpayPaymentCardComponent {\n  /**\n   * Details of the payment.\n   */\n  @Input() payment?: Payment;\n  /**\n   * Defines whether this is a negative number to be prepended with a `-` character. Defaults to false.\n   */\n  @Input() isNegativeAmount = false;\n\n  getFormattedAmount(amount: string) {\n    return `${this.isNegativeAmount ? '-' : ''}${amount}`;\n  }\n}\n","<div class=\"bb-stack\">\n  <div class=\"bb-stack__item bb-stack__item--fill\" *ngIf=\"payment\" data-role=\"payment-item\">\n    <div class=\"bb-stack bb-stack--wrap\">\n      <div class=\"bb-stack__item bb-stack__item--fill\">\n        <div data-role=\"payment-item-title\" class=\"bb-text-bold\">\n          {{ payment.payeeNickName || payment.payeeName }}\n        </div>\n        <div class=\"bb-stack bb-stack--align-top\" *ngIf=\"payment.recurring\">\n          <div class=\"bb-stack__item bb-stack__item--spacing-sm\">\n            <bb-icon-ui\n              data-role=\"payment-item-recurring-icon\"\n              size=\"sm\"\n              name=\"repeat\"\n              color=\"secondary\"\n            ></bb-icon-ui>\n          </div>\n          <div\n            class=\"bb-stack__item bb-subtitle bb-text-support\"\n            data-role=\"payment-item-recurring-label\"\n            i18n=\"Recurring payments frequency@@billpay-payment-card.recurring.frequency\"\n          >\n            Recurring { payment.frequency, select, WEEKLY {weekly} EVERY_2_WEEKS {every 2 weeks} EVERY_4_WEEKS {every\n            4 weeks} TWICE_A_MONTH {twice a month} MONTHLY {monthly} EVERY_2_MONTHS {every 2 months} EVERY_3_MONTHS\n            {every 3 months} EVERY_4_MONTHS {every 4 months} EVERY_6_MONTHS {every 6 months} ANNUALLY {annually} }\n          </div>\n        </div>\n      </div>\n      <div class=\"bb-stack__break bb-stack__break--sm-down\"></div>\n      <bb-billpay-payment-status-badge\n        class=\"bb-stack__item bb-text-align-right bb-text-align-left--sm-down\"\n        [status]=\"payment.status\"\n        data-role=\"payment-item-badge\"\n      ></bb-billpay-payment-status-badge>\n    </div>\n  </div>\n\n  <div class=\"col-4 col-md-3 col-lg-2 bb-stack__item bb-text-align-right\" data-role=\"payment-item-amount\">\n    <bb-amount-ui\n      class=\"bb-text-bold\"\n      data-role=\"amount\"\n      [amount]=\"payment && getFormattedAmount(payment.amount.amount)\"\n    >\n    </bb-amount-ui>\n  </div>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { ManageBillPaymentsNavigationService } from '../../services/manage-bill-payments-navigation.service';\nimport { PaymentsGroup } from '../../model';\n\nexport enum DateLabel {\n  yesterday = 'yesterday',\n  today = 'today',\n  tomorrow = 'tomorrow',\n}\n\n@Component({\n  selector: 'bb-billpay-payments-group',\n  templateUrl: './billpay-payments-group.component.html',\n})\nexport class BillpayPaymentsGroupComponent {\n  /**\n   * Details of the payments within the group.\n   */\n  @Input() paymentsGroup?: PaymentsGroup;\n\n  /** @internal */\n  constructor(private readonly router: ManageBillPaymentsNavigationService) {}\n\n  getDateLabel(date: string): DateLabel | undefined {\n    const day = 1000 * 60 * 60 * 24;\n    const today = new Date().setHours(0, 0, 0, 0);\n    const targetDay = new Date(date).setHours(0, 0, 0, 0);\n    const daysDiff = Math.round((targetDay - today) / day);\n    switch (daysDiff) {\n      case -1:\n        return DateLabel.yesterday;\n      case 0:\n        return DateLabel.today;\n      case 1:\n        return DateLabel.tomorrow;\n      default:\n        return;\n    }\n  }\n\n  navigateToPayment(id: string, isRecurring: boolean) {\n    this.router.navigateToPayment(id, isRecurring);\n  }\n}\n","<section>\n  <div role=\"heading\" aria-level=\"2\" attr.id=\"payments-group-heading-{{paymentsGroup?.payments[0]?.id}}\" data-role=\"date-label\" class=\"bb-text-support bb-subheader bb-block bb-block--lg\">\n    <ng-container\n      *ngIf=\"getDateLabel(paymentsGroup?.date) as date; else formattedDate\"\n      i18n=\"Date label for payments group@@billpay-payments.payments-group.date-label\"\n    >\n      { date, select, yesterday {Yesterday} today {Today} tomorrow {Tomorrow} }\n    </ng-container>\n    <ng-template #formattedDate>{{ paymentsGroup?.date | bbDate: 'MMMM d' }}</ng-template>\n  </div>\n  <ul class=\"bb-list\" attr.aria-labelledby=\"payments-group-heading-{{paymentsGroup?.payments[0]?.id}}\">\n    <li\n      class=\"bb-list__item bb-list__item--no-separator\"\n      *ngFor=\"let payment of paymentsGroup?.payments\"\n    >\n      <bb-billpay-payment-card\n        tabindex=\"0\"\n        role=\"button\"\n        [payment]=\"payment\"\n        isNegativeAmount=\"true\"\n        (click)=\"navigateToPayment(payment.id, payment.recurring)\"\n        (keydown.enter)=\"navigateToPayment(payment.id, payment.recurring)\"\n      ></bb-billpay-payment-card>\n    </li>\n  </ul>\n</section>","import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\n\nimport { ManageBillPaymentsDataService } from '../../services/manage-bill-payments-data.service';\nimport { ManageBillPaymentsJourneyConfigService } from '../../services/manage-bill-payments-journey-config.service';\nimport { Payment } from '@backbase/data-ang/billpay';\nimport { PaymentsGroup } from '../../model';\n\n@Component({\n  selector: 'bb-billpay-list-view',\n  templateUrl: './billpay-payments-list-view.component.html',\n})\nexport class BillPayPaymentsListViewComponent implements OnInit {\n  payments$!: Observable<Payment[]>;\n  hasLoadingError = false;\n  /**\n   * Array of payments details. Groups by date.\n   */\n  paymentsByDate: PaymentsGroup[] = [];\n\n  /** @internal */\n  constructor(\n    private readonly dataService: ManageBillPaymentsDataService,\n    readonly config: ManageBillPaymentsJourneyConfigService,\n  ) {}\n\n  ngOnInit(): void {\n    this.payments$ = this.dataService.getPayments(this.config.pageSize, this.config.pageFilter).pipe(\n      map(({ payments }) => payments),\n      tap(paymentsData => {\n        this.paymentsByDate = this.groupPaymentsByDate(paymentsData);\n      }),\n      catchError(() => {\n        this.hasLoadingError = true;\n        return of([]);\n      }),\n    );\n  }\n\n  private groupPaymentsByDate(payments: Payment[]): PaymentsGroup[] {\n    const reducer = (groups: PaymentsGroup[], payment: Payment): PaymentsGroup[] => {\n      const lastGroup = groups[groups.length - 1];\n      const { paymentDate } = payment;\n      if (lastGroup && this.isSameDay(lastGroup.date, paymentDate)) {\n        lastGroup.payments.push(payment);\n      } else {\n        groups.push({\n          date: paymentDate,\n          payments: [payment],\n        });\n      }\n      return groups;\n    };\n\n    return payments.reduce(reducer, []);\n  }\n\n  private isSameDay(date1: string, date2: string): boolean {\n    const day1 = new Date(date1).setHours(0, 0, 0, 0);\n    const day2 = new Date(date2).setHours(0, 0, 0, 0);\n    return day1 === day2;\n  }\n}\n","<div class=\"bb-block bb-block--lg\">\n    <bb-header-ui\n    headingType=\"h1\"\n    [heading]=\"config.pageTitle\"\n    i18n-heading=\"@@billpay-payments-journey.payments-list-view\"\n    ></bb-header-ui>\n</div>\n\n<ng-container *ngIf=\"(payments$ | async) as payments; else loadingState\">\n  <ng-container *ngIf=\"!hasLoadingError; else errorState\">\n    <ng-container *ngIf=\"payments.length; else emptyState\">\n      <section>\n        <ul class=\"card card-lg bb-list\">\n          <li class=\"card-section\" *ngFor=\"let paymentsGroup of paymentsByDate\">\n            <bb-billpay-payments-group [paymentsGroup]=\"paymentsGroup\"></bb-billpay-payments-group>\n          </li>\n        </ul>\n      </section>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #loadingState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #errorState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <div class=\"bb-state-container\">\n        <bb-empty-state-ui\n          data-role=\"error-state\"\n          iconSize=\"xxl\"\n          iconModifier=\"error-outline\"\n          title=\"Payments list is not loading\"\n          i18n-title=\"Payments list is not loading title@@billpay-payments.error-state.title\"\n          subtitle=\"Try to reload the page or contact support\"\n          i18n-subtitle=\"Payments list is not loading subtitle@@billpay-payments.error-state.subtitle\"\n        >\n        </bb-empty-state-ui>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #emptyState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <div class=\"bb-state-container\">\n        <bb-empty-state-ui\n          data-role=\"empty-state\"\n          iconSize=\"xxl\"\n          iconModifier=\"payments\"\n          title=\"No bill payments\"\n          i18n-title=\"No payments state title@@billpay-payments.empty-state.title\"\n          subtitle=\"You don't have any bill payments to display\"\n          i18n-subtitle=\"No payments state subtitle@@billpay-payments.empty-state.subtitle\"\n        >\n        </bb-empty-state-ui>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Payment, Payee } from '@backbase/data-ang/billpay';\nimport { BillpayPaymentParserService, PaymentReview } from '@backbase/billpay-journeys-common';\nimport { PaymentStatus, PaymentEditEvent } from '../../model';\n\n@Component({\n  selector: 'bb-billpay-payment-details',\n  templateUrl: './billpay-payment-details.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BillpayPaymentDetailsComponent {\n  /**\n   * Details of the payment.\n   */\n  @Input() payment?: Payment;\n  /**\n   * Details of the payee that is the subject of the payment.\n   */\n  @Input() payee?: Payee;\n  /**\n   * Whether the account number should be masked. Defaults to true.\n   */\n  @Input() accountNumberMasked = true;\n  @Output() paymentCancelling = new EventEmitter<void>();\n  @Output() paymentEditing = new EventEmitter<PaymentEditEvent>();\n  readonly paymentStatus = PaymentStatus;\n\n  /** @internal */\n  constructor(private readonly paymentParserService: BillpayPaymentParserService) {}\n\n  parseToReview(payment: Payment, payee: Payee): PaymentReview {\n    return this.paymentParserService.paymentAndPayeeResponsesToReview(payment, payee);\n  }\n\n  cancelPayment() {\n    this.paymentCancelling.emit();\n  }\n\n  editPayment(payment: Payment) {\n    this.paymentEditing.next({\n      id: payment.id,\n      recurring: payment.recurring,\n    });\n  }\n}\n","<div class=\"card card-lg\">\n  <div class=\"card-section\">\n    <div class=\"bb-block bb-block--md\">\n      <bb-header-ui\n        data-role=\"payee-name\"\n        headingType=\"h2\"\n        heading=\"{{\n          (payment?.payeeNickName && payment?.payeeNickName + ' (' + payment?.payeeName + ')') || payment?.payeeName\n        }}\"\n      >\n      </bb-header-ui>\n    </div>\n    <div class=\"bb-block bb-block--xl\">\n      <div class=\"bb-stack\">\n        <bb-amount-ui\n          class=\"bb-stack__item bb-text-bold\"\n          data-role=\"payment-amount\"\n          [amount]=\"-payment?.amount?.amount\"\n        >\n        </bb-amount-ui>\n        <div class=\"bb-stack__item\">\n          <bb-billpay-payment-status-badge\n            [status]=\"payment?.status\"\n            data-role=\"payment-status\"\n          ></bb-billpay-payment-status-badge>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"bb-block {{\n        payment?.recurring || payment?.paymentAccount?.accountNickName ? 'bb-block--sm' : 'bb-block--lg'\n      }}\"\n    >\n      <div class=\"bb-stack\">\n        <bb-icon-ui\n          class=\"bb-stack__item bb-stack__item--spacing-sm\"\n          name=\"calendar-today\"\n          color=\"muted\"\n        ></bb-icon-ui>\n        <span class=\"bb-stack__item\" data-role=\"payment-date\">{{ payment?.paymentDate | bbDate: 'fullDate' }}</span>\n      </div>\n    </div>\n    <div\n      class=\"bb-block {{ payment?.recurring ? 'bb-block--sm' : 'bb-block--lg' }}\"\n      *ngIf=\"payment?.paymentAccount?.accountNickName\"\n    >\n      <div class=\"bb-stack\">\n        <bb-icon-ui\n          class=\"bb-stack__item bb-stack__item--spacing-sm\"\n          name=\"savings-accounts\"\n          color=\"muted\"\n        ></bb-icon-ui>\n        <span class=\"bb-stack__item\" data-role=\"payment-account-nickname\">{{\n          payment?.paymentAccount?.accountNickName\n        }}</span>\n      </div>\n    </div>\n\n    <div\n      class=\"{{\n        payment?.status === paymentStatus.INPROCESS || payment?.status === paymentStatus.PENDING\n          ? 'bb-block bb-block--lg'\n          : ''\n      }}\"\n      *ngIf=\"payment && payment?.recurring && payment?.frequency\"\n    >\n      <div class=\"bb-stack\" *ngIf=\"payment?.frequency\">\n        <bb-icon-ui class=\"bb-stack__item bb-stack__item--spacing-sm\" name=\"repeat\" color=\"muted\"></bb-icon-ui>\n        <span\n          class=\"bb-stack__item\"\n          data-role=\"payment-recurring-label\"\n          i18n=\"recurring monthly label@@billpay-payment-details.recurring-frequency\"\n          >Recurring { payment?.frequency, select, WEEKLY {weekly} EVERY_2_WEEKS {every 2 weeks} EVERY_4_WEEKS {every 4\n          weeks} TWICE_A_MONTH {twice a month} MONTHLY {monthly} EVERY_2_MONTHS {every 2 months} EVERY_3_MONTHS {every\n          3 months} EVERY_4_MONTHS {every 4 months} EVERY_6_MONTHS {every 6 months} ANNUALLY {annually} }\n        </span>\n      </div>\n    </div>\n    <div *ngIf=\"payment?.status === paymentStatus.INPROCESS\">\n      <bb-alert-ui\n        modifier=\"info\"\n        title=\"Payment in progress, it cannot be edited or canceled\"\n        i18n-title=\"alert title|Payment in process alert@@billpay-payment-details.in-progress-alert\"\n        data-role=\"alert-message\"\n      >\n      </bb-alert-ui>\n    </div>\n\n    <div *ngIf=\"payment && payment.status === paymentStatus.PENDING\" data-role=\"payment-buttons\" class=\"bb-stack\">\n      <button\n        bbButton\n        data-role=\"edit-payment-button\"\n        i18n=\"Label for button|Edit payment button@@billpay-payment-details.edit.button\"\n        color=\"secondary\"\n        (click)=\"editPayment(payment)\"\n        class=\"bb-stack__item\"\n      >\n        Edit payment\n      </button>\n      <button\n        bbButton\n        data-role=\"cancel-payment-button\"\n        i18n=\"Label for button|Cancel payment button@@billpay-payment-details.cancel.button\"\n        color=\"danger\"\n        (click)=\"cancelPayment()\"\n        class=\"bb-stack__item\"\n      >\n        Cancel payment\n      </button>\n    </div>\n  </div>\n\n  <div class=\"card-section\" *ngIf=\"payment && payee\">\n    <div class=\"bb-block bb-block--md\">\n      <bb-header-ui\n        headingType=\"h2\"\n        heading=\"Full details\"\n        i18n-heading=\"Full details caption@@billpay-payment-details.full-details\"\n      >\n      </bb-header-ui>\n    </div>\n    <bb-billpay-payment-review-card\n      [paymentReview]=\"parseToReview(payment, payee)\"\n      [accountNumberMask]=\"accountNumberMasked\"\n    >\n    </bb-billpay-payment-review-card>\n  </div>\n</div>\n","import { Component, EventEmitter, Output } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-payments-delete-modal',\n  templateUrl: './billpay-payments-delete-modal.component.html',\n})\nexport class BillpayPaymentsDeleteModalComponent {\n  @Output() resolve = new EventEmitter<boolean>();\n\n  resolveModal(resolvedWith: boolean) {\n    this.resolve.emit(resolvedWith);\n  }\n}\n","<bb-modal-ui [isOpen]=\"true\" (cancel)=\"resolveModal(false)\" data-role=\"delete-payment-modal\">\n  <bb-modal-header-ui>\n    <ng-template bbCustomModalHeader>\n      <bb-header-ui\n        data-role=\"delete-payment-modal-header\"\n        headingType=\"h2\"\n        heading=\"Cancel payment?\"\n        i18n-heading=\"Discard changes modal header@@billpay-payments.details.payments-delete-modal.header\"\n      >\n      </bb-header-ui>\n    </ng-template>\n  </bb-modal-header-ui>\n  <bb-modal-body-ui>\n    <ng-template bbCustomModalBody>\n      <span\n        i18n=\"Discard changes modal body@@billpay-payments.details.payments-delete-modal.body\"\n        data-role=\"delete-payment-modal-body\"\n        >Are you sure you want to cancel this payment? This action can not be undone.</span\n      >\n    </ng-template>\n  </bb-modal-body-ui>\n  <bb-modal-footer-ui>\n    <ng-template bbCustomModalFooter>\n      <div class=\"d-flex flex-wrap flex-row-reverse w-100\">\n        <button\n          bbButton\n          color=\"danger\"\n          class=\"col-sm-auto col-xs-12\"\n          i18n=\"Cancel payment confirmation button@@billpay-payments.details.payments-delete-modal.confirm-button\"\n          (click)=\"resolveModal(true)\"\n          data-role=\"confirm-cancelling-button\"\n        >\n          Cancel payment\n        </button>\n        <button\n          bbButton\n          color=\"secondary\"\n          class=\"mt-2 mt-sm-0 mr-sm-3 col-sm-auto col-xs-12\"\n          i18n=\"Keep current payment button@@billpay-payments.details.payments-delete-modal.cancel-button\"\n          (click)=\"resolveModal(false)\"\n          data-role=\"keep-payment-button\"\n        >\n          Keep payment\n        </button>\n      </div>\n    </ng-template>\n  </bb-modal-footer-ui>\n</bb-modal-ui>\n","import { Component, OnDestroy, TemplateRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { combineLatest, Observable, of, Subject, throwError } from 'rxjs';\nimport { catchError, map, shareReplay, switchMap, takeUntil, tap } from 'rxjs/operators';\n\nimport { NotificationService } from '@backbase/ui-ang/notification';\nimport { OneOffPayment, Payee, Payment } from '@backbase/data-ang/billpay';\nimport { ManageBillPaymentsNavigationService } from '../../services/manage-bill-payments-navigation.service';\nimport { ManageBillPaymentsJourneyConfigService } from '../../services/manage-bill-payments-journey-config.service';\nimport { ManageBillPaymentsDataService } from '../../services/manage-bill-payments-data.service';\nimport { ONE_OFF_PAYMENT, PaymentType } from '@backbase/billpay-journeys-common';\nimport { PaymentEditEvent } from '../../model';\n\n@Component({\n  selector: 'bb-billpay-payment-details-view',\n  templateUrl: './billpay-payment-details-view.component.html',\n})\nexport class BillPayPaymentDetailsViewComponent implements OnDestroy {\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n  payment$: Observable<Payment | OneOffPayment | undefined>;\n  payee$: Observable<Payee | undefined>;\n  hasLoadingError = false;\n  isDeleteModalOpened = false;\n  id$ = this.route.paramMap.pipe(map(params => params.get('id') || ''));\n  private readonly paymentType$ = this.route.queryParamMap.pipe(\n    map(params => params.get('type') || ONE_OFF_PAYMENT),\n  ) as Observable<PaymentType>;\n  private readonly destroy$ = new Subject<void>();\n\n  constructor(\n    readonly config: ManageBillPaymentsJourneyConfigService,\n    private readonly dataService: ManageBillPaymentsDataService,\n    private readonly route: ActivatedRoute,\n    private readonly routerService: ManageBillPaymentsNavigationService,\n    private readonly notificationService: NotificationService,\n  ) {\n    this.payment$ = combineLatest([this.id$, this.paymentType$]).pipe(\n      takeUntil(this.destroy$),\n      switchMap(([id, paymentType]) => this.dataService.getPayment(id, paymentType)),\n      map(({ payment }) => payment),\n      shareReplay(1),\n      catchError(() => {\n        this.hasLoadingError = true;\n        return of(undefined);\n      }),\n    );\n\n    this.payee$ = this.payment$.pipe(\n      switchMap(payment =>\n        payment && !payment.payeeElectronic && payment.payeeID\n          ? this.dataService.getPayee(payment.payeeID)\n          : throwError(\"Payee can't be retrieved\"),\n      ),\n      map(({ payee }) => payee),\n      catchError(() => {\n        return of({} as Payee);\n      }),\n    );\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  onPaymentDeleteFlowStarted() {\n    this.isDeleteModalOpened = true;\n  }\n\n  onEditPayment(payment: PaymentEditEvent) {\n    if (payment.recurring) {\n      this.routerService.navigateToEditRecurringPayment(payment.id);\n    } else {\n      this.routerService.navigateToEditOneOffPayment(payment.id);\n    }\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    const deletePayment$ = this.deletePayment().pipe(\n      tap(() => {\n        this.routerService.navigateToPaymentsList(this.config.pageFilter);\n        this.notificationService.showNotification({\n          header: this.notificationHeaderTemplate,\n          message: this.notificationMessageTemplate,\n          modifier: 'success',\n          ttl: this.dismissTimeout,\n        });\n      }),\n    );\n    (resolvedWith ? deletePayment$ : of()).subscribe({\n      complete: () => (this.isDeleteModalOpened = false),\n    });\n  }\n\n  private deletePayment() {\n    return combineLatest([this.id$, this.paymentType$]).pipe(\n      takeUntil(this.destroy$),\n      switchMap(([id, paymentType]) => this.dataService.deletePayment(id, paymentType)),\n    );\n  }\n\n  private get dismissTimeout(): number {\n    if (this.config.notificationDismissTime === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.config.notificationDismissTime;\n  }\n}\n","<div>\n  <div class=\"bb-block bb-block--lg\">\n    <bb-header-ui\n      headingType=\"h1\"\n      [heading]=\"config.pageTitle\"\n      i18n-heading=\"@@billpay-payments-journey.payment-details-view.title\"\n    ></bb-header-ui>\n  </div>\n  <ng-container *ngIf=\"!hasLoadingError; else errorState\">\n    <ng-container *ngIf=\"{ payment: payment$ | async, payee: payee$ | async } as data; else loadingState\">\n      <section>\n        <bb-billpay-payment-details\n          *ngIf=\"data.payment && data.payee\"\n          [payment]=\"data?.payment\"\n          [payee]=\"data?.payee\"\n          [accountNumberMasked]=\"config.accountNumberMasked\"\n          (paymentCancelling)=\"onPaymentDeleteFlowStarted()\"\n          (paymentEditing)=\"onEditPayment($event)\"\n        ></bb-billpay-payment-details>\n      </section>\n\n      <ng-template #notificationMessage>\n        <span\n          data-role=\"notification-message\"\n          i18n=\"Payee notification message|Payee has created successfully notification@@billpay-payments.details.notification.message\"\n          >Payment to\n          {{ (data.payment?.payeeNickName && data.payment?.payeeNickName + ' (' + data.payment?.payeeName + ')') || data.payment?.payeeName }} has\n          been canceled successfully</span\n        >\n      </ng-template>\n\n    </ng-container>\n  </ng-container>\n</div>\n\n<bb-billpay-payments-delete-modal\n*ngIf=\"isDeleteModalOpened\"\n(resolve)=\"onModalResolve($event)\"\n></bb-billpay-payments-delete-modal>\n\n\n<ng-template #notificationHeader>\n  <span\n    class=\"text-dark\"\n    i18n=\"Payee notification header|Payee created success notification header@@billpay-payments.details.notification.header\"\n  >Payment canceled</span\n></ng-template>\n\n<ng-template #errorState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <div class=\"bb-state-container\">\n        <bb-empty-state-ui\n          data-role=\"error-state\"\n          iconSize=\"xxl\"\n          iconModifier=\"error-outline\"\n          title=\"Payment is not loading\"\n          i18n-title=\"Payment list is not loading title@@billpay-payments.details.error-state.title\"\n          subtitle=\"Try to reload the page or contact support\"\n          i18n-subtitle=\"Payment is not loading subtitle@@billpay-payments.details.error-state.subtitle\"\n        >\n        </bb-empty-state-ui>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #loadingState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n    </div>\n  </div>\n</ng-template>\n","import { Component } from '@angular/core';\nimport { ManageBillPaymentsJourneyConfigService } from '../../services/manage-bill-payments-journey-config.service';\n@Component({\n  selector: 'bb-billpay-enrolment-view',\n  template: `\n    <div>\n      <div class=\"bb-block bb-block--lg\">\n        <bb-header-ui\n          headingType=\"h1\"\n          heading=\"Pending Payments\"\n          i18n-heading=\"@@billpay-payments-journey.payments-list-view\"\n        ></bb-header-ui>\n      </div>\n      <bb-billpay-enrolment [notificationDismissTime]=\"config?.notificationDismissTime\"></bb-billpay-enrolment>\n    </div>\n  `,\n})\nexport class BillPayEnrolmentViewComponent {\n  constructor(readonly config: ManageBillPaymentsJourneyConfigService) {}\n}\n","import { Component } from '@angular/core';\nimport { ManageBillPaymentsNavigationService } from './services/manage-bill-payments-navigation.service';\nimport { ManageBillPaymentsJourneyConfigService } from './services/manage-bill-payments-journey-config.service';\nimport { ManageBillPaymentsDataService } from './services/manage-bill-payments-data.service';\n\n@Component({\n  selector: 'bb-manage-bill-payments-journey',\n  template: `<router-outlet></router-outlet>`,\n  providers: [\n    ManageBillPaymentsJourneyConfigService,\n    ManageBillPaymentsDataService,\n    ManageBillPaymentsNavigationService,\n  ],\n})\nexport class ManageBillPaymentsJourneyComponent {}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { provideRoutes, Route, RouterModule } from '@angular/router';\n\nimport { BackbaseCoreModule } from '@backbase/foundation-ang/core';\nimport { BillpayEnrolmentGuard, BillpayJourneysCommonModule } from '@backbase/billpay-journeys-common';\n\nimport { ManageBillPaymentsNavigationService } from './services/manage-bill-payments-navigation.service';\nimport { ManageBillPaymentsDataService } from './services/manage-bill-payments-data.service';\n\nimport { BillPayPaymentsListViewComponent } from './views/billpay-payments-list-view/billpay-payments-list-view.component';\nimport { BillPayPaymentDetailsViewComponent } from './views/billpay-payment-details-view/billpay-payment-details-view.component';\nimport { BillPayEnrolmentViewComponent } from './views/billpay-enrolment-view/billpay-enrolment-view.component';\nimport { BillpayPaymentDetailsComponent } from './components/billpay-payment-details/billpay-payment-details.component';\nimport { BillpayPaymentStatusBadgeComponent } from './components/billpay-payment-status-badge/billpay-payment-status-badge.component';\nimport { BillpayPaymentsDeleteModalComponent } from './components/billpay-payments-delete-modal/billpay-payments-delete-modal.component';\nimport { ManageBillPaymentsJourneyComponent } from './manage-bill-payments-journey.component';\nimport { BillpayPaymentsGroupComponent } from './components/billpay-payments-group/billpay-payments-group.component';\nimport { BillpayPaymentCardComponent } from './components/billpay-payment-card/billpay-payment-card.component';\n\nimport { AlertModule } from '@backbase/ui-ang/alert';\nimport { BadgeModule } from '@backbase/ui-ang/badge';\nimport { BbDatePipeModule } from '@backbase/ui-ang/date-pipe';\nimport { IconModule } from '@backbase/ui-ang/icon';\n\nconst uiModules = [IconModule, AlertModule, BadgeModule, BbDatePipeModule];\nconst services = [ManageBillPaymentsNavigationService, ManageBillPaymentsDataService];\nconst components = [\n  ManageBillPaymentsJourneyComponent,\n  BillPayPaymentsListViewComponent,\n  BillPayPaymentDetailsViewComponent,\n  BillPayEnrolmentViewComponent,\n  BillpayPaymentDetailsComponent,\n  BillpayPaymentStatusBadgeComponent,\n  BillpayPaymentsDeleteModalComponent,\n  BillpayPaymentsGroupComponent,\n  BillpayPaymentCardComponent,\n];\n\nexport const defaultRoute: Route = {\n  path: '',\n  component: ManageBillPaymentsJourneyComponent,\n  children: [\n    { path: 'enrolment', component: BillPayEnrolmentViewComponent },\n    {\n      path: '',\n      canActivate: [BillpayEnrolmentGuard],\n      children: [\n        { path: '', component: BillPayPaymentsListViewComponent, pathMatch: 'full' },\n        { path: ':id', component: BillPayPaymentDetailsViewComponent },\n      ],\n    },\n  ],\n};\n\n@NgModule({\n  declarations: [...components],\n  imports: [\n    CommonModule,\n    RouterModule,\n    BillpayJourneysCommonModule,\n    BackbaseCoreModule.withConfig({\n      classMap: { ManageBillPaymentsJourneyComponent },\n    }),\n    ...uiModules,\n  ],\n  providers: [...services],\n})\nexport class ManageBillPaymentsJourneyModule {\n  static forRoot(\n    data: { route: Route; [key: string]: any } = { route: defaultRoute },\n  ): ModuleWithProviders<ManageBillPaymentsJourneyModule> {\n    return {\n      ngModule: ManageBillPaymentsJourneyModule,\n      providers: [provideRoutes([data.route])],\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["PaymentsFilterStatus"],"mappings":"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"}