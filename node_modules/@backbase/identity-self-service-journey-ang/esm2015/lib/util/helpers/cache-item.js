import { BehaviorSubject, of } from 'rxjs';
import { switchMap, tap } from 'rxjs/operators';
// eslint-disable-next-line @typescript-eslint/ban-types
export const cacheItem = (queryMethod) => {
    const subject$ = new BehaviorSubject(undefined);
    const update = () => queryMethod().pipe(tap((payload) => subject$.next(payload)));
    return {
        subject$,
        state$: subject$.pipe(switchMap((payload) => (payload !== undefined ? of(payload) : update()))),
        update,
    };
};
//# sourceMappingURL=cache-item.js.map