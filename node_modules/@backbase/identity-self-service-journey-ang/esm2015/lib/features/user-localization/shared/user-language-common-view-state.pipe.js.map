{"version":3,"file":"user-language-common-view-state.pipe.js","sourceRoot":"","sources":["../../../../../../../../libs/identity-self-service-journey-ang/src/lib/features/user-localization/shared/user-language-common-view-state.pipe.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,MAAM,CAAC;AAChC,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAEvE,OAAO,EAAE,wBAAwB,EAAE,MAAM,0DAA0D,CAAC;AAEpG,MAAM,CAAC,MAAM,+BAA+B,GAAG,CAAC,uBAAgD,EAAE,EAAE,CAClG,IAAI,CACF,SAAS,CAAC,GAAG,EAAE,CACb,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CACnC,GAAG,CAAC,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;IACpB,OAAO,EAAE,KAAK;IACd,cAAc,EAAE,wBAAwB,CACtC,uBAAuB,CAAC,MAAM,CAAC,mBAAmB,EAClD,WAAW,CAAC,iBAAiB,CAC9B;CACF,CAAC,CAAC,EACH,SAAS,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,EAC5B,UAAU,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CACrD,CACF,CACF,CAAC","sourcesContent":["import { of, pipe } from 'rxjs';\nimport { catchError, map, startWith, switchMap } from 'rxjs/operators';\nimport { UserLocalizationService } from '../user-localization.service';\nimport { findLanguageRegionOption } from '../../../util/mappings/find-language-region-from-options';\n\nexport const userLanguageCommonViewStatePipe = (userLocalizationService: UserLocalizationService) =>\n  pipe(\n    switchMap(() =>\n      userLocalizationService.getUser$.pipe(\n        map((userProfile) => ({\n          loading: false,\n          languageRegion: findLanguageRegionOption(\n            userLocalizationService.config.localizationOptions,\n            userProfile.preferredLanguage,\n          ),\n        })),\n        startWith({ loading: true }),\n        catchError((error) => of({ loading: false, error })),\n      ),\n    ),\n  );\n"]}