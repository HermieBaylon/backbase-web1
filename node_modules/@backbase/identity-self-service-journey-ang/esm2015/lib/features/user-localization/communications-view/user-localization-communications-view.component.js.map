{"version":3,"file":"user-localization-communications-view.component.js","sourceRoot":"","sources":["../../../../../../../../libs/identity-self-service-journey-ang/src/lib/features/user-localization/communications-view/user-localization-communications-view.component.ts","../../../../../../../../libs/identity-self-service-journey-ang/src/lib/features/user-localization/communications-view/user-localization-communications-view.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAC1C,OAAO,EAAE,cAAc,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzD,OAAO,EAAE,eAAe,EAAc,MAAM,MAAM,CAAC;AACnD,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AAEvC,OAAO,EAAE,uBAAuB,EAAE,MAAM,8BAA8B,CAAC;AAEvE,OAAO,EAAE,+BAA+B,EAAE,MAAM,gDAAgD,CAAC;;;;;;;;;AAUjG,MAAM,OAAO,2CAA2C;IAOtD,YACmB,MAAc,EACd,uBAAgD,EAChD,cAA8B;QAF9B,WAAM,GAAN,MAAM,CAAQ;QACd,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,mBAAc,GAAd,cAAc,CAAgB;QAThC,sBAAiB,GAAG,IAAI,eAAe,CAAO,SAAS,CAAC,CAAC;QACjE,eAAU,GAAwC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CACpF,+BAA+B,CAAC,IAAI,CAAC,uBAAuB,CAAC,EAC7D,KAAK,EAAE,CACR,CAAC;IAMC,CAAC;IAEJ,cAAc;;QACZ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAA,MAAA,MAAA,IAAI,CAAC,cAAc,CAAC,QAAQ,0CAAE,IAAI,0CAAE,kBAAkB,KAAI,oBAAoB,CAAC,EAAE;YACrG,UAAU,EAAE,IAAI,CAAC,cAAc;SAChC,CAAC,CAAC;IACL,CAAC;IAED,mBAAmB,CAAC,KAAa;;QAC/B,OAAO,MAAA,IAAI,CAAC,uBAAuB,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,KAAK,KAAK,CAAC,0CAAE,KAAK,CAAC;IACjH,CAAC;IAED,IAAI,oBAAoB;QACtB,OAAO,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,oBAAoB,CAAC;IAClE,CAAC;;4JAzBU,2CAA2C;gJAA3C,2CAA2C,gFCjBxD,wkHAoFA;4FDnEa,2CAA2C;kBAJvD,SAAS;mBAAC;oBACT,QAAQ,EAAE,0CAA0C;oBACpD,WAAW,EAAE,sDAAsD;iBACpE","sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { share } from 'rxjs/operators';\nimport { LoadableViewState } from '@backbase/identity-common-ang';\nimport { UserLocalizationService } from '../user-localization.service';\nimport { UserLocalizationOptionVM } from '../../../util';\nimport { userLanguageCommonViewStatePipe } from '../shared/user-language-common-view-state.pipe';\n\ninterface CommunicationsViewState extends LoadableViewState {\n  languageRegion?: UserLocalizationOptionVM;\n}\n\n@Component({\n  selector: 'bb-user-localization-communications-view',\n  templateUrl: 'user-localization-communications-view.component.html',\n})\nexport class UserLocalizationCommunicationsViewComponent {\n  private readonly viewStateSubject$ = new BehaviorSubject<void>(undefined);\n  readonly viewState$: Observable<CommunicationsViewState> = this.viewStateSubject$.pipe(\n    userLanguageCommonViewStatePipe(this.userLocalizationService),\n    share(),\n  );\n\n  constructor(\n    private readonly router: Router,\n    private readonly userLocalizationService: UserLocalizationService,\n    private readonly activatedRoute: ActivatedRoute,\n  ) {}\n\n  changeLanguage() {\n    this.router.navigate([this.activatedRoute.snapshot?.data?.changeLanguagePath || '../change-language'], {\n      relativeTo: this.activatedRoute,\n    });\n  }\n\n  getLanguageLabelFor(value: string) {\n    return this.userLocalizationService.defaultLocalizationOptions.find((option) => option.value === value)?.label;\n  }\n\n  get showEditableLanguage() {\n    return this.userLocalizationService.config.showEditableLanguage;\n  }\n}\n","<div data-role=\"user-localization-communications\">\n  <div class=\"bb-block bb-block--lg\">\n    <bb-header-ui\n      headingType=\"h1\"\n      data-role=\"user-localization-communications-header\"\n      heading=\"Communications\"\n      i18n-heading=\"Header for user language communications@@bb-user-localization-communications.header\"\n    >\n    </bb-header-ui>\n  </div>\n\n  <div class=\"card\" *ngIf=\"viewState$ | async as state\">\n    <div class=\"card-body\">\n      <bb-identity-view-state-container-component [error]=\"state.error\" [loading]=\"state.loading\">\n        <div class=\"bb-block bb-block--lg\">\n          <bb-header-ui\n            headingType=\"h2\"\n            data-role=\"user-localization-communications-header-external\"\n            heading=\"External communications\"\n            i18n-heading=\"\n              Header for user language external communications@@bb-user-localization-communications.header-external\"\n          >\n          </bb-header-ui>\n        </div>\n\n        <div class=\"bb-stack\" data-role=\"user-localization-communications-item\">\n          <div class=\"bb-stack__item bb-stack__item--fill\">\n            <div class=\"bb-stack bb-stack--wrap\">\n              <div class=\"bb-stack__item\">\n                <p\n                  class=\"bb-block bb-block--sm bb-subtitle bb-text-support\"\n                  i18n=\"Label for language and region@@bb-user-localization-communications.lanugage.label\"\n                >\n                  Language and region\n                </p>\n\n                <p\n                  *ngIf=\"\n                    state.languageRegion?.label ||\n                      getLanguageLabelFor(\n                        (state.languageRegion?.isDefault && state.languageRegion?.value) || ''\n                      ) as label;\n                    else noSelectedLabel\n                  \"\n                  data-role=\"user-localization-communications-chosen-label\"\n                  i18n=\"Chosen language and region@@bb-user-localization-communications.lanugage.selected\"\n                >\n                  {{ label }}\n                </p>\n                <ng-template #noSelectedLabel>\n                  <p\n                    data-role=\"user-localization-communications-default-label\"\n                    i18n=\"No language selected label@@bb-user-localization-communications.lanugage.not-selected\"\n                  >\n                    No language selected.\n                  </p>\n                </ng-template>\n              </div>\n              <div class=\"bb-stack__break bb-stack__break--sm-down\"></div>\n              <div\n                class=\"bb-stack__item bb-stack__item--fill bb-text-align-right bb-text-align-left--sm-down break-word\"\n              >\n                <button\n                  *ngIf=\"showEditableLanguage\"\n                  bbButton\n                  data-role=\"user-localization-communications-edit-button\"\n                  aria-label=\"Change your language and region\"\n                  i18n-aria-label=\"\n                    Change your language and region aria label@@bb-user-localization-communications.action.change\"\n                  type=\"button\"\n                  color=\"secondary\"\n                  [circle]=\"true\"\n                  (click)=\"changeLanguage()\"\n                >\n                  <bb-icon-ui name=\"edit\" size=\"md\" color=\"info\"> </bb-icon-ui>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </bb-identity-view-state-container-component>\n    </div>\n  </div>\n</div>\n"]}