{"version":3,"file":"transactions-container.component.js","sourceRoot":"","sources":["../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transactions-container.component.ts","../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transactions-container.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AAC1E,OAAO,EAAE,SAAS,EAAU,iBAAiB,EAAE,MAAM,eAAe,CAAC;AACrE,OAAO,EAAE,MAAM,EAAU,MAAM,kCAAkC,CAAC;AAClE,OAAO,EACL,mBAAmB,EACnB,uBAAuB,EACvB,yBAAyB,EACzB,0BAA0B,EAC1B,yBAAyB,EACzB,sBAAsB,EACtB,6BAA6B,EAC7B,cAAc,GACf,MAAM,mCAAmC,CAAC;AAC3C,OAAO,EAAE,mBAAmB,EAAE,MAAM,+BAA+B,CAAC;;;;;;;;;;;;AAQpE,MAAM,OAAO,8BAA+B,SAAQ,yBAAyB;IAC3E,YACqB,KAA0B,EAC1B,gBAAyC,EACzC,EAAqB,EACL,eAAuB,EACvC,mBAAwC,EACxC,0BAAsD,EACtD,yBAAoD,EACpD,6BAA4D;IAC/E,2BAA2B;IAIlB,iBAA2B;QAEpC,KAAK,CACH,KAAK,EACL,gBAAgB,EAChB,EAAE,EACF,eAAe,EACf,mBAAmB,EACnB,0BAA0B,EAC1B,yBAAyB,EACzB,6BAA6B,EAC7B,iBAAiB,CAClB,CAAC;QAxBiB,UAAK,GAAL,KAAK,CAAqB;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAyB;QACzC,OAAE,GAAF,EAAE,CAAmB;QACL,oBAAe,GAAf,eAAe,CAAQ;QACvC,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,+BAA0B,GAA1B,0BAA0B,CAA4B;QACtD,8BAAyB,GAAzB,yBAAyB,CAA2B;QACpD,kCAA6B,GAA7B,6BAA6B,CAA+B;QAKtE,sBAAiB,GAAjB,iBAAiB,CAAU;QAmBtC;;WAEG;QACM,YAAO,GAAG,IAAI,CAAC;QACf,mBAAc,GAAG,cAAc,CAAC;QATvC,IAAI,IAAI,CAAC,iBAAiB,KAAK,IAAI,IAAI,IAAI,CAAC,iBAAiB,KAAK,SAAS,EAAE;YAC3E,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;SAC/B;IACH,CAAC;;4HA/BU,8BAA8B,6HAK/B,MAAM,gLAQN,sBAAsB;gHAbrB,8BAA8B,oDAH9B,CAAC,mBAAmB,EAAE,0BAA0B,EAAE,yBAAyB,CAAC,iDClBzF,2mSA2OA;4FDtNa,8BAA8B;kBAN1C,SAAS;mBAAC;oBACT,QAAQ,EAAE,2BAA2B;oBACrC,WAAW,EAAE,yCAAyC;oBACtD,SAAS,EAAE,CAAC,mBAAmB,EAAE,0BAA0B,EAAE,yBAAyB,CAAC;oBACvF,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAMI,MAAM;2BAAC,MAAM;;0BAMb,QAAQ;;0BAER,MAAM;2BAAC,sBAAsB","sourcesContent":["import { ChangeDetectionStrategy, Inject, Optional } from '@angular/core';\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { PUBSUB, Pubsub } from '@backbase/foundation-ang/web-sdk';\nimport {\n  TransactionsService,\n  WidgetPropertiesService,\n  BaseTransactionsContainer,\n  PendingTransactionsService,\n  TransactionDetailsService,\n  showDetailsConfigToken,\n  AvailableFiltersConfigService,\n  PaginationType,\n} from '@backbase/transactions-common-ang';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n@Component({\n  selector: 'bb-transactions-container',\n  templateUrl: './transactions-container.component.html',\n  providers: [TransactionsService, PendingTransactionsService, TransactionDetailsService],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionsContainerComponent extends BaseTransactionsContainer implements OnInit {\n  constructor(\n    protected readonly model: TransactionsService,\n    protected readonly widgetProperties: WidgetPropertiesService,\n    protected readonly cd: ChangeDetectorRef,\n    @Inject(PUBSUB) protected readonly eventBusService: Pubsub,\n    protected readonly notificationService: NotificationService,\n    protected readonly pendingTransactionsService: PendingTransactionsService,\n    protected readonly transactionDetailsService: TransactionDetailsService,\n    protected readonly availableFiltersConfigService: AvailableFiltersConfigService,\n    // eslint-disable-next-line\n    @Optional()\n    // eslint-disable-next-line\n    @Inject(showDetailsConfigToken)\n    readonly showDetailsConfig?: boolean,\n  ) {\n    super(\n      model,\n      widgetProperties,\n      cd,\n      eventBusService,\n      notificationService,\n      pendingTransactionsService,\n      transactionDetailsService,\n      availableFiltersConfigService,\n      showDetailsConfig,\n    );\n\n    if (this.showDetailsConfig === null || this.showDetailsConfig === undefined) {\n      this.showDetailsConfig = true;\n    }\n  }\n\n  /**\n   * Reference to instance of customizable component.\n   */\n  readonly hostRef = this;\n  readonly PaginationType = PaginationType;\n}\n","<ng-container\n  *ngIf=\"\n    (hostRef.paginationType | async)! === PaginationType.INFINITE_SCROLL &&\n    (selectedAccount | async)! as selectedAccount\n  \"\n>\n  <ng-container\n    [ngTemplateOutlet]=\"bbPaginatedTransactionsContainer\"\n    [ngTemplateOutletContext]=\"{ $implicit: hostRef }\"\n  ></ng-container>\n  <ng-container *ngIf=\"hostRef.errors\">\n    <div class=\"mb-4\">\n      <bb-alert-ui\n        *ngFor=\"let error of hostRef.errors\"\n        title=\"Couldn't load more transactions\"\n        modifier=\"error\"\n        attr.data-role=\"alert-error\"\n      >\n        <p>{{ error?.message }}</p>\n        <a [routerLink]=\"\" class=\"alert-link\" (click)=\"hostRef.retry()\">click here</a>\n      </bb-alert-ui>\n    </div>\n  </ng-container>\n</ng-container>\n<ng-container\n  *ngIf=\"\n    (hostRef.paginationType | async) !== PaginationType.INFINITE_SCROLL && (selectedAccount | async) as selectedAccount\n  \"\n>\n  <ng-container *ngIf=\"!errors; else errorState\">\n    <ng-container\n      [ngTemplateOutlet]=\"bbPaginatedTransactionsContainer\"\n      [ngTemplateOutletContext]=\"{ $implicit: hostRef }\"\n    ></ng-container>\n  </ng-container>\n\n  <ng-template #notificationErrorUpdateHeader>\n    <ng-container [ngSwitch]=\"hostRef.storedExportType?.reason\">\n      <ng-container *ngSwitchCase=\"'MIXED_PRODUCT_KINDS'\">\n        {{ hostRef.storedExportType?.name }}\n        <ng-container\n          i18n=\"\n            Invalid export type header for mixed products kinds|Notification header due to mixed product\n            kinds@@transaction.list.toolTip.error.header.MixedProductKinds\"\n        >\n          export not supported\n        </ng-container>\n      </ng-container>\n\n      <ng-container *ngSwitchCase=\"'UNSUPPORTED_PRODUCT_KIND'\">\n        {{ hostRef.storedExportType?.name }}\n        <ng-container\n          i18n=\"\n            Invalid export type header for unsupported product kind|Notification header due to unsupported product\n            kind@@transaction.list.toolTip.error.header.UnsupportedProductKind\"\n        >\n          export not supported\n        </ng-container>\n      </ng-container>\n\n      <ng-container\n        *ngSwitchCase=\"'TOO_MANY_ITEMS'\"\n        i18n=\"\n          Invalid export type header for too many items|Notification header due to too many\n          transactions@@transaction.list.toolTip.error.header.TooManyItems\"\n      >\n        Maximum export threshold exceeded\n      </ng-container>\n\n      <ng-container\n        *ngSwitchCase=\"'MULTIPLE_PRODUCTS'\"\n        i18n=\"\n          Invalid export type header for Multiple Products |Notification header due to Multiple\n          Products@@transaction.list.toolTip.error.header.MultipleProducts\"\n      >\n        Multiple products are selected\n      </ng-container>\n    </ng-container>\n  </ng-template>\n\n  <ng-template #notificationErrorUpdateMessage>\n    <ng-container [ngSwitch]=\"hostRef.storedExportType?.reason\">\n      <ng-container\n        *ngSwitchCase=\"'MIXED_PRODUCT_KINDS'\"\n        i18n=\"\n          Invalid export type mixed products kinds|Notification message due to mixed product\n          kinds@@transaction.list.toolTip.error.message.MixedProductKinds\"\n      >\n        This export is not supported for your selection\n      </ng-container>\n\n      <ng-container\n        *ngSwitchCase=\"'UNSUPPORTED_PRODUCT_KIND'\"\n        i18n=\"\n          Invalid export type unsupported product kind|Notification message due to unsupported product\n          kind@@transaction.list.toolTip.error.message.UnsupportedProductKind\"\n      >\n        This export is not supported for your selection\n      </ng-container>\n\n      <ng-container\n        *ngSwitchCase=\"'TOO_MANY_ITEMS'\"\n        i18n=\"\n          Invalid export type too many items|Notification message due to too many\n          transactions@@transaction.list.toolTip.error.message.TooManyItems\"\n      >\n        Please provide different filter\\search criteria\n      </ng-container>\n\n      <ng-container\n        *ngSwitchCase=\"'MULTIPLE_PRODUCTS'\"\n        i18n=\"\n          Invalid export type Multiple Products|Notification message due to Multiple\n          Products@@transaction.list.toolTip.error.message.MultipleProducts\"\n      >\n        Please select only one product. For example, only one current account\n      </ng-container>\n    </ng-container>\n  </ng-template>\n</ng-container>\n\n<ng-container\n  *ngIf=\"!(selectedAccount | async) as selectedAccount\"\n  bbTransactionsNoAccountSelectedStateCustomizable\n  [bbHostRef]=\"hostRef\"\n>\n</ng-container>\n\n<ng-template #errorState>\n  <ng-container bbTransactionsErrorStateCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n</ng-template>\n\n<ng-template bbTransactionsNoAccountSelectedStateCustomizable let-hostRef>\n  <div class=\"card\">\n    <div class=\"card-body bb-state-container\">\n      <bb-empty-state-ui\n        i18n-title=\"No Product selected|Empty Product selector@@transactions.state.noProductSelected.title\"\n        title=\"No Product Selected\"\n        i18n-subtitle=\"Product selector@@transactions.state.noProductSelected.subtitle\"\n        subtitle=\"Please select a product first.\"\n        iconSize=\"xl\"\n        iconModifier=\"list\"\n      ></bb-empty-state-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template bbTransactionsErrorStateCustomizable let-hostRef>\n  <div class=\"card\">\n    <div class=\"card-body col-md-4 offset-md-4 bb-text-align-center\">\n      <div class=\"bb-block bb-block--md\">\n        <bb-empty-state-ui title=\"\"></bb-empty-state-ui>\n        <p\n          *ngFor=\"let error of hostRef.errors\"\n          data-role=\"custom-error-state-message\"\n          class=\"bb-empty-state__message bb-empty-state\"\n        >\n          {{ error?.message }}\n        </p>\n      </div>\n      <div>\n        <button i18n=\"Retry button@transactions.state.error.retry-button\" bbButton (click)=\"hostRef.retry()\">\n          Retry\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template\n  #notificationServerErrorHeader\n  i18n=\"Internal error header|Internal error header@@transaction.list.error.header.internal\"\n>\n  Transactions export is currently not available\n</ng-template>\n\n<ng-template\n  #notificationServerErrorMessage\n  i18n=\"Internal error message|Internal error message@@transaction.list.error.message.internal\"\n>\n  Please try again later\n</ng-template>\n\n<ng-template #bbPaginatedTransactionsContainer let-hostRef>\n  <div class=\"card card-lg bb-transactions-list-container\">\n    <bb-transactions-controls\n      *ngIf=\"(hostRef.showControls | async)!\"\n      [isFilterApplied]=\"(hostRef.isFilterApplied | async)!\"\n      [hideBillingStatus]=\"(hostRef.showPendingTransactionsOnTop | async)!\"\n      [exportConfig]=\"(hostRef.exportConfig | async)!\"\n      [availableFilters]=\"(hostRef.availableFilters | async) || []\"\n      (search)=\"hostRef.onSearch($event)\"\n      (filter)=\"hostRef.onFilter($event)\"\n      (print)=\"hostRef.onPrint()\"\n      (export)=\"hostRef.onExport($event)\"\n    ></bb-transactions-controls>\n    <bb-transactions-number-of-results-found\n      [numberOfResultsFound]=\"(hostRef.numberOfResultsFound | async)!\"\n      [loadingState]=\"(hostRef.loadingState | async)!\"\n      [isFilterApplied]=\"(hostRef.isFilterApplied | async)!\"\n      [isSearchApplied]=\"(hostRef.isSearchApplied | async)!\"\n    ></bb-transactions-number-of-results-found>\n    <div class=\"card-body\">\n      <bb-pending-transactions-list\n        *ngIf=\"(hostRef.showPendingTransactionsOnTop | async)!\"\n        [transactionsList]=\"(hostRef.pendingTransactionsList | async)!\"\n        [currentPage]=\"(hostRef.currentPage | async)!\"\n        [pageSize]=\"(hostRef.pageSize | async)!\"\n        [paginationType]=\"(hostRef.paginationType | async)!\"\n        [maxNavPages]=\"(hostRef.maxNavPages | async)!\"\n        [loadingState]=\"(hostRef.loadingPendingState | async)!\"\n        [showChangeCategory]=\"(hostRef.showChangeCategory | async)!\"\n        [inquireAndDisputeTopics]=\"(hostRef.inquireAndDisputeTopics | async)!\"\n        (detailsOpen)=\"hostRef.onDetailOpen($event)\"\n      ></bb-pending-transactions-list>\n\n      <bb-transactions-list\n        [transactionsList]=\"(hostRef.transactionsList | async)!\"\n        [checkImagesList]=\"(hostRef.checkImagesList | async)!\"\n        [currentPage]=\"(hostRef.currentPage | async)!\"\n        [pageSize]=\"(hostRef.pageSize | async)!\"\n        [maxNavPages]=\"(hostRef.maxNavPages | async)!\"\n        [loadingState]=\"(hostRef.loadingState | async)!\"\n        [paginationType]=\"(hostRef.paginationType | async)!\"\n        [numberOfResultsFound]=\"(hostRef.numberOfResultsDisplayed | async)!\"\n        [showChangeCategory]=\"(hostRef.showChangeCategory | async)!\"\n        [transactionDetailsLoadingStatus]=\"(hostRef.transactionDetailsLoadingStatus | async)!\"\n        [inquireAndDisputeTopics]=\"(hostRef.inquireAndDisputeTopics | async)!\"\n        (loadMore)=\"hostRef.onLoadMore()\"\n        (pageChange)=\"hostRef.onPageChange($event)\"\n        (detailsOpen)=\"hostRef.onDetailOpen($event)\"\n      ></bb-transactions-list>\n    </div>\n  </div>\n</ng-template>\n"]}