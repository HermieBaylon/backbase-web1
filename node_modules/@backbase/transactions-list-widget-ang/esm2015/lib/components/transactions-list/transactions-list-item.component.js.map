{"version":3,"file":"transactions-list-item.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transactions-list/transactions-list-item.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transactions-list/transactions-list-item.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, Directive, OnInit, Output, EventEmitter, Optional, Inject } from '@angular/core';\nimport { BbTemplate, FeaturesService } from '@backbase/foundation-ang/core';\nimport {\n  Transaction,\n  BillingStatusEnum,\n  TransactionCheckImageResponse,\n  TransactionsDetailsLoading,\n  showDetailsConfigToken,\n  InquireAndDisputeTopics,\n} from '@backbase/transactions-common-ang';\nimport { TRANSACTIONS_DETAILS_SHARE_MODAL } from '../../constants';\n\n@Component({\n  selector: 'bb-transactions-list-item',\n  templateUrl: './transactions-list-item.component.html',\n})\nexport class TransactionsListItemComponent implements OnInit {\n  /**\n   * The transaction this component shows.\n   */\n  @Input() transaction: Transaction | undefined;\n  /**\n   * Whether to show pending transactions on top or not.\n   */\n  @Input() showBillingStatus = false;\n  /**\n   * Boolean that decides if the Change Category will be displayed.\n   */\n  @Input() showChangeCategory: boolean | undefined;\n  @Input() checkImagesList: TransactionCheckImageResponse | undefined;\n  @Input() transactionDetailsLoadingStatus: TransactionsDetailsLoading | undefined;\n  @Input() inquireAndDisputeTopics: InquireAndDisputeTopics | undefined;\n  @Output() readonly detailsOpen = new EventEmitter<Transaction>();\n\n  /**\n   * Reference to instance of customizable component.\n   */\n  readonly hostRef = this;\n  /**\n   * Whether the transaction details are shown or not.\n   */\n  isDetailsOpen = false;\n  /**\n   * Whether the notes editing form is shown or not.\n   */\n  isEditingNotes = false;\n  /**\n   * Alert details such as visibility and type\n   */\n  alertOptions = {\n    displayAlert: false,\n    displayStatus: '',\n  };\n  /**\n   * Show the transaction details.\n   */\n  openDetails() {\n    this.isDetailsOpen = true;\n\n    if (this.transaction) {\n      this.detailsOpen.emit(this.transaction);\n    }\n  }\n\n  /**\n   * Hide the transaction details.\n   */\n  closeDetails() {\n    this.isDetailsOpen = false;\n    this.onAlertDismiss();\n  }\n\n  ngOnInit() {\n    if (typeof this.transaction === 'undefined') {\n      throw new Error(`\"transaction\" input is required in \"${this.constructor.name}\"`);\n    }\n  }\n\n  showCategory() {\n    return this.isPending || !!this.ownCategory;\n  }\n\n  get hasModal(): boolean {\n    // if the feature is not enabled, we are still displaying modal in the item component\n    return !this.featureService.isEnabled(TRANSACTIONS_DETAILS_SHARE_MODAL);\n  }\n\n  get isPending(): boolean {\n    let isPending = false;\n    if (this.transaction && this.transaction.billingStatus) {\n      const billingStatus = this.transaction.billingStatus.toUpperCase();\n      isPending = billingStatus === BillingStatusEnum.pending || billingStatus === BillingStatusEnum.unbilled;\n    }\n\n    return isPending;\n  }\n\n  private get ownCategory(): string | undefined {\n    return this.transaction && this.transaction.category;\n  }\n\n  closeTransactionsCategory(categoryChangeStatus?: string): void {\n    if (categoryChangeStatus) {\n      this.alertOptions = {\n        displayAlert: true,\n        displayStatus: categoryChangeStatus,\n      };\n    } else {\n      this.onAlertDismiss();\n    }\n  }\n\n  onAlertDismiss(): void {\n    this.alertOptions = {\n      displayAlert: false,\n      displayStatus: '',\n    };\n  }\n\n  constructor(\n    private readonly featureService: FeaturesService,\n    // eslint-disable-next-line\n    @Optional()\n    // eslint-disable-next-line\n    @Inject(showDetailsConfigToken)\n    public showDetailsConfig?: boolean,\n  ) {\n    if (this.showDetailsConfig === null || this.showDetailsConfig === undefined) {\n      this.showDetailsConfig = true;\n    }\n  }\n}\n@Directive({\n  selector: '[bbTransactionsListItemHeaderCustomizable]',\n})\nexport class TransactionsListItemHeaderCustomizableDirective extends BbTemplate<\n  TransactionsListItemComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbTransactionsListItemCustomizable]',\n})\nexport class TransactionsListItemCustomizableDirective extends BbTemplate<TransactionsListItemComponent, undefined> {}\n","<ng-container bbTransactionsListItemCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n\n<ng-template bbTransactionsListItemCustomizable let-hostRef>\n  <div bbAccessibilityKeyboard (click)=\"hostRef.openDetails()\">\n    <ng-container bbTransactionsListItemHeaderCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n    <span\n      i18n=\"Transaction selector button@@transactions.list.transaction.label\"\n      i18n-aria-label=\"Transaction selector button label@@transactions.list.transaction.label\"\n      class=\"sr-only\"\n      role=\"button\"\n    >\n      Select transaction\n    </span>\n  </div>\n  <bb-transaction-details-modal\n    *ngIf=\"hostRef.showDetailsConfig && hostRef.hasModal\"\n    [transaction]=\"hostRef.transaction\"\n    [showBillingStatus]=\"hostRef.showBillingStatus\"\n    [showChangeCategory]=\"hostRef.showChangeCategory\"\n    [checkImagesList]=\"hostRef.checkImagesList\"\n    [transactionDetailsLoadingStatus]=\"hostRef.transactionDetailsLoadingStatus\"\n    [isDetailsOpen]=\"hostRef.isDetailsOpen\"\n    [inquireAndDisputeTopics]=\"hostRef.inquireAndDisputeTopics\"\n    (detailsOpen)=\"hostRef.openDetails($event)\"\n    (close)=\"hostRef.closeDetails()\"\n  ></bb-transaction-details-modal>\n</ng-template>\n\n<ng-template bbTransactionsListItemHeaderCustomizable let-hostRef>\n  <bb-transaction-header\n    [showBillingStatus]=\"hostRef.showBillingStatus\"\n    [transaction]=\"hostRef.transaction\"\n  ></bb-transaction-header>\n</ng-template>\n"]}