{"version":3,"file":"transactions-list-item-group.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transactions-list/transactions-list-item-group.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transactions-list/transactions-list-item-group.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAU,MAAM,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAC1F,OAAO,EAAE,UAAU,EAAE,MAAM,+BAA+B,CAAC;;;;AAY3D,MAAM,OAAO,kCAAkC;IAJ/C;QAqBqB,gBAAW,GAAG,IAAI,YAAY,EAAe,CAAC;QAEjE;;WAEG;QACM,YAAO,GAAG,IAAI,CAAC;KAyCzB;IAvCC,QAAQ;QACN,IAAI,OAAO,IAAI,CAAC,YAAY,KAAK,WAAW,EAAE;YAC5C,MAAM,IAAI,KAAK,CAAC,wCAAwC,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,CAAC;SACnF;IACH,CAAC;IAED,IAAI,WAAW;QACb,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;YACtC,OAAO,SAAS,CAAC;SAClB;QAED,IAAI,eAAe,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAErD,IAAI,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC,EAAE;YAC3C,OAAO,SAAS,CAAC;SAClB;QAED,MAAM,kBAAkB,GAAG,QAAQ,CAAC;QACpC,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;QACzC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;QAElD,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,eAAe,CAAC,OAAO,EAAE,CAAC,GAAG,kBAAkB,CAAC,CAAC;IACxF,CAAC;IAED,YAAY,CAAC,WAAwB;QACnC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACrC,CAAC;IAEO,SAAS,CAAC,IAAU;QAC1B,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QACpB,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAEtB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,SAAS,CAAC,MAAc,EAAE,OAAoB;QAC5C,OAAO,OAAO,CAAC,EAAE,CAAC;IACpB,CAAC;;gIA9DU,kCAAkC;oHAAlC,kCAAkC,oYCb/C,qtCAgCA,iXDiDa,8CAA8C;4FApE9C,kCAAkC;kBAJ9C,SAAS;mBAAC;oBACT,QAAQ,EAAE,iCAAiC;oBAC3C,WAAW,EAAE,+CAA+C;iBAC7D;8BAKU,eAAe;sBAAvB,KAAK;gBAIG,YAAY;sBAApB,KAAK;gBAIG,kBAAkB;sBAA1B,KAAK;gBAEG,eAAe;sBAAvB,KAAK;gBACG,+BAA+B;sBAAvC,KAAK;gBACG,uBAAuB;sBAA/B,KAAK;gBACa,WAAW;sBAA7B,MAAM;;AAmDT,MAAM,OAAO,8CAA+C,SAAQ,UAGnE;;4IAHY,8CAA8C;gIAA9C,8CAA8C;4FAA9C,8CAA8C;kBAH1D,SAAS;mBAAC;oBACT,QAAQ,EAAE,2CAA2C;iBACtD","sourcesContent":["import { Component, Input, Directive, OnInit, Output, EventEmitter } from '@angular/core';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\nimport {\n  InquireAndDisputeTopics,\n  Transaction,\n  TransactionCheckImageResponse,\n  TransactionsDetailsLoading,\n} from '@backbase/transactions-common-ang';\n\n@Component({\n  selector: 'bb-transactions-list-item-group',\n  templateUrl: './transactions-list-item-group.component.html',\n})\nexport class TransactionsListItemGroupComponent implements OnInit {\n  /**\n   * Title to be displayed over transactions.\n   */\n  @Input() transactionDate: string | undefined;\n  /**\n   * The transactions this component shows.\n   */\n  @Input() transactions: Transaction[] | undefined;\n  /**\n   * Boolean that decides if the Change Category will be displayed.\n   */\n  @Input() showChangeCategory: boolean | undefined;\n\n  @Input() checkImagesList: TransactionCheckImageResponse | undefined;\n  @Input() transactionDetailsLoadingStatus: TransactionsDetailsLoading | undefined;\n  @Input() inquireAndDisputeTopics: InquireAndDisputeTopics | undefined;\n  @Output() readonly detailsOpen = new EventEmitter<Transaction>();\n\n  /**\n   * Reference to instance of customizable component.\n   */\n  readonly hostRef = this;\n\n  ngOnInit() {\n    if (typeof this.transactions === 'undefined') {\n      throw new Error(`\"transactions\" input is required in \"${this.constructor.name}\"`);\n    }\n  }\n\n  get daysElapsed(): number | undefined {\n    if (this.transactionDate === undefined) {\n      return undefined;\n    }\n\n    let transactionDate = new Date(this.transactionDate);\n\n    if (Number.isNaN(transactionDate.getTime())) {\n      return undefined;\n    }\n\n    const millisecondsPerDay = 86400000;\n    const today = this.roundDate(new Date());\n    transactionDate = this.roundDate(transactionDate);\n\n    return Math.floor((today.getTime() - transactionDate.getTime()) / millisecondsPerDay);\n  }\n\n  onDetailOpen(transaction: Transaction) {\n    this.detailsOpen.emit(transaction);\n  }\n\n  private roundDate(date: Date): Date {\n    date.setUTCHours(0);\n    date.setUTCMinutes(0);\n    date.setUTCSeconds(0);\n\n    return date;\n  }\n\n  trackByFn(_index: number, element: Transaction) {\n    return element.id;\n  }\n}\n\n@Directive({\n  selector: '[bbTransactionsListItemGroupCustomizable]',\n})\nexport class TransactionsListItemGroupCustomizableDirective extends BbTemplate<\n  TransactionsListItemGroupComponent,\n  undefined\n> {}\n","<ng-container bbTransactionsListItemGroupCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n\n<ng-template bbTransactionsListItemGroupCustomizable let-hostRef>\n  <div\n    role=\"heading\"\n    aria-level=\"2\"\n    class=\"bb-transaction-group__date bb-block--md bb-subheader\"\n    i18n=\"Date of the selected transaction@@transactions.list.transactionDate\"\n    tabindex=\"0\"\n  >\n    {hostRef.daysElapsed, plural, =0 {Today} =1 {Yesterday} other\n    {{{ hostRef.transactionDate | date:'longDate' }}} }\n  </div>\n  <div>\n    <div role=\"list\">\n      <div\n        class=\"bb-block--md\"\n        *ngFor=\"let transaction of hostRef.transactions; trackBy: hostRef.trackByFn\"\n        role=\"listitem\"\n      >\n        <bb-transactions-list-item\n          [showChangeCategory]=\"hostRef.showChangeCategory\"\n          [transaction]=\"transaction\"\n          [checkImagesList]=\"hostRef.checkImagesList\"\n          [transactionDetailsLoadingStatus]=\"hostRef.transactionDetailsLoadingStatus\"\n          [inquireAndDisputeTopics]=\"hostRef.inquireAndDisputeTopics\"\n          (detailsOpen)=\"hostRef.onDetailOpen($event)\"\n        ></bb-transactions-list-item>\n      </div>\n    </div>\n  </div>\n</ng-template>\n"]}