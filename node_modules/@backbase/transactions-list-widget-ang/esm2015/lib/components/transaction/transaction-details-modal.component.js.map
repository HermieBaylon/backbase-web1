{"version":3,"file":"transaction-details-modal.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-details-modal.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-details-modal.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,uBAAuB,EAAE,MAAM,eAAe,CAAC;AAChG,OAAO,EACL,iBAAiB,GAKlB,MAAM,mCAAmC,CAAC;;;;;;;;;;;;AAO3C,MAAM,OAAO,gCAAgC;IAL7C;QAMW,kBAAa,GAAG,KAAK,CAAC;QAC/B,mBAAc,GAAG,KAAK,CAAC;QAMd,4BAAuB,GAA4B;YAC1D,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,EAAE;SACZ,CAAC;QACiB,gBAAW,GAAG,IAAI,YAAY,EAAe,CAAC;QACjE,4DAA4D;QACzC,UAAK,GAAG,IAAI,YAAY,EAAQ,CAAC;QACpD,0BAAqB,GAAG,KAAK,CAAC;QAC9B,iBAAY,GAAG;YACb,YAAY,EAAE,KAAK;YACnB,aAAa,EAAE,EAAE;SAClB,CAAC;KAgCH;IA/BC,cAAc;QACZ,IAAI,CAAC,YAAY,GAAG;YAClB,YAAY,EAAE,KAAK;YACnB,aAAa,EAAE,EAAE;SAClB,CAAC;IACJ,CAAC;IACD,yBAAyB,CAAC,oBAA6B;QACrD,IAAI,oBAAoB,EAAE;YACxB,IAAI,CAAC,YAAY,GAAG;gBAClB,YAAY,EAAE,IAAI;gBAClB,aAAa,EAAE,oBAAoB;aACpC,CAAC;SACH;aAAM;YACL,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;IACH,CAAC;IAED,YAAY;QACV,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IACpB,CAAC;IAED,IAAI,SAAS;QACX,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE;YACtD,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;YACnE,SAAS,GAAG,aAAa,KAAK,iBAAiB,CAAC,OAAO,IAAI,aAAa,KAAK,iBAAiB,CAAC,QAAQ,CAAC;SACzG;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;;8HAlDU,gCAAgC;kHAAhC,gCAAgC,mbCd7C,mzLAmJA;4FDrIa,gCAAgC;kBAL5C,SAAS;mBAAC;oBACT,QAAQ,EAAE,8BAA8B;oBACxC,WAAW,EAAE,0CAA0C;oBACvD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAEU,aAAa;sBAArB,KAAK;gBAEG,WAAW;sBAAnB,KAAK;gBACG,iBAAiB;sBAAzB,KAAK;gBACG,kBAAkB;sBAA1B,KAAK;gBACG,eAAe;sBAAvB,KAAK;gBACG,+BAA+B;sBAAvC,KAAK;gBACG,uBAAuB;sBAA/B,KAAK;gBAIa,WAAW;sBAA7B,MAAM;gBAEY,KAAK;sBAAvB,MAAM","sourcesContent":["import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport {\n  BillingStatusEnum,\n  InquireAndDisputeTopics,\n  Transaction,\n  TransactionCheckImageResponse,\n  TransactionsDetailsLoading,\n} from '@backbase/transactions-common-ang';\n\n@Component({\n  selector: 'bb-transaction-details-modal',\n  templateUrl: 'transaction-details-modal.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionDetailsModalComponent {\n  @Input() isDetailsOpen = false;\n  isEditingNotes = false;\n  @Input() transaction: Transaction | undefined;\n  @Input() showBillingStatus: boolean | undefined;\n  @Input() showChangeCategory: boolean | undefined;\n  @Input() checkImagesList: TransactionCheckImageResponse | undefined;\n  @Input() transactionDetailsLoadingStatus: TransactionsDetailsLoading | undefined;\n  @Input() inquireAndDisputeTopics: InquireAndDisputeTopics = {\n    inquire: '',\n    dispute: '',\n  };\n  @Output() readonly detailsOpen = new EventEmitter<Transaction>();\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() readonly close = new EventEmitter<void>();\n  showInquiryAndDispute = false;\n  alertOptions = {\n    displayAlert: false,\n    displayStatus: '',\n  };\n  onAlertDismiss(): void {\n    this.alertOptions = {\n      displayAlert: false,\n      displayStatus: '',\n    };\n  }\n  closeTransactionsCategory(categoryChangeStatus?: string): void {\n    if (categoryChangeStatus) {\n      this.alertOptions = {\n        displayAlert: true,\n        displayStatus: categoryChangeStatus,\n      };\n    } else {\n      this.onAlertDismiss();\n    }\n  }\n\n  closeDetails() {\n    this.showInquiryAndDispute = false;\n    this.close.emit();\n  }\n\n  get isPending(): boolean {\n    let isPending = false;\n    if (this.transaction && this.transaction.billingStatus) {\n      const billingStatus = this.transaction.billingStatus.toUpperCase();\n      isPending = billingStatus === BillingStatusEnum.pending || billingStatus === BillingStatusEnum.unbilled;\n    }\n\n    return isPending;\n  }\n}\n","<bb-modal-ui\n  [isOpen]=\"isDetailsOpen\"\n  [modalOptions]=\"{\n    centered: true\n  }\"\n  (cancel)=\"closeDetails()\"\n>\n  <div role=\"dialog\">\n    <bb-modal-header-ui>\n      <ng-template bbCustomModalHeader>\n        <button\n          type=\"button\"\n          class=\"close bb-transaction-list-item-detail-header__close-button\"\n          aria-label=\"Close dialog\"\n          i18n-aria-label=\"Close dialog button@@transactions.list.dialog.close.button\"\n          (click)=\"closeDetails()\"\n        >\n          <bb-icon-ui color=\"muted\" name=\"clear\"></bb-icon-ui>\n        </button>\n      </ng-template>\n    </bb-modal-header-ui>\n    <!-- Details -->\n    <bb-modal-body-ui>\n      <ng-template bbCustomModalBody>\n        <div class=\"bb-text-align-center\">\n          <!-- Category icon-->\n          <div class=\"bb-block bb-block--md\">\n            <div class=\"bb-stack bb-stack--center\">\n              <bb-transaction-category-icon\n                [transaction]=\"transaction\"\n                backgroundType=\"circle\"\n                size=\"large\"\n              ></bb-transaction-category-icon>\n            </div>\n          </div>\n          <!-- Counter party, description -->\n          <div class=\"bb-block bb-block--md\">\n            <strong>\n              {{ transaction?.merchant ? transaction?.merchant?.name : transaction?.counterPartyName }}\n            </strong>\n          </div>\n          <!-- Amount -->\n          <div class=\"bb-heading-2 bb-block bb-block--md\">\n            <bb-amount-ui\n              data-role=\"list-details-amount\"\n              [showPlusSign]=\"true\"\n              [currency]=\"transaction?.transactionAmountCurrency?.currencyCode || ''\"\n              [amount]=\"transaction?.transactionAmountCurrency?.amount || 0\"\n            ></bb-amount-ui>\n            <ng-container *ngIf=\"transaction?.currencyExchangeAvailability\">\n              <bb-icon-ui\n                class=\"bb-transaction-list-item-detail-header__exchange-icon\"\n                role=\"tooltip\"\n                name=\"exchange\"\n                size=\"md\"\n                [bbTooltip]=\"tipContent\"\n                triggers=\"hover click\"\n                placement=\"right\"\n                bbAccessibilityKeyboard\n              ></bb-icon-ui>\n              <span\n                class=\"sr-only\"\n                i18n=\"An exchange rate has been applied to the current transaction@@transactions.details.exchangeRate\"\n                >An exchange rate has been applied</span\n              >\n            </ng-container>\n          </div>\n          <!-- Date -->\n          <div class=\"bb-block bb-block--md\" *ngIf=\"transaction?.bookingDate\">\n            <div class=\"break-word text-small\" data-role=\"list-details-booking-date\">\n              {{ transaction?.bookingDate | date: 'longDate' }}\n            </div>\n          </div>\n          <!-- Category name -->\n          <div class=\"bb-block bb-block--lg\">\n            <bb-transaction-detail-category\n              (categoryChange)=\"closeTransactionsCategory($event)\"\n              [displayChangeCategory]=\"showChangeCategory\"\n              [transaction]=\"transaction\"\n            >\n            </bb-transaction-detail-category>\n          </div>\n          <!-- Billing status -->\n          <div\n            class=\"bb-block bb-block--md\"\n            *ngIf=\"\n              !showBillingStatus &&\n              (transaction?.billingStatus === 'UNBILLED' || transaction?.billingStatus === 'PENDING')\n            \"\n          >\n            <bb-badge-ui\n              text=\"{{ transaction?.billingStatus }}\"\n              color=\"warning\"\n              [abbr]=\"false\"\n              [circle]=\"false\"\n            ></bb-badge-ui>\n          </div>\n          <div class=\"bb-block bb-block--md bb-text-align-left\">\n            <ng-container *ngIf=\"alertOptions.displayAlert\" [ngSwitch]=\"alertOptions.displayStatus\">\n              <bb-alert-ui\n                *ngSwitchCase=\"'error'\"\n                title=\"Transaction category was not changed\"\n                i18n-title=\"\n                  Update failed notification|Message for a notification displayed when transaction category update\n                  request has failed@@transaction.notification.error.update\"\n                [dismissible]=\"true\"\n                (close)=\"onAlertDismiss()\"\n              ></bb-alert-ui>\n\n              <bb-alert-ui\n                *ngSwitchCase=\"'success'\"\n                modifier=\"success\"\n                title=\"Transaction category changed successfully\"\n                i18n-title=\"\n                  Update notification|Message for a notification displayed when transaction category update request has\n                  been processed@@transaction.notification.success.update\"\n                [dismissible]=\"true\"\n                (close)=\"onAlertDismiss()\"\n              ></bb-alert-ui>\n            </ng-container>\n          </div>\n        </div>\n\n        <bb-transaction-details\n          *ngIf=\"isDetailsOpen\"\n          [transaction]=\"transaction\"\n          [(isEditingNotes)]=\"isEditingNotes\"\n          [(showInquiryAndDispute)]=\"showInquiryAndDispute\"\n          [checkImagesList]=\"checkImagesList\"\n          [transactionDetailsLoadingStatus]=\"transactionDetailsLoadingStatus\"\n          [inquireAndDisputeTopics]=\"inquireAndDisputeTopics\"\n          [isPending]=\"isPending\"\n        ></bb-transaction-details>\n      </ng-template>\n    </bb-modal-body-ui>\n  </div>\n</bb-modal-ui>\n<ng-template #tipContent>\n  <div class=\"bb-text-align-left\">\n    <span\n      i18n=\"\n        Description inside a tooltip describing an exchange rate has ocurred@@transactions.details.exchangeRate.tooltip\"\n    >\n      An exchange rate has been applied\n    </span>\n  </div>\n</ng-template>\n"]}