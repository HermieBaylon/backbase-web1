{"version":3,"file":"transaction-details.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-details.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-details.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  OnInit,\n  Input,\n  Directive,\n  ChangeDetectorRef,\n  EventEmitter,\n  Output,\n  OnDestroy,\n  ChangeDetectionStrategy,\n} from '@angular/core';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\nimport {\n  Transaction,\n  TransactionUpdateService,\n  TransactionCheckImageResponse,\n  TransactionsDetailsLoading,\n  TransactionsDetailsLoadingState,\n  InquireAndDisputeTopics,\n  TransactionsInquireAndDisputeUIService,\n  MessageForm,\n  MessagesService,\n  InquireAndDisputeFile,\n  SubjectReport,\n} from '@backbase/transactions-common-ang';\nimport { of, Subject } from 'rxjs';\nimport { switchMap, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'bb-transaction-details',\n  templateUrl: 'transaction-details.component.html',\n  providers: [TransactionsInquireAndDisputeUIService],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionDetailsComponent implements OnInit, OnDestroy {\n  /* eslint-enable */\n  /**\n   * Reference to instance of customizable component.\n   */\n  readonly hostRef = this;\n  /**\n   * The transaction this component shows the details of.\n   */\n  @Input() transaction: Transaction | undefined;\n  /**\n   * Whether to show the account number (for example, when transactions of multiple accounts are\n   * shown) or not.\n   */\n  @Input() showAccountNumber = false;\n  /**\n   * Whether the notes editing form is shown or not.\n   */\n  @Input() isEditingNotes = false;\n  @Input() checkImagesList: TransactionCheckImageResponse | undefined;\n  @Input() transactionDetailsLoadingStatus: TransactionsDetailsLoading | undefined;\n  @Input() isPending = false;\n  @Input() showInquiryAndDispute = false;\n  @Input() inquireAndDisputeTopics: InquireAndDisputeTopics = {\n    inquire: '',\n    dispute: '',\n  };\n\n  /**\n   * EventEmitter for triggering an isEditingNotesChange event.\n   */\n  @Output() readonly isEditingNotesChange = new EventEmitter<boolean>();\n  @Output() readonly showInquiryAndDisputeChange = new EventEmitter<boolean>();\n  /* eslint-disable */\n  @Output() readonly onNotesUpdateSuccess = new EventEmitter<string>();\n  @Output() readonly onNotesUpdateError = new EventEmitter<string>();\n\n  private unsubscribeSubject = new Subject<void>();\n\n  showReportForm = (display: boolean) => {\n    if (display) {\n      this.isEditingNotes = false;\n    }\n\n    this.showInquiryAndDisputeChange.emit(display);\n  };\n\n  isSavingNotes = false;\n  deleteNoteModalActive = false;\n  readonly loadingStateEnum = TransactionsDetailsLoadingState;\n\n  //Inquire and dispute variables\n  get reportState() {\n    return this.transactionsInquireAndDispute.reportState;\n  }\n  get message() {\n    return this.transactionsInquireAndDispute.message;\n  }\n\n  set message(value: MessageForm) {\n    this.transactionsInquireAndDispute.message = value;\n  }\n\n  savedReportType: SubjectReport | undefined;\n\n  constructor(\n    private readonly transactionUpdate: TransactionUpdateService,\n    private readonly messagesService: MessagesService,\n    private readonly transactionsInquireAndDispute: TransactionsInquireAndDisputeUIService,\n    private readonly cd: ChangeDetectorRef,\n  ) {}\n\n  /**\n   * Handler function after user changes notes for the transaction.  Calls service to update the\n   * backend.\n   *\n   * @param notes - The new notes for the transaction.\n   */\n  onChangeNotes(notes: string) {\n    if (typeof this.transaction === 'undefined') {\n      return;\n    }\n\n    this.updateNotes(this.transaction, notes);\n  }\n\n  openEditNotes() {\n    this.isEditingNotes = true;\n    this.transactionsInquireAndDispute.showReportForm(false);\n  }\n\n  handleDelete(data: string) {\n    this.deleteNoteModalActive = true;\n    if (this.transaction) {\n      this.transaction.notes = data;\n    }\n  }\n\n  closeModal() {\n    this.deleteNoteModalActive = false;\n  }\n\n  submitDeleteNote() {\n    if (this.transaction) {\n      this.updateNotes(this.transaction, '');\n    }\n  }\n\n  private updateNotes(transaction: Transaction, note: string) {\n    this.isSavingNotes = true;\n    this.transactionUpdate.updateNotes(transaction, note).subscribe(\n      () => {\n        transaction.notes = note;\n        this.deleteNoteModalActive = false;\n        this.onNotesUpdateSuccess.emit(note);\n        this.updateNotesState();\n      },\n      (error) => {\n        this.onNotesUpdateError.emit(error);\n        this.updateNotesState();\n      },\n    );\n  }\n\n  private updateNotesState() {\n    this.isSavingNotes = false;\n    this.isEditingNotes = false;\n    this.cd.markForCheck();\n  }\n\n  ngOnInit() {\n    if (typeof this.transaction === 'undefined') {\n      throw new Error(`\"transaction\" input is required in \"${this.constructor.name}\"`);\n    }\n\n    if (this.inquireAndDisputeTopics) {\n      this.transactionsInquireAndDispute.showReport.subscribe({\n        next: this.showReportForm,\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this.transactionsInquireAndDispute.removeAllFiles();\n    this.unsubscribeSubject.next();\n    this.unsubscribeSubject.complete();\n  }\n\n  saveReport(messageForm: MessageForm) {\n    const defaultBody = this.transaction ? this.messagesService.createDefaultBody(this.transaction) : '';\n\n    this.transactionsInquireAndDispute\n      .saveReport(\n        this.transactionsInquireAndDispute.formatMessage(\n          messageForm,\n          defaultBody,\n          this.inquireAndDisputeTopics,\n          this.transaction,\n        ),\n      )\n      .pipe(\n        takeUntil(this.unsubscribeSubject),\n        switchMap(() => {\n          if (this.transaction && messageForm.topic === 'dispute') {\n            return this.transactionUpdate.setDisputeStatus(this.transaction, 'PENDING');\n          }\n\n          return of(undefined);\n        }),\n      )\n      .subscribe({\n        next: (result) => {\n          this.savedReportType = result !== undefined ? messageForm.topic : undefined;\n          if (this.transaction && messageForm.topic === 'dispute') {\n            this.transaction.disputeStatus = 'PENDING';\n          }\n\n          if (this.transaction && messageForm.topic === 'inquire') {\n            this.savedReportType = messageForm.topic;\n          }\n\n          this.cd.markForCheck();\n        },\n      });\n  }\n\n  cancelReport() {\n    this.transactionsInquireAndDispute.cancelReport();\n  }\n\n  fileChange(file: File) {\n    this.transactionsInquireAndDispute\n      .fileChange(file)\n      .pipe(takeUntil(this.unsubscribeSubject))\n      .subscribe({\n        next: () => {\n          this.cd.markForCheck();\n        },\n      });\n  }\n\n  fileRemoved(attachment: InquireAndDisputeFile) {\n    this.transactionsInquireAndDispute\n      .fileRemoved(attachment)\n      .pipe(takeUntil(this.unsubscribeSubject))\n      .subscribe({\n        next: () => {\n          this.cd.markForCheck();\n        },\n      });\n  }\n}\n\n@Directive({\n  selector: '[bbTransactionsListItemDetailsCustomizable]',\n})\nexport class TransactionsListItemDetailsCustomizableDirective extends BbTemplate<\n  TransactionDetailsComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbTransactionsListConfirmationModalCustomizable]',\n})\nexport class TransactionsListConfirmationModalCustomizableDirective extends BbTemplate<\n  TransactionDetailsComponent,\n  undefined\n> {}\n","<ng-container bbTransactionsListItemDetailsCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n\n<ng-template bbTransactionsListItemDetailsCustomizable let-hostRef>\n  <div class=\"bb-transaction-list-item-details\">\n    <div class=\"bb-block bb-block--lg\">\n      <div class=\"bb-text-align-center bb-stack bb-stack--center\">\n        <!-- Add note button -->\n        <div class=\"bb-stack__item bb-transaction-list-item-details-controls-container\">\n          <button\n            bbButton\n            [circle]=\"true\"\n            data-role=\"control-note-btn\"\n            class=\"bb-block bb-block--md\"\n            [attr.aria-expanded]=\"!!hostRef.isEditingNotes\"\n            (click)=\"hostRef.openEditNotes()\"\n          >\n            <bb-icon-ui name=\"subject\"></bb-icon-ui>\n          </button>\n          <div class=\"bb-transaction-list-item-details-controls-label\">\n            <label\n              data-role=\"add-note-label\"\n              *ngIf=\"!hostRef.transaction.notes; else editNoteLabel\"\n              i18n=\"Add note to the current transaction@@transactions.list.details.addNote.label\"\n              >Add note</label\n            >\n            <ng-template #editNoteLabel>\n              <label\n                data-role=\"edit-note-label\"\n                i18n=\"Edit note of the current transaction@@transactions.list.details.editNote.label\"\n                >Edit note</label\n              >\n            </ng-template>\n          </div>\n        </div>\n        <!-- Report button -->\n        <div\n          *ngIf=\"hostRef.transactionDetailsLoadingStatus?.enableDisputeAndInquiry === hostRef.loadingStateEnum.done\"\n          class=\"bb-stack__item bb-transaction-list-item-details-controls-container\"\n        >\n          <button\n            bbButton\n            [circle]=\"true\"\n            class=\"bb-block bb-block--md\"\n            data-role=\"report-button\"\n            (click)=\"hostRef.showReportForm(true)\"\n          >\n            <bb-icon-ui name=\"sms-failed\"></bb-icon-ui>\n          </button>\n          <div class=\"bb-transaction-list-item-details-controls-label\">\n            <label\n              data-role=\"report-label\"\n              i18n=\"Report the current transaction@@transactions.list.details.report.label\"\n            >\n              Report\n            </label>\n          </div>\n        </div>\n      </div>\n\n      <!-- Dispute and inquiry alerts -->\n      <div class=\"bb-block bb-block--lg bb-text-align-left\">\n        <!-- Dispute banners -->\n        <bb-dispute-banner [transaction]=\"hostRef.transaction\"></bb-dispute-banner>\n        <!-- Inquiry banner -->\n        <ng-container *ngIf=\"hostRef.reportState === hostRef.loadingStateEnum.done\">\n          <bb-alert-ui\n            *ngIf=\"hostRef.savedReportType === 'inquire'\"\n            modifier=\"info\"\n            data-role=\"send-inquiry-success\"\n            title=\"The bank is reviewing your transaction\"\n            i18n-title=\"\n              Send inquiry report success notification|Message for a notification displayed when sending transaction\n              inquiry report request has succeed@@transactions.notification.success.send.inquiry.title\"\n            message=\"Please go to Messages to view any responses to your request.\"\n            i18n-message=\"\n              Send inquiry report success notification message@@transactions.notification.success.send.inquiry.message\"\n          ></bb-alert-ui>\n        </ng-container>\n      </div>\n\n      <!-- Dispute and inquiry component -->\n      <div *ngIf=\"hostRef.showInquiryAndDispute\">\n        <bb-transactions-inquiry-dispute\n          [(message)]=\"hostRef.message\"\n          [enableDispute]=\"\n            hostRef.transactionDetailsLoadingStatus.disputeOption === hostRef.loadingStateEnum.done &&\n            (hostRef.transaction.disputeStatus === 'UNDISPUTED' ||\n              hostRef.transaction.disputeStatus === 'REJECTED' ||\n              !hostRef.transaction.disputeStatus)\n          \"\n          [state]=\"hostRef.reportState\"\n          [inquireAndDisputeTopics]=\"hostRef.inquireAndDisputeTopics\"\n          (submitReport)=\"hostRef.saveReport($event)\"\n          (cancelReport)=\"hostRef.cancelReport()\"\n          (fileChange)=\"hostRef.fileChange($event)\"\n          (fileRemoved)=\"hostRef.fileRemoved($event)\"\n        ></bb-transactions-inquiry-dispute>\n      </div>\n    </div>\n\n    <div class=\"bb-block--lg\">\n      <!-- Type -->\n      <div\n        class=\"bb-block--md\"\n        *ngIf=\"hostRef.transaction?.type && (!!hostRef.transaction?.category || !!hostRef.transaction.isPending)\"\n        data-role=\"list-details-type-section\"\n      >\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"Type of the selected transaction@@transactions.details.label.transactionType\"\n          data-role=\"section-title\"\n        >\n          Type\n        </div>\n        <div class=\"break-word\" data-role=\"section-content\">\n          {{ hostRef.transaction?.type }}\n        </div>\n      </div>\n\n      <!-- Currency Exchange -->\n      <div\n        class=\"bb-block--md\"\n        *ngIf=\"hostRef.transaction.currencyExchangeAvailability\"\n        data-role=\"list-details-currency-exchange-section\"\n      >\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"Transaction type of the selected transaction@@transactions.details.label.currencyExchange\"\n          data-role=\"section-title\"\n        >\n          Currency exchange\n        </div>\n        <div class=\"break-word\" data-role=\"section-content\">\n          <bb-amount-ui\n            amount=\"1\"\n            [currency]=\"hostRef.transaction?.instructedAmountCurrency.currencyCode\"\n          ></bb-amount-ui>\n          <span> = </span>\n          <bb-amount-ui\n            [amount]=\"hostRef.transaction?.currencyExchangeRate\"\n            [currency]=\"hostRef.transaction?.transactionAmountCurrency.currencyCode\"\n            [decimalPlaces]=\"6\"\n            [trailingZeroes]=\"false\"\n          ></bb-amount-ui>\n        </div>\n      </div>\n\n      <!-- Instructed amount -->\n      <div\n        class=\"bb-block--md\"\n        *ngIf=\"hostRef.transaction?.instructedAmountCurrency?.amount\"\n        data-role=\"list-details-instructed-amount-section\"\n      >\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"Instructed Amount of the selected transaction@@transactions.details.label.instructedAmount\"\n          data-role=\"section-title\"\n        >\n          Instructed amount\n        </div>\n        <div class=\"break-word\">\n          <bb-amount-ui\n            data-role=\"section-content\"\n            [amount]=\"hostRef.transaction?.instructedAmountCurrency?.amount\"\n            [currency]=\"hostRef.transaction?.instructedAmountCurrency?.currencyCode\"\n          ></bb-amount-ui>\n        </div>\n      </div>\n\n      <!-- Counter party account number -->\n      <div\n        class=\"bb-block--md\"\n        *ngIf=\"hostRef.transaction?.counterPartyAccountNumber\"\n        data-role=\"list-details-counter-party-account-number-section\"\n      >\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"\n            Counter Party Account number of the selected\n            transaction@@transactions.details.label.counterPartyAccountNumber\"\n          data-role=\"section-title\"\n        >\n          Counter party account number\n        </div>\n        <div class=\"break-word\" data-role=\"section-content\">\n          {{ hostRef.transaction?.counterPartyAccountNumber }}\n        </div>\n      </div>\n\n      <!-- Description -->\n      <div class=\"bb-block--md\" *ngIf=\"hostRef.transaction?.description\" data-role=\"list-details-description-section\">\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"Description of the selected transaction@@transactions.details.label.description\"\n          data-role=\"section-title\"\n        >\n          Description\n        </div>\n        <div class=\"break-word\" data-role=\"section-content\">\n          {{ hostRef.transaction?.description }}\n        </div>\n      </div>\n\n      <!-- Original Description -->\n      <div\n        class=\"bb-block--md\"\n        *ngIf=\"hostRef.transaction?.originalDescription\"\n        data-role=\"list-details-original-description-section\"\n      >\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"Original description of the selected transaction@@transactions.details.label.originalDescription\"\n          data-role=\"section-title\"\n        >\n          Original description\n        </div>\n        <div class=\"break-word\" data-role=\"section-content\">\n          {{ hostRef.transaction?.originalDescription }}\n        </div>\n      </div>\n\n      <!-- Running balance -->\n      <div\n        class=\"bb-block--md\"\n        *ngIf=\"hostRef.transaction?.runningBalance\"\n        data-role=\"list-details-running-balance-section\"\n      >\n        <div\n          class=\"bb-text-bold\"\n          i18n=\"Running balance of the selected transaction@@transactions.details.label.runningBalance\"\n          data-role=\"section-title\"\n        >\n          Running balance\n        </div>\n        <div class=\"break-word\">\n          <bb-amount-ui\n            data-role=\"section-content\"\n            [currency]=\"hostRef.transaction?.transactionAmountCurrency?.currencyCode\"\n            [amount]=\"hostRef.transaction?.runningBalance\"\n          ></bb-amount-ui>\n        </div>\n      </div>\n    </div>\n\n    <!-- Check image -->\n    <ng-container *ngIf=\"hostRef?.transactionDetailsLoadingStatus?.checkImages !== hostRef.loadingStateEnum.notStarted\">\n      <ng-container\n        *ngIf=\"hostRef?.transactionDetailsLoadingStatus?.checkImages !== hostRef.loadingStateEnum.notLoaded\"\n      >\n        <div\n          class=\"bb-block--lg\"\n          *ngIf=\"hostRef.transaction && hostRef.transaction.checkImageAvailability === 'AVAILABLE'\"\n        >\n          <span\n            class=\"bb-text-bold\"\n            i18n=\"check images of the selected transaction@@transactions.details.label.check-img\"\n          >\n            Check images\n          </span>\n          <span>\n            <bb-icon-ui\n              class=\"bb-transactions-list-pending-header__tooltip\"\n              role=\"tooltip\"\n              name=\"info\"\n              size=\"sm\"\n              [bbTooltip]=\"tipContent\"\n              triggers=\"hover click\"\n              placement=\"right\"\n              bbAccessibilityKeyboard\n            ></bb-icon-ui>\n          </span>\n          <bb-transaction-check-image\n            [transaction]=\"hostRef.transaction\"\n            [checkImagesList]=\"hostRef.checkImagesList\"\n            [transactionDetailsLoadingStatus]=\"hostRef.transactionDetailsLoadingStatus\"\n          ></bb-transaction-check-image>\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <!-- Geo location -->\n    <div *ngIf=\"hostRef.transaction?.location\">\n      <div\n        class=\"bb-text-bold bb-block bb-block--sm\"\n        i18n=\"Geo location of the selected transaction@@transactions.details.label.geo-location\"\n      >\n        Location\n      </div>\n      <bb-transaction-geo-location-map\n        [transaction]=\"hostRef.transaction\"\n        [loadingStatus]=\"hostRef.transactionDetailsLoadingStatus?.geolocation\"\n      ></bb-transaction-geo-location-map>\n    </div>\n\n    <!-- Notes -->\n    <ng-container *ngIf=\"!!hostRef.isEditingNotes || !!hostRef.transaction.notes\">\n      <div class=\"bb-block bb-block--lg\"></div>\n      <div class=\"bb-transaction-list-item-detail-additional-info\">\n        <bb-transaction-notes\n          data-role=\"transaction-notes\"\n          [transaction]=\"hostRef.transaction\"\n          [isEditingNotes]=\"hostRef.isEditingNotes\"\n          [isSavingNotes]=\"hostRef.isSavingNotes\"\n          (isEditingNotesChange)=\"hostRef.isEditingNotes = $event; hostRef.isEditingNotesChange.emit($event)\"\n          (changeNotes)=\"hostRef.onChangeNotes($event)\"\n          (deleteNote)=\"hostRef.handleDelete($event)\"\n        ></bb-transaction-notes>\n      </div>\n    </ng-container>\n  </div>\n</ng-template>\n\n<!-- Delete note -->\n<bb-modal-ui [isOpen]=\"deleteNoteModalActive\" (cancel)=\"closeModal()\">\n  <ng-container bbTransactionsListConfirmationModalCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n</bb-modal-ui>\n\n<ng-template bbTransactionsListConfirmationModalCustomizable let-hostRef>\n  <div class=\"modal-header\">\n    <h2\n      id=\"modal-basic-title\"\n      class=\"modal-title\"\n      data-role=\"delete-note-modal-header\"\n      i18n=\"Delete note?|Delete note modal title@@transactions.list.note.delete.modal.title\"\n    >\n      Delete note?\n    </h2>\n  </div>\n\n  <div class=\"modal-body\">\n    <span\n      data-role=\"delete-note-modal-subHeader\"\n      i18n=\"Are you sure you want to delete this note?|Delete note info@@transactions.list.note.delete.modal.info\"\n    >\n      Are you sure you want to delete the attached note? Entered data will be lost.\n    </span>\n  </div>\n\n  <div class=\"modal-footer\">\n    <div class=\"bb-button-bar\">\n      <button\n        bbButton\n        color=\"danger\"\n        class=\"bb-button-bar__button\"\n        data-role=\"delete-note-modal-delete-button\"\n        (click)=\"hostRef.submitDeleteNote()\"\n        i18n=\"Delete note|Delete note button label@@transactions.list.note.delete.modal.delete.button\"\n      >\n        Delete note\n      </button>\n\n      <button\n        bbButton\n        color=\"link\"\n        class=\"bb-button-bar__button\"\n        data-role=\"delete-note-modal-cancel-button\"\n        (click)=\"hostRef.closeModal()\"\n        i18n=\"Cancel|Cancel button label@@transactions.list.note.confirmation.modal.cancel.button\"\n      >\n        Cancel\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #tipContent>\n  <div class=\"bb-text-align-left\">\n    <span i18n=\"Description inside a tooltip@@transactions.list.details.check-img.tooltip.description\">\n      Some images may not be available online if:\n    </span>\n    <ul>\n      <li i18n=\"Description scheduled maintenance@transactions.list.details.check-img.tooltip.description.point1\">\n        There is a scheduled maintenance in the Check Image Service.\n      </li>\n      <li i18n=\"Check deposited earlier@transactions.list.details.check-img.tooltip.description.point2\">\n        The check has been deposited earlier than 12 months ago.\n      </li>\n      <li i18n=\"Check deposited after 48 hours@transactions.list.details.check-img.tooltip.description.point3\">\n        The checks have been received or deposited within the past 48 hours.\n      </li>\n    </ul>\n  </div>\n</ng-template>\n\n<ng-template #loadingState>\n  <bb-loading-indicator-ui loaderSize=\"lg\"></bb-loading-indicator-ui>\n</ng-template>\n"]}