{"version":3,"file":"transaction-detail-category.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-detail-category.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-detail-category.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,YAAY,EAAU,MAAM,eAAe,CAAC;AAC1F,OAAO,EAEL,wCAAwC,EAExC,mBAAmB,GACpB,MAAM,mCAAmC,CAAC;AAC3C,OAAO,EAAE,UAAU,EAAE,MAAM,+BAA+B,CAAC;;;;;;;;AAM3D,MAAM,OAAO,kCAAkC;IAqC7C,YAAoB,iCAA2E;QAA3E,sCAAiC,GAAjC,iCAAiC,CAA0C;QAnC5E,mBAAc,GAAG,IAAI,YAAY,EAAU,CAAC;QAK/D,YAAO,GAAG,IAAI,CAAC;QAEf,+BAA0B,GAAG,KAAK,CAAC;QAEnC,wBAAmB,GAAG,mBAAmB,CAAC;IA0BwD,CAAC;IAxBnG,QAAQ;QACN,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,WAAW,EAAE;YAC3C,MAAM,IAAI,KAAK,CAAC,uCAAuC,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,CAAC;SAClF;QACD,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,iCAAiC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACjG,CAAC;IAED,IAAI,aAAa;QACf,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,OAAO,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC;SAC3C;QAED,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,wBAAwB;QACtB,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;IACzC,CAAC;IAED,yBAAyB,CAAC,oBAA6B;QACrD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC/C,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;IAC1C,CAAC;;gIAnCU,kCAAkC;oHAAlC,kCAAkC,6MCb/C,s6DAmDA,kpBDKa,8CAA8C;4FA3C9C,kCAAkC;kBAJ9C,SAAS;mBAAC;oBACT,QAAQ,EAAE,gCAAgC;oBAC1C,WAAW,EAAE,4CAA4C;iBAC1D;+HAEU,WAAW;sBAAnB,KAAK;gBACa,cAAc;sBAAhC,MAAM;gBAIE,qBAAqB;sBAA7B,KAAK;;AAqCR,MAAM,OAAO,8CAA+C,SAAQ,UAGnE;;4IAHY,8CAA8C;gIAA9C,8CAA8C;4FAA9C,8CAA8C;kBAH1D,SAAS;mBAAC;oBACT,QAAQ,EAAE,2CAA2C;iBACtD","sourcesContent":["import { Component, Input, Directive, Output, EventEmitter, OnInit } from '@angular/core';\nimport {\n  Transaction,\n  TransactionsIconCategoriesFactoryService,\n  BaseTransactionIcon,\n  TransactionIconType,\n} from '@backbase/transactions-common-ang';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\n\n@Component({\n  selector: 'bb-transaction-detail-category',\n  templateUrl: 'transaction-detail-category.component.html',\n})\nexport class TransactionDetailCategoryComponent implements OnInit {\n  @Input() transaction: Transaction | undefined;\n  @Output() readonly categoryChange = new EventEmitter<string>();\n  /**\n   * Boolean that decides if the Change Category will be displayed.\n   */\n  @Input() displayChangeCategory: boolean | undefined;\n  hostRef = this;\n\n  isTransactionsCategoryOpen = false;\n  public transactionCategoryIcon: BaseTransactionIcon | undefined;\n  transactionIconType = TransactionIconType;\n\n  ngOnInit() {\n    if (typeof this.transaction === 'undefined') {\n      throw new Error(`\"transaction\" input is required in \"${this.constructor.name}\"`);\n    }\n    this.transactionCategoryIcon = this.transactionsIconCategoriesFactory.create(this.transaction);\n  }\n\n  get categoryTitle() {\n    if (this.transactionCategoryIcon) {\n      return this.transactionCategoryIcon.title;\n    }\n\n    return '';\n  }\n\n  openTransactionsCategory() {\n    this.isTransactionsCategoryOpen = true;\n  }\n\n  closeTransactionsCategory(categoryChangeStatus?: string) {\n    this.categoryChange.emit(categoryChangeStatus);\n    this.isTransactionsCategoryOpen = false;\n  }\n\n  constructor(private transactionsIconCategoriesFactory: TransactionsIconCategoriesFactoryService) {}\n}\n\n@Directive({\n  selector: '[bbTransactionDetailCategoryCustomizable]',\n})\nexport class TransactionDetailCategoryCustomizableDirective extends BbTemplate<\n  TransactionDetailCategoryComponent,\n  undefined\n> {}\n","<ng-container bbTransactionDetailCategoryCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n\n<ng-template bbTransactionDetailCategoryCustomizable let-hostRef>\n  <ng-container *ngIf=\"hostRef.displayChangeCategory && !hostRef.transaction.isPending\">\n    <ng-container *ngIf=\"hostRef.transactionCategoryIcon.type === transactionIconType.category; else fallbackCategory\">\n      <button\n        bbButton\n        class=\"bb-transaction-list-item-detail-header__category-badge\"\n        (click)=\"hostRef.openTransactionsCategory()\"\n        buttonSize=\"sm\"\n      >\n        <span data-role=\"list-details-category\">{{ hostRef.categoryTitle | bbCapitalizePipe }}</span>\n        <span>\n          <bb-icon-ui\n            class=\"bb-transactions-list-pending-header__tooltip\"\n            name=\"edit\"\n            size=\"sm\"\n            color=\"muted\"\n          ></bb-icon-ui>\n          <span\n            class=\"sr-only\"\n            i18n=\"Change transaction category|Change the category of a transaction@@transactions.details.changeCategory\"\n          >\n            Change category\n          </span>\n        </span>\n      </button>\n    </ng-container>\n    <ng-template #fallbackCategory>\n      <div\n        class=\"\n          bb-transaction-list-item-detail-header__category-badge-fallback\n          bb-transaction-list-item-detail-header__category-badge\n        \"\n      >\n        <span data-role=\"list-details-category\">{{ hostRef.categoryTitle | titlecase }}</span>\n      </div>\n    </ng-template>\n  </ng-container>\n\n  <bb-modal-ui\n    [isOpen]=\"hostRef.isTransactionsCategoryOpen\"\n    [modalOptions]=\"{ centered: true }\"\n    (cancel)=\"hostRef.closeTransactionsCategory()\"\n  >\n    <bb-transactions-categories\n      [transaction]=\"hostRef.transaction\"\n      (categoryChange)=\"hostRef.closeTransactionsCategory($event)\"\n    ></bb-transactions-categories>\n  </bb-modal-ui>\n</ng-template>\n"]}