{"version":3,"file":"transaction-header.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-header.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-list-widget/src/lib/components/transaction/transaction-header.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAU,KAAK,EAAE,MAAM,eAAe,CAAC;AACzD,OAAO,EAEL,wCAAwC,GAEzC,MAAM,mCAAmC,CAAC;;;;;;;AAM3C,MAAM,OAAO,0BAA0B;IAwErC,YAAoB,iCAA2E;QAA3E,sCAAiC,GAAjC,iCAAiC,CAA0C;QAnE/F;;WAEG;QACM,sBAAiB,GAAG,KAAK,CAAC;QACnC;;WAEG;QACM,YAAO,GAAG,IAAI,CAAC;IA4D0E,CAAC;IAzDnG;;;OAGG;IACH,IAAI,QAAQ;QACV,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,WAAW,EAAE;YAC3C,OAAO,EAAE,CAAC;SACX;QAED,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,OAAO,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC;SAC3C;QAED,OAAO,EAAE,CAAC;IACZ,CAAC;IAED;;;OAGG;IACH,IAAI,KAAK;QACP,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,OAAO,EAAE,CAAC;SACX;QAED,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE;YAC/D,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC;SACvC;aAAM;YACL,OAAO,IAAI,CAAC,WAAW,CAAC,gBAAgB,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,EAAE,CAAC;SAChF;IACH,CAAC;IAED,QAAQ;QACN,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,WAAW,EAAE;YAC3C,MAAM,IAAI,KAAK,CAAC,uCAAuC,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,CAAC;SAClF;QAED,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,iCAAiC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACjG,CAAC;IAED,YAAY;QACV,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;SACzD;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED,IAAY,WAAW;QACrB,OAAO,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;IACvD,CAAC;IAED,2GAA2G;IAC3G,eAAe,CAAC,KAAa;QAC3B,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;;wHAtEU,0BAA0B;4GAA1B,0BAA0B,6ICXvC,wiHA0FA;4FD/Ea,0BAA0B;kBAJtC,SAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,WAAW,EAAE,qCAAqC;iBACnD;+HAKU,WAAW;sBAAnB,KAAK;gBAIG,iBAAiB;sBAAzB,KAAK","sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\nimport {\n  Transaction,\n  TransactionsIconCategoriesFactoryService,\n  BaseTransactionIcon,\n} from '@backbase/transactions-common-ang';\n\n@Component({\n  selector: 'bb-transaction-header',\n  templateUrl: './transaction-header.component.html',\n})\nexport class TransactionHeaderComponent implements OnInit {\n  /**\n   * The transaction this component shows the header of.\n   */\n  @Input() transaction: Transaction | undefined;\n  /**\n   * Weather to show pending transactions on top or not.\n   */\n  @Input() showBillingStatus = false;\n  /**\n   * Reference to instance of customizable component.\n   */\n  readonly hostRef = this;\n  private transactionCategoryIcon: BaseTransactionIcon | undefined;\n\n  /**\n   * Subtitle to display - either the category of the transaction, or the type if the category is\n   * not available.\n   */\n  get subtitle() {\n    if (typeof this.transaction === 'undefined') {\n      return '';\n    }\n\n    if (this.transactionCategoryIcon) {\n      return this.transactionCategoryIcon.title;\n    }\n\n    return '';\n  }\n\n  /**\n   * Title to display - either the counter party name of the transaction, or the description if the\n   * name is not available.\n   */\n  get title() {\n    if (!this.transaction) {\n      return '';\n    }\n\n    if (this.transaction.merchant && this.transaction.merchant.name) {\n      return this.transaction.merchant.name;\n    } else {\n      return this.transaction.counterPartyName || this.transaction.description || '';\n    }\n  }\n\n  ngOnInit() {\n    if (typeof this.transaction === 'undefined') {\n      throw new Error(`\"transaction\" input is required in \"${this.constructor.name}\"`);\n    }\n\n    this.transactionCategoryIcon = this.transactionsIconCategoriesFactory.create(this.transaction);\n  }\n\n  showCategory() {\n    if (this.transaction) {\n      return this.transaction.isPending || !!this.ownCategory;\n    }\n\n    return false;\n  }\n\n  private get ownCategory(): string | undefined {\n    return this.transaction && this.transaction.category;\n  }\n\n  // TODO change this type from model to be number (jira -> https://backbase.atlassian.net/browse/TRANS-4722)\n  convertToNumber(value: string) {\n    return Number(value);\n  }\n\n  constructor(private transactionsIconCategoriesFactory: TransactionsIconCategoriesFactoryService) {}\n}\n","<div class=\"bb-transaction-header bb-stack w-auto row\">\n  <div class=\"bb-stack__item col-6\">\n    <div class=\"bb-stack\">\n      <!-- Category -->\n      <div class=\"bb-transaction-item-category bb-stack__item\">\n        <ng-container\n          *ngIf=\"\n            transaction?.billingStatus === 'UNBILLED' || transaction?.billingStatus === 'PENDING';\n            else transactionIcon\n          \"\n        >\n          <bb-icon-ui\n            name=\"watch-later\"\n            class=\"bb-transaction-category bb-transaction-category--pending\"\n            color=\"inactive\"\n            backgroundType=\"square\"\n          ></bb-icon-ui>\n        </ng-container>\n        <ng-template #transactionIcon>\n          <bb-transaction-category-icon\n            [transaction]=\"transaction\"\n            backgroundType=\"circle\"\n          ></bb-transaction-category-icon>\n        </ng-template>\n      </div>\n\n      <!-- Counter party, description -->\n      <div class=\"bb-transaction-item-description bb-stack__item\">\n        <div class=\"bb-transaction-item-description__title\">\n          {{ title | titlecase }}\n        </div>\n        <div class=\"bb-transaction-item-description__subtitle\">\n          {{ subtitle | titlecase }}\n        </div>\n        <div class=\"bb-text-disabled\">\n          {{ transaction?.account?.IBAN ? transaction?.account?.IBAN : transaction?.account?.BBAN }}\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"bb-stack__item col-6\">\n    <div class=\"bb-stack bb-transaction-list-header-amount\">\n      <div\n        class=\"bb-stack__item bb-stack__item--push-right bb-text-align-right bb-transaction-list-header-amount__wrapper\"\n      >\n        <div class=\"bb-stack bb-stack--wrap\">\n          <div class=\"bb-stack__item bb-stack__item--push-right\">\n            <div class=\"bb-stack bb-stack--wrap\">\n              <!-- Dispute status -->\n              <div\n                class=\"bb-stack__item bb-stack__item--push-right-lg-down bb-transaction-list-header-dispute-status-tag\"\n              >\n                <bb-dispute-status-tag [status]=\"hostRef.transaction?.disputeStatus\"></bb-dispute-status-tag>\n              </div>\n\n              <!-- Amount -->\n              <div\n                class=\"bb-stack__item bb-stack__item--push-right bb-transaction-list-header-amount__value\"\n                [ngClass]=\"{\n                  'bb-transaction-list-header-amount__value--credit':\n                    convertToNumber(transaction?.transactionAmountCurrency?.amount || '0') > 0\n                }\"\n              >\n                <bb-amount-ui\n                  [showPlusSign]=\"true\"\n                  [currency]=\"transaction?.transactionAmountCurrency?.currencyCode || ''\"\n                  [amount]=\"transaction?.transactionAmountCurrency?.amount || 0\"\n                ></bb-amount-ui>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div *ngIf=\"hostRef.transaction?.runningBalance\" class=\"bb-text-support text-small\">\n          <span class=\"sr-only\" i18n=\"Running Balance as of Transaction Date@@transactions.list.runningBalance\"\n            >Running balance</span\n          >\n          <bb-amount-ui\n            bbTooltip=\"Running balance\"\n            placement=\"left\"\n            triggers=\"hover\"\n            [currency]=\"transaction?.transactionAmountCurrency?.currencyCode || ''\"\n            [amount]=\"transaction?.runningBalance || 0\"\n          ></bb-amount-ui>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"]}