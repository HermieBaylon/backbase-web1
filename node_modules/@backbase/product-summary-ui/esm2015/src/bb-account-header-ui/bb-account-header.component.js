import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { AccountAliasDisplayingLevel, UserPreferencesValidationSettings, } from '@backbase/product-summary-common-ang';
import * as i0 from "@angular/core";
import * as i1 from "../bb-product-summary-account-logo-ui/bb-product-summary-account-logo.component";
import * as i2 from "@backbase/ui-ang/input-inline-edit";
import * as i3 from "../bb-product-number/product-number.component";
import * as i4 from "@backbase/ui-ang/amount";
import * as i5 from "@backbase/ui-ang/modal";
import * as i6 from "@angular/common";
import * as i7 from "@backbase/product-summary-common-ang";
/**
 *
 * @usageNotes
 *
 * ### Usage example
 * ```
 * <bb-account-header
 *   [product]="product"
 *   [canEditAlias]="true"
 *   [isBalanceTypeVisible]="true"
 *   [mapCurrency]="true"
 * ></bb-account-header>
 * ```
 *
 * @NgModule AccountHeaderModule
 */
export class AccountHeaderComponent {
    constructor() {
        /**
         * Localisation for aliasHelpText
         */
        this.aliasHelpTextLocalization = {
            ACCOUNT: $localize `:This is visible to the whole company|Subtitle. Alias account visibility level@@product-summary-account-details-header.alias-visibility-level.account:This is visible to the whole company`,
            USER: $localize `:This is only visible to you|Subtitle. Alias user visibility level@@product-summary-account-details-header.alias-visibility-level.user:This is only visible to you`,
        };
        /**
         * Defines if alias can be edited
         */
        this.canEditAlias = false;
        /**
         * Defines visibility level of the account alis.
         *
         * @default 'USER'
         */
        this.aliasLevel = AccountAliasDisplayingLevel.USER;
        /**
         * Defines visibility of the balance.
         *
         * @default true
         */
        this.showBalance = true;
        /**
         * Defines visibility of the balance type.
         *
         * @default true
         */
        this.isBalanceTypeVisible = true;
        /**
         * Defines visibility of the logo
         *
         * @default true
         */
        this.isLogoVisible = true;
        /**
         * Whether currency local should be transformed to symbol.
         *
         * @default false.
         */
        this.mapCurrency = false;
        /**
         * Event (Output) that emits when item alias is changed
         */
        this.aliasUpdated = new EventEmitter();
        /**
         * Copy of product.displayName to be displayed and edited
         *
         * @default ""
         */
        this.displayName = '';
        /**
         * Flag to manage "confirm alias update" modal
         *
         * @default false
         */
        this.isVisibleAliasModal = false;
        /**
         * Maximum length of product item aliases
         *
         * @default UserPreferencesValidationSettings.ALIAS_MAX_LENGTH (50)
         */
        this.aliasMaxLength = UserPreferencesValidationSettings.ALIAS_MAX_LENGTH;
        /**
         * Options for the alias modal window
         */
        this.modalOptions = {
            centered: true,
            backdrop: 'static',
        };
    }
    /**
     * Product type data to display account info
     *
     * @default undefined
     */
    set product(value) {
        this.setDisplayName((value === null || value === void 0 ? void 0 : value.displayName) || '');
        this._product = value;
    }
    get product() {
        return this._product;
    }
    /**
     * Indicates whether the account alias is being edited
     */
    get aliasEditMode() {
        var _a;
        return !!this.accountAliasEditor && ((_a = this.accountAliasEditor) === null || _a === void 0 ? void 0 : _a.editMode);
    }
    /**
     * Event handler for the `accept` event of `bb-input-inline-edit-ui`
     * if `alias` is empty - emits `aliasUpdated`
     * if `alias` isn't empty and differ to previous value - opens a confirmation modal
     *
     * @param alias
     */
    onAliasEdit(alias) {
        var _a;
        if (alias === '') {
            this.updateAlias(alias);
        }
        else if (alias !== ((_a = this._product) === null || _a === void 0 ? void 0 : _a.displayName)) {
            this.displayName = alias;
            if (this.aliasLevel === AccountAliasDisplayingLevel.USER) {
                this.updateAlias(this.displayName);
            }
            if (this.aliasLevel === AccountAliasDisplayingLevel.ACCOUNT) {
                this.isVisibleAliasModal = true;
            }
        }
    }
    /**
     * Event handler for the `confirm` event of `bb-modal-ui`
     * closes the modal and sets previous `displayName`
     */
    onModalConfirm() {
        this.updateAlias(this.displayName);
    }
    /**
     * Event handler for the `cancel` event of `bb-modal-ui`
     * closes the modal and sets previous `displayName`
     */
    onModalCancel() {
        var _a;
        this.closeEditAliasModal();
        this.setDisplayName(((_a = this.product) === null || _a === void 0 ? void 0 : _a.displayName) || '');
    }
    /**
     * Closes the alias modal
     *
     * @private
     */
    closeEditAliasModal() {
        this.isVisibleAliasModal = false;
    }
    /**
     * Sets the passed value to the inline editor
     *
     * @param value
     * @private
     */
    setDisplayName(value) {
        var _a;
        this.displayName = value;
        if (this.accountAliasEditor) {
            this.accountAliasEditor.writeValue(this.displayName);
            (_a = this.accountAliasEditor.vForm) === null || _a === void 0 ? void 0 : _a.controls.inputInline.setValue(this.displayName);
        }
    }
    /**
     * Emits the passed alias to `aliasUpdated`
     *
     * @param alias
     * @private
     */
    updateAlias(alias) {
        this.aliasUpdated.emit(alias);
        this.closeEditAliasModal();
    }
}
AccountHeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: AccountHeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
AccountHeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: AccountHeaderComponent, selector: "bb-account-header", inputs: { product: "product", canEditAlias: "canEditAlias", aliasLevel: "aliasLevel", showBalance: "showBalance", isBalanceTypeVisible: "isBalanceTypeVisible", isLogoVisible: "isLogoVisible", mapCurrency: "mapCurrency" }, outputs: { aliasUpdated: "aliasUpdated" }, viewQueries: [{ propertyName: "accountAliasEditor", first: true, predicate: ["accountAliasEditor"], descendants: true }], ngImport: i0, template: "<ng-container *ngIf=\"product\">\n  <div class=\"bb-account-header bb-stack bb-stack--wrap bb-stack--align-top\"\n       data-role=\"account-header\"\n  >\n    <div class=\"bb-stack__item bb-stack__item--fill bb-stack\">\n      <bb-product-summary-account-logo\n        *ngIf=\"isLogoVisible && !aliasEditMode\"\n        class=\"bb-stack__item\"\n        data-role=\"account-header-logo\"\n        iconColor=\"secondary\"\n        iconSize=\"md\"\n        [logoSrc]=\"product?.financialInstitution?.logo\"\n        [productKindName]=\"product.productKindName\"></bb-product-summary-account-logo>\n\n      <div class=\"bb-stack__item bb-stack__item--fill\">\n        <div\n          class=\"bb-account-header__title\"\n          data-role=\"account-header-title\"\n          [ngClass]=\"{\n          'bb-heading-3': !aliasEditMode,\n          'bb-block bb-block--xs': !aliasEditMode,\n          'bb-account-header__title--display-mode': !aliasEditMode\n        }\">\n          <div\n            *ngIf=\"product.financialInstitutionId | bbIsDefined\"\n            data-role=\"account-header-external-account-name\"\n          >\n            <span class=\"bb-stack__item bb-text-support bb-subtitle bb-text-bold\"\n                  data-role=\"account-header-external-bank-name\"\n                  *ngIf=\"product?.financialInstitution?.name; else externalBankNameDefault\">\n              {{product?.financialInstitution?.name}}\n            </span>\n            <ng-template #externalBankNameDefault>\n              <span class=\"bb-stack__item bb-text-support bb-subtitle bb-text-bold\"\n                    data-role=\"account-header-external-default-name\"\n                    i18n=\"External account|Default bank name for external accounts@@manage.account.item\">\n                External account\n              </span>\n            </ng-template>\n          </div>\n          <bb-input-inline-edit-ui\n            #accountAliasEditor\n            *ngIf=\"canEditAlias; else staticAccountAlias\"\n            [inputText]=\"displayName\"\n            [maxLength]=\"aliasMaxLength\"\n            [required]=\"false\"\n            (accept)=\"onAliasEdit($event)\"\n            ariaLabelEdit=\"Edit alias for {{displayName}}\"\n            i18n-ariaLabelEdit=\"Edit alias|Inline editor aria label\n          @@product-summary-account-details-header.edit-account-alias.aria-label\"\n            [hint]=\"aliasHelpTextLocalization[aliasLevel]\"\n          ></bb-input-inline-edit-ui>\n\n          <ng-template #staticAccountAlias>\n            {{ product?.displayName }}\n          </ng-template>\n        </div>\n        <bb-product-number\n          *ngIf=\"!aliasEditMode\"\n          class=\"bb-text-support bb-subtitle\"\n          data-role=\"account-header-number\"\n          [product]=\"product\"\n        ></bb-product-number>\n      </div>\n    </div>\n    <div class=\"bb-stack__break bb-stack__break--sm-down bb-block bb-block--md\"\n         *ngIf=\"showBalance && (product.availableBalance | bbIsDefined)\"\n    ></div>\n    <div class=\"bb-stack__item text-right bb-stack__item--push-right\"\n         *ngIf=\"showBalance && (product.availableBalance | bbIsDefined)\"\n         data-role=\"account-header-balance\">\n      <div class=\"bb-block bb-block--sm bb-text-support bb-subtitle\"\n           *ngIf=\"isBalanceTypeVisible\"\n           i18n=\"Available Balance|Available Balance label\n              @@account.details.current.account.label.availableBalance\"\n           data-role=\"account-header-balance-label\">\n        Available balance\n      </div>\n      <bb-amount-ui data-role=\"account-header-balance-value\"\n                    [ngClass]=\"{\n                      'bb-heading-1': !isBalanceTypeVisible,\n                      'bb-heading-2': isBalanceTypeVisible\n                    }\"\n                    [currency]=\"product.currency\"\n                    [amount]=\"product.availableBalance\"\n                    [mapCurrency]=\"mapCurrency\">\n      </bb-amount-ui>\n    </div>\n  </div>\n</ng-container>\n\n<bb-modal-ui\n        [isOpen]=\"isVisibleAliasModal\"\n        (cancel)=\"onModalCancel()\"\n        (confirm)=\"onModalConfirm()\"\n        [modalOptions]=\"modalOptions\"\n        data-role=\"account-header-modal\"\n>\n  <bb-modal-header-ui\n          title=\"This alias will be visible to users who have access to this account\"\n          i18n-title=\"This alias will be visible to users who have access to this account\n                    |Modal window title: update alias for all users\n                    @@product-summary-account-header.modal.title.update-account-alias\"\n  ></bb-modal-header-ui>\n\n  <bb-modal-body-ui>\n    <ng-template\n            bbCustomModalBody\n            i18n=\"Are you sure to change the account alias?\n              |Modal window body: update account alias\n              @@product-summary-account-header.modal.body.update-account-alias\"\n    >\n      Are you sure to change the account alias?\n    </ng-template>\n  </bb-modal-body-ui>\n\n  <bb-modal-footer-ui\n          confirmText=\"Continue\"\n          i18n-confirmText=\"Continue|Modal window confirm alias update button\n            @@product-summary-account-header.modal.button.confirm-update-alias\"\n          cancelText=\"Cancel\"\n          i18n-cancelText=\"Cancel|Modal window cancel alias update button\n            @@product-summary-account-header.modal.button.cancel-update-alias\"\n  ></bb-modal-footer-ui>\n</bb-modal-ui>\n", components: [{ type: i1.ProductSummaryAccountLogoComponent, selector: "bb-product-summary-account-logo", inputs: ["logoSrc", "productKindName", "defaultProductKindName", "iconColor", "iconSize", "logoSize"] }, { type: i2.InputInlineEditComponent, selector: "bb-input-inline-edit-ui", inputs: ["state", "canEdit", "hasLoadingState", "inputInlineTemplate", "inputText", "maxLength", "minLength", "maxValue", "minValue", "autofocus", "ariaLabelAccept", "ariaLabelCancel", "ariaLabelEdit", "tooltipAccept", "tooltipCancel", "tooltipEdit", "autocomplete", "pattern", "hint"], outputs: ["stateChange", "cancel", "accept"] }, { type: i3.ProductNumberComponent, selector: "bb-product-number", inputs: ["number", "product", "format", "type", "unmaskable", "masked"], outputs: ["mask", "unmask"] }, { type: i4.AmountComponent, selector: "bb-amount-ui", inputs: ["currency", "showPlusSign", "mapCurrency", "showPercent", "abbreviate", "decimalPlaces", "trailingZeroes", "amount"] }, { type: i5.ModalComponent, selector: "bb-modal-ui", inputs: ["isOpen", "aria-labelledby", "aria-describedby", "modalOptions"], outputs: ["confirm", "cancel", "isOpenChange"] }, { type: i5.ModalHeaderComponent, selector: "bb-modal-header-ui", inputs: ["title"], outputs: ["close"] }, { type: i5.ModalBodyComponent, selector: "bb-modal-body-ui" }, { type: i5.ModalFooterComponent, selector: "bb-modal-footer-ui", inputs: ["confirmText", "cancelText"], outputs: ["confirm", "cancel"] }], directives: [{ type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i5.CustomModalBodyDirective, selector: "ng-template[bbCustomModalBody]" }], pipes: { "bbIsDefined": i7.IsDefinedPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: AccountHeaderComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-account-header',
                    templateUrl: './bb-account-header.component.html',
                }]
        }], propDecorators: { product: [{
                type: Input
            }], canEditAlias: [{
                type: Input
            }], aliasLevel: [{
                type: Input
            }], showBalance: [{
                type: Input
            }], isBalanceTypeVisible: [{
                type: Input
            }], isLogoVisible: [{
                type: Input
            }], mapCurrency: [{
                type: Input
            }], aliasUpdated: [{
                type: Output
            }], accountAliasEditor: [{
                type: ViewChild,
                args: ['accountAliasEditor']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmItYWNjb3VudC1oZWFkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wcm9kdWN0LXN1bW1hcnktdWkvc3JjL2JiLWFjY291bnQtaGVhZGVyLXVpL2JiLWFjY291bnQtaGVhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcHJvZHVjdC1zdW1tYXJ5LXVpL3NyYy9iYi1hY2NvdW50LWhlYWRlci11aS9iYi1hY2NvdW50LWhlYWRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVsRixPQUFPLEVBQ0wsMkJBQTJCLEVBRTNCLGlDQUFpQyxHQUNsQyxNQUFNLHNDQUFzQyxDQUFDOzs7Ozs7Ozs7QUFFOUM7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBS0gsTUFBTSxPQUFPLHNCQUFzQjtJQUpuQztRQUtFOztXQUVHO1FBQ00sOEJBQXlCLEdBQUc7WUFDbkMsT0FBTyxFQUFFLFNBQVMsQ0FBQSw0TEFBNEw7WUFDOU0sSUFBSSxFQUFFLFNBQVMsQ0FBQSxvS0FBb0s7U0FDcEwsQ0FBQztRQWVGOztXQUVHO1FBQ00saUJBQVksR0FBRyxLQUFLLENBQUM7UUFDOUI7Ozs7V0FJRztRQUVILGVBQVUsR0FBRywyQkFBMkIsQ0FBQyxJQUFJLENBQUM7UUFDOUM7Ozs7V0FJRztRQUVILGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ25COzs7O1dBSUc7UUFFSCx5QkFBb0IsR0FBRyxJQUFJLENBQUM7UUFDNUI7Ozs7V0FJRztRQUVILGtCQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3JCOzs7O1dBSUc7UUFFSCxnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUNwQjs7V0FFRztRQUNPLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVB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U0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsbUJBQW1CO29CQUM3QixXQUFXLEVBQUUsb0NBQW9DO2lCQUNsRDs4QkFlSyxPQUFPO3NCQURWLEtBQUs7Z0JBWUcsWUFBWTtzQkFBcEIsS0FBSztnQkFPTixVQUFVO3NCQURULEtBQUs7Z0JBUU4sV0FBVztzQkFEVixLQUFLO2dCQVFOLG9CQUFvQjtzQkFEbkIsS0FBSztnQkFRTixhQUFhO3NCQURaLEtBQUs7Z0JBUU4sV0FBVztzQkFEVixLQUFLO2dCQUtJLFlBQVk7c0JBQXJCLE1BQU07Z0JBaUMyQyxrQkFBa0I7c0JBQW5FLFNBQVM7dUJBQUMsb0JBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSW5wdXRJbmxpbmVFZGl0Q29tcG9uZW50IH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9pbnB1dC1pbmxpbmUtZWRpdCc7XG5pbXBvcnQge1xuICBBY2NvdW50QWxpYXNEaXNwbGF5aW5nTGV2ZWwsXG4gIEFjY291bnRBcnJhbmdlbWVudEl0ZW0sXG4gIFVzZXJQcmVmZXJlbmNlc1ZhbGlkYXRpb25TZXR0aW5ncyxcbn0gZnJvbSAnQGJhY2tiYXNlL3Byb2R1Y3Qtc3VtbWFyeS1jb21tb24tYW5nJztcblxuLyoqXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqXG4gKiAjIyMgVXNhZ2UgZXhhbXBsZVxuICogYGBgXG4gKiA8YmItYWNjb3VudC1oZWFkZXJcbiAqICAgW3Byb2R1Y3RdPVwicHJvZHVjdFwiXG4gKiAgIFtjYW5FZGl0QWxpYXNdPVwidHJ1ZVwiXG4gKiAgIFtpc0JhbGFuY2VUeXBlVmlzaWJsZV09XCJ0cnVlXCJcbiAqICAgW21hcEN1cnJlbmN5XT1cInRydWVcIlxuICogPjwvYmItYWNjb3VudC1oZWFkZXI+XG4gKiBgYGBcbiAqXG4gKiBATmdNb2R1bGUgQWNjb3VudEhlYWRlck1vZHVsZVxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1hY2NvdW50LWhlYWRlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9iYi1hY2NvdW50LWhlYWRlci5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEFjY291bnRIZWFkZXJDb21wb25lbnQge1xuICAvKipcbiAgICogTG9jYWxpc2F0aW9uIGZvciBhbGlhc0hlbHBUZXh0XG4gICAqL1xuICByZWFkb25seSBhbGlhc0hlbHBUZXh0TG9jYWxpemF0aW9uID0ge1xuICAgIEFDQ09VTlQ6ICRsb2NhbGl6ZWA6VGhpcyBpcyB2aXNpYmxlIHRvIHRoZSB3aG9sZSBjb21wYW55fFN1YnRpdGxlLiBBbGlhcyBhY2NvdW50IHZpc2liaWxpdHkgbGV2ZWxAQHByb2R1Y3Qtc3VtbWFyeS1hY2NvdW50LWRldGFpbHMtaGVhZGVyLmFsaWFzLXZpc2liaWxpdHktbGV2ZWwuYWNjb3VudDpUaGlzIGlzIHZpc2libGUgdG8gdGhlIHdob2xlIGNvbXBhbnlgLFxuICAgIFVTRVI6ICRsb2NhbGl6ZWA6VGhpcyBpcyBvbmx5IHZpc2libGUgdG8geW91fFN1YnRpdGxlLiBBbGlhcyB1c2VyIHZpc2liaWxpdHkgbGV2ZWxAQHByb2R1Y3Qtc3VtbWFyeS1hY2NvdW50LWRldGFpbHMtaGVhZGVyLmFsaWFzLXZpc2liaWxpdHktbGV2ZWwudXNlcjpUaGlzIGlzIG9ubHkgdmlzaWJsZSB0byB5b3VgLFxuICB9O1xuICAvKipcbiAgICogUHJvZHVjdCB0eXBlIGRhdGEgdG8gZGlzcGxheSBhY2NvdW50IGluZm9cbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAqL1xuICBASW5wdXQoKVxuICBzZXQgcHJvZHVjdCh2YWx1ZTogQWNjb3VudEFycmFuZ2VtZW50SXRlbSB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0RGlzcGxheU5hbWUodmFsdWU/LmRpc3BsYXlOYW1lIHx8ICcnKTtcbiAgICB0aGlzLl9wcm9kdWN0ID0gdmFsdWU7XG4gIH1cblxuICBnZXQgcHJvZHVjdCgpOiBBY2NvdW50QXJyYW5nZW1lbnRJdGVtIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvZHVjdDtcbiAgfVxuICAvKipcbiAgICogRGVmaW5lcyBpZiBhbGlhcyBjYW4gYmUgZWRpdGVkXG4gICAqL1xuICBASW5wdXQoKSBjYW5FZGl0QWxpYXMgPSBmYWxzZTtcbiAgLyoqXG4gICAqIERlZmluZXMgdmlzaWJpbGl0eSBsZXZlbCBvZiB0aGUgYWNjb3VudCBhbGlzLlxuICAgKlxuICAgKiBAZGVmYXVsdCAnVVNFUidcbiAgICovXG4gIEBJbnB1dCgpXG4gIGFsaWFzTGV2ZWwgPSBBY2NvdW50QWxpYXNEaXNwbGF5aW5nTGV2ZWwuVVNFUjtcbiAgLyoqXG4gICAqIERlZmluZXMgdmlzaWJpbGl0eSBvZiB0aGUgYmFsYW5jZS5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgQElucHV0KClcbiAgc2hvd0JhbGFuY2UgPSB0cnVlO1xuICAvKipcbiAgICogRGVmaW5lcyB2aXNpYmlsaXR5IG9mIHRoZSBiYWxhbmNlIHR5cGUuXG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIEBJbnB1dCgpXG4gIGlzQmFsYW5jZVR5cGVWaXNpYmxlID0gdHJ1ZTtcbiAgLyoqXG4gICAqIERlZmluZXMgdmlzaWJpbGl0eSBvZiB0aGUgbG9nb1xuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBASW5wdXQoKVxuICBpc0xvZ29WaXNpYmxlID0gdHJ1ZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgY3VycmVuY3kgbG9jYWwgc2hvdWxkIGJlIHRyYW5zZm9ybWVkIHRvIHN5bWJvbC5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2UuXG4gICAqL1xuICBASW5wdXQoKVxuICBtYXBDdXJyZW5jeSA9IGZhbHNlO1xuICAvKipcbiAgICogRXZlbnQgKE91dHB1dCkgdGhhdCBlbWl0cyB3aGVuIGl0ZW0gYWxpYXMgaXMgY2hhbmdlZFxuICAgKi9cbiAgQE91dHB1dCgpIGFsaWFzVXBkYXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICAvKipcbiAgICogQ29weSBvZiBwcm9kdWN0LmRpc3BsYXlOYW1lIHRvIGJlIGRpc3BsYXllZCBhbmQgZWRpdGVkXG4gICAqXG4gICAqIEBkZWZhdWx0IFwiXCJcbiAgICovXG4gIGRpc3BsYXlOYW1lID0gJyc7XG4gIC8qKlxuICAgKiBGbGFnIHRvIG1hbmFnZSBcImNvbmZpcm0gYWxpYXMgdXBkYXRlXCIgbW9kYWxcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGlzVmlzaWJsZUFsaWFzTW9kYWwgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBhY2NvdW50IGFsaWFzIGlzIGJlaW5nIGVkaXRlZFxuICAgKi9cbiAgZ2V0IGFsaWFzRWRpdE1vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5hY2NvdW50QWxpYXNFZGl0b3IgJiYgdGhpcy5hY2NvdW50QWxpYXNFZGl0b3I/LmVkaXRNb2RlO1xuICB9XG4gIC8qKlxuICAgKiBNYXhpbXVtIGxlbmd0aCBvZiBwcm9kdWN0IGl0ZW0gYWxpYXNlc1xuICAgKlxuICAgKiBAZGVmYXVsdCBVc2VyUHJlZmVyZW5jZXNWYWxpZGF0aW9uU2V0dGluZ3MuQUxJQVNfTUFYX0xFTkdUSCAoNTApXG4gICAqL1xuICByZWFkb25seSBhbGlhc01heExlbmd0aCA9IFVzZXJQcmVmZXJlbmNlc1ZhbGlkYXRpb25TZXR0aW5ncy5BTElBU19NQVhfTEVOR1RIO1xuICAvKipcbiAgICogT3B0aW9ucyBmb3IgdGhlIGFsaWFzIG1vZGFsIHdpbmRvd1xuICAgKi9cbiAgcmVhZG9ubHkgbW9kYWxPcHRpb25zID0ge1xuICAgIGNlbnRlcmVkOiB0cnVlLFxuICAgIGJhY2tkcm9wOiAnc3RhdGljJyxcbiAgfTtcblxuICBAVmlld0NoaWxkKCdhY2NvdW50QWxpYXNFZGl0b3InKSBwcml2YXRlIHJlYWRvbmx5IGFjY291bnRBbGlhc0VkaXRvcjogSW5wdXRJbmxpbmVFZGl0Q29tcG9uZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Byb2R1Y3Q6IEFjY291bnRBcnJhbmdlbWVudEl0ZW0gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBgYWNjZXB0YCBldmVudCBvZiBgYmItaW5wdXQtaW5saW5lLWVkaXQtdWlgXG4gICAqIGlmIGBhbGlhc2AgaXMgZW1wdHkgLSBlbWl0cyBgYWxpYXNVcGRhdGVkYFxuICAgKiBpZiBgYWxpYXNgIGlzbid0IGVtcHR5IGFuZCBkaWZmZXIgdG8gcHJldmlvdXMgdmFsdWUgLSBvcGVucyBhIGNvbmZpcm1hdGlvbiBtb2RhbFxuICAgKlxuICAgKiBAcGFyYW0gYWxpYXNcbiAgICovXG4gIG9uQWxpYXNFZGl0KGFsaWFzOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoYWxpYXMgPT09ICcnKSB7XG4gICAgICB0aGlzLnVwZGF0ZUFsaWFzKGFsaWFzKTtcbiAgICB9IGVsc2UgaWYgKGFsaWFzICE9PSB0aGlzLl9wcm9kdWN0Py5kaXNwbGF5TmFtZSkge1xuICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IGFsaWFzO1xuICAgICAgaWYgKHRoaXMuYWxpYXNMZXZlbCA9PT0gQWNjb3VudEFsaWFzRGlzcGxheWluZ0xldmVsLlVTRVIpIHtcbiAgICAgICAgdGhpcy51cGRhdGVBbGlhcyh0aGlzLmRpc3BsYXlOYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFsaWFzTGV2ZWwgPT09IEFjY291bnRBbGlhc0Rpc3BsYXlpbmdMZXZlbC5BQ0NPVU5UKSB7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlQWxpYXNNb2RhbCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgYGNvbmZpcm1gIGV2ZW50IG9mIGBiYi1tb2RhbC11aWBcbiAgICogY2xvc2VzIHRoZSBtb2RhbCBhbmQgc2V0cyBwcmV2aW91cyBgZGlzcGxheU5hbWVgXG4gICAqL1xuICBvbk1vZGFsQ29uZmlybSgpIHtcbiAgICB0aGlzLnVwZGF0ZUFsaWFzKHRoaXMuZGlzcGxheU5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBgY2FuY2VsYCBldmVudCBvZiBgYmItbW9kYWwtdWlgXG4gICAqIGNsb3NlcyB0aGUgbW9kYWwgYW5kIHNldHMgcHJldmlvdXMgYGRpc3BsYXlOYW1lYFxuICAgKi9cbiAgb25Nb2RhbENhbmNlbCgpIHtcbiAgICB0aGlzLmNsb3NlRWRpdEFsaWFzTW9kYWwoKTtcbiAgICB0aGlzLnNldERpc3BsYXlOYW1lKHRoaXMucHJvZHVjdD8uZGlzcGxheU5hbWUgfHwgJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgYWxpYXMgbW9kYWxcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgY2xvc2VFZGl0QWxpYXNNb2RhbCgpOiB2b2lkIHtcbiAgICB0aGlzLmlzVmlzaWJsZUFsaWFzTW9kYWwgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgcGFzc2VkIHZhbHVlIHRvIHRoZSBpbmxpbmUgZWRpdG9yXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBzZXREaXNwbGF5TmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5kaXNwbGF5TmFtZSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmFjY291bnRBbGlhc0VkaXRvcikge1xuICAgICAgdGhpcy5hY2NvdW50QWxpYXNFZGl0b3Iud3JpdGVWYWx1ZSh0aGlzLmRpc3BsYXlOYW1lKTtcbiAgICAgIHRoaXMuYWNjb3VudEFsaWFzRWRpdG9yLnZGb3JtPy5jb250cm9scy5pbnB1dElubGluZS5zZXRWYWx1ZSh0aGlzLmRpc3BsYXlOYW1lKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEVtaXRzIHRoZSBwYXNzZWQgYWxpYXMgdG8gYGFsaWFzVXBkYXRlZGBcbiAgICpcbiAgICogQHBhcmFtIGFsaWFzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUFsaWFzKGFsaWFzOiBzdHJpbmcpIHtcbiAgICB0aGlzLmFsaWFzVXBkYXRlZC5lbWl0KGFsaWFzKTtcbiAgICB0aGlzLmNsb3NlRWRpdEFsaWFzTW9kYWwoKTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cInByb2R1Y3RcIj5cbiAgPGRpdiBjbGFzcz1cImJiLWFjY291bnQtaGVhZGVyIGJiLXN0YWNrIGJiLXN0YWNrLS13cmFwIGJiLXN0YWNrLS1hbGlnbi10b3BcIlxuICAgICAgIGRhdGEtcm9sZT1cImFjY291bnQtaGVhZGVyXCJcbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tZmlsbCBiYi1zdGFja1wiPlxuICAgICAgPGJiLXByb2R1Y3Qtc3VtbWFyeS1hY2NvdW50LWxvZ29cbiAgICAgICAgKm5nSWY9XCJpc0xvZ29WaXNpYmxlICYmICFhbGlhc0VkaXRNb2RlXCJcbiAgICAgICAgY2xhc3M9XCJiYi1zdGFja19faXRlbVwiXG4gICAgICAgIGRhdGEtcm9sZT1cImFjY291bnQtaGVhZGVyLWxvZ29cIlxuICAgICAgICBpY29uQ29sb3I9XCJzZWNvbmRhcnlcIlxuICAgICAgICBpY29uU2l6ZT1cIm1kXCJcbiAgICAgICAgW2xvZ29TcmNdPVwicHJvZHVjdD8uZmluYW5jaWFsSW5zdGl0dXRpb24/LmxvZ29cIlxuICAgICAgICBbcHJvZHVjdEtpbmROYW1lXT1cInByb2R1Y3QucHJvZHVjdEtpbmROYW1lXCI+PC9iYi1wcm9kdWN0LXN1bW1hcnktYWNjb3VudC1sb2dvPlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tfX2l0ZW0gYmItc3RhY2tfX2l0ZW0tLWZpbGxcIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwiYmItYWNjb3VudC1oZWFkZXJfX3RpdGxlXCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJhY2NvdW50LWhlYWRlci10aXRsZVwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICdiYi1oZWFkaW5nLTMnOiAhYWxpYXNFZGl0TW9kZSxcbiAgICAgICAgICAnYmItYmxvY2sgYmItYmxvY2stLXhzJzogIWFsaWFzRWRpdE1vZGUsXG4gICAgICAgICAgJ2JiLWFjY291bnQtaGVhZGVyX190aXRsZS0tZGlzcGxheS1tb2RlJzogIWFsaWFzRWRpdE1vZGVcbiAgICAgICAgfVwiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICpuZ0lmPVwicHJvZHVjdC5maW5hbmNpYWxJbnN0aXR1dGlvbklkIHwgYmJJc0RlZmluZWRcIlxuICAgICAgICAgICAgZGF0YS1yb2xlPVwiYWNjb3VudC1oZWFkZXItZXh0ZXJuYWwtYWNjb3VudC1uYW1lXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJiLXN0YWNrX19pdGVtIGJiLXRleHQtc3VwcG9ydCBiYi1zdWJ0aXRsZSBiYi10ZXh0LWJvbGRcIlxuICAgICAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiYWNjb3VudC1oZWFkZXItZXh0ZXJuYWwtYmFuay1uYW1lXCJcbiAgICAgICAgICAgICAgICAgICpuZ0lmPVwicHJvZHVjdD8uZmluYW5jaWFsSW5zdGl0dXRpb24/Lm5hbWU7IGVsc2UgZXh0ZXJuYWxCYW5rTmFtZURlZmF1bHRcIj5cbiAgICAgICAgICAgICAge3twcm9kdWN0Py5maW5hbmNpYWxJbnN0aXR1dGlvbj8ubmFtZX19XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgI2V4dGVybmFsQmFua05hbWVEZWZhdWx0PlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJiLXN0YWNrX19pdGVtIGJiLXRleHQtc3VwcG9ydCBiYi1zdWJ0aXRsZSBiYi10ZXh0LWJvbGRcIlxuICAgICAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJhY2NvdW50LWhlYWRlci1leHRlcm5hbC1kZWZhdWx0LW5hbWVcIlxuICAgICAgICAgICAgICAgICAgICBpMThuPVwiRXh0ZXJuYWwgYWNjb3VudHxEZWZhdWx0IGJhbmsgbmFtZSBmb3IgZXh0ZXJuYWwgYWNjb3VudHNAQG1hbmFnZS5hY2NvdW50Lml0ZW1cIj5cbiAgICAgICAgICAgICAgICBFeHRlcm5hbCBhY2NvdW50XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGJiLWlucHV0LWlubGluZS1lZGl0LXVpXG4gICAgICAgICAgICAjYWNjb3VudEFsaWFzRWRpdG9yXG4gICAgICAgICAgICAqbmdJZj1cImNhbkVkaXRBbGlhczsgZWxzZSBzdGF0aWNBY2NvdW50QWxpYXNcIlxuICAgICAgICAgICAgW2lucHV0VGV4dF09XCJkaXNwbGF5TmFtZVwiXG4gICAgICAgICAgICBbbWF4TGVuZ3RoXT1cImFsaWFzTWF4TGVuZ3RoXCJcbiAgICAgICAgICAgIFtyZXF1aXJlZF09XCJmYWxzZVwiXG4gICAgICAgICAgICAoYWNjZXB0KT1cIm9uQWxpYXNFZGl0KCRldmVudClcIlxuICAgICAgICAgICAgYXJpYUxhYmVsRWRpdD1cIkVkaXQgYWxpYXMgZm9yIHt7ZGlzcGxheU5hbWV9fVwiXG4gICAgICAgICAgICBpMThuLWFyaWFMYWJlbEVkaXQ9XCJFZGl0IGFsaWFzfElubGluZSBlZGl0b3IgYXJpYSBsYWJlbFxuICAgICAgICAgIEBAcHJvZHVjdC1zdW1tYXJ5LWFjY291bnQtZGV0YWlscy1oZWFkZXIuZWRpdC1hY2NvdW50LWFsaWFzLmFyaWEtbGFiZWxcIlxuICAgICAgICAgICAgW2hpbnRdPVwiYWxpYXNIZWxwVGV4dExvY2FsaXphdGlvblthbGlhc0xldmVsXVwiXG4gICAgICAgICAgPjwvYmItaW5wdXQtaW5saW5lLWVkaXQtdWk+XG5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgI3N0YXRpY0FjY291bnRBbGlhcz5cbiAgICAgICAgICAgIHt7IHByb2R1Y3Q/LmRpc3BsYXlOYW1lIH19XG4gICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxiYi1wcm9kdWN0LW51bWJlclxuICAgICAgICAgICpuZ0lmPVwiIWFsaWFzRWRpdE1vZGVcIlxuICAgICAgICAgIGNsYXNzPVwiYmItdGV4dC1zdXBwb3J0IGJiLXN1YnRpdGxlXCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJhY2NvdW50LWhlYWRlci1udW1iZXJcIlxuICAgICAgICAgIFtwcm9kdWN0XT1cInByb2R1Y3RcIlxuICAgICAgICA+PC9iYi1wcm9kdWN0LW51bWJlcj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja19fYnJlYWsgYmItc3RhY2tfX2JyZWFrLS1zbS1kb3duIGJiLWJsb2NrIGJiLWJsb2NrLS1tZFwiXG4gICAgICAgICAqbmdJZj1cInNob3dCYWxhbmNlICYmIChwcm9kdWN0LmF2YWlsYWJsZUJhbGFuY2UgfCBiYklzRGVmaW5lZClcIlxuICAgID48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tfX2l0ZW0gdGV4dC1yaWdodCBiYi1zdGFja19faXRlbS0tcHVzaC1yaWdodFwiXG4gICAgICAgICAqbmdJZj1cInNob3dCYWxhbmNlICYmIChwcm9kdWN0LmF2YWlsYWJsZUJhbGFuY2UgfCBiYklzRGVmaW5lZClcIlxuICAgICAgICAgZGF0YS1yb2xlPVwiYWNjb3VudC1oZWFkZXItYmFsYW5jZVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1zbSBiYi10ZXh0LXN1cHBvcnQgYmItc3VidGl0bGVcIlxuICAgICAgICAgICAqbmdJZj1cImlzQmFsYW5jZVR5cGVWaXNpYmxlXCJcbiAgICAgICAgICAgaTE4bj1cIkF2YWlsYWJsZSBCYWxhbmNlfEF2YWlsYWJsZSBCYWxhbmNlIGxhYmVsXG4gICAgICAgICAgICAgIEBAYWNjb3VudC5kZXRhaWxzLmN1cnJlbnQuYWNjb3VudC5sYWJlbC5hdmFpbGFibGVCYWxhbmNlXCJcbiAgICAgICAgICAgZGF0YS1yb2xlPVwiYWNjb3VudC1oZWFkZXItYmFsYW5jZS1sYWJlbFwiPlxuICAgICAgICBBdmFpbGFibGUgYmFsYW5jZVxuICAgICAgPC9kaXY+XG4gICAgICA8YmItYW1vdW50LXVpIGRhdGEtcm9sZT1cImFjY291bnQtaGVhZGVyLWJhbGFuY2UtdmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgICAgICAgJ2JiLWhlYWRpbmctMSc6ICFpc0JhbGFuY2VUeXBlVmlzaWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAnYmItaGVhZGluZy0yJzogaXNCYWxhbmNlVHlwZVZpc2libGVcbiAgICAgICAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgICAgIFtjdXJyZW5jeV09XCJwcm9kdWN0LmN1cnJlbmN5XCJcbiAgICAgICAgICAgICAgICAgICAgW2Ftb3VudF09XCJwcm9kdWN0LmF2YWlsYWJsZUJhbGFuY2VcIlxuICAgICAgICAgICAgICAgICAgICBbbWFwQ3VycmVuY3ldPVwibWFwQ3VycmVuY3lcIj5cbiAgICAgIDwvYmItYW1vdW50LXVpPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctY29udGFpbmVyPlxuXG48YmItbW9kYWwtdWlcbiAgICAgICAgW2lzT3Blbl09XCJpc1Zpc2libGVBbGlhc01vZGFsXCJcbiAgICAgICAgKGNhbmNlbCk9XCJvbk1vZGFsQ2FuY2VsKClcIlxuICAgICAgICAoY29uZmlybSk9XCJvbk1vZGFsQ29uZmlybSgpXCJcbiAgICAgICAgW21vZGFsT3B0aW9uc109XCJtb2RhbE9wdGlvbnNcIlxuICAgICAgICBkYXRhLXJvbGU9XCJhY2NvdW50LWhlYWRlci1tb2RhbFwiXG4+XG4gIDxiYi1tb2RhbC1oZWFkZXItdWlcbiAgICAgICAgICB0aXRsZT1cIlRoaXMgYWxpYXMgd2lsbCBiZSB2aXNpYmxlIHRvIHVzZXJzIHdobyBoYXZlIGFjY2VzcyB0byB0aGlzIGFjY291bnRcIlxuICAgICAgICAgIGkxOG4tdGl0bGU9XCJUaGlzIGFsaWFzIHdpbGwgYmUgdmlzaWJsZSB0byB1c2VycyB3aG8gaGF2ZSBhY2Nlc3MgdG8gdGhpcyBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgIHxNb2RhbCB3aW5kb3cgdGl0bGU6IHVwZGF0ZSBhbGlhcyBmb3IgYWxsIHVzZXJzXG4gICAgICAgICAgICAgICAgICAgIEBAcHJvZHVjdC1zdW1tYXJ5LWFjY291bnQtaGVhZGVyLm1vZGFsLnRpdGxlLnVwZGF0ZS1hY2NvdW50LWFsaWFzXCJcbiAgPjwvYmItbW9kYWwtaGVhZGVyLXVpPlxuXG4gIDxiYi1tb2RhbC1ib2R5LXVpPlxuICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICAgYmJDdXN0b21Nb2RhbEJvZHlcbiAgICAgICAgICAgIGkxOG49XCJBcmUgeW91IHN1cmUgdG8gY2hhbmdlIHRoZSBhY2NvdW50IGFsaWFzP1xuICAgICAgICAgICAgICB8TW9kYWwgd2luZG93IGJvZHk6IHVwZGF0ZSBhY2NvdW50IGFsaWFzXG4gICAgICAgICAgICAgIEBAcHJvZHVjdC1zdW1tYXJ5LWFjY291bnQtaGVhZGVyLm1vZGFsLmJvZHkudXBkYXRlLWFjY291bnQtYWxpYXNcIlxuICAgID5cbiAgICAgIEFyZSB5b3Ugc3VyZSB0byBjaGFuZ2UgdGhlIGFjY291bnQgYWxpYXM/XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9iYi1tb2RhbC1ib2R5LXVpPlxuXG4gIDxiYi1tb2RhbC1mb290ZXItdWlcbiAgICAgICAgICBjb25maXJtVGV4dD1cIkNvbnRpbnVlXCJcbiAgICAgICAgICBpMThuLWNvbmZpcm1UZXh0PVwiQ29udGludWV8TW9kYWwgd2luZG93IGNvbmZpcm0gYWxpYXMgdXBkYXRlIGJ1dHRvblxuICAgICAgICAgICAgQEBwcm9kdWN0LXN1bW1hcnktYWNjb3VudC1oZWFkZXIubW9kYWwuYnV0dG9uLmNvbmZpcm0tdXBkYXRlLWFsaWFzXCJcbiAgICAgICAgICBjYW5jZWxUZXh0PVwiQ2FuY2VsXCJcbiAgICAgICAgICBpMThuLWNhbmNlbFRleHQ9XCJDYW5jZWx8TW9kYWwgd2luZG93IGNhbmNlbCBhbGlhcyB1cGRhdGUgYnV0dG9uXG4gICAgICAgICAgICBAQHByb2R1Y3Qtc3VtbWFyeS1hY2NvdW50LWhlYWRlci5tb2RhbC5idXR0b24uY2FuY2VsLXVwZGF0ZS1hbGlhc1wiXG4gID48L2JiLW1vZGFsLWZvb3Rlci11aT5cbjwvYmItbW9kYWwtdWk+XG4iXX0=