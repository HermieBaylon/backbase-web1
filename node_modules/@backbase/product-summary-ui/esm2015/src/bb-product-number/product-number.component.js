import { Component, Directive, Input, Output, EventEmitter } from '@angular/core';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { MaskableAttribute } from '@backbase/data-ang/arrangements';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/foundation-ang/core";
import * as i2 from "@backbase/ui-ang/icon";
import * as i3 from "@angular/common";
import * as i4 from "@backbase/ui-ang/button";
import * as i5 from "@backbase/ui-ang/tooltip-directive";
import * as i6 from "@backbase/product-summary-common-ang";
import * as i7 from "@backbase/ui-ang/account-number-pipe";
/**
 * Displays a formatted product number ('iban', 'bban' or 'cardNumber')
 *
 * @usageNotes
 *
 * ```html
 * <bb-product-number
 *    value='12345678'
 *    type='iban'
 * ></bb-product-number>
 * ```
 *
 * @ngModule ProductNumberModule
 */
export class ProductNumberComponent {
    /**
     * Constructor
     *
     * @param featuresService
     */
    constructor(featuresService) {
        this.featuresService = featuresService;
        this.hostRef = this;
        /**
         * A product that contains product number, a format will be picked automatically
         * Used when `number` unset
         */
        this.product = {};
        /**
         * Defines whether the attribute is unmaskable
         */
        this.unmaskable = false;
        /**
         * Defines whether the attribute is masked
         */
        this.masked = false;
        /**
         * Emits a `MaskableAttribute` to be masked
         */
        this.mask = new EventEmitter();
        /**
         * Emits a `MaskableAttribute` to be unmasked
         */
        this.unmask = new EventEmitter();
    }
    /**
     * Event handler for the `mask` button
     * Emits the `masked` output with a `MaskedAttribute`
     *
     * @param type
     */
    onMask(type) {
        this.mask.emit(this.mapToMaskableAttribute(type));
    }
    /**
     * Event handler for the `unmask` button
     * Emits the `unmasked` output with a `MaskedAttribute`
     *
     * @param type
     */
    onUnmask(type) {
        this.unmask.emit(this.mapToMaskableAttribute(type));
    }
    mapToMaskableAttribute(type) {
        switch (type) {
            case 'bban':
                return MaskableAttribute.BBAN;
            case 'iban':
                return MaskableAttribute.IBAN;
            default:
                return MaskableAttribute.Number;
        }
    }
}
ProductNumberComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductNumberComponent, deps: [{ token: i1.FeaturesService }], target: i0.ɵɵFactoryTarget.Component });
ProductNumberComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: ProductNumberComponent, selector: "bb-product-number", inputs: { number: "number", product: "product", format: "format", type: "type", unmaskable: "unmaskable", masked: "masked" }, outputs: { mask: "mask", unmask: "unmask" }, ngImport: i0, template: "<ng-container\n  bbProductNumberCustomizable\n  [bbHostRef]=\"hostRef\"\n  [bbTemplateContext]=\"{\n    productNumber: hostRef.number || (hostRef.product | bbProductNumberValue),\n    productType: hostRef.type || (hostRef.product | bbProductNumberType),\n    productFormat: hostRef.format\n  }\"\n></ng-container>\n\n<ng-template\n  bbProductNumberCustomizable\n  let-hostRef\n  let-productNumber=\"context.productNumber\"\n  let-productType=\"context.productType\"\n  let-productFormat=\"context.productFormat\"\n>\n  <span class=\"contextual-alternates-off\" data-role=\"product-number\">\n    {{ productNumber | bbAccountNumber:(productType || productFormat) }}\n  </span>\n  <ng-container *ngIf=\"hostRef.unmaskable\">\n    <button bbButton\n            *ngIf=\"hostRef.masked; else maskButton\"\n            triggers=\"hover focus\"\n            [bbTooltip]=\"unmaskButtonTooltip\"\n            aria-label=\"Unmask\"\n            i18n-aria-label=\"Unmask button@@product-summary-product-number.button-unmask-label\"\n            (click)=\"hostRef.onUnmask(productType)\"\n            buttonSize=\"sm\"\n            circle=\"true\"\n            color=\"link\"\n            type=\"button\"\n            data-role=\"product-number-unmask-button\">\n      <bb-icon-ui name=\"visibility\"></bb-icon-ui>\n    </button>\n    <ng-template #maskButton>\n      <button bbButton\n              triggers=\"hover focus\"\n              [bbTooltip]=\"maskButtonTooltip\"\n              aria-label=\"Mask\"\n              i18n-aria-label=\"Mask button@@product-summary-product-number.button-mask-label\"\n              (click)=\"hostRef.onMask(productType)\"\n              buttonSize=\"sm\"\n              circle=\"true\"\n              color=\"link\"\n              type=\"button\"\n              data-role=\"product-number-mask-button\">\n        <bb-icon-ui name=\"visibility-off\"></bb-icon-ui>\n      </button>\n    </ng-template>\n\n    <ng-template #unmaskButtonTooltip>\n      <ng-container [ngSwitch]=\"productType\">\n        <ng-container *ngSwitchCase=\"'iban'\"\n                      i18n=\"Unmask IBAN|Button to unmask IBAN@@product-summary-product-number.button-unmask-iban.tooltip\">\n          Unmask IBAN\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'bban'\"\n                      i18n=\"Unmask BBAN|Button to unmask BBAN@@product-summary-product-number.button-unmask-bban.tooltip\">\n          Unmask BBAN\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'cardNumber'\"\n                      i18n=\"Unmask number|Button to unmask card number@@product-summary-product-number.button-unmask-number.tooltip\">\n          Unmask number\n        </ng-container>\n        <ng-container *ngSwitchDefault\n                      i18n=\"Unmask|Button to unmask@@product-summary-product-number.button-unmask.tooltip\">\n          Unmask\n        </ng-container>\n      </ng-container>\n    </ng-template>\n\n    <ng-template #maskButtonTooltip>\n      <ng-container [ngSwitch]=\"productType\">\n        <ng-container *ngSwitchCase=\"'iban'\"\n                      i18n=\"Mask IBAN|Button to unmask IBAN@@product-summary-product-number.button-mask-iban.tooltip\">\n          Mask IBAN\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'bban'\"\n                      i18n=\"Mask BBAN|Button to unmask BBAN@@product-summary-product-number.button-mask-bban.tooltip\">\n          Mask BBAN\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'cardNumber'\"\n                      i18n=\"Mask  number|Button to unmask card number@@product-summary-product-number.button-mask-number.tooltip\">\n          Mask number\n        </ng-container>\n        <ng-container *ngSwitchDefault\n                      i18n=\"Mask|Button to unmask@@product-summary-product-number.button-mask.tooltip\">\n          Mask\n        </ng-container>\n      </ng-container>\n    </ng-template>\n  </ng-container>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i2.IconComponent; }), selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }], directives: [{ type: i0.forwardRef(function () { return ProductNumberCustomizableDirective; }), selector: "[bbProductNumberCustomizable]" }, { type: i0.forwardRef(function () { return i3.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i4.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i0.forwardRef(function () { return i5.TooltipDirective; }), selector: "[bbTooltip]", inputs: ["bbTooltip", "triggers"] }, { type: i0.forwardRef(function () { return i3.NgSwitch; }), selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i0.forwardRef(function () { return i3.NgSwitchCase; }), selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { type: i0.forwardRef(function () { return i3.NgSwitchDefault; }), selector: "[ngSwitchDefault]" }], pipes: { "bbProductNumberValue": i0.forwardRef(function () { return i6.ProductNumberValuePipe; }), "bbProductNumberType": i0.forwardRef(function () { return i6.ProductNumberTypePipe; }), "bbAccountNumber": i0.forwardRef(function () { return i7.AccountNumberPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductNumberComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-product-number',
                    templateUrl: 'product-number.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.FeaturesService }]; }, propDecorators: { number: [{
                type: Input
            }], product: [{
                type: Input
            }], format: [{
                type: Input
            }], type: [{
                type: Input
            }], unmaskable: [{
                type: Input
            }], masked: [{
                type: Input
            }], mask: [{
                type: Output
            }], unmask: [{
                type: Output
            }] } });
/**
 * This is an extension slot to be used for customizing the entire component
 *
 * @usageNotes
 *
 * ### Customize details
 *
 * ```html
 * <ng-template
 *   bbProductNumberCustomizable
 *   let-hostRef>
 *   Your custom template here
 * </ng-template>
 * ```
 *
 * @NgModule ProductNumberCustomizableDirective
 */
export class ProductNumberCustomizableDirective extends BbTemplate {
}
ProductNumberCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductNumberCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ProductNumberCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: ProductNumberCustomizableDirective, selector: "[bbProductNumberCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductNumberCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbProductNumberCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC1udW1iZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wcm9kdWN0LXN1bW1hcnktdWkvc3JjL2JiLXByb2R1Y3QtbnVtYmVyL3Byb2R1Y3QtbnVtYmVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcHJvZHVjdC1zdW1tYXJ5LXVpL3NyYy9iYi1wcm9kdWN0LW51bWJlci9wcm9kdWN0LW51bWJlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsRixPQUFPLEVBQUUsVUFBVSxFQUFtQixNQUFNLCtCQUErQixDQUFDO0FBRTVFLE9BQU8sRUFBc0IsaUJBQWlCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQzs7Ozs7Ozs7O0FBSXhGOzs7Ozs7Ozs7Ozs7O0dBYUc7QUFLSCxNQUFNLE9BQU8sc0JBQXNCO0lBc0NqQzs7OztPQUlHO0lBQ0gsWUFBNkIsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO1FBMUNwRCxZQUFPLEdBQUcsSUFBSSxDQUFDO1FBT3hCOzs7V0FHRztRQUNNLFlBQU8sR0FBaUMsRUFBRSxDQUFDO1FBU3BEOztXQUVHO1FBQ00sZUFBVSxHQUFHLEtBQUssQ0FBQztRQUM1Qjs7V0FFRztRQUNNLFdBQU0sR0FBRyxLQUFLLENBQUM7UUFDeEI7O1dBRUc7UUFDTyxTQUFJLEdBQW9DLElBQUksWUFBWSxFQUFxQixDQUFDO1FBQ3hGOztXQUVHO1FBQ08sV0FBTSxHQUFvQyxJQUFJLFlBQVksRUFBcUIsQ0FBQztJQU8xQixDQUFDO0lBQ2pFOzs7OztPQUtHO0lBQ0gsTUFBTSxDQUFDLElBQXVCO1FBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFDRDs7Ozs7T0FLRztJQUNILFFBQVEsQ0FBQyxJQUF1QjtRQUM5QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRU8sc0JBQXNCLENBQUMsSUFBdUI7UUFDcEQsUUFBUSxJQUFJLEVBQUU7WUFDWixLQUFLLE1BQU07Z0JBQ1QsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7WUFDaEMsS0FBSyxNQUFNO2dCQUNULE9BQU8saUJBQWlCLENBQUMsSUFBSSxDQUFDO1lBQ2hDO2dCQUNFLE9BQU8saUJBQWlCLENBQUMsTUFBTSxDQUFDO1NBQ25DO0lBQ0gsQ0FBQzs7b0hBeEVVLHNCQUFzQjt3R0FBdEIsc0JBQXNCLG9PQ3pCbkMsODNIQThGQSx1UUQwQmEsa0NBQWtDOzRGQS9GbEMsc0JBQXNCO2tCQUpsQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxtQkFBbUI7b0JBQzdCLFdBQVcsRUFBRSwrQkFBK0I7aUJBQzdDO3NHQVFVLE1BQU07c0JBQWQsS0FBSztnQkFLRyxPQUFPO3NCQUFmLEtBQUs7Z0JBSUcsTUFBTTtzQkFBZCxLQUFLO2dCQUlHLElBQUk7c0JBQVosS0FBSztnQkFJRyxVQUFVO3NCQUFsQixLQUFLO2dCQUlHLE1BQU07c0JBQWQsS0FBSztnQkFJSSxJQUFJO3NCQUFiLE1BQU07Z0JBSUcsTUFBTTtzQkFBZixNQUFNOztBQXVDVDs7Ozs7Ozs7Ozs7Ozs7OztHQWdCRztBQUlILE1BQU0sT0FBTyxrQ0FBbUMsU0FBUSxVQUE2Qzs7Z0lBQXhGLGtDQUFrQztvSEFBbEMsa0NBQWtDOzRGQUFsQyxrQ0FBa0M7a0JBSDlDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLCtCQUErQjtpQkFDMUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIERpcmVjdGl2ZSwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYlRlbXBsYXRlLCBGZWF0dXJlc1NlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvY29yZSc7XG5pbXBvcnQgeyBQcm9kdWN0IH0gZnJvbSAnQGJhY2tiYXNlL3Byb2R1Y3Qtc3VtbWFyeS1jb21tb24tYW5nJztcbmltcG9ydCB7IFByb2R1Y3RTdW1tYXJ5SXRlbSwgTWFza2FibGVBdHRyaWJ1dGUgfSBmcm9tICdAYmFja2Jhc2UvZGF0YS1hbmcvYXJyYW5nZW1lbnRzJztcbmltcG9ydCB7IEFjY291bnROdW1iZXJUeXBlIH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9hY2NvdW50LW51bWJlci1waXBlJztcbmltcG9ydCB7IFBheW1lbnRDYXJkTnVtYmVyRm9ybWF0IH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9wYXltZW50LWNhcmQtbnVtYmVyLXBpcGUnO1xuXG4vKipcbiAqIERpc3BsYXlzIGEgZm9ybWF0dGVkIHByb2R1Y3QgbnVtYmVyICgnaWJhbicsICdiYmFuJyBvciAnY2FyZE51bWJlcicpXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqXG4gKiBgYGBodG1sXG4gKiA8YmItcHJvZHVjdC1udW1iZXJcbiAqICAgIHZhbHVlPScxMjM0NTY3OCdcbiAqICAgIHR5cGU9J2liYW4nXG4gKiA+PC9iYi1wcm9kdWN0LW51bWJlcj5cbiAqIGBgYFxuICpcbiAqIEBuZ01vZHVsZSBQcm9kdWN0TnVtYmVyTW9kdWxlXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLXByb2R1Y3QtbnVtYmVyJyxcbiAgdGVtcGxhdGVVcmw6ICdwcm9kdWN0LW51bWJlci5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIFByb2R1Y3ROdW1iZXJDb21wb25lbnQge1xuICByZWFkb25seSBob3N0UmVmID0gdGhpcztcblxuICAvKipcbiAgICogQSBwcm9kdWN0IG51bWJlcixcbiAgICogVXNlIHdpdGggYHR5cGVgIHRvIHNwZWNpZnkgd2hpY2ggZm9ybWF0IHRvIHVzZVxuICAgKi9cbiAgQElucHV0KCkgbnVtYmVyOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBBIHByb2R1Y3QgdGhhdCBjb250YWlucyBwcm9kdWN0IG51bWJlciwgYSBmb3JtYXQgd2lsbCBiZSBwaWNrZWQgYXV0b21hdGljYWxseVxuICAgKiBVc2VkIHdoZW4gYG51bWJlcmAgdW5zZXRcbiAgICovXG4gIEBJbnB1dCgpIHByb2R1Y3Q6IFByb2R1Y3RTdW1tYXJ5SXRlbSB8IFByb2R1Y3QgPSB7fTtcbiAgLyoqXG4gICAqIEN1c3RvbSBwcm9kdWN0IG51bWJlciBmb3JtYXQsIHdpbGwgb3ZlcnJpZGUgZGVmYXVsdCBhcHAgbGV2ZWwgZm9ybWF0IGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIEBJbnB1dCgpIGZvcm1hdDogUGF5bWVudENhcmROdW1iZXJGb3JtYXQgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBQcm9kdWN0IG51bWJlciB0eXBlICgnYmJhbicsICdpYmFuJyBvciAnY2FyZE51bWJlcicpXG4gICAqL1xuICBASW5wdXQoKSB0eXBlOiBBY2NvdW50TnVtYmVyVHlwZSB8IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIERlZmluZXMgd2hldGhlciB0aGUgYXR0cmlidXRlIGlzIHVubWFza2FibGVcbiAgICovXG4gIEBJbnB1dCgpIHVubWFza2FibGUgPSBmYWxzZTtcbiAgLyoqXG4gICAqIERlZmluZXMgd2hldGhlciB0aGUgYXR0cmlidXRlIGlzIG1hc2tlZFxuICAgKi9cbiAgQElucHV0KCkgbWFza2VkID0gZmFsc2U7XG4gIC8qKlxuICAgKiBFbWl0cyBhIGBNYXNrYWJsZUF0dHJpYnV0ZWAgdG8gYmUgbWFza2VkXG4gICAqL1xuICBAT3V0cHV0KCkgbWFzazogRXZlbnRFbWl0dGVyPE1hc2thYmxlQXR0cmlidXRlPiA9IG5ldyBFdmVudEVtaXR0ZXI8TWFza2FibGVBdHRyaWJ1dGU+KCk7XG4gIC8qKlxuICAgKiBFbWl0cyBhIGBNYXNrYWJsZUF0dHJpYnV0ZWAgdG8gYmUgdW5tYXNrZWRcbiAgICovXG4gIEBPdXRwdXQoKSB1bm1hc2s6IEV2ZW50RW1pdHRlcjxNYXNrYWJsZUF0dHJpYnV0ZT4gPSBuZXcgRXZlbnRFbWl0dGVyPE1hc2thYmxlQXR0cmlidXRlPigpO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0gZmVhdHVyZXNTZXJ2aWNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGZlYXR1cmVzU2VydmljZTogRmVhdHVyZXNTZXJ2aWNlKSB7fVxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgdGhlIGBtYXNrYCBidXR0b25cbiAgICogRW1pdHMgdGhlIGBtYXNrZWRgIG91dHB1dCB3aXRoIGEgYE1hc2tlZEF0dHJpYnV0ZWBcbiAgICpcbiAgICogQHBhcmFtIHR5cGVcbiAgICovXG4gIG9uTWFzayh0eXBlOiBBY2NvdW50TnVtYmVyVHlwZSkge1xuICAgIHRoaXMubWFzay5lbWl0KHRoaXMubWFwVG9NYXNrYWJsZUF0dHJpYnV0ZSh0eXBlKSk7XG4gIH1cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBgdW5tYXNrYCBidXR0b25cbiAgICogRW1pdHMgdGhlIGB1bm1hc2tlZGAgb3V0cHV0IHdpdGggYSBgTWFza2VkQXR0cmlidXRlYFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZVxuICAgKi9cbiAgb25Vbm1hc2sodHlwZTogQWNjb3VudE51bWJlclR5cGUpIHtcbiAgICB0aGlzLnVubWFzay5lbWl0KHRoaXMubWFwVG9NYXNrYWJsZUF0dHJpYnV0ZSh0eXBlKSk7XG4gIH1cblxuICBwcml2YXRlIG1hcFRvTWFza2FibGVBdHRyaWJ1dGUodHlwZTogQWNjb3VudE51bWJlclR5cGUpOiBNYXNrYWJsZUF0dHJpYnV0ZSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdiYmFuJzpcbiAgICAgICAgcmV0dXJuIE1hc2thYmxlQXR0cmlidXRlLkJCQU47XG4gICAgICBjYXNlICdpYmFuJzpcbiAgICAgICAgcmV0dXJuIE1hc2thYmxlQXR0cmlidXRlLklCQU47XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTWFza2FibGVBdHRyaWJ1dGUuTnVtYmVyO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgaXMgYW4gZXh0ZW5zaW9uIHNsb3QgdG8gYmUgdXNlZCBmb3IgY3VzdG9taXppbmcgdGhlIGVudGlyZSBjb21wb25lbnRcbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICpcbiAqICMjIyBDdXN0b21pemUgZGV0YWlsc1xuICpcbiAqIGBgYGh0bWxcbiAqIDxuZy10ZW1wbGF0ZVxuICogICBiYlByb2R1Y3ROdW1iZXJDdXN0b21pemFibGVcbiAqICAgbGV0LWhvc3RSZWY+XG4gKiAgIFlvdXIgY3VzdG9tIHRlbXBsYXRlIGhlcmVcbiAqIDwvbmctdGVtcGxhdGU+XG4gKiBgYGBcbiAqXG4gKiBATmdNb2R1bGUgUHJvZHVjdE51bWJlckN1c3RvbWl6YWJsZURpcmVjdGl2ZVxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJQcm9kdWN0TnVtYmVyQ3VzdG9taXphYmxlXScsXG59KVxuZXhwb3J0IGNsYXNzIFByb2R1Y3ROdW1iZXJDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFByb2R1Y3ROdW1iZXJDb21wb25lbnQsIHVuZGVmaW5lZD4ge31cbiIsIjxuZy1jb250YWluZXJcbiAgYmJQcm9kdWN0TnVtYmVyQ3VzdG9taXphYmxlXG4gIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiXG4gIFtiYlRlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgcHJvZHVjdE51bWJlcjogaG9zdFJlZi5udW1iZXIgfHwgKGhvc3RSZWYucHJvZHVjdCB8IGJiUHJvZHVjdE51bWJlclZhbHVlKSxcbiAgICBwcm9kdWN0VHlwZTogaG9zdFJlZi50eXBlIHx8IChob3N0UmVmLnByb2R1Y3QgfCBiYlByb2R1Y3ROdW1iZXJUeXBlKSxcbiAgICBwcm9kdWN0Rm9ybWF0OiBob3N0UmVmLmZvcm1hdFxuICB9XCJcbj48L25nLWNvbnRhaW5lcj5cblxuPG5nLXRlbXBsYXRlXG4gIGJiUHJvZHVjdE51bWJlckN1c3RvbWl6YWJsZVxuICBsZXQtaG9zdFJlZlxuICBsZXQtcHJvZHVjdE51bWJlcj1cImNvbnRleHQucHJvZHVjdE51bWJlclwiXG4gIGxldC1wcm9kdWN0VHlwZT1cImNvbnRleHQucHJvZHVjdFR5cGVcIlxuICBsZXQtcHJvZHVjdEZvcm1hdD1cImNvbnRleHQucHJvZHVjdEZvcm1hdFwiXG4+XG4gIDxzcGFuIGNsYXNzPVwiY29udGV4dHVhbC1hbHRlcm5hdGVzLW9mZlwiIGRhdGEtcm9sZT1cInByb2R1Y3QtbnVtYmVyXCI+XG4gICAge3sgcHJvZHVjdE51bWJlciB8IGJiQWNjb3VudE51bWJlcjoocHJvZHVjdFR5cGUgfHwgcHJvZHVjdEZvcm1hdCkgfX1cbiAgPC9zcGFuPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiaG9zdFJlZi51bm1hc2thYmxlXCI+XG4gICAgPGJ1dHRvbiBiYkJ1dHRvblxuICAgICAgICAgICAgKm5nSWY9XCJob3N0UmVmLm1hc2tlZDsgZWxzZSBtYXNrQnV0dG9uXCJcbiAgICAgICAgICAgIHRyaWdnZXJzPVwiaG92ZXIgZm9jdXNcIlxuICAgICAgICAgICAgW2JiVG9vbHRpcF09XCJ1bm1hc2tCdXR0b25Ub29sdGlwXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJVbm1hc2tcIlxuICAgICAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiVW5tYXNrIGJ1dHRvbkBAcHJvZHVjdC1zdW1tYXJ5LXByb2R1Y3QtbnVtYmVyLmJ1dHRvbi11bm1hc2stbGFiZWxcIlxuICAgICAgICAgICAgKGNsaWNrKT1cImhvc3RSZWYub25Vbm1hc2socHJvZHVjdFR5cGUpXCJcbiAgICAgICAgICAgIGJ1dHRvblNpemU9XCJzbVwiXG4gICAgICAgICAgICBjaXJjbGU9XCJ0cnVlXCJcbiAgICAgICAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIGRhdGEtcm9sZT1cInByb2R1Y3QtbnVtYmVyLXVubWFzay1idXR0b25cIj5cbiAgICAgIDxiYi1pY29uLXVpIG5hbWU9XCJ2aXNpYmlsaXR5XCI+PC9iYi1pY29uLXVpPlxuICAgIDwvYnV0dG9uPlxuICAgIDxuZy10ZW1wbGF0ZSAjbWFza0J1dHRvbj5cbiAgICAgIDxidXR0b24gYmJCdXR0b25cbiAgICAgICAgICAgICAgdHJpZ2dlcnM9XCJob3ZlciBmb2N1c1wiXG4gICAgICAgICAgICAgIFtiYlRvb2x0aXBdPVwibWFza0J1dHRvblRvb2x0aXBcIlxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiTWFza1wiXG4gICAgICAgICAgICAgIGkxOG4tYXJpYS1sYWJlbD1cIk1hc2sgYnV0dG9uQEBwcm9kdWN0LXN1bW1hcnktcHJvZHVjdC1udW1iZXIuYnV0dG9uLW1hc2stbGFiZWxcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiaG9zdFJlZi5vbk1hc2socHJvZHVjdFR5cGUpXCJcbiAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgY2lyY2xlPVwidHJ1ZVwiXG4gICAgICAgICAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJwcm9kdWN0LW51bWJlci1tYXNrLWJ1dHRvblwiPlxuICAgICAgICA8YmItaWNvbi11aSBuYW1lPVwidmlzaWJpbGl0eS1vZmZcIj48L2JiLWljb24tdWk+XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgPG5nLXRlbXBsYXRlICN1bm1hc2tCdXR0b25Ub29sdGlwPlxuICAgICAgPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwicHJvZHVjdFR5cGVcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2liYW4nXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiVW5tYXNrIElCQU58QnV0dG9uIHRvIHVubWFzayBJQkFOQEBwcm9kdWN0LXN1bW1hcnktcHJvZHVjdC1udW1iZXIuYnV0dG9uLXVubWFzay1pYmFuLnRvb2x0aXBcIj5cbiAgICAgICAgICBVbm1hc2sgSUJBTlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2JiYW4nXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiVW5tYXNrIEJCQU58QnV0dG9uIHRvIHVubWFzayBCQkFOQEBwcm9kdWN0LXN1bW1hcnktcHJvZHVjdC1udW1iZXIuYnV0dG9uLXVubWFzay1iYmFuLnRvb2x0aXBcIj5cbiAgICAgICAgICBVbm1hc2sgQkJBTlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2NhcmROdW1iZXInXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiVW5tYXNrIG51bWJlcnxCdXR0b24gdG8gdW5tYXNrIGNhcmQgbnVtYmVyQEBwcm9kdWN0LXN1bW1hcnktcHJvZHVjdC1udW1iZXIuYnV0dG9uLXVubWFzay1udW1iZXIudG9vbHRpcFwiPlxuICAgICAgICAgIFVubWFzayBudW1iZXJcbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoRGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgIGkxOG49XCJVbm1hc2t8QnV0dG9uIHRvIHVubWFza0BAcHJvZHVjdC1zdW1tYXJ5LXByb2R1Y3QtbnVtYmVyLmJ1dHRvbi11bm1hc2sudG9vbHRpcFwiPlxuICAgICAgICAgIFVubWFza1xuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICA8bmctdGVtcGxhdGUgI21hc2tCdXR0b25Ub29sdGlwPlxuICAgICAgPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwicHJvZHVjdFR5cGVcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2liYW4nXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiTWFzayBJQkFOfEJ1dHRvbiB0byB1bm1hc2sgSUJBTkBAcHJvZHVjdC1zdW1tYXJ5LXByb2R1Y3QtbnVtYmVyLmJ1dHRvbi1tYXNrLWliYW4udG9vbHRpcFwiPlxuICAgICAgICAgIE1hc2sgSUJBTlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2JiYW4nXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiTWFzayBCQkFOfEJ1dHRvbiB0byB1bm1hc2sgQkJBTkBAcHJvZHVjdC1zdW1tYXJ5LXByb2R1Y3QtbnVtYmVyLmJ1dHRvbi1tYXNrLWJiYW4udG9vbHRpcFwiPlxuICAgICAgICAgIE1hc2sgQkJBTlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2NhcmROdW1iZXInXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiTWFzayAgbnVtYmVyfEJ1dHRvbiB0byB1bm1hc2sgY2FyZCBudW1iZXJAQHByb2R1Y3Qtc3VtbWFyeS1wcm9kdWN0LW51bWJlci5idXR0b24tbWFzay1udW1iZXIudG9vbHRpcFwiPlxuICAgICAgICAgIE1hc2sgbnVtYmVyXG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaERlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiTWFza3xCdXR0b24gdG8gdW5tYXNrQEBwcm9kdWN0LXN1bW1hcnktcHJvZHVjdC1udW1iZXIuYnV0dG9uLW1hc2sudG9vbHRpcFwiPlxuICAgICAgICAgIE1hc2tcbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L25nLXRlbXBsYXRlPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=