import { Component, EventEmitter, Input, Output } from '@angular/core';
import { AccountAliasDisplayingLevel, ResponsiveContainerComponent } from '@backbase/product-summary-common-ang';
import * as i0 from "@angular/core";
import * as i1 from "../bb-account-header-ui/bb-account-header.component";
import * as i2 from "../bb-credit-limit-ui/credit-limit.component";
import * as i3 from "@backbase/ui-ang/payment-card";
import * as i4 from "@backbase/ui-ang/icon";
import * as i5 from "../bb-credit-limit-ui/credit-limit-minimum-payment/credit-limit-minimum-payment.component";
import * as i6 from "@angular/common";
import * as i7 from "@backbase/ui-ang/button";
import * as i8 from "@backbase/product-summary-common-ang";
/**
 * Displays account graphical header
 *
 * @usageNotes
 *
 * ### Usage example
 * ```
 * <bb-account-graphical-header
 *   [product]="product"
 *   [canEditAlias]="true"
 *   [useShortCurrency]="false"
 *   [creditLimitViewMode]="emptied"
 *   [canRepay]="true"
 *   [canCashInAdvance]="true"
 *   [creditCardBackgroundType]="black-card"
 *   (aliasUpdated)="onAliasUpdated($event)"
 *   (repayInitiated)="onRepayInitiated()"
 *   (cashAdvanceInitiated)="onCashAdvanceInitiated()"
 * ></bb-account-graphical-header>
 * ```
 *
 * @NgModule AccountGraphicalHeaderModule
 */
export class AccountGraphicalHeaderComponent extends ResponsiveContainerComponent {
    /**
     * @internal
     */
    constructor(el, changeDetector) {
        super(el, changeDetector);
        this.el = el;
        this.changeDetector = changeDetector;
        /**
         * Defines visibility level of the account alis.
         *
         * @default 'USER'
         */
        this.aliasLevel = AccountAliasDisplayingLevel.USER;
        /**
         * Defines if alias can be edited
         *
         * @default false
         */
        this.canEditAlias = false;
        /**
         * Whether currency should be displayed as a sign.
         *
         * @default true
         */
        this.useShortCurrency = true;
        /**
         * Credit Limit view mode. Can be "filled" or "emptied"
         *
         * @default "emptied"
         */
        this.creditLimitViewMode = 'emptied';
        /**
         * Defines if quick repay is allowed
         *
         * @default false
         */
        this.canRepay = false;
        /**
         * Defines if cash in advance is allowed
         *
         * @default false
         */
        this.canCashInAdvance = false;
        /**
         * Credit card background type
         *
         * @default "black-card"
         */
        this.creditCardBackgroundType = 'black-card';
        /**
         * Defines visibility of the logo
         *
         * @default false
         */
        this.isLogoVisible = false;
        /**
         * Event (Output) that emits when item alias is changed
         */
        this.aliasUpdated = new EventEmitter();
        /**
         * Event (Output) that emits when `repay` action initiated
         */
        this.repayInitiated = new EventEmitter();
        /**
         * Event (Output) that emits when `cash advance` action initiated
         */
        this.cashAdvanceInitiated = new EventEmitter();
    }
    /**
     * A configuration for graphical presentation of payment card
     */
    get graphicalCreditCardConfiguration() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j;
        return {
            number: (_b = (_a = this.product) === null || _a === void 0 ? void 0 : _a.number) !== null && _b !== void 0 ? _b : '',
            vendor: (_e = (_d = (_c = this.product) === null || _c === void 0 ? void 0 : _c.cardDetails) === null || _d === void 0 ? void 0 : _d.cardProvider) !== null && _e !== void 0 ? _e : '',
            name: (_g = (_f = this.product) === null || _f === void 0 ? void 0 : _f.accountHolderNames) !== null && _g !== void 0 ? _g : '',
            expirationDate: ((_h = this.product) === null || _h === void 0 ? void 0 : _h.validThru) ? new Date((_j = this.product) === null || _j === void 0 ? void 0 : _j.validThru) : undefined,
            cardName: this.creditCardBackgroundType,
        };
    }
    /**
     * Event handler for the `click` event of `repay-button`;
     * Emits `arrangementId` to `repayInitiated`
     */
    repayButtonClicked() {
        this.repayInitiated.emit(this.getArrangementId());
    }
    /**
     * Event handler for the `click` event of `cash-advance-button`;
     * Emits `arrangementId` to `cashAdvanceInitiated`
     */
    cashAdvanceButtonClicked() {
        this.cashAdvanceInitiated.emit(this.getArrangementId());
    }
    /**
     * Returns arrangement id of the product
     *
     * @private
     */
    getArrangementId() {
        var _a;
        return (_a = this.product) === null || _a === void 0 ? void 0 : _a.id;
    }
}
AccountGraphicalHeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: AccountGraphicalHeaderComponent, deps: [{ token: i0.ElementRef }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
AccountGraphicalHeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: AccountGraphicalHeaderComponent, selector: "bb-account-graphical-header", inputs: { product: "product", aliasLevel: "aliasLevel", canEditAlias: "canEditAlias", useShortCurrency: "useShortCurrency", creditLimitViewMode: "creditLimitViewMode", canRepay: "canRepay", canCashInAdvance: "canCashInAdvance", creditCardBackgroundType: "creditCardBackgroundType", isLogoVisible: "isLogoVisible" }, outputs: { aliasUpdated: "aliasUpdated", repayInitiated: "repayInitiated", cashAdvanceInitiated: "cashAdvanceInitiated" }, usesInheritance: true, ngImport: i0, template: "<div\n  class=\"bb-account-graphical-header\"\n  data-role=\"account-graphical-header\"\n>\n  <div class=\"bb-stack bb-stack--align-top\">\n    <div class=\"bb-stack__item bb-stack__item--fill bb-stack__item--spacing-xl\">\n      <div class=\"bb-account-graphical-header__title\"\n           [ngClass]=\"{\n                'bb-stack__item--spacing-none': responsiveView === 'tablet',\n                'bb-block bb-block--xl': !accountHeader.aliasEditMode,\n                'bb-account-graphical-header__title--input-mode': accountHeader.aliasEditMode\n              }\">\n        <bb-account-header\n                data-role=\"bb-account-graphical-header-account-header\"\n                #accountHeader\n                [product]=\"product\"\n                [aliasLevel]=\"aliasLevel\"\n                [canEditAlias]=\"canEditAlias\"\n                [showBalance]=\"false\"\n                [isLogoVisible]=\"isLogoVisible\"\n                (aliasUpdated)=\"aliasUpdated.emit($event)\"\n        ></bb-account-header>\n      </div>\n      <div>\n        <bb-credit-limit\n                data-role=\"bb-account-graphical-header-credit-limit\"\n                [product]=\"product\"\n                [viewMode]=\"creditLimitViewMode\"\n                [showMinimumPayment]=\"responsiveView === 'tablet' || responsiveView === 'mobile'\"\n                [useShortCurrency]=\"useShortCurrency\"\n                [responsiveView]=\"responsiveView\"\n        ></bb-credit-limit>\n      </div>\n    </div>\n\n    <div class=\"bb-stack__item\" *ngIf=\"responsiveView === 'screen'\">\n      <bb-payment-card-ui\n              data-role=\"bb-account-graphical-header-payment-card\"\n              [paymentCard]=\"graphicalCreditCardConfiguration\"\n              [paymentCardNumberFormat]=\"'cardNumber' | bbProductNumberFormat\"\n      ></bb-payment-card-ui>\n    </div>\n  </div>\n\n  <div *ngIf=\"canRepay || canCashInAdvance || (responsiveView === 'screen' && product?.minimumPayment)\"\n       class=\"bb-block bb-block--lg\"></div>\n\n  <div class=\"bb-stack bb-stack--align-bottom\">\n    <div class=\"bb-stack_item bb-stack__item--fill\"  *ngIf=\"canRepay || canCashInAdvance\">\n      <div class=\"bb-stack bb-stack--wrap\"\n           [ngClass]=\"{\n                 'bb-stack--density-none': responsiveView === 'mobile'\n               }\">\n        <button\n                *ngIf=\"canRepay\"\n                class=\"bb-stack__item\"\n                [ngClass]=\"{\n                'bb-stack__item--fill': responsiveView === 'mobile'\n              }\"\n                bbButton\n                type=\"button\"\n                color=\"primary\"\n                data-role=\"account-graphical-header-repay-button\"\n                (click)=\"repayButtonClicked()\"\n        >\n          <bb-icon-ui name=\"call-received\"></bb-icon-ui>\n          <span i18n=\"Repay@@bb-product-summary-account-graphical.repay\">Repay</span>\n        </button>\n        <div *ngIf=\"canRepay && canCashInAdvance\" class=\"bb-stack__break bb-stack__break--down bb-stack__break--spacing-sm\"></div>\n        <button\n                *ngIf=\"canCashInAdvance\"\n                class=\"bb-stack__item\"\n                [ngClass]=\"{\n                'bb-stack__item--fill': responsiveView === 'mobile'\n              }\"\n                bbButton\n                type=\"button\"\n                color=\"secondary\"\n                data-role=\"account-graphical-header-cash-advance-button\"\n                (click)=\"cashAdvanceButtonClicked()\"\n        >\n          <bb-icon-ui name=\"call-made\"></bb-icon-ui>\n          <span i18n=\"Cash advance@@bb-product-summary-account-graphical.cash-advance\">Cash advance</span>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"bb-stack_item bb-stack__item--push-right\"\n         *ngIf=\"responsiveView === 'screen' && product?.minimumPayment\">\n      <bb-credit-limit-minimum-payment\n              data-role=\"bb-account-graphical-header-minimum-payment\"\n              [minimumPayment]=\"product?.minimumPayment | bbAbsoluteValue\"\n              [minimumPaymentDueDate]=\"product?.minimumPaymentDueDate\"\n              [currency]=\"product?.currency\"\n              [useShortCurrency]=\"useShortCurrency\"\n      ></bb-credit-limit-minimum-payment>\n    </div>\n  </div>\n</div>\n", components: [{ type: i1.AccountHeaderComponent, selector: "bb-account-header", inputs: ["product", "canEditAlias", "aliasLevel", "showBalance", "isBalanceTypeVisible", "isLogoVisible", "mapCurrency"], outputs: ["aliasUpdated"] }, { type: i2.CreditLimitComponent, selector: "bb-credit-limit", inputs: ["product", "viewMode", "showMinimumPayment", "useShortCurrency"] }, { type: i3.PaymentCardComponent, selector: "bb-payment-card-ui", inputs: ["paymentCard", "paymentCardNumberFormat"] }, { type: i4.IconComponent, selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }, { type: i5.CreditLimitMinimumPaymentComponent, selector: "bb-credit-limit-minimum-payment", inputs: ["minimumPayment", "minimumPaymentDueDate", "currency", "useShortCurrency", "isSmallScreen", "isExtraSmallScreen", "responsiveView"] }], directives: [{ type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], pipes: { "bbProductNumberFormat": i8.ProductNumberFormatPipe, "bbAbsoluteValue": i8.AbsoluteValuePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: AccountGraphicalHeaderComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-account-graphical-header',
                    templateUrl: './account-graphical-header.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { product: [{
                type: Input
            }], aliasLevel: [{
                type: Input
            }], canEditAlias: [{
                type: Input
            }], useShortCurrency: [{
                type: Input
            }], creditLimitViewMode: [{
                type: Input
            }], canRepay: [{
                type: Input
            }], canCashInAdvance: [{
                type: Input
            }], creditCardBackgroundType: [{
                type: Input
            }], isLogoVisible: [{
                type: Input
            }], aliasUpdated: [{
                type: Output
            }], repayInitiated: [{
                type: Output
            }], cashAdvanceInitiated: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcHJvZHVjdC1zdW1tYXJ5LXVpL3NyYy9iYi1hY2NvdW50LWdyYXBoaWNhbC1oZWFkZXItdWkvYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcHJvZHVjdC1zdW1tYXJ5LXVpL3NyYy9iYi1hY2NvdW50LWdyYXBoaWNhbC1oZWFkZXItdWkvYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQWMsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQW9DLE1BQU0sZUFBZSxDQUFDO0FBR3JILE9BQU8sRUFBRSwyQkFBMkIsRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDOzs7Ozs7Ozs7O0FBSWpIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBc0JHO0FBS0gsTUFBTSxPQUFPLCtCQUFnQyxTQUFRLDRCQUE0QjtJQW9FL0U7O09BRUc7SUFDSCxZQUE2QixFQUEyQixFQUFtQixjQUFpQztRQUMxRyxLQUFLLENBQUMsRUFBRSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBREMsT0FBRSxHQUFGLEVBQUUsQ0FBeUI7UUFBbUIsbUJBQWMsR0FBZCxjQUFjLENBQW1CO1FBaEU1Rzs7OztXQUlHO1FBQ00sZUFBVSxHQUFHLDJCQUEyQixDQUFDLElBQUksQ0FBQztRQUN2RDs7OztXQUlHO1FBQ00saUJBQVksR0FBRyxLQUFLLENBQUM7UUFDOUI7Ozs7V0FJRztRQUNNLHFCQUFnQixHQUFHLElBQUksQ0FBQztRQUNqQzs7OztXQUlHO1FBQ00sd0JBQW1CLEdBQXdCLFNBQVMsQ0FBQztRQUM5RDs7OztXQUlHO1FBQ00sYUFBUSxHQUFHLEtBQUssQ0FBQztRQUMxQjs7OztXQUlHO1FBQ00scUJBQWdCLEdBQUcsS0FBSyxDQUFDO1FBQ2xDOzs7O1dBSUc7UUFDTSw2QkFBd0IsR0FBNkIsWUFBWSxDQUFDO1FBQzNFOzs7O1dBSUc7UUFDTSxrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUMvQjs7V0FFRztRQUNPLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUNwRDs7V0FFRztRQUNPLG1CQUFjLEdBQUcsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUN0RDs7V0FFRztRQUNPLHlCQUFvQixHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7SUFPNUQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsSUFBSSxnQ0FBZ0M7O1FBQ2xDLE9BQU87WUFDTCxNQUFNLEVBQUUsTUFBQSxNQUFBLElBQUksQ0FBQyxPQUFPLDBDQUFFLE1BQU0sbUNBQUksRUFBRTtZQUNsQyxNQUFNLEVBQUUsTUFBQSxNQUFBLE1BQUEsSUFBSSxDQUFDLE9BQU8sMENBQUUsV0FBVywwQ0FBRSxZQUFZLG1DQUFJLEVBQUU7WUFDckQsSUFBSSxFQUFFLE1BQUEsTUFBQSxJQUFJLENBQUMsT0FBTywwQ0FBRSxrQkFBa0IsbUNBQUksRUFBRTtZQUM1QyxjQUFjLEVBQUUsQ0FBQSxNQUFBLElBQUksQ0FBQyxPQUFPLDBDQUFFLFNBQVMsRUFBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBQSxJQUFJLENBQUMsT0FBTywwQ0FBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUcsU0FBMEI7WUFDMUcsUUFBUSxFQUFFLElBQUksQ0FBQyx3QkFBd0I7U0FDeEMsQ0FBQztJQUNKLENBQUM7SUFFRDs7O09BR0c7SUFDSCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsd0JBQXdCO1FBQ3RCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBQ0Q7Ozs7T0FJRztJQUNLLGdCQUFnQjs7UUFDdEIsT0FBTyxNQUFBLElBQUksQ0FBQyxPQUFPLDBDQUFFLEVBQUUsQ0FBQztJQUMxQixDQUFDOzs2SEE5R1UsK0JBQStCO2lIQUEvQiwrQkFBK0IsaWhCQ2xDNUMseXZJQW1HQTs0RkRqRWEsK0JBQStCO2tCQUozQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSw2QkFBNkI7b0JBQ3ZDLFdBQVcsRUFBRSwyQ0FBMkM7aUJBQ3pEO2lJQU9VLE9BQU87c0JBQWYsS0FBSztnQkFNRyxVQUFVO3NCQUFsQixLQUFLO2dCQU1HLFlBQVk7c0JBQXBCLEtBQUs7Z0JBTUcsZ0JBQWdCO3NCQUF4QixLQUFLO2dCQU1HLG1CQUFtQjtzQkFBM0IsS0FBSztnQkFNRyxRQUFRO3NCQUFoQixLQUFLO2dCQU1HLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFNRyx3QkFBd0I7c0JBQWhDLEtBQUs7Z0JBTUcsYUFBYTtzQkFBckIsS0FBSztnQkFJSSxZQUFZO3NCQUFyQixNQUFNO2dCQUlHLGNBQWM7c0JBQXZCLE1BQU07Z0JBSUcsb0JBQW9CO3NCQUE3QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY2NvdW50QXJyYW5nZW1lbnRJdGVtIGFzIFByb2R1Y3RUeXBlIH0gZnJvbSAnQGJhY2tiYXNlL2RhdGEtYW5nL2FycmFuZ2VtZW50cyc7XG5pbXBvcnQgeyBQYXltZW50Q2FyZCB9IGZyb20gJ0BiYWNrYmFzZS91aS1hbmcvcGF5bWVudC1jYXJkJztcbmltcG9ydCB7IEFjY291bnRBbGlhc0Rpc3BsYXlpbmdMZXZlbCwgUmVzcG9uc2l2ZUNvbnRhaW5lckNvbXBvbmVudCB9IGZyb20gJ0BiYWNrYmFzZS9wcm9kdWN0LXN1bW1hcnktY29tbW9uLWFuZyc7XG5pbXBvcnQgeyBDcmVkaXRMaW1pdFZpZXdNb2RlIH0gZnJvbSAnLi4vYmItY3JlZGl0LWxpbWl0LXVpL3R5cGVzJztcbmltcG9ydCB7IENyZWRpdENhcmRCYWNrZ3JvdW5kVHlwZSB9IGZyb20gJy4vdHlwZXMnO1xuXG4vKipcbiAqIERpc3BsYXlzIGFjY291bnQgZ3JhcGhpY2FsIGhlYWRlclxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogIyMjIFVzYWdlIGV4YW1wbGVcbiAqIGBgYFxuICogPGJiLWFjY291bnQtZ3JhcGhpY2FsLWhlYWRlclxuICogICBbcHJvZHVjdF09XCJwcm9kdWN0XCJcbiAqICAgW2NhbkVkaXRBbGlhc109XCJ0cnVlXCJcbiAqICAgW3VzZVNob3J0Q3VycmVuY3ldPVwiZmFsc2VcIlxuICogICBbY3JlZGl0TGltaXRWaWV3TW9kZV09XCJlbXB0aWVkXCJcbiAqICAgW2NhblJlcGF5XT1cInRydWVcIlxuICogICBbY2FuQ2FzaEluQWR2YW5jZV09XCJ0cnVlXCJcbiAqICAgW2NyZWRpdENhcmRCYWNrZ3JvdW5kVHlwZV09XCJibGFjay1jYXJkXCJcbiAqICAgKGFsaWFzVXBkYXRlZCk9XCJvbkFsaWFzVXBkYXRlZCgkZXZlbnQpXCJcbiAqICAgKHJlcGF5SW5pdGlhdGVkKT1cIm9uUmVwYXlJbml0aWF0ZWQoKVwiXG4gKiAgIChjYXNoQWR2YW5jZUluaXRpYXRlZCk9XCJvbkNhc2hBZHZhbmNlSW5pdGlhdGVkKClcIlxuICogPjwvYmItYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyPlxuICogYGBgXG4gKlxuICogQE5nTW9kdWxlIEFjY291bnRHcmFwaGljYWxIZWFkZXJNb2R1bGVcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2FjY291bnQtZ3JhcGhpY2FsLWhlYWRlci5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEFjY291bnRHcmFwaGljYWxIZWFkZXJDb21wb25lbnQgZXh0ZW5kcyBSZXNwb25zaXZlQ29udGFpbmVyQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG4gIC8qKlxuICAgKiBBY2NvdW50QXJyYW5nZW1lbnRJdGVtIHRvIGRpc3BsYXkgY3JlZGl0IGxpbWl0XG4gICAqXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgQElucHV0KCkgcHJvZHVjdDogUHJvZHVjdFR5cGUgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBEZWZpbmVzIHZpc2liaWxpdHkgbGV2ZWwgb2YgdGhlIGFjY291bnQgYWxpcy5cbiAgICpcbiAgICogQGRlZmF1bHQgJ1VTRVInXG4gICAqL1xuICBASW5wdXQoKSBhbGlhc0xldmVsID0gQWNjb3VudEFsaWFzRGlzcGxheWluZ0xldmVsLlVTRVI7XG4gIC8qKlxuICAgKiBEZWZpbmVzIGlmIGFsaWFzIGNhbiBiZSBlZGl0ZWRcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIEBJbnB1dCgpIGNhbkVkaXRBbGlhcyA9IGZhbHNlO1xuICAvKipcbiAgICogV2hldGhlciBjdXJyZW5jeSBzaG91bGQgYmUgZGlzcGxheWVkIGFzIGEgc2lnbi5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgQElucHV0KCkgdXNlU2hvcnRDdXJyZW5jeSA9IHRydWU7XG4gIC8qKlxuICAgKiBDcmVkaXQgTGltaXQgdmlldyBtb2RlLiBDYW4gYmUgXCJmaWxsZWRcIiBvciBcImVtcHRpZWRcIlxuICAgKlxuICAgKiBAZGVmYXVsdCBcImVtcHRpZWRcIlxuICAgKi9cbiAgQElucHV0KCkgY3JlZGl0TGltaXRWaWV3TW9kZTogQ3JlZGl0TGltaXRWaWV3TW9kZSA9ICdlbXB0aWVkJztcbiAgLyoqXG4gICAqIERlZmluZXMgaWYgcXVpY2sgcmVwYXkgaXMgYWxsb3dlZFxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgQElucHV0KCkgY2FuUmVwYXkgPSBmYWxzZTtcbiAgLyoqXG4gICAqIERlZmluZXMgaWYgY2FzaCBpbiBhZHZhbmNlIGlzIGFsbG93ZWRcbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIEBJbnB1dCgpIGNhbkNhc2hJbkFkdmFuY2UgPSBmYWxzZTtcbiAgLyoqXG4gICAqIENyZWRpdCBjYXJkIGJhY2tncm91bmQgdHlwZVxuICAgKlxuICAgKiBAZGVmYXVsdCBcImJsYWNrLWNhcmRcIlxuICAgKi9cbiAgQElucHV0KCkgY3JlZGl0Q2FyZEJhY2tncm91bmRUeXBlOiBDcmVkaXRDYXJkQmFja2dyb3VuZFR5cGUgPSAnYmxhY2stY2FyZCc7XG4gIC8qKlxuICAgKiBEZWZpbmVzIHZpc2liaWxpdHkgb2YgdGhlIGxvZ29cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIEBJbnB1dCgpIGlzTG9nb1Zpc2libGUgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEV2ZW50IChPdXRwdXQpIHRoYXQgZW1pdHMgd2hlbiBpdGVtIGFsaWFzIGlzIGNoYW5nZWRcbiAgICovXG4gIEBPdXRwdXQoKSBhbGlhc1VwZGF0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgLyoqXG4gICAqIEV2ZW50IChPdXRwdXQpIHRoYXQgZW1pdHMgd2hlbiBgcmVwYXlgIGFjdGlvbiBpbml0aWF0ZWRcbiAgICovXG4gIEBPdXRwdXQoKSByZXBheUluaXRpYXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICAvKipcbiAgICogRXZlbnQgKE91dHB1dCkgdGhhdCBlbWl0cyB3aGVuIGBjYXNoIGFkdmFuY2VgIGFjdGlvbiBpbml0aWF0ZWRcbiAgICovXG4gIEBPdXRwdXQoKSBjYXNoQWR2YW5jZUluaXRpYXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZWw6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+LCBwcml2YXRlIHJlYWRvbmx5IGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHN1cGVyKGVsLCBjaGFuZ2VEZXRlY3Rvcik7XG4gIH1cblxuICAvKipcbiAgICogQSBjb25maWd1cmF0aW9uIGZvciBncmFwaGljYWwgcHJlc2VudGF0aW9uIG9mIHBheW1lbnQgY2FyZFxuICAgKi9cbiAgZ2V0IGdyYXBoaWNhbENyZWRpdENhcmRDb25maWd1cmF0aW9uKCk6IFBheW1lbnRDYXJkIHtcbiAgICByZXR1cm4ge1xuICAgICAgbnVtYmVyOiB0aGlzLnByb2R1Y3Q/Lm51bWJlciA/PyAnJyxcbiAgICAgIHZlbmRvcjogdGhpcy5wcm9kdWN0Py5jYXJkRGV0YWlscz8uY2FyZFByb3ZpZGVyID8/ICcnLFxuICAgICAgbmFtZTogdGhpcy5wcm9kdWN0Py5hY2NvdW50SG9sZGVyTmFtZXMgPz8gJycsXG4gICAgICBleHBpcmF0aW9uRGF0ZTogdGhpcy5wcm9kdWN0Py52YWxpZFRocnUgPyBuZXcgRGF0ZSh0aGlzLnByb2R1Y3Q/LnZhbGlkVGhydSkgOiAoKHVuZGVmaW5lZCBhcyBhbnkpIGFzIERhdGUpLFxuICAgICAgY2FyZE5hbWU6IHRoaXMuY3JlZGl0Q2FyZEJhY2tncm91bmRUeXBlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgdGhlIGBjbGlja2AgZXZlbnQgb2YgYHJlcGF5LWJ1dHRvbmA7XG4gICAqIEVtaXRzIGBhcnJhbmdlbWVudElkYCB0byBgcmVwYXlJbml0aWF0ZWRgXG4gICAqL1xuICByZXBheUJ1dHRvbkNsaWNrZWQoKSB7XG4gICAgdGhpcy5yZXBheUluaXRpYXRlZC5lbWl0KHRoaXMuZ2V0QXJyYW5nZW1lbnRJZCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgYGNsaWNrYCBldmVudCBvZiBgY2FzaC1hZHZhbmNlLWJ1dHRvbmA7XG4gICAqIEVtaXRzIGBhcnJhbmdlbWVudElkYCB0byBgY2FzaEFkdmFuY2VJbml0aWF0ZWRgXG4gICAqL1xuICBjYXNoQWR2YW5jZUJ1dHRvbkNsaWNrZWQoKSB7XG4gICAgdGhpcy5jYXNoQWR2YW5jZUluaXRpYXRlZC5lbWl0KHRoaXMuZ2V0QXJyYW5nZW1lbnRJZCgpKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhcnJhbmdlbWVudCBpZCBvZiB0aGUgcHJvZHVjdFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRBcnJhbmdlbWVudElkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMucHJvZHVjdD8uaWQ7XG4gIH1cbn1cbiIsIjxkaXZcbiAgY2xhc3M9XCJiYi1hY2NvdW50LWdyYXBoaWNhbC1oZWFkZXJcIlxuICBkYXRhLXJvbGU9XCJhY2NvdW50LWdyYXBoaWNhbC1oZWFkZXJcIlxuPlxuICA8ZGl2IGNsYXNzPVwiYmItc3RhY2sgYmItc3RhY2stLWFsaWduLXRvcFwiPlxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tZmlsbCBiYi1zdGFja19faXRlbS0tc3BhY2luZy14bFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImJiLWFjY291bnQtZ3JhcGhpY2FsLWhlYWRlcl9fdGl0bGVcIlxuICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICAgJ2JiLXN0YWNrX19pdGVtLS1zcGFjaW5nLW5vbmUnOiByZXNwb25zaXZlVmlldyA9PT0gJ3RhYmxldCcsXG4gICAgICAgICAgICAgICAgJ2JiLWJsb2NrIGJiLWJsb2NrLS14bCc6ICFhY2NvdW50SGVhZGVyLmFsaWFzRWRpdE1vZGUsXG4gICAgICAgICAgICAgICAgJ2JiLWFjY291bnQtZ3JhcGhpY2FsLWhlYWRlcl9fdGl0bGUtLWlucHV0LW1vZGUnOiBhY2NvdW50SGVhZGVyLmFsaWFzRWRpdE1vZGVcbiAgICAgICAgICAgICAgfVwiPlxuICAgICAgICA8YmItYWNjb3VudC1oZWFkZXJcbiAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJiYi1hY2NvdW50LWdyYXBoaWNhbC1oZWFkZXItYWNjb3VudC1oZWFkZXJcIlxuICAgICAgICAgICAgICAgICNhY2NvdW50SGVhZGVyXG4gICAgICAgICAgICAgICAgW3Byb2R1Y3RdPVwicHJvZHVjdFwiXG4gICAgICAgICAgICAgICAgW2FsaWFzTGV2ZWxdPVwiYWxpYXNMZXZlbFwiXG4gICAgICAgICAgICAgICAgW2NhbkVkaXRBbGlhc109XCJjYW5FZGl0QWxpYXNcIlxuICAgICAgICAgICAgICAgIFtzaG93QmFsYW5jZV09XCJmYWxzZVwiXG4gICAgICAgICAgICAgICAgW2lzTG9nb1Zpc2libGVdPVwiaXNMb2dvVmlzaWJsZVwiXG4gICAgICAgICAgICAgICAgKGFsaWFzVXBkYXRlZCk9XCJhbGlhc1VwZGF0ZWQuZW1pdCgkZXZlbnQpXCJcbiAgICAgICAgPjwvYmItYWNjb3VudC1oZWFkZXI+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxiYi1jcmVkaXQtbGltaXRcbiAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJiYi1hY2NvdW50LWdyYXBoaWNhbC1oZWFkZXItY3JlZGl0LWxpbWl0XCJcbiAgICAgICAgICAgICAgICBbcHJvZHVjdF09XCJwcm9kdWN0XCJcbiAgICAgICAgICAgICAgICBbdmlld01vZGVdPVwiY3JlZGl0TGltaXRWaWV3TW9kZVwiXG4gICAgICAgICAgICAgICAgW3Nob3dNaW5pbXVtUGF5bWVudF09XCJyZXNwb25zaXZlVmlldyA9PT0gJ3RhYmxldCcgfHwgcmVzcG9uc2l2ZVZpZXcgPT09ICdtb2JpbGUnXCJcbiAgICAgICAgICAgICAgICBbdXNlU2hvcnRDdXJyZW5jeV09XCJ1c2VTaG9ydEN1cnJlbmN5XCJcbiAgICAgICAgICAgICAgICBbcmVzcG9uc2l2ZVZpZXddPVwicmVzcG9uc2l2ZVZpZXdcIlxuICAgICAgICA+PC9iYi1jcmVkaXQtbGltaXQ+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja19faXRlbVwiICpuZ0lmPVwicmVzcG9uc2l2ZVZpZXcgPT09ICdzY3JlZW4nXCI+XG4gICAgICA8YmItcGF5bWVudC1jYXJkLXVpXG4gICAgICAgICAgICAgIGRhdGEtcm9sZT1cImJiLWFjY291bnQtZ3JhcGhpY2FsLWhlYWRlci1wYXltZW50LWNhcmRcIlxuICAgICAgICAgICAgICBbcGF5bWVudENhcmRdPVwiZ3JhcGhpY2FsQ3JlZGl0Q2FyZENvbmZpZ3VyYXRpb25cIlxuICAgICAgICAgICAgICBbcGF5bWVudENhcmROdW1iZXJGb3JtYXRdPVwiJ2NhcmROdW1iZXInIHwgYmJQcm9kdWN0TnVtYmVyRm9ybWF0XCJcbiAgICAgID48L2JiLXBheW1lbnQtY2FyZC11aT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPGRpdiAqbmdJZj1cImNhblJlcGF5IHx8IGNhbkNhc2hJbkFkdmFuY2UgfHwgKHJlc3BvbnNpdmVWaWV3ID09PSAnc2NyZWVuJyAmJiBwcm9kdWN0Py5taW5pbXVtUGF5bWVudClcIlxuICAgICAgIGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLWxnXCI+PC9kaXY+XG5cbiAgPGRpdiBjbGFzcz1cImJiLXN0YWNrIGJiLXN0YWNrLS1hbGlnbi1ib3R0b21cIj5cbiAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tfaXRlbSBiYi1zdGFja19faXRlbS0tZmlsbFwiICAqbmdJZj1cImNhblJlcGF5IHx8IGNhbkNhc2hJbkFkdmFuY2VcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFjayBiYi1zdGFjay0td3JhcFwiXG4gICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgJ2JiLXN0YWNrLS1kZW5zaXR5LW5vbmUnOiByZXNwb25zaXZlVmlldyA9PT0gJ21vYmlsZSdcbiAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICpuZ0lmPVwiY2FuUmVwYXlcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYmItc3RhY2tfX2l0ZW1cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAnYmItc3RhY2tfX2l0ZW0tLWZpbGwnOiByZXNwb25zaXZlVmlldyA9PT0gJ21vYmlsZSdcbiAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cImFjY291bnQtZ3JhcGhpY2FsLWhlYWRlci1yZXBheS1idXR0b25cIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCJyZXBheUJ1dHRvbkNsaWNrZWQoKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8YmItaWNvbi11aSBuYW1lPVwiY2FsbC1yZWNlaXZlZFwiPjwvYmItaWNvbi11aT5cbiAgICAgICAgICA8c3BhbiBpMThuPVwiUmVwYXlAQGJiLXByb2R1Y3Qtc3VtbWFyeS1hY2NvdW50LWdyYXBoaWNhbC5yZXBheVwiPlJlcGF5PC9zcGFuPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGRpdiAqbmdJZj1cImNhblJlcGF5ICYmIGNhbkNhc2hJbkFkdmFuY2VcIiBjbGFzcz1cImJiLXN0YWNrX19icmVhayBiYi1zdGFja19fYnJlYWstLWRvd24gYmItc3RhY2tfX2JyZWFrLS1zcGFjaW5nLXNtXCI+PC9kaXY+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAqbmdJZj1cImNhbkNhc2hJbkFkdmFuY2VcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYmItc3RhY2tfX2l0ZW1cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAnYmItc3RhY2tfX2l0ZW0tLWZpbGwnOiByZXNwb25zaXZlVmlldyA9PT0gJ21vYmlsZSdcbiAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyLWNhc2gtYWR2YW5jZS1idXR0b25cIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCJjYXNoQWR2YW5jZUJ1dHRvbkNsaWNrZWQoKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8YmItaWNvbi11aSBuYW1lPVwiY2FsbC1tYWRlXCI+PC9iYi1pY29uLXVpPlxuICAgICAgICAgIDxzcGFuIGkxOG49XCJDYXNoIGFkdmFuY2VAQGJiLXByb2R1Y3Qtc3VtbWFyeS1hY2NvdW50LWdyYXBoaWNhbC5jYXNoLWFkdmFuY2VcIj5DYXNoIGFkdmFuY2U8L3NwYW4+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tfaXRlbSBiYi1zdGFja19faXRlbS0tcHVzaC1yaWdodFwiXG4gICAgICAgICAqbmdJZj1cInJlc3BvbnNpdmVWaWV3ID09PSAnc2NyZWVuJyAmJiBwcm9kdWN0Py5taW5pbXVtUGF5bWVudFwiPlxuICAgICAgPGJiLWNyZWRpdC1saW1pdC1taW5pbXVtLXBheW1lbnRcbiAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiYmItYWNjb3VudC1ncmFwaGljYWwtaGVhZGVyLW1pbmltdW0tcGF5bWVudFwiXG4gICAgICAgICAgICAgIFttaW5pbXVtUGF5bWVudF09XCJwcm9kdWN0Py5taW5pbXVtUGF5bWVudCB8IGJiQWJzb2x1dGVWYWx1ZVwiXG4gICAgICAgICAgICAgIFttaW5pbXVtUGF5bWVudER1ZURhdGVdPVwicHJvZHVjdD8ubWluaW11bVBheW1lbnREdWVEYXRlXCJcbiAgICAgICAgICAgICAgW2N1cnJlbmN5XT1cInByb2R1Y3Q/LmN1cnJlbmN5XCJcbiAgICAgICAgICAgICAgW3VzZVNob3J0Q3VycmVuY3ldPVwidXNlU2hvcnRDdXJyZW5jeVwiXG4gICAgICA+PC9iYi1jcmVkaXQtbGltaXQtbWluaW11bS1wYXltZW50PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19