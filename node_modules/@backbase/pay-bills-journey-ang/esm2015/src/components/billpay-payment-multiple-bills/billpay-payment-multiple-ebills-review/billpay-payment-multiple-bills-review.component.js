import { __awaiter } from "tslib";
import { Component, ChangeDetectionStrategy, ViewChild, HostListener, } from '@angular/core';
import { BillpayDiscardChangesModalService, BillpayUtilityService as Utility, } from '@backbase/billpay-journeys-common';
import { forkJoin, of, Subject } from 'rxjs';
import { catchError, map, mapTo, takeUntil, tap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/pay-bills-state.service";
import * as i2 from "@backbase/billpay-journeys-common";
import * as i3 from "../../../services/pay-bills-navigation.service";
import * as i4 from "@angular/router";
import * as i5 from "@backbase/ui-ang/alert";
import * as i6 from "../billpay-payment-multiple-ebills-review-table/billpay-payment-multiple-bills-review-table.component";
import * as i7 from "../billpay-payment-multiple-bills-sum-board/billpay-payment-multiple-bills-sum-board.component";
import * as i8 from "@backbase/ui-ang/icon";
import * as i9 from "@backbase/ui-ang/load-button";
import * as i10 from "../billpay-payment-multiple-ebills-success/billpay-payment-multiple-bills-success.component";
import * as i11 from "../../billpay-payment-single-bill/billpay-payment-discard-changes-modal/billpay-payment-discard-changes-modal.component";
import * as i12 from "@angular/common";
import * as i13 from "@backbase/ui-ang/button";
export class BillpayPaymentMultipleBillsReviewComponent {
    constructor(paymentStateService, dataService, navigationService, route, discardModalService, cdRef) {
        this.paymentStateService = paymentStateService;
        this.dataService = dataService;
        this.navigationService = navigationService;
        this.route = route;
        this.discardModalService = discardModalService;
        this.cdRef = cdRef;
        this.destroy$ = new Subject();
        this.editMode = false;
        /**
         * Flag for payment error
         */
        this.paymentError = false;
        /**
         * Flag for submitting payment
         */
        this.submittingPayment = false;
        this.id = Utility.generateId();
        /**
         * List of payments
         */
        this.payments$ = this.paymentStateService.paymentState.pipe(tap(paymentForms => {
            if (!(paymentForms === null || paymentForms === void 0 ? void 0 : paymentForms.length)) {
                this.navigationService.navigateToForm({ relativeTo: this.route.parent });
            }
        }));
        /**
         * Carry the amount for total amount to be paid
         */
        this.totalAmount$ = this.payments$.pipe(map(payments => payments === null || payments === void 0 ? void 0 : payments.reduce((acc, payment) => acc + +payment.amount.amount, 0)));
        /**
         * List of responses results
         */
        this.results = [];
    }
    get isDiscardModalOpen() {
        return this.discardModalService.isDiscardModalOpen;
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    onWindowUnload($event) {
        if (!this.isDiscardModalOpen) {
            $event.returnValue = true;
        }
    }
    /**
     * Methos to send payment to server
     */
    onPaymentConfirm(payments) {
        this.paymentError = false;
        this.results = [];
        this.submittingPayment = true;
        forkJoin(payments.map(payment => this.dataService.createPayment(payment).pipe(mapTo(Object.assign(Object.assign({}, payment), { succeeded: true })), catchError(() => of(Object.assign({ succeeded: false }, payment))))))
            .pipe(takeUntil(this.destroy$))
            .subscribe((responseList) => __awaiter(this, void 0, void 0, function* () {
            this.submittingPayment = false;
            this.paymentStateService.isFormProcessing = false;
            const errors = responseList.filter(response => !(response === null || response === void 0 ? void 0 : response.succeeded));
            errors.length === payments.length ? this.allFailed() : (this.results = responseList);
            this.cdRef.markForCheck();
        }));
    }
    navigateToForm(resetFormValue = false) {
        if (resetFormValue) {
            this.paymentStateService.reset();
        }
        this.navigationService.navigateToForm({ relativeTo: this.route.parent });
    }
    allFailed() {
        var _a;
        this.paymentStateService.isFormProcessing = true;
        this.submittingPayment = false;
        this.paymentError = true;
        this.cdRef.markForCheck();
        (_a = this.failAlert) === null || _a === void 0 ? void 0 : _a.nativeElement.scrollIntoView(false);
    }
    openModal() {
        if (this.paymentStateService.isFormProcessing && !this.editMode && !this.paymentError) {
            return this.discardModalService.openModal();
        }
        return of(true);
    }
    onCancel() {
        this.navigateToForm(!!this.paymentError);
    }
    onModalResolve(isConfirmed) {
        this.discardModalService.onModalResolve(isConfirmed);
        if (isConfirmed) {
            this.paymentStateService.reset();
        }
    }
    onEdit() {
        this.editMode = true;
        this.navigateToForm();
    }
}
BillpayPaymentMultipleBillsReviewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentMultipleBillsReviewComponent, deps: [{ token: i1.PayBillsStateService }, { token: i2.BillpayPaymentDataService }, { token: i3.PayBillsNavigationService }, { token: i4.ActivatedRoute }, { token: i2.BillpayDiscardChangesModalService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentMultipleBillsReviewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentMultipleBillsReviewComponent, selector: "bb-billpay-payment-multiple-bills-review", host: { listeners: { "window:beforeunload": "onWindowUnload($event)" } }, providers: [BillpayDiscardChangesModalService], viewQueries: [{ propertyName: "failAlert", first: true, predicate: ["failAlert"], descendants: true }], ngImport: i0, template: "<ng-container *ngIf=\"payments$ | async as payments\">\n  <ng-container *ngTemplateOutlet=\"results?.length ? successScreen : reviewTemplate\"> </ng-container>\n  <ng-template #reviewTemplate>\n    <div class=\"card card-lg bb-billpay-multiple-bills-other-payees-card\">\n      <div class=\"card-body\">\n        <div #failAlert>\n          <bb-alert-ui\n            title=\"Something went wrong. Please try again\"\n            i18n-title=\"@@billpay-payments-journey.multiple-bills.fail-message\"\n            (close)=\"(false)\"\n            modifier=\"error\"\n            data-role=\"failure-message\"\n            *ngIf=\"paymentError\"\n          >\n          </bb-alert-ui>\n        </div>\n        <bb-billpay-payment-multiple-bills-review-table\n          [payments]=\"payments\"\n        ></bb-billpay-payment-multiple-bills-review-table>\n      </div>\n    </div>\n\n    <bb-billpay-payment-multiple-bills-sum-board\n      [totalAmount]=\"totalAmount$ | async\"\n      [actionButtons]=\"actionButtons\"\n      [inheritedId]=\"id\"\n    ></bb-billpay-payment-multiple-bills-sum-board>\n  </ng-template>\n  <ng-template #actionButtons>\n    <div>\n      <div class=\"bb-stack\">\n        <button\n          bbButton\n          color=\"link\"\n          class=\"btn-link bb-stack__item bb-stack__item--spacing-md bb-d-none bb-d-md-block\"\n          data-role=\"multiple-bills-cancel-button\"\n          i18n=\"@@billpay-payments-journey.multiple-bills.board.cancel-button\"\n          (click)=\"onCancel()\"\n        >\n          Cancel\n        </button>\n        <button\n          bbButton\n          color=\"secondary\"\n          class=\"bb-d-none bb-d-md-block bb-stack__item bb-stack__item--spacing-md\"\n          data-role=\"multiple-bills-edit-button\"\n          i18n=\"@@billpay-payments-journey.multiple-bills.board.edit-button\"\n          (click)=\"onEdit()\"\n        >\n          Edit Payment\n        </button>\n        <button\n          bbButton\n          color=\"secondary\"\n          [circle]=\"true\"\n          class=\"bb-d-md-none bb-stack__item bb-stack__item--spacing-md\"\n          data-role=\"multiple-bills-edit-button\"\n          i18n=\"@@billpay-payments-journey.multiple-bills.board.edit-button\"\n          (click)=\"onEdit()\"\n        >\n          <bb-icon-ui name=\"edit\"></bb-icon-ui>\n        </button>\n        <bb-load-button-ui\n          color=\"primary\"\n          class=\"bb-stack__item bb-stack__item--spacing-none\"\n          data-role=\"multiple-bills-confirm-button\"\n          [isLoading]=\"submittingPayment\"\n          (click)=\"onPaymentConfirm(payments)\"\n          attr.aria-describedby=\"total-amount-label-{{ id }}  total-amount-{{ id }}\"\n        >\n          <span i18n=\"@@billpay-payments-journey.multiple-bills.board.confirm-button\" class=\"bb-d-none bb-d-md-block\"\n            >Confirm Payment</span\n          >\n          <span i18n=\"@@billpay-payments-journey.multiple-bills.board.confirm-button.mobile\" class=\"bb-d-md-none\"\n            >Pay</span\n          >\n        </bb-load-button-ui>\n      </div>\n    </div>\n  </ng-template>\n  <ng-template #successScreen>\n    <bb-billpay-payment-multiple-bills-success [results]=\"results\"></bb-billpay-payment-multiple-bills-success>\n  </ng-template>\n</ng-container>\n\n<bb-billpay-payment-discard-changes-modal\n  *ngIf=\"isDiscardModalOpen\"\n  data-role=\"billpay-payment-review-page-discard-changes-modal\"\n  (resolve)=\"onModalResolve($event)\"\n  title=\"Cancel Bill Payments?\"\n  i18n-title=\"Discard changes modal header@@billpay.multiple-bills.discard-changes-modal.header\"\n  subtitle=\"Are you sure you want to cancel bill payments? Entered data will be lost.\"\n  i18n-subtitle=\"Discard changes modal body@@billpay.multiple-bills.discard-changes-modal.body\"\n  confirm-button-label=\"Cancel Payments\"\n  i18n-confirm-button-label=\"\n    confirm modal button|Cancel payment confirmation button@@billpay.multiple-bills.discard-changes-modal.confirm-button\"\n  cancel-button-label=\"Not Now\"\n  i18n-cancel-button-label=\"\n    cancel modal button|Continue with current payment button@@billpay.multiple-bills.discard-changes-modal.cancel-button\"\n></bb-billpay-payment-discard-changes-modal>\n", components: [{ type: i5.AlertComponent, selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i6.BillpayPaymentMultipleBillsReviewTableComponent, selector: "bb-billpay-payment-multiple-bills-review-table", inputs: ["payments"] }, { type: i7.BillpayPaymentMultipleBillsSumBoardComponent, selector: "bb-billpay-payment-multiple-bills-sum-board", inputs: ["totalAmount", "actionButtons", "inheritedId"] }, { type: i8.IconComponent, selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }, { type: i9.LoadButtonComponent, selector: "bb-load-button-ui", inputs: ["isLoading", "from", "size", "circle", "totalCount"], outputs: ["paramChange"] }, { type: i10.BillpayPaymentMultipleBillsSuccessComponent, selector: "bb-billpay-payment-multiple-bills-success", inputs: ["results"] }, { type: i11.BillpayPaymentDiscardChangesModalComponent, selector: "bb-billpay-payment-discard-changes-modal", inputs: ["title", "subtitle", "confirm-button-label", "cancel-button-label"], outputs: ["resolve"] }], directives: [{ type: i12.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i12.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i13.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], pipes: { "async": i12.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentMultipleBillsReviewComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-multiple-bills-review',
                    templateUrl: 'billpay-payment-multiple-bills-review.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [BillpayDiscardChangesModalService],
                }]
        }], ctorParameters: function () { return [{ type: i1.PayBillsStateService }, { type: i2.BillpayPaymentDataService }, { type: i3.PayBillsNavigationService }, { type: i4.ActivatedRoute }, { type: i2.BillpayDiscardChangesModalService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { failAlert: [{
                type: ViewChild,
                args: ['failAlert']
            }], onWindowUnload: [{
                type: HostListener,
                args: ['window:beforeunload', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLXJldmlldy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3BheS1iaWxscy1qb3VybmV5L3NyYy9jb21wb25lbnRzL2JpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy9iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtZWJpbGxzLXJldmlldy9iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMtcmV2aWV3LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcGF5LWJpbGxzLWpvdXJuZXkvc3JjL2NvbXBvbmVudHMvYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzL2JpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1lYmlsbHMtcmV2aWV3L2JpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy1yZXZpZXcuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsdUJBQXVCLEVBRXZCLFNBQVMsRUFFVCxZQUFZLEdBRWIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNMLGlDQUFpQyxFQUdqQyxxQkFBcUIsSUFBSSxPQUFPLEdBQ2pDLE1BQU0sbUNBQW1DLENBQUM7QUFFM0MsT0FBTyxFQUFFLFFBQVEsRUFBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQVd4RSxNQUFNLE9BQU8sMENBQTBDO0lBeUNyRCxZQUNtQixtQkFBeUMsRUFDekMsV0FBc0MsRUFDdEMsaUJBQTRDLEVBQzVDLEtBQXFCLEVBQ3JCLG1CQUFzRCxFQUMvRCxLQUF3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QyxTQUFTLEVBQUUsQ0FBQztTQUM3QztRQUNELE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxjQUFjLENBQUMsV0FBb0I7UUFDakMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNyRCxJQUFJLFdBQVcsRUFBRTtZQUNmLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNsQztJQUNILENBQUM7SUFFRCxNQUFNO1FBQ0osSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7O3dJQTNIVSwwQ0FBMEM7NEhBQTFDLDBDQUEwQyw2SUFGMUMsQ0FBQyxpQ0FBaUMsQ0FBQyxrSUMxQmhELG1xSUFvR0E7NEZEeEVhLDBDQUEwQztrQkFOdEQsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsMENBQTBDO29CQUNwRCxXQUFXLEVBQUUsc0RBQXNEO29CQUNuRSxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtvQkFDL0MsU0FBUyxFQUFFLENBQUMsaUNBQWlDLENBQUM7aUJBQy9DO3dTQWdCeUIsU0FBUztzQkFBaEMsU0FBUzt1QkFBQyxXQUFXO2dCQXlDdEIsY0FBYztzQkFEYixZQUFZO3VCQUFDLHFCQUFxQixFQUFFLENBQUMsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIFZpZXdDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgSG9zdExpc3RlbmVyLFxuICBPbkRlc3Ryb3ksXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlLFxuICBCaWxscGF5UGF5bWVudERhdGFTZXJ2aWNlLFxuICBQYXltZW50Rm9ybVN0YXRlLFxuICBCaWxscGF5VXRpbGl0eVNlcnZpY2UgYXMgVXRpbGl0eSxcbn0gZnJvbSAnQGJhY2tiYXNlL2JpbGxwYXktam91cm5leXMtY29tbW9uJztcbmltcG9ydCB7IFBheUJpbGxzTmF2aWdhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wYXktYmlsbHMtbmF2aWdhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IGZvcmtKb2luLCBPYnNlcnZhYmxlLCBvZiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgbWFwLCBtYXBUbywgdGFrZVVudGlsLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBQYXlCaWxsc1N0YXRlU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3BheS1iaWxscy1zdGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IFBheW1lbnRSZXN1bHQgfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9wYXltZW50Lm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLXJldmlldycsXG4gIHRlbXBsYXRlVXJsOiAnYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLXJldmlldy5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtCaWxscGF5RGlzY2FyZENoYW5nZXNNb2RhbFNlcnZpY2VdLFxufSlcbmV4cG9ydCBjbGFzcyBCaWxscGF5UGF5bWVudE11bHRpcGxlQmlsbHNSZXZpZXdDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgcHJpdmF0ZSBlZGl0TW9kZSA9IGZhbHNlO1xuICAvKipcbiAgICogRmxhZyBmb3IgcGF5bWVudCBlcnJvclxuICAgKi9cbiAgcGF5bWVudEVycm9yID0gZmFsc2U7XG4gIC8qKlxuICAgKiBGbGFnIGZvciBzdWJtaXR0aW5nIHBheW1lbnRcbiAgICovXG4gIHN1Ym1pdHRpbmdQYXltZW50ID0gZmFsc2U7XG4gIHJlYWRvbmx5IGlkID0gVXRpbGl0eS5nZW5lcmF0ZUlkKCk7XG4gIC8qKlxuICAgKiBSZWZyZW5jZSBmb3IgZmFpbCBhbGVydFxuICAgKi9cbiAgQFZpZXdDaGlsZCgnZmFpbEFsZXJ0JykgZmFpbEFsZXJ0ITogRWxlbWVudFJlZjtcbiAgLyoqXG4gICAqIExpc3Qgb2YgcGF5bWVudHNcbiAgICovXG4gIHBheW1lbnRzJCA9IHRoaXMucGF5bWVudFN0YXRlU2VydmljZS5wYXltZW50U3RhdGUucGlwZShcbiAgICB0YXAocGF5bWVudEZvcm1zID0+IHtcbiAgICAgIGlmICghcGF5bWVudEZvcm1zPy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5uYXZpZ2F0ZVRvRm9ybSh7IHJlbGF0aXZlVG86IHRoaXMucm91dGUucGFyZW50IH0pO1xuICAgICAgfVxuICAgIH0pLFxuICApO1xuICAvKipcbiAgICogQ2FycnkgdGhlIGFtb3VudCBmb3IgdG90YWwgYW1vdW50IHRvIGJlIHBhaWRcbiAgICovXG4gIHRvdGFsQW1vdW50JCA9IHRoaXMucGF5bWVudHMkLnBpcGUoXG4gICAgbWFwKHBheW1lbnRzID0+IHBheW1lbnRzPy5yZWR1Y2UoKGFjYzogbnVtYmVyLCBwYXltZW50OiBQYXltZW50Rm9ybVN0YXRlKSA9PiBhY2MgKyArcGF5bWVudC5hbW91bnQuYW1vdW50LCAwKSksXG4gICk7XG4gIC8qKlxuICAgKiBMaXN0IG9mIHJlc3BvbnNlcyByZXN1bHRzXG4gICAqL1xuICByZXN1bHRzPzogUGF5bWVudFJlc3VsdFtdID0gW107XG5cbiAgZ2V0IGlzRGlzY2FyZE1vZGFsT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNjYXJkTW9kYWxTZXJ2aWNlLmlzRGlzY2FyZE1vZGFsT3BlbjtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGF5bWVudFN0YXRlU2VydmljZTogUGF5QmlsbHNTdGF0ZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBkYXRhU2VydmljZTogQmlsbHBheVBheW1lbnREYXRhU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5hdmlnYXRpb25TZXJ2aWNlOiBQYXlCaWxsc05hdmlnYXRpb25TZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGlzY2FyZE1vZGFsU2VydmljZTogQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlLFxuICAgIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICApIHt9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OmJlZm9yZXVubG9hZCcsIFsnJGV2ZW50J10pXG4gIG9uV2luZG93VW5sb2FkKCRldmVudDogQmVmb3JlVW5sb2FkRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNjYXJkTW9kYWxPcGVuKSB7XG4gICAgICAkZXZlbnQucmV0dXJuVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXRob3MgdG8gc2VuZCBwYXltZW50IHRvIHNlcnZlclxuICAgKi9cbiAgb25QYXltZW50Q29uZmlybShwYXltZW50czogUGF5bWVudEZvcm1TdGF0ZVtdKSB7XG4gICAgdGhpcy5wYXltZW50RXJyb3IgPSBmYWxzZTtcbiAgICB0aGlzLnJlc3VsdHMgPSBbXTtcbiAgICB0aGlzLnN1Ym1pdHRpbmdQYXltZW50ID0gdHJ1ZTtcbiAgICBmb3JrSm9pbihcbiAgICAgIHBheW1lbnRzLm1hcChwYXltZW50ID0+XG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UuY3JlYXRlUGF5bWVudChwYXltZW50KS5waXBlKFxuICAgICAgICAgIG1hcFRvKHsgLi4ucGF5bWVudCwgc3VjY2VlZGVkOiB0cnVlIH0pLFxuICAgICAgICAgIGNhdGNoRXJyb3IoKCkgPT4gb2YoeyBzdWNjZWVkZWQ6IGZhbHNlLCAuLi5wYXltZW50IH0pKSxcbiAgICAgICAgKSxcbiAgICAgICksXG4gICAgKVxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgLnN1YnNjcmliZShhc3luYyByZXNwb25zZUxpc3QgPT4ge1xuICAgICAgICB0aGlzLnN1Ym1pdHRpbmdQYXltZW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGF5bWVudFN0YXRlU2VydmljZS5pc0Zvcm1Qcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHJlc3BvbnNlTGlzdC5maWx0ZXIocmVzcG9uc2UgPT4gIXJlc3BvbnNlPy5zdWNjZWVkZWQpO1xuICAgICAgICBlcnJvcnMubGVuZ3RoID09PSBwYXltZW50cy5sZW5ndGggPyB0aGlzLmFsbEZhaWxlZCgpIDogKHRoaXMucmVzdWx0cyA9IHJlc3BvbnNlTGlzdCk7XG4gICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgbmF2aWdhdGVUb0Zvcm0ocmVzZXRGb3JtVmFsdWU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmIChyZXNldEZvcm1WYWx1ZSkge1xuICAgICAgdGhpcy5wYXltZW50U3RhdGVTZXJ2aWNlLnJlc2V0KCk7XG4gICAgfVxuICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGVUb0Zvcm0oeyByZWxhdGl2ZVRvOiB0aGlzLnJvdXRlLnBhcmVudCB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWxsRmFpbGVkKCkge1xuICAgIHRoaXMucGF5bWVudFN0YXRlU2VydmljZS5pc0Zvcm1Qcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnN1Ym1pdHRpbmdQYXltZW50ID0gZmFsc2U7XG4gICAgdGhpcy5wYXltZW50RXJyb3IgPSB0cnVlO1xuICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgdGhpcy5mYWlsQWxlcnQ/Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xuICB9XG5cbiAgb3Blbk1vZGFsKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLnBheW1lbnRTdGF0ZVNlcnZpY2UuaXNGb3JtUHJvY2Vzc2luZyAmJiAhdGhpcy5lZGl0TW9kZSAmJiAhdGhpcy5wYXltZW50RXJyb3IpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpc2NhcmRNb2RhbFNlcnZpY2Uub3Blbk1vZGFsKCk7XG4gICAgfVxuICAgIHJldHVybiBvZih0cnVlKTtcbiAgfVxuXG4gIG9uQ2FuY2VsKCkge1xuICAgIHRoaXMubmF2aWdhdGVUb0Zvcm0oISF0aGlzLnBheW1lbnRFcnJvcik7XG4gIH1cblxuICBvbk1vZGFsUmVzb2x2ZShpc0NvbmZpcm1lZDogYm9vbGVhbikge1xuICAgIHRoaXMuZGlzY2FyZE1vZGFsU2VydmljZS5vbk1vZGFsUmVzb2x2ZShpc0NvbmZpcm1lZCk7XG4gICAgaWYgKGlzQ29uZmlybWVkKSB7XG4gICAgICB0aGlzLnBheW1lbnRTdGF0ZVNlcnZpY2UucmVzZXQoKTtcbiAgICB9XG4gIH1cblxuICBvbkVkaXQoKSB7XG4gICAgdGhpcy5lZGl0TW9kZSA9IHRydWU7XG4gICAgdGhpcy5uYXZpZ2F0ZVRvRm9ybSgpO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwicGF5bWVudHMkIHwgYXN5bmMgYXMgcGF5bWVudHNcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cInJlc3VsdHM/Lmxlbmd0aCA/IHN1Y2Nlc3NTY3JlZW4gOiByZXZpZXdUZW1wbGF0ZVwiPiA8L25nLWNvbnRhaW5lcj5cbiAgPG5nLXRlbXBsYXRlICNyZXZpZXdUZW1wbGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWxnIGJiLWJpbGxwYXktbXVsdGlwbGUtYmlsbHMtb3RoZXItcGF5ZWVzLWNhcmRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgPGRpdiAjZmFpbEFsZXJ0PlxuICAgICAgICAgIDxiYi1hbGVydC11aVxuICAgICAgICAgICAgdGl0bGU9XCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpblwiXG4gICAgICAgICAgICBpMThuLXRpdGxlPVwiQEBiaWxscGF5LXBheW1lbnRzLWpvdXJuZXkubXVsdGlwbGUtYmlsbHMuZmFpbC1tZXNzYWdlXCJcbiAgICAgICAgICAgIChjbG9zZSk9XCIoZmFsc2UpXCJcbiAgICAgICAgICAgIG1vZGlmaWVyPVwiZXJyb3JcIlxuICAgICAgICAgICAgZGF0YS1yb2xlPVwiZmFpbHVyZS1tZXNzYWdlXCJcbiAgICAgICAgICAgICpuZ0lmPVwicGF5bWVudEVycm9yXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgPC9iYi1hbGVydC11aT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxiYi1iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMtcmV2aWV3LXRhYmxlXG4gICAgICAgICAgW3BheW1lbnRzXT1cInBheW1lbnRzXCJcbiAgICAgICAgPjwvYmItYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLXJldmlldy10YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGJiLWJpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy1zdW0tYm9hcmRcbiAgICAgIFt0b3RhbEFtb3VudF09XCJ0b3RhbEFtb3VudCQgfCBhc3luY1wiXG4gICAgICBbYWN0aW9uQnV0dG9uc109XCJhY3Rpb25CdXR0b25zXCJcbiAgICAgIFtpbmhlcml0ZWRJZF09XCJpZFwiXG4gICAgPjwvYmItYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLXN1bS1ib2FyZD5cbiAgPC9uZy10ZW1wbGF0ZT5cbiAgPG5nLXRlbXBsYXRlICNhY3Rpb25CdXR0b25zPlxuICAgIDxkaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgY29sb3I9XCJsaW5rXCJcbiAgICAgICAgICBjbGFzcz1cImJ0bi1saW5rIGJiLXN0YWNrX19pdGVtIGJiLXN0YWNrX19pdGVtLS1zcGFjaW5nLW1kIGJiLWQtbm9uZSBiYi1kLW1kLWJsb2NrXCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJtdWx0aXBsZS1iaWxscy1jYW5jZWwtYnV0dG9uXCJcbiAgICAgICAgICBpMThuPVwiQEBiaWxscGF5LXBheW1lbnRzLWpvdXJuZXkubXVsdGlwbGUtYmlsbHMuYm9hcmQuY2FuY2VsLWJ1dHRvblwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uQ2FuY2VsKClcIlxuICAgICAgICA+XG4gICAgICAgICAgQ2FuY2VsXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgICAgY2xhc3M9XCJiYi1kLW5vbmUgYmItZC1tZC1ibG9jayBiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tc3BhY2luZy1tZFwiXG4gICAgICAgICAgZGF0YS1yb2xlPVwibXVsdGlwbGUtYmlsbHMtZWRpdC1idXR0b25cIlxuICAgICAgICAgIGkxOG49XCJAQGJpbGxwYXktcGF5bWVudHMtam91cm5leS5tdWx0aXBsZS1iaWxscy5ib2FyZC5lZGl0LWJ1dHRvblwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uRWRpdCgpXCJcbiAgICAgICAgPlxuICAgICAgICAgIEVkaXQgUGF5bWVudFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgY29sb3I9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgIFtjaXJjbGVdPVwidHJ1ZVwiXG4gICAgICAgICAgY2xhc3M9XCJiYi1kLW1kLW5vbmUgYmItc3RhY2tfX2l0ZW0gYmItc3RhY2tfX2l0ZW0tLXNwYWNpbmctbWRcIlxuICAgICAgICAgIGRhdGEtcm9sZT1cIm11bHRpcGxlLWJpbGxzLWVkaXQtYnV0dG9uXCJcbiAgICAgICAgICBpMThuPVwiQEBiaWxscGF5LXBheW1lbnRzLWpvdXJuZXkubXVsdGlwbGUtYmlsbHMuYm9hcmQuZWRpdC1idXR0b25cIlxuICAgICAgICAgIChjbGljayk9XCJvbkVkaXQoKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8YmItaWNvbi11aSBuYW1lPVwiZWRpdFwiPjwvYmItaWNvbi11aT5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxiYi1sb2FkLWJ1dHRvbi11aVxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tc3BhY2luZy1ub25lXCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJtdWx0aXBsZS1iaWxscy1jb25maXJtLWJ1dHRvblwiXG4gICAgICAgICAgW2lzTG9hZGluZ109XCJzdWJtaXR0aW5nUGF5bWVudFwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uUGF5bWVudENvbmZpcm0ocGF5bWVudHMpXCJcbiAgICAgICAgICBhdHRyLmFyaWEtZGVzY3JpYmVkYnk9XCJ0b3RhbC1hbW91bnQtbGFiZWwte3sgaWQgfX0gIHRvdGFsLWFtb3VudC17eyBpZCB9fVwiXG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBpMThuPVwiQEBiaWxscGF5LXBheW1lbnRzLWpvdXJuZXkubXVsdGlwbGUtYmlsbHMuYm9hcmQuY29uZmlybS1idXR0b25cIiBjbGFzcz1cImJiLWQtbm9uZSBiYi1kLW1kLWJsb2NrXCJcbiAgICAgICAgICAgID5Db25maXJtIFBheW1lbnQ8L3NwYW5cbiAgICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gaTE4bj1cIkBAYmlsbHBheS1wYXltZW50cy1qb3VybmV5Lm11bHRpcGxlLWJpbGxzLmJvYXJkLmNvbmZpcm0tYnV0dG9uLm1vYmlsZVwiIGNsYXNzPVwiYmItZC1tZC1ub25lXCJcbiAgICAgICAgICAgID5QYXk8L3NwYW5cbiAgICAgICAgICA+XG4gICAgICAgIDwvYmItbG9hZC1idXR0b24tdWk+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cbiAgPG5nLXRlbXBsYXRlICNzdWNjZXNzU2NyZWVuPlxuICAgIDxiYi1iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMtc3VjY2VzcyBbcmVzdWx0c109XCJyZXN1bHRzXCI+PC9iYi1iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMtc3VjY2Vzcz5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctY29udGFpbmVyPlxuXG48YmItYmlsbHBheS1wYXltZW50LWRpc2NhcmQtY2hhbmdlcy1tb2RhbFxuICAqbmdJZj1cImlzRGlzY2FyZE1vZGFsT3BlblwiXG4gIGRhdGEtcm9sZT1cImJpbGxwYXktcGF5bWVudC1yZXZpZXctcGFnZS1kaXNjYXJkLWNoYW5nZXMtbW9kYWxcIlxuICAocmVzb2x2ZSk9XCJvbk1vZGFsUmVzb2x2ZSgkZXZlbnQpXCJcbiAgdGl0bGU9XCJDYW5jZWwgQmlsbCBQYXltZW50cz9cIlxuICBpMThuLXRpdGxlPVwiRGlzY2FyZCBjaGFuZ2VzIG1vZGFsIGhlYWRlckBAYmlsbHBheS5tdWx0aXBsZS1iaWxscy5kaXNjYXJkLWNoYW5nZXMtbW9kYWwuaGVhZGVyXCJcbiAgc3VidGl0bGU9XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsIGJpbGwgcGF5bWVudHM/IEVudGVyZWQgZGF0YSB3aWxsIGJlIGxvc3QuXCJcbiAgaTE4bi1zdWJ0aXRsZT1cIkRpc2NhcmQgY2hhbmdlcyBtb2RhbCBib2R5QEBiaWxscGF5Lm11bHRpcGxlLWJpbGxzLmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5ib2R5XCJcbiAgY29uZmlybS1idXR0b24tbGFiZWw9XCJDYW5jZWwgUGF5bWVudHNcIlxuICBpMThuLWNvbmZpcm0tYnV0dG9uLWxhYmVsPVwiXG4gICAgY29uZmlybSBtb2RhbCBidXR0b258Q2FuY2VsIHBheW1lbnQgY29uZmlybWF0aW9uIGJ1dHRvbkBAYmlsbHBheS5tdWx0aXBsZS1iaWxscy5kaXNjYXJkLWNoYW5nZXMtbW9kYWwuY29uZmlybS1idXR0b25cIlxuICBjYW5jZWwtYnV0dG9uLWxhYmVsPVwiTm90IE5vd1wiXG4gIGkxOG4tY2FuY2VsLWJ1dHRvbi1sYWJlbD1cIlxuICAgIGNhbmNlbCBtb2RhbCBidXR0b258Q29udGludWUgd2l0aCBjdXJyZW50IHBheW1lbnQgYnV0dG9uQEBiaWxscGF5Lm11bHRpcGxlLWJpbGxzLmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5jYW5jZWwtYnV0dG9uXCJcbj48L2JiLWJpbGxwYXktcGF5bWVudC1kaXNjYXJkLWNoYW5nZXMtbW9kYWw+XG4iXX0=