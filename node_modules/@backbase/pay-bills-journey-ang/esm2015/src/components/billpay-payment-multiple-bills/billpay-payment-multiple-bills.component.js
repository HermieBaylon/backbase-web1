import { Component, ChangeDetectionStrategy, ViewChild, HostListener, } from '@angular/core';
import { BillpayUtilityService as Utility, EndTypes, LoadingState, PaymentServicesTypes, } from '@backbase/billpay-journeys-common';
import { map, shareReplay, skip, switchMap, take, takeUntil, tap } from 'rxjs/operators';
import { FrequencyKeys } from '@backbase/billpay-journeys-common';
import { of, Subject } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/billpay-journeys-common";
import * as i2 from "@angular/forms";
import * as i3 from "../../services/pay-bills-state.service";
import * as i4 from "../../services/pay-bills-navigation.service";
import * as i5 from "@angular/router";
import * as i6 from "../../services/pay-bills-journey-config.service";
import * as i7 from "@backbase/ui-ang/notification";
import * as i8 from "@backbase/ui-ang/header";
import * as i9 from "./billpay-payment-multiple-bills-list/billpay-payment-multiple-bills-list.component";
import * as i10 from "./billpay-payment-multiple-bills-sum-board/billpay-payment-multiple-bills-sum-board.component";
import * as i11 from "@backbase/ui-ang/loading-indicator";
import * as i12 from "@backbase/ui-ang/empty-state";
import * as i13 from "../billpay-payment-single-bill/billpay-payment-discard-changes-modal/billpay-payment-discard-changes-modal.component";
import * as i14 from "@angular/common";
import * as i15 from "@backbase/ui-ang/button";
export class BillpayPaymentMultipleBillsComponent {
    constructor(payeeDataService, fb, scheduleService, paymentStateService, navigationService, route, paymentDataService, configService, notificationService, discardModalService, cdRef) {
        this.payeeDataService = payeeDataService;
        this.fb = fb;
        this.scheduleService = scheduleService;
        this.paymentStateService = paymentStateService;
        this.navigationService = navigationService;
        this.route = route;
        this.paymentDataService = paymentDataService;
        this.configService = configService;
        this.notificationService = notificationService;
        this.discardModalService = discardModalService;
        this.cdRef = cdRef;
        this.paymentsFormGroup = this.fb.group({});
        this.totalAmount$ = this.paymentsFormGroup.valueChanges.pipe(map((forms) => Object.values(forms).reduce((acc, form) => acc + +form.amount.amount, 0)));
        this.selectedDeleteEbills$ = this.payeeDataService.selectedDeleteEbills;
        this.selectedDeletePayee$ = this.payeeDataService.selectedDeletePayee;
        this.destroy$ = new Subject();
        this.notificationMessageTemplate = '';
        this.notificationHeaderTemplate = '';
        this.isDeleteModalOpened = false;
        this.isDeleteEbillsModalOpen = false;
        this.isNavigateModalOpened = false;
        this.notificationType = '';
        this.id = Utility.generateId();
        this.hasOvernightCheck = (services) => {
            return !!(services === null || services === void 0 ? void 0 : services.find(item => item.paymentServiceType === PaymentServicesTypes.Overnight));
        };
    }
    get isErrorState() {
        const payeeState = this.payeeDataService.payeesLoadingState;
        const accountState = this.paymentDataService.accountsLoadingState;
        return payeeState === 'error' || accountState === LoadingState.Error;
    }
    get isDiscardModalOpen() {
        return this.discardModalService.isDiscardModalOpen;
    }
    onWindowUnload($event) {
        if ((this.paymentsFormGroup.touched || this.paymentStateService.isFormProcessing) && !this.isDiscardModalOpen) {
            $event.returnValue = true;
        }
    }
    ngOnInit() {
        this.payeeSummariesByEbillObservable$ = this.payeeDataService.getPayees().pipe(tap(payeeSummariesByEbill => {
            const { ebillsEnabled = [], ebillsNotEnabled = [] } = payeeSummariesByEbill || {};
            this.payeeSummaries = [...ebillsEnabled, ...ebillsNotEnabled];
            this.createForm(this.payeeSummaries);
            if (this.paymentStateService.isFormProcessing) {
                this.patchPaymentDataToForm();
            }
        }), shareReplay());
        this.accounts$ = this.paymentDataService.getPayeesAndAccounts().pipe(map(data => {
            var _a;
            this.accounts = data.accounts;
            this.patchFormValue({ accountFrom: (_a = data.accounts) === null || _a === void 0 ? void 0 : _a[0] });
            return data.accounts;
        }), shareReplay());
        this.payeeDataService.selectedDeletePayee
            .pipe(takeUntil(this.destroy$), skip(1))
            .subscribe(payee => (payee ? (this.isDeleteModalOpened = true) : this.openNavigateModal()));
        this.payeeDataService.selectedDeleteEbills
            .pipe(takeUntil(this.destroy$), skip(1))
            .subscribe(payee => (payee ? (this.isDeleteEbillsModalOpen = true) : this.openNavigateModal()));
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    handleClearForm() {
        this.patchFormValue();
        this.paymentsFormGroup.markAsUntouched();
        this.paymentStateService.isFormProcessing = false;
    }
    defaultFormState(payeeSummary) {
        var _a;
        const address = this.hasOvernightCheck(payeeSummary === null || payeeSummary === void 0 ? void 0 : payeeSummary.paymentServices)
            ? payeeSummary === null || payeeSummary === void 0 ? void 0 : payeeSummary.overnightDeliveryAddress
            : {};
        const paymentServiceDate = this.scheduleService.estimatedPaymentServiceDate(payeeSummary === null || payeeSummary === void 0 ? void 0 : payeeSummary.paymentServices, PaymentServicesTypes.Regular);
        const minDate = this.scheduleService.estimatedPaymentServiceDate(payeeSummary === null || payeeSummary === void 0 ? void 0 : payeeSummary.paymentServices, PaymentServicesTypes.Regular);
        return {
            accountFrom: (_a = this.accounts) === null || _a === void 0 ? void 0 : _a[0],
            payeeTo: payeeSummary,
            amount: {
                amount: ' ',
                currency: this.configService.paymentDefaultCurrency,
            },
            memo: '',
            overnightDeliveryAddress: {
                address1: address === null || address === void 0 ? void 0 : address.address1,
                address2: address === null || address === void 0 ? void 0 : address.address2,
                city: address === null || address === void 0 ? void 0 : address.city,
                state: address === null || address === void 0 ? void 0 : address.state,
                postalCode: address === null || address === void 0 ? void 0 : address.postalCode,
            },
            schedule: {
                frequency: FrequencyKeys.Once,
                startDate: minDate,
                sendDate: minDate,
                repeat: 1,
                endDate: minDate,
                endType: EndTypes.Never,
                paymentService: this.defaultPaymentService,
                paymentServiceDate,
                alertPendingCheckbox: false,
                alertSentCheckbox: false,
                alertLastPendingCheckbox: false,
            },
        };
    }
    areBothListsPresent({ ebillsEnabled, ebillsNotEnabled }) {
        return Boolean((ebillsEnabled === null || ebillsEnabled === void 0 ? void 0 : ebillsEnabled.length) && (ebillsNotEnabled === null || ebillsNotEnabled === void 0 ? void 0 : ebillsNotEnabled.length));
    }
    createForm(payeeSummaries) {
        payeeSummaries.forEach(payee => {
            var _a;
            const defaults = this.defaultFormState(payee);
            (_a = this.paymentsFormGroup) === null || _a === void 0 ? void 0 : _a.registerControl(payee.id, this.fb.group({
                accountFrom: [defaults.accountFrom],
                payeeTo: [defaults.payeeTo],
                amount: this.fb.group({
                    amount: [defaults.amount.amount],
                    currency: [defaults.amount.currency],
                }),
                memo: [defaults.memo],
                overnightDeliveryAddress: this.createOvernightAddressFormGroup(payee),
                schedule: this.fb.group({
                    frequency: defaults.schedule.frequency,
                    startDate: [defaults.schedule.startDate],
                    sendDate: [defaults.schedule.sendDate],
                    repeat: [defaults.schedule.repeat],
                    endDate: [defaults.schedule.endDate],
                    endType: [defaults.schedule.endType],
                    paymentService: [defaults.schedule.paymentService],
                    paymentServiceDate: [defaults.schedule.paymentServiceDate],
                    alertPendingCheckbox: [defaults.schedule.alertPendingCheckbox],
                    alertSentCheckbox: [defaults.schedule.alertSentCheckbox],
                    alertLastPendingCheckbox: [defaults.schedule.alertLastPendingCheckbox],
                }),
            }));
        });
    }
    onModalResolve(isConfirmed) {
        this.discardModalService.onModalResolve(isConfirmed);
    }
    createOvernightAddressFormGroup(payeeSummary) {
        const address = this.hasOvernightCheck(payeeSummary.paymentServices)
            ? payeeSummary.overnightDeliveryAddress
            : {};
        const paymentService = this.defaultPaymentService(payeeSummary);
        const isOvernightAddressDisabled = !(paymentService === null || paymentService === void 0 ? void 0 : paymentService.paymentServiceType) || paymentService.paymentServiceType !== PaymentServicesTypes.Overnight;
        return this.fb.group({
            address1: [
                {
                    value: address === null || address === void 0 ? void 0 : address.address1,
                    disabled: isOvernightAddressDisabled,
                },
            ],
            address2: [
                {
                    value: address === null || address === void 0 ? void 0 : address.address2,
                    disabled: isOvernightAddressDisabled,
                },
            ],
            city: [
                {
                    value: address === null || address === void 0 ? void 0 : address.city,
                    disabled: isOvernightAddressDisabled,
                },
            ],
            state: [
                {
                    value: address === null || address === void 0 ? void 0 : address.state,
                    disabled: isOvernightAddressDisabled,
                },
            ],
            postalCode: [
                {
                    value: address === null || address === void 0 ? void 0 : address.postalCode,
                    disabled: isOvernightAddressDisabled,
                },
            ],
        });
    }
    defaultPaymentService(payee) {
        var _a;
        return (_a = payee === null || payee === void 0 ? void 0 : payee.paymentServices) === null || _a === void 0 ? void 0 : _a.find((item) => item.paymentServiceType === PaymentServicesTypes.Regular);
    }
    handleSubmit() {
        const paymentForms = Object.entries(this.paymentsFormGroup.value)
            .filter(([_id, form]) => !!+form.amount.amount)
            .map(([_id, form]) => this.processFormData(form));
        this.paymentStateService.isFormProcessing = true;
        this.paymentStateService.updatePaymentState(paymentForms);
        this.navigationService.navigateToReview({ relativeTo: this.route.parent });
    }
    processFormData(data) {
        const startDate = data.schedule.frequency === FrequencyKeys.Once ? data.schedule.sendDate : data.schedule.startDate;
        switch (data.schedule.endType) {
            case EndTypes.After:
                return Object.assign(Object.assign({}, data), { schedule: Object.assign(Object.assign({}, data.schedule), { startDate: startDate || '', endDate: new Date(this.scheduleService.estimatedEndDate(data.schedule.startDate, data.schedule.frequency, data.schedule.repeat)).toISOString() }) });
            case EndTypes.On:
                return Object.assign(Object.assign({}, data), { schedule: Object.assign(Object.assign({}, data.schedule), { startDate: startDate || '', repeat: this.scheduleService.estimatedOccurences(data.schedule.startDate, data.schedule.endDate || data.schedule.startDate, data.schedule.frequency) }) });
            default:
                return Object.assign(Object.assign({}, data), { schedule: Object.assign(Object.assign({}, data.schedule), { startDate: startDate || '' }) });
        }
    }
    patchFormValue(value) {
        var _a;
        (_a = this.payeeSummaries) === null || _a === void 0 ? void 0 : _a.forEach(payee => {
            const formValue = value || this.defaultFormState(payee);
            this.paymentsFormGroup.controls[payee.id].patchValue(formValue);
        });
    }
    onDeleteEbills(resolve) {
        this.isDeleteEbillsModalOpen = false;
        if (resolve) {
            this.deleteEbills()
                .pipe(take(1))
                .subscribe(() => {
                this.deletionNotify('ebills');
            });
        }
    }
    onDeletePayee(resolve) {
        this.isDeleteModalOpened = false;
        if (resolve) {
            this.deletePayee()
                .pipe(take(1))
                .subscribe(() => {
                this.deletionNotify('delete');
            });
        }
    }
    onNavigateToPayments(hasNavigated) {
        if (hasNavigated) {
            this.navigationService.navigateToPayments();
        }
        this.isNavigateModalOpened = false;
    }
    deletionNotify(type) {
        this.payeeDataService.reloadPayees();
        this.notificationType = type;
        this.notificationService.showNotification({
            header: this.notificationHeaderTemplate,
            message: this.notificationMessageTemplate,
            modifier: 'success',
            ttl: this.configService.notificationDismissTime,
        });
    }
    openNavigateModal() {
        this.isNavigateModalOpened = true;
    }
    openModal() {
        this.cdRef.markForCheck();
        return this.paymentsFormGroup.touched || this.paymentStateService.isFormProcessing
            ? this.discardModalService.openModal()
            : of(true);
    }
    patchPaymentDataToForm() {
        this.paymentStateService.paymentState.pipe(take(1)).subscribe(paymentsState => {
            if (paymentsState) {
                paymentsState.forEach(payment => {
                    var _a;
                    (_a = this.paymentsFormGroup.get(payment.payeeTo.id)) === null || _a === void 0 ? void 0 : _a.patchValue(payment);
                });
            }
        });
    }
    deletePayee() {
        return this.payeeDataService.selectedDeletePayee.pipe(switchMap((payee) => payee ? this.payeeDataService.deletePayee(payee.id, payee.electronic) : of()));
    }
    deleteEbills() {
        return this.payeeDataService.selectedDeleteEbills.pipe(switchMap((payee) => (payee ? this.payeeDataService.deleteEbills(payee.id) : of())));
    }
}
BillpayPaymentMultipleBillsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentMultipleBillsComponent, deps: [{ token: i1.BillpayPayeeDataService }, { token: i2.FormBuilder }, { token: i1.BillpayPaymentScheduleService }, { token: i3.PayBillsStateService }, { token: i4.PayBillsNavigationService }, { token: i5.ActivatedRoute }, { token: i1.BillpayPaymentDataService }, { token: i6.PayBillsJourneyConfigService }, { token: i7.NotificationService }, { token: i1.BillpayDiscardChangesModalService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentMultipleBillsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentMultipleBillsComponent, selector: "bb-billpay-payment-multiple-bills", host: { listeners: { "window:beforeunload": "onWindowUnload($event)" } }, viewQueries: [{ propertyName: "notificationMessageTemplate", first: true, predicate: ["notificationMessage"], descendants: true }, { propertyName: "notificationHeaderTemplate", first: true, predicate: ["notificationHeader"], descendants: true }], ngImport: i0, template: "<ng-container *ngIf=\"!isErrorState; else errorState\">\n  <ng-container\n    *ngIf=\"(accounts$ | async) && payeeSummariesByEbillObservable$ | async as ebillGroupedData; else loadingState\"\n  >\n    <ng-container\n      *ngIf=\"\n        (ebillGroupedData.ebillsEnabled.length || ebillGroupedData.ebillsNotEnabled.length) &&\n          (accounts$ | async)?.length;\n        else emptyState\n      \"\n    >\n      <div class=\"bb-billpay-multiple-bills\">\n        <div\n          class=\"bb-block bb-block--lg\"\n          *ngIf=\"ebillGroupedData.ebillsEnabled.length\"\n          data-role=\"payees-with-active-e-bills-list\"\n        >\n          <div class=\"card card-lg\">\n            <div class=\"card-body\">\n              <div class=\"bb-block bb-block--lg\">\n                <bb-header-ui\n                  headingType=\"h2\"\n                  *ngIf=\"areBothListsPresent(ebillGroupedData)\"\n                  data-role=\"sub-header\"\n                  heading=\"Payees with Active eBills\"\n                  i18n-heading=\"\n                    Payees with eBills title|Title for the list of payees with eBills\n                    enabled@@billpay-payments-journey.multiple-bills.title.payees-with-ebills\"\n                >\n                </bb-header-ui>\n              </div>\n              <bb-billpay-payment-multiple-bills-list\n                [paymentsFormGroup]=\"paymentsFormGroup\"\n                [payeeSummaries]=\"ebillGroupedData.ebillsEnabled\"\n                [accounts]=\"accounts$ | async\"\n                [isForEbills]=\"true\"\n              ></bb-billpay-payment-multiple-bills-list>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"bb-billpay-multiple-bills-other-payees-card card card-lg\"\n          data-role=\"all-other-payees-list\"\n          *ngIf=\"ebillGroupedData.ebillsNotEnabled.length\"\n        >\n          <div class=\"card-body\">\n            <div class=\"bb-block bb-block--lg\">\n              <bb-header-ui\n                headingType=\"h2\"\n                *ngIf=\"areBothListsPresent(ebillGroupedData)\"\n                data-role=\"sub-header\"\n                heading=\"All Other Payees\"\n                i18n-heading=\"\n                  Payees without eBills title|Title for the list of payees that do not have eBills\n                  enabled@@billpay-payments-journey.multiple-bills.title.other-payees\"\n              >\n              </bb-header-ui>\n            </div>\n            <bb-billpay-payment-multiple-bills-list\n              [paymentsFormGroup]=\"paymentsFormGroup\"\n              [payeeSummaries]=\"ebillGroupedData.ebillsNotEnabled\"\n              [accounts]=\"accounts$ | async\"\n            ></bb-billpay-payment-multiple-bills-list>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payment-multiple-bills-sum-board\n  [totalAmount]=\"totalAmount$ | async\"\n  [actionButtons]=\"actionButtons\"\n  [inheritedId]=\"id\"\n></bb-billpay-payment-multiple-bills-sum-board>\n\n<ng-template #loadingState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #emptyState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body bb-state-container\">\n      <bb-empty-state-ui\n        data-role=\"empty-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"assignment-ind\"\n        subtitle=\"Add a payee to make a bill payment\"\n        i18n-subtitle=\"\n          Add a payee to make a bill payment|Payee List no payees\n          subtitle@@bb-billpay-manage-widget-ang.bb-empty-state-ui.subtitle\"\n        title=\"No Payees\"\n        i18n-title=\"\n          No payees state text|Payee List no payees\n          title@@billpay-payments-journey.multiple-bills.bb-empty-state-ui.title\"\n      >\n      </bb-empty-state-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #errorState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <bb-empty-state-ui\n        data-role=\"error-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"error-outline\"\n        subtitle=\"Try to reload the page or contact support\"\n        i18n-subtitle=\"\n          Try to reload the page or contact the support.|Payee List loading\n          subtitle@@bb-billpay-payee-list-widget-ang.loading.subtitle\"\n        title=\"Payee list is not loading\"\n        i18n-title=\"Payee list is not loading|Payee List loading title@@bb-billpay-payee-list-widget-ang.loading.title\"\n      >\n      </bb-empty-state-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #actionButtons>\n  <div>\n    <div class=\"bb-stack\">\n      <button\n        bbButton\n        color=\"link\"\n        class=\"bb-stack__item bb-stack__item--spacing-md\"\n        (click)=\"handleClearForm()\"\n        data-role=\"multiple-bills-clear-button\"\n        i18n=\"@@billpay-payments-journey.multiple-bills.board.clear-button\"\n      >\n        Clear All\n      </button>\n      <button\n        bbButton\n        color=\"primary\"\n        class=\"bb-button-bar__button bb-stack__item bb-stack__item--spacing-none\"\n        data-role=\"multiple-bills-confirm-button\"\n        i18n=\"@@billpay-payments-journey.multiple-bills.board.confirm-button\"\n        attr.aria-describedby=\"total-amount-label-{{ id }}  total-amount-{{ id }}\"\n        (click)=\"handleSubmit()\"\n      >\n        Confirm Payment\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<bb-billpay-payee-delete-modal\n  *ngIf=\"isDeleteModalOpened\"\n  (resolve)=\"onDeletePayee($event)\"\n></bb-billpay-payee-delete-modal>\n\n<bb-billpay-ebills-delete-modal\n  *ngIf=\"isDeleteEbillsModalOpen\"\n  (resolve)=\"onDeleteEbills($event)\"\n></bb-billpay-ebills-delete-modal>\n\n<bb-billpay-payee-navigate-modal\n  *ngIf=\"isNavigateModalOpened\"\n  (resolve)=\"onNavigateToPayments($event)\"\n></bb-billpay-payee-navigate-modal>\n\n<ng-template #notificationMessage>\n  <div [ngSwitch]=\"notificationType\">\n    <div *ngSwitchCase=\"'ebills'\">\n      <span\n        *ngIf=\"selectedDeleteEbills$ | async as payee\"\n        i18n=\"\n          stop ebill notification message|Payee stop ebill confirmation success notification\n          message@@billpay-payee-list.stop-ebill-confirm.notification.message\"\n        >eBills for {{ payee.nickName ? payee.nickName + ' (' + payee.name + ')' : payee.name }} has been stopped\n        successfully</span\n      >\n    </div>\n    <div *ngSwitchCase=\"'delete'\">\n      <span\n        *ngIf=\"selectedDeletePayee$ | async as payee\"\n        i18n=\"\n          delete payee notification message|Payee delete confirmation success notification\n          message@@billpay-payee-list.delete-payee-confirm.notification.message\"\n        >The payee {{ payee.nickName ? payee.nickName + ' (' + payee.name + ')' : payee.name }} has been deleted\n        successfully</span\n      >\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <div [ngSwitch]=\"notificationType\">\n    <span\n      *ngSwitchCase=\"'ebills'\"\n      class=\"bb-text-bold\"\n      i18n=\"\n        eBills stopped notification header|eBills stopped confirmation success notification\n        header@@billpay-payee-list.confirm.notification.header\"\n      >eBills stopped</span\n    >\n    <span\n      *ngSwitchCase=\"'delete'\"\n      class=\"bb-text-bold\"\n      i18n=\"\n        delete payee notification header|Payee delete confirmation success notification\n        header@@billpay-payee-list.confirm.notification.header\"\n      >Payee deleted</span\n    >\n  </div>\n</ng-template>\n\n<bb-billpay-payment-discard-changes-modal\n  *ngIf=\"isDiscardModalOpen\"\n  data-role=\"billpay-payment-review-page-discard-changes-modal\"\n  (resolve)=\"onModalResolve($event)\"\n  title=\"Cancel Bill Payments?\"\n  i18n-title=\"Discard changes modal header@@billpay.multiple-bills.discard-changes-modal.header\"\n  subtitle=\"Are you sure you want to cancel bill payments? Entered data will be lost.\"\n  i18n-subtitle=\"Discard changes modal body@@billpay.multiple-bills.discard-changes-modal.body\"\n  confirm-button-label=\"Cancel payment\"\n  i18n-confirm-button-label=\"\n    confirm modal button|Cancel payment confirmation button@@billpay.multiple-bills.discard-changes-modal.confirm-button\"\n  cancel-button-label=\"Continue with payment\"\n  i18n-cancel-button-label=\"\n    cancel modal button|Continue with current payment button@@billpay.multiple-bills.discard-changes-modal.cancel-button\"\n></bb-billpay-payment-discard-changes-modal>\n", components: [{ type: i8.HeaderComponent, selector: "bb-header-ui", inputs: ["headingClasses", "headingType", "heading"] }, { type: i9.BillpayPaymentMultipleBillsListComponent, selector: "bb-billpay-payment-multiple-bills-list", inputs: ["payeeSummaries", "paymentsFormGroup", "accounts", "isForEbills"] }, { type: i10.BillpayPaymentMultipleBillsSumBoardComponent, selector: "bb-billpay-payment-multiple-bills-sum-board", inputs: ["totalAmount", "actionButtons", "inheritedId"] }, { type: i11.LoadingIndicatorComponent, selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i12.EmptyStateComponent, selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }, { type: i1.ӨBillpayPayeeDeleteModalComponent, selector: "bb-billpay-payee-delete-modal", outputs: ["resolve"] }, { type: i1.ӨBillpayEbillsDeleteModalComponent, selector: "bb-billpay-ebills-delete-modal", outputs: ["resolve"] }, { type: i1.ӨBillpayPayeeNavigateModalComponent, selector: "bb-billpay-payee-navigate-modal", outputs: ["resolve"] }, { type: i13.BillpayPaymentDiscardChangesModalComponent, selector: "bb-billpay-payment-discard-changes-modal", inputs: ["title", "subtitle", "confirm-button-label", "cancel-button-label"], outputs: ["resolve"] }], directives: [{ type: i14.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i15.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i14.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i14.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }], pipes: { "async": i14.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentMultipleBillsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-multiple-bills',
                    templateUrl: './billpay-payment-multiple-bills.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.BillpayPayeeDataService }, { type: i2.FormBuilder }, { type: i1.BillpayPaymentScheduleService }, { type: i3.PayBillsStateService }, { type: i4.PayBillsNavigationService }, { type: i5.ActivatedRoute }, { type: i1.BillpayPaymentDataService }, { type: i6.PayBillsJourneyConfigService }, { type: i7.NotificationService }, { type: i1.BillpayDiscardChangesModalService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { notificationMessageTemplate: [{
                type: ViewChild,
                args: ['notificationMessage']
            }], notificationHeaderTemplate: [{
                type: ViewChild,
                args: ['notificationHeader']
            }], onWindowUnload: [{
                type: HostListener,
                args: ['window:beforeunload', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcGF5LWJpbGxzLWpvdXJuZXkvc3JjL2NvbXBvbmVudHMvYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzL2JpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3BheS1iaWxscy1qb3VybmV5L3NyYy9jb21wb25lbnRzL2JpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy9iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCx1QkFBdUIsRUFFdkIsU0FBUyxFQUdULFlBQVksR0FFYixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBSUwscUJBQXFCLElBQUksT0FBTyxFQUNoQyxRQUFRLEVBQ1IsWUFBWSxFQUNaLG9CQUFvQixHQUNyQixNQUFNLG1DQUFtQyxDQUFDO0FBRzNDLE9BQU8sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUd6RixPQUFPLEVBQUUsYUFBYSxFQUEyQyxNQUFNLG1DQUFtQyxDQUFDO0FBRzNHLE9BQU8sRUFBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQVUvQyxNQUFNLE9BQU8sb0NBQW9DO0lBMEMvQyxZQUNtQixnQkFBeUMsRUFDekMsRUFBZSxFQUNmLGVBQThDLEVBQzlDLG1CQUF5QyxFQUN6QyxpQkFBNEMsRUFDNUMsS0FBcUIsRUFDckIsa0JBQTZDLEVBQzdDLGFBQTJDLEVBQzND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Q3RDakQsMGhSQXFPQTs0RkQvTGEsb0NBQW9DO2tCQUxoRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxtQ0FBbUM7b0JBQzdDLFdBQVcsRUFBRSxpREFBaUQ7b0JBQzlELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2lCQUNoRDtpZUF1Qm1DLDJCQUEyQjtzQkFBNUQsU0FBUzt1QkFBQyxxQkFBcUI7Z0JBQ0MsMEJBQTBCO3NCQUExRCxTQUFTO3VCQUFDLG9CQUFvQjtnQkFhL0IsY0FBYztzQkFEYixZQUFZO3VCQUFDLHFCQUFxQixFQUFFLENBQUMsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgT25Jbml0LFxuICBWaWV3Q2hpbGQsXG4gIFRlbXBsYXRlUmVmLFxuICBPbkRlc3Ryb3ksXG4gIEhvc3RMaXN0ZW5lcixcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Hcm91cCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7XG4gIEJpbGxwYXlEaXNjYXJkQ2hhbmdlc01vZGFsU2VydmljZSxcbiAgQmlsbHBheVBheW1lbnREYXRhU2VydmljZSxcbiAgQmlsbHBheVBheW1lbnRTY2hlZHVsZVNlcnZpY2UsXG4gIEJpbGxwYXlVdGlsaXR5U2VydmljZSBhcyBVdGlsaXR5LFxuICBFbmRUeXBlcyxcbiAgTG9hZGluZ1N0YXRlLFxuICBQYXltZW50U2VydmljZXNUeXBlcyxcbn0gZnJvbSAnQGJhY2tiYXNlL2JpbGxwYXktam91cm5leXMtY29tbW9uJztcbmltcG9ydCB7IEh0dHBSZXNwb25zZSB9IGZyb20gJ0BiYWNrYmFzZS9mb3VuZGF0aW9uLWFuZy93ZWItc2RrJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IG1hcCwgc2hhcmVSZXBsYXksIHNraXAsIHN3aXRjaE1hcCwgdGFrZSwgdGFrZVVudGlsLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBBY2NvdW50LCBBZGRyZXNzLCBQYXllZVN1bW1hcnksIFBheW1lbnRTZXJ2aWNlLCBQYXltZW50U2VydmljZVN1bW1hcnkgfSBmcm9tICdAYmFja2Jhc2UvZGF0YS1hbmcvYmlsbHBheSc7XG5pbXBvcnQgeyBCaWxscGF5UGF5ZWVEYXRhU2VydmljZSB9IGZyb20gJ0BiYWNrYmFzZS9iaWxscGF5LWpvdXJuZXlzLWNvbW1vbic7XG5pbXBvcnQgeyBGcmVxdWVuY3lLZXlzLCBQYXllZVN1bW1hcmllc0J5RWJpbGwsIFBheW1lbnRGb3JtU3RhdGUgfSBmcm9tICdAYmFja2Jhc2UvYmlsbHBheS1qb3VybmV5cy1jb21tb24nO1xuXG5pbXBvcnQgeyBQYXlCaWxsc1N0YXRlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BheS1iaWxscy1zdGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQYXlCaWxsc05hdmlnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcGF5LWJpbGxzLW5hdmlnYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyBQYXlCaWxsc0pvdXJuZXlDb25maWdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcGF5LWJpbGxzLWpvdXJuZXktY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJ0BiYWNrYmFzZS91aS1hbmcvbm90aWZpY2F0aW9uJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2JpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBCaWxscGF5UGF5bWVudE11bHRpcGxlQmlsbHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIHBheWVlU3VtbWFyaWVzQnlFYmlsbE9ic2VydmFibGUkPzogT2JzZXJ2YWJsZTxQYXllZVN1bW1hcmllc0J5RWJpbGwgfCB1bmRlZmluZWQ+O1xuICBwcml2YXRlIHBheWVlU3VtbWFyaWVzPzogUGF5ZWVTdW1tYXJ5W107XG4gIHByaXZhdGUgYWNjb3VudHM/OiBBY2NvdW50W107XG4gIHBheW1lbnRzRm9ybUdyb3VwID0gdGhpcy5mYi5ncm91cCh7fSk7XG4gIHRvdGFsQW1vdW50JDogT2JzZXJ2YWJsZTxudW1iZXI+ID0gdGhpcy5wYXltZW50c0Zvcm1Hcm91cC52YWx1ZUNoYW5nZXMucGlwZShcbiAgICBtYXAoKGZvcm1zOiBGb3JtR3JvdXApID0+XG4gICAgICBPYmplY3QudmFsdWVzKGZvcm1zKS5yZWR1Y2UoKGFjYzogbnVtYmVyLCBmb3JtOiBQYXltZW50Rm9ybVN0YXRlKSA9PiBhY2MgKyArZm9ybS5hbW91bnQuYW1vdW50LCAwKSxcbiAgICApLFxuICApO1xuICBhY2NvdW50cyQ/OiBPYnNlcnZhYmxlPEFjY291bnRbXT47XG5cbiAgcmVhZG9ubHkgc2VsZWN0ZWREZWxldGVFYmlsbHMkOiBPYnNlcnZhYmxlPFBheWVlU3VtbWFyeSB8IHVuZGVmaW5lZD4gPSB0aGlzLnBheWVlRGF0YVNlcnZpY2Uuc2VsZWN0ZWREZWxldGVFYmlsbHM7XG4gIHJlYWRvbmx5IHNlbGVjdGVkRGVsZXRlUGF5ZWUkOiBPYnNlcnZhYmxlPFBheWVlU3VtbWFyeSB8IHVuZGVmaW5lZD4gPSB0aGlzLnBheWVlRGF0YVNlcnZpY2Uuc2VsZWN0ZWREZWxldGVQYXllZTtcblxuICBnZXQgaXNFcnJvclN0YXRlKCkge1xuICAgIGNvbnN0IHBheWVlU3RhdGUgPSB0aGlzLnBheWVlRGF0YVNlcnZpY2UucGF5ZWVzTG9hZGluZ1N0YXRlO1xuICAgIGNvbnN0IGFjY291bnRTdGF0ZSA9IHRoaXMucGF5bWVudERhdGFTZXJ2aWNlLmFjY291bnRzTG9hZGluZ1N0YXRlO1xuICAgIHJldHVybiBwYXllZVN0YXRlID09PSAnZXJyb3InIHx8IGFjY291bnRTdGF0ZSA9PT0gTG9hZGluZ1N0YXRlLkVycm9yO1xuICB9XG4gIHByaXZhdGUgcmVhZG9ubHkgZGVzdHJveSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIEBWaWV3Q2hpbGQoJ25vdGlmaWNhdGlvbk1lc3NhZ2UnKSBub3RpZmljYXRpb25NZXNzYWdlVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gfCBzdHJpbmcgPSAnJztcbiAgQFZpZXdDaGlsZCgnbm90aWZpY2F0aW9uSGVhZGVyJykgbm90aWZpY2F0aW9uSGVhZGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gfCBzdHJpbmcgPSAnJztcblxuICBpc0RlbGV0ZU1vZGFsT3BlbmVkID0gZmFsc2U7XG4gIGlzRGVsZXRlRWJpbGxzTW9kYWxPcGVuID0gZmFsc2U7XG4gIGlzTmF2aWdhdGVNb2RhbE9wZW5lZCA9IGZhbHNlO1xuICBub3RpZmljYXRpb25UeXBlID0gJyc7XG4gIHJlYWRvbmx5IGlkID0gVXRpbGl0eS5nZW5lcmF0ZUlkKCk7XG5cbiAgZ2V0IGlzRGlzY2FyZE1vZGFsT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNjYXJkTW9kYWxTZXJ2aWNlLmlzRGlzY2FyZE1vZGFsT3BlbjtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpiZWZvcmV1bmxvYWQnLCBbJyRldmVudCddKVxuICBvbldpbmRvd1VubG9hZCgkZXZlbnQ6IEJlZm9yZVVubG9hZEV2ZW50KSB7XG4gICAgaWYgKCh0aGlzLnBheW1lbnRzRm9ybUdyb3VwLnRvdWNoZWQgfHwgdGhpcy5wYXltZW50U3RhdGVTZXJ2aWNlLmlzRm9ybVByb2Nlc3NpbmcpICYmICF0aGlzLmlzRGlzY2FyZE1vZGFsT3Blbikge1xuICAgICAgJGV2ZW50LnJldHVyblZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHBheWVlRGF0YVNlcnZpY2U6IEJpbGxwYXlQYXllZURhdGFTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZmI6IEZvcm1CdWlsZGVyLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2NoZWR1bGVTZXJ2aWNlOiBCaWxscGF5UGF5bWVudFNjaGVkdWxlU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHBheW1lbnRTdGF0ZVNlcnZpY2U6IFBheUJpbGxzU3RhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgbmF2aWdhdGlvblNlcnZpY2U6IFBheUJpbGxzTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgcHJpdmF0ZSByZWFkb25seSBwYXltZW50RGF0YVNlcnZpY2U6IEJpbGxwYXlQYXltZW50RGF0YVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb25maWdTZXJ2aWNlOiBQYXlCaWxsc0pvdXJuZXlDb25maWdTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgbm90aWZpY2F0aW9uU2VydmljZTogTm90aWZpY2F0aW9uU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRpc2NhcmRNb2RhbFNlcnZpY2U6IEJpbGxwYXlEaXNjYXJkQ2hhbmdlc01vZGFsU2VydmljZSxcbiAgICBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMucGF5ZWVTdW1tYXJpZXNCeUViaWxsT2JzZXJ2YWJsZSQgPSB0aGlzLnBheWVlRGF0YVNlcnZpY2UuZ2V0UGF5ZWVzKCkucGlwZShcbiAgICAgIHRhcChwYXllZVN1bW1hcmllc0J5RWJpbGwgPT4ge1xuICAgICAgICBjb25zdCB7IGViaWxsc0VuYWJsZWQgPSBbXSwgZWJpbGxzTm90RW5hYmxlZCA9IFtdIH0gPSBwYXllZVN1bW1hcmllc0J5RWJpbGwgfHwgKHt9IGFzIFBheWVlU3VtbWFyaWVzQnlFYmlsbCk7XG4gICAgICAgIHRoaXMucGF5ZWVTdW1tYXJpZXMgPSBbLi4uZWJpbGxzRW5hYmxlZCwgLi4uZWJpbGxzTm90RW5hYmxlZF07XG4gICAgICAgIHRoaXMuY3JlYXRlRm9ybSh0aGlzLnBheWVlU3VtbWFyaWVzKTtcbiAgICAgICAgaWYgKHRoaXMucGF5bWVudFN0YXRlU2VydmljZS5pc0Zvcm1Qcm9jZXNzaW5nKSB7XG4gICAgICAgICAgdGhpcy5wYXRjaFBheW1lbnREYXRhVG9Gb3JtKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgc2hhcmVSZXBsYXkoKSxcbiAgICApO1xuICAgIHRoaXMuYWNjb3VudHMkID0gdGhpcy5wYXltZW50RGF0YVNlcnZpY2UuZ2V0UGF5ZWVzQW5kQWNjb3VudHMoKS5waXBlKFxuICAgICAgbWFwKGRhdGEgPT4ge1xuICAgICAgICB0aGlzLmFjY291bnRzID0gZGF0YS5hY2NvdW50cztcbiAgICAgICAgdGhpcy5wYXRjaEZvcm1WYWx1ZSh7IGFjY291bnRGcm9tOiBkYXRhLmFjY291bnRzPy5bMF0gfSk7XG4gICAgICAgIHJldHVybiBkYXRhLmFjY291bnRzO1xuICAgICAgfSksXG4gICAgICBzaGFyZVJlcGxheSgpLFxuICAgICk7XG5cbiAgICB0aGlzLnBheWVlRGF0YVNlcnZpY2Uuc2VsZWN0ZWREZWxldGVQYXllZVxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpLCBza2lwKDEpKVxuICAgICAgLnN1YnNjcmliZShwYXllZSA9PiAocGF5ZWUgPyAodGhpcy5pc0RlbGV0ZU1vZGFsT3BlbmVkID0gdHJ1ZSkgOiB0aGlzLm9wZW5OYXZpZ2F0ZU1vZGFsKCkpKTtcblxuICAgIHRoaXMucGF5ZWVEYXRhU2VydmljZS5zZWxlY3RlZERlbGV0ZUViaWxsc1xuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpLCBza2lwKDEpKVxuICAgICAgLnN1YnNjcmliZShwYXllZSA9PiAocGF5ZWUgPyAodGhpcy5pc0RlbGV0ZUViaWxsc01vZGFsT3BlbiA9IHRydWUpIDogdGhpcy5vcGVuTmF2aWdhdGVNb2RhbCgpKSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBoYW5kbGVDbGVhckZvcm0oKSB7XG4gICAgdGhpcy5wYXRjaEZvcm1WYWx1ZSgpO1xuICAgIHRoaXMucGF5bWVudHNGb3JtR3JvdXAubWFya0FzVW50b3VjaGVkKCk7XG4gICAgdGhpcy5wYXltZW50U3RhdGVTZXJ2aWNlLmlzRm9ybVByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGRlZmF1bHRGb3JtU3RhdGUocGF5ZWVTdW1tYXJ5OiBQYXllZVN1bW1hcnkpIHtcbiAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5oYXNPdmVybmlnaHRDaGVjayhwYXllZVN1bW1hcnk/LnBheW1lbnRTZXJ2aWNlcylcbiAgICAgID8gcGF5ZWVTdW1tYXJ5Py5vdmVybmlnaHREZWxpdmVyeUFkZHJlc3NcbiAgICAgIDogKHt9IGFzIEFkZHJlc3MpO1xuICAgIGNvbnN0IHBheW1lbnRTZXJ2aWNlRGF0ZSA9IHRoaXMuc2NoZWR1bGVTZXJ2aWNlLmVzdGltYXRlZFBheW1lbnRTZXJ2aWNlRGF0ZShcbiAgICAgIHBheWVlU3VtbWFyeT8ucGF5bWVudFNlcnZpY2VzLFxuICAgICAgUGF5bWVudFNlcnZpY2VzVHlwZXMuUmVndWxhcixcbiAgICApO1xuXG4gICAgY29uc3QgbWluRGF0ZSA9IHRoaXMuc2NoZWR1bGVTZXJ2aWNlLmVzdGltYXRlZFBheW1lbnRTZXJ2aWNlRGF0ZShcbiAgICAgIHBheWVlU3VtbWFyeT8ucGF5bWVudFNlcnZpY2VzLFxuICAgICAgUGF5bWVudFNlcnZpY2VzVHlwZXMuUmVndWxhcixcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY291bnRGcm9tOiB0aGlzLmFjY291bnRzPy5bMF0sXG4gICAgICBwYXllZVRvOiBwYXllZVN1bW1hcnksXG4gICAgICBhbW91bnQ6IHtcbiAgICAgICAgYW1vdW50OiAnICcsXG4gICAgICAgIGN1cnJlbmN5OiB0aGlzLmNvbmZpZ1NlcnZpY2UucGF5bWVudERlZmF1bHRDdXJyZW5jeSxcbiAgICAgIH0sXG4gICAgICBtZW1vOiAnJyxcbiAgICAgIG92ZXJuaWdodERlbGl2ZXJ5QWRkcmVzczoge1xuICAgICAgICBhZGRyZXNzMTogYWRkcmVzcz8uYWRkcmVzczEsXG4gICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzPy5hZGRyZXNzMixcbiAgICAgICAgY2l0eTogYWRkcmVzcz8uY2l0eSxcbiAgICAgICAgc3RhdGU6IGFkZHJlc3M/LnN0YXRlLFxuICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlLFxuICAgICAgfSxcbiAgICAgIHNjaGVkdWxlOiB7XG4gICAgICAgIGZyZXF1ZW5jeTogRnJlcXVlbmN5S2V5cy5PbmNlLFxuICAgICAgICBzdGFydERhdGU6IG1pbkRhdGUsXG4gICAgICAgIHNlbmREYXRlOiBtaW5EYXRlLFxuICAgICAgICByZXBlYXQ6IDEsXG4gICAgICAgIGVuZERhdGU6IG1pbkRhdGUsXG4gICAgICAgIGVuZFR5cGU6IEVuZFR5cGVzLk5ldmVyLFxuICAgICAgICBwYXltZW50U2VydmljZTogdGhpcy5kZWZhdWx0UGF5bWVudFNlcnZpY2UsXG4gICAgICAgIHBheW1lbnRTZXJ2aWNlRGF0ZSxcbiAgICAgICAgYWxlcnRQZW5kaW5nQ2hlY2tib3g6IGZhbHNlLFxuICAgICAgICBhbGVydFNlbnRDaGVja2JveDogZmFsc2UsXG4gICAgICAgIGFsZXJ0TGFzdFBlbmRpbmdDaGVja2JveDogZmFsc2UsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBhcmVCb3RoTGlzdHNQcmVzZW50KHsgZWJpbGxzRW5hYmxlZCwgZWJpbGxzTm90RW5hYmxlZCB9OiBQYXllZVN1bW1hcmllc0J5RWJpbGwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQm9vbGVhbihlYmlsbHNFbmFibGVkPy5sZW5ndGggJiYgZWJpbGxzTm90RW5hYmxlZD8ubGVuZ3RoKTtcbiAgfVxuXG4gIGNyZWF0ZUZvcm0ocGF5ZWVTdW1tYXJpZXM6IFBheWVlU3VtbWFyeVtdKSB7XG4gICAgcGF5ZWVTdW1tYXJpZXMuZm9yRWFjaChwYXllZSA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdEZvcm1TdGF0ZShwYXllZSk7XG4gICAgICB0aGlzLnBheW1lbnRzRm9ybUdyb3VwPy5yZWdpc3RlckNvbnRyb2woXG4gICAgICAgIHBheWVlLmlkLFxuICAgICAgICB0aGlzLmZiLmdyb3VwKHtcbiAgICAgICAgICBhY2NvdW50RnJvbTogW2RlZmF1bHRzLmFjY291bnRGcm9tXSxcbiAgICAgICAgICBwYXllZVRvOiBbZGVmYXVsdHMucGF5ZWVUb10sXG4gICAgICAgICAgYW1vdW50OiB0aGlzLmZiLmdyb3VwKHtcbiAgICAgICAgICAgIGFtb3VudDogW2RlZmF1bHRzLmFtb3VudC5hbW91bnRdLFxuICAgICAgICAgICAgY3VycmVuY3k6IFtkZWZhdWx0cy5hbW91bnQuY3VycmVuY3ldLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG1lbW86IFtkZWZhdWx0cy5tZW1vXSxcbiAgICAgICAgICBvdmVybmlnaHREZWxpdmVyeUFkZHJlc3M6IHRoaXMuY3JlYXRlT3Zlcm5pZ2h0QWRkcmVzc0Zvcm1Hcm91cChwYXllZSksXG4gICAgICAgICAgc2NoZWR1bGU6IHRoaXMuZmIuZ3JvdXAoe1xuICAgICAgICAgICAgZnJlcXVlbmN5OiBkZWZhdWx0cy5zY2hlZHVsZS5mcmVxdWVuY3ksXG4gICAgICAgICAgICBzdGFydERhdGU6IFtkZWZhdWx0cy5zY2hlZHVsZS5zdGFydERhdGVdLFxuICAgICAgICAgICAgc2VuZERhdGU6IFtkZWZhdWx0cy5zY2hlZHVsZS5zZW5kRGF0ZV0sXG4gICAgICAgICAgICByZXBlYXQ6IFtkZWZhdWx0cy5zY2hlZHVsZS5yZXBlYXRdLFxuICAgICAgICAgICAgZW5kRGF0ZTogW2RlZmF1bHRzLnNjaGVkdWxlLmVuZERhdGVdLFxuICAgICAgICAgICAgZW5kVHlwZTogW2RlZmF1bHRzLnNjaGVkdWxlLmVuZFR5cGVdLFxuICAgICAgICAgICAgcGF5bWVudFNlcnZpY2U6IFtkZWZhdWx0cy5zY2hlZHVsZS5wYXltZW50U2VydmljZV0sXG4gICAgICAgICAgICBwYXltZW50U2VydmljZURhdGU6IFtkZWZhdWx0cy5zY2hlZHVsZS5wYXltZW50U2VydmljZURhdGVdLFxuICAgICAgICAgICAgYWxlcnRQZW5kaW5nQ2hlY2tib3g6IFtkZWZhdWx0cy5zY2hlZHVsZS5hbGVydFBlbmRpbmdDaGVja2JveF0sXG4gICAgICAgICAgICBhbGVydFNlbnRDaGVja2JveDogW2RlZmF1bHRzLnNjaGVkdWxlLmFsZXJ0U2VudENoZWNrYm94XSxcbiAgICAgICAgICAgIGFsZXJ0TGFzdFBlbmRpbmdDaGVja2JveDogW2RlZmF1bHRzLnNjaGVkdWxlLmFsZXJ0TGFzdFBlbmRpbmdDaGVja2JveF0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uTW9kYWxSZXNvbHZlKGlzQ29uZmlybWVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5kaXNjYXJkTW9kYWxTZXJ2aWNlLm9uTW9kYWxSZXNvbHZlKGlzQ29uZmlybWVkKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlT3Zlcm5pZ2h0QWRkcmVzc0Zvcm1Hcm91cChwYXllZVN1bW1hcnk6IFBheWVlU3VtbWFyeSk6IEZvcm1Hcm91cCB7XG4gICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuaGFzT3Zlcm5pZ2h0Q2hlY2socGF5ZWVTdW1tYXJ5LnBheW1lbnRTZXJ2aWNlcylcbiAgICAgID8gcGF5ZWVTdW1tYXJ5Lm92ZXJuaWdodERlbGl2ZXJ5QWRkcmVzc1xuICAgICAgOiAoe30gYXMgQWRkcmVzcyk7XG4gICAgY29uc3QgcGF5bWVudFNlcnZpY2UgPSB0aGlzLmRlZmF1bHRQYXltZW50U2VydmljZShwYXllZVN1bW1hcnkpO1xuICAgIGNvbnN0IGlzT3Zlcm5pZ2h0QWRkcmVzc0Rpc2FibGVkID1cbiAgICAgICFwYXltZW50U2VydmljZT8ucGF5bWVudFNlcnZpY2VUeXBlIHx8IHBheW1lbnRTZXJ2aWNlLnBheW1lbnRTZXJ2aWNlVHlwZSAhPT0gUGF5bWVudFNlcnZpY2VzVHlwZXMuT3Zlcm5pZ2h0O1xuXG4gICAgcmV0dXJuIHRoaXMuZmIuZ3JvdXAoe1xuICAgICAgYWRkcmVzczE6IFtcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBhZGRyZXNzPy5hZGRyZXNzMSxcbiAgICAgICAgICBkaXNhYmxlZDogaXNPdmVybmlnaHRBZGRyZXNzRGlzYWJsZWQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgYWRkcmVzczI6IFtcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBhZGRyZXNzPy5hZGRyZXNzMixcbiAgICAgICAgICBkaXNhYmxlZDogaXNPdmVybmlnaHRBZGRyZXNzRGlzYWJsZWQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY2l0eTogW1xuICAgICAgICB7XG4gICAgICAgICAgdmFsdWU6IGFkZHJlc3M/LmNpdHksXG4gICAgICAgICAgZGlzYWJsZWQ6IGlzT3Zlcm5pZ2h0QWRkcmVzc0Rpc2FibGVkLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHN0YXRlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB2YWx1ZTogYWRkcmVzcz8uc3RhdGUsXG4gICAgICAgICAgZGlzYWJsZWQ6IGlzT3Zlcm5pZ2h0QWRkcmVzc0Rpc2FibGVkLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHBvc3RhbENvZGU6IFtcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBhZGRyZXNzPy5wb3N0YWxDb2RlLFxuICAgICAgICAgIGRpc2FibGVkOiBpc092ZXJuaWdodEFkZHJlc3NEaXNhYmxlZCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhc092ZXJuaWdodENoZWNrID0gKHNlcnZpY2VzOiBQYXltZW50U2VydmljZVtdIHwgdW5kZWZpbmVkKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuICEhc2VydmljZXM/LmZpbmQoaXRlbSA9PiBpdGVtLnBheW1lbnRTZXJ2aWNlVHlwZSA9PT0gUGF5bWVudFNlcnZpY2VzVHlwZXMuT3Zlcm5pZ2h0KTtcbiAgfTtcblxuICBwcml2YXRlIGRlZmF1bHRQYXltZW50U2VydmljZShwYXllZTogUGF5ZWVTdW1tYXJ5KTogUGF5bWVudFNlcnZpY2VTdW1tYXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gcGF5ZWU/LnBheW1lbnRTZXJ2aWNlcz8uZmluZChcbiAgICAgIChpdGVtOiBQYXltZW50U2VydmljZVN1bW1hcnkpID0+IGl0ZW0ucGF5bWVudFNlcnZpY2VUeXBlID09PSBQYXltZW50U2VydmljZXNUeXBlcy5SZWd1bGFyLFxuICAgICk7XG4gIH1cblxuICBoYW5kbGVTdWJtaXQoKSB7XG4gICAgY29uc3QgcGF5bWVudEZvcm1zID0gT2JqZWN0LmVudHJpZXModGhpcy5wYXltZW50c0Zvcm1Hcm91cC52YWx1ZSBhcyBQYXltZW50Rm9ybVN0YXRlW10pXG4gICAgICAuZmlsdGVyKChbX2lkLCBmb3JtXSkgPT4gISErZm9ybS5hbW91bnQuYW1vdW50KVxuICAgICAgLm1hcCgoW19pZCwgZm9ybV0pID0+IHRoaXMucHJvY2Vzc0Zvcm1EYXRhKGZvcm0pKTtcbiAgICB0aGlzLnBheW1lbnRTdGF0ZVNlcnZpY2UuaXNGb3JtUHJvY2Vzc2luZyA9IHRydWU7XG4gICAgdGhpcy5wYXltZW50U3RhdGVTZXJ2aWNlLnVwZGF0ZVBheW1lbnRTdGF0ZShwYXltZW50Rm9ybXMgYXMgYW55KTtcbiAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlVG9SZXZpZXcoeyByZWxhdGl2ZVRvOiB0aGlzLnJvdXRlLnBhcmVudCB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcHJvY2Vzc0Zvcm1EYXRhKGRhdGE6IFBheW1lbnRGb3JtU3RhdGUpOiBQYXltZW50Rm9ybVN0YXRlIHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBkYXRhLnNjaGVkdWxlLmZyZXF1ZW5jeSA9PT0gRnJlcXVlbmN5S2V5cy5PbmNlID8gZGF0YS5zY2hlZHVsZS5zZW5kRGF0ZSA6IGRhdGEuc2NoZWR1bGUuc3RhcnREYXRlO1xuICAgIHN3aXRjaCAoZGF0YS5zY2hlZHVsZS5lbmRUeXBlKSB7XG4gICAgICBjYXNlIEVuZFR5cGVzLkFmdGVyOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgc2NoZWR1bGU6IHtcbiAgICAgICAgICAgIC4uLmRhdGEuc2NoZWR1bGUsXG4gICAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKFxuICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlU2VydmljZS5lc3RpbWF0ZWRFbmREYXRlKFxuICAgICAgICAgICAgICAgIGRhdGEuc2NoZWR1bGUuc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgIGRhdGEuc2NoZWR1bGUuZnJlcXVlbmN5LFxuICAgICAgICAgICAgICAgIGRhdGEuc2NoZWR1bGUucmVwZWF0LFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICBjYXNlIEVuZFR5cGVzLk9uOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgc2NoZWR1bGU6IHtcbiAgICAgICAgICAgIC4uLmRhdGEuc2NoZWR1bGUsXG4gICAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIHJlcGVhdDogdGhpcy5zY2hlZHVsZVNlcnZpY2UuZXN0aW1hdGVkT2NjdXJlbmNlcyhcbiAgICAgICAgICAgICAgZGF0YS5zY2hlZHVsZS5zdGFydERhdGUsXG4gICAgICAgICAgICAgIGRhdGEuc2NoZWR1bGUuZW5kRGF0ZSB8fCBkYXRhLnNjaGVkdWxlLnN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgZGF0YS5zY2hlZHVsZS5mcmVxdWVuY3ksXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgc2NoZWR1bGU6IHtcbiAgICAgICAgICAgIC4uLmRhdGEuc2NoZWR1bGUsXG4gICAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZSB8fCAnJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGF0Y2hGb3JtVmFsdWUodmFsdWU/OiBhbnkpIHtcbiAgICB0aGlzLnBheWVlU3VtbWFyaWVzPy5mb3JFYWNoKHBheWVlID0+IHtcbiAgICAgIGNvbnN0IGZvcm1WYWx1ZSA9IHZhbHVlIHx8IHRoaXMuZGVmYXVsdEZvcm1TdGF0ZShwYXllZSk7XG4gICAgICB0aGlzLnBheW1lbnRzRm9ybUdyb3VwLmNvbnRyb2xzW3BheWVlLmlkXS5wYXRjaFZhbHVlKGZvcm1WYWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBvbkRlbGV0ZUViaWxscyhyZXNvbHZlOiBib29sZWFuKSB7XG4gICAgdGhpcy5pc0RlbGV0ZUViaWxsc01vZGFsT3BlbiA9IGZhbHNlO1xuICAgIGlmIChyZXNvbHZlKSB7XG4gICAgICB0aGlzLmRlbGV0ZUViaWxscygpXG4gICAgICAgIC5waXBlKHRha2UoMSkpXG4gICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGVsZXRpb25Ob3RpZnkoJ2ViaWxscycpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvbkRlbGV0ZVBheWVlKHJlc29sdmU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmlzRGVsZXRlTW9kYWxPcGVuZWQgPSBmYWxzZTtcbiAgICBpZiAocmVzb2x2ZSkge1xuICAgICAgdGhpcy5kZWxldGVQYXllZSgpXG4gICAgICAgIC5waXBlKHRha2UoMSkpXG4gICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGVsZXRpb25Ob3RpZnkoJ2RlbGV0ZScpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvbk5hdmlnYXRlVG9QYXltZW50cyhoYXNOYXZpZ2F0ZWQ6IGJvb2xlYW4pIHtcbiAgICBpZiAoaGFzTmF2aWdhdGVkKSB7XG4gICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlVG9QYXltZW50cygpO1xuICAgIH1cbiAgICB0aGlzLmlzTmF2aWdhdGVNb2RhbE9wZW5lZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxldGlvbk5vdGlmeSh0eXBlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBheWVlRGF0YVNlcnZpY2UucmVsb2FkUGF5ZWVzKCk7XG4gICAgdGhpcy5ub3RpZmljYXRpb25UeXBlID0gdHlwZTtcbiAgICB0aGlzLm5vdGlmaWNhdGlvblNlcnZpY2Uuc2hvd05vdGlmaWNhdGlvbih7XG4gICAgICBoZWFkZXI6IHRoaXMubm90aWZpY2F0aW9uSGVhZGVyVGVtcGxhdGUsXG4gICAgICBtZXNzYWdlOiB0aGlzLm5vdGlmaWNhdGlvbk1lc3NhZ2VUZW1wbGF0ZSxcbiAgICAgIG1vZGlmaWVyOiAnc3VjY2VzcycsXG4gICAgICB0dGw6IHRoaXMuY29uZmlnU2VydmljZS5ub3RpZmljYXRpb25EaXNtaXNzVGltZSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgb3Blbk5hdmlnYXRlTW9kYWwoKSB7XG4gICAgdGhpcy5pc05hdmlnYXRlTW9kYWxPcGVuZWQgPSB0cnVlO1xuICB9XG5cbiAgb3Blbk1vZGFsKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgcmV0dXJuIHRoaXMucGF5bWVudHNGb3JtR3JvdXAudG91Y2hlZCB8fCB0aGlzLnBheW1lbnRTdGF0ZVNlcnZpY2UuaXNGb3JtUHJvY2Vzc2luZ1xuICAgICAgPyB0aGlzLmRpc2NhcmRNb2RhbFNlcnZpY2Uub3Blbk1vZGFsKClcbiAgICAgIDogb2YodHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIHBhdGNoUGF5bWVudERhdGFUb0Zvcm0oKSB7XG4gICAgdGhpcy5wYXltZW50U3RhdGVTZXJ2aWNlLnBheW1lbnRTdGF0ZS5waXBlKHRha2UoMSkpLnN1YnNjcmliZShwYXltZW50c1N0YXRlID0+IHtcbiAgICAgIGlmIChwYXltZW50c1N0YXRlKSB7XG4gICAgICAgIHBheW1lbnRzU3RhdGUuZm9yRWFjaChwYXltZW50ID0+IHtcbiAgICAgICAgICB0aGlzLnBheW1lbnRzRm9ybUdyb3VwLmdldChwYXltZW50LnBheWVlVG8uaWQpPy5wYXRjaFZhbHVlKHBheW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsZXRlUGF5ZWUoKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55PiB8IHt9PiB7XG4gICAgcmV0dXJuIHRoaXMucGF5ZWVEYXRhU2VydmljZS5zZWxlY3RlZERlbGV0ZVBheWVlLnBpcGUoXG4gICAgICBzd2l0Y2hNYXAoKHBheWVlOiBhbnkpID0+XG4gICAgICAgIHBheWVlID8gdGhpcy5wYXllZURhdGFTZXJ2aWNlLmRlbGV0ZVBheWVlKHBheWVlLmlkLCBwYXllZS5lbGVjdHJvbmljKSA6IChvZigpIGFzIE9ic2VydmFibGU8YW55PiksXG4gICAgICApLFxuICAgICk7XG4gIH1cbiAgcHJpdmF0ZSBkZWxldGVFYmlsbHMoKTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UGF5ZWVTdW1tYXJ5PiB8IHt9PiB7XG4gICAgcmV0dXJuIHRoaXMucGF5ZWVEYXRhU2VydmljZS5zZWxlY3RlZERlbGV0ZUViaWxscy5waXBlKFxuICAgICAgc3dpdGNoTWFwKChwYXllZTogYW55KSA9PiAocGF5ZWUgPyB0aGlzLnBheWVlRGF0YVNlcnZpY2UuZGVsZXRlRWJpbGxzKHBheWVlLmlkKSA6IChvZigpIGFzIE9ic2VydmFibGU8YW55PikpKSxcbiAgICApO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwiIWlzRXJyb3JTdGF0ZTsgZWxzZSBlcnJvclN0YXRlXCI+XG4gIDxuZy1jb250YWluZXJcbiAgICAqbmdJZj1cIihhY2NvdW50cyQgfCBhc3luYykgJiYgcGF5ZWVTdW1tYXJpZXNCeUViaWxsT2JzZXJ2YWJsZSQgfCBhc3luYyBhcyBlYmlsbEdyb3VwZWREYXRhOyBlbHNlIGxvYWRpbmdTdGF0ZVwiXG4gID5cbiAgICA8bmctY29udGFpbmVyXG4gICAgICAqbmdJZj1cIlxuICAgICAgICAoZWJpbGxHcm91cGVkRGF0YS5lYmlsbHNFbmFibGVkLmxlbmd0aCB8fCBlYmlsbEdyb3VwZWREYXRhLmViaWxsc05vdEVuYWJsZWQubGVuZ3RoKSAmJlxuICAgICAgICAgIChhY2NvdW50cyQgfCBhc3luYyk/Lmxlbmd0aDtcbiAgICAgICAgZWxzZSBlbXB0eVN0YXRlXG4gICAgICBcIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1iaWxscGF5LW11bHRpcGxlLWJpbGxzXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1sZ1wiXG4gICAgICAgICAgKm5nSWY9XCJlYmlsbEdyb3VwZWREYXRhLmViaWxsc0VuYWJsZWQubGVuZ3RoXCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJwYXllZXMtd2l0aC1hY3RpdmUtZS1iaWxscy1saXN0XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIGNhcmQtbGdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1sZ1wiPlxuICAgICAgICAgICAgICAgIDxiYi1oZWFkZXItdWlcbiAgICAgICAgICAgICAgICAgIGhlYWRpbmdUeXBlPVwiaDJcIlxuICAgICAgICAgICAgICAgICAgKm5nSWY9XCJhcmVCb3RoTGlzdHNQcmVzZW50KGViaWxsR3JvdXBlZERhdGEpXCJcbiAgICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cInN1Yi1oZWFkZXJcIlxuICAgICAgICAgICAgICAgICAgaGVhZGluZz1cIlBheWVlcyB3aXRoIEFjdGl2ZSBlQmlsbHNcIlxuICAgICAgICAgICAgICAgICAgaTE4bi1oZWFkaW5nPVwiXG4gICAgICAgICAgICAgICAgICAgIFBheWVlcyB3aXRoIGVCaWxscyB0aXRsZXxUaXRsZSBmb3IgdGhlIGxpc3Qgb2YgcGF5ZWVzIHdpdGggZUJpbGxzXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWRAQGJpbGxwYXktcGF5bWVudHMtam91cm5leS5tdWx0aXBsZS1iaWxscy50aXRsZS5wYXllZXMtd2l0aC1lYmlsbHNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2JiLWhlYWRlci11aT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxiYi1iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMtbGlzdFxuICAgICAgICAgICAgICAgIFtwYXltZW50c0Zvcm1Hcm91cF09XCJwYXltZW50c0Zvcm1Hcm91cFwiXG4gICAgICAgICAgICAgICAgW3BheWVlU3VtbWFyaWVzXT1cImViaWxsR3JvdXBlZERhdGEuZWJpbGxzRW5hYmxlZFwiXG4gICAgICAgICAgICAgICAgW2FjY291bnRzXT1cImFjY291bnRzJCB8IGFzeW5jXCJcbiAgICAgICAgICAgICAgICBbaXNGb3JFYmlsbHNdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgID48L2JiLWJpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy1saXN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImJiLWJpbGxwYXktbXVsdGlwbGUtYmlsbHMtb3RoZXItcGF5ZWVzLWNhcmQgY2FyZCBjYXJkLWxnXCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJhbGwtb3RoZXItcGF5ZWVzLWxpc3RcIlxuICAgICAgICAgICpuZ0lmPVwiZWJpbGxHcm91cGVkRGF0YS5lYmlsbHNOb3RFbmFibGVkLmxlbmd0aFwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLWxnXCI+XG4gICAgICAgICAgICAgIDxiYi1oZWFkZXItdWlcbiAgICAgICAgICAgICAgICBoZWFkaW5nVHlwZT1cImgyXCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cImFyZUJvdGhMaXN0c1ByZXNlbnQoZWJpbGxHcm91cGVkRGF0YSlcIlxuICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cInN1Yi1oZWFkZXJcIlxuICAgICAgICAgICAgICAgIGhlYWRpbmc9XCJBbGwgT3RoZXIgUGF5ZWVzXCJcbiAgICAgICAgICAgICAgICBpMThuLWhlYWRpbmc9XCJcbiAgICAgICAgICAgICAgICAgIFBheWVlcyB3aXRob3V0IGVCaWxscyB0aXRsZXxUaXRsZSBmb3IgdGhlIGxpc3Qgb2YgcGF5ZWVzIHRoYXQgZG8gbm90IGhhdmUgZUJpbGxzXG4gICAgICAgICAgICAgICAgICBlbmFibGVkQEBiaWxscGF5LXBheW1lbnRzLWpvdXJuZXkubXVsdGlwbGUtYmlsbHMudGl0bGUub3RoZXItcGF5ZWVzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8L2JiLWhlYWRlci11aT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJiLWJpbGxwYXktcGF5bWVudC1tdWx0aXBsZS1iaWxscy1saXN0XG4gICAgICAgICAgICAgIFtwYXltZW50c0Zvcm1Hcm91cF09XCJwYXltZW50c0Zvcm1Hcm91cFwiXG4gICAgICAgICAgICAgIFtwYXllZVN1bW1hcmllc109XCJlYmlsbEdyb3VwZWREYXRhLmViaWxsc05vdEVuYWJsZWRcIlxuICAgICAgICAgICAgICBbYWNjb3VudHNdPVwiYWNjb3VudHMkIHwgYXN5bmNcIlxuICAgICAgICAgICAgPjwvYmItYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLWxpc3Q+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy1jb250YWluZXI+XG5cbjxiYi1iaWxscGF5LXBheW1lbnQtbXVsdGlwbGUtYmlsbHMtc3VtLWJvYXJkXG4gIFt0b3RhbEFtb3VudF09XCJ0b3RhbEFtb3VudCQgfCBhc3luY1wiXG4gIFthY3Rpb25CdXR0b25zXT1cImFjdGlvbkJ1dHRvbnNcIlxuICBbaW5oZXJpdGVkSWRdPVwiaWRcIlxuPjwvYmItYmlsbHBheS1wYXltZW50LW11bHRpcGxlLWJpbGxzLXN1bS1ib2FyZD5cblxuPG5nLXRlbXBsYXRlICNsb2FkaW5nU3RhdGU+XG4gIDxkaXYgY2xhc3M9XCJjYXJkIGNhcmQtbGdcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICA8YmItbG9hZGluZy1pbmRpY2F0b3ItdWkgbG9hZGVyU2l6ZT1cImxnXCI+IDwvYmItbG9hZGluZy1pbmRpY2F0b3ItdWk+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNlbXB0eVN0YXRlPlxuICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWxnXCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keSBiYi1zdGF0ZS1jb250YWluZXJcIj5cbiAgICAgIDxiYi1lbXB0eS1zdGF0ZS11aVxuICAgICAgICBkYXRhLXJvbGU9XCJlbXB0eS1zdGF0ZVwiXG4gICAgICAgIGljb25TaXplPVwieHhsXCJcbiAgICAgICAgaWNvbk1vZGlmaWVyPVwiYXNzaWdubWVudC1pbmRcIlxuICAgICAgICBzdWJ0aXRsZT1cIkFkZCBhIHBheWVlIHRvIG1ha2UgYSBiaWxsIHBheW1lbnRcIlxuICAgICAgICBpMThuLXN1YnRpdGxlPVwiXG4gICAgICAgICAgQWRkIGEgcGF5ZWUgdG8gbWFrZSBhIGJpbGwgcGF5bWVudHxQYXllZSBMaXN0IG5vIHBheWVlc1xuICAgICAgICAgIHN1YnRpdGxlQEBiYi1iaWxscGF5LW1hbmFnZS13aWRnZXQtYW5nLmJiLWVtcHR5LXN0YXRlLXVpLnN1YnRpdGxlXCJcbiAgICAgICAgdGl0bGU9XCJObyBQYXllZXNcIlxuICAgICAgICBpMThuLXRpdGxlPVwiXG4gICAgICAgICAgTm8gcGF5ZWVzIHN0YXRlIHRleHR8UGF5ZWUgTGlzdCBubyBwYXllZXNcbiAgICAgICAgICB0aXRsZUBAYmlsbHBheS1wYXltZW50cy1qb3VybmV5Lm11bHRpcGxlLWJpbGxzLmJiLWVtcHR5LXN0YXRlLXVpLnRpdGxlXCJcbiAgICAgID5cbiAgICAgIDwvYmItZW1wdHktc3RhdGUtdWk+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNlcnJvclN0YXRlPlxuICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWxnXCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxuICAgICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICAgIGRhdGEtcm9sZT1cImVycm9yLXN0YXRlXCJcbiAgICAgICAgaWNvblNpemU9XCJ4eGxcIlxuICAgICAgICBpY29uTW9kaWZpZXI9XCJlcnJvci1vdXRsaW5lXCJcbiAgICAgICAgc3VidGl0bGU9XCJUcnkgdG8gcmVsb2FkIHRoZSBwYWdlIG9yIGNvbnRhY3Qgc3VwcG9ydFwiXG4gICAgICAgIGkxOG4tc3VidGl0bGU9XCJcbiAgICAgICAgICBUcnkgdG8gcmVsb2FkIHRoZSBwYWdlIG9yIGNvbnRhY3QgdGhlIHN1cHBvcnQufFBheWVlIExpc3QgbG9hZGluZ1xuICAgICAgICAgIHN1YnRpdGxlQEBiYi1iaWxscGF5LXBheWVlLWxpc3Qtd2lkZ2V0LWFuZy5sb2FkaW5nLnN1YnRpdGxlXCJcbiAgICAgICAgdGl0bGU9XCJQYXllZSBsaXN0IGlzIG5vdCBsb2FkaW5nXCJcbiAgICAgICAgaTE4bi10aXRsZT1cIlBheWVlIGxpc3QgaXMgbm90IGxvYWRpbmd8UGF5ZWUgTGlzdCBsb2FkaW5nIHRpdGxlQEBiYi1iaWxscGF5LXBheWVlLWxpc3Qtd2lkZ2V0LWFuZy5sb2FkaW5nLnRpdGxlXCJcbiAgICAgID5cbiAgICAgIDwvYmItZW1wdHktc3RhdGUtdWk+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNhY3Rpb25CdXR0b25zPlxuICA8ZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja1wiPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBiYkJ1dHRvblxuICAgICAgICBjb2xvcj1cImxpbmtcIlxuICAgICAgICBjbGFzcz1cImJiLXN0YWNrX19pdGVtIGJiLXN0YWNrX19pdGVtLS1zcGFjaW5nLW1kXCJcbiAgICAgICAgKGNsaWNrKT1cImhhbmRsZUNsZWFyRm9ybSgpXCJcbiAgICAgICAgZGF0YS1yb2xlPVwibXVsdGlwbGUtYmlsbHMtY2xlYXItYnV0dG9uXCJcbiAgICAgICAgaTE4bj1cIkBAYmlsbHBheS1wYXltZW50cy1qb3VybmV5Lm11bHRpcGxlLWJpbGxzLmJvYXJkLmNsZWFyLWJ1dHRvblwiXG4gICAgICA+XG4gICAgICAgIENsZWFyIEFsbFxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGJiQnV0dG9uXG4gICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uIGJiLXN0YWNrX19pdGVtIGJiLXN0YWNrX19pdGVtLS1zcGFjaW5nLW5vbmVcIlxuICAgICAgICBkYXRhLXJvbGU9XCJtdWx0aXBsZS1iaWxscy1jb25maXJtLWJ1dHRvblwiXG4gICAgICAgIGkxOG49XCJAQGJpbGxwYXktcGF5bWVudHMtam91cm5leS5tdWx0aXBsZS1iaWxscy5ib2FyZC5jb25maXJtLWJ1dHRvblwiXG4gICAgICAgIGF0dHIuYXJpYS1kZXNjcmliZWRieT1cInRvdGFsLWFtb3VudC1sYWJlbC17eyBpZCB9fSAgdG90YWwtYW1vdW50LXt7IGlkIH19XCJcbiAgICAgICAgKGNsaWNrKT1cImhhbmRsZVN1Ym1pdCgpXCJcbiAgICAgID5cbiAgICAgICAgQ29uZmlybSBQYXltZW50XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuXG48YmItYmlsbHBheS1wYXllZS1kZWxldGUtbW9kYWxcbiAgKm5nSWY9XCJpc0RlbGV0ZU1vZGFsT3BlbmVkXCJcbiAgKHJlc29sdmUpPVwib25EZWxldGVQYXllZSgkZXZlbnQpXCJcbj48L2JiLWJpbGxwYXktcGF5ZWUtZGVsZXRlLW1vZGFsPlxuXG48YmItYmlsbHBheS1lYmlsbHMtZGVsZXRlLW1vZGFsXG4gICpuZ0lmPVwiaXNEZWxldGVFYmlsbHNNb2RhbE9wZW5cIlxuICAocmVzb2x2ZSk9XCJvbkRlbGV0ZUViaWxscygkZXZlbnQpXCJcbj48L2JiLWJpbGxwYXktZWJpbGxzLWRlbGV0ZS1tb2RhbD5cblxuPGJiLWJpbGxwYXktcGF5ZWUtbmF2aWdhdGUtbW9kYWxcbiAgKm5nSWY9XCJpc05hdmlnYXRlTW9kYWxPcGVuZWRcIlxuICAocmVzb2x2ZSk9XCJvbk5hdmlnYXRlVG9QYXltZW50cygkZXZlbnQpXCJcbj48L2JiLWJpbGxwYXktcGF5ZWUtbmF2aWdhdGUtbW9kYWw+XG5cbjxuZy10ZW1wbGF0ZSAjbm90aWZpY2F0aW9uTWVzc2FnZT5cbiAgPGRpdiBbbmdTd2l0Y2hdPVwibm90aWZpY2F0aW9uVHlwZVwiPlxuICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT1cIidlYmlsbHMnXCI+XG4gICAgICA8c3BhblxuICAgICAgICAqbmdJZj1cInNlbGVjdGVkRGVsZXRlRWJpbGxzJCB8IGFzeW5jIGFzIHBheWVlXCJcbiAgICAgICAgaTE4bj1cIlxuICAgICAgICAgIHN0b3AgZWJpbGwgbm90aWZpY2F0aW9uIG1lc3NhZ2V8UGF5ZWUgc3RvcCBlYmlsbCBjb25maXJtYXRpb24gc3VjY2VzcyBub3RpZmljYXRpb25cbiAgICAgICAgICBtZXNzYWdlQEBiaWxscGF5LXBheWVlLWxpc3Quc3RvcC1lYmlsbC1jb25maXJtLm5vdGlmaWNhdGlvbi5tZXNzYWdlXCJcbiAgICAgICAgPmVCaWxscyBmb3Ige3sgcGF5ZWUubmlja05hbWUgPyBwYXllZS5uaWNrTmFtZSArICcgKCcgKyBwYXllZS5uYW1lICsgJyknIDogcGF5ZWUubmFtZSB9fSBoYXMgYmVlbiBzdG9wcGVkXG4gICAgICAgIHN1Y2Nlc3NmdWxseTwvc3BhblxuICAgICAgPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT1cIidkZWxldGUnXCI+XG4gICAgICA8c3BhblxuICAgICAgICAqbmdJZj1cInNlbGVjdGVkRGVsZXRlUGF5ZWUkIHwgYXN5bmMgYXMgcGF5ZWVcIlxuICAgICAgICBpMThuPVwiXG4gICAgICAgICAgZGVsZXRlIHBheWVlIG5vdGlmaWNhdGlvbiBtZXNzYWdlfFBheWVlIGRlbGV0ZSBjb25maXJtYXRpb24gc3VjY2VzcyBub3RpZmljYXRpb25cbiAgICAgICAgICBtZXNzYWdlQEBiaWxscGF5LXBheWVlLWxpc3QuZGVsZXRlLXBheWVlLWNvbmZpcm0ubm90aWZpY2F0aW9uLm1lc3NhZ2VcIlxuICAgICAgICA+VGhlIHBheWVlIHt7IHBheWVlLm5pY2tOYW1lID8gcGF5ZWUubmlja05hbWUgKyAnICgnICsgcGF5ZWUubmFtZSArICcpJyA6IHBheWVlLm5hbWUgfX0gaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICBzdWNjZXNzZnVsbHk8L3NwYW5cbiAgICAgID5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI25vdGlmaWNhdGlvbkhlYWRlcj5cbiAgPGRpdiBbbmdTd2l0Y2hdPVwibm90aWZpY2F0aW9uVHlwZVwiPlxuICAgIDxzcGFuXG4gICAgICAqbmdTd2l0Y2hDYXNlPVwiJ2ViaWxscydcIlxuICAgICAgY2xhc3M9XCJiYi10ZXh0LWJvbGRcIlxuICAgICAgaTE4bj1cIlxuICAgICAgICBlQmlsbHMgc3RvcHBlZCBub3RpZmljYXRpb24gaGVhZGVyfGVCaWxscyBzdG9wcGVkIGNvbmZpcm1hdGlvbiBzdWNjZXNzIG5vdGlmaWNhdGlvblxuICAgICAgICBoZWFkZXJAQGJpbGxwYXktcGF5ZWUtbGlzdC5jb25maXJtLm5vdGlmaWNhdGlvbi5oZWFkZXJcIlxuICAgICAgPmVCaWxscyBzdG9wcGVkPC9zcGFuXG4gICAgPlxuICAgIDxzcGFuXG4gICAgICAqbmdTd2l0Y2hDYXNlPVwiJ2RlbGV0ZSdcIlxuICAgICAgY2xhc3M9XCJiYi10ZXh0LWJvbGRcIlxuICAgICAgaTE4bj1cIlxuICAgICAgICBkZWxldGUgcGF5ZWUgbm90aWZpY2F0aW9uIGhlYWRlcnxQYXllZSBkZWxldGUgY29uZmlybWF0aW9uIHN1Y2Nlc3Mgbm90aWZpY2F0aW9uXG4gICAgICAgIGhlYWRlckBAYmlsbHBheS1wYXllZS1saXN0LmNvbmZpcm0ubm90aWZpY2F0aW9uLmhlYWRlclwiXG4gICAgICA+UGF5ZWUgZGVsZXRlZDwvc3BhblxuICAgID5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuXG48YmItYmlsbHBheS1wYXltZW50LWRpc2NhcmQtY2hhbmdlcy1tb2RhbFxuICAqbmdJZj1cImlzRGlzY2FyZE1vZGFsT3BlblwiXG4gIGRhdGEtcm9sZT1cImJpbGxwYXktcGF5bWVudC1yZXZpZXctcGFnZS1kaXNjYXJkLWNoYW5nZXMtbW9kYWxcIlxuICAocmVzb2x2ZSk9XCJvbk1vZGFsUmVzb2x2ZSgkZXZlbnQpXCJcbiAgdGl0bGU9XCJDYW5jZWwgQmlsbCBQYXltZW50cz9cIlxuICBpMThuLXRpdGxlPVwiRGlzY2FyZCBjaGFuZ2VzIG1vZGFsIGhlYWRlckBAYmlsbHBheS5tdWx0aXBsZS1iaWxscy5kaXNjYXJkLWNoYW5nZXMtbW9kYWwuaGVhZGVyXCJcbiAgc3VidGl0bGU9XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsIGJpbGwgcGF5bWVudHM/IEVudGVyZWQgZGF0YSB3aWxsIGJlIGxvc3QuXCJcbiAgaTE4bi1zdWJ0aXRsZT1cIkRpc2NhcmQgY2hhbmdlcyBtb2RhbCBib2R5QEBiaWxscGF5Lm11bHRpcGxlLWJpbGxzLmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5ib2R5XCJcbiAgY29uZmlybS1idXR0b24tbGFiZWw9XCJDYW5jZWwgcGF5bWVudFwiXG4gIGkxOG4tY29uZmlybS1idXR0b24tbGFiZWw9XCJcbiAgICBjb25maXJtIG1vZGFsIGJ1dHRvbnxDYW5jZWwgcGF5bWVudCBjb25maXJtYXRpb24gYnV0dG9uQEBiaWxscGF5Lm11bHRpcGxlLWJpbGxzLmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5jb25maXJtLWJ1dHRvblwiXG4gIGNhbmNlbC1idXR0b24tbGFiZWw9XCJDb250aW51ZSB3aXRoIHBheW1lbnRcIlxuICBpMThuLWNhbmNlbC1idXR0b24tbGFiZWw9XCJcbiAgICBjYW5jZWwgbW9kYWwgYnV0dG9ufENvbnRpbnVlIHdpdGggY3VycmVudCBwYXltZW50IGJ1dHRvbkBAYmlsbHBheS5tdWx0aXBsZS1iaWxscy5kaXNjYXJkLWNoYW5nZXMtbW9kYWwuY2FuY2VsLWJ1dHRvblwiXG4+PC9iYi1iaWxscGF5LXBheW1lbnQtZGlzY2FyZC1jaGFuZ2VzLW1vZGFsPlxuIl19