import { Component, ChangeDetectionStrategy, Input } from '@angular/core';
import { BillpayUtilityService as Utility, formControlOptions, FrequencyKeys } from '@backbase/billpay-journeys-common';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/ui-ang/dropdown-single-select";
import * as i2 from "@angular/forms";
import * as i3 from "@angular/common";
export class BillpayPaymentFrequencyComponent {
    constructor() {
        this.destroy$ = new Subject();
        this.id = Utility.generateId();
    }
    ngOnInit() {
        this.processFrequencyValueChanges();
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    processFrequencyValueChanges() {
        if (!this.scheduleForm)
            return;
        const endTypeControl = this.scheduleForm.controls['endType'];
        const endDateControl = this.scheduleForm.controls['endDate'];
        const repeatControl = this.scheduleForm.controls['repeat'];
        const startDateControl = this.scheduleForm.controls['startDate'];
        const paymentServiceControl = this.scheduleForm.controls['paymentService'];
        const frequencyControl = this.scheduleForm.controls['frequency'];
        const paymentServiceDateControl = this.scheduleForm.controls['paymentServiceDate'];
        const sendDateControl = this.scheduleForm.controls['sendDate'];
        if (startDateControl && frequencyControl && paymentServiceControl && endTypeControl && endDateControl) {
            frequencyControl.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {
                if (value === FrequencyKeys.Once) {
                    paymentServiceControl.enable(formControlOptions);
                    sendDateControl.enable(formControlOptions);
                    paymentServiceControl.updateValueAndValidity();
                    paymentServiceDateControl.enable(formControlOptions);
                    endDateControl.disable(formControlOptions);
                    endTypeControl.disable(formControlOptions);
                    repeatControl.disable(formControlOptions);
                }
                else {
                    paymentServiceControl.disable(formControlOptions);
                    paymentServiceDateControl.disable(formControlOptions);
                    sendDateControl.disable(formControlOptions);
                    startDateControl.enable(formControlOptions);
                    endDateControl.enable(formControlOptions);
                    repeatControl.enable(formControlOptions);
                    endTypeControl.enable();
                }
            });
        }
    }
}
BillpayPaymentFrequencyComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentFrequencyComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentFrequencyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentFrequencyComponent, selector: "bb-billpay-payment-frequency", inputs: { scheduleForm: "scheduleForm", frequencies: "frequencies" }, ngImport: i0, template: "<div class=\"bb-form-field bb-form-field--md bb-block bb-block--md\">\n  <label\n    data-role=\"billpay-payment-frequency-label\"\n    class=\"form-label\"\n    i18n=\"@@billpay.billpay-payment-schedule.label.frequency\"\n    [id]=\"'billpay-payment-frequency-label' + id\"\n  >\n    Frequency\n  </label>\n  <bb-dropdown-single-select-ui\n    [formControl]=\"scheduleForm?.get('frequency')\"\n    [aria-labelledby]=\"'billpay-payment-frequency-label' + id\"\n    data-role=\"billpay-payment-frequency\"\n  >\n    <bb-dropdown-single-select-option-ui\n      *ngFor=\"let frequency of frequencies\"\n      [value]=\"frequency.value\"\n      [label]=\"frequency.name\"\n    >\n    </bb-dropdown-single-select-option-ui>\n  </bb-dropdown-single-select-ui>\n</div>\n", components: [{ type: i1.DropdownSingleSelectComponent, selector: "bb-dropdown-single-select-ui", inputs: ["placeholder", "defaultOptionAsPlaceholder", "options", "displayAttributePath", "iconName", "compareWithFn"] }, { type: i1.DropdownSingleSelectOptionComponent, selector: "bb-dropdown-single-select-option-ui", inputs: ["value", "label"] }], directives: [{ type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i2.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentFrequencyComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-frequency',
                    templateUrl: './billpay-payment-frequency.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], propDecorators: { scheduleForm: [{
                type: Input
            }], frequencies: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LWZyZXF1ZW5jeS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3BheS1iaWxscy1qb3VybmV5L3NyYy9jb21wb25lbnRzL2Zvcm0tY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtZnJlcXVlbmN5L2JpbGxwYXktcGF5bWVudC1mcmVxdWVuY3kuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9mb3JtLWNvbXBvbmVudHMvYmlsbHBheS1wYXltZW50LWZyZXF1ZW5jeS9iaWxscGF5LXBheW1lbnQtZnJlcXVlbmN5LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsdUJBQXVCLEVBQUUsS0FBSyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBRTdGLE9BQU8sRUFBRSxxQkFBcUIsSUFBSSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFFeEgsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7O0FBTzNDLE1BQU0sT0FBTyxnQ0FBZ0M7SUFMN0M7UUFRbUIsYUFBUSxHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7UUFDdkMsT0FBRSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztLQTJDcEM7SUF6Q0MsUUFBUTtRQUNOLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO0lBQ3RDLENBQUM7SUFDRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFTyw0QkFBNEI7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZO1lBQUUsT0FBTztRQUMvQixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM3RCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM3RCxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzRCxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pFLE1BQU0scUJBQXFCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMzRSxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pFLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNuRixNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUUvRCxJQUFJLGdCQUFnQixJQUFJLGdCQUFnQixJQUFJLHFCQUFxQixJQUFJLGNBQWMsSUFBSSxjQUFjLEVBQUU7WUFDckcsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUM3RSxJQUFJLEtBQUssS0FBSyxhQUFhLENBQUMsSUFBSSxFQUFFO29CQUNoQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztvQkFDakQsZUFBZSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO29CQUMzQyxxQkFBcUIsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO29CQUMvQyx5QkFBeUIsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztvQkFDckQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO29CQUMzQyxjQUFjLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7b0JBQzNDLGFBQWEsQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztpQkFDM0M7cUJBQU07b0JBQ0wscUJBQXFCLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7b0JBQ2xELHlCQUF5QixDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO29CQUN0RCxlQUFlLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7b0JBQzVDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO29CQUM1QyxjQUFjLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7b0JBQzFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztvQkFDekMsY0FBYyxDQUFDLE1BQU0sRUFBRSxDQUFDO2lCQUN6QjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDOzs4SEE5Q1UsZ0NBQWdDO2tIQUFoQyxnQ0FBZ0MsMElDWjdDLDZ2QkFzQkE7NEZEVmEsZ0NBQWdDO2tCQUw1QyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSw4QkFBOEI7b0JBQ3hDLFdBQVcsRUFBRSw0Q0FBNEM7b0JBQ3pELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2lCQUNoRDs4QkFFVSxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIElucHV0LCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEJpbGxwYXlVdGlsaXR5U2VydmljZSBhcyBVdGlsaXR5LCBmb3JtQ29udHJvbE9wdGlvbnMsIEZyZXF1ZW5jeUtleXMgfSBmcm9tICdAYmFja2Jhc2UvYmlsbHBheS1qb3VybmV5cy1jb21tb24nO1xuaW1wb3J0IHsgRnJlcXVlbmN5IH0gZnJvbSAnQGJhY2tiYXNlL2JpbGxwYXktam91cm5leXMtY29tbW9uJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItYmlsbHBheS1wYXltZW50LWZyZXF1ZW5jeScsXG4gIHRlbXBsYXRlVXJsOiAnLi9iaWxscGF5LXBheW1lbnQtZnJlcXVlbmN5LmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIEJpbGxwYXlQYXltZW50RnJlcXVlbmN5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKSBzY2hlZHVsZUZvcm0/OiBGb3JtR3JvdXA7XG4gIEBJbnB1dCgpIGZyZXF1ZW5jaWVzPzogQXJyYXk8RnJlcXVlbmN5PjtcbiAgcHJpdmF0ZSByZWFkb25seSBkZXN0cm95JCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG4gIHJlYWRvbmx5IGlkID0gVXRpbGl0eS5nZW5lcmF0ZUlkKCk7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5wcm9jZXNzRnJlcXVlbmN5VmFsdWVDaGFuZ2VzKCk7XG4gIH1cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBwcm9jZXNzRnJlcXVlbmN5VmFsdWVDaGFuZ2VzKCkge1xuICAgIGlmICghdGhpcy5zY2hlZHVsZUZvcm0pIHJldHVybjtcbiAgICBjb25zdCBlbmRUeXBlQ29udHJvbCA9IHRoaXMuc2NoZWR1bGVGb3JtLmNvbnRyb2xzWydlbmRUeXBlJ107XG4gICAgY29uc3QgZW5kRGF0ZUNvbnRyb2wgPSB0aGlzLnNjaGVkdWxlRm9ybS5jb250cm9sc1snZW5kRGF0ZSddO1xuICAgIGNvbnN0IHJlcGVhdENvbnRyb2wgPSB0aGlzLnNjaGVkdWxlRm9ybS5jb250cm9sc1sncmVwZWF0J107XG4gICAgY29uc3Qgc3RhcnREYXRlQ29udHJvbCA9IHRoaXMuc2NoZWR1bGVGb3JtLmNvbnRyb2xzWydzdGFydERhdGUnXTtcbiAgICBjb25zdCBwYXltZW50U2VydmljZUNvbnRyb2wgPSB0aGlzLnNjaGVkdWxlRm9ybS5jb250cm9sc1sncGF5bWVudFNlcnZpY2UnXTtcbiAgICBjb25zdCBmcmVxdWVuY3lDb250cm9sID0gdGhpcy5zY2hlZHVsZUZvcm0uY29udHJvbHNbJ2ZyZXF1ZW5jeSddO1xuICAgIGNvbnN0IHBheW1lbnRTZXJ2aWNlRGF0ZUNvbnRyb2wgPSB0aGlzLnNjaGVkdWxlRm9ybS5jb250cm9sc1sncGF5bWVudFNlcnZpY2VEYXRlJ107XG4gICAgY29uc3Qgc2VuZERhdGVDb250cm9sID0gdGhpcy5zY2hlZHVsZUZvcm0uY29udHJvbHNbJ3NlbmREYXRlJ107XG5cbiAgICBpZiAoc3RhcnREYXRlQ29udHJvbCAmJiBmcmVxdWVuY3lDb250cm9sICYmIHBheW1lbnRTZXJ2aWNlQ29udHJvbCAmJiBlbmRUeXBlQ29udHJvbCAmJiBlbmREYXRlQ29udHJvbCkge1xuICAgICAgZnJlcXVlbmN5Q29udHJvbC52YWx1ZUNoYW5nZXMucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSh2YWx1ZSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gRnJlcXVlbmN5S2V5cy5PbmNlKSB7XG4gICAgICAgICAgcGF5bWVudFNlcnZpY2VDb250cm9sLmVuYWJsZShmb3JtQ29udHJvbE9wdGlvbnMpO1xuICAgICAgICAgIHNlbmREYXRlQ29udHJvbC5lbmFibGUoZm9ybUNvbnRyb2xPcHRpb25zKTtcbiAgICAgICAgICBwYXltZW50U2VydmljZUNvbnRyb2wudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgICAgICAgIHBheW1lbnRTZXJ2aWNlRGF0ZUNvbnRyb2wuZW5hYmxlKGZvcm1Db250cm9sT3B0aW9ucyk7XG4gICAgICAgICAgZW5kRGF0ZUNvbnRyb2wuZGlzYWJsZShmb3JtQ29udHJvbE9wdGlvbnMpO1xuICAgICAgICAgIGVuZFR5cGVDb250cm9sLmRpc2FibGUoZm9ybUNvbnRyb2xPcHRpb25zKTtcbiAgICAgICAgICByZXBlYXRDb250cm9sLmRpc2FibGUoZm9ybUNvbnRyb2xPcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXltZW50U2VydmljZUNvbnRyb2wuZGlzYWJsZShmb3JtQ29udHJvbE9wdGlvbnMpO1xuICAgICAgICAgIHBheW1lbnRTZXJ2aWNlRGF0ZUNvbnRyb2wuZGlzYWJsZShmb3JtQ29udHJvbE9wdGlvbnMpO1xuICAgICAgICAgIHNlbmREYXRlQ29udHJvbC5kaXNhYmxlKGZvcm1Db250cm9sT3B0aW9ucyk7XG4gICAgICAgICAgc3RhcnREYXRlQ29udHJvbC5lbmFibGUoZm9ybUNvbnRyb2xPcHRpb25zKTtcbiAgICAgICAgICBlbmREYXRlQ29udHJvbC5lbmFibGUoZm9ybUNvbnRyb2xPcHRpb25zKTtcbiAgICAgICAgICByZXBlYXRDb250cm9sLmVuYWJsZShmb3JtQ29udHJvbE9wdGlvbnMpO1xuICAgICAgICAgIGVuZFR5cGVDb250cm9sLmVuYWJsZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJiYi1mb3JtLWZpZWxkIGJiLWZvcm0tZmllbGQtLW1kIGJiLWJsb2NrIGJiLWJsb2NrLS1tZFwiPlxuICA8bGFiZWxcbiAgICBkYXRhLXJvbGU9XCJiaWxscGF5LXBheW1lbnQtZnJlcXVlbmN5LWxhYmVsXCJcbiAgICBjbGFzcz1cImZvcm0tbGFiZWxcIlxuICAgIGkxOG49XCJAQGJpbGxwYXkuYmlsbHBheS1wYXltZW50LXNjaGVkdWxlLmxhYmVsLmZyZXF1ZW5jeVwiXG4gICAgW2lkXT1cIidiaWxscGF5LXBheW1lbnQtZnJlcXVlbmN5LWxhYmVsJyArIGlkXCJcbiAgPlxuICAgIEZyZXF1ZW5jeVxuICA8L2xhYmVsPlxuICA8YmItZHJvcGRvd24tc2luZ2xlLXNlbGVjdC11aVxuICAgIFtmb3JtQ29udHJvbF09XCJzY2hlZHVsZUZvcm0/LmdldCgnZnJlcXVlbmN5JylcIlxuICAgIFthcmlhLWxhYmVsbGVkYnldPVwiJ2JpbGxwYXktcGF5bWVudC1mcmVxdWVuY3ktbGFiZWwnICsgaWRcIlxuICAgIGRhdGEtcm9sZT1cImJpbGxwYXktcGF5bWVudC1mcmVxdWVuY3lcIlxuICA+XG4gICAgPGJiLWRyb3Bkb3duLXNpbmdsZS1zZWxlY3Qtb3B0aW9uLXVpXG4gICAgICAqbmdGb3I9XCJsZXQgZnJlcXVlbmN5IG9mIGZyZXF1ZW5jaWVzXCJcbiAgICAgIFt2YWx1ZV09XCJmcmVxdWVuY3kudmFsdWVcIlxuICAgICAgW2xhYmVsXT1cImZyZXF1ZW5jeS5uYW1lXCJcbiAgICA+XG4gICAgPC9iYi1kcm9wZG93bi1zaW5nbGUtc2VsZWN0LW9wdGlvbi11aT5cbiAgPC9iYi1kcm9wZG93bi1zaW5nbGUtc2VsZWN0LXVpPlxuPC9kaXY+XG4iXX0=