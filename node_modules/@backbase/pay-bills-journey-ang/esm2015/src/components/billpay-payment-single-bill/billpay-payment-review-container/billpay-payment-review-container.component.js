import { ChangeDetectionStrategy, Component, HostListener, Input, ViewChild, } from '@angular/core';
import { BehaviorSubject, of, Subject } from 'rxjs';
import { filter, switchMap, take, takeUntil, tap } from 'rxjs/operators';
import { BillpayDiscardChangesModalService, } from '@backbase/billpay-journeys-common';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/pay-bills-navigation.service";
import * as i2 from "@backbase/billpay-journeys-common";
import * as i3 from "../../../services/pay-bills-state.service";
import * as i4 from "@backbase/ui-ang/notification";
import * as i5 from "@angular/router";
import * as i6 from "@backbase/ui-ang/alert";
import * as i7 from "../billpay-payment-discard-changes-modal/billpay-payment-discard-changes-modal.component";
import * as i8 from "@angular/common";
import * as i9 from "@backbase/ui-ang/button";
export class BillpayPaymentReviewContainerComponent {
    /** @internal */
    constructor(navigationService, dataService, stateService, notificationService, discardModalService, paymentParserService, route, cdRef) {
        this.navigationService = navigationService;
        this.dataService = dataService;
        this.stateService = stateService;
        this.notificationService = notificationService;
        this.discardModalService = discardModalService;
        this.paymentParserService = paymentParserService;
        this.route = route;
        this.cdRef = cdRef;
        this.paymentConfirm$ = new BehaviorSubject(undefined);
        this.componentDestroyed$ = new Subject();
        this.paymentError = false;
        this.hasDateError = false;
        this.editMode = false;
        this.notificationMessageTemplate = '';
        this.notificationHeaderTemplate = '';
    }
    get isDiscardModalOpen() {
        return this.discardModalService.isDiscardModalOpen;
    }
    get dismissTimeout() {
        if (this.dismissTimeoutValue === undefined) {
            throw new Error('Dismiss timeout value not found');
        }
        return this.dismissTimeoutValue;
    }
    ngOnInit() {
        this.stateService.paymentState.pipe(take(1)).subscribe(payment => {
            var _a;
            this.payment = payment === null || payment === void 0 ? void 0 : payment[0];
            this.paymentReview = this.payment && this.paymentParserService.paymentFormStateToReview(this.payment);
            const frequency = (_a = this.frequencies) === null || _a === void 0 ? void 0 : _a.find(freq => { var _a, _b; return ((_b = (_a = this.payment) === null || _a === void 0 ? void 0 : _a.schedule) === null || _b === void 0 ? void 0 : _b.frequency) === freq.value; });
            this.frequencyLabel = (frequency === null || frequency === void 0 ? void 0 : frequency.name) || '';
            if (!this.payment) {
                this.navigationService.navigateToForm({ relativeTo: this.route.parent });
            }
        });
        this.paymentConfirm$
            .pipe(takeUntil(this.componentDestroyed$), filter(Boolean))
            .subscribe(payment => this.onPaymentConfirm(payment));
    }
    ngOnDestroy() {
        this.componentDestroyed$.next();
        this.componentDestroyed$.complete();
    }
    onWindowUnload($event) {
        if (!this.isDiscardModalOpen) {
            $event.returnValue = true;
        }
    }
    onEdit() {
        this.editMode = true;
        this.navigationService.navigateToForm({ relativeTo: this.route.parent });
    }
    navigateToPayments() {
        this.navigationService.navigateToPayments();
    }
    cancel() {
        this.navigationService.navigateToPayeeList();
    }
    confirmPayment(payment) {
        if (!payment)
            return;
        this.paymentConfirm$.next(payment);
    }
    openModal() {
        return this.paymentConfirm$.pipe(switchMap(payment => (payment || this.editMode ? of(true) : this.discardModalService.openModal())), tap(isResolved => isResolved && !this.editMode && this.stateService.reset()));
    }
    onModalResolve(isConfirmed) {
        this.discardModalService.onModalResolve(isConfirmed);
    }
    onPaymentConfirm(payment) {
        this.paymentError = false;
        this.hasDateError = false;
        this.dataService
            .createPayment(payment)
            .pipe(takeUntil(this.componentDestroyed$))
            .subscribe(() => {
            this.navigationService.navigateToPayeeList();
            this.notificationService.showNotification({
                header: this.notificationHeaderTemplate,
                message: this.notificationMessageTemplate,
                modifier: 'success',
                ttl: this.dismissTimeout,
            });
        }, response => {
            var _a, _b;
            this.paymentError = true;
            this.hasDateError = (_b = (_a = response.error) === null || _a === void 0 ? void 0 : _a.errors) === null || _b === void 0 ? void 0 : _b.some((a) => a.key === 'billpay.api.invalidPaymentDate');
            this.cdRef.markForCheck();
            this.failAlert.nativeElement.scrollIntoView(false);
        });
    }
}
BillpayPaymentReviewContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentReviewContainerComponent, deps: [{ token: i1.PayBillsNavigationService }, { token: i2.BillpayPaymentDataService }, { token: i3.PayBillsStateService }, { token: i4.NotificationService }, { token: i2.BillpayDiscardChangesModalService }, { token: i2.BillpayPaymentParserService }, { token: i5.ActivatedRoute }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentReviewContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentReviewContainerComponent, selector: "bb-billpay-payment-review-container", inputs: { frequencies: "frequencies", dismissTimeoutValue: "dismissTimeoutValue", accountNumberMasked: "accountNumberMasked" }, host: { listeners: { "window:beforeunload": "onWindowUnload($event)" } }, providers: [BillpayDiscardChangesModalService], viewQueries: [{ propertyName: "notificationMessageTemplate", first: true, predicate: ["notificationMessage"], descendants: true }, { propertyName: "notificationHeaderTemplate", first: true, predicate: ["notificationHeader"], descendants: true }, { propertyName: "failAlert", first: true, predicate: ["failAlert"], descendants: true }], ngImport: i0, template: "<ng-container *ngIf=\"payment\">\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <div class=\"bb-block bb-block--xl\">\n        <ng-container *ngTemplateOutlet=\"reviewContent\"></ng-container>\n      </div>\n      <ng-container *ngTemplateOutlet=\"reviewButtons\"></ng-container>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #reviewContent>\n  <div #failAlert>\n    <bb-alert-ui\n      title=\"Failed to submit payment. Please try again later.\"\n      i18n-title=\"Failed to submit payment|Title for payment error@@billpay-payment-review-container.error-alert\"\n      (close)=\"(false)\"\n      modifier=\"error\"\n      data-role=\"failure-message\"\n      *ngIf=\"paymentError && !hasDateError\"\n    >\n    </bb-alert-ui>\n    <bb-alert-ui\n      title=\"The date selected is invalid.\"\n      i18n-title=\"\n        Failed to submit payment date|Title for payment date error@@billpay-payment-review-container.error-date-alert\"\n      message=\"The payment cannot be scheduled on this date. Please select another date in the previous step.\"\n      i18n-message=\"Date payment error|Date error for payment@@billpay-payment-review.date-error-alert.message\"\n      (close)=\"(false)\"\n      modifier=\"error\"\n      data-role=\"failure-date-message\"\n      *ngIf=\"paymentError && hasDateError\"\n    >\n    </bb-alert-ui>\n  </div>\n  <bb-billpay-payment-review-card\n    [accountNumberMask]=\"accountNumberMasked\"\n    [paymentReview]=\"paymentReview\"\n    [frequencyLabel]=\"frequencyLabel\"\n  >\n  </bb-billpay-payment-review-card>\n</ng-template>\n\n<ng-template #reviewButtons>\n  <div class=\"bb-button-bar bb-button-bar--reverse\">\n    <button\n      bbButton\n      data-role=\"confirm-payment-button\"\n      i18n=\"Payment details confirm button|Label for confirm payment button@@billpay-payment-review.confirm\"\n      (click)=\"confirmPayment(payment)\"\n      class=\"bb-button-bar__button\"\n    >\n      Submit\n    </button>\n    <button\n      bbButton\n      data-role=\"edit-payment-button\"\n      i18n=\"Payment details edit button|Label for edit payment button@@billpay-payment-review.edit\"\n      (click)=\"onEdit()\"\n      class=\"bb-button-bar__button\"\n      color=\"secondary\"\n    >\n      Edit\n    </button>\n    <button\n      bbButton\n      data-role=\"cancel-payment-button\"\n      i18n=\"Payment details cancel button|Label for cancel payment button@@billpay-payment-review.cancel\"\n      (click)=\"cancel()\"\n      class=\"bb-button-bar__button bb-button-bar__button--across\"\n      color=\"link\"\n    >\n      Discard\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #notificationMessage>\n  <ng-container *ngIf=\"payment?.payeeTo as payee\">\n    <span\n      i18n=\"\n        payment notification message|Payment confirmation success notification\n        message@@billpay-payment-review.confirm.notification.message\"\n      >Payment to {{ (payee.nickName && payee.nickName + ' (' + payee.name + ')') || payee.name }} has been scheduled\n      successfully</span\n    >\n    <div class=\"bb-button-bar\">\n      <button\n        bbButton\n        data-role=\"notification-secondary-button\"\n        class=\"bb-button-bar__button\"\n        (click)=\"navigateToPayments()\"\n        i18n=\"\n          payment notification button|Navigate to scheduled payments@@billpay-payment-review.confirm.notification.button\"\n      >\n        View scheduled payments\n      </button>\n    </div>\n  </ng-container>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <span\n    i18n=\"\n      payment notification header|Payment confirmation success notification\n      header@@billpay-payment-review.confirm.notification.header\"\n    >Payment scheduled</span\n  >\n</ng-template>\n\n<bb-billpay-payment-discard-changes-modal\n  *ngIf=\"isDiscardModalOpen\"\n  data-role=\"billpay-payment-review-page-discard-changes-modal\"\n  (resolve)=\"onModalResolve($event)\"\n  title=\"Cancel payment?\"\n  i18n-title=\"Discard changes modal header@@billpay.manage-payment.discard-changes-modal.header\"\n  subtitle=\"Are you sure you want to cancel this payment? You will lose any details entered.\"\n  i18n-subtitle=\"Discard changes modal body@@billpay.manage-payment.discard-changes-modal.body\"\n  confirm-button-label=\"Cancel payment\"\n  i18n-confirm-button-label=\"\n    confirm modal button|Cancel payment confirmation button@@billpay.manage-payment.discard-changes-modal.confirm-button\"\n  cancel-button-label=\"Continue with payment\"\n  i18n-cancel-button-label=\"\n    cancel modal button|Continue with current payment button@@billpay.manage-payment.discard-changes-modal.cancel-button\"\n></bb-billpay-payment-discard-changes-modal>\n", components: [{ type: i6.AlertComponent, selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i2.BillpayPaymentReviewCardComponent, selector: "bb-billpay-payment-review-card", inputs: ["paymentReview", "accountNumberMask", "frequencyLabel"] }, { type: i7.BillpayPaymentDiscardChangesModalComponent, selector: "bb-billpay-payment-discard-changes-modal", inputs: ["title", "subtitle", "confirm-button-label", "cancel-button-label"], outputs: ["resolve"] }], directives: [{ type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i8.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i9.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentReviewContainerComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-review-container',
                    templateUrl: './billpay-payment-review-container.component.html',
                    providers: [BillpayDiscardChangesModalService],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.PayBillsNavigationService }, { type: i2.BillpayPaymentDataService }, { type: i3.PayBillsStateService }, { type: i4.NotificationService }, { type: i2.BillpayDiscardChangesModalService }, { type: i2.BillpayPaymentParserService }, { type: i5.ActivatedRoute }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { frequencies: [{
                type: Input
            }], dismissTimeoutValue: [{
                type: Input
            }], accountNumberMasked: [{
                type: Input
            }], notificationMessageTemplate: [{
                type: ViewChild,
                args: ['notificationMessage']
            }], notificationHeaderTemplate: [{
                type: ViewChild,
                args: ['notificationHeader']
            }], failAlert: [{
                type: ViewChild,
                args: ['failAlert']
            }], onWindowUnload: [{
                type: HostListener,
                args: ['window:beforeunload', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtc2luZ2xlLWJpbGwvYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIvYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtc2luZ2xlLWJpbGwvYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIvYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFJTCxTQUFTLEdBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGVBQWUsRUFBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUVMLGlDQUFpQyxHQU1sQyxNQUFNLG1DQUFtQyxDQUFDOzs7Ozs7Ozs7OztBQVkzQyxNQUFNLE9BQU8sc0NBQXNDO0lBaUJqRCxnQkFBZ0I7SUFDaEIsWUFDbUIsaUJBQTRDLEVBQzVDLFdBQXNDLEVBQ3RDLFlBQWtDLEVBQ2xDLG1CQUF3QyxFQUN4QyxtQkFBc0QsRUFDdEQsb0JBQWlELEVBQ2pELEtBQXFCLEVBQzlCLEtBQXdCO1FBUGYsc0JBQWlC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aEQ7b1hBTVUsV0FBVztzQkFBbkIsS0FBSztnQkFDRyxtQkFBbUI7c0JBQTNCLEtBQUs7Z0JBQ0csbUJBQW1CO3NCQUEzQixLQUFLO2dCQU00QiwyQkFBMkI7c0JBQTVELFNBQVM7dUJBQUMscUJBQXFCO2dCQUNDLDBCQUEwQjtzQkFBMUQsU0FBUzt1QkFBQyxvQkFBb0I7Z0JBQ1AsU0FBUztzQkFBaEMsU0FBUzt1QkFBQyxXQUFXO2dCQThDdEIsY0FBYztzQkFEYixZQUFZO3VCQUFDLHFCQUFxQixFQUFFLENBQUMsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0NoaWxkLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSwgb2YsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbHRlciwgc3dpdGNoTWFwLCB0YWtlLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7XG4gIEJpbGxwYXlEaXNjYXJkQ2hhbmdlc0Zvcm1Db21wb25lbnQsXG4gIEJpbGxwYXlEaXNjYXJkQ2hhbmdlc01vZGFsU2VydmljZSxcbiAgQmlsbHBheVBheW1lbnRQYXJzZXJTZXJ2aWNlLFxuICBQYXltZW50Rm9ybVN0YXRlLFxuICBQYXltZW50UmV2aWV3LFxuICBGcmVxdWVuY3ksXG4gIEJpbGxwYXlQYXltZW50RGF0YVNlcnZpY2UsXG59IGZyb20gJ0BiYWNrYmFzZS9iaWxscGF5LWpvdXJuZXlzLWNvbW1vbic7XG5pbXBvcnQgeyBQYXlCaWxsc1N0YXRlU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3BheS1iaWxscy1zdGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IFBheUJpbGxzTmF2aWdhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wYXktYmlsbHMtbmF2aWdhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvdWktYW5nL25vdGlmaWNhdGlvbic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLWJpbGxwYXktcGF5bWVudC1yZXZpZXctY29udGFpbmVyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2JpbGxwYXktcGF5bWVudC1yZXZpZXctY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcbiAgcHJvdmlkZXJzOiBbQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIEJpbGxwYXlQYXltZW50UmV2aWV3Q29udGFpbmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIEJpbGxwYXlEaXNjYXJkQ2hhbmdlc0Zvcm1Db21wb25lbnQge1xuICBwYXltZW50PzogUGF5bWVudEZvcm1TdGF0ZTtcbiAgcGF5bWVudFJldmlldz86IFBheW1lbnRSZXZpZXc7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGF5bWVudENvbmZpcm0kID0gbmV3IEJlaGF2aW9yU3ViamVjdDxQYXltZW50Rm9ybVN0YXRlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbXBvbmVudERlc3Ryb3llZCQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuICBASW5wdXQoKSBmcmVxdWVuY2llcz86IEZyZXF1ZW5jeVtdO1xuICBASW5wdXQoKSBkaXNtaXNzVGltZW91dFZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpIGFjY291bnROdW1iZXJNYXNrZWQ/OiBib29sZWFuO1xuICBwYXltZW50RXJyb3IgPSBmYWxzZTtcbiAgaGFzRGF0ZUVycm9yID0gZmFsc2U7XG4gIGZyZXF1ZW5jeUxhYmVsPzogc3RyaW5nO1xuICBwcml2YXRlIGVkaXRNb2RlID0gZmFsc2U7XG5cbiAgQFZpZXdDaGlsZCgnbm90aWZpY2F0aW9uTWVzc2FnZScpIG5vdGlmaWNhdGlvbk1lc3NhZ2VUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiB8IHN0cmluZyA9ICcnO1xuICBAVmlld0NoaWxkKCdub3RpZmljYXRpb25IZWFkZXInKSBub3RpZmljYXRpb25IZWFkZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiB8IHN0cmluZyA9ICcnO1xuICBAVmlld0NoaWxkKCdmYWlsQWxlcnQnKSBmYWlsQWxlcnQhOiBFbGVtZW50UmVmO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBuYXZpZ2F0aW9uU2VydmljZTogUGF5QmlsbHNOYXZpZ2F0aW9uU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRhdGFTZXJ2aWNlOiBCaWxscGF5UGF5bWVudERhdGFTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc3RhdGVTZXJ2aWNlOiBQYXlCaWxsc1N0YXRlU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvblNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBkaXNjYXJkTW9kYWxTZXJ2aWNlOiBCaWxscGF5RGlzY2FyZENoYW5nZXNNb2RhbFNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBwYXltZW50UGFyc2VyU2VydmljZTogQmlsbHBheVBheW1lbnRQYXJzZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICApIHt9XG5cbiAgZ2V0IGlzRGlzY2FyZE1vZGFsT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNjYXJkTW9kYWxTZXJ2aWNlLmlzRGlzY2FyZE1vZGFsT3BlbjtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGRpc21pc3NUaW1lb3V0KCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuZGlzbWlzc1RpbWVvdXRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rpc21pc3MgdGltZW91dCB2YWx1ZSBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGlzbWlzc1RpbWVvdXRWYWx1ZTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc3RhdGVTZXJ2aWNlLnBheW1lbnRTdGF0ZS5waXBlKHRha2UoMSkpLnN1YnNjcmliZShwYXltZW50ID0+IHtcbiAgICAgIHRoaXMucGF5bWVudCA9IHBheW1lbnQ/LlswXTtcbiAgICAgIHRoaXMucGF5bWVudFJldmlldyA9IHRoaXMucGF5bWVudCAmJiB0aGlzLnBheW1lbnRQYXJzZXJTZXJ2aWNlLnBheW1lbnRGb3JtU3RhdGVUb1Jldmlldyh0aGlzLnBheW1lbnQpO1xuICAgICAgY29uc3QgZnJlcXVlbmN5ID0gdGhpcy5mcmVxdWVuY2llcz8uZmluZChmcmVxID0+IHRoaXMucGF5bWVudD8uc2NoZWR1bGU/LmZyZXF1ZW5jeSA9PT0gZnJlcS52YWx1ZSk7XG4gICAgICB0aGlzLmZyZXF1ZW5jeUxhYmVsID0gZnJlcXVlbmN5Py5uYW1lIHx8ICcnO1xuICAgICAgaWYgKCF0aGlzLnBheW1lbnQpIHtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5uYXZpZ2F0ZVRvRm9ybSh7IHJlbGF0aXZlVG86IHRoaXMucm91dGUucGFyZW50IH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucGF5bWVudENvbmZpcm0kXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5jb21wb25lbnREZXN0cm95ZWQkKSwgZmlsdGVyKEJvb2xlYW4pKVxuICAgICAgLnN1YnNjcmliZShwYXltZW50ID0+IHRoaXMub25QYXltZW50Q29uZmlybShwYXltZW50IGFzIFBheW1lbnRGb3JtU3RhdGUpKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuY29tcG9uZW50RGVzdHJveWVkJC5uZXh0KCk7XG4gICAgdGhpcy5jb21wb25lbnREZXN0cm95ZWQkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6YmVmb3JldW5sb2FkJywgWyckZXZlbnQnXSlcbiAgb25XaW5kb3dVbmxvYWQoJGV2ZW50OiBCZWZvcmVVbmxvYWRFdmVudCkge1xuICAgIGlmICghdGhpcy5pc0Rpc2NhcmRNb2RhbE9wZW4pIHtcbiAgICAgICRldmVudC5yZXR1cm5WYWx1ZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgb25FZGl0KCkge1xuICAgIHRoaXMuZWRpdE1vZGUgPSB0cnVlO1xuICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGVUb0Zvcm0oeyByZWxhdGl2ZVRvOiB0aGlzLnJvdXRlLnBhcmVudCB9KTtcbiAgfVxuXG4gIG5hdmlnYXRlVG9QYXltZW50cygpIHtcbiAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlVG9QYXltZW50cygpO1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGVUb1BheWVlTGlzdCgpO1xuICB9XG5cbiAgY29uZmlybVBheW1lbnQocGF5bWVudD86IFBheW1lbnRGb3JtU3RhdGUpIHtcbiAgICBpZiAoIXBheW1lbnQpIHJldHVybjtcbiAgICB0aGlzLnBheW1lbnRDb25maXJtJC5uZXh0KHBheW1lbnQpO1xuICB9XG5cbiAgb3Blbk1vZGFsKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnBheW1lbnRDb25maXJtJC5waXBlKFxuICAgICAgc3dpdGNoTWFwKHBheW1lbnQgPT4gKHBheW1lbnQgfHwgdGhpcy5lZGl0TW9kZSA/IG9mKHRydWUpIDogdGhpcy5kaXNjYXJkTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgpKSksXG4gICAgICB0YXAoaXNSZXNvbHZlZCA9PiBpc1Jlc29sdmVkICYmICF0aGlzLmVkaXRNb2RlICYmIHRoaXMuc3RhdGVTZXJ2aWNlLnJlc2V0KCkpLFxuICAgICk7XG4gIH1cblxuICBvbk1vZGFsUmVzb2x2ZShpc0NvbmZpcm1lZDogYm9vbGVhbikge1xuICAgIHRoaXMuZGlzY2FyZE1vZGFsU2VydmljZS5vbk1vZGFsUmVzb2x2ZShpc0NvbmZpcm1lZCk7XG4gIH1cblxuICBwcml2YXRlIG9uUGF5bWVudENvbmZpcm0ocGF5bWVudDogUGF5bWVudEZvcm1TdGF0ZSkge1xuICAgIHRoaXMucGF5bWVudEVycm9yID0gZmFsc2U7XG4gICAgdGhpcy5oYXNEYXRlRXJyb3IgPSBmYWxzZTtcbiAgICB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAuY3JlYXRlUGF5bWVudChwYXltZW50KVxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuY29tcG9uZW50RGVzdHJveWVkJCkpXG4gICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uU2VydmljZS5uYXZpZ2F0ZVRvUGF5ZWVMaXN0KCk7XG4gICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLnNob3dOb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgaGVhZGVyOiB0aGlzLm5vdGlmaWNhdGlvbkhlYWRlclRlbXBsYXRlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5ub3RpZmljYXRpb25NZXNzYWdlVGVtcGxhdGUsXG4gICAgICAgICAgICBtb2RpZmllcjogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgdHRsOiB0aGlzLmRpc21pc3NUaW1lb3V0LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5wYXltZW50RXJyb3IgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaGFzRGF0ZUVycm9yID0gcmVzcG9uc2UuZXJyb3I/LmVycm9ycz8uc29tZSgoYTogYW55KSA9PiBhLmtleSA9PT0gJ2JpbGxwYXkuYXBpLmludmFsaWRQYXltZW50RGF0ZScpO1xuICAgICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgdGhpcy5mYWlsQWxlcnQubmF0aXZlRWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XG4gICAgICAgIH0sXG4gICAgICApO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwicGF5bWVudFwiPlxuICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWxnXCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS14bFwiPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwicmV2aWV3Q29udGVudFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG4gICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwicmV2aWV3QnV0dG9uc1wiPjwvbmctY29udGFpbmVyPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGUgI3Jldmlld0NvbnRlbnQ+XG4gIDxkaXYgI2ZhaWxBbGVydD5cbiAgICA8YmItYWxlcnQtdWlcbiAgICAgIHRpdGxlPVwiRmFpbGVkIHRvIHN1Ym1pdCBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXG4gICAgICBpMThuLXRpdGxlPVwiRmFpbGVkIHRvIHN1Ym1pdCBwYXltZW50fFRpdGxlIGZvciBwYXltZW50IGVycm9yQEBiaWxscGF5LXBheW1lbnQtcmV2aWV3LWNvbnRhaW5lci5lcnJvci1hbGVydFwiXG4gICAgICAoY2xvc2UpPVwiKGZhbHNlKVwiXG4gICAgICBtb2RpZmllcj1cImVycm9yXCJcbiAgICAgIGRhdGEtcm9sZT1cImZhaWx1cmUtbWVzc2FnZVwiXG4gICAgICAqbmdJZj1cInBheW1lbnRFcnJvciAmJiAhaGFzRGF0ZUVycm9yXCJcbiAgICA+XG4gICAgPC9iYi1hbGVydC11aT5cbiAgICA8YmItYWxlcnQtdWlcbiAgICAgIHRpdGxlPVwiVGhlIGRhdGUgc2VsZWN0ZWQgaXMgaW52YWxpZC5cIlxuICAgICAgaTE4bi10aXRsZT1cIlxuICAgICAgICBGYWlsZWQgdG8gc3VibWl0IHBheW1lbnQgZGF0ZXxUaXRsZSBmb3IgcGF5bWVudCBkYXRlIGVycm9yQEBiaWxscGF5LXBheW1lbnQtcmV2aWV3LWNvbnRhaW5lci5lcnJvci1kYXRlLWFsZXJ0XCJcbiAgICAgIG1lc3NhZ2U9XCJUaGUgcGF5bWVudCBjYW5ub3QgYmUgc2NoZWR1bGVkIG9uIHRoaXMgZGF0ZS4gUGxlYXNlIHNlbGVjdCBhbm90aGVyIGRhdGUgaW4gdGhlIHByZXZpb3VzIHN0ZXAuXCJcbiAgICAgIGkxOG4tbWVzc2FnZT1cIkRhdGUgcGF5bWVudCBlcnJvcnxEYXRlIGVycm9yIGZvciBwYXltZW50QEBiaWxscGF5LXBheW1lbnQtcmV2aWV3LmRhdGUtZXJyb3ItYWxlcnQubWVzc2FnZVwiXG4gICAgICAoY2xvc2UpPVwiKGZhbHNlKVwiXG4gICAgICBtb2RpZmllcj1cImVycm9yXCJcbiAgICAgIGRhdGEtcm9sZT1cImZhaWx1cmUtZGF0ZS1tZXNzYWdlXCJcbiAgICAgICpuZ0lmPVwicGF5bWVudEVycm9yICYmIGhhc0RhdGVFcnJvclwiXG4gICAgPlxuICAgIDwvYmItYWxlcnQtdWk+XG4gIDwvZGl2PlxuICA8YmItYmlsbHBheS1wYXltZW50LXJldmlldy1jYXJkXG4gICAgW2FjY291bnROdW1iZXJNYXNrXT1cImFjY291bnROdW1iZXJNYXNrZWRcIlxuICAgIFtwYXltZW50UmV2aWV3XT1cInBheW1lbnRSZXZpZXdcIlxuICAgIFtmcmVxdWVuY3lMYWJlbF09XCJmcmVxdWVuY3lMYWJlbFwiXG4gID5cbiAgPC9iYi1iaWxscGF5LXBheW1lbnQtcmV2aWV3LWNhcmQ+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI3Jldmlld0J1dHRvbnM+XG4gIDxkaXYgY2xhc3M9XCJiYi1idXR0b24tYmFyIGJiLWJ1dHRvbi1iYXItLXJldmVyc2VcIj5cbiAgICA8YnV0dG9uXG4gICAgICBiYkJ1dHRvblxuICAgICAgZGF0YS1yb2xlPVwiY29uZmlybS1wYXltZW50LWJ1dHRvblwiXG4gICAgICBpMThuPVwiUGF5bWVudCBkZXRhaWxzIGNvbmZpcm0gYnV0dG9ufExhYmVsIGZvciBjb25maXJtIHBheW1lbnQgYnV0dG9uQEBiaWxscGF5LXBheW1lbnQtcmV2aWV3LmNvbmZpcm1cIlxuICAgICAgKGNsaWNrKT1cImNvbmZpcm1QYXltZW50KHBheW1lbnQpXCJcbiAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uXCJcbiAgICA+XG4gICAgICBTdWJtaXRcbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uXG4gICAgICBiYkJ1dHRvblxuICAgICAgZGF0YS1yb2xlPVwiZWRpdC1wYXltZW50LWJ1dHRvblwiXG4gICAgICBpMThuPVwiUGF5bWVudCBkZXRhaWxzIGVkaXQgYnV0dG9ufExhYmVsIGZvciBlZGl0IHBheW1lbnQgYnV0dG9uQEBiaWxscGF5LXBheW1lbnQtcmV2aWV3LmVkaXRcIlxuICAgICAgKGNsaWNrKT1cIm9uRWRpdCgpXCJcbiAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uXCJcbiAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICA+XG4gICAgICBFZGl0XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvblxuICAgICAgYmJCdXR0b25cbiAgICAgIGRhdGEtcm9sZT1cImNhbmNlbC1wYXltZW50LWJ1dHRvblwiXG4gICAgICBpMThuPVwiUGF5bWVudCBkZXRhaWxzIGNhbmNlbCBidXR0b258TGFiZWwgZm9yIGNhbmNlbCBwYXltZW50IGJ1dHRvbkBAYmlsbHBheS1wYXltZW50LXJldmlldy5jYW5jZWxcIlxuICAgICAgKGNsaWNrKT1cImNhbmNlbCgpXCJcbiAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uIGJiLWJ1dHRvbi1iYXJfX2J1dHRvbi0tYWNyb3NzXCJcbiAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgPlxuICAgICAgRGlzY2FyZFxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbm90aWZpY2F0aW9uTWVzc2FnZT5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInBheW1lbnQ/LnBheWVlVG8gYXMgcGF5ZWVcIj5cbiAgICA8c3BhblxuICAgICAgaTE4bj1cIlxuICAgICAgICBwYXltZW50IG5vdGlmaWNhdGlvbiBtZXNzYWdlfFBheW1lbnQgY29uZmlybWF0aW9uIHN1Y2Nlc3Mgbm90aWZpY2F0aW9uXG4gICAgICAgIG1lc3NhZ2VAQGJpbGxwYXktcGF5bWVudC1yZXZpZXcuY29uZmlybS5ub3RpZmljYXRpb24ubWVzc2FnZVwiXG4gICAgICA+UGF5bWVudCB0byB7eyAocGF5ZWUubmlja05hbWUgJiYgcGF5ZWUubmlja05hbWUgKyAnICgnICsgcGF5ZWUubmFtZSArICcpJykgfHwgcGF5ZWUubmFtZSB9fSBoYXMgYmVlbiBzY2hlZHVsZWRcbiAgICAgIHN1Y2Nlc3NmdWxseTwvc3BhblxuICAgID5cbiAgICA8ZGl2IGNsYXNzPVwiYmItYnV0dG9uLWJhclwiPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBiYkJ1dHRvblxuICAgICAgICBkYXRhLXJvbGU9XCJub3RpZmljYXRpb24tc2Vjb25kYXJ5LWJ1dHRvblwiXG4gICAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uXCJcbiAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlVG9QYXltZW50cygpXCJcbiAgICAgICAgaTE4bj1cIlxuICAgICAgICAgIHBheW1lbnQgbm90aWZpY2F0aW9uIGJ1dHRvbnxOYXZpZ2F0ZSB0byBzY2hlZHVsZWQgcGF5bWVudHNAQGJpbGxwYXktcGF5bWVudC1yZXZpZXcuY29uZmlybS5ub3RpZmljYXRpb24uYnV0dG9uXCJcbiAgICAgID5cbiAgICAgICAgVmlldyBzY2hlZHVsZWQgcGF5bWVudHNcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbm90aWZpY2F0aW9uSGVhZGVyPlxuICA8c3BhblxuICAgIGkxOG49XCJcbiAgICAgIHBheW1lbnQgbm90aWZpY2F0aW9uIGhlYWRlcnxQYXltZW50IGNvbmZpcm1hdGlvbiBzdWNjZXNzIG5vdGlmaWNhdGlvblxuICAgICAgaGVhZGVyQEBiaWxscGF5LXBheW1lbnQtcmV2aWV3LmNvbmZpcm0ubm90aWZpY2F0aW9uLmhlYWRlclwiXG4gICAgPlBheW1lbnQgc2NoZWR1bGVkPC9zcGFuXG4gID5cbjwvbmctdGVtcGxhdGU+XG5cbjxiYi1iaWxscGF5LXBheW1lbnQtZGlzY2FyZC1jaGFuZ2VzLW1vZGFsXG4gICpuZ0lmPVwiaXNEaXNjYXJkTW9kYWxPcGVuXCJcbiAgZGF0YS1yb2xlPVwiYmlsbHBheS1wYXltZW50LXJldmlldy1wYWdlLWRpc2NhcmQtY2hhbmdlcy1tb2RhbFwiXG4gIChyZXNvbHZlKT1cIm9uTW9kYWxSZXNvbHZlKCRldmVudClcIlxuICB0aXRsZT1cIkNhbmNlbCBwYXltZW50P1wiXG4gIGkxOG4tdGl0bGU9XCJEaXNjYXJkIGNoYW5nZXMgbW9kYWwgaGVhZGVyQEBiaWxscGF5Lm1hbmFnZS1wYXltZW50LmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5oZWFkZXJcIlxuICBzdWJ0aXRsZT1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjYW5jZWwgdGhpcyBwYXltZW50PyBZb3Ugd2lsbCBsb3NlIGFueSBkZXRhaWxzIGVudGVyZWQuXCJcbiAgaTE4bi1zdWJ0aXRsZT1cIkRpc2NhcmQgY2hhbmdlcyBtb2RhbCBib2R5QEBiaWxscGF5Lm1hbmFnZS1wYXltZW50LmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5ib2R5XCJcbiAgY29uZmlybS1idXR0b24tbGFiZWw9XCJDYW5jZWwgcGF5bWVudFwiXG4gIGkxOG4tY29uZmlybS1idXR0b24tbGFiZWw9XCJcbiAgICBjb25maXJtIG1vZGFsIGJ1dHRvbnxDYW5jZWwgcGF5bWVudCBjb25maXJtYXRpb24gYnV0dG9uQEBiaWxscGF5Lm1hbmFnZS1wYXltZW50LmRpc2NhcmQtY2hhbmdlcy1tb2RhbC5jb25maXJtLWJ1dHRvblwiXG4gIGNhbmNlbC1idXR0b24tbGFiZWw9XCJDb250aW51ZSB3aXRoIHBheW1lbnRcIlxuICBpMThuLWNhbmNlbC1idXR0b24tbGFiZWw9XCJcbiAgICBjYW5jZWwgbW9kYWwgYnV0dG9ufENvbnRpbnVlIHdpdGggY3VycmVudCBwYXltZW50IGJ1dHRvbkBAYmlsbHBheS5tYW5hZ2UtcGF5bWVudC5kaXNjYXJkLWNoYW5nZXMtbW9kYWwuY2FuY2VsLWJ1dHRvblwiXG4+PC9iYi1iaWxscGF5LXBheW1lbnQtZGlzY2FyZC1jaGFuZ2VzLW1vZGFsPlxuIl19