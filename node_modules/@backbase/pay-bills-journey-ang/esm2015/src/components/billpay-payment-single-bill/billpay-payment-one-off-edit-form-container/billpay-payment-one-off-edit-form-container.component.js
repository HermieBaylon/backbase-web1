import { Component, Input } from '@angular/core';
import { combineLatest, of } from 'rxjs';
import { map, switchMap, catchError } from 'rxjs/operators';
import { BasePaymentEditFormContainerDirective } from '../../../directives/base-payment-edit-form-container.model';
import { BillpayDiscardChangesModalService, } from '@backbase/billpay-journeys-common';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/billpay-journeys-common";
import * as i2 from "../../../services/pay-bills-state.service";
import * as i3 from "@angular/router";
import * as i4 from "../../../services/pay-bills-navigation.service";
import * as i5 from "../billpay-payment-form/billpay-payment-form.component";
import * as i6 from "@backbase/ui-ang/loading-indicator";
import * as i7 from "@backbase/ui-ang/empty-state";
import * as i8 from "../billpay-payment-discard-changes-modal/billpay-payment-discard-changes-modal.component";
import * as i9 from "@angular/common";
export class BillpayPaymentOneOffEditFormContainerComponent extends BasePaymentEditFormContainerDirective {
    /** @internal */
    constructor(dataService, stateService, route, discardModalService, routerService, parserService) {
        super(dataService, stateService, route, discardModalService, routerService);
        this.routerService = routerService;
        this.parserService = parserService;
        this.hasLoadingError = false;
        this.activatedRoute = route;
    }
    ngOnInit() {
        this.paymentOneOffState$ = combineLatest([
            this.id$,
            this.stateService.paymentState.pipe(map((state) => state === null || state === void 0 ? void 0 : state[0])),
            this.payeesAndAccounts$,
        ]).pipe(switchMap(([id, state, payeesAndAccounts]) => state
            ? of(state)
            : this.dataService.getOneOffPayment(id).pipe(map(payment => payment &&
                payeesAndAccounts.payeeSummaries &&
                this.parserService.paymentOneOffToFormState(payment, payeesAndAccounts.payeeSummaries)), catchError(() => {
                this.hasLoadingError = true;
                return of({});
            }))));
    }
    onPaymentSubmitted(payment, id) {
        var _a;
        this.stateService.isFormProcessing = true;
        this.stateService.updatePaymentState([payment]);
        this.routerService.navigateToEditOneOffReview(id, { relativeTo: (_a = this.activatedRoute) === null || _a === void 0 ? void 0 : _a.parent });
    }
}
BillpayPaymentOneOffEditFormContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentOneOffEditFormContainerComponent, deps: [{ token: i1.BillpayPaymentDataService }, { token: i2.PayBillsStateService }, { token: i3.ActivatedRoute }, { token: i1.BillpayDiscardChangesModalService }, { token: i4.PayBillsNavigationService }, { token: i1.BillpayPaymentParserService }], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentOneOffEditFormContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentOneOffEditFormContainerComponent, selector: "bb-billpay-payment-one-off-edit-form-container", inputs: { frequencies: "frequencies" }, providers: [BillpayDiscardChangesModalService], usesInheritance: true, ngImport: i0, template: "<ng-container\n  *ngIf=\"{\n    state: paymentOneOffState$ | async,\n    paymentId: id$ | async,\n    accounts: (payeesAndAccounts$ | async)?.accounts,\n    payeeSummaries: (payeesAndAccounts$ | async)?.payeeSummaries\n  } as data\"\n>\n  <ng-container *ngIf=\"data.state; else loadingState\">\n    <ng-container *ngIf=\"!hasLoadingError; else errorState\">\n      <bb-billpay-payment-form\n        [payeeSummaries]=\"data.payeeSummaries\"\n        [accounts]=\"data.accounts\"\n        [selectedPayeeId]=\"data.state?.payeeTo?.id\"\n        [paymentState]=\"data.state\"\n        [isEditPayment]=\"true\"\n        [paymentType]=\"'oneOff'\"\n        (cancelPayment)=\"onCancelForm()\"\n        [accountNumberMask]=\"accountNumberMasked\"\n        (submitPayment)=\"onPaymentSubmitted($event, data.paymentId)\"\n        (valueChanged)=\"onFormValueChanged()\"\n        [paymentDetailsTitle]=\"paymentDetailsTitle\"\n        [frequencies]=\"frequencies\"\n      >\n      </bb-billpay-payment-form>\n    </ng-container>\n  </ng-container>\n\n  <ng-template #loadingState>\n    <div class=\"card card-lg\">\n      <div class=\"card-body\">\n        <bb-loading-indicator-ui loaderSize=\"lg\" data-role=\"loading-state\"> </bb-loading-indicator-ui>\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #errorState>\n    <div class=\"card card-lg\">\n      <div class=\"card-body\">\n        <bb-empty-state-ui\n          data-role=\"error-state\"\n          iconSize=\"xxl\"\n          iconModifier=\"error\"\n          subtitle=\"Try to reload the page or contact support\"\n          i18n-subtitle=\"\n            Try to reload the page or contact support|Payee List loading\n            subtitle@@bb-billpay-manage-payment-widget-ang.loading.subtitle\"\n          title=\"Payment information is not loading\"\n          i18n-title=\"\n            Payment information is not loading|Form List loading\n            title@@bb-billpay-manage-payment-widget-ang.loading.title\"\n        >\n        </bb-empty-state-ui>\n      </div>\n    </div>\n  </ng-template>\n\n  <bb-billpay-payment-discard-changes-modal\n    *ngIf=\"isDiscardModalOpen\"\n    data-role=\"billpay-payment-edit-form-page-lose-changes-modal\"\n    (resolve)=\"onModalResolve($event)\"\n    title=\"Lose changes?\"\n    i18n-title=\"Lose changes modal header@@billpay.manage-payment.lose-changes-modal.header\"\n    subtitle=\"Are you sure you want to cancel editing this payment? You will lose any changes made.\"\n    i18n-subtitle=\"Lose changes modal body@@billpay.manage-payment.lose-changes-modal.body\"\n    confirm-button-label=\"Lose changes\"\n    i18n-confirm-button-label=\"\n      confirm modal button|Cancel payment confirmation button@@billpay.manage-payment.lose-changes-modal.confirm-button\"\n    cancel-button-label=\"Continue editing\"\n    i18n-cancel-button-label=\"\n      cancel modal button|Continue with current payment button@@billpay.manage-payment.lose-changes-modal.cancel-button\"\n  ></bb-billpay-payment-discard-changes-modal>\n</ng-container>\n", components: [{ type: i5.BillpayPaymentFormComponent, selector: "bb-billpay-payment-form", inputs: ["payeeSummaries", "accounts", "selectedPayeeId", "paymentState", "paymentId", "accountNumberMask", "paymentType", "isEditPayment", "paymentDetailsTitle", "paymentDefaultCurrency", "frequencies"], outputs: ["submitPayment", "cancelPayment", "valueChanged"] }, { type: i6.LoadingIndicatorComponent, selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i7.EmptyStateComponent, selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }, { type: i8.BillpayPaymentDiscardChangesModalComponent, selector: "bb-billpay-payment-discard-changes-modal", inputs: ["title", "subtitle", "confirm-button-label", "cancel-button-label"], outputs: ["resolve"] }], directives: [{ type: i9.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], pipes: { "async": i9.AsyncPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentOneOffEditFormContainerComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-one-off-edit-form-container',
                    templateUrl: './billpay-payment-one-off-edit-form-container.component.html',
                    providers: [BillpayDiscardChangesModalService],
                }]
        }], ctorParameters: function () { return [{ type: i1.BillpayPaymentDataService }, { type: i2.PayBillsStateService }, { type: i3.ActivatedRoute }, { type: i1.BillpayDiscardChangesModalService }, { type: i4.PayBillsNavigationService }, { type: i1.BillpayPaymentParserService }]; }, propDecorators: { frequencies: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LW9uZS1vZmYtZWRpdC1mb3JtLWNvbnRhaW5lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3BheS1iaWxscy1qb3VybmV5L3NyYy9jb21wb25lbnRzL2JpbGxwYXktcGF5bWVudC1zaW5nbGUtYmlsbC9iaWxscGF5LXBheW1lbnQtb25lLW9mZi1lZGl0LWZvcm0tY29udGFpbmVyL2JpbGxwYXktcGF5bWVudC1vbmUtb2ZmLWVkaXQtZm9ybS1jb250YWluZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtc2luZ2xlLWJpbGwvYmlsbHBheS1wYXltZW50LW9uZS1vZmYtZWRpdC1mb3JtLWNvbnRhaW5lci9iaWxscGF5LXBheW1lbnQtb25lLW9mZi1lZGl0LWZvcm0tY29udGFpbmVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBRXpELE9BQU8sRUFBYyxhQUFhLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3JELE9BQU8sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTVELE9BQU8sRUFBRSxxQ0FBcUMsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBRW5ILE9BQU8sRUFDTCxpQ0FBaUMsR0FLbEMsTUFBTSxtQ0FBbUMsQ0FBQzs7Ozs7Ozs7Ozs7QUFPM0MsTUFBTSxPQUFPLDhDQUNYLFNBQVEscUNBQXFDO0lBTzdDLGdCQUFnQjtJQUNoQixZQUNFLFdBQXNDLEVBQ3RDLFlBQWtDLEVBQ2xDLEtBQXFCLEVBQ3JCLG1CQUFzRCxFQUM3QyxhQUF3QyxFQUNoQyxhQUEwQztRQUUzRCxLQUFLLENBQUMsV0FBVyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFIbkUsa0JBQWEsR0FBYixhQUFhLENBQTJCO1FBQ2hDLGtCQUFhLEdBQWIsYUFBYSxDQUE2QjtRQVg3RCxvQkFBZSxHQUFHLEtBQUssQ0FBQztRQWN0QixJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxhQUFhLENBQUM7WUFDdkMsSUFBSSxDQUFDLEdBQUc7WUFDUixJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBMEIsRUFBRSxFQUFFLENBQUMsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEYsSUFBSSxDQUFDLGtCQUFrQjtTQUN4QixDQUFDLENBQUMsSUFBSSxDQUNMLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsQ0FDM0MsS0FBSztZQUNILENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDO1lBQ1gsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUN4QyxHQUFHLENBQ0QsT0FBTyxDQUFDLEVBQUUsQ0FDUixPQUFPO2dCQUNQLGlCQUFpQixDQUFDLGNBQWM7Z0JBQ2hDLElBQUksQ0FBQyxhQUFhLENBQUMsd0JBQXdCLENBQUMsT0FBTyxFQUFFLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxDQUN6RixFQUNELFVBQVUsQ0FBQyxHQUFHLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7Z0JBQzVCLE9BQU8sRUFBRSxDQUFDLEVBQXNCLENBQUMsQ0FBQztZQUNwQyxDQUFDLENBQUMsQ0FDSCxDQUNOLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxPQUF5QixFQUFFLEVBQVU7O1FBQ3RELElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQzFDLElBQUksQ0FBQyxZQUFZLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLE1BQUEsSUFBSSxDQUFDLGNBQWMsMENBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNqRyxDQUFDOzs0SUFsRFUsOENBQThDO2dJQUE5Qyw4Q0FBOEMsaUhBRjlDLENBQUMsaUNBQWlDLENBQUMsaURDbEJoRCw0K0ZBeUVBOzRGRHJEYSw4Q0FBOEM7a0JBTDFELFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLGdEQUFnRDtvQkFDMUQsV0FBVyxFQUFFLDhEQUE4RDtvQkFDM0UsU0FBUyxFQUFFLENBQUMsaUNBQWlDLENBQUM7aUJBQy9DO2tUQU1VLFdBQVc7c0JBQW5CLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGNvbWJpbmVMYXRlc3QsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIHN3aXRjaE1hcCwgY2F0Y2hFcnJvciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFBheUJpbGxzTmF2aWdhdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wYXktYmlsbHMtbmF2aWdhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEJhc2VQYXltZW50RWRpdEZvcm1Db250YWluZXJEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi8uLi9kaXJlY3RpdmVzL2Jhc2UtcGF5bWVudC1lZGl0LWZvcm0tY29udGFpbmVyLm1vZGVsJztcbmltcG9ydCB7IFBheUJpbGxzU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcGF5LWJpbGxzLXN0YXRlLnNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlLFxuICBCaWxscGF5UGF5bWVudERhdGFTZXJ2aWNlLFxuICBCaWxscGF5UGF5bWVudFBhcnNlclNlcnZpY2UsXG4gIEZyZXF1ZW5jeSxcbiAgUGF5bWVudEZvcm1TdGF0ZSxcbn0gZnJvbSAnQGJhY2tiYXNlL2JpbGxwYXktam91cm5leXMtY29tbW9uJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItYmlsbHBheS1wYXltZW50LW9uZS1vZmYtZWRpdC1mb3JtLWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9iaWxscGF5LXBheW1lbnQtb25lLW9mZi1lZGl0LWZvcm0tY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcbiAgcHJvdmlkZXJzOiBbQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlXSxcbn0pXG5leHBvcnQgY2xhc3MgQmlsbHBheVBheW1lbnRPbmVPZmZFZGl0Rm9ybUNvbnRhaW5lckNvbXBvbmVudFxuICBleHRlbmRzIEJhc2VQYXltZW50RWRpdEZvcm1Db250YWluZXJEaXJlY3RpdmVcbiAgaW1wbGVtZW50cyBPbkluaXQge1xuICBwYXltZW50T25lT2ZmU3RhdGUkPzogT2JzZXJ2YWJsZTxQYXltZW50Rm9ybVN0YXRlPjtcbiAgaGFzTG9hZGluZ0Vycm9yID0gZmFsc2U7XG4gIEBJbnB1dCgpIGZyZXF1ZW5jaWVzPzogRnJlcXVlbmN5W107XG4gIHByaXZhdGUgYWN0aXZhdGVkUm91dGU/OiBBY3RpdmF0ZWRSb3V0ZTtcblxuICAvKiogQGludGVybmFsICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGFTZXJ2aWNlOiBCaWxscGF5UGF5bWVudERhdGFTZXJ2aWNlLFxuICAgIHN0YXRlU2VydmljZTogUGF5QmlsbHNTdGF0ZVNlcnZpY2UsXG4gICAgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIGRpc2NhcmRNb2RhbFNlcnZpY2U6IEJpbGxwYXlEaXNjYXJkQ2hhbmdlc01vZGFsU2VydmljZSxcbiAgICByZWFkb25seSByb3V0ZXJTZXJ2aWNlOiBQYXlCaWxsc05hdmlnYXRpb25TZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGFyc2VyU2VydmljZTogQmlsbHBheVBheW1lbnRQYXJzZXJTZXJ2aWNlLFxuICApIHtcbiAgICBzdXBlcihkYXRhU2VydmljZSwgc3RhdGVTZXJ2aWNlLCByb3V0ZSwgZGlzY2FyZE1vZGFsU2VydmljZSwgcm91dGVyU2VydmljZSk7XG4gICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZSA9IHJvdXRlO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5wYXltZW50T25lT2ZmU3RhdGUkID0gY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLmlkJCxcbiAgICAgIHRoaXMuc3RhdGVTZXJ2aWNlLnBheW1lbnRTdGF0ZS5waXBlKG1hcCgoc3RhdGU/OiBQYXltZW50Rm9ybVN0YXRlW10pID0+IHN0YXRlPy5bMF0pKSxcbiAgICAgIHRoaXMucGF5ZWVzQW5kQWNjb3VudHMkLFxuICAgIF0pLnBpcGUoXG4gICAgICBzd2l0Y2hNYXAoKFtpZCwgc3RhdGUsIHBheWVlc0FuZEFjY291bnRzXSkgPT5cbiAgICAgICAgc3RhdGVcbiAgICAgICAgICA/IG9mKHN0YXRlKVxuICAgICAgICAgIDogdGhpcy5kYXRhU2VydmljZS5nZXRPbmVPZmZQYXltZW50KGlkKS5waXBlKFxuICAgICAgICAgICAgICBtYXAoXG4gICAgICAgICAgICAgICAgcGF5bWVudCA9PlxuICAgICAgICAgICAgICAgICAgcGF5bWVudCAmJlxuICAgICAgICAgICAgICAgICAgcGF5ZWVzQW5kQWNjb3VudHMucGF5ZWVTdW1tYXJpZXMgJiZcbiAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VyU2VydmljZS5wYXltZW50T25lT2ZmVG9Gb3JtU3RhdGUocGF5bWVudCwgcGF5ZWVzQW5kQWNjb3VudHMucGF5ZWVTdW1tYXJpZXMpLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBjYXRjaEVycm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0xvYWRpbmdFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHt9IGFzIFBheW1lbnRGb3JtU3RhdGUpO1xuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICksXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICBvblBheW1lbnRTdWJtaXR0ZWQocGF5bWVudDogUGF5bWVudEZvcm1TdGF0ZSwgaWQ6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGVTZXJ2aWNlLmlzRm9ybVByb2Nlc3NpbmcgPSB0cnVlO1xuICAgIHRoaXMuc3RhdGVTZXJ2aWNlLnVwZGF0ZVBheW1lbnRTdGF0ZShbcGF5bWVudF0pO1xuICAgIHRoaXMucm91dGVyU2VydmljZS5uYXZpZ2F0ZVRvRWRpdE9uZU9mZlJldmlldyhpZCwgeyByZWxhdGl2ZVRvOiB0aGlzLmFjdGl2YXRlZFJvdXRlPy5wYXJlbnQgfSk7XG4gIH1cbn1cbiIsIjxuZy1jb250YWluZXJcbiAgKm5nSWY9XCJ7XG4gICAgc3RhdGU6IHBheW1lbnRPbmVPZmZTdGF0ZSQgfCBhc3luYyxcbiAgICBwYXltZW50SWQ6IGlkJCB8IGFzeW5jLFxuICAgIGFjY291bnRzOiAocGF5ZWVzQW5kQWNjb3VudHMkIHwgYXN5bmMpPy5hY2NvdW50cyxcbiAgICBwYXllZVN1bW1hcmllczogKHBheWVlc0FuZEFjY291bnRzJCB8IGFzeW5jKT8ucGF5ZWVTdW1tYXJpZXNcbiAgfSBhcyBkYXRhXCJcbj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImRhdGEuc3RhdGU7IGVsc2UgbG9hZGluZ1N0YXRlXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFoYXNMb2FkaW5nRXJyb3I7IGVsc2UgZXJyb3JTdGF0ZVwiPlxuICAgICAgPGJiLWJpbGxwYXktcGF5bWVudC1mb3JtXG4gICAgICAgIFtwYXllZVN1bW1hcmllc109XCJkYXRhLnBheWVlU3VtbWFyaWVzXCJcbiAgICAgICAgW2FjY291bnRzXT1cImRhdGEuYWNjb3VudHNcIlxuICAgICAgICBbc2VsZWN0ZWRQYXllZUlkXT1cImRhdGEuc3RhdGU/LnBheWVlVG8/LmlkXCJcbiAgICAgICAgW3BheW1lbnRTdGF0ZV09XCJkYXRhLnN0YXRlXCJcbiAgICAgICAgW2lzRWRpdFBheW1lbnRdPVwidHJ1ZVwiXG4gICAgICAgIFtwYXltZW50VHlwZV09XCInb25lT2ZmJ1wiXG4gICAgICAgIChjYW5jZWxQYXltZW50KT1cIm9uQ2FuY2VsRm9ybSgpXCJcbiAgICAgICAgW2FjY291bnROdW1iZXJNYXNrXT1cImFjY291bnROdW1iZXJNYXNrZWRcIlxuICAgICAgICAoc3VibWl0UGF5bWVudCk9XCJvblBheW1lbnRTdWJtaXR0ZWQoJGV2ZW50LCBkYXRhLnBheW1lbnRJZClcIlxuICAgICAgICAodmFsdWVDaGFuZ2VkKT1cIm9uRm9ybVZhbHVlQ2hhbmdlZCgpXCJcbiAgICAgICAgW3BheW1lbnREZXRhaWxzVGl0bGVdPVwicGF5bWVudERldGFpbHNUaXRsZVwiXG4gICAgICAgIFtmcmVxdWVuY2llc109XCJmcmVxdWVuY2llc1wiXG4gICAgICA+XG4gICAgICA8L2JiLWJpbGxwYXktcGF5bWVudC1mb3JtPlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cblxuICA8bmctdGVtcGxhdGUgI2xvYWRpbmdTdGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWxnXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgIDxiYi1sb2FkaW5nLWluZGljYXRvci11aSBsb2FkZXJTaXplPVwibGdcIiBkYXRhLXJvbGU9XCJsb2FkaW5nLXN0YXRlXCI+IDwvYmItbG9hZGluZy1pbmRpY2F0b3ItdWk+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2Vycm9yU3RhdGU+XG4gICAgPGRpdiBjbGFzcz1cImNhcmQgY2FyZC1sZ1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxuICAgICAgICA8YmItZW1wdHktc3RhdGUtdWlcbiAgICAgICAgICBkYXRhLXJvbGU9XCJlcnJvci1zdGF0ZVwiXG4gICAgICAgICAgaWNvblNpemU9XCJ4eGxcIlxuICAgICAgICAgIGljb25Nb2RpZmllcj1cImVycm9yXCJcbiAgICAgICAgICBzdWJ0aXRsZT1cIlRyeSB0byByZWxvYWQgdGhlIHBhZ2Ugb3IgY29udGFjdCBzdXBwb3J0XCJcbiAgICAgICAgICBpMThuLXN1YnRpdGxlPVwiXG4gICAgICAgICAgICBUcnkgdG8gcmVsb2FkIHRoZSBwYWdlIG9yIGNvbnRhY3Qgc3VwcG9ydHxQYXllZSBMaXN0IGxvYWRpbmdcbiAgICAgICAgICAgIHN1YnRpdGxlQEBiYi1iaWxscGF5LW1hbmFnZS1wYXltZW50LXdpZGdldC1hbmcubG9hZGluZy5zdWJ0aXRsZVwiXG4gICAgICAgICAgdGl0bGU9XCJQYXltZW50IGluZm9ybWF0aW9uIGlzIG5vdCBsb2FkaW5nXCJcbiAgICAgICAgICBpMThuLXRpdGxlPVwiXG4gICAgICAgICAgICBQYXltZW50IGluZm9ybWF0aW9uIGlzIG5vdCBsb2FkaW5nfEZvcm0gTGlzdCBsb2FkaW5nXG4gICAgICAgICAgICB0aXRsZUBAYmItYmlsbHBheS1tYW5hZ2UtcGF5bWVudC13aWRnZXQtYW5nLmxvYWRpbmcudGl0bGVcIlxuICAgICAgICA+XG4gICAgICAgIDwvYmItZW1wdHktc3RhdGUtdWk+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8YmItYmlsbHBheS1wYXltZW50LWRpc2NhcmQtY2hhbmdlcy1tb2RhbFxuICAgICpuZ0lmPVwiaXNEaXNjYXJkTW9kYWxPcGVuXCJcbiAgICBkYXRhLXJvbGU9XCJiaWxscGF5LXBheW1lbnQtZWRpdC1mb3JtLXBhZ2UtbG9zZS1jaGFuZ2VzLW1vZGFsXCJcbiAgICAocmVzb2x2ZSk9XCJvbk1vZGFsUmVzb2x2ZSgkZXZlbnQpXCJcbiAgICB0aXRsZT1cIkxvc2UgY2hhbmdlcz9cIlxuICAgIGkxOG4tdGl0bGU9XCJMb3NlIGNoYW5nZXMgbW9kYWwgaGVhZGVyQEBiaWxscGF5Lm1hbmFnZS1wYXltZW50Lmxvc2UtY2hhbmdlcy1tb2RhbC5oZWFkZXJcIlxuICAgIHN1YnRpdGxlPVwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNhbmNlbCBlZGl0aW5nIHRoaXMgcGF5bWVudD8gWW91IHdpbGwgbG9zZSBhbnkgY2hhbmdlcyBtYWRlLlwiXG4gICAgaTE4bi1zdWJ0aXRsZT1cIkxvc2UgY2hhbmdlcyBtb2RhbCBib2R5QEBiaWxscGF5Lm1hbmFnZS1wYXltZW50Lmxvc2UtY2hhbmdlcy1tb2RhbC5ib2R5XCJcbiAgICBjb25maXJtLWJ1dHRvbi1sYWJlbD1cIkxvc2UgY2hhbmdlc1wiXG4gICAgaTE4bi1jb25maXJtLWJ1dHRvbi1sYWJlbD1cIlxuICAgICAgY29uZmlybSBtb2RhbCBidXR0b258Q2FuY2VsIHBheW1lbnQgY29uZmlybWF0aW9uIGJ1dHRvbkBAYmlsbHBheS5tYW5hZ2UtcGF5bWVudC5sb3NlLWNoYW5nZXMtbW9kYWwuY29uZmlybS1idXR0b25cIlxuICAgIGNhbmNlbC1idXR0b24tbGFiZWw9XCJDb250aW51ZSBlZGl0aW5nXCJcbiAgICBpMThuLWNhbmNlbC1idXR0b24tbGFiZWw9XCJcbiAgICAgIGNhbmNlbCBtb2RhbCBidXR0b258Q29udGludWUgd2l0aCBjdXJyZW50IHBheW1lbnQgYnV0dG9uQEBiaWxscGF5Lm1hbmFnZS1wYXltZW50Lmxvc2UtY2hhbmdlcy1tb2RhbC5jYW5jZWwtYnV0dG9uXCJcbiAgPjwvYmItYmlsbHBheS1wYXltZW50LWRpc2NhcmQtY2hhbmdlcy1tb2RhbD5cbjwvbmctY29udGFpbmVyPlxuIl19