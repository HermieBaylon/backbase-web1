import { ChangeDetectionStrategy, Component } from '@angular/core';
import { BillpayDiscardChangesModalService, } from '@backbase/billpay-journeys-common';
import { BasePaymentEditReviewContainerDirective } from '../../../directives/base-payment-edit-review-container.model';
import { takeUntil } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "../../../services/pay-bills-state.service";
import * as i3 from "@backbase/billpay-journeys-common";
import * as i4 from "../../../services/pay-bills-navigation.service";
import * as i5 from "@backbase/ui-ang/notification";
import * as i6 from "../billpay-payment-discard-changes-modal/billpay-payment-discard-changes-modal.component";
import * as i7 from "@backbase/ui-ang/alert";
import * as i8 from "@angular/common";
import * as i9 from "@backbase/ui-ang/button";
export class BillpayPaymentRecurringEditReviewContainerComponent extends BasePaymentEditReviewContainerDirective {
    /** @internal */
    constructor(route, stateService, discardModalService, paymentParserService, routerService, dataService, notificationService, cdRef) {
        super(route, stateService, discardModalService, paymentParserService, routerService);
        this.dataService = dataService;
        this.notificationService = notificationService;
        this.cdRef = cdRef;
        this.activatedRoute = route;
    }
    navigateToForm(id) {
        var _a;
        this.routerService.navigateToEditRecurringForm(id, { relativeTo: (_a = this.activatedRoute) === null || _a === void 0 ? void 0 : _a.parent });
    }
    onPaymentConfirm(payment, id) {
        this.paymentError = false;
        this.hasDateError = false;
        this.dataService
            .updatePaymentRecurring(payment, id)
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.routerService.navigateToPayments();
            this.notificationService.showNotification({
                header: this.notificationHeaderTemplate,
                message: this.notificationMessageTemplate,
                modifier: 'success',
                ttl: this.dismissTimeout,
            });
        }, response => {
            var _a, _b;
            this.paymentError = true;
            this.hasDateError = (_b = (_a = response.error) === null || _a === void 0 ? void 0 : _a.errors) === null || _b === void 0 ? void 0 : _b.some((a) => a.key === 'billpay.api.invalidPaymentDate');
            this.cdRef.markForCheck();
            this.failAlert.nativeElement.scrollIntoView(false);
        });
    }
}
BillpayPaymentRecurringEditReviewContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentRecurringEditReviewContainerComponent, deps: [{ token: i1.ActivatedRoute }, { token: i2.PayBillsStateService }, { token: i3.BillpayDiscardChangesModalService }, { token: i3.BillpayPaymentParserService }, { token: i4.PayBillsNavigationService }, { token: i3.BillpayPaymentDataService }, { token: i5.NotificationService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentRecurringEditReviewContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentRecurringEditReviewContainerComponent, selector: "bb-billpay-payment-recurring-edit-review-container", providers: [BillpayDiscardChangesModalService], usesInheritance: true, ngImport: i0, template: "<ng-container *ngIf=\"payment\">\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <div class=\"bb-block bb-block--xl\">\n        <ng-container *ngTemplateOutlet=\"recurringEditReviewContent\"></ng-container>\n      </div>\n\n      <ng-container *ngTemplateOutlet=\"recurringEditReviewButtons\"></ng-container>\n    </div>\n  </div>\n</ng-container>\n\n<bb-billpay-payment-discard-changes-modal\n  *ngIf=\"isDiscardModalOpen\"\n  data-role=\"billpay-payment-edit-form-page-lose-changes-modal\"\n  (resolve)=\"onModalResolve($event)\"\n  title=\"Lose changes?\"\n  i18n-title=\"Lose changes modal header@@billpay.manage-payment.lose-changes-modal.header\"\n  subtitle=\"Are you sure you want to cancel editing this payment? You will lose any changes made.\"\n  i18n-subtitle=\"Lose changes modal body@@billpay.manage-payment.lose-changes-modal.body\"\n  confirm-button-label=\"Lose changes\"\n  i18n-confirm-button-label=\"\n    confirm modal button|Cancel payment confirmation button@@billpay.manage-payment.lose-changes-modal.confirm-button\"\n  cancel-button-label=\"Continue editing\"\n  i18n-cancel-button-label=\"\n    cancel modal button|Continue with current payment button@@billpay.manage-payment.lose-changes-modal.cancel-button\"\n></bb-billpay-payment-discard-changes-modal>\n\n<ng-template #recurringEditReviewContent let-payment>\n  <div #failAlert>\n    <bb-alert-ui\n      title=\"Failed to submit payment. Please try again later.\"\n      i18n-title=\"Failed to submit payment|Title for payment error@@billpay-payment-review-container.error-alert\"\n      (close)=\"(false)\"\n      modifier=\"error\"\n      data-role=\"failure-message\"\n      *ngIf=\"paymentError && !hasDateError\"\n    >\n    </bb-alert-ui>\n    <bb-alert-ui\n      title=\"The date selected is invalid.\"\n      i18n-title=\"\n        Failed to submit payment date|Title for payment date error@@billpay-payment-review-container.error-date-alert\"\n      message=\"The payment cannot be scheduled on this date. Please select another date in the previous step.\"\n      i18n-message=\"Date payment error|Date error for payment@@billpay-payment-review.date-error-alert.message\"\n      (close)=\"(false)\"\n      modifier=\"error\"\n      data-role=\"failure-date-message\"\n      *ngIf=\"paymentError && hasDateError\"\n    >\n    </bb-alert-ui>\n  </div>\n  <bb-billpay-payment-review-card [accountNumberMask]=\"accountNumberMasked\" [paymentReview]=\"paymentReview\">\n  </bb-billpay-payment-review-card>\n</ng-template>\n\n<ng-template #recurringEditReviewButtons>\n  <div class=\"bb-button-bar bb-button-bar--reverse\">\n    <button\n      bbButton\n      data-role=\"confirm-payment-button\"\n      i18n=\"\n        Payment details confirm button|Label for confirm payment recurring\n        button@@billpay-payment-recurring-review.confirm\"\n      (click)=\"confirmPayment(payment)\"\n      class=\"bb-button-bar__button\"\n    >\n      Confirm payment\n    </button>\n    <button\n      *ngIf=\"id$ | async as paymentId\"\n      bbButton\n      data-role=\"edit-payment-button\"\n      i18n=\"\n        Payment details edit button|Label for edit payment payment recurring\n        button@@billpay-payment-recurring-review.edit\"\n      (click)=\"navigateToForm(paymentId)\"\n      class=\"bb-button-bar__button\"\n      color=\"secondary\"\n    >\n      Edit payment\n    </button>\n    <button\n      bbButton\n      data-role=\"cancel-payment-button\"\n      i18n=\"\n        Payment details cancel button|Label for cancel payment payment recurring\n        button@@billpay-payment-recurring-review.cancel\"\n      (click)=\"cancel()\"\n      class=\"bb-button-bar__button bb-button-bar__button--across\"\n      color=\"link\"\n    >\n      Cancel\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #notificationMessage>\n  <ng-container *ngIf=\"payment?.payeeTo as payee\">\n    <span\n      i18n=\"\n        payment notification message|Payment confirmation success notification\n        message@@billpay-payment-recurring-review.confirm.notification.message\"\n      >Payment to {{ (payee.nickName && payee.nickName + ' (' + payee.name + ')') || payee.name }} has been edited\n      successfully</span\n    >\n  </ng-container>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <span\n    i18n=\"\n      payment notification header|Payment confirmation success notification\n      header@@billpay-payment-recurring-review.confirm.notification.header\"\n    >Payment edited</span\n  >\n</ng-template>\n", components: [{ type: i6.BillpayPaymentDiscardChangesModalComponent, selector: "bb-billpay-payment-discard-changes-modal", inputs: ["title", "subtitle", "confirm-button-label", "cancel-button-label"], outputs: ["resolve"] }, { type: i7.AlertComponent, selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i3.BillpayPaymentReviewCardComponent, selector: "bb-billpay-payment-review-card", inputs: ["paymentReview", "accountNumberMask", "frequencyLabel"] }], directives: [{ type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i8.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i9.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], pipes: { "async": i8.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentRecurringEditReviewContainerComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-recurring-edit-review-container',
                    templateUrl: './billpay-payment-recurring-edit-review-container.component.html',
                    providers: [BillpayDiscardChangesModalService],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.ActivatedRoute }, { type: i2.PayBillsStateService }, { type: i3.BillpayDiscardChangesModalService }, { type: i3.BillpayPaymentParserService }, { type: i4.PayBillsNavigationService }, { type: i3.BillpayPaymentDataService }, { type: i5.NotificationService }, { type: i0.ChangeDetectorRef }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1lZGl0LXJldmlldy1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtc2luZ2xlLWJpbGwvYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1lZGl0LXJldmlldy1jb250YWluZXIvYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1lZGl0LXJldmlldy1jb250YWluZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtc2luZ2xlLWJpbGwvYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1lZGl0LXJldmlldy1jb250YWluZXIvYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1lZGl0LXJldmlldy1jb250YWluZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFxQixTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdEYsT0FBTyxFQUdMLGlDQUFpQyxHQUVsQyxNQUFNLG1DQUFtQyxDQUFDO0FBQzNDLE9BQU8sRUFBRSx1Q0FBdUMsRUFBRSxNQUFNLDhEQUE4RCxDQUFDO0FBR3ZILE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7Ozs7QUFTM0MsTUFBTSxPQUFPLG1EQUFvRCxTQUFRLHVDQUF1QztJQUc5RyxnQkFBZ0I7SUFDaEIsWUFDRSxLQUFxQixFQUNyQixZQUFrQyxFQUNsQyxtQkFBc0QsRUFDdEQsb0JBQWlELEVBQ2pELGFBQXdDLEVBQ3ZCLFdBQXNDLEVBQ3RDLG1CQUF3QyxFQUNqRCxLQUF3QjtRQUVoQyxLQUFLLENBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxtQkFBbUIsRUFBRSxvQkFBb0IsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUpwRSxnQkFBVyxHQUFYLFdBQVcsQ0FBMkI7UUFDdEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUNqRCxVQUFLLEdBQUwsS0FBSyxDQUFtQjtRQUdoQyxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRUQsY0FBYyxDQUFDLEVBQVU7O1FBQ3ZCLElBQUksQ0FBQyxhQUFhLENBQUMsMkJBQTJCLENBQUMsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLE1BQUEsSUFBSSxDQUFDLGNBQWMsMENBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNsRyxDQUFDO0lBRVMsZ0JBQWdCLENBQUMsT0FBeUIsRUFBRSxFQUFVO1FBQzlELElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBQzFCLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBQzFCLElBQUksQ0FBQyxXQUFXO2FBQ2Isc0JBQXNCLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQzthQUNuQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUM5QixTQUFTLENBQ1IsR0FBRyxFQUFFO1lBQ0gsSUFBSSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDeEMsTUFBTSxFQUFFLElBQUksQ0FBQywwQkFBMEI7Z0JBQ3ZDLE9BQU8sRUFBRSxJQUFJLENBQUMsMkJBQTJCO2dCQUN6QyxRQUFRLEVBQUUsU0FBUztnQkFDbkIsR0FBRyxFQUFFLElBQUksQ0FBQyxjQUFjO2FBQ3pCLENBQUMsQ0FBQztRQUNMLENBQUMsRUFDRCxRQUFRLENBQUMsRUFBRTs7WUFDVCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztZQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLE1BQUEsTUFBQSxRQUFRLENBQUMsS0FBSywwQ0FBRSxNQUFNLDBDQUFFLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxnQ0FBZ0MsQ0FBQyxDQUFDO1lBRXpHLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDMUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JELENBQUMsQ0FDRixDQUFDO0lBQ04sQ0FBQzs7aUpBOUNVLG1EQUFtRDtxSUFBbkQsbURBQW1ELDZFQUhuRCxDQUFDLGlDQUFpQyxDQUFDLGlEQ2pCaEQsdTdJQXFIQTs0RkRqR2EsbURBQW1EO2tCQU4vRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxvREFBb0Q7b0JBQzlELFdBQVcsRUFBRSxrRUFBa0U7b0JBQy9FLFNBQVMsRUFBRSxDQUFDLGlDQUFpQyxDQUFDO29CQUM5QyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtpQkFDaEQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtcbiAgQmlsbHBheVBheW1lbnRQYXJzZXJTZXJ2aWNlLFxuICBQYXltZW50Rm9ybVN0YXRlLFxuICBCaWxscGF5RGlzY2FyZENoYW5nZXNNb2RhbFNlcnZpY2UsXG4gIEJpbGxwYXlQYXltZW50RGF0YVNlcnZpY2UsXG59IGZyb20gJ0BiYWNrYmFzZS9iaWxscGF5LWpvdXJuZXlzLWNvbW1vbic7XG5pbXBvcnQgeyBCYXNlUGF5bWVudEVkaXRSZXZpZXdDb250YWluZXJEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi8uLi9kaXJlY3RpdmVzL2Jhc2UtcGF5bWVudC1lZGl0LXJldmlldy1jb250YWluZXIubW9kZWwnO1xuaW1wb3J0IHsgUGF5QmlsbHNTdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wYXktYmlsbHMtc3RhdGUuc2VydmljZSc7XG5pbXBvcnQgeyBQYXlCaWxsc05hdmlnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcGF5LWJpbGxzLW5hdmlnYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9ub3RpZmljYXRpb24nO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1iaWxscGF5LXBheW1lbnQtcmVjdXJyaW5nLWVkaXQtcmV2aWV3LWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9iaWxscGF5LXBheW1lbnQtcmVjdXJyaW5nLWVkaXQtcmV2aWV3LWNvbnRhaW5lci5jb21wb25lbnQuaHRtbCcsXG4gIHByb3ZpZGVyczogW0JpbGxwYXlEaXNjYXJkQ2hhbmdlc01vZGFsU2VydmljZV0sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBCaWxscGF5UGF5bWVudFJlY3VycmluZ0VkaXRSZXZpZXdDb250YWluZXJDb21wb25lbnQgZXh0ZW5kcyBCYXNlUGF5bWVudEVkaXRSZXZpZXdDb250YWluZXJEaXJlY3RpdmUge1xuICBwcml2YXRlIHJlYWRvbmx5IGFjdGl2YXRlZFJvdXRlPzogQWN0aXZhdGVkUm91dGU7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICByb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgc3RhdGVTZXJ2aWNlOiBQYXlCaWxsc1N0YXRlU2VydmljZSxcbiAgICBkaXNjYXJkTW9kYWxTZXJ2aWNlOiBCaWxscGF5RGlzY2FyZENoYW5nZXNNb2RhbFNlcnZpY2UsXG4gICAgcGF5bWVudFBhcnNlclNlcnZpY2U6IEJpbGxwYXlQYXltZW50UGFyc2VyU2VydmljZSxcbiAgICByb3V0ZXJTZXJ2aWNlOiBQYXlCaWxsc05hdmlnYXRpb25TZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGF0YVNlcnZpY2U6IEJpbGxwYXlQYXltZW50RGF0YVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBub3RpZmljYXRpb25TZXJ2aWNlOiBOb3RpZmljYXRpb25TZXJ2aWNlLFxuICAgIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICApIHtcbiAgICBzdXBlcihyb3V0ZSwgc3RhdGVTZXJ2aWNlLCBkaXNjYXJkTW9kYWxTZXJ2aWNlLCBwYXltZW50UGFyc2VyU2VydmljZSwgcm91dGVyU2VydmljZSk7XG4gICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZSA9IHJvdXRlO1xuICB9XG5cbiAgbmF2aWdhdGVUb0Zvcm0oaWQ6IHN0cmluZykge1xuICAgIHRoaXMucm91dGVyU2VydmljZS5uYXZpZ2F0ZVRvRWRpdFJlY3VycmluZ0Zvcm0oaWQsIHsgcmVsYXRpdmVUbzogdGhpcy5hY3RpdmF0ZWRSb3V0ZT8ucGFyZW50IH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uUGF5bWVudENvbmZpcm0ocGF5bWVudDogUGF5bWVudEZvcm1TdGF0ZSwgaWQ6IHN0cmluZykge1xuICAgIHRoaXMucGF5bWVudEVycm9yID0gZmFsc2U7XG4gICAgdGhpcy5oYXNEYXRlRXJyb3IgPSBmYWxzZTtcbiAgICB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAudXBkYXRlUGF5bWVudFJlY3VycmluZyhwYXltZW50LCBpZClcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLnJvdXRlclNlcnZpY2UubmF2aWdhdGVUb1BheW1lbnRzKCk7XG4gICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLnNob3dOb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgaGVhZGVyOiB0aGlzLm5vdGlmaWNhdGlvbkhlYWRlclRlbXBsYXRlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5ub3RpZmljYXRpb25NZXNzYWdlVGVtcGxhdGUsXG4gICAgICAgICAgICBtb2RpZmllcjogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgdHRsOiB0aGlzLmRpc21pc3NUaW1lb3V0LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5wYXltZW50RXJyb3IgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaGFzRGF0ZUVycm9yID0gcmVzcG9uc2UuZXJyb3I/LmVycm9ycz8uc29tZSgoYTogYW55KSA9PiBhLmtleSA9PT0gJ2JpbGxwYXkuYXBpLmludmFsaWRQYXltZW50RGF0ZScpO1xuXG4gICAgICAgICAgdGhpcy5jZFJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgICB0aGlzLmZhaWxBbGVydC5uYXRpdmVFbGVtZW50LnNjcm9sbEludG9WaWV3KGZhbHNlKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gIH1cbn1cbiIsIjxuZy1jb250YWluZXIgKm5nSWY9XCJwYXltZW50XCI+XG4gIDxkaXYgY2xhc3M9XCJjYXJkIGNhcmQtbGdcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLXhsXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJyZWN1cnJpbmdFZGl0UmV2aWV3Q29udGVudFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJyZWN1cnJpbmdFZGl0UmV2aWV3QnV0dG9uc1wiPjwvbmctY29udGFpbmVyPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctY29udGFpbmVyPlxuXG48YmItYmlsbHBheS1wYXltZW50LWRpc2NhcmQtY2hhbmdlcy1tb2RhbFxuICAqbmdJZj1cImlzRGlzY2FyZE1vZGFsT3BlblwiXG4gIGRhdGEtcm9sZT1cImJpbGxwYXktcGF5bWVudC1lZGl0LWZvcm0tcGFnZS1sb3NlLWNoYW5nZXMtbW9kYWxcIlxuICAocmVzb2x2ZSk9XCJvbk1vZGFsUmVzb2x2ZSgkZXZlbnQpXCJcbiAgdGl0bGU9XCJMb3NlIGNoYW5nZXM/XCJcbiAgaTE4bi10aXRsZT1cIkxvc2UgY2hhbmdlcyBtb2RhbCBoZWFkZXJAQGJpbGxwYXkubWFuYWdlLXBheW1lbnQubG9zZS1jaGFuZ2VzLW1vZGFsLmhlYWRlclwiXG4gIHN1YnRpdGxlPVwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNhbmNlbCBlZGl0aW5nIHRoaXMgcGF5bWVudD8gWW91IHdpbGwgbG9zZSBhbnkgY2hhbmdlcyBtYWRlLlwiXG4gIGkxOG4tc3VidGl0bGU9XCJMb3NlIGNoYW5nZXMgbW9kYWwgYm9keUBAYmlsbHBheS5tYW5hZ2UtcGF5bWVudC5sb3NlLWNoYW5nZXMtbW9kYWwuYm9keVwiXG4gIGNvbmZpcm0tYnV0dG9uLWxhYmVsPVwiTG9zZSBjaGFuZ2VzXCJcbiAgaTE4bi1jb25maXJtLWJ1dHRvbi1sYWJlbD1cIlxuICAgIGNvbmZpcm0gbW9kYWwgYnV0dG9ufENhbmNlbCBwYXltZW50IGNvbmZpcm1hdGlvbiBidXR0b25AQGJpbGxwYXkubWFuYWdlLXBheW1lbnQubG9zZS1jaGFuZ2VzLW1vZGFsLmNvbmZpcm0tYnV0dG9uXCJcbiAgY2FuY2VsLWJ1dHRvbi1sYWJlbD1cIkNvbnRpbnVlIGVkaXRpbmdcIlxuICBpMThuLWNhbmNlbC1idXR0b24tbGFiZWw9XCJcbiAgICBjYW5jZWwgbW9kYWwgYnV0dG9ufENvbnRpbnVlIHdpdGggY3VycmVudCBwYXltZW50IGJ1dHRvbkBAYmlsbHBheS5tYW5hZ2UtcGF5bWVudC5sb3NlLWNoYW5nZXMtbW9kYWwuY2FuY2VsLWJ1dHRvblwiXG4+PC9iYi1iaWxscGF5LXBheW1lbnQtZGlzY2FyZC1jaGFuZ2VzLW1vZGFsPlxuXG48bmctdGVtcGxhdGUgI3JlY3VycmluZ0VkaXRSZXZpZXdDb250ZW50IGxldC1wYXltZW50PlxuICA8ZGl2ICNmYWlsQWxlcnQ+XG4gICAgPGJiLWFsZXJ0LXVpXG4gICAgICB0aXRsZT1cIkZhaWxlZCB0byBzdWJtaXQgcGF5bWVudC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIlxuICAgICAgaTE4bi10aXRsZT1cIkZhaWxlZCB0byBzdWJtaXQgcGF5bWVudHxUaXRsZSBmb3IgcGF5bWVudCBlcnJvckBAYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIuZXJyb3ItYWxlcnRcIlxuICAgICAgKGNsb3NlKT1cIihmYWxzZSlcIlxuICAgICAgbW9kaWZpZXI9XCJlcnJvclwiXG4gICAgICBkYXRhLXJvbGU9XCJmYWlsdXJlLW1lc3NhZ2VcIlxuICAgICAgKm5nSWY9XCJwYXltZW50RXJyb3IgJiYgIWhhc0RhdGVFcnJvclwiXG4gICAgPlxuICAgIDwvYmItYWxlcnQtdWk+XG4gICAgPGJiLWFsZXJ0LXVpXG4gICAgICB0aXRsZT1cIlRoZSBkYXRlIHNlbGVjdGVkIGlzIGludmFsaWQuXCJcbiAgICAgIGkxOG4tdGl0bGU9XCJcbiAgICAgICAgRmFpbGVkIHRvIHN1Ym1pdCBwYXltZW50IGRhdGV8VGl0bGUgZm9yIHBheW1lbnQgZGF0ZSBlcnJvckBAYmlsbHBheS1wYXltZW50LXJldmlldy1jb250YWluZXIuZXJyb3ItZGF0ZS1hbGVydFwiXG4gICAgICBtZXNzYWdlPVwiVGhlIHBheW1lbnQgY2Fubm90IGJlIHNjaGVkdWxlZCBvbiB0aGlzIGRhdGUuIFBsZWFzZSBzZWxlY3QgYW5vdGhlciBkYXRlIGluIHRoZSBwcmV2aW91cyBzdGVwLlwiXG4gICAgICBpMThuLW1lc3NhZ2U9XCJEYXRlIHBheW1lbnQgZXJyb3J8RGF0ZSBlcnJvciBmb3IgcGF5bWVudEBAYmlsbHBheS1wYXltZW50LXJldmlldy5kYXRlLWVycm9yLWFsZXJ0Lm1lc3NhZ2VcIlxuICAgICAgKGNsb3NlKT1cIihmYWxzZSlcIlxuICAgICAgbW9kaWZpZXI9XCJlcnJvclwiXG4gICAgICBkYXRhLXJvbGU9XCJmYWlsdXJlLWRhdGUtbWVzc2FnZVwiXG4gICAgICAqbmdJZj1cInBheW1lbnRFcnJvciAmJiBoYXNEYXRlRXJyb3JcIlxuICAgID5cbiAgICA8L2JiLWFsZXJ0LXVpPlxuICA8L2Rpdj5cbiAgPGJiLWJpbGxwYXktcGF5bWVudC1yZXZpZXctY2FyZCBbYWNjb3VudE51bWJlck1hc2tdPVwiYWNjb3VudE51bWJlck1hc2tlZFwiIFtwYXltZW50UmV2aWV3XT1cInBheW1lbnRSZXZpZXdcIj5cbiAgPC9iYi1iaWxscGF5LXBheW1lbnQtcmV2aWV3LWNhcmQ+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI3JlY3VycmluZ0VkaXRSZXZpZXdCdXR0b25zPlxuICA8ZGl2IGNsYXNzPVwiYmItYnV0dG9uLWJhciBiYi1idXR0b24tYmFyLS1yZXZlcnNlXCI+XG4gICAgPGJ1dHRvblxuICAgICAgYmJCdXR0b25cbiAgICAgIGRhdGEtcm9sZT1cImNvbmZpcm0tcGF5bWVudC1idXR0b25cIlxuICAgICAgaTE4bj1cIlxuICAgICAgICBQYXltZW50IGRldGFpbHMgY29uZmlybSBidXR0b258TGFiZWwgZm9yIGNvbmZpcm0gcGF5bWVudCByZWN1cnJpbmdcbiAgICAgICAgYnV0dG9uQEBiaWxscGF5LXBheW1lbnQtcmVjdXJyaW5nLXJldmlldy5jb25maXJtXCJcbiAgICAgIChjbGljayk9XCJjb25maXJtUGF5bWVudChwYXltZW50KVwiXG4gICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvblwiXG4gICAgPlxuICAgICAgQ29uZmlybSBwYXltZW50XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvblxuICAgICAgKm5nSWY9XCJpZCQgfCBhc3luYyBhcyBwYXltZW50SWRcIlxuICAgICAgYmJCdXR0b25cbiAgICAgIGRhdGEtcm9sZT1cImVkaXQtcGF5bWVudC1idXR0b25cIlxuICAgICAgaTE4bj1cIlxuICAgICAgICBQYXltZW50IGRldGFpbHMgZWRpdCBidXR0b258TGFiZWwgZm9yIGVkaXQgcGF5bWVudCBwYXltZW50IHJlY3VycmluZ1xuICAgICAgICBidXR0b25AQGJpbGxwYXktcGF5bWVudC1yZWN1cnJpbmctcmV2aWV3LmVkaXRcIlxuICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlVG9Gb3JtKHBheW1lbnRJZClcIlxuICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgICAgY29sb3I9XCJzZWNvbmRhcnlcIlxuICAgID5cbiAgICAgIEVkaXQgcGF5bWVudFxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b25cbiAgICAgIGJiQnV0dG9uXG4gICAgICBkYXRhLXJvbGU9XCJjYW5jZWwtcGF5bWVudC1idXR0b25cIlxuICAgICAgaTE4bj1cIlxuICAgICAgICBQYXltZW50IGRldGFpbHMgY2FuY2VsIGJ1dHRvbnxMYWJlbCBmb3IgY2FuY2VsIHBheW1lbnQgcGF5bWVudCByZWN1cnJpbmdcbiAgICAgICAgYnV0dG9uQEBiaWxscGF5LXBheW1lbnQtcmVjdXJyaW5nLXJldmlldy5jYW5jZWxcIlxuICAgICAgKGNsaWNrKT1cImNhbmNlbCgpXCJcbiAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uIGJiLWJ1dHRvbi1iYXJfX2J1dHRvbi0tYWNyb3NzXCJcbiAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgPlxuICAgICAgQ2FuY2VsXG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNub3RpZmljYXRpb25NZXNzYWdlPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwicGF5bWVudD8ucGF5ZWVUbyBhcyBwYXllZVwiPlxuICAgIDxzcGFuXG4gICAgICBpMThuPVwiXG4gICAgICAgIHBheW1lbnQgbm90aWZpY2F0aW9uIG1lc3NhZ2V8UGF5bWVudCBjb25maXJtYXRpb24gc3VjY2VzcyBub3RpZmljYXRpb25cbiAgICAgICAgbWVzc2FnZUBAYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1yZXZpZXcuY29uZmlybS5ub3RpZmljYXRpb24ubWVzc2FnZVwiXG4gICAgICA+UGF5bWVudCB0byB7eyAocGF5ZWUubmlja05hbWUgJiYgcGF5ZWUubmlja05hbWUgKyAnICgnICsgcGF5ZWUubmFtZSArICcpJykgfHwgcGF5ZWUubmFtZSB9fSBoYXMgYmVlbiBlZGl0ZWRcbiAgICAgIHN1Y2Nlc3NmdWxseTwvc3BhblxuICAgID5cbiAgPC9uZy1jb250YWluZXI+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI25vdGlmaWNhdGlvbkhlYWRlcj5cbiAgPHNwYW5cbiAgICBpMThuPVwiXG4gICAgICBwYXltZW50IG5vdGlmaWNhdGlvbiBoZWFkZXJ8UGF5bWVudCBjb25maXJtYXRpb24gc3VjY2VzcyBub3RpZmljYXRpb25cbiAgICAgIGhlYWRlckBAYmlsbHBheS1wYXltZW50LXJlY3VycmluZy1yZXZpZXcuY29uZmlybS5ub3RpZmljYXRpb24uaGVhZGVyXCJcbiAgICA+UGF5bWVudCBlZGl0ZWQ8L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==