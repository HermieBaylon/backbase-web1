import { ChangeDetectionStrategy, Component } from '@angular/core';
import { BillpayDiscardChangesModalService, } from '@backbase/billpay-journeys-common';
import { BasePaymentEditReviewContainerDirective } from '../../../directives/base-payment-edit-review-container.model';
import { takeUntil } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "../../../services/pay-bills-state.service";
import * as i3 from "@backbase/billpay-journeys-common";
import * as i4 from "../../../services/pay-bills-navigation.service";
import * as i5 from "@backbase/ui-ang/notification";
import * as i6 from "../billpay-payment-discard-changes-modal/billpay-payment-discard-changes-modal.component";
import * as i7 from "@backbase/ui-ang/alert";
import * as i8 from "@angular/common";
import * as i9 from "@backbase/ui-ang/button";
export class BillpayPaymentOneOffEditReviewContainerComponent extends BasePaymentEditReviewContainerDirective {
    /** @internal */
    constructor(route, stateService, discardModalService, paymentParserService, routerService, dataService, notificationService, cdRef) {
        super(route, stateService, discardModalService, paymentParserService, routerService);
        this.routerService = routerService;
        this.dataService = dataService;
        this.notificationService = notificationService;
        this.cdRef = cdRef;
        this.activatedRoute = route;
    }
    navigateToForm(id) {
        var _a;
        this.routerService.navigateToEditOneOffForm(id, { relativeTo: (_a = this.activatedRoute) === null || _a === void 0 ? void 0 : _a.parent });
    }
    onPaymentConfirm(payment, id) {
        this.paymentError = false;
        this.hasDateError = false;
        this.dataService
            .updatePaymentOneOff(payment, id)
            .pipe(takeUntil(this.destroy$))
            .subscribe(() => {
            this.routerService.navigateToPayments();
            this.notificationService.showNotification({
                header: this.notificationHeaderTemplate,
                message: this.notificationMessageTemplate,
                modifier: 'success',
                ttl: this.dismissTimeout,
            });
        }, error => {
            var _a, _b;
            this.paymentError = true;
            this.hasDateError = (_b = (_a = error.error) === null || _a === void 0 ? void 0 : _a.errors) === null || _b === void 0 ? void 0 : _b.some((a) => a.key === 'billpay.api.invalidPaymentDate');
            this.cdRef.detectChanges();
            this.failAlert.nativeElement.scrollIntoView(false);
        });
    }
}
BillpayPaymentOneOffEditReviewContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentOneOffEditReviewContainerComponent, deps: [{ token: i1.ActivatedRoute }, { token: i2.PayBillsStateService }, { token: i3.BillpayDiscardChangesModalService }, { token: i3.BillpayPaymentParserService }, { token: i4.PayBillsNavigationService }, { token: i3.BillpayPaymentDataService }, { token: i5.NotificationService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
BillpayPaymentOneOffEditReviewContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPaymentOneOffEditReviewContainerComponent, selector: "bb-billpay-payment-one-off-edit-review-container", providers: [BillpayDiscardChangesModalService], usesInheritance: true, ngImport: i0, template: "<ng-container *ngIf=\"payment\">\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <div class=\"bb-block bb-block--xl\">\n        <ng-container *ngTemplateOutlet=\"oneOffEditReviewContent\"></ng-container>\n      </div>\n\n      <ng-container *ngTemplateOutlet=\"oneOffEditReviewButtons\"></ng-container>\n    </div>\n  </div>\n</ng-container>\n\n<bb-billpay-payment-discard-changes-modal\n  *ngIf=\"isDiscardModalOpen\"\n  data-role=\"billpay-payment-edit-review-page-lose-changes-modal\"\n  (resolve)=\"onModalResolve($event)\"\n  title=\"Lose changes?\"\n  i18n-title=\"Lose changes modal header@@billpay.manage-payment.lose-changes-modal.header\"\n  subtitle=\"Are you sure you want to cancel editing this payment? You will lose any changes made.\"\n  i18n-subtitle=\"Lose changes modal body@@billpay.manage-payment.lose-changes-modal.body\"\n  confirm-button-label=\"Lose changes\"\n  i18n-confirm-button-label=\"\n    confirm modal button|Cancel payment confirmation button@@billpay.manage-payment.lose-changes-modal.confirm-button\"\n  cancel-button-label=\"Continue editing\"\n  i18n-cancel-button-label=\"\n    cancel modal button|Continue with current payment button@@billpay.manage-payment.lose-changes-modal.cancel-button\"\n></bb-billpay-payment-discard-changes-modal>\n\n<ng-template #oneOffEditReviewContent>\n  <div #failAlert>\n    <bb-alert-ui\n      title=\"Failed to submit payment. Please try again later.\"\n      i18n-title=\"Failed to submit payment|Title for payment error@@billpay-payment-review-container.error-alert\"\n      (close)=\"(false)\"\n      modifier=\"error\"\n      data-role=\"failure-message\"\n      *ngIf=\"paymentError && !hasDateError\"\n    >\n    </bb-alert-ui>\n    <bb-alert-ui\n      title=\"The date selected is invalid.\"\n      i18n-title=\"\n        Failed to submit payment date|Title for payment date error@@billpay-payment-review-container.error-date-alert\"\n      message=\"The payment cannot be scheduled on this date. Please select another date in the previous step.\"\n      i18n-message=\"Date payment error|Date error for payment@@billpay-payment-review.date-error-alert.message\"\n      (close)=\"(false)\"\n      modifier=\"error\"\n      data-role=\"failure-date-message\"\n      *ngIf=\"paymentError && hasDateError\"\n    >\n    </bb-alert-ui>\n  </div>\n  <bb-billpay-payment-review-card [accountNumberMask]=\"accountNumberMasked\" [paymentReview]=\"paymentReview\">\n  </bb-billpay-payment-review-card>\n</ng-template>\n\n<ng-template #oneOffEditReviewButtons>\n  <div class=\"bb-button-bar bb-button-bar--reverse\">\n    <button\n      bbButton\n      data-role=\"confirm-payment-button\"\n      i18n=\"\n        Payment details confirm button|Label for confirm payment oneOff button@@billpay-payment-oneOff-review.confirm\"\n      (click)=\"confirmPayment(payment)\"\n      class=\"bb-button-bar__button\"\n    >\n      Confirm payment\n    </button>\n    <button\n      *ngIf=\"id$ | async as paymentId\"\n      bbButton\n      data-role=\"edit-payment-button\"\n      i18n=\"\n        Payment details edit button|Label for edit payment payment oneOff button@@billpay-payment-oneOff-review.edit\"\n      (click)=\"navigateToForm(paymentId)\"\n      class=\"bb-button-bar__button\"\n      color=\"secondary\"\n    >\n      Edit payment\n    </button>\n    <button\n      bbButton\n      data-role=\"cancel-payment-button\"\n      i18n=\"\n        Payment details cancel button|Label for cancel payment payment oneOff\n        button@@billpay-payment-oneOff-review.cancel\"\n      (click)=\"cancel()\"\n      class=\"bb-button-bar__button bb-button-bar__button--across\"\n      color=\"link\"\n    >\n      Cancel\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #notificationMessage>\n  <ng-container *ngIf=\"payment?.payeeTo as payee\">\n    <span\n      i18n=\"\n        payment notification message|Payment confirmation success notification\n        message@@billpay-payment-oneOff-review.confirm.notification.message\"\n      >Payment to {{ (payee.nickName && payee.nickName + ' (' + payee.name + ')') || payee.name }} has been edited\n      successfully</span\n    >\n  </ng-container>\n</ng-template>\n\n<ng-template notificationHeader>\n  <span\n    i18n=\"\n      payment notification header|Payment confirmation success notification\n      header@@billpay-payment-oneOff-review.confirm.notification.header\"\n    >Payment edited</span\n  >\n</ng-template>\n", components: [{ type: i6.BillpayPaymentDiscardChangesModalComponent, selector: "bb-billpay-payment-discard-changes-modal", inputs: ["title", "subtitle", "confirm-button-label", "cancel-button-label"], outputs: ["resolve"] }, { type: i7.AlertComponent, selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i3.BillpayPaymentReviewCardComponent, selector: "bb-billpay-payment-review-card", inputs: ["paymentReview", "accountNumberMask", "frequencyLabel"] }], directives: [{ type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i8.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i9.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], pipes: { "async": i8.AsyncPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPaymentOneOffEditReviewContainerComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payment-one-off-edit-review-container',
                    templateUrl: './billpay-payment-one-off-edit-review-container.component.html',
                    providers: [BillpayDiscardChangesModalService],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.ActivatedRoute }, { type: i2.PayBillsStateService }, { type: i3.BillpayDiscardChangesModalService }, { type: i3.BillpayPaymentParserService }, { type: i4.PayBillsNavigationService }, { type: i3.BillpayPaymentDataService }, { type: i5.NotificationService }, { type: i0.ChangeDetectorRef }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXltZW50LW9uZS1vZmYtZWRpdC1yZXZpZXctY29udGFpbmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvcGF5LWJpbGxzLWpvdXJuZXkvc3JjL2NvbXBvbmVudHMvYmlsbHBheS1wYXltZW50LXNpbmdsZS1iaWxsL2JpbGxwYXktcGF5bWVudC1vbmUtb2ZmLWVkaXQtcmV2aWV3LWNvbnRhaW5lci9iaWxscGF5LXBheW1lbnQtb25lLW9mZi1lZGl0LXJldmlldy1jb250YWluZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wYXktYmlsbHMtam91cm5leS9zcmMvY29tcG9uZW50cy9iaWxscGF5LXBheW1lbnQtc2luZ2xlLWJpbGwvYmlsbHBheS1wYXltZW50LW9uZS1vZmYtZWRpdC1yZXZpZXctY29udGFpbmVyL2JpbGxwYXktcGF5bWVudC1vbmUtb2ZmLWVkaXQtcmV2aWV3LWNvbnRhaW5lci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsdUJBQXVCLEVBQXFCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV0RixPQUFPLEVBQ0wsaUNBQWlDLEdBSWxDLE1BQU0sbUNBQW1DLENBQUM7QUFFM0MsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sOERBQThELENBQUM7QUFHdkgsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7OztBQVMzQyxNQUFNLE9BQU8sZ0RBQWlELFNBQVEsdUNBQXVDO0lBRzNHLGdCQUFnQjtJQUNoQixZQUNFLEtBQXFCLEVBQ3JCLFlBQWtDLEVBQ2xDLG1CQUFzRCxFQUN0RCxvQkFBaUQsRUFDeEMsYUFBd0MsRUFDaEMsV0FBc0MsRUFDdEMsbUJBQXdDLEVBQ2pELEtBQXdCO1FBRWhDLEtBQUssQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLG1CQUFtQixFQUFFLG9CQUFvQixFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBTDVFLGtCQUFhLEdBQWIsYUFBYSxDQUEyQjtRQUNoQyxnQkFBVyxHQUFYLFdBQVcsQ0FBMkI7UUFDdEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUNqRCxVQUFLLEdBQUwsS0FBSyxDQUFtQjtRQUdoQyxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRUQsY0FBYyxDQUFDLEVBQVU7O1FBQ3ZCLElBQUksQ0FBQyxhQUFhLENBQUMsd0JBQXdCLENBQUMsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLE1BQUEsSUFBSSxDQUFDLGNBQWMsMENBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUMvRixDQUFDO0lBRVMsZ0JBQWdCLENBQUMsT0FBeUIsRUFBRSxFQUFVO1FBQzlELElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBQzFCLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBRTFCLElBQUksQ0FBQyxXQUFXO2FBQ2IsbUJBQW1CLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQzthQUNoQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUM5QixTQUFTLENBQ1IsR0FBRyxFQUFFO1lBQ0gsSUFBSSxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDeEMsTUFBTSxFQUFFLElBQUksQ0FBQywwQkFBMEI7Z0JBQ3ZDLE9BQU8sRUFBRSxJQUFJLENBQUMsMkJBQTJCO2dCQUN6QyxRQUFRLEVBQUUsU0FBUztnQkFDbkIsR0FBRyxFQUFFLElBQUksQ0FBQyxjQUFjO2FBQ3pCLENBQUMsQ0FBQztRQUNMLENBQUMsRUFDRCxLQUFLLENBQUMsRUFBRTs7WUFDTixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztZQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLE1BQUEsTUFBQSxLQUFLLENBQUMsS0FBSywwQ0FBRSxNQUFNLDBDQUFFLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxnQ0FBZ0MsQ0FBQyxDQUFDO1lBQ3RHLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JELENBQUMsQ0FDRixDQUFDO0lBQ04sQ0FBQzs7OElBOUNVLGdEQUFnRDtrSUFBaEQsZ0RBQWdELDJFQUhoRCxDQUFDLGlDQUFpQyxDQUFDLGlEQ2xCaEQsczNJQW1IQTs0RkQ5RmEsZ0RBQWdEO2tCQU41RCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxrREFBa0Q7b0JBQzVELFdBQVcsRUFBRSxnRUFBZ0U7b0JBQzdFLFNBQVMsRUFBRSxDQUFDLGlDQUFpQyxDQUFDO29CQUM5QyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtpQkFDaEQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtcbiAgQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlLFxuICBCaWxscGF5UGF5bWVudERhdGFTZXJ2aWNlLFxuICBCaWxscGF5UGF5bWVudFBhcnNlclNlcnZpY2UsXG4gIFBheW1lbnRGb3JtU3RhdGUsXG59IGZyb20gJ0BiYWNrYmFzZS9iaWxscGF5LWpvdXJuZXlzLWNvbW1vbic7XG5cbmltcG9ydCB7IEJhc2VQYXltZW50RWRpdFJldmlld0NvbnRhaW5lckRpcmVjdGl2ZSB9IGZyb20gJy4uLy4uLy4uL2RpcmVjdGl2ZXMvYmFzZS1wYXltZW50LWVkaXQtcmV2aWV3LWNvbnRhaW5lci5tb2RlbCc7XG5pbXBvcnQgeyBQYXlCaWxsc05hdmlnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcGF5LWJpbGxzLW5hdmlnYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyBQYXlCaWxsc1N0YXRlU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3BheS1iaWxscy1zdGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvdWktYW5nL25vdGlmaWNhdGlvbic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLWJpbGxwYXktcGF5bWVudC1vbmUtb2ZmLWVkaXQtcmV2aWV3LWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9iaWxscGF5LXBheW1lbnQtb25lLW9mZi1lZGl0LXJldmlldy1jb250YWluZXIuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtCaWxscGF5RGlzY2FyZENoYW5nZXNNb2RhbFNlcnZpY2VdLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgQmlsbHBheVBheW1lbnRPbmVPZmZFZGl0UmV2aWV3Q29udGFpbmVyQ29tcG9uZW50IGV4dGVuZHMgQmFzZVBheW1lbnRFZGl0UmV2aWV3Q29udGFpbmVyRGlyZWN0aXZlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBhY3RpdmF0ZWRSb3V0ZT86IEFjdGl2YXRlZFJvdXRlO1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHN0YXRlU2VydmljZTogUGF5QmlsbHNTdGF0ZVNlcnZpY2UsXG4gICAgZGlzY2FyZE1vZGFsU2VydmljZTogQmlsbHBheURpc2NhcmRDaGFuZ2VzTW9kYWxTZXJ2aWNlLFxuICAgIHBheW1lbnRQYXJzZXJTZXJ2aWNlOiBCaWxscGF5UGF5bWVudFBhcnNlclNlcnZpY2UsXG4gICAgcmVhZG9ubHkgcm91dGVyU2VydmljZTogUGF5QmlsbHNOYXZpZ2F0aW9uU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRhdGFTZXJ2aWNlOiBCaWxscGF5UGF5bWVudERhdGFTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgbm90aWZpY2F0aW9uU2VydmljZTogTm90aWZpY2F0aW9uU2VydmljZSxcbiAgICBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgKSB7XG4gICAgc3VwZXIocm91dGUsIHN0YXRlU2VydmljZSwgZGlzY2FyZE1vZGFsU2VydmljZSwgcGF5bWVudFBhcnNlclNlcnZpY2UsIHJvdXRlclNlcnZpY2UpO1xuICAgIHRoaXMuYWN0aXZhdGVkUm91dGUgPSByb3V0ZTtcbiAgfVxuXG4gIG5hdmlnYXRlVG9Gb3JtKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJvdXRlclNlcnZpY2UubmF2aWdhdGVUb0VkaXRPbmVPZmZGb3JtKGlkLCB7IHJlbGF0aXZlVG86IHRoaXMuYWN0aXZhdGVkUm91dGU/LnBhcmVudCB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvblBheW1lbnRDb25maXJtKHBheW1lbnQ6IFBheW1lbnRGb3JtU3RhdGUsIGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBheW1lbnRFcnJvciA9IGZhbHNlO1xuICAgIHRoaXMuaGFzRGF0ZUVycm9yID0gZmFsc2U7XG5cbiAgICB0aGlzLmRhdGFTZXJ2aWNlXG4gICAgICAudXBkYXRlUGF5bWVudE9uZU9mZihwYXltZW50LCBpZClcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLnJvdXRlclNlcnZpY2UubmF2aWdhdGVUb1BheW1lbnRzKCk7XG4gICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25TZXJ2aWNlLnNob3dOb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgaGVhZGVyOiB0aGlzLm5vdGlmaWNhdGlvbkhlYWRlclRlbXBsYXRlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5ub3RpZmljYXRpb25NZXNzYWdlVGVtcGxhdGUsXG4gICAgICAgICAgICBtb2RpZmllcjogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgdHRsOiB0aGlzLmRpc21pc3NUaW1lb3V0LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgdGhpcy5wYXltZW50RXJyb3IgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaGFzRGF0ZUVycm9yID0gZXJyb3IuZXJyb3I/LmVycm9ycz8uc29tZSgoYTogYW55KSA9PiBhLmtleSA9PT0gJ2JpbGxwYXkuYXBpLmludmFsaWRQYXltZW50RGF0ZScpO1xuICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgIHRoaXMuZmFpbEFsZXJ0Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cInBheW1lbnRcIj5cbiAgPGRpdiBjbGFzcz1cImNhcmQgY2FyZC1sZ1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0teGxcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIm9uZU9mZkVkaXRSZXZpZXdDb250ZW50XCI+PC9uZy1jb250YWluZXI+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIm9uZU9mZkVkaXRSZXZpZXdCdXR0b25zXCI+PC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy1jb250YWluZXI+XG5cbjxiYi1iaWxscGF5LXBheW1lbnQtZGlzY2FyZC1jaGFuZ2VzLW1vZGFsXG4gICpuZ0lmPVwiaXNEaXNjYXJkTW9kYWxPcGVuXCJcbiAgZGF0YS1yb2xlPVwiYmlsbHBheS1wYXltZW50LWVkaXQtcmV2aWV3LXBhZ2UtbG9zZS1jaGFuZ2VzLW1vZGFsXCJcbiAgKHJlc29sdmUpPVwib25Nb2RhbFJlc29sdmUoJGV2ZW50KVwiXG4gIHRpdGxlPVwiTG9zZSBjaGFuZ2VzP1wiXG4gIGkxOG4tdGl0bGU9XCJMb3NlIGNoYW5nZXMgbW9kYWwgaGVhZGVyQEBiaWxscGF5Lm1hbmFnZS1wYXltZW50Lmxvc2UtY2hhbmdlcy1tb2RhbC5oZWFkZXJcIlxuICBzdWJ0aXRsZT1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjYW5jZWwgZWRpdGluZyB0aGlzIHBheW1lbnQ/IFlvdSB3aWxsIGxvc2UgYW55IGNoYW5nZXMgbWFkZS5cIlxuICBpMThuLXN1YnRpdGxlPVwiTG9zZSBjaGFuZ2VzIG1vZGFsIGJvZHlAQGJpbGxwYXkubWFuYWdlLXBheW1lbnQubG9zZS1jaGFuZ2VzLW1vZGFsLmJvZHlcIlxuICBjb25maXJtLWJ1dHRvbi1sYWJlbD1cIkxvc2UgY2hhbmdlc1wiXG4gIGkxOG4tY29uZmlybS1idXR0b24tbGFiZWw9XCJcbiAgICBjb25maXJtIG1vZGFsIGJ1dHRvbnxDYW5jZWwgcGF5bWVudCBjb25maXJtYXRpb24gYnV0dG9uQEBiaWxscGF5Lm1hbmFnZS1wYXltZW50Lmxvc2UtY2hhbmdlcy1tb2RhbC5jb25maXJtLWJ1dHRvblwiXG4gIGNhbmNlbC1idXR0b24tbGFiZWw9XCJDb250aW51ZSBlZGl0aW5nXCJcbiAgaTE4bi1jYW5jZWwtYnV0dG9uLWxhYmVsPVwiXG4gICAgY2FuY2VsIG1vZGFsIGJ1dHRvbnxDb250aW51ZSB3aXRoIGN1cnJlbnQgcGF5bWVudCBidXR0b25AQGJpbGxwYXkubWFuYWdlLXBheW1lbnQubG9zZS1jaGFuZ2VzLW1vZGFsLmNhbmNlbC1idXR0b25cIlxuPjwvYmItYmlsbHBheS1wYXltZW50LWRpc2NhcmQtY2hhbmdlcy1tb2RhbD5cblxuPG5nLXRlbXBsYXRlICNvbmVPZmZFZGl0UmV2aWV3Q29udGVudD5cbiAgPGRpdiAjZmFpbEFsZXJ0PlxuICAgIDxiYi1hbGVydC11aVxuICAgICAgdGl0bGU9XCJGYWlsZWQgdG8gc3VibWl0IHBheW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJcbiAgICAgIGkxOG4tdGl0bGU9XCJGYWlsZWQgdG8gc3VibWl0IHBheW1lbnR8VGl0bGUgZm9yIHBheW1lbnQgZXJyb3JAQGJpbGxwYXktcGF5bWVudC1yZXZpZXctY29udGFpbmVyLmVycm9yLWFsZXJ0XCJcbiAgICAgIChjbG9zZSk9XCIoZmFsc2UpXCJcbiAgICAgIG1vZGlmaWVyPVwiZXJyb3JcIlxuICAgICAgZGF0YS1yb2xlPVwiZmFpbHVyZS1tZXNzYWdlXCJcbiAgICAgICpuZ0lmPVwicGF5bWVudEVycm9yICYmICFoYXNEYXRlRXJyb3JcIlxuICAgID5cbiAgICA8L2JiLWFsZXJ0LXVpPlxuICAgIDxiYi1hbGVydC11aVxuICAgICAgdGl0bGU9XCJUaGUgZGF0ZSBzZWxlY3RlZCBpcyBpbnZhbGlkLlwiXG4gICAgICBpMThuLXRpdGxlPVwiXG4gICAgICAgIEZhaWxlZCB0byBzdWJtaXQgcGF5bWVudCBkYXRlfFRpdGxlIGZvciBwYXltZW50IGRhdGUgZXJyb3JAQGJpbGxwYXktcGF5bWVudC1yZXZpZXctY29udGFpbmVyLmVycm9yLWRhdGUtYWxlcnRcIlxuICAgICAgbWVzc2FnZT1cIlRoZSBwYXltZW50IGNhbm5vdCBiZSBzY2hlZHVsZWQgb24gdGhpcyBkYXRlLiBQbGVhc2Ugc2VsZWN0IGFub3RoZXIgZGF0ZSBpbiB0aGUgcHJldmlvdXMgc3RlcC5cIlxuICAgICAgaTE4bi1tZXNzYWdlPVwiRGF0ZSBwYXltZW50IGVycm9yfERhdGUgZXJyb3IgZm9yIHBheW1lbnRAQGJpbGxwYXktcGF5bWVudC1yZXZpZXcuZGF0ZS1lcnJvci1hbGVydC5tZXNzYWdlXCJcbiAgICAgIChjbG9zZSk9XCIoZmFsc2UpXCJcbiAgICAgIG1vZGlmaWVyPVwiZXJyb3JcIlxuICAgICAgZGF0YS1yb2xlPVwiZmFpbHVyZS1kYXRlLW1lc3NhZ2VcIlxuICAgICAgKm5nSWY9XCJwYXltZW50RXJyb3IgJiYgaGFzRGF0ZUVycm9yXCJcbiAgICA+XG4gICAgPC9iYi1hbGVydC11aT5cbiAgPC9kaXY+XG4gIDxiYi1iaWxscGF5LXBheW1lbnQtcmV2aWV3LWNhcmQgW2FjY291bnROdW1iZXJNYXNrXT1cImFjY291bnROdW1iZXJNYXNrZWRcIiBbcGF5bWVudFJldmlld109XCJwYXltZW50UmV2aWV3XCI+XG4gIDwvYmItYmlsbHBheS1wYXltZW50LXJldmlldy1jYXJkPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNvbmVPZmZFZGl0UmV2aWV3QnV0dG9ucz5cbiAgPGRpdiBjbGFzcz1cImJiLWJ1dHRvbi1iYXIgYmItYnV0dG9uLWJhci0tcmV2ZXJzZVwiPlxuICAgIDxidXR0b25cbiAgICAgIGJiQnV0dG9uXG4gICAgICBkYXRhLXJvbGU9XCJjb25maXJtLXBheW1lbnQtYnV0dG9uXCJcbiAgICAgIGkxOG49XCJcbiAgICAgICAgUGF5bWVudCBkZXRhaWxzIGNvbmZpcm0gYnV0dG9ufExhYmVsIGZvciBjb25maXJtIHBheW1lbnQgb25lT2ZmIGJ1dHRvbkBAYmlsbHBheS1wYXltZW50LW9uZU9mZi1yZXZpZXcuY29uZmlybVwiXG4gICAgICAoY2xpY2spPVwiY29uZmlybVBheW1lbnQocGF5bWVudClcIlxuICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgID5cbiAgICAgIENvbmZpcm0gcGF5bWVudFxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b25cbiAgICAgICpuZ0lmPVwiaWQkIHwgYXN5bmMgYXMgcGF5bWVudElkXCJcbiAgICAgIGJiQnV0dG9uXG4gICAgICBkYXRhLXJvbGU9XCJlZGl0LXBheW1lbnQtYnV0dG9uXCJcbiAgICAgIGkxOG49XCJcbiAgICAgICAgUGF5bWVudCBkZXRhaWxzIGVkaXQgYnV0dG9ufExhYmVsIGZvciBlZGl0IHBheW1lbnQgcGF5bWVudCBvbmVPZmYgYnV0dG9uQEBiaWxscGF5LXBheW1lbnQtb25lT2ZmLXJldmlldy5lZGl0XCJcbiAgICAgIChjbGljayk9XCJuYXZpZ2F0ZVRvRm9ybShwYXltZW50SWQpXCJcbiAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uXCJcbiAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICA+XG4gICAgICBFZGl0IHBheW1lbnRcbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uXG4gICAgICBiYkJ1dHRvblxuICAgICAgZGF0YS1yb2xlPVwiY2FuY2VsLXBheW1lbnQtYnV0dG9uXCJcbiAgICAgIGkxOG49XCJcbiAgICAgICAgUGF5bWVudCBkZXRhaWxzIGNhbmNlbCBidXR0b258TGFiZWwgZm9yIGNhbmNlbCBwYXltZW50IHBheW1lbnQgb25lT2ZmXG4gICAgICAgIGJ1dHRvbkBAYmlsbHBheS1wYXltZW50LW9uZU9mZi1yZXZpZXcuY2FuY2VsXCJcbiAgICAgIChjbGljayk9XCJjYW5jZWwoKVwiXG4gICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvbiBiYi1idXR0b24tYmFyX19idXR0b24tLWFjcm9zc1wiXG4gICAgICBjb2xvcj1cImxpbmtcIlxuICAgID5cbiAgICAgIENhbmNlbFxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbm90aWZpY2F0aW9uTWVzc2FnZT5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInBheW1lbnQ/LnBheWVlVG8gYXMgcGF5ZWVcIj5cbiAgICA8c3BhblxuICAgICAgaTE4bj1cIlxuICAgICAgICBwYXltZW50IG5vdGlmaWNhdGlvbiBtZXNzYWdlfFBheW1lbnQgY29uZmlybWF0aW9uIHN1Y2Nlc3Mgbm90aWZpY2F0aW9uXG4gICAgICAgIG1lc3NhZ2VAQGJpbGxwYXktcGF5bWVudC1vbmVPZmYtcmV2aWV3LmNvbmZpcm0ubm90aWZpY2F0aW9uLm1lc3NhZ2VcIlxuICAgICAgPlBheW1lbnQgdG8ge3sgKHBheWVlLm5pY2tOYW1lICYmIHBheWVlLm5pY2tOYW1lICsgJyAoJyArIHBheWVlLm5hbWUgKyAnKScpIHx8IHBheWVlLm5hbWUgfX0gaGFzIGJlZW4gZWRpdGVkXG4gICAgICBzdWNjZXNzZnVsbHk8L3NwYW5cbiAgICA+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlIG5vdGlmaWNhdGlvbkhlYWRlcj5cbiAgPHNwYW5cbiAgICBpMThuPVwiXG4gICAgICBwYXltZW50IG5vdGlmaWNhdGlvbiBoZWFkZXJ8UGF5bWVudCBjb25maXJtYXRpb24gc3VjY2VzcyBub3RpZmljYXRpb25cbiAgICAgIGhlYWRlckBAYmlsbHBheS1wYXltZW50LW9uZU9mZi1yZXZpZXcuY29uZmlybS5ub3RpZmljYXRpb24uaGVhZGVyXCJcbiAgICA+UGF5bWVudCBlZGl0ZWQ8L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==