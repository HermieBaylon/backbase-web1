import { ChangeDetectionStrategy, Component, Inject } from '@angular/core';
import '@angular/localize/init';
import { PUBSUB } from '@backbase/foundation-ang/web-sdk';
import * as i0 from "@angular/core";
import * as i1 from "./messages-client-inbox-journey-config.service";
import * as i2 from "@angular/router";
import * as i3 from "@backbase/messages-create-message-modal-widget-ang";
import * as i4 from "@backbase/messages-ui-ang";
export class MessagesClientInboxJourneyComponent {
    constructor(config, eventBus, route) {
        this.config = config;
        this.eventBus = eventBus;
        this.route = route;
        /**
         * Collection of Tabs to be rendered according to the journey layout and routing.
         */
        this.tabs = [];
        const routeConfig = this.route.snapshot.routeConfig;
        if (routeConfig && routeConfig.children) {
            this.tabs = (routeConfig === null || routeConfig === void 0 ? void 0 : routeConfig.children) ? this.initializeTabs(routeConfig) : [];
        }
    }
    initializeTabs({ children = [] }) {
        return children
            .filter(routeItem => routeItem.path && routeItem.data)
            .map((routeItem, index) => {
            var _a;
            return ({
                title: ((_a = routeItem.data) === null || _a === void 0 ? void 0 : _a.title) ||
                    $localize `Default unnamed tab title@@messages-client-inbox-journey.default-tab.title:Tab${index + 1}`,
                route: routeItem.path || `${index + 1}`,
            });
        });
    }
    /**
     * Handler for the header button to open the upload modal
     */
    openComposeModal() {
        this.eventBus.publish(this.config.createMessageOpenEventName, undefined);
    }
}
MessagesClientInboxJourneyComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesClientInboxJourneyComponent, deps: [{ token: i1.MessagesClientInboxJourneyConfigService }, { token: PUBSUB }, { token: i2.ActivatedRoute }], target: i0.ɵɵFactoryTarget.Component });
MessagesClientInboxJourneyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.14", type: MessagesClientInboxJourneyComponent, selector: "bb-messages-client-inbox-journey", ngImport: i0, template: "<bb-messages-create-message-modal-widget-ang\n  [maxAttachmentSize]=\"config.maxAttachmentSize\"\n  [maxSubjectLength]=\"config.maxSubjectLength\"\n  [maxMessageLength]=\"config.maxMessageLength\"\n  [modalHeader]=\"config.modalHeader\"\n  [hideComposeButton]=\"config.hideComposeButton\"\n  [createMessageOpenEventName]=\"config.createMessageOpenEventName\"\n  [createMessageClosedEventName]=\"config.createMessageClosedEventName\"\n>\n</bb-messages-create-message-modal-widget-ang>\n<bb-messages-heading\n  [headingTitle]=\"config.headingTitle\"\n  [headingType]=\"config.headingType\"\n  [headingWrapperClasses]=\"config.headingWrapperClasses\"\n  [buttonText]=\"config.buttonText\"\n  (buttonAction)=\"openComposeModal()\"\n>\n</bb-messages-heading>\n<div class=\"bb-messages bb-messages__tabs-wrapper\">\n  <bb-messages-tabs data-role=\"client-inbox__tabs\" [tabs]=\"tabs\"></bb-messages-tabs>\n</div>\n", components: [{ type: i3.MessagesCreateMessageModalWidgetComponent, selector: "bb-messages-create-message-modal-widget-ang" }, { type: i4.MessagesHeadingComponent, selector: "bb-messages-heading", inputs: ["headingTitle", "headingType", "headingClasses", "headingWrapperClasses", "buttonText", "showButton"], outputs: ["buttonAction"] }, { type: i4.MessagesTabsComponent, selector: "bb-messages-tabs", inputs: ["tabs"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesClientInboxJourneyComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-messages-client-inbox-journey',
                    templateUrl: './messages-client-inbox-journey.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.MessagesClientInboxJourneyConfigService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [PUBSUB]
                }] }, { type: i2.ActivatedRoute }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZXMtY2xpZW50LWluYm94LWpvdXJuZXkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9tZXNzYWdlcy1jbGllbnQtaW5ib3gtam91cm5leS9zcmMvbWVzc2FnZXMtY2xpZW50LWluYm94LWpvdXJuZXkuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy9tZXNzYWdlcy1jbGllbnQtaW5ib3gtam91cm5leS9zcmMvbWVzc2FnZXMtY2xpZW50LWluYm94LWpvdXJuZXkuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0UsT0FBTyx3QkFBd0IsQ0FBQztBQUNoQyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7Ozs7OztBQVUxRCxNQUFNLE9BQU8sbUNBQW1DO0lBTTlDLFlBQ1csTUFBK0MsRUFDdkIsUUFBZ0IsRUFDaEMsS0FBcUI7UUFGN0IsV0FBTSxHQUFOLE1BQU0sQ0FBeUM7UUFDdkIsYUFBUSxHQUFSLFFBQVEsQ0FBUTtRQUNoQyxVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQVJ4Qzs7V0FFRztRQUNJLFNBQUksR0FBVSxFQUFFLENBQUM7UUFPdEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO1FBQ3BELElBQUksV0FBVyxJQUFJLFdBQVcsQ0FBQyxRQUFRLEVBQUU7WUFDdkMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFBLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUMzRTtJQUNILENBQUM7SUFFTyxjQUFjLENBQUMsRUFBRSxRQUFRLEdBQUcsRUFBRSxFQUFTO1FBQzdDLE9BQU8sUUFBUTthQUNaLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLElBQUksU0FBUyxDQUFDLElBQUksQ0FBQzthQUNyRCxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLEVBQUU7O1lBQUMsT0FBQSxDQUFDO2dCQUMxQixLQUFLLEVBQ0gsQ0FBQSxNQUFBLFNBQVMsQ0FBQyxJQUFJLDBDQUFFLEtBQUs7b0JBQ3JCLFNBQVMsQ0FBQSxpRkFBaUYsS0FBSyxHQUFHLENBQUMsRUFBRTtnQkFDdkcsS0FBSyxFQUFFLFNBQVMsQ0FBQyxJQUFJLElBQUksR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUFFO2FBQ3hDLENBQUMsQ0FBQTtTQUFBLENBQUMsQ0FBQztJQUNSLENBQUM7SUFDRDs7T0FFRztJQUNILGdCQUFnQjtRQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsMEJBQTBCLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDM0UsQ0FBQzs7aUlBaENVLG1DQUFtQyx5RUFRcEMsTUFBTTtxSEFSTCxtQ0FBbUMsd0VDYmhELDg0QkFxQkE7NEZEUmEsbUNBQW1DO2tCQUwvQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxrQ0FBa0M7b0JBQzVDLFdBQVcsRUFBRSxnREFBZ0Q7b0JBQzdELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2lCQUNoRDs7MEJBU0ksTUFBTTsyQkFBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSwgUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0ICdAYW5ndWxhci9sb2NhbGl6ZS9pbml0JztcbmltcG9ydCB7IFBVQlNVQiB9IGZyb20gJ0BiYWNrYmFzZS9mb3VuZGF0aW9uLWFuZy93ZWItc2RrJztcbmltcG9ydCB7IFB1YnN1YiB9IGZyb20gJ0BiYWNrYmFzZS9saWItYmItcGFnZS1ib290c3RyYXAtY2RuJztcbmltcG9ydCB7IFRhYiB9IGZyb20gJ0BiYWNrYmFzZS9tZXNzYWdlcy11aS1hbmcnO1xuaW1wb3J0IHsgTWVzc2FnZXNDbGllbnRJbmJveEpvdXJuZXlDb25maWdTZXJ2aWNlIH0gZnJvbSAnLi9tZXNzYWdlcy1jbGllbnQtaW5ib3gtam91cm5leS1jb25maWcuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLW1lc3NhZ2VzLWNsaWVudC1pbmJveC1qb3VybmV5JyxcbiAgdGVtcGxhdGVVcmw6ICcuL21lc3NhZ2VzLWNsaWVudC1pbmJveC1qb3VybmV5LmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VzQ2xpZW50SW5ib3hKb3VybmV5Q29tcG9uZW50IHtcbiAgLyoqXG4gICAqIENvbGxlY3Rpb24gb2YgVGFicyB0byBiZSByZW5kZXJlZCBhY2NvcmRpbmcgdG8gdGhlIGpvdXJuZXkgbGF5b3V0IGFuZCByb3V0aW5nLlxuICAgKi9cbiAgcHVibGljIHRhYnM6IFRhYltdID0gW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgY29uZmlnOiBNZXNzYWdlc0NsaWVudEluYm94Sm91cm5leUNvbmZpZ1NlcnZpY2UsXG4gICAgQEluamVjdChQVUJTVUIpIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRCdXM6IFB1YnN1YixcbiAgICBwcml2YXRlIHJlYWRvbmx5IHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgKSB7XG4gICAgY29uc3Qgcm91dGVDb25maWcgPSB0aGlzLnJvdXRlLnNuYXBzaG90LnJvdXRlQ29uZmlnO1xuICAgIGlmIChyb3V0ZUNvbmZpZyAmJiByb3V0ZUNvbmZpZy5jaGlsZHJlbikge1xuICAgICAgdGhpcy50YWJzID0gcm91dGVDb25maWc/LmNoaWxkcmVuID8gdGhpcy5pbml0aWFsaXplVGFicyhyb3V0ZUNvbmZpZykgOiBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVUYWJzKHsgY2hpbGRyZW4gPSBbXSB9OiBSb3V0ZSkge1xuICAgIHJldHVybiBjaGlsZHJlblxuICAgICAgLmZpbHRlcihyb3V0ZUl0ZW0gPT4gcm91dGVJdGVtLnBhdGggJiYgcm91dGVJdGVtLmRhdGEpXG4gICAgICAubWFwKChyb3V0ZUl0ZW0sIGluZGV4KSA9PiAoe1xuICAgICAgICB0aXRsZTpcbiAgICAgICAgICByb3V0ZUl0ZW0uZGF0YT8udGl0bGUgfHxcbiAgICAgICAgICAkbG9jYWxpemVgRGVmYXVsdCB1bm5hbWVkIHRhYiB0aXRsZUBAbWVzc2FnZXMtY2xpZW50LWluYm94LWpvdXJuZXkuZGVmYXVsdC10YWIudGl0bGU6VGFiJHtpbmRleCArIDF9YCxcbiAgICAgICAgcm91dGU6IHJvdXRlSXRlbS5wYXRoIHx8IGAke2luZGV4ICsgMX1gLFxuICAgICAgfSkpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGVyIGZvciB0aGUgaGVhZGVyIGJ1dHRvbiB0byBvcGVuIHRoZSB1cGxvYWQgbW9kYWxcbiAgICovXG4gIG9wZW5Db21wb3NlTW9kYWwoKSB7XG4gICAgdGhpcy5ldmVudEJ1cy5wdWJsaXNoKHRoaXMuY29uZmlnLmNyZWF0ZU1lc3NhZ2VPcGVuRXZlbnROYW1lLCB1bmRlZmluZWQpO1xuICB9XG59XG4iLCI8YmItbWVzc2FnZXMtY3JlYXRlLW1lc3NhZ2UtbW9kYWwtd2lkZ2V0LWFuZ1xuICBbbWF4QXR0YWNobWVudFNpemVdPVwiY29uZmlnLm1heEF0dGFjaG1lbnRTaXplXCJcbiAgW21heFN1YmplY3RMZW5ndGhdPVwiY29uZmlnLm1heFN1YmplY3RMZW5ndGhcIlxuICBbbWF4TWVzc2FnZUxlbmd0aF09XCJjb25maWcubWF4TWVzc2FnZUxlbmd0aFwiXG4gIFttb2RhbEhlYWRlcl09XCJjb25maWcubW9kYWxIZWFkZXJcIlxuICBbaGlkZUNvbXBvc2VCdXR0b25dPVwiY29uZmlnLmhpZGVDb21wb3NlQnV0dG9uXCJcbiAgW2NyZWF0ZU1lc3NhZ2VPcGVuRXZlbnROYW1lXT1cImNvbmZpZy5jcmVhdGVNZXNzYWdlT3BlbkV2ZW50TmFtZVwiXG4gIFtjcmVhdGVNZXNzYWdlQ2xvc2VkRXZlbnROYW1lXT1cImNvbmZpZy5jcmVhdGVNZXNzYWdlQ2xvc2VkRXZlbnROYW1lXCJcbj5cbjwvYmItbWVzc2FnZXMtY3JlYXRlLW1lc3NhZ2UtbW9kYWwtd2lkZ2V0LWFuZz5cbjxiYi1tZXNzYWdlcy1oZWFkaW5nXG4gIFtoZWFkaW5nVGl0bGVdPVwiY29uZmlnLmhlYWRpbmdUaXRsZVwiXG4gIFtoZWFkaW5nVHlwZV09XCJjb25maWcuaGVhZGluZ1R5cGVcIlxuICBbaGVhZGluZ1dyYXBwZXJDbGFzc2VzXT1cImNvbmZpZy5oZWFkaW5nV3JhcHBlckNsYXNzZXNcIlxuICBbYnV0dG9uVGV4dF09XCJjb25maWcuYnV0dG9uVGV4dFwiXG4gIChidXR0b25BY3Rpb24pPVwib3BlbkNvbXBvc2VNb2RhbCgpXCJcbj5cbjwvYmItbWVzc2FnZXMtaGVhZGluZz5cbjxkaXYgY2xhc3M9XCJiYi1tZXNzYWdlcyBiYi1tZXNzYWdlc19fdGFicy13cmFwcGVyXCI+XG4gIDxiYi1tZXNzYWdlcy10YWJzIGRhdGEtcm9sZT1cImNsaWVudC1pbmJveF9fdGFic1wiIFt0YWJzXT1cInRhYnNcIj48L2JiLW1lc3NhZ2VzLXRhYnM+XG48L2Rpdj5cbiJdfQ==