{"version":3,"file":"payments-header.component.js","sourceRoot":"","sources":["../../../../../../../libs/payments-collection-ui-ang/src/lib/components/payments-header/payments-header.component.ts","../../../../../../../libs/payments-collection-ui-ang/src/lib/components/payments-header/payments-header.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Inject,\n  Input,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport {\n  PaymentsHeaderNavigationItem,\n  PaymentsHeaderNavigationItemWithPermission,\n} from './models/payments-header.models';\nimport { Placement } from '@ng-bootstrap/ng-bootstrap';\nimport { CONDITIONS, PropertyResolver } from '@backbase/foundation-ang/web-sdk';\nimport { from, Observable, of } from 'rxjs';\nimport { concatMap, map, reduce } from 'rxjs/operators';\n\n@Component({\n  selector: 'bb-payments-header',\n  templateUrl: './payments-header.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaymentsHeaderComponent implements OnInit {\n  /**\n   * Custom class name\n   */\n  @Input() customClassName = '';\n\n  /**\n   * Heading Classes\n   */\n  @Input() headingClasses = '';\n\n  /**\n   * Heading type (h1-h6)\n   */\n  @Input() headingType = '';\n\n  /**\n   * Heading\n   */\n  @Input() heading = '';\n\n  /**\n   * Show right side button / dropdown\n   */\n  @Input() showNavigation = true;\n\n  /**\n   * Array of representation of the link menu object\n   */\n  @Input() navigationItems: PaymentsHeaderNavigationItem<any>[] = [];\n\n  /**\n   * Flag to denote if the first link from buttons array should be used as default target\n   */\n  @Input() useFirstLinkAsDefault = false;\n\n  /**\n   * Flag to denote if the first link from buttons array should be used as default target\n   */\n  @Input() position: Placement = 'bottom-right';\n\n  /**\n   * Button label. Will be used if useFirstLinkAsDefault = false;\n   */\n  @Input() buttonLabel!: string;\n\n  /**\n   * Button icon. Will be used if useFirstLinkAsDefault = false;\n   */\n  @Input() buttonIcon!: string;\n\n  /**\n   * Color of the button. Default `primary`\n   */\n  @Input() buttonColor = 'primary';\n\n  /**\n   * Size of the button. Allowed values are `sm` or `md`. Default `md`\n   */\n  @Input() buttonSize: 'sm' | 'md' = 'md';\n\n  /**\n   * Event on item click\n   */\n  @Output() navigationAction = new EventEmitter<any>();\n\n  menuItems!: Observable<PaymentsHeaderNavigationItem<any>[]>;\n\n  private hasPermissions(\n    item: PaymentsHeaderNavigationItem<any>\n  ): Observable<PaymentsHeaderNavigationItemWithPermission<any>> {\n    const hasPermissionsPromise = item.canView\n      ? this.conditions.resolveEntitlements(item.canView)\n      : of(true);\n    return from(hasPermissionsPromise).pipe(\n      map((hasPermissions) => ({ hasPermissions, ...item }))\n    );\n  }\n\n  private menuSetup(): Observable<PaymentsHeaderNavigationItem<any>[]> {\n    return from(this.navigationItems).pipe(\n      concatMap(this.hasPermissions.bind(this)),\n      reduce((acc, { hasPermissions, ...item }) => {\n        if (hasPermissions) {\n          acc.push({ ...item });\n        }\n        return acc;\n      }, [] as PaymentsHeaderNavigationItem<any>[])\n    );\n  }\n\n  constructor(\n    @Inject(CONDITIONS) private readonly conditions: PropertyResolver\n  ) {}\n\n  ngOnInit(): void {\n    this.menuItems = this.menuSetup();\n  }\n\n  onClick(value: any) {\n    this.navigationAction.emit(value);\n  }\n}\n","<div class=\"heading-widget bb-heading-widget {{ customClassName }}\">\n  <bb-header-ui\n    headingClasses=\"bb-heading-widget__heading {{ headingClasses }}\"\n    [headingType]=\"headingType\"\n    [heading]=\"heading\"\n  ></bb-header-ui>\n\n  <ng-container *ngIf=\"showNavigation\">\n    <ng-container *ngIf=\"menuItems | async as menu\">\n      <ng-container *ngIf=\"menu.length\">\n        <bb-header-dropdown\n          [menu]=\"menu\"\n          [useFirstLinkAsDefault]=\"useFirstLinkAsDefault\"\n          [position]=\"position\"\n          [buttonLabel]=\"buttonLabel\"\n          [buttonIcon]=\"buttonIcon\"\n          [buttonColor]=\"buttonColor\"\n          [buttonSize]=\"buttonSize\"\n          (navigationAction)=\"onClick($event)\"\n        >\n        </bb-header-dropdown>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</div>\n"]}