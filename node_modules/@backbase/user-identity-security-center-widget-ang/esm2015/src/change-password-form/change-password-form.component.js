import { Component, Directive, EventEmitter, Output, ViewChild } from '@angular/core';
import { Validators } from '@angular/forms';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { of, Subject } from 'rxjs';
import { catchError, distinctUntilChanged, publish, takeUntil, tap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@backbase/user-common";
import * as i3 from "@backbase/ui-ang/header";
import * as i4 from "@backbase/ui-ang/input-password";
import * as i5 from "@backbase/ui-ang/input-validation-message";
import * as i6 from "@backbase/ui-ang/load-button";
import * as i7 from "@angular/common";
import * as i8 from "@backbase/ui-ang/button";
export class ChangePasswordFormComponent {
    constructor(formBuilder, userDataService) {
        this.formBuilder = formBuilder;
        this.userDataService = userDataService;
        this.close = new EventEmitter();
        this.passwordChange = new EventEmitter();
        this.error = new EventEmitter();
        this.hostRef = this;
        this.isSubmitted = false;
        this.componentDestroyed = new Subject();
        this.isSubmitting = false;
        this.isPasswordUnique = () => {
            if (this.passwordForm) {
                const match = this.form.controls.inputNewPassword.value === this.form.controls.currentPassword.value;
                // eslint-disable-next-line no-null/no-null
                return match && this.form.controls.inputNewPassword.value ? { usedPassword: true } : null;
            }
            return false;
        };
        this.passwordMatchesValidator = () => {
            if (this.passwordForm) {
                const match = this.form.controls.inputNewPassword.value === this.form.controls.confirmNewPassword.value;
                // eslint-disable-next-line no-null/no-null
                return match ? null : { mismatched: true };
            }
            return false;
        };
    }
    ngOnDestroy() {
        this.componentDestroyed.next();
        this.componentDestroyed.complete();
    }
    ngOnInit() {
        this.passwordForm = this.formBuilder.group({
            currentPassword: ['', Validators.required],
            inputNewPassword: ['', [Validators.required, this.isPasswordUnique]],
            confirmNewPassword: ['', [Validators.required, this.passwordMatchesValidator]],
        });
        this.form.controls.currentPassword.valueChanges
            .pipe(distinctUntilChanged(), takeUntil(this.componentDestroyed))
            .subscribe(() => {
            this.form.controls.inputNewPassword.updateValueAndValidity();
        });
        this.form.controls.inputNewPassword.valueChanges
            .pipe(distinctUntilChanged(), takeUntil(this.componentDestroyed))
            .subscribe(() => {
            this.form.controls.confirmNewPassword.updateValueAndValidity();
        });
    }
    showErrors(control) {
        return control.invalid && this.isSubmitted;
    }
    closePasswordModal() {
        this.form.reset();
        this.close.emit();
    }
    onSubmit() {
        this.isSubmitted = true;
        if (!this.form.valid) {
            return;
        }
        const currentPassword = this.form.controls.currentPassword.value;
        const newPassword = this.form.controls.confirmNewPassword.value;
        this.isSubmitting = true;
        this.userDataService.changeUserPassword(currentPassword, newPassword).pipe(tap(() => this.passwordChange.emit()), catchError((error) => {
            this.handleError(error);
            return of(undefined);
        }), tap(() => {
            this.isSubmitting = false;
            this.closePasswordModal();
            this.form.enable({ emitEvent: false });
        }), publish()).connect();
    }
    handleError(error) {
        this.error.emit(error);
    }
    get form() {
        if (!this.passwordForm) {
            throw new Error('Form is undefined.');
        }
        return this.passwordForm;
    }
}
ChangePasswordFormComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ChangePasswordFormComponent, deps: [{ token: i1.FormBuilder }, { token: i2.UserDataService }], target: i0.ɵɵFactoryTarget.Component });
ChangePasswordFormComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: ChangePasswordFormComponent, selector: "bb-user-identity-security-center-widget-change-password-form", outputs: { close: "close", passwordChange: "passwordChange", error: "error" }, viewQueries: [{ propertyName: "notificationSuccessTemplate", first: true, predicate: ["notificationSuccess"], descendants: true, static: true }, { propertyName: "notificationFailureTemplate", first: true, predicate: ["notificationFailure"], descendants: true, static: true }, { propertyName: "notificationFailureTemplateLogin", first: true, predicate: ["notificationFailureLogin"], descendants: true }], ngImport: i0, template: "<ng-container bbUserIdentitySecurityCenterChangePasswordForm [bbHostRef]=\"hostRef\">\n</ng-container>  \n  \n<ng-template bbUserIdentitySecurityCenterChangePasswordForm let-hostRef>\n  <div *ngIf=\"hostRef.form\">\n    <div class=\"bb-block bb-block--lg\">\n      <bb-header-ui\n        headingType=\"h3\"\n        heading=\"Change Password\"\n        i18n-heading=\"Header for changing a users password@@bb-user-identity-security-center-widget.bb-header-ui\">\n      </bb-header-ui>\n    </div>\n    <div class=\"bb-block bb-block--lg\"\n      i18n=\"Label for current password description@@bb-user-identity-security-center-widget.current-password-description\">\n      To change your password, we must verify your current one first.\n    </div>\n\n    <form [formGroup]=\"hostRef.form\" (submit)=\"hostRef.onSubmit()\">\n      <div data-role=\"identity-security-center-change-password-form\">\n        <div class=\"bb-block bb-block--xl\">\n          <bb-input-password-ui\n            class=\"bb-form-field bb-form-field--md\"\n            label=\"Current password\"\n            i18n-label=\"Current password input label|Label text for current password input@@bb-user-identity-security-center-widget.current-password-input-label\"\n            formControlName=\"currentPassword\"\n            [autofocus]=\"true\" \n            maxLength=\"255\"\n            data-role=\"identity-security-center-current-password-input\">\n          </bb-input-password-ui>\n          <bb-input-validation-message-ui\n            [showErrors]=\"hostRef.showErrors(hostRef.form.controls.currentPassword)\">\n            <span *ngIf=\"hostRef.form.controls.currentPassword.errors?.required\"\n              data-role=\"identity-security-center-current-password-error\"\n              i18n=\"Error message for blank current password field|Error message requiring password for current password field@@bb-user-identity-security-center-widget.current-password-blank-error-message\">\n              You must enter your current password\n            </span>\n          </bb-input-validation-message-ui>\n        </div>\n\n        <ng-container bbUserIdentitySecurityCenterWidgetPasswordPolicyCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n\n        <div class=\"form-group\">\n          <bb-input-password-ui\n            class=\"bb-form-field bb-form-field--md\"\n            label=\"New password\"\n            formControlName=\"inputNewPassword\"\n            maxLength=\"255\"\n            data-role=\"identity-security-center-new-password-input\"\n            i18n-label=\"New password input label|Label text for new password input@@bb-user-identity-security-center-widget.new-password-input-label\">\n          </bb-input-password-ui>\n          <bb-input-validation-message-ui\n            [showErrors]=\"hostRef.showErrors(hostRef.form.controls.inputNewPassword)\">\n            <span *ngIf=\"hostRef.form.controls.inputNewPassword.errors?.required\"\n              data-role=\"identity-security-center-new-password-error\"\n              i18n=\"Error message for blank new password field|Error message requiring password for new password field@@bb-user-identity-security-center-widget.new-password-blank-error-message\">\n              You must enter a new password\n            </span>\n            <span *ngIf=\"hostRef.form.controls.inputNewPassword.errors?.usedPassword\"\n              data-role=\"identity-security-center-old-password-error\"\n              i18n=\"Error message for current password matching new password field|Error message requiring unique password for new password field@@bb-user-identity-security-center-widget.new-password-unique-error-message\">\n              New password must be different to current password \n            </span>\n          </bb-input-validation-message-ui>\n        </div>\n\n        <div class=\"bb-block bb-block--lg\">\n          <bb-input-password-ui\n            class=\"bb-form-field bb-form-field--md\"\n            label=\"Confirm new password\"\n            formControlName=\"confirmNewPassword\"\n            maxLength=\"255\"\n            data-role=\"identity-security-center-confirm-password-input\"\n            i18n-label=\"Confirm password input label|Label text for confirm password input@@bb-user-identity-security-center-widget.confirm-password-input-label\">\n          </bb-input-password-ui>\n          <bb-input-validation-message-ui\n            [showErrors]=\"hostRef.showErrors(hostRef.form.controls.confirmNewPassword)\">\n            <span *ngIf=\"hostRef.form.controls.confirmNewPassword.errors?.mismatched\"\n              data-role=\"identity-security-center-confirm-password-mismatch-error\"\n              i18n=\"Error message for mismatch passwords|Error message for mismatch passwords for confirm new password field@@bb-user-identity-security-center-widget.confirm-password-mismatch-error-message\">\n              Passwords don't match\n            </span>\n            <span *ngIf=\"hostRef.form.controls.confirmNewPassword.errors?.required\"\n              data-role=\"identity-security-center-confirm-password-blank-error\"\n              i18n=\"Error message for blank password|Error message for blank password for confirm new password field@@bb-user-identity-security-center-widget.confirm-password-blank-error-message\">\n              You must re-type your new password\n            </span>\n          </bb-input-validation-message-ui> \n        </div>\n      </div>\n      <div class=\"bb-button-bar--reverse\">\n        <bb-load-button-ui\n          class=\"bb-button-bar__button\"\n          color=\"primary\"\n          button-size=\"md\" \n          data-role=\"password-form-change-password-button\"\n          type=\"submit\"\n          i18n=\"Change password button|Text for change password button@@bb-user-identity-security-center-widget.change-password-button-text\"\n          [isLoading]=\"hostRef.isSubmitting\">\n          Change Password\n        </bb-load-button-ui>\n        <button bbButton\n          class=\"bb-button-bar__button\"\n          color=\"secondary\"\n          button-size=\"md\" \n          data-role=\"identity-security-center-cancel-button\"\n          (click)=\"hostRef.closePasswordModal()\" \n          (mousedown)=\"hostRef.closePasswordModal()\" \n          type=\"button\"\n          i18n=\"Cancel password button|Text for cancel password button@@bb-user-identity-security-center-widget.cancel-password-button-text\">\n          Cancel\n        </button>\n      </div>\n    </form> \n  </div>\n</ng-template>\n\n\n<ng-template bbUserIdentitySecurityCenterWidgetPasswordPolicyCustomizable let-hostRef>\n  <div class=\"bb-block bb-block--lg\">\n    <div\n      class=\"bb-block bb-block--lg\"\n      i18n=\"Text for password form description@@bb-user-identity-security-center-widget.password-form-text\">\n      Your new password must contain:\n    </div>\n    <ul>\n      <li\n        i18n=\"Text for minimum length password policy bullet point@bb-user-identity-security-center-widget.password-form-policy-length\">\n        A minimum of 6 characters\n      </li>\n      <li\n        i18n=\"Text for uppercase password policy bullet point@bb-user-identity-security-center-widget.password-form-policy-uppercase\">\n        At least one UPPERCASE letter\n      </li>\n      <li\n        i18n=\"Text for lowercase password policy bullet point@bb-user-identity-security-center-widget.password-form-policy-lowecase\">\n        At least one lowercase letter\n      </li>\n    </ul>\n  </div>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i3.HeaderComponent; }), selector: "bb-header-ui", inputs: ["headingClasses", "headingType", "heading"] }, { type: i0.forwardRef(function () { return i4.InputPasswordComponent; }), selector: "bb-input-password-ui", inputs: ["placeholder", "maxLength", "minLength", "readonly", "autocomplete", "showVisibilityControl", "showPassword", "visibilityControlLabel", "ariaLabel"], outputs: ["toggleVisibility"] }, { type: i0.forwardRef(function () { return i5.InputValidationMessageComponent; }), selector: "bb-input-validation-message-ui", inputs: ["showErrors", "messageId"] }, { type: i0.forwardRef(function () { return i6.LoadButtonComponent; }), selector: "bb-load-button-ui", inputs: ["isLoading", "from", "size", "circle", "totalCount"], outputs: ["paramChange"] }], directives: [{ type: i0.forwardRef(function () { return UserIdentitySecurityCenterPasswordFormCustomizableDirective; }), selector: "[bbUserIdentitySecurityCenterChangePasswordForm]" }, { type: i0.forwardRef(function () { return i7.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i1.ɵNgNoValidate; }), selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i0.forwardRef(function () { return i1.NgControlStatusGroup; }), selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i0.forwardRef(function () { return i1.FormGroupDirective; }), selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i0.forwardRef(function () { return i1.NgControlStatus; }), selector: "[formControlName],[ngModel],[formControl]" }, { type: i0.forwardRef(function () { return i1.FormControlName; }), selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i0.forwardRef(function () { return UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective; }), selector: "[bbUserIdentitySecurityCenterWidgetPasswordPolicyCustomizable]" }, { type: i0.forwardRef(function () { return i8.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ChangePasswordFormComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-user-identity-security-center-widget-change-password-form',
                    templateUrl: './change-password-form.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.FormBuilder }, { type: i2.UserDataService }]; }, propDecorators: { notificationSuccessTemplate: [{
                type: ViewChild,
                args: ['notificationSuccess', { static: true }]
            }], notificationFailureTemplate: [{
                type: ViewChild,
                args: ['notificationFailure', { static: true }]
            }], notificationFailureTemplateLogin: [{
                type: ViewChild,
                args: ['notificationFailureLogin']
            }], close: [{
                type: Output
            }], passwordChange: [{
                type: Output
            }], error: [{
                type: Output
            }] } });
export class UserIdentitySecurityCenterPasswordFormCustomizableDirective extends BbTemplate {
}
UserIdentitySecurityCenterPasswordFormCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: UserIdentitySecurityCenterPasswordFormCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
UserIdentitySecurityCenterPasswordFormCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.15", type: UserIdentitySecurityCenterPasswordFormCustomizableDirective, selector: "[bbUserIdentitySecurityCenterChangePasswordForm]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: UserIdentitySecurityCenterPasswordFormCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbUserIdentitySecurityCenterChangePasswordForm]',
                }]
        }] });
export class UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective extends BbTemplate {
}
UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.15", type: UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective, selector: "[bbUserIdentitySecurityCenterWidgetPasswordPolicyCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: UserIdentitySecurityCenterPasswordFormPasswordPolicyCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbUserIdentitySecurityCenterWidgetPasswordPolicyCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhbmdlLXBhc3N3b3JkLWZvcm0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy91c2VyLWlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci13aWRnZXQvc3JjL2NoYW5nZS1wYXNzd29yZC1mb3JtL2NoYW5nZS1wYXNzd29yZC1mb3JtLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0L3NyYy9jaGFuZ2UtcGFzc3dvcmQtZm9ybS9jaGFuZ2UtcGFzc3dvcmQtZm9ybS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQXFCLE1BQU0sRUFBZSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdEgsT0FBTyxFQUEyQyxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFFM0QsT0FBTyxFQUF5QixFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzFELE9BQU8sRUFBRSxVQUFVLEVBQUUsb0JBQW9CLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7OztBQU0zRixNQUFNLE9BQU8sMkJBQTJCO0lBb0J0QyxZQUE2QixXQUF3QixFQUFtQixlQUFnQztRQUEzRSxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUFtQixvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFWOUYsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDakMsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO1FBQzFDLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBcUIsQ0FBQztRQUUvQyxZQUFPLEdBQUcs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J0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IENvbXBvbmVudCwgRGlyZWN0aXZlLCBFdmVudEVtaXR0ZXIsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgRm9ybUJ1aWxkZXIsIEZvcm1Hcm91cCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEJiVGVtcGxhdGUgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvY29yZSc7XG5pbXBvcnQgeyBVc2VyRGF0YVNlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvdXNlci1jb21tb24nO1xuaW1wb3J0IHsgQ29ubmVjdGFibGVPYnNlcnZhYmxlLCBvZiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgZGlzdGluY3RVbnRpbENoYW5nZWQsIHB1Ymxpc2gsIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi11c2VyLWlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci13aWRnZXQtY2hhbmdlLXBhc3N3b3JkLWZvcm0nLFxuICB0ZW1wbGF0ZVVybDogJy4vY2hhbmdlLXBhc3N3b3JkLWZvcm0uY29tcG9uZW50Lmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBDaGFuZ2VQYXNzd29yZEZvcm1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIC8qKiBAZGVwcmVjYXRlZCAqL1xuICBAVmlld0NoaWxkKCdub3RpZmljYXRpb25TdWNjZXNzJywgeyBzdGF0aWM6IHRydWUgfSkgbm90aWZpY2F0aW9uU3VjY2Vzc1RlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+IHwgdW5kZWZpbmVkO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCAqL1xuICBAVmlld0NoaWxkKCdub3RpZmljYXRpb25GYWlsdXJlJywgeyBzdGF0aWM6IHRydWUgfSkgbm90aWZpY2F0aW9uRmFpbHVyZVRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+IHwgdW5kZWZpbmVkO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCAqL1xuICBAVmlld0NoaWxkKCdub3RpZmljYXRpb25GYWlsdXJlTG9naW4nKSBub3RpZmljYXRpb25GYWlsdXJlVGVtcGxhdGVMb2dpbjogVGVtcGxhdGVSZWY8YW55PiB8IHVuZGVmaW5lZDtcblxuICBAT3V0cHV0KCkgY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIEBPdXRwdXQoKSBwYXNzd29yZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgQE91dHB1dCgpIGVycm9yID0gbmV3IEV2ZW50RW1pdHRlcjxIdHRwRXJyb3JSZXNwb25zZT4oKTtcblxuICByZWFkb25seSBob3N0UmVmID0gdGhpcztcbiAgcHJpdmF0ZSBpc1N1Ym1pdHRlZCA9IGZhbHNlO1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbXBvbmVudERlc3Ryb3llZCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG4gIHBhc3N3b3JkRm9ybTogRm9ybUdyb3VwIHwgdW5kZWZpbmVkO1xuICBpc1N1Ym1pdHRpbmcgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGZvcm1CdWlsZGVyOiBGb3JtQnVpbGRlciwgcHJpdmF0ZSByZWFkb25seSB1c2VyRGF0YVNlcnZpY2U6IFVzZXJEYXRhU2VydmljZSkge31cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbXBvbmVudERlc3Ryb3llZC5uZXh0KCk7XG4gICAgdGhpcy5jb21wb25lbnREZXN0cm95ZWQuY29tcGxldGUoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMucGFzc3dvcmRGb3JtID0gdGhpcy5mb3JtQnVpbGRlci5ncm91cCh7XG4gICAgICBjdXJyZW50UGFzc3dvcmQ6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXG4gICAgICBpbnB1dE5ld1Bhc3N3b3JkOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCB0aGlzLmlzUGFzc3dvcmRVbmlxdWVdXSxcbiAgICAgIGNvbmZpcm1OZXdQYXNzd29yZDogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgdGhpcy5wYXNzd29yZE1hdGNoZXNWYWxpZGF0b3JdXSxcbiAgICB9KTtcblxuICAgIHRoaXMuZm9ybS5jb250cm9scy5jdXJyZW50UGFzc3dvcmQudmFsdWVDaGFuZ2VzXG4gICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLCB0YWtlVW50aWwodGhpcy5jb21wb25lbnREZXN0cm95ZWQpKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuZm9ybS5jb250cm9scy5pbnB1dE5ld1Bhc3N3b3JkLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5mb3JtLmNvbnRyb2xzLmlucHV0TmV3UGFzc3dvcmQudmFsdWVDaGFuZ2VzXG4gICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLCB0YWtlVW50aWwodGhpcy5jb21wb25lbnREZXN0cm95ZWQpKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuZm9ybS5jb250cm9scy5jb25maXJtTmV3UGFzc3dvcmQudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgICAgfSk7XG4gIH1cblxuICBzaG93RXJyb3JzKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCkge1xuICAgIHJldHVybiBjb250cm9sLmludmFsaWQgJiYgdGhpcy5pc1N1Ym1pdHRlZDtcbiAgfVxuXG4gIGNsb3NlUGFzc3dvcmRNb2RhbCgpIHtcbiAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgICB0aGlzLmNsb3NlLmVtaXQoKTtcbiAgfVxuXG4gIG9uU3VibWl0KCkge1xuICAgIHRoaXMuaXNTdWJtaXR0ZWQgPSB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLmZvcm0udmFsaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFBhc3N3b3JkID0gdGhpcy5mb3JtLmNvbnRyb2xzLmN1cnJlbnRQYXNzd29yZC52YWx1ZTtcbiAgICBjb25zdCBuZXdQYXNzd29yZCA9IHRoaXMuZm9ybS5jb250cm9scy5jb25maXJtTmV3UGFzc3dvcmQudmFsdWU7XG5cbiAgICB0aGlzLmlzU3VibWl0dGluZyA9IHRydWU7XG5cbiAgICAoXG4gICAgICB0aGlzLnVzZXJEYXRhU2VydmljZS5jaGFuZ2VVc2VyUGFzc3dvcmQoY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCkucGlwZShcbiAgICAgICAgdGFwKCgpID0+IHRoaXMucGFzc3dvcmRDaGFuZ2UuZW1pdCgpKSxcbiAgICAgICAgY2F0Y2hFcnJvcigoZXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcblxuICAgICAgICAgIHJldHVybiBvZih1bmRlZmluZWQpO1xuICAgICAgICB9KSxcbiAgICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmlzU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuY2xvc2VQYXNzd29yZE1vZGFsKCk7XG4gICAgICAgICAgdGhpcy5mb3JtLmVuYWJsZSh7IGVtaXRFdmVudDogZmFsc2UgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBwdWJsaXNoKCksXG4gICAgICApIGFzIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8dW5kZWZpbmVkPj5cbiAgICApLmNvbm5lY3QoKTtcbiAgfVxuXG4gIGhhbmRsZUVycm9yKGVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkge1xuICAgIHRoaXMuZXJyb3IuZW1pdChlcnJvcik7XG4gIH1cblxuICBnZXQgZm9ybSgpIHtcbiAgICBpZiAoIXRoaXMucGFzc3dvcmRGb3JtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gaXMgdW5kZWZpbmVkLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhc3N3b3JkRm9ybTtcbiAgfVxuXG4gIHJlYWRvbmx5IGlzUGFzc3dvcmRVbmlxdWUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucGFzc3dvcmRGb3JtKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IHRoaXMuZm9ybS5jb250cm9scy5pbnB1dE5ld1Bhc3N3b3JkLnZhbHVlID09PSB0aGlzLmZvcm0uY29udHJvbHMuY3VycmVudFBhc3N3b3JkLnZhbHVlO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbnVsbC9uby1udWxsXG4gICAgICByZXR1cm4gbWF0Y2ggJiYgdGhpcy5mb3JtLmNvbnRyb2xzLmlucHV0TmV3UGFzc3dvcmQudmFsdWUgPyB7IHVzZWRQYXNzd29yZDogdHJ1ZSB9IDogbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcmVhZG9ubHkgcGFzc3dvcmRNYXRjaGVzVmFsaWRhdG9yID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnBhc3N3b3JkRm9ybSkge1xuICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmZvcm0uY29udHJvbHMuaW5wdXROZXdQYXNzd29yZC52YWx1ZSA9PT0gdGhpcy5mb3JtLmNvbnRyb2xzLmNvbmZpcm1OZXdQYXNzd29yZC52YWx1ZTtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW51bGwvbm8tbnVsbFxuICAgICAgcmV0dXJuIG1hdGNoID8gbnVsbCA6IHsgbWlzbWF0Y2hlZDogdHJ1ZSB9O1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn1cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiVXNlcklkZW50aXR5U2VjdXJpdHlDZW50ZXJDaGFuZ2VQYXNzd29yZEZvcm1dJyxcbn0pXG5leHBvcnQgY2xhc3MgVXNlcklkZW50aXR5U2VjdXJpdHlDZW50ZXJQYXNzd29yZEZvcm1DdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBDaGFuZ2VQYXNzd29yZEZvcm1Db21wb25lbnQsXG4gIHVuZGVmaW5lZFxuPiB7fVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJVc2VySWRlbnRpdHlTZWN1cml0eUNlbnRlcldpZGdldFBhc3N3b3JkUG9saWN5Q3VzdG9taXphYmxlXScsXG59KVxuZXhwb3J0IGNsYXNzIFVzZXJJZGVudGl0eVNlY3VyaXR5Q2VudGVyUGFzc3dvcmRGb3JtUGFzc3dvcmRQb2xpY3lDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBDaGFuZ2VQYXNzd29yZEZvcm1Db21wb25lbnQsXG4gIHVuZGVmaW5lZFxuPiB7fVxuIiwiPG5nLWNvbnRhaW5lciBiYlVzZXJJZGVudGl0eVNlY3VyaXR5Q2VudGVyQ2hhbmdlUGFzc3dvcmRGb3JtIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiPlxuPC9uZy1jb250YWluZXI+ICBcbiAgXG48bmctdGVtcGxhdGUgYmJVc2VySWRlbnRpdHlTZWN1cml0eUNlbnRlckNoYW5nZVBhc3N3b3JkRm9ybSBsZXQtaG9zdFJlZj5cbiAgPGRpdiAqbmdJZj1cImhvc3RSZWYuZm9ybVwiPlxuICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0tbGdcIj5cbiAgICAgIDxiYi1oZWFkZXItdWlcbiAgICAgICAgaGVhZGluZ1R5cGU9XCJoM1wiXG4gICAgICAgIGhlYWRpbmc9XCJDaGFuZ2UgUGFzc3dvcmRcIlxuICAgICAgICBpMThuLWhlYWRpbmc9XCJIZWFkZXIgZm9yIGNoYW5naW5nIGEgdXNlcnMgcGFzc3dvcmRAQGJiLXVzZXItaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLXdpZGdldC5iYi1oZWFkZXItdWlcIj5cbiAgICAgIDwvYmItaGVhZGVyLXVpPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0tbGdcIlxuICAgICAgaTE4bj1cIkxhYmVsIGZvciBjdXJyZW50IHBhc3N3b3JkIGRlc2NyaXB0aW9uQEBiYi11c2VyLWlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci13aWRnZXQuY3VycmVudC1wYXNzd29yZC1kZXNjcmlwdGlvblwiPlxuICAgICAgVG8gY2hhbmdlIHlvdXIgcGFzc3dvcmQsIHdlIG11c3QgdmVyaWZ5IHlvdXIgY3VycmVudCBvbmUgZmlyc3QuXG4gICAgPC9kaXY+XG5cbiAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cImhvc3RSZWYuZm9ybVwiIChzdWJtaXQpPVwiaG9zdFJlZi5vblN1Ym1pdCgpXCI+XG4gICAgICA8ZGl2IGRhdGEtcm9sZT1cImlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci1jaGFuZ2UtcGFzc3dvcmQtZm9ybVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLXhsXCI+XG4gICAgICAgICAgPGJiLWlucHV0LXBhc3N3b3JkLXVpXG4gICAgICAgICAgICBjbGFzcz1cImJiLWZvcm0tZmllbGQgYmItZm9ybS1maWVsZC0tbWRcIlxuICAgICAgICAgICAgbGFiZWw9XCJDdXJyZW50IHBhc3N3b3JkXCJcbiAgICAgICAgICAgIGkxOG4tbGFiZWw9XCJDdXJyZW50IHBhc3N3b3JkIGlucHV0IGxhYmVsfExhYmVsIHRleHQgZm9yIGN1cnJlbnQgcGFzc3dvcmQgaW5wdXRAQGJiLXVzZXItaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLXdpZGdldC5jdXJyZW50LXBhc3N3b3JkLWlucHV0LWxhYmVsXCJcbiAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImN1cnJlbnRQYXNzd29yZFwiXG4gICAgICAgICAgICBbYXV0b2ZvY3VzXT1cInRydWVcIiBcbiAgICAgICAgICAgIG1heExlbmd0aD1cIjI1NVwiXG4gICAgICAgICAgICBkYXRhLXJvbGU9XCJpZGVudGl0eS1zZWN1cml0eS1jZW50ZXItY3VycmVudC1wYXNzd29yZC1pbnB1dFwiPlxuICAgICAgICAgIDwvYmItaW5wdXQtcGFzc3dvcmQtdWk+XG4gICAgICAgICAgPGJiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aVxuICAgICAgICAgICAgW3Nob3dFcnJvcnNdPVwiaG9zdFJlZi5zaG93RXJyb3JzKGhvc3RSZWYuZm9ybS5jb250cm9scy5jdXJyZW50UGFzc3dvcmQpXCI+XG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cImhvc3RSZWYuZm9ybS5jb250cm9scy5jdXJyZW50UGFzc3dvcmQuZXJyb3JzPy5yZXF1aXJlZFwiXG4gICAgICAgICAgICAgIGRhdGEtcm9sZT1cImlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci1jdXJyZW50LXBhc3N3b3JkLWVycm9yXCJcbiAgICAgICAgICAgICAgaTE4bj1cIkVycm9yIG1lc3NhZ2UgZm9yIGJsYW5rIGN1cnJlbnQgcGFzc3dvcmQgZmllbGR8RXJyb3IgbWVzc2FnZSByZXF1aXJpbmcgcGFzc3dvcmQgZm9yIGN1cnJlbnQgcGFzc3dvcmQgZmllbGRAQGJiLXVzZXItaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLXdpZGdldC5jdXJyZW50LXBhc3N3b3JkLWJsYW5rLWVycm9yLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgWW91IG11c3QgZW50ZXIgeW91ciBjdXJyZW50IHBhc3N3b3JkXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9iYi1pbnB1dC12YWxpZGF0aW9uLW1lc3NhZ2UtdWk+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxuZy1jb250YWluZXIgYmJVc2VySWRlbnRpdHlTZWN1cml0eUNlbnRlcldpZGdldFBhc3N3b3JkUG9saWN5Q3VzdG9taXphYmxlIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiPjwvbmctY29udGFpbmVyPlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgPGJiLWlucHV0LXBhc3N3b3JkLXVpXG4gICAgICAgICAgICBjbGFzcz1cImJiLWZvcm0tZmllbGQgYmItZm9ybS1maWVsZC0tbWRcIlxuICAgICAgICAgICAgbGFiZWw9XCJOZXcgcGFzc3dvcmRcIlxuICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiaW5wdXROZXdQYXNzd29yZFwiXG4gICAgICAgICAgICBtYXhMZW5ndGg9XCIyNTVcIlxuICAgICAgICAgICAgZGF0YS1yb2xlPVwiaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLW5ldy1wYXNzd29yZC1pbnB1dFwiXG4gICAgICAgICAgICBpMThuLWxhYmVsPVwiTmV3IHBhc3N3b3JkIGlucHV0IGxhYmVsfExhYmVsIHRleHQgZm9yIG5ldyBwYXNzd29yZCBpbnB1dEBAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0Lm5ldy1wYXNzd29yZC1pbnB1dC1sYWJlbFwiPlxuICAgICAgICAgIDwvYmItaW5wdXQtcGFzc3dvcmQtdWk+XG4gICAgICAgICAgPGJiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aVxuICAgICAgICAgICAgW3Nob3dFcnJvcnNdPVwiaG9zdFJlZi5zaG93RXJyb3JzKGhvc3RSZWYuZm9ybS5jb250cm9scy5pbnB1dE5ld1Bhc3N3b3JkKVwiPlxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJob3N0UmVmLmZvcm0uY29udHJvbHMuaW5wdXROZXdQYXNzd29yZC5lcnJvcnM/LnJlcXVpcmVkXCJcbiAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLW5ldy1wYXNzd29yZC1lcnJvclwiXG4gICAgICAgICAgICAgIGkxOG49XCJFcnJvciBtZXNzYWdlIGZvciBibGFuayBuZXcgcGFzc3dvcmQgZmllbGR8RXJyb3IgbWVzc2FnZSByZXF1aXJpbmcgcGFzc3dvcmQgZm9yIG5ldyBwYXNzd29yZCBmaWVsZEBAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0Lm5ldy1wYXNzd29yZC1ibGFuay1lcnJvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgIFlvdSBtdXN0IGVudGVyIGEgbmV3IHBhc3N3b3JkXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cImhvc3RSZWYuZm9ybS5jb250cm9scy5pbnB1dE5ld1Bhc3N3b3JkLmVycm9ycz8udXNlZFBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLW9sZC1wYXNzd29yZC1lcnJvclwiXG4gICAgICAgICAgICAgIGkxOG49XCJFcnJvciBtZXNzYWdlIGZvciBjdXJyZW50IHBhc3N3b3JkIG1hdGNoaW5nIG5ldyBwYXNzd29yZCBmaWVsZHxFcnJvciBtZXNzYWdlIHJlcXVpcmluZyB1bmlxdWUgcGFzc3dvcmQgZm9yIG5ldyBwYXNzd29yZCBmaWVsZEBAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0Lm5ldy1wYXNzd29yZC11bmlxdWUtZXJyb3ItbWVzc2FnZVwiPlxuICAgICAgICAgICAgICBOZXcgcGFzc3dvcmQgbXVzdCBiZSBkaWZmZXJlbnQgdG8gY3VycmVudCBwYXNzd29yZCBcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2JiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aT5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1sZ1wiPlxuICAgICAgICAgIDxiYi1pbnB1dC1wYXNzd29yZC11aVxuICAgICAgICAgICAgY2xhc3M9XCJiYi1mb3JtLWZpZWxkIGJiLWZvcm0tZmllbGQtLW1kXCJcbiAgICAgICAgICAgIGxhYmVsPVwiQ29uZmlybSBuZXcgcGFzc3dvcmRcIlxuICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiY29uZmlybU5ld1Bhc3N3b3JkXCJcbiAgICAgICAgICAgIG1heExlbmd0aD1cIjI1NVwiXG4gICAgICAgICAgICBkYXRhLXJvbGU9XCJpZGVudGl0eS1zZWN1cml0eS1jZW50ZXItY29uZmlybS1wYXNzd29yZC1pbnB1dFwiXG4gICAgICAgICAgICBpMThuLWxhYmVsPVwiQ29uZmlybSBwYXNzd29yZCBpbnB1dCBsYWJlbHxMYWJlbCB0ZXh0IGZvciBjb25maXJtIHBhc3N3b3JkIGlucHV0QEBiYi11c2VyLWlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci13aWRnZXQuY29uZmlybS1wYXNzd29yZC1pbnB1dC1sYWJlbFwiPlxuICAgICAgICAgIDwvYmItaW5wdXQtcGFzc3dvcmQtdWk+XG4gICAgICAgICAgPGJiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aVxuICAgICAgICAgICAgW3Nob3dFcnJvcnNdPVwiaG9zdFJlZi5zaG93RXJyb3JzKGhvc3RSZWYuZm9ybS5jb250cm9scy5jb25maXJtTmV3UGFzc3dvcmQpXCI+XG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cImhvc3RSZWYuZm9ybS5jb250cm9scy5jb25maXJtTmV3UGFzc3dvcmQuZXJyb3JzPy5taXNtYXRjaGVkXCJcbiAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLWNvbmZpcm0tcGFzc3dvcmQtbWlzbWF0Y2gtZXJyb3JcIlxuICAgICAgICAgICAgICBpMThuPVwiRXJyb3IgbWVzc2FnZSBmb3IgbWlzbWF0Y2ggcGFzc3dvcmRzfEVycm9yIG1lc3NhZ2UgZm9yIG1pc21hdGNoIHBhc3N3b3JkcyBmb3IgY29uZmlybSBuZXcgcGFzc3dvcmQgZmllbGRAQGJiLXVzZXItaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLXdpZGdldC5jb25maXJtLXBhc3N3b3JkLW1pc21hdGNoLWVycm9yLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgUGFzc3dvcmRzIGRvbid0IG1hdGNoXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiAqbmdJZj1cImhvc3RSZWYuZm9ybS5jb250cm9scy5jb25maXJtTmV3UGFzc3dvcmQuZXJyb3JzPy5yZXF1aXJlZFwiXG4gICAgICAgICAgICAgIGRhdGEtcm9sZT1cImlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci1jb25maXJtLXBhc3N3b3JkLWJsYW5rLWVycm9yXCJcbiAgICAgICAgICAgICAgaTE4bj1cIkVycm9yIG1lc3NhZ2UgZm9yIGJsYW5rIHBhc3N3b3JkfEVycm9yIG1lc3NhZ2UgZm9yIGJsYW5rIHBhc3N3b3JkIGZvciBjb25maXJtIG5ldyBwYXNzd29yZCBmaWVsZEBAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0LmNvbmZpcm0tcGFzc3dvcmQtYmxhbmstZXJyb3ItbWVzc2FnZVwiPlxuICAgICAgICAgICAgICBZb3UgbXVzdCByZS10eXBlIHlvdXIgbmV3IHBhc3N3b3JkXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9iYi1pbnB1dC12YWxpZGF0aW9uLW1lc3NhZ2UtdWk+IFxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImJiLWJ1dHRvbi1iYXItLXJldmVyc2VcIj5cbiAgICAgICAgPGJiLWxvYWQtYnV0dG9uLXVpXG4gICAgICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgYnV0dG9uLXNpemU9XCJtZFwiIFxuICAgICAgICAgIGRhdGEtcm9sZT1cInBhc3N3b3JkLWZvcm0tY2hhbmdlLXBhc3N3b3JkLWJ1dHRvblwiXG4gICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgaTE4bj1cIkNoYW5nZSBwYXNzd29yZCBidXR0b258VGV4dCBmb3IgY2hhbmdlIHBhc3N3b3JkIGJ1dHRvbkBAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0LmNoYW5nZS1wYXNzd29yZC1idXR0b24tdGV4dFwiXG4gICAgICAgICAgW2lzTG9hZGluZ109XCJob3N0UmVmLmlzU3VibWl0dGluZ1wiPlxuICAgICAgICAgIENoYW5nZSBQYXNzd29yZFxuICAgICAgICA8L2JiLWxvYWQtYnV0dG9uLXVpPlxuICAgICAgICA8YnV0dG9uIGJiQnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgICAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICBidXR0b24tc2l6ZT1cIm1kXCIgXG4gICAgICAgICAgZGF0YS1yb2xlPVwiaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLWNhbmNlbC1idXR0b25cIlxuICAgICAgICAgIChjbGljayk9XCJob3N0UmVmLmNsb3NlUGFzc3dvcmRNb2RhbCgpXCIgXG4gICAgICAgICAgKG1vdXNlZG93bik9XCJob3N0UmVmLmNsb3NlUGFzc3dvcmRNb2RhbCgpXCIgXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgaTE4bj1cIkNhbmNlbCBwYXNzd29yZCBidXR0b258VGV4dCBmb3IgY2FuY2VsIHBhc3N3b3JkIGJ1dHRvbkBAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0LmNhbmNlbC1wYXNzd29yZC1idXR0b24tdGV4dFwiPlxuICAgICAgICAgIENhbmNlbFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZm9ybT4gXG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuXG48bmctdGVtcGxhdGUgYmJVc2VySWRlbnRpdHlTZWN1cml0eUNlbnRlcldpZGdldFBhc3N3b3JkUG9saWN5Q3VzdG9taXphYmxlIGxldC1ob3N0UmVmPlxuICA8ZGl2IGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLWxnXCI+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0tbGdcIlxuICAgICAgaTE4bj1cIlRleHQgZm9yIHBhc3N3b3JkIGZvcm0gZGVzY3JpcHRpb25AQGJiLXVzZXItaWRlbnRpdHktc2VjdXJpdHktY2VudGVyLXdpZGdldC5wYXNzd29yZC1mb3JtLXRleHRcIj5cbiAgICAgIFlvdXIgbmV3IHBhc3N3b3JkIG11c3QgY29udGFpbjpcbiAgICA8L2Rpdj5cbiAgICA8dWw+XG4gICAgICA8bGlcbiAgICAgICAgaTE4bj1cIlRleHQgZm9yIG1pbmltdW0gbGVuZ3RoIHBhc3N3b3JkIHBvbGljeSBidWxsZXQgcG9pbnRAYmItdXNlci1pZGVudGl0eS1zZWN1cml0eS1jZW50ZXItd2lkZ2V0LnBhc3N3b3JkLWZvcm0tcG9saWN5LWxlbmd0aFwiPlxuICAgICAgICBBIG1pbmltdW0gb2YgNiBjaGFyYWN0ZXJzXG4gICAgICA8L2xpPlxuICAgICAgPGxpXG4gICAgICAgIGkxOG49XCJUZXh0IGZvciB1cHBlcmNhc2UgcGFzc3dvcmQgcG9saWN5IGJ1bGxldCBwb2ludEBiYi11c2VyLWlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci13aWRnZXQucGFzc3dvcmQtZm9ybS1wb2xpY3ktdXBwZXJjYXNlXCI+XG4gICAgICAgIEF0IGxlYXN0IG9uZSBVUFBFUkNBU0UgbGV0dGVyXG4gICAgICA8L2xpPlxuICAgICAgPGxpXG4gICAgICAgIGkxOG49XCJUZXh0IGZvciBsb3dlcmNhc2UgcGFzc3dvcmQgcG9saWN5IGJ1bGxldCBwb2ludEBiYi11c2VyLWlkZW50aXR5LXNlY3VyaXR5LWNlbnRlci13aWRnZXQucGFzc3dvcmQtZm9ybS1wb2xpY3ktbG93ZWNhc2VcIj5cbiAgICAgICAgQXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXJcbiAgICAgIDwvbGk+XG4gICAgPC91bD5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuIl19