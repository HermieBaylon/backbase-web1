import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpParameterCodec } from '../encoder';
import { ACCESS_CONTROL_BASE_PATH } from '../variables';
import { AccessControlConfiguration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
export class ServiceAgreementHttpService {
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = '/access-control';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new AccessControlConfiguration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                value.forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, value.toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    getServiceAgreement(requestParameters, observe = 'body', reportProgress = false, options) {
        const _creatorId = requestParameters["creatorId"];
        if (_creatorId === null || _creatorId === undefined) {
            throw new Error('Required parameter creatorId was null or undefined when calling getServiceAgreement.');
        }
        const _cursor = requestParameters["cursor"];
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _query = requestParameters["query"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_creatorId !== undefined && _creatorId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creatorId, 'creatorId');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementUrl(requestParameters) {
        const _creatorId = requestParameters["creatorId"];
        if (_creatorId === null || _creatorId === undefined) {
            throw new Error('Required parameter creatorId was null or undefined when calling getServiceAgreement.');
        }
        const _cursor = requestParameters["cursor"];
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _query = requestParameters["query"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_creatorId !== undefined && _creatorId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creatorId, 'creatorId');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements${queryString ? `?${queryString}` : ''}`;
    }
    getServiceAgreementAdmins(requestParameters, observe = 'body', reportProgress = false, options) {
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        if (_serviceAgreementId === null || _serviceAgreementId === undefined) {
            throw new Error('Required parameter serviceAgreementId was null or undefined when calling getServiceAgreementAdmins.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_serviceAgreementId))}/admins`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementAdminsUrl(requestParameters) {
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        if (_serviceAgreementId === null || _serviceAgreementId === undefined) {
            throw new Error('Required parameter serviceAgreementId was null or undefined when calling getServiceAgreementAdmins.');
        }
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_serviceAgreementId))}/admins`;
    }
    getServiceAgreementContext(observe = 'body', reportProgress = false, options) {
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementContextUrl() {
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context`;
    }
    getServiceAgreementItem(requestParameters, observe = 'body', reportProgress = false, options) {
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        if (_serviceAgreementId === null || _serviceAgreementId === undefined) {
            throw new Error('Required parameter serviceAgreementId was null or undefined when calling getServiceAgreementItem.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_serviceAgreementId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementItemUrl(requestParameters) {
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        if (_serviceAgreementId === null || _serviceAgreementId === undefined) {
            throw new Error('Required parameter serviceAgreementId was null or undefined when calling getServiceAgreementItem.');
        }
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_serviceAgreementId))}`;
    }
    getServiceAgreementUsers(requestParameters, observe = 'body', reportProgress = false, options) {
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _cursor = requestParameters["cursor"];
        const _query = requestParameters["query"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementUsersUrl(requestParameters) {
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _cursor = requestParameters["cursor"];
        const _query = requestParameters["query"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users${queryString ? `?${queryString}` : ''}`;
    }
    getUnexposedUsers(requestParameters, observe = 'body', reportProgress = false, options) {
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users/unexposed`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getUnexposedUsersUrl(requestParameters) {
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users/unexposed${queryString ? `?${queryString}` : ''}`;
    }
    postServiceAgreement(requestParameters, observe = 'body', reportProgress = false, options) {
        const _serviceAgreementPost = requestParameters["serviceAgreementPost"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements`, _serviceAgreementPost, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postServiceAgreementUrl(requestParameters) {
        const _serviceAgreementPost = requestParameters["serviceAgreementPost"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements`;
    }
    postUsersAdd(requestParameters, observe = 'body', reportProgress = false, options) {
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users/add`, _usersForServiceAgreement, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postUsersAddUrl(requestParameters) {
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users/add`;
    }
    postUsersRemove(requestParameters, observe = 'body', reportProgress = false, options) {
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users/remove`, _usersForServiceAgreement, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postUsersRemoveUrl(requestParameters) {
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/context/users/remove`;
    }
    putAdmins(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling putAdmins.');
        }
        const _updateAdmins = requestParameters["updateAdmins"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_id))}/admins`, _updateAdmins, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putAdminsUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling putAdmins.');
        }
        const _updateAdmins = requestParameters["updateAdmins"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_id))}/admins`;
    }
    putServiceAgreementState(requestParameters, observe = 'body', reportProgress = false, options) {
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        if (_serviceAgreementId === null || _serviceAgreementId === undefined) {
            throw new Error('Required parameter serviceAgreementId was null or undefined when calling putServiceAgreementState.');
        }
        const _serviceAgreementStatePut = requestParameters["serviceAgreementStatePut"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_serviceAgreementId))}/state`, _serviceAgreementStatePut, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putServiceAgreementStateUrl(requestParameters) {
        const _serviceAgreementId = requestParameters["serviceAgreementId"];
        if (_serviceAgreementId === null || _serviceAgreementId === undefined) {
            throw new Error('Required parameter serviceAgreementId was null or undefined when calling putServiceAgreementState.');
        }
        const _serviceAgreementStatePut = requestParameters["serviceAgreementStatePut"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/serviceagreements/${encodeURIComponent(String(_serviceAgreementId))}/state`;
    }
}
ServiceAgreementHttpService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ServiceAgreementHttpService, deps: [{ token: i1.HttpClient }, { token: ACCESS_CONTROL_BASE_PATH, optional: true }, { token: i2.AccessControlConfiguration, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
ServiceAgreementHttpService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ServiceAgreementHttpService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ServiceAgreementHttpService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [ACCESS_CONTROL_BASE_PATH]
                }] }, { type: i2.AccessControlConfiguration, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZUFncmVlbWVudC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYXBpL3NlcnZpY2VBZ3JlZW1lbnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFjQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBMkIsZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBYyxXQUFXLEVBQUUsVUFBVSxFQUNVLE1BQVksc0JBQXNCLENBQUM7QUFDekYsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQStCLFlBQVksQ0FBQztBQWUvRSxPQUFPLEVBQUUsd0JBQXdCLEVBQXNCLE1BQTBCLGNBQWMsQ0FBQztBQUNoRyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBMEMsa0JBQWtCLENBQUM7Ozs7QUFpRmxHLE1BQU0sT0FBTywyQkFBMkI7SUFPcEMsWUFBc0IsVUFBc0IsRUFBZ0QsUUFBZ0IsRUFBYyxhQUF5QztRQUE3SSxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBTGxDLGFBQVEsR0FBRyxpQkFBaUIsQ0FBQztRQUNoQyxtQkFBYyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDbkMsa0JBQWEsR0FBRyxJQUFJLDBCQUEwQixFQUFFLENBQUM7UUFJcEQsSUFBSSxhQUFhLEVBQUU7WUFDZixJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztTQUN0QztRQUNELElBQUksT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQUU7WUFDakQsSUFBSSxPQUFPLFFBQVEsS0FBSyxRQUFRLEVBQUU7Z0JBQzlCLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2FBQzVCO1lBQ0QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1NBQzFDO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sSUFBSSxJQUFJLHdC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KipcbiAqIEFjY2VzcyBDb250cm9sIGNsaWVudCBBUElcbiAqIE1hbmFnZSB1c2VyIHBlcm1pc3Npb25zLCBkYXRhIGdyb3VwcywgZnVuY3Rpb24gZ3JvdXBzIGFuZCBzZXJ2aWNlIGFncmVlbWVudHMgZnJvbSBjbGllbnQgc2lkZVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAyLjEwLjBcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vZ2l0aHViLmNvbS9CYWNrYmFzZS9iYWNrYmFzZS1vcGVuYXBpLXRvb2xzKS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9CYWNrYmFzZS9iYWNrYmFzZS1vcGVuYXBpLXRvb2xzXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJZEl0ZW0gfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBTZXJ2aWNlQWdyZWVtZW50SXRlbSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBTZXJ2aWNlQWdyZWVtZW50UG9zdCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBTZXJ2aWNlQWdyZWVtZW50U3RhdGVQdXQgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgU2VydmljZUFncmVlbWVudFVzZXJzR2V0UmVzcG9uc2VCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFVuZXhwb3NlZFVzZXJzR2V0UmVzcG9uc2VCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFVwZGF0ZUFkbWlucyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuXG5pbXBvcnQgeyBBQ0NFU1NfQ09OVFJPTF9CQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IEFjY2Vzc0NvbnRyb2xDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBHZXRTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIExlZ2FsIGVudGl0eSBJRCB0aGF0IGNyZWF0ZWQgdGhlIHNlcnZpY2UgYWdyZWVtZW50ICovXG4gICAgW1wiY3JlYXRvcklkXCJdOiBzdHJpbmc7XG4gICAgLyoqIFJlY29yZCBVVUlELiBBcyBhbiBhbHRlcm5hdGl2ZSBmb3Igc3BlY2lmeWluZyBcXCYjMzk7ZnJvbVxcJiMzOTsgdGhpcyBhbGxvd3MgdG8gcG9pbnQgdG8gdGhlIHJlY29yZCB0byBzdGFydCB0aGUgc2VsZWN0aW9uIGZyb20uICAqL1xuICAgIFtcImN1cnNvclwiXT86IHN0cmluZztcbiAgICAvKiogUGFnZSBOdW1iZXIuIFNraXAgb3ZlciBwYWdlcyBvZiBlbGVtZW50cyBieSBzcGVjaWZ5aW5nIGEgc3RhcnQgdmFsdWUgZm9yIHRoZSBxdWVyeSAqL1xuICAgIFtcImZyb21cIl0/OiBudW1iZXI7XG4gICAgLyoqIExpbWl0IHRoZSBudW1iZXIgb2YgZWxlbWVudHMgb24gdGhlIHJlc3BvbnNlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBjdXJzb3IsIHRoZSB2YWx1ZSBpcyBhbGxvd2VkIHRvIGJlIGEgbmVnYXRpdmUgbnVtYmVyIHRvIGluZGljYXRlIHJlcXVlc3RpbmcgcmVjb3JkcyB1cHdhcmRzIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50IGluZGljYXRlZCBieSB0aGUgY3Vyc29yLiAgKi9cbiAgICBbXCJzaXplXCJdPzogbnVtYmVyO1xuICAgIC8qKiBUaGUgc2VhcmNoIHRlcm0gdXNlZCB0byBzZWFyY2guICovXG4gICAgW1wicXVlcnlcIl0/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0U2VydmljZUFncmVlbWVudEFkbWluc1JlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUgKi9cbiAgICBbXCJzZXJ2aWNlQWdyZWVtZW50SWRcIl06IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRTZXJ2aWNlQWdyZWVtZW50SXRlbVJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBTZXJ2aWNyZSBBZ3JlZW1lbnQgSUQgKi9cbiAgICBbXCJzZXJ2aWNlQWdyZWVtZW50SWRcIl06IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogUGFnZSBOdW1iZXIuIFNraXAgb3ZlciBwYWdlcyBvZiBlbGVtZW50cyBieSBzcGVjaWZ5aW5nIGEgc3RhcnQgdmFsdWUgZm9yIHRoZSBxdWVyeSAqL1xuICAgIFtcImZyb21cIl0/OiBudW1iZXI7XG4gICAgLyoqIExpbWl0IHRoZSBudW1iZXIgb2YgZWxlbWVudHMgb24gdGhlIHJlc3BvbnNlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBjdXJzb3IsIHRoZSB2YWx1ZSBpcyBhbGxvd2VkIHRvIGJlIGEgbmVnYXRpdmUgbnVtYmVyIHRvIGluZGljYXRlIHJlcXVlc3RpbmcgcmVjb3JkcyB1cHdhcmRzIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50IGluZGljYXRlZCBieSB0aGUgY3Vyc29yLiAgKi9cbiAgICBbXCJzaXplXCJdPzogbnVtYmVyO1xuICAgIC8qKiBSZWNvcmQgVVVJRC4gQXMgYW4gYWx0ZXJuYXRpdmUgZm9yIHNwZWNpZnlpbmcgXFwmIzM5O2Zyb21cXCYjMzk7IHRoaXMgYWxsb3dzIHRvIHBvaW50IHRvIHRoZSByZWNvcmQgdG8gc3RhcnQgdGhlIHNlbGVjdGlvbiBmcm9tLiAgKi9cbiAgICBbXCJjdXJzb3JcIl0/OiBzdHJpbmc7XG4gICAgLyoqIFRoZSBzZWFyY2ggdGVybSB1c2VkIHRvIHNlYXJjaC4gKi9cbiAgICBbXCJxdWVyeVwiXT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRVbmV4cG9zZWRVc2Vyc1JlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBUaGUgc2VhcmNoIHRlcm0gdXNlZCB0byBzZWFyY2guICovXG4gICAgW1wicXVlcnlcIl0/OiBzdHJpbmc7XG4gICAgLyoqIFBhZ2UgTnVtYmVyLiBTa2lwIG92ZXIgcGFnZXMgb2YgZWxlbWVudHMgYnkgc3BlY2lmeWluZyBhIHN0YXJ0IHZhbHVlIGZvciB0aGUgcXVlcnkgKi9cbiAgICBbXCJmcm9tXCJdPzogbnVtYmVyO1xuICAgIC8qKiBSZWNvcmQgVVVJRC4gQXMgYW4gYWx0ZXJuYXRpdmUgZm9yIHNwZWNpZnlpbmcgXFwmIzM5O2Zyb21cXCYjMzk7IHRoaXMgYWxsb3dzIHRvIHBvaW50IHRvIHRoZSByZWNvcmQgdG8gc3RhcnQgdGhlIHNlbGVjdGlvbiBmcm9tLiAgKi9cbiAgICBbXCJjdXJzb3JcIl0/OiBzdHJpbmc7XG4gICAgLyoqIExpbWl0IHRoZSBudW1iZXIgb2YgZWxlbWVudHMgb24gdGhlIHJlc3BvbnNlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBjdXJzb3IsIHRoZSB2YWx1ZSBpcyBhbGxvd2VkIHRvIGJlIGEgbmVnYXRpdmUgbnVtYmVyIHRvIGluZGljYXRlIHJlcXVlc3RpbmcgcmVjb3JkcyB1cHdhcmRzIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50IGluZGljYXRlZCBieSB0aGUgY3Vyc29yLiAgKi9cbiAgICBbXCJzaXplXCJdPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqICMgQ3JlYXRlIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOyAgICBDcmVhdGVzIGEgbmV3IFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRpYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5BZGRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEFkZFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5hZGRTZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6QWRkU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsICovXG4gICAgW1wic2VydmljZUFncmVlbWVudFBvc3RcIl0/OiBTZXJ2aWNlQWdyZWVtZW50UG9zdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3N0VXNlcnNBZGRSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogIyBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQWRkcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbCAqL1xuICAgIFtcInVzZXJzRm9yU2VydmljZUFncmVlbWVudFwiXT86IFVzZXJzRm9yU2VydmljZUFncmVlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3N0VXNlcnNSZW1vdmVSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogIyBSZW1vdmUgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgUmVtb3ZlcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlJlbW92ZVVzZXJGcm9tU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBSZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5yZW1vdmVVc2Vyc0Zyb21TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiByZW1vdmVVc2Vyc0Zyb21TZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWwgKi9cbiAgICBbXCJ1c2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRcIl0/OiBVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHV0QWRtaW5zUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFNlcnZpY3JlIEFncmVlbWVudCBJRCAqL1xuICAgIFtcImlkXCJdOiBzdHJpbmc7XG4gICAgLyoqICMgQWRkIGFkbWlucyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOyAgICBBZGRzIEFkbWlucyB0byBhIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LCBwZXIgTGVnYWwgRW50aXR5IHBhcnRpY2lwYW50LiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuVXBkYXRlU2VydmljZUFncmVlbWVudEFkbWluc1JvdXRlICAqIFJvdXRlIElkOiBVcGRhdGVTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MudXBkYXRlU2VydmljZUFncmVlbWVudEFkbWlucyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OnVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSZXF1ZXN0ZWRJbnRlcm5hbCAqL1xuICAgIFtcInVwZGF0ZUFkbWluc1wiXT86IFVwZGF0ZUFkbWlucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQdXRTZXJ2aWNlQWdyZWVtZW50U3RhdGVSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlICovXG4gICAgW1wic2VydmljZUFncmVlbWVudElkXCJdOiBzdHJpbmc7XG4gICAgLyoqICMgVXBkYXRlIFNlcnZpY2UgQWdyZWVtZW50IFN0YXRlIC0gJiN4NjA7UFVUJiN4NjA7ICAgIFVwZGF0ZXMgc3RhdHVzIGZvciBhIHNwZWNpZmljIHNlcnZpY2UgYWdyZWVtZW50LiAgICovXG4gICAgW1wic2VydmljZUFncmVlbWVudFN0YXRlUHV0XCJdPzogU2VydmljZUFncmVlbWVudFN0YXRlUHV0O1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFNlcnZpY2VBZ3JlZW1lbnRIdHRwU2VydmljZSB7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnL2FjY2Vzcy1jb250cm9sJztcbiAgICBwdWJsaWMgZGVmYXVsdEhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKTtcbiAgICBwdWJsaWMgY29uZmlndXJhdGlvbiA9IG5ldyBBY2Nlc3NDb250cm9sQ29uZmlndXJhdGlvbigpO1xuICAgIHB1YmxpYyBlbmNvZGVyOiBIdHRwUGFyYW1ldGVyQ29kZWM7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChBQ0NFU1NfQ09OVFJPTF9CQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmcsIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb246IEFjY2Vzc0NvbnRyb2xDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBiYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBiYXNlUGF0aCA9IHRoaXMuYmFzZVBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGggPSBiYXNlUGF0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuY29kZXIgPSB0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlciB8fCBuZXcgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjKCk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtcyhodHRwUGFyYW1zOiBIdHRwUGFyYW1zLCB2YWx1ZTogYW55LCBrZXk/OiBzdHJpbmcpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXM6IEh0dHBQYXJhbXMsIHZhbHVlPzogYW55LCBrZXk/OiBzdHJpbmcpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgKHZhbHVlIGFzIGFueVtdKS5mb3JFYWNoKCBlbGVtID0+IGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCBlbGVtLCBrZXkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAodmFsdWUgYXMgRGF0ZSkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwia2V5IG1heSBub3QgYmUgbnVsbCBpZiB2YWx1ZSBpcyBEYXRlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goIGsgPT4gaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKFxuICAgICAgICAgICAgICAgICAgICBodHRwUGFyYW1zLCB2YWx1ZVtrXSwga2V5ICE9IG51bGwgPyBgJHtrZXl9LiR7a31gIDogaykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImtleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgbm90IG9iamVjdCBvciBhcnJheVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IFNlcnZpY2UgQWdyZWVtZW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgU2VydmljZSBBZ3JlZW1lbnRzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgc2VydmljZSBhZ3JlZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYnkgZ2l2ZW4gTGVnYWwgRW50aXR5IChjcmVhdG9yKS4gICAgIyMjRXh0ZW5kaWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogTGlzdFNBUm91dGUgICogUm91dGUgSWQ6IExpc3RTQVJvdXRJZCAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IEJ1c2luZXNzX0xJU1RTQSAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogREVGQVVMVF9MSVNUX1NBXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRJdGVtPj47XG4gICAgLyoqXG4gICAgICogTGlzdCBTZXJ2aWNlIEFncmVlbWVudHMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IFNlcnZpY2UgQWdyZWVtZW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBQcm92aWRlcyBhIGxpc3Qgb2YgYWxsIHNlcnZpY2UgYWdyZWVtZW50cyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkIGJ5IGdpdmVuIExlZ2FsIEVudGl0eSAoY3JlYXRvcikuICAgICMjI0V4dGVuZGliaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IExpc3RTQVJvdXRlICAqIFJvdXRlIElkOiBMaXN0U0FSb3V0SWQgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBCdXNpbmVzc19MSVNUU0EgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IERFRkFVTFRfTElTVF9TQVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRJdGVtPj4+O1xuICAgIC8qKlxuICAgICAqIExpc3QgU2VydmljZSBBZ3JlZW1lbnRzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCBTZXJ2aWNlIEFncmVlbWVudHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBzZXJ2aWNlIGFncmVlbWVudHMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBieSBnaXZlbiBMZWdhbCBFbnRpdHkgKGNyZWF0b3IpLiAgICAjIyNFeHRlbmRpYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBMaXN0U0FSb3V0ZSAgKiBSb3V0ZSBJZDogTGlzdFNBUm91dElkICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogQnVzaW5lc3NfTElTVFNBICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBERUZBVUxUX0xJU1RfU0FcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudChyZXF1ZXN0UGFyYW1ldGVyczogR2V0U2VydmljZUFncmVlbWVudFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8U2VydmljZUFncmVlbWVudEl0ZW0+Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCBTZXJ2aWNlIEFncmVlbWVudHMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IFNlcnZpY2UgQWdyZWVtZW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBQcm92aWRlcyBhIGxpc3Qgb2YgYWxsIHNlcnZpY2UgYWdyZWVtZW50cyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkIGJ5IGdpdmVuIExlZ2FsIEVudGl0eSAoY3JlYXRvcikuICAgICMjI0V4dGVuZGliaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IExpc3RTQVJvdXRlICAqIFJvdXRlIElkOiBMaXN0U0FSb3V0SWQgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBCdXNpbmVzc19MSVNUU0EgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IERFRkFVTFRfTElTVF9TQVxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50KHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2NyZWF0b3JJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3JlYXRvcklkXCJdO1xuICAgICAgICBpZiAoX2NyZWF0b3JJZCA9PT0gbnVsbCB8fCBfY3JlYXRvcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNyZWF0b3JJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFNlcnZpY2VBZ3JlZW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG4gICAgICAgIGNvbnN0IF9xdWVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicXVlcnlcIl07XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9jcmVhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBfY3JlYXRvcklkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3JlYXRvcklkLCAnY3JlYXRvcklkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxBcnJheTxTZXJ2aWNlQWdyZWVtZW50SXRlbT4+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudFVybChyZXF1ZXN0UGFyYW1ldGVyczogR2V0U2VydmljZUFncmVlbWVudFJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfY3JlYXRvcklkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjcmVhdG9ySWRcIl07XG4gICAgICAgIGlmIChfY3JlYXRvcklkID09PSBudWxsIHx8IF9jcmVhdG9ySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY3JlYXRvcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0U2VydmljZUFncmVlbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9mcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJmcm9tXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcbiAgICAgICAgY29uc3QgX3F1ZXJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJxdWVyeVwiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9jcmVhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBfY3JlYXRvcklkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3JlYXRvcklkLCAnY3JlYXRvcklkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzJHtxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogJyd9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBhZG1pbnMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBhZG1pbnMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIFVzZXJzIHRoYXQgYXJlIGFkbWlucyBpbiBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50Lkxpc3RBZG1pbnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IExpc3RBZG1pbnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MubGlzdEFkbWluc0ZvclNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpsaXN0QWRtaW5zRm9yU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRBZG1pbnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGFkbWlucyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGFkbWlucyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgVXNlcnMgdGhhdCBhcmUgYWRtaW5zIGluIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdEFkbWluc0ZvclNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogTGlzdEFkbWluc0ZvclNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5saXN0QWRtaW5zRm9yU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RBZG1pbnNGb3JTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudEFkbWlucyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0U2VydmljZUFncmVlbWVudEFkbWluc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxTZXJ2aWNlQWdyZWVtZW50VXNlcnNHZXRSZXNwb25zZUJvZHk+Pj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgYWRtaW5zIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgYWRtaW5zIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHJpZXZlcyBVc2VycyB0aGF0IGFyZSBhZG1pbnMgaW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5MaXN0QWRtaW5zRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBMaXN0QWRtaW5zRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmxpc3RBZG1pbnNGb3JTZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6bGlzdEFkbWluc0ZvclNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50QWRtaW5zKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxTZXJ2aWNlQWdyZWVtZW50VXNlcnNHZXRSZXNwb25zZUJvZHk+Pj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgYWRtaW5zIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgYWRtaW5zIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHJpZXZlcyBVc2VycyB0aGF0IGFyZSBhZG1pbnMgaW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5MaXN0QWRtaW5zRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBMaXN0QWRtaW5zRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmxpc3RBZG1pbnNGb3JTZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6bGlzdEFkbWluc0ZvclNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50QWRtaW5zKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3NlcnZpY2VBZ3JlZW1lbnRJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VydmljZUFncmVlbWVudElkXCJdO1xuICAgICAgICBpZiAoX3NlcnZpY2VBZ3JlZW1lbnRJZCA9PT0gbnVsbCB8fCBfc2VydmljZUFncmVlbWVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHNlcnZpY2VBZ3JlZW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFNlcnZpY2VBZ3JlZW1lbnRBZG1pbnMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc0dldFJlc3BvbnNlQm9keT4+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9zZXJ2aWNlQWdyZWVtZW50SWQpKX0vYWRtaW5zYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX3NlcnZpY2VBZ3JlZW1lbnRJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VydmljZUFncmVlbWVudElkXCJdO1xuICAgICAgICBpZiAoX3NlcnZpY2VBZ3JlZW1lbnRJZCA9PT0gbnVsbCB8fCBfc2VydmljZUFncmVlbWVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHNlcnZpY2VBZ3JlZW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFNlcnZpY2VBZ3JlZW1lbnRBZG1pbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9zZXJ2aWNlQWdyZWVtZW50SWQpKX0vYWRtaW5zYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBkZXRhaWxzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyBieSBnaXZlbiBJRC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0U2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0U2VydmljZUFncmVlbWVudEJ5SWRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50Q29udGV4dChvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPFNlcnZpY2VBZ3JlZW1lbnRJdGVtPjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBkZXRhaWxzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyBieSBnaXZlbiBJRC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0U2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0U2VydmljZUFncmVlbWVudEJ5SWRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50Q29udGV4dChvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8U2VydmljZUFncmVlbWVudEl0ZW0+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBkZXRhaWxzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyBieSBnaXZlbiBJRC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0U2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0U2VydmljZUFncmVlbWVudEJ5SWRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50Q29udGV4dChvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFNlcnZpY2VBZ3JlZW1lbnRJdGVtPj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgYnkgZ2l2ZW4gSUQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50QnlJZCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudENvbnRleHQob2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFNlcnZpY2VBZ3JlZW1lbnRJdGVtPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzL2NvbnRleHRgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudENvbnRleHRVcmwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHMvY29udGV4dGA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgYnkgZ2l2ZW4gSUQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50QnlJZCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudEl0ZW0ocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRJdGVtUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxTZXJ2aWNlQWdyZWVtZW50SXRlbT47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgYnkgZ2l2ZW4gSUQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50QnlJZCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudEl0ZW0ocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRJdGVtUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFNlcnZpY2VBZ3JlZW1lbnRJdGVtPj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgZGV0YWlscyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgYnkgZ2l2ZW4gSUQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50QnlJZCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFNlcnZpY2VBZ3JlZW1lbnRCeUlkUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudEl0ZW0ocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRJdGVtUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTZXJ2aWNlQWdyZWVtZW50SXRlbT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IGRldGFpbHMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBkZXRhaWxzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHJpZXZlcyBTZXJ2aWNlIEFncmVlbWVudCBkZXRhaWxzIGJ5IGdpdmVuIElELiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuR2V0U2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBHZXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZ2V0U2VydmljZUFncmVlbWVudEJ5SWQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpnZXRTZXJ2aWNlQWdyZWVtZW50QnlJZFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRJdGVtKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50SXRlbVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNlcnZpY2VBZ3JlZW1lbnRJZFwiXTtcbiAgICAgICAgaWYgKF9zZXJ2aWNlQWdyZWVtZW50SWQgPT09IG51bGwgfHwgX3NlcnZpY2VBZ3JlZW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBzZXJ2aWNlQWdyZWVtZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRTZXJ2aWNlQWdyZWVtZW50SXRlbS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U2VydmljZUFncmVlbWVudEl0ZW0+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9zZXJ2aWNlQWdyZWVtZW50SWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudEl0ZW1VcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRJdGVtUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNlcnZpY2VBZ3JlZW1lbnRJZFwiXTtcbiAgICAgICAgaWYgKF9zZXJ2aWNlQWdyZWVtZW50SWQgPT09IG51bGwgfHwgX3NlcnZpY2VBZ3JlZW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBzZXJ2aWNlQWdyZWVtZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRTZXJ2aWNlQWdyZWVtZW50SXRlbS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3NlcnZpY2VBZ3JlZW1lbnRJZCkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCB1c2VycyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgdXNlcnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1c2VycyB0aGF0IGJlbG9uZyB0byBhIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBMaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MubGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8QXJyYXk8U2VydmljZUFncmVlbWVudFVzZXJzR2V0UmVzcG9uc2VCb2R5Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCB1c2VycyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgdXNlcnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1c2VycyB0aGF0IGJlbG9uZyB0byBhIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBMaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MubGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxTZXJ2aWNlQWdyZWVtZW50VXNlcnNHZXRSZXNwb25zZUJvZHk+Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCB1c2VycyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgdXNlcnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1c2VycyB0aGF0IGJlbG9uZyB0byBhIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBMaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MubGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8U2VydmljZUFncmVlbWVudFVzZXJzR2V0UmVzcG9uc2VCb2R5Pj4+O1xuICAgIC8qKlxuICAgICAqIExpc3QgdXNlcnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IHVzZXJzIGluIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7R0VUJiN4NjA7ICAgIFByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgdXNlcnMgdGhhdCBiZWxvbmcgdG8gYSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50Lkxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogTGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpsaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudFVzZXJzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG4gICAgICAgIGNvbnN0IF9jdXJzb3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1cnNvclwiXTtcbiAgICAgICAgY29uc3QgX3F1ZXJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJxdWVyeVwiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfcXVlcnkgIT09IHVuZGVmaW5lZCAmJiBfcXVlcnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9xdWVyeSwgJ3F1ZXJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc0dldFJlc3BvbnNlQm9keT4+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHMvY29udGV4dC91c2Vyc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1JlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG4gICAgICAgIGNvbnN0IF9jdXJzb3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1cnNvclwiXTtcbiAgICAgICAgY29uc3QgX3F1ZXJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJxdWVyeVwiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2N1cnNvciAhPT0gdW5kZWZpbmVkICYmIF9jdXJzb3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9jdXJzb3IsICdjdXJzb3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzL2NvbnRleHQvdXNlcnMke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnJ31gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgYWxsIHVuZXhwb3NlZCB1c2VycyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgYWxsIHVuZXhwb3NlZCB1c2VycyAtICYjeDYwO0dFVCYjeDYwOyAgICBQcm92aWRlcyBhIGxpc3Qgb2YgYWxsIHVuZXhwb3NlZCB1c2VycyB0aGF0IGJlbG9uZyB0byB0aGUgcGFydGljaXBhbnRzIHdobyBhcmUgc2hhcmluZyB1c2VycyBpbiB0aGUgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFVuZXhwb3NlZFVzZXJzUm91dGUgICogUm91dGUgSWQ6IEdldFVuZXhwb3NlZFVzZXJzUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZ2V0VW5leHBvc2VkVXNlcnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpnZXRVbmV4cG9zZWRVc2Vyc1JlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIGdldFVuZXhwb3NlZFVzZXJzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRVbmV4cG9zZWRVc2Vyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8QXJyYXk8VW5leHBvc2VkVXNlcnNHZXRSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1bmV4cG9zZWQgdXNlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHBhcnRpY2lwYW50cyB3aG8gYXJlIHNoYXJpbmcgdXNlcnMgaW4gdGhlIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIElkOiBHZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFVuZXhwb3NlZFVzZXJzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRVbmV4cG9zZWRVc2VycyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXJyYXk8VW5leHBvc2VkVXNlcnNHZXRSZXNwb25zZUJvZHk+Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCBhbGwgdW5leHBvc2VkIHVzZXJzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCBhbGwgdW5leHBvc2VkIHVzZXJzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgdW5leHBvc2VkIHVzZXJzIHRoYXQgYmVsb25nIHRvIHRoZSBwYXJ0aWNpcGFudHMgd2hvIGFyZSBzaGFyaW5nIHVzZXJzIGluIHRoZSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuR2V0VW5leHBvc2VkVXNlcnNSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0VW5leHBvc2VkVXNlcnNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRVbmV4cG9zZWRVc2VycyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFVuZXhwb3NlZFVzZXJzUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VW5leHBvc2VkVXNlcnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFVuZXhwb3NlZFVzZXJzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxVbmV4cG9zZWRVc2Vyc0dldFJlc3BvbnNlQm9keT4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1bmV4cG9zZWQgdXNlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHBhcnRpY2lwYW50cyB3aG8gYXJlIHNoYXJpbmcgdXNlcnMgaW4gdGhlIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIElkOiBHZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFVuZXhwb3NlZFVzZXJzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRVbmV4cG9zZWRVc2VycyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfcXVlcnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInF1ZXJ5XCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZnJvbSAhPT0gdW5kZWZpbmVkICYmIF9mcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZnJvbSwgJ2Zyb20nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2N1cnNvciAhPT0gdW5kZWZpbmVkICYmIF9jdXJzb3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9jdXJzb3IsICdjdXJzb3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3NpemUgIT09IHVuZGVmaW5lZCAmJiBfc2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NpemUsICdzaXplJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PFVuZXhwb3NlZFVzZXJzR2V0UmVzcG9uc2VCb2R5Pj4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlYWdyZWVtZW50cy9jb250ZXh0L3VzZXJzL3VuZXhwb3NlZGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRVbmV4cG9zZWRVc2Vyc1VybChyZXF1ZXN0UGFyYW1ldGVyczogR2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX3F1ZXJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJxdWVyeVwiXTtcbiAgICAgICAgY29uc3QgX2Zyb20gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZyb21cIl07XG4gICAgICAgIGNvbnN0IF9jdXJzb3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1cnNvclwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfcXVlcnkgIT09IHVuZGVmaW5lZCAmJiBfcXVlcnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9xdWVyeSwgJ3F1ZXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1ldGVycy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlYWdyZWVtZW50cy9jb250ZXh0L3VzZXJzL3VuZXhwb3NlZCR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIENyZWF0ZSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQ3JlYXRlcyBhIG5ldyBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjRXh0ZW5kaWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuQWRkU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBBZGRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYWRkU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OkFkZFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0U2VydmljZUFncmVlbWVudChyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPElkSXRlbT47XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIENyZWF0ZSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQ3JlYXRlcyBhIG5ldyBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjRXh0ZW5kaWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuQWRkU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBBZGRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYWRkU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OkFkZFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0U2VydmljZUFncmVlbWVudChyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SWRJdGVtPj47XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIENyZWF0ZSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQ3JlYXRlcyBhIG5ldyBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjRXh0ZW5kaWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuQWRkU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBBZGRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYWRkU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OkFkZFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0U2VydmljZUFncmVlbWVudChyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PElkSXRlbT4+O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBDcmVhdGUgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIENyZWF0ZXMgYSBuZXcgU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGliaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpBZGRTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdFNlcnZpY2VBZ3JlZW1lbnQocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3NlcnZpY2VBZ3JlZW1lbnRQb3N0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzZXJ2aWNlQWdyZWVtZW50UG9zdFwiXTtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxJZEl0ZW0+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHNgLFxuICAgICAgICAgICAgX3NlcnZpY2VBZ3JlZW1lbnRQb3N0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdFNlcnZpY2VBZ3JlZW1lbnRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50UG9zdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VydmljZUFncmVlbWVudFBvc3RcIl07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQWRkcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0VXNlcnNBZGQocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc0FkZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICAvKipcbiAgICAgKiBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQWRkcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0VXNlcnNBZGQocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc0FkZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICAvKipcbiAgICAgKiBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQWRkcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0VXNlcnNBZGQocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc0FkZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogQWRkIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7LlxuICAgICAqICMgQWRkIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIEFkZHMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5BZGRVc2VySW5TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5hZGRVc2Vyc0luU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdFVzZXJzQWRkKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNBZGRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfdXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJ1c2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRcIl07XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzL2NvbnRleHQvdXNlcnMvYWRkYCxcbiAgICAgICAgICAgIF91c2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBwb3N0VXNlcnNBZGRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc0FkZFJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfdXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJ1c2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRcIl07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzL2NvbnRleHQvdXNlcnMvYWRkYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBSZW1vdmUgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgUmVtb3ZlcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlJlbW92ZVVzZXJGcm9tU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBSZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5yZW1vdmVVc2Vyc0Zyb21TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiByZW1vdmVVc2Vyc0Zyb21TZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdFVzZXJzUmVtb3ZlKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNSZW1vdmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7LlxuICAgICAqICMgUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIFJlbW92ZXMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5SZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MucmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogcmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIHBvc3RVc2Vyc1JlbW92ZShyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFVzZXJzUmVtb3ZlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIFJlbW92ZSBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOyAgICBSZW1vdmVzIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IFJlbW92ZVVzZXJGcm9tU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLnJlbW92ZVVzZXJzRnJvbVNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IHJlbW92ZVVzZXJzRnJvbVNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0VXNlcnNSZW1vdmUocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc1JlbW92ZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7LlxuICAgICAqICMgUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIFJlbW92ZXMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5SZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MucmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogcmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIHBvc3RVc2Vyc1JlbW92ZShyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFVzZXJzUmVtb3ZlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3VzZXJzRm9yU2VydmljZUFncmVlbWVudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50XCJdO1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlYWdyZWVtZW50cy9jb250ZXh0L3VzZXJzL3JlbW92ZWAsXG4gICAgICAgICAgICBfdXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdFVzZXJzUmVtb3ZlVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNSZW1vdmVSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX3VzZXJzRm9yU2VydmljZUFncmVlbWVudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50XCJdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlYWdyZWVtZW50cy9jb250ZXh0L3VzZXJzL3JlbW92ZWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFkbWlucyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIEFkZCBhZG1pbnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQVVQmI3g2MDsgICAgQWRkcyBBZG1pbnMgdG8gYSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudCwgcGVyIExlZ2FsIEVudGl0eSBwYXJ0aWNpcGFudC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSb3V0ZSAgKiBSb3V0ZSBJZDogVXBkYXRlU2VydmljZUFncmVlbWVudEFkbWluc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLnVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDp1cGRhdGVTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QWRtaW5zKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBZG1pbnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgLyoqXG4gICAgICogQWRkIGFkbWlucyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIEFkZCBhZG1pbnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQVVQmI3g2MDsgICAgQWRkcyBBZG1pbnMgdG8gYSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudCwgcGVyIExlZ2FsIEVudGl0eSBwYXJ0aWNpcGFudC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSb3V0ZSAgKiBSb3V0ZSBJZDogVXBkYXRlU2VydmljZUFncmVlbWVudEFkbWluc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLnVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDp1cGRhdGVTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QWRtaW5zKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBZG1pbnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgLyoqXG4gICAgICogQWRkIGFkbWlucyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIEFkZCBhZG1pbnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQVVQmI3g2MDsgICAgQWRkcyBBZG1pbnMgdG8gYSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudCwgcGVyIExlZ2FsIEVudGl0eSBwYXJ0aWNpcGFudC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSb3V0ZSAgKiBSb3V0ZSBJZDogVXBkYXRlU2VydmljZUFncmVlbWVudEFkbWluc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLnVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDp1cGRhdGVTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QWRtaW5zKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBZG1pbnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIC8qKlxuICAgICAqIEFkZCBhZG1pbnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQVVQmI3g2MDsuXG4gICAgICogIyBBZGQgYWRtaW5zIGluIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UFVUJiN4NjA7ICAgIEFkZHMgQWRtaW5zIHRvIGEgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQsIHBlciBMZWdhbCBFbnRpdHkgcGFydGljaXBhbnQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5VcGRhdGVTZXJ2aWNlQWdyZWVtZW50QWRtaW5zUm91dGUgICogUm91dGUgSWQ6IFVwZGF0ZVNlcnZpY2VBZ3JlZW1lbnRBZG1pbnNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy51cGRhdGVTZXJ2aWNlQWdyZWVtZW50QWRtaW5zICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6dXBkYXRlU2VydmljZUFncmVlbWVudEFkbWluc1JlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dEFkbWlucyhyZXF1ZXN0UGFyYW1ldGVyczogUHV0QWRtaW5zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2lkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJpZFwiXTtcbiAgICAgICAgaWYgKF9pZCA9PT0gbnVsbCB8fCBfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwdXRBZG1pbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3VwZGF0ZUFkbWlucyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXBkYXRlQWRtaW5zXCJdO1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX0vYWRtaW5zYCxcbiAgICAgICAgICAgIF91cGRhdGVBZG1pbnMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBwdXRBZG1pbnNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEFkbWluc1JlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEFkbWlucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfdXBkYXRlQWRtaW5zID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJ1cGRhdGVBZG1pbnNcIl07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2VhZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX0vYWRtaW5zYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgU2VydmljZSBBZ3JlZW1lbnQgU3RhdGUgLSAmI3g2MDtQVVQmI3g2MDsuXG4gICAgICogIyBVcGRhdGUgU2VydmljZSBBZ3JlZW1lbnQgU3RhdGUgLSAmI3g2MDtQVVQmI3g2MDsgICAgVXBkYXRlcyBzdGF0dXMgZm9yIGEgc3BlY2lmaWMgc2VydmljZSBhZ3JlZW1lbnQuICBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0U2VydmljZUFncmVlbWVudFN0YXRlKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRTZXJ2aWNlQWdyZWVtZW50U3RhdGVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgLyoqXG4gICAgICogVXBkYXRlIFNlcnZpY2UgQWdyZWVtZW50IFN0YXRlIC0gJiN4NjA7UFVUJiN4NjA7LlxuICAgICAqICMgVXBkYXRlIFNlcnZpY2UgQWdyZWVtZW50IFN0YXRlIC0gJiN4NjA7UFVUJiN4NjA7ICAgIFVwZGF0ZXMgc3RhdHVzIGZvciBhIHNwZWNpZmljIHNlcnZpY2UgYWdyZWVtZW50LiAgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dFNlcnZpY2VBZ3JlZW1lbnRTdGF0ZShyZXF1ZXN0UGFyYW1ldGVyczogUHV0U2VydmljZUFncmVlbWVudFN0YXRlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBTZXJ2aWNlIEFncmVlbWVudCBTdGF0ZSAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIFVwZGF0ZSBTZXJ2aWNlIEFncmVlbWVudCBTdGF0ZSAtICYjeDYwO1BVVCYjeDYwOyAgICBVcGRhdGVzIHN0YXR1cyBmb3IgYSBzcGVjaWZpYyBzZXJ2aWNlIGFncmVlbWVudC4gIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRTZXJ2aWNlQWdyZWVtZW50U3RhdGUocmVxdWVzdFBhcmFtZXRlcnM6IFB1dFNlcnZpY2VBZ3JlZW1lbnRTdGF0ZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogVXBkYXRlIFNlcnZpY2UgQWdyZWVtZW50IFN0YXRlIC0gJiN4NjA7UFVUJiN4NjA7LlxuICAgICAqICMgVXBkYXRlIFNlcnZpY2UgQWdyZWVtZW50IFN0YXRlIC0gJiN4NjA7UFVUJiN4NjA7ICAgIFVwZGF0ZXMgc3RhdHVzIGZvciBhIHNwZWNpZmljIHNlcnZpY2UgYWdyZWVtZW50LiAgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dFNlcnZpY2VBZ3JlZW1lbnRTdGF0ZShyZXF1ZXN0UGFyYW1ldGVyczogUHV0U2VydmljZUFncmVlbWVudFN0YXRlUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3NlcnZpY2VBZ3JlZW1lbnRJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VydmljZUFncmVlbWVudElkXCJdO1xuICAgICAgICBpZiAoX3NlcnZpY2VBZ3JlZW1lbnRJZCA9PT0gbnVsbCB8fCBfc2VydmljZUFncmVlbWVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHNlcnZpY2VBZ3JlZW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dFNlcnZpY2VBZ3JlZW1lbnRTdGF0ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfc2VydmljZUFncmVlbWVudFN0YXRlUHV0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzZXJ2aWNlQWdyZWVtZW50U3RhdGVQdXRcIl07XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9zZXJ2aWNlQWdyZWVtZW50SWQpKX0vc3RhdGVgLFxuICAgICAgICAgICAgX3NlcnZpY2VBZ3JlZW1lbnRTdGF0ZVB1dCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHB1dFNlcnZpY2VBZ3JlZW1lbnRTdGF0ZVVybChyZXF1ZXN0UGFyYW1ldGVyczogUHV0U2VydmljZUFncmVlbWVudFN0YXRlUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNlcnZpY2VBZ3JlZW1lbnRJZFwiXTtcbiAgICAgICAgaWYgKF9zZXJ2aWNlQWdyZWVtZW50SWQgPT09IG51bGwgfHwgX3NlcnZpY2VBZ3JlZW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBzZXJ2aWNlQWdyZWVtZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwdXRTZXJ2aWNlQWdyZWVtZW50U3RhdGUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3NlcnZpY2VBZ3JlZW1lbnRTdGF0ZVB1dCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VydmljZUFncmVlbWVudFN0YXRlUHV0XCJdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3NlcnZpY2VBZ3JlZW1lbnRJZCkpfS9zdGF0ZWA7XG4gICAgfVxuXG59XG4iXX0=