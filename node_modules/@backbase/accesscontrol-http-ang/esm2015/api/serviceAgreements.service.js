import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpParameterCodec } from '../encoder';
import { ACCESS_CONTROL_BASE_PATH } from '../variables';
import { AccessControlConfiguration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
export class ServiceAgreementsHttpService {
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = '/access-control';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new AccessControlConfiguration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                value.forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, value.toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    getAssignUsersPermissions(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getAssignUsersPermissions.');
        }
        const _userId = requestParameters["userId"];
        if (_userId === null || _userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling getAssignUsersPermissions.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/${encodeURIComponent(String(_userId))}/permissions`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getAssignUsersPermissionsUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getAssignUsersPermissions.');
        }
        const _userId = requestParameters["userId"];
        if (_userId === null || _userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling getAssignUsersPermissions.');
        }
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/${encodeURIComponent(String(_userId))}/permissions`;
    }
    getBusinessfunctions(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getBusinessfunctions.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/business-functions`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getBusinessfunctionsUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getBusinessfunctions.');
        }
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/business-functions`;
    }
    getContextServiceAgreementParticipants(observe = 'body', reportProgress = false, options) {
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/usercontext/participants`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getContextServiceAgreementParticipantsUrl() {
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/usercontext/participants`;
    }
    getServiceAgreementParticipants(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getServiceAgreementParticipants.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/participants`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementParticipantsUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getServiceAgreementParticipants.');
        }
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/participants`;
    }
    getServiceAgreementUsersSA(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getServiceAgreementUsersSA.');
        }
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementUsersSAUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getServiceAgreementUsersSA.');
        }
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users${queryString ? `?${queryString}` : ''}`;
    }
    getServiceAgreements(requestParameters, observe = 'body', reportProgress = false, options) {
        const _creatorId = requestParameters["creatorId"];
        const _userId = requestParameters["userId"];
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_creatorId !== undefined && _creatorId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creatorId, 'creatorId');
        }
        if (_userId !== undefined && _userId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _userId, 'userId');
        }
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/hierarchy`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getServiceAgreementsUrl(requestParameters) {
        const _creatorId = requestParameters["creatorId"];
        const _userId = requestParameters["userId"];
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_creatorId !== undefined && _creatorId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creatorId, 'creatorId');
        }
        if (_userId !== undefined && _userId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _userId, 'userId');
        }
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/hierarchy${queryString ? `?${queryString}` : ''}`;
    }
    getUnexposedUsersSA(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getUnexposedUsersSA.');
        }
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/unexposed`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getUnexposedUsersSAUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling getUnexposedUsersSA.');
        }
        const _query = requestParameters["query"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/unexposed${queryString ? `?${queryString}` : ''}`;
    }
    postUsersAddSA(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling postUsersAddSA.');
        }
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/add`, _usersForServiceAgreement, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postUsersAddSAUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling postUsersAddSA.');
        }
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/add`;
    }
    postUsersRemoveSA(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling postUsersRemoveSA.');
        }
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/remove`, _usersForServiceAgreement, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postUsersRemoveSAUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling postUsersRemoveSA.');
        }
        const _usersForServiceAgreement = requestParameters["usersForServiceAgreement"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/remove`;
    }
    putAssignUsersPermissions(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling putAssignUsersPermissions.');
        }
        const _userId = requestParameters["userId"];
        if (_userId === null || _userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling putAssignUsersPermissions.');
        }
        const _listOfFunctionGroupsWithDataGroups = requestParameters["listOfFunctionGroupsWithDataGroups"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/${encodeURIComponent(String(_userId))}/permissions`, _listOfFunctionGroupsWithDataGroups, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putAssignUsersPermissionsUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling putAssignUsersPermissions.');
        }
        const _userId = requestParameters["userId"];
        if (_userId === null || _userId === undefined) {
            throw new Error('Required parameter userId was null or undefined when calling putAssignUsersPermissions.');
        }
        const _listOfFunctionGroupsWithDataGroups = requestParameters["listOfFunctionGroupsWithDataGroups"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}/users/${encodeURIComponent(String(_userId))}/permissions`;
    }
    putServiceAgreementSave(requestParameters, observe = 'body', reportProgress = false, options) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling putServiceAgreementSave.');
        }
        const _serviceAgreementSave = requestParameters["serviceAgreementSave"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}`, _serviceAgreementSave, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putServiceAgreementSaveUrl(requestParameters) {
        const _id = requestParameters["id"];
        if (_id === null || _id === undefined) {
            throw new Error('Required parameter id was null or undefined when calling putServiceAgreementSave.');
        }
        const _serviceAgreementSave = requestParameters["serviceAgreementSave"];
        return `${this.configuration.basePath}/client-api/v2/accessgroups/service-agreements/${encodeURIComponent(String(_id))}`;
    }
}
ServiceAgreementsHttpService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ServiceAgreementsHttpService, deps: [{ token: i1.HttpClient }, { token: ACCESS_CONTROL_BASE_PATH, optional: true }, { token: i2.AccessControlConfiguration, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
ServiceAgreementsHttpService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ServiceAgreementsHttpService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ServiceAgreementsHttpService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [ACCESS_CONTROL_BASE_PATH]
                }] }, { type: i2.AccessControlConfiguration, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZUFncmVlbWVudHMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2FwaS9zZXJ2aWNlQWdyZWVtZW50cy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUEyQixlQUFlLENBQUM7QUFDbEYsT0FBTyxFQUFjLFdBQVcsRUFBRSxVQUFVLEVBQ1UsTUFBWSxzQkFBc0IsQ0FBQztBQUN6RixPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBK0IsWUFBWSxDQUFDO0FBaUIvRSxPQUFPLEVBQUUsd0JBQXdCLEVBQXNCLE1BQTBCLGNBQWMsQ0FBQztBQUNoRyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBMEMsa0JBQWtCLENBQUM7Ozs7QUErRmxHLE1BQU0sT0FBTyw0QkFBNEI7SUFPckMsWUFBc0IsVUFBc0IsRUFBZ0QsUUFBZ0IsRUFBYyxhQUF5QztRQUE3SSxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBTGxDLGFBQVEsR0FBRyxpQkFBaUIsQ0FBQztRQUNoQyxtQkFBYyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDbkMsa0JBQWEsR0FBRyxJQUFJLDBCQUEwQixFQUFFLENBQUM7UUFJcEQsSUFBSSxhQUFhLEVBQUU7WUFDZixJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztTQUN0QztRQUNELElBQUksT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQUU7WUFDakQsSUFBSSxPQUFPLFFBQVEsS0FBSyxRQUFRLEVBQUU7Z0JBQzlCLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2FBQzVCO1lBQ0QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1NBQzFDO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sSUFBSSxJQUFJ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ZUFBZSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZTtZQUNuRCxPQUFPLEVBQUUsT0FBTztZQUNoQixPQUFPLEVBQUUsT0FBTztZQUNoQixjQUFjLEVBQUUsY0FBYztTQUNqQyxDQUNKLENBQUM7SUFDTixDQUFDO0lBRU0sMEJBQTBCLENBQUMsaUJBQXVEO1FBQ3JGLE1BQU0sR0FBRyxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLElBQUksR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxFQUFFO1lBQ25DLE1BQU0sSUFBSSxLQUFLLENBQUMsbUZBQW1GLENBQUMsQ0FBQztTQUN4RztRQUNELE1BQU0scUJBQXFCLEdBQUcsaUJBQWlCLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUN4RSxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLGtEQUFrRCxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQzdILENBQUM7OzBIQWxrQ1EsNEJBQTRCLDRDQU82Qix3QkFBd0I7OEhBUGpGLDRCQUE0QixjQUYzQixNQUFNOzRGQUVQLDRCQUE0QjtrQkFIeEMsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7OzBCQVFrRCxRQUFROzswQkFBSSxNQUFNOzJCQUFDLHdCQUF3Qjs7MEJBQXFCLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFjY2VzcyBDb250cm9sIGNsaWVudCBBUElcbiAqIE1hbmFnZSB1c2VyIHBlcm1pc3Npb25zLCBkYXRhIGdyb3VwcywgZnVuY3Rpb24gZ3JvdXBzIGFuZCBzZXJ2aWNlIGFncmVlbWVudHMgZnJvbSBjbGllbnQgc2lkZVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAyLjEwLjBcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vZ2l0aHViLmNvbS9CYWNrYmFzZS9iYWNrYmFzZS1vcGVuYXBpLXRvb2xzKS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9CYWNrYmFzZS9iYWNrYmFzZS1vcGVuYXBpLXRvb2xzXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBGdW5jdGlvbnNHZXRSZXNwb25zZUJvZHkgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgTGlzdE9mRnVuY3Rpb25Hcm91cHNXaXRoRGF0YUdyb3VwcyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBOb3RGb3VuZEVycm9yIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFByZXNlbnRhdGlvbkFwcHJvdmFsUGVybWlzc2lvbnMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHJlc2VudGF0aW9uQXBwcm92YWxTdGF0dXMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHJlc2VudGF0aW9uU2VydmljZUFncmVlbWVudCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzR2V0UmVzcG9uc2VCb2R5IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFNlcnZpY2VBZ3JlZW1lbnRTYXZlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc0dldFJlc3BvbnNlQm9keSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBVbmV4cG9zZWRVc2Vyc0dldFJlc3BvbnNlQm9keSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuXG5pbXBvcnQgeyBBQ0NFU1NfQ09OVFJPTF9CQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IEFjY2Vzc0NvbnRyb2xDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBHZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFNlcnZpY2UgQWdyZWVtZW50IElEICovXG4gICAgW1wiaWRcIl06IHN0cmluZztcbiAgICAvKiogVXNlciBJRCAqL1xuICAgIFtcInVzZXJJZFwiXTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEJ1c2luZXNzZnVuY3Rpb25zUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFNlcnZpY2UgQWdyZWVtZW50IElEICovXG4gICAgW1wiaWRcIl06IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFNlcnZpY2UgQWdyZWVtZW50IElEICovXG4gICAgW1wiaWRcIl06IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNTQVJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBTZXJ2aWNlIEFncmVlbWVudCBJRCAqL1xuICAgIFtcImlkXCJdOiBzdHJpbmc7XG4gICAgLyoqIFRoZSBzZWFyY2ggdGVybSB1c2VkIHRvIHNlYXJjaC4gKi9cbiAgICBbXCJxdWVyeVwiXT86IHN0cmluZztcbiAgICAvKiogUGFnZSBOdW1iZXIuIFNraXAgb3ZlciBwYWdlcyBvZiBlbGVtZW50cyBieSBzcGVjaWZ5aW5nIGEgc3RhcnQgdmFsdWUgZm9yIHRoZSBxdWVyeSAqL1xuICAgIFtcImZyb21cIl0/OiBudW1iZXI7XG4gICAgLyoqIFJlY29yZCBVVUlELiBBcyBhbiBhbHRlcm5hdGl2ZSBmb3Igc3BlY2lmeWluZyBcXCYjMzk7ZnJvbVxcJiMzOTsgdGhpcyBhbGxvd3MgdG8gcG9pbnQgdG8gdGhlIHJlY29yZCB0byBzdGFydCB0aGUgc2VsZWN0aW9uIGZyb20uICAqL1xuICAgIFtcImN1cnNvclwiXT86IHN0cmluZztcbiAgICAvKiogTGltaXQgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvbiB0aGUgcmVzcG9uc2UuIFdoZW4gdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIGN1cnNvciwgdGhlIHZhbHVlIGlzIGFsbG93ZWQgdG8gYmUgYSBuZWdhdGl2ZSBudW1iZXIgdG8gaW5kaWNhdGUgcmVxdWVzdGluZyByZWNvcmRzIHVwd2FyZHMgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQgaW5kaWNhdGVkIGJ5IHRoZSBjdXJzb3IuICAqL1xuICAgIFtcInNpemVcIl0/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0U2VydmljZUFncmVlbWVudHNSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogTGVnYWwgZW50aXR5IElEIHRoYXQgY3JlYXRlZCB0aGUgc2VydmljZSBhZ3JlZW1lbnQgKi9cbiAgICBbXCJjcmVhdG9ySWRcIl0/OiBzdHJpbmc7XG4gICAgLyoqIElkIG9mIHRoZSB1c2VyIHRoYXQgaXMgZXhwb3NlZCwgcmVndWxhciBvciBsb2NhbCBhZG1pbiBpbiB0aGUgc2VydmljZSBhZ3JlZW1lbnQuICovXG4gICAgW1widXNlcklkXCJdPzogc3RyaW5nO1xuICAgIC8qKiBUaGUgc2VhcmNoIHRlcm0gdXNlZCB0byBzZWFyY2guICovXG4gICAgW1wicXVlcnlcIl0/OiBzdHJpbmc7XG4gICAgLyoqIFBhZ2UgTnVtYmVyLiBTa2lwIG92ZXIgcGFnZXMgb2YgZWxlbWVudHMgYnkgc3BlY2lmeWluZyBhIHN0YXJ0IHZhbHVlIGZvciB0aGUgcXVlcnkgKi9cbiAgICBbXCJmcm9tXCJdPzogbnVtYmVyO1xuICAgIC8qKiBSZWNvcmQgVVVJRC4gQXMgYW4gYWx0ZXJuYXRpdmUgZm9yIHNwZWNpZnlpbmcgXFwmIzM5O2Zyb21cXCYjMzk7IHRoaXMgYWxsb3dzIHRvIHBvaW50IHRvIHRoZSByZWNvcmQgdG8gc3RhcnQgdGhlIHNlbGVjdGlvbiBmcm9tLiAgKi9cbiAgICBbXCJjdXJzb3JcIl0/OiBzdHJpbmc7XG4gICAgLyoqIExpbWl0IHRoZSBudW1iZXIgb2YgZWxlbWVudHMgb24gdGhlIHJlc3BvbnNlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBjdXJzb3IsIHRoZSB2YWx1ZSBpcyBhbGxvd2VkIHRvIGJlIGEgbmVnYXRpdmUgbnVtYmVyIHRvIGluZGljYXRlIHJlcXVlc3RpbmcgcmVjb3JkcyB1cHdhcmRzIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50IGluZGljYXRlZCBieSB0aGUgY3Vyc29yLiAgKi9cbiAgICBbXCJzaXplXCJdPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldFVuZXhwb3NlZFVzZXJzU0FSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogU2VydmljZSBBZ3JlZW1lbnQgSUQgKi9cbiAgICBbXCJpZFwiXTogc3RyaW5nO1xuICAgIC8qKiBUaGUgc2VhcmNoIHRlcm0gdXNlZCB0byBzZWFyY2guICovXG4gICAgW1wicXVlcnlcIl0/OiBzdHJpbmc7XG4gICAgLyoqIFBhZ2UgTnVtYmVyLiBTa2lwIG92ZXIgcGFnZXMgb2YgZWxlbWVudHMgYnkgc3BlY2lmeWluZyBhIHN0YXJ0IHZhbHVlIGZvciB0aGUgcXVlcnkgKi9cbiAgICBbXCJmcm9tXCJdPzogbnVtYmVyO1xuICAgIC8qKiBSZWNvcmQgVVVJRC4gQXMgYW4gYWx0ZXJuYXRpdmUgZm9yIHNwZWNpZnlpbmcgXFwmIzM5O2Zyb21cXCYjMzk7IHRoaXMgYWxsb3dzIHRvIHBvaW50IHRvIHRoZSByZWNvcmQgdG8gc3RhcnQgdGhlIHNlbGVjdGlvbiBmcm9tLiAgKi9cbiAgICBbXCJjdXJzb3JcIl0/OiBzdHJpbmc7XG4gICAgLyoqIExpbWl0IHRoZSBudW1iZXIgb2YgZWxlbWVudHMgb24gdGhlIHJlc3BvbnNlLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBjdXJzb3IsIHRoZSB2YWx1ZSBpcyBhbGxvd2VkIHRvIGJlIGEgbmVnYXRpdmUgbnVtYmVyIHRvIGluZGljYXRlIHJlcXVlc3RpbmcgcmVjb3JkcyB1cHdhcmRzIGZyb20gdGhlIHN0YXJ0aW5nIHBvaW50IGluZGljYXRlZCBieSB0aGUgY3Vyc29yLiAgKi9cbiAgICBbXCJzaXplXCJdPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RVc2Vyc0FkZFNBUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFNlcnZpY2UgQWdyZWVtZW50IElEICovXG4gICAgW1wiaWRcIl06IHN0cmluZztcbiAgICAvKiogIyBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQWRkcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbCAqL1xuICAgIFtcInVzZXJzRm9yU2VydmljZUFncmVlbWVudFwiXT86IFVzZXJzRm9yU2VydmljZUFncmVlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3N0VXNlcnNSZW1vdmVTQVJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBTZXJ2aWNlIEFncmVlbWVudCBJRCAqL1xuICAgIFtcImlkXCJdOiBzdHJpbmc7XG4gICAgLyoqICMgUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIFJlbW92ZXMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5SZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MucmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogcmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsICovXG4gICAgW1widXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50XCJdPzogVXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFB1dEFzc2lnblVzZXJzUGVybWlzc2lvbnNSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogU2VydmljZSBBZ3JlZW1lbnQgSUQgKi9cbiAgICBbXCJpZFwiXTogc3RyaW5nO1xuICAgIC8qKiBVc2VyIElEICovXG4gICAgW1widXNlcklkXCJdOiBzdHJpbmc7XG4gICAgLyoqICMgQXNzaWduIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7UFVUJiN4NjA7ICAgIFVwZGF0ZXMgYWxsIHBlcm1pc3Npb24gZm9yIGEgdXNlcnMgaW4gYSBnaXZlbiBzZXJ2aWNlIGFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuVXBkYXRlQXNzaWduVXNlcnNQZXJtaXNzaW9uc1JvdXRlICAqIFJvdXRlIElkOiBVcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYXNzaWduVXNlcnNQZXJtaXNzaW9ucyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmFzc2lnblVzZXJzUGVybWlzc2lvbnMgKi9cbiAgICBbXCJsaXN0T2ZGdW5jdGlvbkdyb3Vwc1dpdGhEYXRhR3JvdXBzXCJdPzogTGlzdE9mRnVuY3Rpb25Hcm91cHNXaXRoRGF0YUdyb3Vwcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQdXRTZXJ2aWNlQWdyZWVtZW50U2F2ZVJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBTZXJ2aWNlIEFncmVlbWVudCBJRCAqL1xuICAgIFtcImlkXCJdOiBzdHJpbmc7XG4gICAgLyoqICMgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQVVQmI3g2MDsgICAgUmVxdWVzdCBtZXRob2QgUFVUIGZvciB1cGRhdGluZyBzZXJ2aWNlIGFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuRWRpdFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogRWRpdFNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5lZGl0U2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OkVkaXRTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWwgKi9cbiAgICBbXCJzZXJ2aWNlQWdyZWVtZW50U2F2ZVwiXT86IFNlcnZpY2VBZ3JlZW1lbnRTYXZlO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFNlcnZpY2VBZ3JlZW1lbnRzSHR0cFNlcnZpY2Uge1xuXG4gICAgcHJvdGVjdGVkIGJhc2VQYXRoID0gJy9hY2Nlc3MtY29udHJvbCc7XG4gICAgcHVibGljIGRlZmF1bHRIZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCk7XG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgQWNjZXNzQ29udHJvbENvbmZpZ3VyYXRpb24oKTtcbiAgICBwdWJsaWMgZW5jb2RlcjogSHR0cFBhcmFtZXRlckNvZGVjO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQUNDRVNTX0NPTlRST0xfQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uOiBBY2Nlc3NDb250cm9sQ29uZmlndXJhdGlvbikge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPSB0aGlzLmJhc2VQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmNvZGVyID0gdGhpcy5jb25maWd1cmF0aW9uLmVuY29kZXIgfHwgbmV3IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYygpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBhZGRUb0h0dHBQYXJhbXMoaHR0cFBhcmFtczogSHR0cFBhcmFtcywgdmFsdWU6IGFueSwga2V5Pzogc3RyaW5nKTogSHR0cFBhcmFtcyB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBEYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zOiBIdHRwUGFyYW1zLCB2YWx1ZT86IGFueSwga2V5Pzogc3RyaW5nKTogSHR0cFBhcmFtcyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICh2YWx1ZSBhcyBhbnlbXSkuZm9yRWFjaCggZWxlbSA9PiBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgZWxlbSwga2V5KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZhbHVlIGFzIERhdGUpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcImtleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgRGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKCBrID0+IGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICAgICAgICAgICAgICAgICAgaHR0cFBhcmFtcywgdmFsdWVba10sIGtleSAhPSBudWxsID8gYCR7a2V5fS4ke2t9YCA6IGspKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IGh0dHBQYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIG5vdCBvYmplY3Qgb3IgYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdCBBc3NpZ25lZCBwZXJtaXNzaW9ucyBmb3IgYSB1c2VycyBpbiBhIHNlcnZpY2UgYWdyZWVtZW50LiAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgQXNzaWduZWQgcGVybWlzc2lvbnMgZm9yIGEgdXNlcnMgaW4gYSBzZXJ2aWNlIGFncmVlbWVudC4gLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0dXJucyB1c2VyIHBlcm1pc3Npb25zIGFuZCBhcHByb3ZhbCBpZCBmb3Igc3BlY2lmaWMgdXNlciBhbmQgc2VydmljZSBhZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlVwZGF0ZUFzc2lnblVzZXJzUGVybWlzc2lvbnNSb3V0ZSAgKiBSb3V0ZSBJZDogVXBkYXRlQXNzaWduVXNlcnNQZXJtaXNzaW9uc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFzc2lnblVzZXJzUGVybWlzc2lvbnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDphc3NpZ25Vc2Vyc1Blcm1pc3Npb25zXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEFzc2lnblVzZXJzUGVybWlzc2lvbnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFzc2lnblVzZXJzUGVybWlzc2lvbnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPFByZXNlbnRhdGlvbkFwcHJvdmFsUGVybWlzc2lvbnM+O1xuICAgIC8qKlxuICAgICAqIExpc3QgQXNzaWduZWQgcGVybWlzc2lvbnMgZm9yIGEgdXNlcnMgaW4gYSBzZXJ2aWNlIGFncmVlbWVudC4gLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IEFzc2lnbmVkIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHVybnMgdXNlciBwZXJtaXNzaW9ucyBhbmQgYXBwcm92YWwgaWQgZm9yIHNwZWNpZmljIHVzZXIgYW5kIHNlcnZpY2UgYWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5VcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgSWQ6IFVwZGF0ZUFzc2lnblVzZXJzUGVybWlzc2lvbnNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5hc3NpZ25Vc2Vyc1Blcm1pc3Npb25zICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YXNzaWduVXNlcnNQZXJtaXNzaW9uc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByZXNlbnRhdGlvbkFwcHJvdmFsUGVybWlzc2lvbnM+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IEFzc2lnbmVkIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCBBc3NpZ25lZCBwZXJtaXNzaW9ucyBmb3IgYSB1c2VycyBpbiBhIHNlcnZpY2UgYWdyZWVtZW50LiAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXR1cm5zIHVzZXIgcGVybWlzc2lvbnMgYW5kIGFwcHJvdmFsIGlkIGZvciBzcGVjaWZpYyB1c2VyIGFuZCBzZXJ2aWNlIGFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuVXBkYXRlQXNzaWduVXNlcnNQZXJtaXNzaW9uc1JvdXRlICAqIFJvdXRlIElkOiBVcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYXNzaWduVXNlcnNQZXJtaXNzaW9ucyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmFzc2lnblVzZXJzUGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXNzaWduVXNlcnNQZXJtaXNzaW9ucyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0QXNzaWduVXNlcnNQZXJtaXNzaW9uc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJlc2VudGF0aW9uQXBwcm92YWxQZXJtaXNzaW9ucz4+O1xuICAgIC8qKlxuICAgICAqIExpc3QgQXNzaWduZWQgcGVybWlzc2lvbnMgZm9yIGEgdXNlcnMgaW4gYSBzZXJ2aWNlIGFncmVlbWVudC4gLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IEFzc2lnbmVkIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHVybnMgdXNlciBwZXJtaXNzaW9ucyBhbmQgYXBwcm92YWwgaWQgZm9yIHNwZWNpZmljIHVzZXIgYW5kIHNlcnZpY2UgYWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5VcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgSWQ6IFVwZGF0ZUFzc2lnblVzZXJzUGVybWlzc2lvbnNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5hc3NpZ25Vc2Vyc1Blcm1pc3Npb25zICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YXNzaWduVXNlcnNQZXJtaXNzaW9uc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2lkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJpZFwiXTtcbiAgICAgICAgaWYgKF9pZCA9PT0gbnVsbCB8fCBfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF91c2VySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInVzZXJJZFwiXTtcbiAgICAgICAgaWYgKF91c2VySWQgPT09IG51bGwgfHwgX3VzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB1c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQcmVzZW50YXRpb25BcHByb3ZhbFBlcm1pc3Npb25zPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfdXNlcklkKSl9L3Blcm1pc3Npb25zYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFzc2lnblVzZXJzUGVybWlzc2lvbnNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFzc2lnblVzZXJzUGVybWlzc2lvbnNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2lkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJpZFwiXTtcbiAgICAgICAgaWYgKF9pZCA9PT0gbnVsbCB8fCBfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF91c2VySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInVzZXJJZFwiXTtcbiAgICAgICAgaWYgKF91c2VySWQgPT09IG51bGwgfHwgX3VzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB1c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfdXNlcklkKSl9L3Blcm1pc3Npb25zYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IEJ1c2luZXNzIEZ1bmN0aW9ucyBGb3IgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IEJ1c2luZXNzIEZ1bmN0aW9ucyBGb3IgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgYnVzaW5lc3MgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGEgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBSRVNUIGVuZHBvaW50IGhhbmRsZXI6ICAgICAqIEV4dGVuZGluZyBoYW5kbGVyIGNsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5idXNpbmVzcy5mbG93cy5HZXRCdXNpbmVzc0Z1bmN0aW9uc0ZvclNlcnZpY2VBZ3JlZW1lbnRGbG93ICBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QnVzaW5lc3NmdW5jdGlvbnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJ1c2luZXNzZnVuY3Rpb25zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBcnJheTxGdW5jdGlvbnNHZXRSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IEJ1c2luZXNzIEZ1bmN0aW9ucyBGb3IgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IEJ1c2luZXNzIEZ1bmN0aW9ucyBGb3IgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgYnVzaW5lc3MgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGEgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBSRVNUIGVuZHBvaW50IGhhbmRsZXI6ICAgICAqIEV4dGVuZGluZyBoYW5kbGVyIGNsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5idXNpbmVzcy5mbG93cy5HZXRCdXNpbmVzc0Z1bmN0aW9uc0ZvclNlcnZpY2VBZ3JlZW1lbnRGbG93ICBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QnVzaW5lc3NmdW5jdGlvbnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJ1c2luZXNzZnVuY3Rpb25zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PEZ1bmN0aW9uc0dldFJlc3BvbnNlQm9keT4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IEJ1c2luZXNzIEZ1bmN0aW9ucyBGb3IgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IEJ1c2luZXNzIEZ1bmN0aW9ucyBGb3IgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgYnVzaW5lc3MgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGEgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBSRVNUIGVuZHBvaW50IGhhbmRsZXI6ICAgICAqIEV4dGVuZGluZyBoYW5kbGVyIGNsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5idXNpbmVzcy5mbG93cy5HZXRCdXNpbmVzc0Z1bmN0aW9uc0ZvclNlcnZpY2VBZ3JlZW1lbnRGbG93ICBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QnVzaW5lc3NmdW5jdGlvbnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJ1c2luZXNzZnVuY3Rpb25zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxGdW5jdGlvbnNHZXRSZXNwb25zZUJvZHk+Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCBCdXNpbmVzcyBGdW5jdGlvbnMgRm9yIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCBCdXNpbmVzcyBGdW5jdGlvbnMgRm9yIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7R0VUJiN4NjA7ICAgIFByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgYXZhaWxhYmxlIGJ1c2luZXNzIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIGZvciBhIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgUkVTVCBlbmRwb2ludCBoYW5kbGVyOiAgICAgKiBFeHRlbmRpbmcgaGFuZGxlciBjbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMuYnVzaW5lc3MuZmxvd3MuR2V0QnVzaW5lc3NGdW5jdGlvbnNGb3JTZXJ2aWNlQWdyZWVtZW50RmxvdyAgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJ1c2luZXNzZnVuY3Rpb25zKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCdXNpbmVzc2Z1bmN0aW9uc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QnVzaW5lc3NmdW5jdGlvbnMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PEZ1bmN0aW9uc0dldFJlc3BvbnNlQm9keT4+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX0vYnVzaW5lc3MtZnVuY3Rpb25zYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEJ1c2luZXNzZnVuY3Rpb25zVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCdXNpbmVzc2Z1bmN0aW9uc1JlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEJ1c2luZXNzZnVuY3Rpb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L2J1c2luZXNzLWZ1bmN0aW9uc2A7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgcGFydGljaXBhbnRzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgcGFydGljaXBhbnRzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHJpZXZlcyBMZWdhbCBFbnRpdGllcyB0aGF0IGFyZSBwYXJ0aWNpcGFudHMgaW4gU2VydmljZSBBZ3JlZW1lbnQgZnJvbSB0aGUgY29udGV4dC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuR2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JvdXRlICAqIFJvdXRlIElkOiBHZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZ2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50cyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb250ZXh0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50cyhvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNHZXRSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBwYXJ0aWNpcGFudHMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBwYXJ0aWNpcGFudHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIExlZ2FsIEVudGl0aWVzIHRoYXQgYXJlIHBhcnRpY2lwYW50cyBpbiBTZXJ2aWNlIEFncmVlbWVudCBmcm9tIHRoZSBjb250ZXh0LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUm91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENvbnRleHRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzKG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzR2V0UmVzcG9uc2VCb2R5Pj4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgTGVnYWwgRW50aXRpZXMgdGhhdCBhcmUgcGFydGljaXBhbnRzIGluIFNlcnZpY2UgQWdyZWVtZW50IGZyb20gdGhlIGNvbnRleHQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpnZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q29udGV4dFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMob2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzR2V0UmVzcG9uc2VCb2R5Pj4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgTGVnYWwgRW50aXRpZXMgdGhhdCBhcmUgcGFydGljaXBhbnRzIGluIFNlcnZpY2UgQWdyZWVtZW50IGZyb20gdGhlIGNvbnRleHQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpnZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q29udGV4dFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMob2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNHZXRSZXNwb25zZUJvZHk+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy91c2VyY29udGV4dC9wYXJ0aWNpcGFudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29udGV4dFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNVcmwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzL3VzZXJjb250ZXh0L3BhcnRpY2lwYW50c2A7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgcGFydGljaXBhbnRzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgUmV0cmlldmUgU2VydmljZSBBZ3JlZW1lbnQgcGFydGljaXBhbnRzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHJpZXZlcyBMZWdhbCBFbnRpdGllcyB0aGF0IGFyZSBwYXJ0aWNpcGFudHMgaW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpnZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50cyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8QXJyYXk8U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c0dldFJlc3BvbnNlQm9keT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgTGVnYWwgRW50aXRpZXMgdGhhdCBhcmUgcGFydGljaXBhbnRzIGluIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUm91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXJyYXk8U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c0dldFJlc3BvbnNlQm9keT4+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBwYXJ0aWNpcGFudHMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBSZXRyaWV2ZSBTZXJ2aWNlIEFncmVlbWVudCBwYXJ0aWNpcGFudHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0cmlldmVzIExlZ2FsIEVudGl0aWVzIHRoYXQgYXJlIHBhcnRpY2lwYW50cyBpbiBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuR2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JvdXRlICAqIFJvdXRlIElkOiBHZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZ2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50cyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzR2V0UmVzcG9uc2VCb2R5Pj4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIFJldHJpZXZlIFNlcnZpY2UgQWdyZWVtZW50IHBhcnRpY2lwYW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXRyaWV2ZXMgTGVnYWwgRW50aXRpZXMgdGhhdCBhcmUgcGFydGljaXBhbnRzIGluIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUm91dGUgICogUm91dGUgSWQ6IEdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50c1JlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRQYXJ0aWNpcGFudHNHZXRSZXNwb25zZUJvZHk+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3BhcnRpY2lwYW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50UGFydGljaXBhbnRzUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0U2VydmljZUFncmVlbWVudFBhcnRpY2lwYW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlLWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9pZCkpfS9wYXJ0aWNpcGFudHNgO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgdXNlcnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IHVzZXJzIGluIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7R0VUJiN4NjA7ICAgIFByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgdXNlcnMgdGhhdCBiZWxvbmcgdG8gYSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjIEV4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50Lkxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogTGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpsaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudFVzZXJzU0EocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1NBUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBcnJheTxTZXJ2aWNlQWdyZWVtZW50VXNlcnNHZXRSZXNwb25zZUJvZHk+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IHVzZXJzIGluIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCB1c2VycyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO0dFVCYjeDYwOyAgICBQcm92aWRlcyBhIGxpc3Qgb2YgYWxsIHVzZXJzIHRoYXQgYmVsb25nIHRvIGEgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5MaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IExpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5saXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6bGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1NBKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxTZXJ2aWNlQWdyZWVtZW50VXNlcnNHZXRSZXNwb25zZUJvZHk+Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCB1c2VycyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgdXNlcnMgaW4gU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1c2VycyB0aGF0IGJlbG9uZyB0byBhIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyMgRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBMaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MubGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNTQShyZXF1ZXN0UGFyYW1ldGVyczogR2V0U2VydmljZUFncmVlbWVudFVzZXJzU0FSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFycmF5PFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc0dldFJlc3BvbnNlQm9keT4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IHVzZXJzIGluIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCB1c2VycyBpbiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO0dFVCYjeDYwOyAgICBQcm92aWRlcyBhIGxpc3Qgb2YgYWxsIHVzZXJzIHRoYXQgYmVsb25nIHRvIGEgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjIyBFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5MaXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IExpc3RVc2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5saXN0VXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6bGlzdFVzZXJzRm9yU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1NBKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0U2VydmljZUFncmVlbWVudFVzZXJzU0EuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3F1ZXJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJxdWVyeVwiXTtcbiAgICAgICAgY29uc3QgX2Zyb20gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZyb21cIl07XG4gICAgICAgIGNvbnN0IF9jdXJzb3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1cnNvclwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9xdWVyeSAhPT0gdW5kZWZpbmVkICYmIF9xdWVyeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3F1ZXJ5LCAncXVlcnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxBcnJheTxTZXJ2aWNlQWdyZWVtZW50VXNlcnNHZXRSZXNwb25zZUJvZHk+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1NBVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50VXNlcnNTQVJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFNlcnZpY2VBZ3JlZW1lbnRVc2Vyc1NBLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9xdWVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicXVlcnlcIl07XG4gICAgICAgIGNvbnN0IF9mcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJmcm9tXCJdO1xuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9zaXplID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzaXplXCJdO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZnJvbSAhPT0gdW5kZWZpbmVkICYmIF9mcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZnJvbSwgJ2Zyb20nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2N1cnNvciAhPT0gdW5kZWZpbmVkICYmIF9jdXJzb3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9jdXJzb3IsICdjdXJzb3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3NpemUgIT09IHVuZGVmaW5lZCAmJiBfc2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NpemUsICdzaXplJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtZXRlcnMudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX0vdXNlcnMke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnJ31gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgU2VydmljZSBBZ3JlZW1lbnRzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCBTZXJ2aWNlIEFncmVlbWVudHMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUmV0dXJucyBhIGxpc3Qgb2YgYWxsIHNlcnZpY2UgYWdyZWVtZW50cyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkIGJ5IHRoZSBnaXZlbiBMZWdhbCBFbnRpdHkgKGNyZWF0b3IpICBwbHVzIGxpc3Qgb2Ygc2VydmljZSBhZ3JlZW1lbnRzIHdoaWNoIGFyZSB1bmRlciBoaWVyYXJjaHkgdW5kZXIgdGhlIHByb3ZpZGVkIGNyZWF0b3JJZCwgb3IgdW5kZXIgdGhlIHVzZXJzIGxlZ2FsIGVudGl0eSBpZiBjcmVhdG9ySWQgaXMgbm90IHByb3ZpZGVkLiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5MaXN0U2VydmljZUFncmVlbWVudHNIaWVyYXJjaHlSb3V0ZSAgKiBSb3V0ZSBJZDogTGlzdFNlcnZpY2VBZ3JlZW1lbnRzUm91dGVIaWVyYXJjaHkgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MubGlzdFNlcnZpY2VBZ3JlZW1lbnRzSGllcmFyY2h5ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6bGlzdFNlcnZpY2VBZ3JlZW1lbnRzSGllcmFyY2h5UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBcnJheTxQcmVzZW50YXRpb25TZXJ2aWNlQWdyZWVtZW50Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCBTZXJ2aWNlIEFncmVlbWVudHMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IFNlcnZpY2UgQWdyZWVtZW50cyAtICYjeDYwO0dFVCYjeDYwOyAgICBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgc2VydmljZSBhZ3JlZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYnkgdGhlIGdpdmVuIExlZ2FsIEVudGl0eSAoY3JlYXRvcikgIHBsdXMgbGlzdCBvZiBzZXJ2aWNlIGFncmVlbWVudHMgd2hpY2ggYXJlIHVuZGVyIGhpZXJhcmNoeSB1bmRlciB0aGUgcHJvdmlkZWQgY3JlYXRvcklkLCBvciB1bmRlciB0aGUgdXNlcnMgbGVnYWwgZW50aXR5IGlmIGNyZWF0b3JJZCBpcyBub3QgcHJvdmlkZWQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50Lkxpc3RTZXJ2aWNlQWdyZWVtZW50c0hpZXJhcmNoeVJvdXRlICAqIFJvdXRlIElkOiBMaXN0U2VydmljZUFncmVlbWVudHNSb3V0ZUhpZXJhcmNoeSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5saXN0U2VydmljZUFncmVlbWVudHNIaWVyYXJjaHkgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpsaXN0U2VydmljZUFncmVlbWVudHNIaWVyYXJjaHlSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTZXJ2aWNlQWdyZWVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0U2VydmljZUFncmVlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXJyYXk8UHJlc2VudGF0aW9uU2VydmljZUFncmVlbWVudD4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IFNlcnZpY2UgQWdyZWVtZW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgU2VydmljZSBBZ3JlZW1lbnRzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHVybnMgYSBsaXN0IG9mIGFsbCBzZXJ2aWNlIGFncmVlbWVudHMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBieSB0aGUgZ2l2ZW4gTGVnYWwgRW50aXR5IChjcmVhdG9yKSAgcGx1cyBsaXN0IG9mIHNlcnZpY2UgYWdyZWVtZW50cyB3aGljaCBhcmUgdW5kZXIgaGllcmFyY2h5IHVuZGVyIHRoZSBwcm92aWRlZCBjcmVhdG9ySWQsIG9yIHVuZGVyIHRoZSB1c2VycyBsZWdhbCBlbnRpdHkgaWYgY3JlYXRvcklkIGlzIG5vdCBwcm92aWRlZC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdFNlcnZpY2VBZ3JlZW1lbnRzSGllcmFyY2h5Um91dGUgICogUm91dGUgSWQ6IExpc3RTZXJ2aWNlQWdyZWVtZW50c1JvdXRlSGllcmFyY2h5ICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmxpc3RTZXJ2aWNlQWdyZWVtZW50c0hpZXJhcmNoeSAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RTZXJ2aWNlQWdyZWVtZW50c0hpZXJhcmNoeVJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8UHJlc2VudGF0aW9uU2VydmljZUFncmVlbWVudD4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IFNlcnZpY2UgQWdyZWVtZW50cyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgU2VydmljZSBBZ3JlZW1lbnRzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFJldHVybnMgYSBsaXN0IG9mIGFsbCBzZXJ2aWNlIGFncmVlbWVudHMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBieSB0aGUgZ2l2ZW4gTGVnYWwgRW50aXR5IChjcmVhdG9yKSAgcGx1cyBsaXN0IG9mIHNlcnZpY2UgYWdyZWVtZW50cyB3aGljaCBhcmUgdW5kZXIgaGllcmFyY2h5IHVuZGVyIHRoZSBwcm92aWRlZCBjcmVhdG9ySWQsIG9yIHVuZGVyIHRoZSB1c2VycyBsZWdhbCBlbnRpdHkgaWYgY3JlYXRvcklkIGlzIG5vdCBwcm92aWRlZC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuTGlzdFNlcnZpY2VBZ3JlZW1lbnRzSGllcmFyY2h5Um91dGUgICogUm91dGUgSWQ6IExpc3RTZXJ2aWNlQWdyZWVtZW50c1JvdXRlSGllcmFyY2h5ICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmxpc3RTZXJ2aWNlQWdyZWVtZW50c0hpZXJhcmNoeSAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0Omxpc3RTZXJ2aWNlQWdyZWVtZW50c0hpZXJhcmNoeVJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFNlcnZpY2VBZ3JlZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRTZXJ2aWNlQWdyZWVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9jcmVhdG9ySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImNyZWF0b3JJZFwiXTtcbiAgICAgICAgY29uc3QgX3VzZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcklkXCJdO1xuICAgICAgICBjb25zdCBfcXVlcnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInF1ZXJ5XCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2NyZWF0b3JJZCAhPT0gdW5kZWZpbmVkICYmIF9jcmVhdG9ySWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9jcmVhdG9ySWQsICdjcmVhdG9ySWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3VzZXJJZCAhPT0gdW5kZWZpbmVkICYmIF91c2VySWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl91c2VySWQsICd1c2VySWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZnJvbSAhPT0gdW5kZWZpbmVkICYmIF9mcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZnJvbSwgJ2Zyb20nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2N1cnNvciAhPT0gdW5kZWZpbmVkICYmIF9jdXJzb3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9jdXJzb3IsICdjdXJzb3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3NpemUgIT09IHVuZGVmaW5lZCAmJiBfc2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NpemUsICdzaXplJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PFByZXNlbnRhdGlvblNlcnZpY2VBZ3JlZW1lbnQ+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy9oaWVyYXJjaHlgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2VydmljZUFncmVlbWVudHNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldFNlcnZpY2VBZ3JlZW1lbnRzUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9jcmVhdG9ySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImNyZWF0b3JJZFwiXTtcbiAgICAgICAgY29uc3QgX3VzZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcklkXCJdO1xuICAgICAgICBjb25zdCBfcXVlcnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInF1ZXJ5XCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9jcmVhdG9ySWQgIT09IHVuZGVmaW5lZCAmJiBfY3JlYXRvcklkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3JlYXRvcklkLCAnY3JlYXRvcklkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF91c2VySWQgIT09IHVuZGVmaW5lZCAmJiBfdXNlcklkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fdXNlcklkLCAndXNlcklkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9xdWVyeSAhPT0gdW5kZWZpbmVkICYmIF9xdWVyeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3F1ZXJ5LCAncXVlcnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy9oaWVyYXJjaHkke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnJ31gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3QgYWxsIHVuZXhwb3NlZCB1c2VycyAtICYjeDYwO0dFVCYjeDYwOy5cbiAgICAgKiAjIExpc3QgYWxsIHVuZXhwb3NlZCB1c2VycyAtICYjeDYwO0dFVCYjeDYwOyAgICBQcm92aWRlcyBhIGxpc3Qgb2YgYWxsIHVuZXhwb3NlZCB1c2VycyB0aGF0IGJlbG9uZyB0byB0aGUgcGFydGljaXBhbnRzIHdobyBhcmUgc2hhcmluZyB1c2VycyBpbiB0aGUgZ2l2ZW4gU2VydmljZSBBZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkdldFVuZXhwb3NlZFVzZXJzUm91dGUgICogUm91dGUgSWQ6IEdldFVuZXhwb3NlZFVzZXJzUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZ2V0VW5leHBvc2VkVXNlcnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpnZXRVbmV4cG9zZWRVc2Vyc1JlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFVuZXhwb3NlZFVzZXJzU0EocmVxdWVzdFBhcmFtZXRlcnM6IEdldFVuZXhwb3NlZFVzZXJzU0FSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFycmF5PFVuZXhwb3NlZFVzZXJzR2V0UmVzcG9uc2VCb2R5Pj47XG4gICAgLyoqXG4gICAgICogTGlzdCBhbGwgdW5leHBvc2VkIHVzZXJzIC0gJiN4NjA7R0VUJiN4NjA7LlxuICAgICAqICMgTGlzdCBhbGwgdW5leHBvc2VkIHVzZXJzIC0gJiN4NjA7R0VUJiN4NjA7ICAgIFByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgdW5leHBvc2VkIHVzZXJzIHRoYXQgYmVsb25nIHRvIHRoZSBwYXJ0aWNpcGFudHMgd2hvIGFyZSBzaGFyaW5nIHVzZXJzIGluIHRoZSBnaXZlbiBTZXJ2aWNlIEFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuR2V0VW5leHBvc2VkVXNlcnNSb3V0ZSAgKiBSb3V0ZSBJZDogR2V0VW5leHBvc2VkVXNlcnNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5nZXRVbmV4cG9zZWRVc2VycyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmdldFVuZXhwb3NlZFVzZXJzUmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VW5leHBvc2VkVXNlcnNTQShyZXF1ZXN0UGFyYW1ldGVyczogR2V0VW5leHBvc2VkVXNlcnNTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxVbmV4cG9zZWRVc2Vyc0dldFJlc3BvbnNlQm9keT4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1bmV4cG9zZWQgdXNlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHBhcnRpY2lwYW50cyB3aG8gYXJlIHNoYXJpbmcgdXNlcnMgaW4gdGhlIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIElkOiBHZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFVuZXhwb3NlZFVzZXJzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRVbmV4cG9zZWRVc2Vyc1NBKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRVbmV4cG9zZWRVc2Vyc1NBUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxVbmV4cG9zZWRVc2Vyc0dldFJlc3BvbnNlQm9keT4+PjtcbiAgICAvKipcbiAgICAgKiBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsuXG4gICAgICogIyBMaXN0IGFsbCB1bmV4cG9zZWQgdXNlcnMgLSAmI3g2MDtHRVQmI3g2MDsgICAgUHJvdmlkZXMgYSBsaXN0IG9mIGFsbCB1bmV4cG9zZWQgdXNlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIHBhcnRpY2lwYW50cyB3aG8gYXJlIHNoYXJpbmcgdXNlcnMgaW4gdGhlIGdpdmVuIFNlcnZpY2UgQWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5HZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIElkOiBHZXRVbmV4cG9zZWRVc2Vyc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmdldFVuZXhwb3NlZFVzZXJzICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6Z2V0VW5leHBvc2VkVXNlcnNSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRVbmV4cG9zZWRVc2Vyc1NBKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRVbmV4cG9zZWRVc2Vyc1NBUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2lkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJpZFwiXTtcbiAgICAgICAgaWYgKF9pZCA9PT0gbnVsbCB8fCBfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRVbmV4cG9zZWRVc2Vyc1NBLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9xdWVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicXVlcnlcIl07XG4gICAgICAgIGNvbnN0IF9mcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJmcm9tXCJdO1xuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9zaXplID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzaXplXCJdO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfcXVlcnkgIT09IHVuZGVmaW5lZCAmJiBfcXVlcnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9xdWVyeSwgJ3F1ZXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXJyYXk8VW5leHBvc2VkVXNlcnNHZXRSZXNwb25zZUJvZHk+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzL3VuZXhwb3NlZGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRVbmV4cG9zZWRVc2Vyc1NBVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRVbmV4cG9zZWRVc2Vyc1NBUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0VW5leHBvc2VkVXNlcnNTQS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfcXVlcnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInF1ZXJ5XCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9xdWVyeSAhPT0gdW5kZWZpbmVkICYmIF9xdWVyeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3F1ZXJ5LCAncXVlcnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzL3VuZXhwb3NlZCR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7LlxuICAgICAqICMgQWRkIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIEFkZHMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5BZGRVc2VySW5TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5hZGRVc2Vyc0luU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdFVzZXJzQWRkU0EocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc0FkZFNBUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIC8qKlxuICAgICAqIEFkZCBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIEFkZCBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOyAgICBBZGRzIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBBZGRVc2VySW5TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDphZGRVc2Vyc0luU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RVc2Vyc0FkZFNBKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNBZGRTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICAvKipcbiAgICAgKiBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBBZGQgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgQWRkcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkFkZFVzZXJJblNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFkZFVzZXJzSW5TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0VXNlcnNBZGRTQShyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFVzZXJzQWRkU0FSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIC8qKlxuICAgICAqIEFkZCBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIEFkZCBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOyAgICBBZGRzIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuQWRkVXNlckluU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBBZGRVc2VySW5TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYWRkVXNlcnNJblNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDphZGRVc2Vyc0luU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RVc2Vyc0FkZFNBKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNBZGRTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcG9zdFVzZXJzQWRkU0EuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3VzZXJzRm9yU2VydmljZUFncmVlbWVudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50XCJdO1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlLWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9pZCkpfS91c2Vycy9hZGRgLFxuICAgICAgICAgICAgX3VzZXJzRm9yU2VydmljZUFncmVlbWVudCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHBvc3RVc2Vyc0FkZFNBVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNBZGRTQVJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3RVc2Vyc0FkZFNBLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF91c2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInVzZXJzRm9yU2VydmljZUFncmVlbWVudFwiXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX0vdXNlcnMvYWRkYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsuXG4gICAgICogIyBSZW1vdmUgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BPU1QmI3g2MDsgICAgUmVtb3ZlcyBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50ICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlJlbW92ZVVzZXJGcm9tU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBSZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5yZW1vdmVVc2Vyc0Zyb21TZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiByZW1vdmVVc2Vyc0Zyb21TZXJ2aWNlQWdyZWVtZW50UmVxdWVzdGVkSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdFVzZXJzUmVtb3ZlU0EocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RVc2Vyc1JlbW92ZVNBUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOy5cbiAgICAgKiAjIFJlbW92ZSBVc2VycyBpbiBhIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UE9TVCYjeDYwOyAgICBSZW1vdmVzIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IFJlbW92ZVVzZXJGcm9tU2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLnJlbW92ZVVzZXJzRnJvbVNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IHJlbW92ZVVzZXJzRnJvbVNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0VXNlcnNSZW1vdmVTQShyZXF1ZXN0UGFyYW1ldGVyczogUG9zdFVzZXJzUmVtb3ZlU0FSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7LlxuICAgICAqICMgUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIFJlbW92ZXMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5SZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MucmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogcmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RVc2Vyc1JlbW92ZVNBKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNSZW1vdmVTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7LlxuICAgICAqICMgUmVtb3ZlIFVzZXJzIGluIGEgU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQT1NUJiN4NjA7ICAgIFJlbW92ZXMgVXNlcnMgaW4gYSBTZXJ2aWNlIEFncmVlbWVudCAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5SZW1vdmVVc2VyRnJvbVNlcnZpY2VBZ3JlZW1lbnRSb3V0ZSAgKiBSb3V0ZSBJZDogUmVtb3ZlVXNlckZyb21TZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MucmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudCAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogcmVtb3ZlVXNlcnNGcm9tU2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RVc2Vyc1JlbW92ZVNBKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNSZW1vdmVTQVJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcG9zdFVzZXJzUmVtb3ZlU0EuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3VzZXJzRm9yU2VydmljZUFncmVlbWVudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcnNGb3JTZXJ2aWNlQWdyZWVtZW50XCJdO1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY2Vzc2dyb3Vwcy9zZXJ2aWNlLWFncmVlbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9pZCkpfS91c2Vycy9yZW1vdmVgLFxuICAgICAgICAgICAgX3VzZXJzRm9yU2VydmljZUFncmVlbWVudCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHBvc3RVc2Vyc1JlbW92ZVNBVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0VXNlcnNSZW1vdmVTQVJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3RVc2Vyc1JlbW92ZVNBLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF91c2Vyc0ZvclNlcnZpY2VBZ3JlZW1lbnQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInVzZXJzRm9yU2VydmljZUFncmVlbWVudFwiXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX0vdXNlcnMvcmVtb3ZlYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ24gcGVybWlzc2lvbnMgZm9yIGEgdXNlcnMgaW4gYSBzZXJ2aWNlIGFncmVlbWVudC4gLSAmI3g2MDtQVVQmI3g2MDsuXG4gICAgICogIyBBc3NpZ24gcGVybWlzc2lvbnMgZm9yIGEgdXNlcnMgaW4gYSBzZXJ2aWNlIGFncmVlbWVudC4gLSAmI3g2MDtQVVQmI3g2MDsgICAgVXBkYXRlcyBhbGwgcGVybWlzc2lvbiBmb3IgYSB1c2VycyBpbiBhIGdpdmVuIHNlcnZpY2UgYWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5VcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgSWQ6IFVwZGF0ZUFzc2lnblVzZXJzUGVybWlzc2lvbnNSb3V0ZSAgKiBSb3V0ZSBzb3VyY2UgZW5kcG9pbnQ6IGRpcmVjdDpidXNpbmVzcy5hc3NpZ25Vc2Vyc1Blcm1pc3Npb25zICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6YXNzaWduVXNlcnNQZXJtaXNzaW9uc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxQcmVzZW50YXRpb25BcHByb3ZhbFN0YXR1cz47XG4gICAgLyoqXG4gICAgICogQXNzaWduIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7UFVUJiN4NjA7LlxuICAgICAqICMgQXNzaWduIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7UFVUJiN4NjA7ICAgIFVwZGF0ZXMgYWxsIHBlcm1pc3Npb24gZm9yIGEgdXNlcnMgaW4gYSBnaXZlbiBzZXJ2aWNlIGFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuVXBkYXRlQXNzaWduVXNlcnNQZXJtaXNzaW9uc1JvdXRlICAqIFJvdXRlIElkOiBVcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYXNzaWduVXNlcnNQZXJtaXNzaW9ucyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmFzc2lnblVzZXJzUGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QXNzaWduVXNlcnNQZXJtaXNzaW9ucyhyZXF1ZXN0UGFyYW1ldGVyczogUHV0QXNzaWduVXNlcnNQZXJtaXNzaW9uc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQcmVzZW50YXRpb25BcHByb3ZhbFN0YXR1cz4+O1xuICAgIC8qKlxuICAgICAqIEFzc2lnbiBwZXJtaXNzaW9ucyBmb3IgYSB1c2VycyBpbiBhIHNlcnZpY2UgYWdyZWVtZW50LiAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIEFzc2lnbiBwZXJtaXNzaW9ucyBmb3IgYSB1c2VycyBpbiBhIHNlcnZpY2UgYWdyZWVtZW50LiAtICYjeDYwO1BVVCYjeDYwOyAgICBVcGRhdGVzIGFsbCBwZXJtaXNzaW9uIGZvciBhIHVzZXJzIGluIGEgZ2l2ZW4gc2VydmljZSBhZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LlVwZGF0ZUFzc2lnblVzZXJzUGVybWlzc2lvbnNSb3V0ZSAgKiBSb3V0ZSBJZDogVXBkYXRlQXNzaWduVXNlcnNQZXJtaXNzaW9uc1JvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmFzc2lnblVzZXJzUGVybWlzc2lvbnMgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDphc3NpZ25Vc2Vyc1Blcm1pc3Npb25zXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dEFzc2lnblVzZXJzUGVybWlzc2lvbnMocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEFzc2lnblVzZXJzUGVybWlzc2lvbnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFByZXNlbnRhdGlvbkFwcHJvdmFsU3RhdHVzPj47XG4gICAgLyoqXG4gICAgICogQXNzaWduIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7UFVUJiN4NjA7LlxuICAgICAqICMgQXNzaWduIHBlcm1pc3Npb25zIGZvciBhIHVzZXJzIGluIGEgc2VydmljZSBhZ3JlZW1lbnQuIC0gJiN4NjA7UFVUJiN4NjA7ICAgIFVwZGF0ZXMgYWxsIHBlcm1pc3Npb24gZm9yIGEgdXNlcnMgaW4gYSBnaXZlbiBzZXJ2aWNlIGFncmVlbWVudC4gICAgIyMjRXh0ZW5kYWJpbGl0eSAgICBFeHRlbmRhYmxlIHVzaW5nIEFwYWNoZSBDYW1lbDogICAgKiBSb3V0ZSBDbGFzczogY29tLmJhY2tiYXNlLnByZXNlbnRhdGlvbi5zZXJ2aWNlcy5hY2Nlc3Nncm91cHMucm91dGVzLnNlcnZpY2VhZ3JlZW1lbnQuVXBkYXRlQXNzaWduVXNlcnNQZXJtaXNzaW9uc1JvdXRlICAqIFJvdXRlIElkOiBVcGRhdGVBc3NpZ25Vc2Vyc1Blcm1pc3Npb25zUm91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuYXNzaWduVXNlcnNQZXJtaXNzaW9ucyAgKiBSb3V0ZSBkZXN0aW5hdGlvbiBlbmRwb2ludDogZGlyZWN0OmFzc2lnblVzZXJzUGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QXNzaWduVXNlcnNQZXJtaXNzaW9ucyhyZXF1ZXN0UGFyYW1ldGVyczogUHV0QXNzaWduVXNlcnNQZXJtaXNzaW9uc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QXNzaWduVXNlcnNQZXJtaXNzaW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfdXNlcklkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJ1c2VySWRcIl07XG4gICAgICAgIGlmIChfdXNlcklkID09PSBudWxsIHx8IF91c2VySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgdXNlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QXNzaWduVXNlcnNQZXJtaXNzaW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfbGlzdE9mRnVuY3Rpb25Hcm91cHNXaXRoRGF0YUdyb3VwcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibGlzdE9mRnVuY3Rpb25Hcm91cHNXaXRoRGF0YUdyb3Vwc1wiXTtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PFByZXNlbnRhdGlvbkFwcHJvdmFsU3RhdHVzPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfdXNlcklkKSl9L3Blcm1pc3Npb25zYCxcbiAgICAgICAgICAgIF9saXN0T2ZGdW5jdGlvbkdyb3Vwc1dpdGhEYXRhR3JvdXBzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHV0QXNzaWduVXNlcnNQZXJtaXNzaW9uc1VybChyZXF1ZXN0UGFyYW1ldGVyczogUHV0QXNzaWduVXNlcnNQZXJtaXNzaW9uc1JlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEFzc2lnblVzZXJzUGVybWlzc2lvbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3VzZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widXNlcklkXCJdO1xuICAgICAgICBpZiAoX3VzZXJJZCA9PT0gbnVsbCB8fCBfdXNlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEFzc2lnblVzZXJzUGVybWlzc2lvbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2xpc3RPZkZ1bmN0aW9uR3JvdXBzV2l0aERhdGFHcm91cHMgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImxpc3RPZkZ1bmN0aW9uR3JvdXBzV2l0aERhdGFHcm91cHNcIl07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjZXNzZ3JvdXBzL3NlcnZpY2UtYWdyZWVtZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2lkKSl9L3VzZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfdXNlcklkKSl9L3Blcm1pc3Npb25zYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UFVUJiN4NjA7ICAgIFJlcXVlc3QgbWV0aG9kIFBVVCBmb3IgdXBkYXRpbmcgc2VydmljZSBhZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkVkaXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEVkaXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZWRpdFNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpFZGl0U2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dFNlcnZpY2VBZ3JlZW1lbnRTYXZlKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRTZXJ2aWNlQWdyZWVtZW50U2F2ZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICAvKipcbiAgICAgKiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UFVUJiN4NjA7ICAgIFJlcXVlc3QgbWV0aG9kIFBVVCBmb3IgdXBkYXRpbmcgc2VydmljZSBhZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkVkaXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEVkaXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZWRpdFNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpFZGl0U2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dFNlcnZpY2VBZ3JlZW1lbnRTYXZlKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRTZXJ2aWNlQWdyZWVtZW50U2F2ZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICAvKipcbiAgICAgKiBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOy5cbiAgICAgKiAjIFNlcnZpY2UgQWdyZWVtZW50IC0gJiN4NjA7UFVUJiN4NjA7ICAgIFJlcXVlc3QgbWV0aG9kIFBVVCBmb3IgdXBkYXRpbmcgc2VydmljZSBhZ3JlZW1lbnQuICAgICMjI0V4dGVuZGFiaWxpdHkgICAgRXh0ZW5kYWJsZSB1c2luZyBBcGFjaGUgQ2FtZWw6ICAgICogUm91dGUgQ2xhc3M6IGNvbS5iYWNrYmFzZS5wcmVzZW50YXRpb24uc2VydmljZXMuYWNjZXNzZ3JvdXBzLnJvdXRlcy5zZXJ2aWNlYWdyZWVtZW50LkVkaXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgSWQ6IEVkaXRTZXJ2aWNlQWdyZWVtZW50Um91dGUgICogUm91dGUgc291cmNlIGVuZHBvaW50OiBkaXJlY3Q6YnVzaW5lc3MuZWRpdFNlcnZpY2VBZ3JlZW1lbnQgICogUm91dGUgZGVzdGluYXRpb24gZW5kcG9pbnQ6IGRpcmVjdDpFZGl0U2VydmljZUFncmVlbWVudFJlcXVlc3RlZEludGVybmFsXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dFNlcnZpY2VBZ3JlZW1lbnRTYXZlKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRTZXJ2aWNlQWdyZWVtZW50U2F2ZVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogU2VydmljZSBBZ3JlZW1lbnQgLSAmI3g2MDtQVVQmI3g2MDsuXG4gICAgICogIyBTZXJ2aWNlIEFncmVlbWVudCAtICYjeDYwO1BVVCYjeDYwOyAgICBSZXF1ZXN0IG1ldGhvZCBQVVQgZm9yIHVwZGF0aW5nIHNlcnZpY2UgYWdyZWVtZW50LiAgICAjIyNFeHRlbmRhYmlsaXR5ICAgIEV4dGVuZGFibGUgdXNpbmcgQXBhY2hlIENhbWVsOiAgICAqIFJvdXRlIENsYXNzOiBjb20uYmFja2Jhc2UucHJlc2VudGF0aW9uLnNlcnZpY2VzLmFjY2Vzc2dyb3Vwcy5yb3V0ZXMuc2VydmljZWFncmVlbWVudC5FZGl0U2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIElkOiBFZGl0U2VydmljZUFncmVlbWVudFJvdXRlICAqIFJvdXRlIHNvdXJjZSBlbmRwb2ludDogZGlyZWN0OmJ1c2luZXNzLmVkaXRTZXJ2aWNlQWdyZWVtZW50ICAqIFJvdXRlIGRlc3RpbmF0aW9uIGVuZHBvaW50OiBkaXJlY3Q6RWRpdFNlcnZpY2VBZ3JlZW1lbnRSZXF1ZXN0ZWRJbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRTZXJ2aWNlQWdyZWVtZW50U2F2ZShyZXF1ZXN0UGFyYW1ldGVyczogUHV0U2VydmljZUFncmVlbWVudFNhdmVSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfaWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlkXCJdO1xuICAgICAgICBpZiAoX2lkID09PSBudWxsIHx8IF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dFNlcnZpY2VBZ3JlZW1lbnRTYXZlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9zZXJ2aWNlQWdyZWVtZW50U2F2ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VydmljZUFncmVlbWVudFNhdmVcIl07XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX1gLFxuICAgICAgICAgICAgX3NlcnZpY2VBZ3JlZW1lbnRTYXZlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHV0U2VydmljZUFncmVlbWVudFNhdmVVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFB1dFNlcnZpY2VBZ3JlZW1lbnRTYXZlUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9pZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWRcIl07XG4gICAgICAgIGlmIChfaWQgPT09IG51bGwgfHwgX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0U2VydmljZUFncmVlbWVudFNhdmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3NlcnZpY2VBZ3JlZW1lbnRTYXZlID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzZXJ2aWNlQWdyZWVtZW50U2F2ZVwiXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9hY2Nlc3Nncm91cHMvc2VydmljZS1hZ3JlZW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfaWQpKX1gO1xuICAgIH1cblxufVxuIl19