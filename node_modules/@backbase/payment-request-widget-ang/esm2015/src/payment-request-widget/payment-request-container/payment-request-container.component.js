import { Component, Directive, ViewChild, Output, EventEmitter } from '@angular/core';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { combineLatest } from 'rxjs';
import { pluck, map, tap } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../payment-request.service";
import * as i2 from "@angular/router";
import * as i3 from "@backbase/ui-ang/alert";
import * as i4 from "../payment-request-tpp-information/payment-request-tpp-information.component";
import * as i5 from "../payment-request-amount/payment-request-amount.component";
import * as i6 from "../payment-request-account-selector/payment-request-account-selector.component";
import * as i7 from "@backbase/ui-ang/loading-indicator";
import * as i8 from "../payment-request-error/payment-request-error.component";
import * as i9 from "@angular/common";
import * as i10 from "@backbase/ui-ang/button";
export class PaymentRequestContainerComponent {
    constructor(service, route) {
        this.service = service;
        this.route = route;
        /**
         * Component context
         */
        this.hostRef = this;
        /**
         * Emitter that fires when allowing payment
         */
        this.redirectToAllowUrl = new EventEmitter();
        /**
         * Emitter that fires when rejecting payment
         */
        this.redirectToRejectUrl = new EventEmitter();
        /**
         * Error notification template reference
         */
        this.notificationErrorTemplate = '';
        /**
         * Stream of payment request ID
         */
        this.paymentRequestId = this.getRouteParam(this.route, 'paymentRequestId').pipe(map(paymentRequestId => paymentRequestId || ''));
        /**
         * Stream of Payment request
         */
        this.paymentRequest = this.service.paymentRequest.pipe(tap((paymentRequest) => {
            if (paymentRequest && paymentRequest.selectedAccount) {
                this.selectedAccount = paymentRequest.selectedAccount;
            }
        }));
        /**
         * Stream of loading spinner visibility flag
         */
        this.loading = this.service.loading;
        /**
         * Stream of Payment request errors
         */
        this.error = this.service.error;
        /**
         * Show account error flag
         */
        this.showAccountError = false;
        /**
         * Stream of saving flag
         */
        this.saving = this.service.saving;
        /**
         * Stream of saving errors
         */
        this.savingError = this.service.savingError;
    }
    /**
     * Sends allow payment request
     */
    allowPaymentRequest() {
        this.showAccountError = false;
        if (this.selectedAccount) {
            this.service
                .allowPaymentRequest(this.selectedAccount, this.notificationErrorTemplate)
                .pipe(tap((redirect) => {
                if (redirect.redirectUrl) {
                    this.redirectToAllowUrl.emit(redirect.redirectUrl);
                }
            }))
                .subscribe();
        }
        else {
            this.showAccountError = true;
        }
    }
    /**
     * Sends reject payment request
     */
    rejectPaymentRequest() {
        this.service
            .rejectPaymentRequest(this.notificationErrorTemplate)
            .pipe(tap((response) => {
            if (response.redirectUrl) {
                this.redirectToRejectUrl.emit(response.redirectUrl);
            }
        }))
            .subscribe();
    }
    ngOnInit() {
        this.service.getPaymentRequestFrom(this.paymentRequestId);
    }
    getRouteParam(route, param) {
        const paramValue = combineLatest(route.paramMap.pipe(pluck('params', param)), route.queryParamMap.pipe(pluck('params', param)), (params, qparams) => {
            return params ? params : qparams;
        });
        if (!route.parent) {
            return paramValue;
        }
        // ensure that level that has actual value keeps it from being cleared
        return combineLatest([paramValue, this.getRouteParam(route === null || route === void 0 ? void 0 : route.parent, param)]).pipe(map(params => params[0] || params[1]));
    }
}
PaymentRequestContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: PaymentRequestContainerComponent, deps: [{ token: i1.PaymentRequestService }, { token: i2.ActivatedRoute }], target: i0.ɵɵFactoryTarget.Component });
PaymentRequestContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: PaymentRequestContainerComponent, selector: "bb-payment-request-container", outputs: { redirectToAllowUrl: "redirectToAllowUrl", redirectToRejectUrl: "redirectToRejectUrl" }, viewQueries: [{ propertyName: "notificationErrorTemplate", first: true, predicate: ["notificationError"], descendants: true, static: true }], ngImport: i0, template: "<ng-container bbPaymentRequestWidgetCustomizable [bbHostRef]=\"hostRef\" [bbTemplateContext]=\"paymentRequest | async\">\n</ng-container>\n\n<ng-template bbPaymentRequestWidgetCustomizable let-hostRef let-paymentRequest=\"context\">\n  <ng-container *ngIf=\"hostRef.paymentRequestId | async; else errorTemplate\">\n    <ng-container *ngIf=\"!(hostRef.loading | async) as loading; else loadingTemplate\">\n      <ng-container *ngIf=\"!(hostRef.error | async); else errorTemplate\">\n        <div class=\"bb-payment-request\" *ngIf=\"paymentRequest\">\n          <div\n            class=\"bb-heading-2 bb-block bb-block--md\"\n            i18n=\"Widget header|Payment request access message@@payment-request.label.header\"\n            data-role=\"payment-request-label\">\n            Payment request\n          </div>\n\n          <div\n            i18n=\"Widget sub header|Payment request access message@@payment-request.label.sub-header\"\n            class=\"bb-subtitle bb-block bb-block--md\"\n            data-role=\"payment-request-description\">\n            Third party requested a payment from you. Select an account to pay from and review payment details to\n            proceed with payment.\n          </div>\n\n          <ng-container *ngIf=\"!(hostRef.saving | async); else savingLoadingTemplate\">\n            <bb-alert-ui\n              *ngIf=\"hostRef.savingError | async\"\n              title=\"Unknown error\"\n              i18n-title=\"Unknown Error|Unknown Error Label@@payment-request.label.error.unknown\"\n              message=\"Try to make action again or contact your system administrator.\"\n              i18n-message=\"Try again|Try again error message@@payment-request.label.error.tryAgain\"\n              data-role=\"allow-payment-request-error\"></bb-alert-ui>\n\n            <div class=\"bb-block bb-block--lg\">\n              <bb-payment-request-tpp-information [tpp]=\"paymentRequest.tpp\"></bb-payment-request-tpp-information>\n            </div>\n\n            <div class=\"bb-block bb-block--lg\">\n              <bb-payment-request-amount\n                [amount]=\"paymentRequest.amount\"\n                [currency]=\"paymentRequest.currency\"></bb-payment-request-amount>\n            </div>\n\n            <div class=\"bb-block bb-block--lg\">\n              <bb-payment-request-account-selector\n                [showError]=\"hostRef.showAccountError\"\n                [accounts]=\"paymentRequest.accounts\"\n                [(selectedAccount)]=\"hostRef.selectedAccount\"></bb-payment-request-account-selector>\n            </div>\n\n            <div class=\"bb-block bb-block--lg\">\n              <div\n                i18n=\"Payment details|Payment details message@@payment-request.label.payment-details\"\n                class=\"bb-block--sm bb-text-bold\"\n                data-role=\"payment-details-label\">\n                Payment details\n              </div>\n\n              <div>{{ paymentRequest.details }}</div>\n            </div>\n          </ng-container>\n\n          <div class=\"bb-button-bar bb-button-bar--reverse\">\n            <button\n              bbButton\n              [disabled]=\"hostRef.saving | async\"\n              (click)=\"hostRef.allowPaymentRequest()\"\n              data-role=\"confirm-button\"\n              i18n=\"Confirm button|Confirm consent request@@payment-request.label.confirm\"\n              color=\"primary\"\n              class=\"bb-button-bar__button\">\n              Confirm\n            </button>\n            <button\n              bbButton\n              [disabled]=\"hostRef.saving | async\"\n              (click)=\"hostRef.rejectPaymentRequest()\"\n              data-role=\"cancel-button\"\n              i18n=\"Cancel button|Cancel consent request@@payment-request.label.cancel\"\n              color=\"secondary\"\n              class=\"bb-button-bar__button\">\n              Cancel\n            </button>\n          </div>\n\n          <ng-template #savingLoadingTemplate>\n            <div class=\"bb-state-container\">\n              <bb-loading-indicator-ui\n                text=\"Processing the request...\"\n                i18n-text=\"\n                  Processing|Processing the allow/reject payment request@@payment-request.label.processing\"></bb-loading-indicator-ui>\n            </div>\n          </ng-template>\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #loadingTemplate>\n      <div class=\"bb-state-container\">\n        <bb-loading-indicator-ui></bb-loading-indicator-ui>\n      </div>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #errorTemplate>\n    <div class=\"bb-state-container\">\n      <bb-payment-request-error\n        [paymentRequestId]=\"hostRef.paymentRequestId | async\"\n        [errorKind]=\"$any(hostRef.error | async)?.kind\"></bb-payment-request-error>\n    </div>\n  </ng-template>\n</ng-template>\n\n<ng-template #notificationError>\n  <span\n    i18n=\"\n      Operation Failed|Error notification when failing to save payment request@@payment-request.label.notification.error\">\n    Operation failed\n  </span>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i3.AlertComponent; }), selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i0.forwardRef(function () { return i4.PaymentRequestTppInformationComponent; }), selector: "bb-payment-request-tpp-information", inputs: ["tpp"] }, { type: i0.forwardRef(function () { return i5.PaymentRequestAmountComponent; }), selector: "bb-payment-request-amount", inputs: ["amount", "currency"] }, { type: i0.forwardRef(function () { return i6.PaymentRequestAccountSelectorComponent; }), selector: "bb-payment-request-account-selector", inputs: ["showError", "accounts", "selectedAccount"], outputs: ["selectedAccountChange"] }, { type: i0.forwardRef(function () { return i7.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i0.forwardRef(function () { return i8.PaymentRequestErrorComponent; }), selector: "bb-payment-request-error", inputs: ["paymentRequestId", "errorKind"] }], directives: [{ type: i0.forwardRef(function () { return PaymentRequestWidgetCustomizableDirective; }), selector: "[bbPaymentRequestWidgetCustomizable]" }, { type: i0.forwardRef(function () { return i9.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i10.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], pipes: { "async": i0.forwardRef(function () { return i9.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: PaymentRequestContainerComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-payment-request-container',
                    templateUrl: './payment-request-container.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.PaymentRequestService }, { type: i2.ActivatedRoute }]; }, propDecorators: { redirectToAllowUrl: [{
                type: Output
            }], redirectToRejectUrl: [{
                type: Output
            }], notificationErrorTemplate: [{
                type: ViewChild,
                args: ['notificationError', { static: true }]
            }] } });
export class PaymentRequestWidgetCustomizableDirective extends BbTemplate {
}
PaymentRequestWidgetCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: PaymentRequestWidgetCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
PaymentRequestWidgetCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.15", type: PaymentRequestWidgetCustomizableDirective, selector: "[bbPaymentRequestWidgetCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: PaymentRequestWidgetCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbPaymentRequestWidgetCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bWVudC1yZXF1ZXN0LWNvbnRhaW5lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3BheW1lbnQtcmVxdWVzdC13aWRnZXQtYW5nL3NyYy9wYXltZW50LXJlcXVlc3Qtd2lkZ2V0L3BheW1lbnQtcmVxdWVzdC1jb250YWluZXIvcGF5bWVudC1yZXF1ZXN0LWNvbnRhaW5lci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL3BheW1lbnQtcmVxdWVzdC13aWRnZXQtYW5nL3NyYy9wYXltZW50LXJlcXVlc3Qtd2lkZ2V0L3BheW1lbnQtcmVxdWVzdC1jb250YWluZXIvcGF5bWVudC1yZXF1ZXN0LWNvbnRhaW5lci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQWUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzRyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDM0QsT0FBTyxFQUErQixhQUFhLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFbEUsT0FBTyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7OztBQVFqRCxNQUFNLE9BQU8sZ0NBQWdDO0lBd0gzQyxZQUE2QixPQUE4QixFQUFtQixLQUFxQjtRQUF0RSxZQUFPLEdBQVAsT0FBTyxDQUF1QjtRQUFtQixVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQXZIbkc7O1dBRUc7UUFDTSxZQUFPLEdBQXFDLElBQUksQ0FBQztRQUMxRDs7V0FFRztRQUNPLHVCQUFrQixHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQ2hGOztXQUVHO1FBQ08sd0JBQW1CLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDakY7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Q0FBQyxDQUNGLENBQUM7UUFFRixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtZQUNqQixPQUFPLFVBQVUsQ0FBQztTQUNuQjtRQUVELHNFQUFzRTtRQUN0RSxPQUFPLGFBQWEsQ0FBQyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssYUFBTCxLQUFLLHVCQUFMLEtBQUssQ0FBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDL0UsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUN0QyxDQUFDO0lBQ0osQ0FBQzs7OEhBdEhVLGdDQUFnQztrSEFBaEMsZ0NBQWdDLHFUQ1o3Qyw0aEtBdUhBLDhtQ0RtQmEseUNBQXlDOzRGQTlIekMsZ0NBQWdDO2tCQUo1QyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSw4QkFBOEI7b0JBQ3hDLFdBQVcsRUFBRSw0Q0FBNEM7aUJBQzFEO3lJQVNXLGtCQUFrQjtzQkFBM0IsTUFBTTtnQkFJRyxtQkFBbUI7c0JBQTVCLE1BQU07Z0JBS1AseUJBQXlCO3NCQUR4QixTQUFTO3VCQUFDLG1CQUFtQixFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7QUE4R2xELE1BQU0sT0FBTyx5Q0FBMEMsU0FBUSxVQUc5RDs7dUlBSFkseUNBQXlDOzJIQUF6Qyx5Q0FBeUM7NEZBQXpDLHlDQUF5QztrQkFIckQsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsc0NBQXNDO2lCQUNqRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRGlyZWN0aXZlLCBPbkluaXQsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYlRlbXBsYXRlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgQmVoYXZpb3JTdWJqZWN0LCBjb21iaW5lTGF0ZXN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSwgUGFyYW1NYXAgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgcGx1Y2ssIG1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgUGF5bWVudFJlcXVlc3RTZXJ2aWNlLCBQYXltZW50UmVxdWVzdCwgQWNjb3VudCwgUmVkaXJlY3RVcmwgfSBmcm9tICcuLi9wYXltZW50LXJlcXVlc3Quc2VydmljZSc7XG5pbXBvcnQgeyBQYXltZW50UmVxdWVzdEVycm9yIH0gZnJvbSAnLi4vcGF5bWVudC1yZXF1ZXN0LWVycm9yJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItcGF5bWVudC1yZXF1ZXN0LWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9wYXltZW50LXJlcXVlc3QtY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgUGF5bWVudFJlcXVlc3RDb250YWluZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAvKipcbiAgICogQ29tcG9uZW50IGNvbnRleHRcbiAgICovXG4gIHJlYWRvbmx5IGhvc3RSZWY6IFBheW1lbnRSZXF1ZXN0Q29udGFpbmVyQ29tcG9uZW50ID0gdGhpcztcbiAgLyoqXG4gICAqIEVtaXR0ZXIgdGhhdCBmaXJlcyB3aGVuIGFsbG93aW5nIHBheW1lbnRcbiAgICovXG4gIEBPdXRwdXQoKSByZWRpcmVjdFRvQWxsb3dVcmw6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIC8qKlxuICAgKiBFbWl0dGVyIHRoYXQgZmlyZXMgd2hlbiByZWplY3RpbmcgcGF5bWVudFxuICAgKi9cbiAgQE91dHB1dCgpIHJlZGlyZWN0VG9SZWplY3RVcmw6IEV2ZW50RW1pdHRlcjxzdHJpbmc+ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIC8qKlxuICAgKiBFcnJvciBub3RpZmljYXRpb24gdGVtcGxhdGUgcmVmZXJlbmNlXG4gICAqL1xuICBAVmlld0NoaWxkKCdub3RpZmljYXRpb25FcnJvcicsIHsgc3RhdGljOiB0cnVlIH0pXG4gIG5vdGlmaWNhdGlvbkVycm9yVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gfCBzdHJpbmcgPSAnJztcblxuICAvKipcbiAgICogU3RyZWFtIG9mIHBheW1lbnQgcmVxdWVzdCBJRFxuICAgKi9cbiAgcmVhZG9ubHkgcGF5bWVudFJlcXVlc3RJZDogT2JzZXJ2YWJsZTxzdHJpbmc+ID0gdGhpcy5nZXRSb3V0ZVBhcmFtKHRoaXMucm91dGUsICdwYXltZW50UmVxdWVzdElkJykucGlwZShcbiAgICBtYXAocGF5bWVudFJlcXVlc3RJZCA9PiBwYXltZW50UmVxdWVzdElkIHx8ICcnKSxcbiAgKTtcbiAgLyoqXG4gICAqIFN0cmVhbSBvZiBQYXltZW50IHJlcXVlc3RcbiAgICovXG4gIHJlYWRvbmx5IHBheW1lbnRSZXF1ZXN0OiBPYnNlcnZhYmxlPFBheW1lbnRSZXF1ZXN0IHwgdW5kZWZpbmVkPiA9IHRoaXMuc2VydmljZS5wYXltZW50UmVxdWVzdC5waXBlKFxuICAgIHRhcCgocGF5bWVudFJlcXVlc3Q6IFBheW1lbnRSZXF1ZXN0IHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICBpZiAocGF5bWVudFJlcXVlc3QgJiYgcGF5bWVudFJlcXVlc3Quc2VsZWN0ZWRBY2NvdW50KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRBY2NvdW50ID0gcGF5bWVudFJlcXVlc3Quc2VsZWN0ZWRBY2NvdW50O1xuICAgICAgfVxuICAgIH0pLFxuICApO1xuICAvKipcbiAgICogU3RyZWFtIG9mIGxvYWRpbmcgc3Bpbm5lciB2aXNpYmlsaXR5IGZsYWdcbiAgICovXG4gIHJlYWRvbmx5IGxvYWRpbmc6IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPiA9IHRoaXMuc2VydmljZS5sb2FkaW5nO1xuICAvKipcbiAgICogU3RyZWFtIG9mIFBheW1lbnQgcmVxdWVzdCBlcnJvcnNcbiAgICovXG4gIHJlYWRvbmx5IGVycm9yOiBCZWhhdmlvclN1YmplY3Q8UGF5bWVudFJlcXVlc3RFcnJvciB8IHVuZGVmaW5lZD4gPSB0aGlzLnNlcnZpY2UuZXJyb3I7XG4gIC8qKlxuICAgKiBTZWxlY3RlZCBhY2NvdW50XG4gICAqL1xuICBzZWxlY3RlZEFjY291bnQ6IEFjY291bnQgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBTaG93IGFjY291bnQgZXJyb3IgZmxhZ1xuICAgKi9cbiAgc2hvd0FjY291bnRFcnJvciA9IGZhbHNlO1xuICAvKipcbiAgICogU3RyZWFtIG9mIHNhdmluZyBmbGFnXG4gICAqL1xuICByZWFkb25seSBzYXZpbmc6IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPiA9IHRoaXMuc2VydmljZS5zYXZpbmc7XG4gIC8qKlxuICAgKiBTdHJlYW0gb2Ygc2F2aW5nIGVycm9yc1xuICAgKi9cbiAgcmVhZG9ubHkgc2F2aW5nRXJyb3I6IEJlaGF2aW9yU3ViamVjdDxQYXltZW50UmVxdWVzdEVycm9yIHwgdW5kZWZpbmVkPiA9IHRoaXMuc2VydmljZS5zYXZpbmdFcnJvcjtcblxuICAvKipcbiAgICogU2VuZHMgYWxsb3cgcGF5bWVudCByZXF1ZXN0XG4gICAqL1xuICBhbGxvd1BheW1lbnRSZXF1ZXN0KCk6IHZvaWQge1xuICAgIHRoaXMuc2hvd0FjY291bnRFcnJvciA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnNlbGVjdGVkQWNjb3VudCkge1xuICAgICAgdGhpcy5zZXJ2aWNlXG4gICAgICAgIC5hbGxvd1BheW1lbnRSZXF1ZXN0KHRoaXMuc2VsZWN0ZWRBY2NvdW50LCB0aGlzLm5vdGlmaWNhdGlvbkVycm9yVGVtcGxhdGUpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIHRhcCgocmVkaXJlY3Q6IFJlZGlyZWN0VXJsKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVkaXJlY3QucmVkaXJlY3RVcmwpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvQWxsb3dVcmwuZW1pdChyZWRpcmVjdC5yZWRpcmVjdFVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgLnN1YnNjcmliZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dBY2NvdW50RXJyb3IgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyByZWplY3QgcGF5bWVudCByZXF1ZXN0XG4gICAqL1xuICByZWplY3RQYXltZW50UmVxdWVzdCgpOiB2b2lkIHtcbiAgICB0aGlzLnNlcnZpY2VcbiAgICAgIC5yZWplY3RQYXltZW50UmVxdWVzdCh0aGlzLm5vdGlmaWNhdGlvbkVycm9yVGVtcGxhdGUpXG4gICAgICAucGlwZShcbiAgICAgICAgdGFwKChyZXNwb25zZTogUmVkaXJlY3RVcmwpID0+IHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UucmVkaXJlY3RVcmwpIHtcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RUb1JlamVjdFVybC5lbWl0KHJlc3BvbnNlLnJlZGlyZWN0VXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zZXJ2aWNlLmdldFBheW1lbnRSZXF1ZXN0RnJvbSh0aGlzLnBheW1lbnRSZXF1ZXN0SWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSb3V0ZVBhcmFtKHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSwgcGFyYW06IHN0cmluZyk6IE9ic2VydmFibGU8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IHBhcmFtVmFsdWUgPSBjb21iaW5lTGF0ZXN0KFxuICAgICAgcm91dGUucGFyYW1NYXAucGlwZShwbHVjazxQYXJhbU1hcCwgc3RyaW5nIHwgbnVsbD4oJ3BhcmFtcycsIHBhcmFtKSksXG4gICAgICByb3V0ZS5xdWVyeVBhcmFtTWFwLnBpcGUocGx1Y2s8UGFyYW1NYXAsIHN0cmluZyB8IG51bGw+KCdwYXJhbXMnLCBwYXJhbSkpLFxuICAgICAgKHBhcmFtcywgcXBhcmFtcykgPT4ge1xuICAgICAgICByZXR1cm4gcGFyYW1zID8gcGFyYW1zIDogcXBhcmFtcztcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIGlmICghcm91dGUucGFyZW50KSB7XG4gICAgICByZXR1cm4gcGFyYW1WYWx1ZTtcbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgdGhhdCBsZXZlbCB0aGF0IGhhcyBhY3R1YWwgdmFsdWUga2VlcHMgaXQgZnJvbSBiZWluZyBjbGVhcmVkXG4gICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QoW3BhcmFtVmFsdWUsIHRoaXMuZ2V0Um91dGVQYXJhbShyb3V0ZT8ucGFyZW50LCBwYXJhbSldKS5waXBlKFxuICAgICAgbWFwKHBhcmFtcyA9PiBwYXJhbXNbMF0gfHwgcGFyYW1zWzFdKSxcbiAgICApO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBzZXJ2aWNlOiBQYXltZW50UmVxdWVzdFNlcnZpY2UsIHByaXZhdGUgcmVhZG9ubHkgcm91dGU6IEFjdGl2YXRlZFJvdXRlKSB7fVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJQYXltZW50UmVxdWVzdFdpZGdldEN1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBQYXltZW50UmVxdWVzdFdpZGdldEN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8XG4gIFBheW1lbnRSZXF1ZXN0Q29udGFpbmVyQ29tcG9uZW50LFxuICBQYXltZW50UmVxdWVzdCB8IG51bGxcbj4ge31cbiIsIjxuZy1jb250YWluZXIgYmJQYXltZW50UmVxdWVzdFdpZGdldEN1c3RvbWl6YWJsZSBbYmJIb3N0UmVmXT1cImhvc3RSZWZcIiBbYmJUZW1wbGF0ZUNvbnRleHRdPVwicGF5bWVudFJlcXVlc3QgfCBhc3luY1wiPlxuPC9uZy1jb250YWluZXI+XG5cbjxuZy10ZW1wbGF0ZSBiYlBheW1lbnRSZXF1ZXN0V2lkZ2V0Q3VzdG9taXphYmxlIGxldC1ob3N0UmVmIGxldC1wYXltZW50UmVxdWVzdD1cImNvbnRleHRcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImhvc3RSZWYucGF5bWVudFJlcXVlc3RJZCB8IGFzeW5jOyBlbHNlIGVycm9yVGVtcGxhdGVcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIShob3N0UmVmLmxvYWRpbmcgfCBhc3luYykgYXMgbG9hZGluZzsgZWxzZSBsb2FkaW5nVGVtcGxhdGVcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhKGhvc3RSZWYuZXJyb3IgfCBhc3luYyk7IGVsc2UgZXJyb3JUZW1wbGF0ZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmItcGF5bWVudC1yZXF1ZXN0XCIgKm5nSWY9XCJwYXltZW50UmVxdWVzdFwiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwiYmItaGVhZGluZy0yIGJiLWJsb2NrIGJiLWJsb2NrLS1tZFwiXG4gICAgICAgICAgICBpMThuPVwiV2lkZ2V0IGhlYWRlcnxQYXltZW50IHJlcXVlc3QgYWNjZXNzIG1lc3NhZ2VAQHBheW1lbnQtcmVxdWVzdC5sYWJlbC5oZWFkZXJcIlxuICAgICAgICAgICAgZGF0YS1yb2xlPVwicGF5bWVudC1yZXF1ZXN0LWxhYmVsXCI+XG4gICAgICAgICAgICBQYXltZW50IHJlcXVlc3RcbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGkxOG49XCJXaWRnZXQgc3ViIGhlYWRlcnxQYXltZW50IHJlcXVlc3QgYWNjZXNzIG1lc3NhZ2VAQHBheW1lbnQtcmVxdWVzdC5sYWJlbC5zdWItaGVhZGVyXCJcbiAgICAgICAgICAgIGNsYXNzPVwiYmItc3VidGl0bGUgYmItYmxvY2sgYmItYmxvY2stLW1kXCJcbiAgICAgICAgICAgIGRhdGEtcm9sZT1cInBheW1lbnQtcmVxdWVzdC1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgVGhpcmQgcGFydHkgcmVxdWVzdGVkIGEgcGF5bWVudCBmcm9tIHlvdS4gU2VsZWN0IGFuIGFjY291bnQgdG8gcGF5IGZyb20gYW5kIHJldmlldyBwYXltZW50IGRldGFpbHMgdG9cbiAgICAgICAgICAgIHByb2NlZWQgd2l0aCBwYXltZW50LlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiEoaG9zdFJlZi5zYXZpbmcgfCBhc3luYyk7IGVsc2Ugc2F2aW5nTG9hZGluZ1RlbXBsYXRlXCI+XG4gICAgICAgICAgICA8YmItYWxlcnQtdWlcbiAgICAgICAgICAgICAgKm5nSWY9XCJob3N0UmVmLnNhdmluZ0Vycm9yIHwgYXN5bmNcIlxuICAgICAgICAgICAgICB0aXRsZT1cIlVua25vd24gZXJyb3JcIlxuICAgICAgICAgICAgICBpMThuLXRpdGxlPVwiVW5rbm93biBFcnJvcnxVbmtub3duIEVycm9yIExhYmVsQEBwYXltZW50LXJlcXVlc3QubGFiZWwuZXJyb3IudW5rbm93blwiXG4gICAgICAgICAgICAgIG1lc3NhZ2U9XCJUcnkgdG8gbWFrZSBhY3Rpb24gYWdhaW4gb3IgY29udGFjdCB5b3VyIHN5c3RlbSBhZG1pbmlzdHJhdG9yLlwiXG4gICAgICAgICAgICAgIGkxOG4tbWVzc2FnZT1cIlRyeSBhZ2FpbnxUcnkgYWdhaW4gZXJyb3IgbWVzc2FnZUBAcGF5bWVudC1yZXF1ZXN0LmxhYmVsLmVycm9yLnRyeUFnYWluXCJcbiAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiYWxsb3ctcGF5bWVudC1yZXF1ZXN0LWVycm9yXCI+PC9iYi1hbGVydC11aT5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1sZ1wiPlxuICAgICAgICAgICAgICA8YmItcGF5bWVudC1yZXF1ZXN0LXRwcC1pbmZvcm1hdGlvbiBbdHBwXT1cInBheW1lbnRSZXF1ZXN0LnRwcFwiPjwvYmItcGF5bWVudC1yZXF1ZXN0LXRwcC1pbmZvcm1hdGlvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLWxnXCI+XG4gICAgICAgICAgICAgIDxiYi1wYXltZW50LXJlcXVlc3QtYW1vdW50XG4gICAgICAgICAgICAgICAgW2Ftb3VudF09XCJwYXltZW50UmVxdWVzdC5hbW91bnRcIlxuICAgICAgICAgICAgICAgIFtjdXJyZW5jeV09XCJwYXltZW50UmVxdWVzdC5jdXJyZW5jeVwiPjwvYmItcGF5bWVudC1yZXF1ZXN0LWFtb3VudD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2sgYmItYmxvY2stLWxnXCI+XG4gICAgICAgICAgICAgIDxiYi1wYXltZW50LXJlcXVlc3QtYWNjb3VudC1zZWxlY3RvclxuICAgICAgICAgICAgICAgIFtzaG93RXJyb3JdPVwiaG9zdFJlZi5zaG93QWNjb3VudEVycm9yXCJcbiAgICAgICAgICAgICAgICBbYWNjb3VudHNdPVwicGF5bWVudFJlcXVlc3QuYWNjb3VudHNcIlxuICAgICAgICAgICAgICAgIFsoc2VsZWN0ZWRBY2NvdW50KV09XCJob3N0UmVmLnNlbGVjdGVkQWNjb3VudFwiPjwvYmItcGF5bWVudC1yZXF1ZXN0LWFjY291bnQtc2VsZWN0b3I+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1sZ1wiPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgaTE4bj1cIlBheW1lbnQgZGV0YWlsc3xQYXltZW50IGRldGFpbHMgbWVzc2FnZUBAcGF5bWVudC1yZXF1ZXN0LmxhYmVsLnBheW1lbnQtZGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJiYi1ibG9jay0tc20gYmItdGV4dC1ib2xkXCJcbiAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJwYXltZW50LWRldGFpbHMtbGFiZWxcIj5cbiAgICAgICAgICAgICAgICBQYXltZW50IGRldGFpbHNcbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdj57eyBwYXltZW50UmVxdWVzdC5kZXRhaWxzIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1idXR0b24tYmFyIGJiLWJ1dHRvbi1iYXItLXJldmVyc2VcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImhvc3RSZWYuc2F2aW5nIHwgYXN5bmNcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiaG9zdFJlZi5hbGxvd1BheW1lbnRSZXF1ZXN0KClcIlxuICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJjb25maXJtLWJ1dHRvblwiXG4gICAgICAgICAgICAgIGkxOG49XCJDb25maXJtIGJ1dHRvbnxDb25maXJtIGNvbnNlbnQgcmVxdWVzdEBAcGF5bWVudC1yZXF1ZXN0LmxhYmVsLmNvbmZpcm1cIlxuICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvblwiPlxuICAgICAgICAgICAgICBDb25maXJtXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImhvc3RSZWYuc2F2aW5nIHwgYXN5bmNcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiaG9zdFJlZi5yZWplY3RQYXltZW50UmVxdWVzdCgpXCJcbiAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiY2FuY2VsLWJ1dHRvblwiXG4gICAgICAgICAgICAgIGkxOG49XCJDYW5jZWwgYnV0dG9ufENhbmNlbCBjb25zZW50IHJlcXVlc3RAQHBheW1lbnQtcmVxdWVzdC5sYWJlbC5jYW5jZWxcIlxuICAgICAgICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiYmItYnV0dG9uLWJhcl9fYnV0dG9uXCI+XG4gICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgI3NhdmluZ0xvYWRpbmdUZW1wbGF0ZT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1zdGF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPGJiLWxvYWRpbmctaW5kaWNhdG9yLXVpXG4gICAgICAgICAgICAgICAgdGV4dD1cIlByb2Nlc3NpbmcgdGhlIHJlcXVlc3QuLi5cIlxuICAgICAgICAgICAgICAgIGkxOG4tdGV4dD1cIlxuICAgICAgICAgICAgICAgICAgUHJvY2Vzc2luZ3xQcm9jZXNzaW5nIHRoZSBhbGxvdy9yZWplY3QgcGF5bWVudCByZXF1ZXN0QEBwYXltZW50LXJlcXVlc3QubGFiZWwucHJvY2Vzc2luZ1wiPjwvYmItbG9hZGluZy1pbmRpY2F0b3ItdWk+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgPG5nLXRlbXBsYXRlICNsb2FkaW5nVGVtcGxhdGU+XG4gICAgICA8ZGl2IGNsYXNzPVwiYmItc3RhdGUtY29udGFpbmVyXCI+XG4gICAgICAgIDxiYi1sb2FkaW5nLWluZGljYXRvci11aT48L2JiLWxvYWRpbmctaW5kaWNhdG9yLXVpPlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9uZy1jb250YWluZXI+XG5cbiAgPG5nLXRlbXBsYXRlICNlcnJvclRlbXBsYXRlPlxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGF0ZS1jb250YWluZXJcIj5cbiAgICAgIDxiYi1wYXltZW50LXJlcXVlc3QtZXJyb3JcbiAgICAgICAgW3BheW1lbnRSZXF1ZXN0SWRdPVwiaG9zdFJlZi5wYXltZW50UmVxdWVzdElkIHwgYXN5bmNcIlxuICAgICAgICBbZXJyb3JLaW5kXT1cIiRhbnkoaG9zdFJlZi5lcnJvciB8IGFzeW5jKT8ua2luZFwiPjwvYmItcGF5bWVudC1yZXF1ZXN0LWVycm9yPlxuICAgIDwvZGl2PlxuICA8L25nLXRlbXBsYXRlPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNub3RpZmljYXRpb25FcnJvcj5cbiAgPHNwYW5cbiAgICBpMThuPVwiXG4gICAgICBPcGVyYXRpb24gRmFpbGVkfEVycm9yIG5vdGlmaWNhdGlvbiB3aGVuIGZhaWxpbmcgdG8gc2F2ZSBwYXltZW50IHJlcXVlc3RAQHBheW1lbnQtcmVxdWVzdC5sYWJlbC5ub3RpZmljYXRpb24uZXJyb3JcIj5cbiAgICBPcGVyYXRpb24gZmFpbGVkXG4gIDwvc3Bhbj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=