import { Component, Directive, Input } from '@angular/core';
import { FormControl } from '@angular/forms';
import { catchError, debounceTime, distinctUntilChanged, filter, switchMap, tap } from 'rxjs/operators';
import { EMPTY } from 'rxjs';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { BaseCreateMessageFormComponent } from '../base-form/base-create-message-form.component';
import { BaseCreateMessageFormService } from '../base-form/base-create-message-form.service';
import { CreateMessageFormImplementationService } from './services/create-message-form-implementation.service';
import { BaseUploadAttachmentsService } from '../../upload-attachments/services/base-attachments.service';
import { MessagesEmployeeUploadAttachmentsService } from '../../upload-attachments/services/employee-upload-attachments.service';
import { topicPlaceholderConfig } from '../../../utils/topic-placeholder-text-helper';
import * as i0 from "@angular/core";
import * as i1 from "./services/employee-create-message-form.service";
import * as i2 from "../../../services/messages-encoding/messages-encoding.service";
import * as i3 from "../../../services/shared-methods/shared-methods.service";
import * as i4 from "@angular/forms";
import * as i5 from "../base-form/base-create-message-form.service";
import * as i6 from "../../messages-manipulation-confirm-modal/messages-manipulation-confirm-modal.service";
import * as i7 from "../../upload-attachments/services/messages-upload-attachments.service";
import * as i8 from "@backbase/ui-ang/dropdown-single-select";
import * as i9 from "@backbase/ui-ang/input-validation-message";
import * as i10 from "@backbase/ui-ang/search-box";
import * as i11 from "@backbase/ui-ang/input-text";
import * as i12 from "@backbase/ui-ang/input-checkbox";
import * as i13 from "@backbase/ui-ang/rich-text-editor";
import * as i14 from "../../upload-attachments/messages-upload-attachments.component";
import * as i15 from "@backbase/ui-ang/load-button";
import * as i16 from "../../messages-manipulation-confirm-modal/messages-manipulation-confirm-modal.component";
import * as i17 from "@angular/common";
import * as i18 from "@backbase/ui-ang/button";
import * as i19 from "../../../directives/prevent-bubble-down/prevent-bubble-down.directive";
export class EmployeeCreateMessageFormComponent extends BaseCreateMessageFormComponent {
    constructor(employeeService, encodingService, sharedService, fb, cd, createMessageFormService, confirmModalService, uploadService) {
        super(sharedService, confirmModalService, cd, createMessageFormService, fb, encodingService, uploadService);
        this.employeeService = employeeService;
        this.encodingService = encodingService;
        this.sharedService = sharedService;
        this.fb = fb;
        this.cd = cd;
        this.createMessageFormService = createMessageFormService;
        this.confirmModalService = confirmModalService;
        this.uploadService = uploadService;
        /**
         * Debounce time for input search requests
         */
        this.debounceTime = 500;
        /**
         * Minimum length value for input search request
         */
        this.minSearchLength = 1;
        /**
         * Make predefined user field readonly
         */
        this.isPreDefinedUserReadonly = false;
        /**
         * Configs for topic selector placeholder
         */
        this.topicPlaceholderConfig = topicPlaceholderConfig;
        /**
         * Typeahead options.
         */
        this.typeaheadOptions = {
            ngbTypeahead: this.search.bind(this),
            resultFormatter: (item) => item.fullName,
            inputFormatter: (item) => item.fullName,
        };
        /**
         * Additional form fields.
         */
        this.additionalFormFields = {
            recipient: '',
            important: false,
            notDeletable: false,
            'read-only': false,
        };
        Object.keys(this.additionalFormFields).forEach(key => {
            const validator = key === 'recipient' ? this.customRequiredValidator : undefined;
            this.newMessageFormGroup.addControl(key, new FormControl(this.additionalFormFields[key], validator));
        });
        this.newMessageFormGroup.updateValueAndValidity();
    }
    /**
     * Predefine form
     */
    set preDefineForm(val) {
        if (val.recipient) {
            this.getUserName(val.recipient);
        }
    }
    /**
     * The method upon creation of the message form submission.
     */
    onConfirm() {
        this.newMessageFormGroup.markAsDirty();
        this.newMessageFormGroup.markAllAsTouched();
        const { valid } = this.newMessageFormGroup;
        const value = this.newMessageFormGroup.getRawValue();
        if (valid) {
            const finalValue = Object.assign({ subject: '', body: '', topic: '', recipient: value.recipient.id, important: value.important, deletable: !value.notDeletable, 'read-only': value['read-only'] }, this.getSimpleFormVal(value));
            this.createMessage(finalValue);
        }
    }
    /**
     * The method to search for typeahead options.
     *
     * @param text Search query
     * @returns Search stream
     */
    search(text) {
        return text.pipe(debounceTime(this.debounceTime), distinctUntilChanged(), filter(value => value.length > this.minSearchLength), switchMap(value => this.employeeService.getUsers(value)));
    }
    resetToInit() {
        super.resetToInit();
        this.resetAdditionalFields();
    }
    customRequiredValidator(control) {
        const value = control.value;
        const isSelected = value && typeof value !== 'string';
        return !isSelected ? { required: true } : null;
    }
    getUserName(userId) {
        this.employeeService
            .getUserById(userId)
            .pipe(tap(user => this.setUserName(user, userId)), catchError(err => {
            this.sharedService.openNotification(this.sharedService.getErrorMessage(err), 'error');
            return EMPTY;
        }))
            .subscribe();
    }
    setUserName(user, userId) {
        this.newMessageFormGroup.controls['recipient'].setValue(Object.assign(Object.assign({}, user), { id: userId }));
        if (this.isPreDefinedUserReadonly) {
            this.newMessageFormGroup.controls['recipient'].disable();
        }
    }
    resetAdditionalFields() {
        Object.keys(this.additionalFormFields).forEach(key => {
            this.newMessageFormGroup.controls[key].setValue(this.additionalFormFields[key]);
        });
    }
}
EmployeeCreateMessageFormComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: EmployeeCreateMessageFormComponent, deps: [{ token: i1.EmployeeCreateMessageFormService }, { token: i2.MessagesEncodingService }, { token: i3.SharedMethodsService }, { token: i4.FormBuilder }, { token: i0.ChangeDetectorRef }, { token: i5.BaseCreateMessageFormService }, { token: i6.MessagesManipulationConfirmModalService }, { token: i7.MessagesUploadAttachmentsService }], target: i0.ɵɵFactoryTarget.Component });
EmployeeCreateMessageFormComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.14", type: EmployeeCreateMessageFormComponent, selector: "bb-messages-employee-create-message-form", inputs: { debounceTime: "debounceTime", minSearchLength: "minSearchLength", preDefineForm: "preDefineForm", isPreDefinedUserReadonly: "isPreDefinedUserReadonly" }, providers: [
        {
            provide: BaseCreateMessageFormService,
            useClass: CreateMessageFormImplementationService,
        },
        {
            provide: BaseUploadAttachmentsService,
            useClass: MessagesEmployeeUploadAttachmentsService,
        },
    ], usesInheritance: true, ngImport: i0, template: "<ng-container\n  bbEmployeeCreateMessageFormCustomizable\n  [bbHostRef]=\"hostRef\"\n  [bbTemplateContext]=\"{\n    topics: topics | async,\n    maxAttachmentSize: maxAttachmentSize\n  }\"\n></ng-container>\n\n<ng-template\n  bbEmployeeCreateMessageFormCustomizable\n  let-host\n  let-topics=\"context.topics\"\n  let-maxAttachmentSize=\"context.maxAttachmentSize\"\n>\n  <form [formGroup]=\"host.newMessageFormGroup\" data-role=\"form\" (submit)=\"host.onConfirm()\">\n    <div class=\"form-group\">\n      <bb-dropdown-single-select-ui\n        *ngIf=\"\n          topics?.length\n            ? topicPlaceholderConfig.selectTopicPlaceholder\n            : topicPlaceholderConfig.noTopicsPlaceholder as topicPlaceholder\n        \"\n        [options]=\"topics\"\n        displayAttributePath=\"name\"\n        formControlName=\"topic\"\n        label=\"Topic\"\n        i18n-label=\"Topic label text@@messages.employeeCreateMessage.composeMessageForm.topicLabel\"\n        aria-label=\"Topic\"\n        [aria-invalid]=\"host.isInvalidControl('topic')\"\n        data-role=\"topics\"\n        aria-describedby=\"compose-message-topic-error-message\"\n        i18n-aria-label=\"Topic aria-label text@@messages.employeeCreateMessage.composeMessageForm.topicAriaLabel\"\n        labelClasses=\"form-label\"\n        [attr.placeholder]=\"topicPlaceholder\"\n        [placeholder]=\"topicPlaceholder\"\n        (blur)=\"host.resetFormOnElementBlur()\"\n      ></bb-dropdown-single-select-ui>\n      <bb-input-validation-message-ui\n        id=\"compose-message-topic-error-message\"\n        [showErrors]=\"host.isInvalidControl('topic')\"\n      >\n        <span\n          *ngIf=\"host.hasError('topic', 'required')\"\n          i18n=\"\n            Error message if subject field is\n            required@@messages.employeeCreateMessage.composeMessageForm.errors.subjectRequired\"\n        >\n          Field is required\n        </span>\n      </bb-input-validation-message-ui>\n    </div>\n    <div class=\"form-group\">\n      <label i18n=\"User label text@@messages.employeeCreateMessage.composeMessageForm.recipientLabel\">User</label>\n      <bb-search-box-ui\n        formControlName=\"recipient\"\n        aria-label=\"Select user\"\n        i18n-aria-label=\"\n          Select user aria-label text@@messages.employeeCreateMessage.composeMessageForm.subjectAriaLabel\"\n        [attr.aria-invalid]=\"host.isInvalidControl('recipient')\"\n        aria-describedby=\"compose-message-recipient-error-message\"\n        placeholder=\"Select user\"\n        i18n-placeholder=\"Select user@@messages.employeeCreateMessage.composeMessageForm.selectRecipientPlaceholder\"\n        [typeaheadOptions]=\"host.typeaheadOptions\"\n        [required]=\"true\"\n      ></bb-search-box-ui>\n      <bb-input-validation-message-ui\n        id=\"compose-message-recipient-error-message\"\n        [showErrors]=\"host.isInvalidControl('recipient')\"\n      >\n        <span\n          *ngIf=\"host.hasError('recipient', 'required')\"\n          i18n=\"\n            Error message if subject field is\n            empty@@messages.employeeCreateMessage.composeMessageForm.errors.recipientRequired\"\n          >Field is required</span\n        >\n      </bb-input-validation-message-ui>\n    </div>\n\n    <div class=\"form-group\">\n      <bb-input-text-ui\n        data-role=\"subject\"\n        label=\"Subject\"\n        i18n-label=\"Subject label text@@messages.employeeCreateMessage.composeMessageForm.subjectLabel\"\n        aria-label=\"Subject\"\n        i18n-aria-label=\"Subject aria-label text@@messages.employeeCreateMessage.composeMessageForm.subjectAriaLabel\"\n        [aria-invalid]=\"host.isInvalidControl('subject')\"\n        aria-describedby=\"compose-message-subject-error-message\"\n        placeholder=\"Write subject\"\n        i18n-placeholder=\"\n          Subject placeholder text@@messages.employeeCreateMessage.composeMessageForm.subjectPlaceholder\"\n        labelClasses=\"form-label\"\n        formControlName=\"subject\"\n        [maxlength]=\"host.maxSubjectLength\"\n        [required]=\"true\"\n      >\n      </bb-input-text-ui>\n      <bb-input-validation-message-ui\n        id=\"compose-message-subject-error-message\"\n        [showErrors]=\"host.isInvalidControl('subject')\"\n      >\n        <span\n          *ngIf=\"host.hasError('subject', 'required')\"\n          i18n=\"\n            Error message if subject field is\n            empty@@messages.employeeCreateMessage.composeMessageForm.errors.subjectRequired\"\n          >Field is required</span\n        >\n        <span\n          *ngIf=\"host.hasError('subject', 'maxlength')\"\n          i18n=\"\n            Error message if subject value is more then maxlength\n            value@@messages.employeeCreateMessage.composeMessageForm.errors.subjectMaxlength\"\n          >Your input of {{ newMessageFormGroup?.get('subject')?.value?.length }} characters exceeds the limit of\n          {{ host.maxSubjectLength }}. Please rephrase.</span\n        >\n      </bb-input-validation-message-ui>\n    </div>\n\n    <hr />\n\n    <div class=\"form-group\">\n      <div class=\"bb-stack\">\n        <bb-input-checkbox-ui\n          class=\"bb-stack__item bb-stack__item--fill\"\n          formControlName=\"read-only\"\n          aria-label=\"Read only\"\n          data-role=\"readonly\"\n          i18n-aria-label=\"\n            checkbox read-only aria-label@@messages.employeeCreateMessage.composeMessageForm.readonlyCheckboxAriaLabel\"\n          label=\"Read only\"\n          i18n-label=\"\n            read only checkbox label text@@messages.employeeCreateMessage.composeMessageForm.readonlyCheckboxLabel\"\n        ></bb-input-checkbox-ui>\n\n        <bb-input-checkbox-ui\n          class=\"bb-stack__item bb-stack__item--fill\"\n          formControlName=\"notDeletable\"\n          aria-label=\"Can't be deleted\"\n          data-role=\"deletable\"\n          i18n-aria-label=\"\n            checkbox deletable aria-label@@messages.employeeCreateMessage.composeMessageForm.deletableCheckboxAriaLabel\"\n          label=\"Can't be deleted\"\n          i18n-label=\"\n            deletable checkbox label text@@messages.employeeCreateMessage.composeMessageForm.deletableCheckboxLabel\"\n        ></bb-input-checkbox-ui>\n\n        <bb-input-checkbox-ui\n          class=\"bb-stack__item bb-stack__item--fill\"\n          formControlName=\"important\"\n          aria-label=\"important\"\n          data-role=\"important\"\n          i18n-aria-label=\"\n            checkbox important aria-label@@messages.employeeCreateMessage.composeMessageForm.importantCheckboxAriaLabel\"\n          label=\"Important\"\n          i18n-label=\"\n            important checkbox label text@@messages.employeeCreateMessage.composeMessageForm.importantCheckboxLabel\"\n        ></bb-input-checkbox-ui>\n      </div>\n    </div>\n\n    <div class=\"form-group\">\n      <bb-rich-text-editor-ui\n        label=\"Message\"\n        i18n-label=\"Message label text@@messages.employeeCreateMessage.composeMessageForm.messageLabel\"\n        aria-label=\"Message\"\n        i18n-aria-label=\"Message aria-label text@@messages.employeeCreateMessage.composeMessageForm.messageAriaLabel\"\n        placeholder=\"Write some text\"\n        i18n-placeholder=\"\n          Message placeholder text@@messages.employeeCreateMessage.composeMessageForm.messagePlaceholder\"\n        [attr.aria-invalid]=\"host.isInvalidControl('body')\"\n        [attr.aria-describedby]=\"'compose-message-body-error-message'\"\n        formControlName=\"body\"\n        [counter]=\"true\"\n        [maxLength]=\"host.maxMessageLength\"\n        [required]=\"true\"\n      >\n        <ng-template #actions bbRichTextEditorActions>\n          <bb-rich-text-editor-bold-action></bb-rich-text-editor-bold-action>\n          <bb-rich-text-editor-italic-action></bb-rich-text-editor-italic-action>\n          <bb-rich-text-editor-underline-action></bb-rich-text-editor-underline-action>\n          <bb-rich-text-editor-strikethrough-action> </bb-rich-text-editor-strikethrough-action>\n          <bb-rich-text-editor-olist-action></bb-rich-text-editor-olist-action>\n          <bb-rich-text-editor-ulist-action> </bb-rich-text-editor-ulist-action>\n          <bb-rich-text-editor-link-action></bb-rich-text-editor-link-action>\n        </ng-template>\n      </bb-rich-text-editor-ui>\n      <bb-input-validation-message-ui\n        id=\"compose-message-body-error-message\"\n        [showErrors]=\"host.isInvalidControl('body')\"\n      >\n        <span\n          *ngIf=\"host.hasError('body', 'required')\"\n          i18n=\"Error message if field is required@@messages.createMessage.composeMessageForm.errors.messageRequired\"\n        >\n          Field is required\n        </span>\n      </bb-input-validation-message-ui>\n    </div>\n    <div class=\"form-group\">\n      <bb-messages-upload-attachments\n        [maxSize]=\"maxAttachmentSize\"\n        formControlName=\"attachments\"\n      ></bb-messages-upload-attachments>\n    </div>\n    <div class=\"bb-button-bar\">\n      <bb-load-button-ui\n        class=\"bb-button-bar__button\"\n        type=\"submit\"\n        data-role=\"submit\"\n        aria-label=\"Send\"\n        i18n-aria-label=\"\n          Submit button aria-label text@@messages.employeeCreateMessage.composeMessageForm.submitButtonAriaLabel\"\n        i18n=\"Submit button text@@messages.employeeCreateMessage.composeMessageForm.submitButton\"\n        [isLoading]=\"host.formLoading\"\n      >\n        Send\n      </bb-load-button-ui>\n      <button\n        bbButton\n        bbPreventBubbleDown\n        class=\"bb-button-bar__button\"\n        color=\"secondary\"\n        data-role=\"discard\"\n        aria-label=\"Discard\"\n        i18n-aria-label=\"\n          Discard button aria-label text@@messages.employeeCreateMessage.composeMessageForm.discardButtonAriaLabel\"\n        i18n=\"Discard button text@@messages.employeeCreateMessage.composeMessageForm.discardButton\"\n        (click)=\"host.confirmModalService.toggleModal(true, host.manipulationTypes.discard, host.newMessageFormGroup)\"\n      >\n        Discard\n      </button>\n    </div>\n  </form>\n\n  <bb-messages-manipulation-confirm-modal\n    [isOpen]=\"host.confirmationModal.opened\"\n    [type]=\"host.confirmationModal.type\"\n    (cancel)=\"host.confirmModalService.toggleModal(false)\"\n    (confirm)=\"host.confirmConfirmationModal()\"\n  ></bb-messages-manipulation-confirm-modal>\n</ng-template>\n\n<ng-template #messageComposeSuccess>\n  <span\n    i18n=\"\n      Your message has been successfully sent.|Text of successful conversation\n      compose@@messages.employeeCreateMessage.composeMessageForm.messageSuccessCompose\"\n    >Your message has been successfully sent.</span\n  >\n</ng-template>\n\n<ng-template #messageComposeError>\n  <span\n    i18n=\"\n      There is an error sending message.|Text of failed conversation\n      compose@@messages.employeeCreateMessage.composeMessageForm.messageErrorCompose\"\n    >There is an error sending message.</span\n  >\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i8.DropdownSingleSelectComponent; }), selector: "bb-dropdown-single-select-ui", inputs: ["placeholder", "defaultOptionAsPlaceholder", "options", "displayAttributePath", "iconName", "compareWithFn"] }, { type: i0.forwardRef(function () { return i9.InputValidationMessageComponent; }), selector: "bb-input-validation-message-ui", inputs: ["showErrors", "messageId"] }, { type: i0.forwardRef(function () { return i10.SearchBoxComponent; }), selector: "bb-search-box-ui", inputs: ["placeholder", "maxLength", "squareBorder", "typeaheadOptions", "showSearch", "showClear", "searchLabel", "clearLabel", "autocomplete"], outputs: ["submit", "clear", "valueChange"] }, { type: i0.forwardRef(function () { return i11.InputTextComponent; }), selector: "bb-input-text-ui", inputs: ["placeholder", "maxLength", "minLength", "autocomplete", "readonly", "mask", "maskValidator", "showCharCounter"], outputs: ["valueChange"] }, { type: i0.forwardRef(function () { return i12.InputCheckboxComponent; }), selector: "bb-input-checkbox-ui", inputs: ["indeterminate"], outputs: ["indeterminateChange"] }, { type: i0.forwardRef(function () { return i13.RichTextEditorComponent; }), selector: "bb-rich-text-editor-ui", inputs: ["maxLength", "minLength", "placeholder", "counter", "readonly", "actionsTooltipPlacement"] }, { type: i0.forwardRef(function () { return i13.RichTextEditorBoldActionComponent; }), selector: "bb-rich-text-editor-bold-action" }, { type: i0.forwardRef(function () { return i13.RichTextEditorItalicActionComponent; }), selector: "bb-rich-text-editor-italic-action" }, { type: i0.forwardRef(function () { return i13.RichTextEditorUnderlineActionComponent; }), selector: "bb-rich-text-editor-underline-action" }, { type: i0.forwardRef(function () { return i13.RichTextEditorStrikethroughActionComponent; }), selector: "bb-rich-text-editor-strikethrough-action" }, { type: i0.forwardRef(function () { return i13.RichTextEditorOlistActionComponent; }), selector: "bb-rich-text-editor-olist-action" }, { type: i0.forwardRef(function () { return i13.RichTextEditorUlistActionComponent; }), selector: "bb-rich-text-editor-ulist-action" }, { type: i0.forwardRef(function () { return i13.RichTextEditorLinkActionComponent; }), selector: "bb-rich-text-editor-link-action", inputs: ["contentClassNames"], outputs: ["linkAdded"] }, { type: i0.forwardRef(function () { return i14.MessagesUploadAttachmentsComponent; }), selector: "bb-messages-upload-attachments-ui, bb-messages-upload-attachments", inputs: ["maxSize", "initAttachments", "disabled", "multiple", "attachmentButtonText", "accept"] }, { type: i0.forwardRef(function () { return i15.LoadButtonComponent; }), selector: "bb-load-button-ui", inputs: ["isLoading", "from", "size", "circle", "totalCount"], outputs: ["paramChange"] }, { type: i0.forwardRef(function () { return i16.MessagesManipulationConfirmModalComponent; }), selector: "bb-messages-manipulation-confirm-modal", inputs: ["type"] }], directives: [{ type: i0.forwardRef(function () { return EmployeeCreateMessageFormCustomizableDirective; }), selector: "[bbEmployeeCreateMessageFormCustomizable]" }, { type: i0.forwardRef(function () { return i4.ɵNgNoValidate; }), selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i0.forwardRef(function () { return i4.NgControlStatusGroup; }), selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i0.forwardRef(function () { return i4.FormGroupDirective; }), selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i0.forwardRef(function () { return i17.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i4.NgControlStatus; }), selector: "[formControlName],[ngModel],[formControl]" }, { type: i0.forwardRef(function () { return i4.FormControlName; }), selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i0.forwardRef(function () { return i4.RequiredValidator; }), selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i0.forwardRef(function () { return i4.MaxLengthValidator; }), selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { type: i0.forwardRef(function () { return i13.RichTextEditorActionsDirective; }), selector: "ng-template[bbRichTextEditorActions]" }, { type: i0.forwardRef(function () { return i18.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i0.forwardRef(function () { return i19.PreventBubbleDownDirective; }), selector: "[bbPreventBubbleDown]" }], pipes: { "async": i0.forwardRef(function () { return i17.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: EmployeeCreateMessageFormComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-messages-employee-create-message-form',
                    templateUrl: './employee-create-message-form.component.html',
                    providers: [
                        {
                            provide: BaseCreateMessageFormService,
                            useClass: CreateMessageFormImplementationService,
                        },
                        {
                            provide: BaseUploadAttachmentsService,
                            useClass: MessagesEmployeeUploadAttachmentsService,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i1.EmployeeCreateMessageFormService }, { type: i2.MessagesEncodingService }, { type: i3.SharedMethodsService }, { type: i4.FormBuilder }, { type: i0.ChangeDetectorRef }, { type: i5.BaseCreateMessageFormService }, { type: i6.MessagesManipulationConfirmModalService }, { type: i7.MessagesUploadAttachmentsService }]; }, propDecorators: { debounceTime: [{
                type: Input
            }], minSearchLength: [{
                type: Input
            }], preDefineForm: [{
                type: Input
            }], isPreDefinedUserReadonly: [{
                type: Input
            }] } });
export class EmployeeCreateMessageFormCustomizableDirective extends BbTemplate {
}
EmployeeCreateMessageFormCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: EmployeeCreateMessageFormCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
EmployeeCreateMessageFormCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: EmployeeCreateMessageFormCustomizableDirective, selector: "[bbEmployeeCreateMessageFormCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: EmployeeCreateMessageFormCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbEmployeeCreateMessageFormCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1wbG95ZWUtY3JlYXRlLW1lc3NhZ2UtZm9ybS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL21lc3NhZ2VzLWNvbW1vbi9zcmMvY29tcG9uZW50cy9jcmVhdGUtbWVzc2FnZS9lbXBsb3llZS1mb3JtL2VtcGxveWVlLWNyZWF0ZS1tZXNzYWdlLWZvcm0uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9tZXNzYWdlcy1jb21tb24vc3JjL2NvbXBvbmVudHMvY3JlYXRlLW1lc3NhZ2UvZW1wbG95ZWUtZm9ybS9lbXBsb3llZS1jcmVhdGUtbWVzc2FnZS1mb3JtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBcUIsU0FBUyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDL0UsT0FBTyxFQUFnQyxXQUFXLEVBQW9CLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0YsT0FBTyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4RyxPQUFPLEVBQUUsS0FBSyxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQU0zRCxPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUlqRyxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUc3RixPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQUMvRyxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSw0REFBNEQsQ0FBQztBQUMxRyxPQUFPLEVBQUUsd0NBQXdDLEVBQUUsTUFBTSx1RUFBdUUsQ0FBQztBQUNqSSxP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QUNFLE9BQU8sRUFBRSw0QkFBNEI7WUFDckMsUUFBUSxFQUFFLHdDQUF3QztTQUNuRDtLQUNGLGlEQ2xDSCwyNFZBcVFBLHUvRkQzRWEsOENBQThDOzRGQXRKOUMsa0NBQWtDO2tCQWQ5QyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSwwQ0FBMEM7b0JBQ3BELFdBQVcsRUFBRSwrQ0FBK0M7b0JBQzVELFNBQVMsRUFBRTt3QkFDVDs0QkFDRSxPQUFPLEVBQUUsNEJBQTRCOzRCQUNyQyxRQUFRLEVBQUUsc0NBQXNDO3lCQUNqRDt3QkFDRDs0QkFDRSxPQUFPLEVBQUUsNEJBQTRCOzRCQUNyQyxRQUFRLEVBQUUsd0NBQXdDO3lCQUNuRDtxQkFDRjtpQkFDRjswWUFLVSxZQUFZO3NCQUFwQixLQUFLO2dCQUtHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBS08sYUFBYTtzQkFBekIsS0FBSztnQkFTRyx3QkFBd0I7c0JBQWhDLEtBQUs7O0FBK0hSLE1BQU0sT0FBTyw4Q0FBK0MsU0FBUSxVQUduRTs7NElBSFksOENBQThDO2dJQUE5Qyw4Q0FBOEM7NEZBQTlDLDhDQUE4QztrQkFIMUQsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsMkNBQTJDO2lCQUN0RCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIERpcmVjdGl2ZSwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgRm9ybUJ1aWxkZXIsIEZvcm1Db250cm9sLCBWYWxpZGF0aW9uRXJyb3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgZmlsdGVyLCBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEVNUFRZLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBCYlRlbXBsYXRlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2NvcmUnO1xuaW1wb3J0IHsgR2V0SWRlbnRpdHksIElkZW50aXR5TGlzdGVkSXRlbSB9IGZyb20gJ0BiYWNrYmFzZS9kYXRhLWFuZy91c2VyJztcbmltcG9ydCB7XG4gIFByZXNlbnRhdGlvbk1lc3NhZ2VFbXBsb3llZVBvc3RSZXF1ZXN0Qm9keSxcbiAgVG9waWNzR2V0RW1wbG95ZWVSZXNwb25zZUJvZHksXG59IGZyb20gJ0BiYWNrYmFzZS9tZXNzYWdlcy12NS1odHRwLWFuZyc7XG5pbXBvcnQgeyBCYXNlQ3JlYXRlTWVzc2FnZUZvcm1Db21wb25lbnQgfSBmcm9tICcuLi9iYXNlLWZvcm0vYmFzZS1jcmVhdGUtbWVzc2FnZS1mb3JtLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNZXNzYWdlc0VuY29kaW5nU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL21lc3NhZ2VzLWVuY29kaW5nL21lc3NhZ2VzLWVuY29kaW5nLnNlcnZpY2UnO1xuaW1wb3J0IHsgU2hhcmVkTWV0aG9kc1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9zaGFyZWQtbWV0aG9kcy9zaGFyZWQtbWV0aG9kcy5zZXJ2aWNlJztcbmltcG9ydCB7IE1lc3NhZ2VzTWFuaXB1bGF0aW9uQ29uZmlybU1vZGFsU2VydmljZSB9IGZyb20gJy4uLy4uL21lc3NhZ2VzLW1hbmlwdWxhdGlvbi1jb25maXJtLW1vZGFsL21lc3NhZ2VzLW1hbmlwdWxhdGlvbi1jb25maXJtLW1vZGFsLnNlcnZpY2UnO1xuaW1wb3J0IHsgQmFzZUNyZWF0ZU1lc3NhZ2VGb3JtU2VydmljZSB9IGZyb20gJy4uL2Jhc2UtZm9ybS9iYXNlLWNyZWF0ZS1tZXNzYWdlLWZvcm0uc2VydmljZSc7XG5pbXBvcnQgeyBFbXBsb3llZUNyZWF0ZU1lc3NhZ2VGb3JtU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZW1wbG95ZWUtY3JlYXRlLW1lc3NhZ2UtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IE1lc3NhZ2VzVXBsb2FkQXR0YWNobWVudHNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vdXBsb2FkLWF0dGFjaG1lbnRzL3NlcnZpY2VzL21lc3NhZ2VzLXVwbG9hZC1hdHRhY2htZW50cy5zZXJ2aWNlJztcbmltcG9ydCB7IENyZWF0ZU1lc3NhZ2VGb3JtSW1wbGVtZW50YXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9jcmVhdGUtbWVzc2FnZS1mb3JtLWltcGxlbWVudGF0aW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgQmFzZVVwbG9hZEF0dGFjaG1lbnRzU2VydmljZSB9IGZyb20gJy4uLy4uL3VwbG9hZC1hdHRhY2htZW50cy9zZXJ2aWNlcy9iYXNlLWF0dGFjaG1lbnRzLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWVzc2FnZXNFbXBsb3llZVVwbG9hZEF0dGFjaG1lbnRzU2VydmljZSB9IGZyb20gJy4uLy4uL3VwbG9hZC1hdHRhY2htZW50cy9zZXJ2aWNlcy9lbXBsb3llZS11cGxvYWQtYXR0YWNobWVudHMuc2VydmljZSc7XG5pbXBvcnQgeyB0b3BpY1BsYWNlaG9sZGVyQ29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdG9waWMtcGxhY2Vob2xkZXItdGV4dC1oZWxwZXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1tZXNzYWdlcy1lbXBsb3llZS1jcmVhdGUtbWVzc2FnZS1mb3JtJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2VtcGxveWVlLWNyZWF0ZS1tZXNzYWdlLWZvcm0uY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBCYXNlQ3JlYXRlTWVzc2FnZUZvcm1TZXJ2aWNlLFxuICAgICAgdXNlQ2xhc3M6IENyZWF0ZU1lc3NhZ2VGb3JtSW1wbGVtZW50YXRpb25TZXJ2aWNlLFxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogQmFzZVVwbG9hZEF0dGFjaG1lbnRzU2VydmljZSxcbiAgICAgIHVzZUNsYXNzOiBNZXNzYWdlc0VtcGxveWVlVXBsb2FkQXR0YWNobWVudHNTZXJ2aWNlLFxuICAgIH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEVtcGxveWVlQ3JlYXRlTWVzc2FnZUZvcm1Db21wb25lbnQgZXh0ZW5kcyBCYXNlQ3JlYXRlTWVzc2FnZUZvcm1Db21wb25lbnQ8UHJlc2VudGF0aW9uTWVzc2FnZUVtcGxveWVlUG9zdFJlcXVlc3RCb2R5PiB7XG4gIC8qKlxuICAgKiBEZWJvdW5jZSB0aW1lIGZvciBpbnB1dCBzZWFyY2ggcmVxdWVzdHNcbiAgICovXG4gIEBJbnB1dCgpIGRlYm91bmNlVGltZSA9IDUwMDtcblxuICAvKipcbiAgICogTWluaW11bSBsZW5ndGggdmFsdWUgZm9yIGlucHV0IHNlYXJjaCByZXF1ZXN0XG4gICAqL1xuICBASW5wdXQoKSBtaW5TZWFyY2hMZW5ndGggPSAxO1xuXG4gIC8qKlxuICAgKiBQcmVkZWZpbmUgZm9ybVxuICAgKi9cbiAgQElucHV0KCkgc2V0IHByZURlZmluZUZvcm0odmFsOiBQYXJ0aWFsPFByZXNlbnRhdGlvbk1lc3NhZ2VFbXBsb3llZVBvc3RSZXF1ZXN0Qm9keT4pIHtcbiAgICBpZiAodmFsLnJlY2lwaWVudCkge1xuICAgICAgdGhpcy5nZXRVc2VyTmFtZSh2YWwucmVjaXBpZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBwcmVkZWZpbmVkIHVzZXIgZmllbGQgcmVhZG9ubHlcbiAgICovXG4gIEBJbnB1dCgpIGlzUHJlRGVmaW5lZFVzZXJSZWFkb25seSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBDb25maWdzIGZvciB0b3BpYyBzZWxlY3RvciBwbGFjZWhvbGRlclxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHRvcGljUGxhY2Vob2xkZXJDb25maWcgPSB0b3BpY1BsYWNlaG9sZGVyQ29uZmlnO1xuXG4gIC8qKlxuICAgKiBUeXBlYWhlYWQgb3B0aW9ucy5cbiAgICovXG4gIHJlYWRvbmx5IHR5cGVhaGVhZE9wdGlvbnMgPSB7XG4gICAgbmdiVHlwZWFoZWFkOiB0aGlzLnNlYXJjaC5iaW5kKHRoaXMpLFxuICAgIHJlc3VsdEZvcm1hdHRlcjogKGl0ZW06IElkZW50aXR5TGlzdGVkSXRlbSkgPT4gaXRlbS5mdWxsTmFtZSxcbiAgICBpbnB1dEZvcm1hdHRlcjogKGl0ZW06IElkZW50aXR5TGlzdGVkSXRlbSkgPT4gaXRlbS5mdWxsTmFtZSxcbiAgfTtcblxuICAvKipcbiAgICogQWRkaXRpb25hbCBmb3JtIGZpZWxkcy5cbiAgICovXG4gIHJlYWRvbmx5IGFkZGl0aW9uYWxGb3JtRmllbGRzOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfCBzdHJpbmcgfSA9IHtcbiAgICByZWNpcGllbnQ6ICcnLFxuICAgIGltcG9ydGFudDogZmFsc2UsXG4gICAgbm90RGVsZXRhYmxlOiBmYWxzZSxcbiAgICAncmVhZC1vbmx5JzogZmFsc2UsXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBlbXBsb3llZVNlcnZpY2U6IEVtcGxveWVlQ3JlYXRlTWVzc2FnZUZvcm1TZXJ2aWNlLFxuICAgIHJlYWRvbmx5IGVuY29kaW5nU2VydmljZTogTWVzc2FnZXNFbmNvZGluZ1NlcnZpY2UsXG4gICAgcmVhZG9ubHkgc2hhcmVkU2VydmljZTogU2hhcmVkTWV0aG9kc1NlcnZpY2UsXG4gICAgcmVhZG9ubHkgZmI6IEZvcm1CdWlsZGVyLFxuICAgIHJlYWRvbmx5IGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICByZWFkb25seSBjcmVhdGVNZXNzYWdlRm9ybVNlcnZpY2U6IEJhc2VDcmVhdGVNZXNzYWdlRm9ybVNlcnZpY2U8UHJlc2VudGF0aW9uTWVzc2FnZUVtcGxveWVlUG9zdFJlcXVlc3RCb2R5PixcbiAgICByZWFkb25seSBjb25maXJtTW9kYWxTZXJ2aWNlOiBNZXNzYWdlc01hbmlwdWxhdGlvbkNvbmZpcm1Nb2RhbFNlcnZpY2UsXG4gICAgcmVhZG9ubHkgdXBsb2FkU2VydmljZTogTWVzc2FnZXNVcGxvYWRBdHRhY2htZW50c1NlcnZpY2UsXG4gICkge1xuICAgIHN1cGVyKHNoYXJlZFNlcnZpY2UsIGNvbmZpcm1Nb2RhbFNlcnZpY2UsIGNkLCBjcmVhdGVNZXNzYWdlRm9ybVNlcnZpY2UsIGZiLCBlbmNvZGluZ1NlcnZpY2UsIHVwbG9hZFNlcnZpY2UpO1xuICAgIE9iamVjdC5rZXlzKHRoaXMuYWRkaXRpb25hbEZvcm1GaWVsZHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGtleSA9PT0gJ3JlY2lwaWVudCcgPyB0aGlzLmN1c3RvbVJlcXVpcmVkVmFsaWRhdG9yIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5uZXdNZXNzYWdlRm9ybUdyb3VwLmFkZENvbnRyb2woa2V5LCBuZXcgRm9ybUNvbnRyb2wodGhpcy5hZGRpdGlvbmFsRm9ybUZpZWxkc1trZXldLCB2YWxpZGF0b3IpKTtcbiAgICB9KTtcblxuICAgIHRoaXMubmV3TWVzc2FnZUZvcm1Hcm91cC51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1ldGhvZCB1cG9uIGNyZWF0aW9uIG9mIHRoZSBtZXNzYWdlIGZvcm0gc3VibWlzc2lvbi5cbiAgICovXG4gIG9uQ29uZmlybSgpIHtcbiAgICB0aGlzLm5ld01lc3NhZ2VGb3JtR3JvdXAubWFya0FzRGlydHkoKTtcbiAgICB0aGlzLm5ld01lc3NhZ2VGb3JtR3JvdXAubWFya0FsbEFzVG91Y2hlZCgpO1xuXG4gICAgY29uc3QgeyB2YWxpZCB9ID0gdGhpcy5uZXdNZXNzYWdlRm9ybUdyb3VwO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5uZXdNZXNzYWdlRm9ybUdyb3VwLmdldFJhd1ZhbHVlKCk7XG4gICAgaWYgKHZhbGlkKSB7XG4gICAgICBjb25zdCBmaW5hbFZhbHVlOiBQcmVzZW50YXRpb25NZXNzYWdlRW1wbG95ZWVQb3N0UmVxdWVzdEJvZHkgPSB7XG4gICAgICAgIHN1YmplY3Q6ICcnLFxuICAgICAgICBib2R5OiAnJyxcbiAgICAgICAgdG9waWM6ICcnLFxuICAgICAgICByZWNpcGllbnQ6IHZhbHVlLnJlY2lwaWVudC5pZCxcbiAgICAgICAgaW1wb3J0YW50OiB2YWx1ZS5pbXBvcnRhbnQsXG4gICAgICAgIGRlbGV0YWJsZTogIXZhbHVlLm5vdERlbGV0YWJsZSxcbiAgICAgICAgJ3JlYWQtb25seSc6IHZhbHVlWydyZWFkLW9ubHknXSxcbiAgICAgICAgLi4udGhpcy5nZXRTaW1wbGVGb3JtVmFsKHZhbHVlKSxcbiAgICAgIH07XG4gICAgICB0aGlzLmNyZWF0ZU1lc3NhZ2UoZmluYWxWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBtZXRob2QgdG8gc2VhcmNoIGZvciB0eXBlYWhlYWQgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHRleHQgU2VhcmNoIHF1ZXJ5XG4gICAqIEByZXR1cm5zIFNlYXJjaCBzdHJlYW1cbiAgICovXG4gIHNlYXJjaCh0ZXh0OiBPYnNlcnZhYmxlPHN0cmluZz4pOiBPYnNlcnZhYmxlPElkZW50aXR5TGlzdGVkSXRlbVtdIHwgUmVjb3JkPHN0cmluZywgbmV2ZXI+PiB7XG4gICAgcmV0dXJuIHRleHQucGlwZShcbiAgICAgIGRlYm91bmNlVGltZSh0aGlzLmRlYm91bmNlVGltZSksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgZmlsdGVyKHZhbHVlID0+IHZhbHVlLmxlbmd0aCA+IHRoaXMubWluU2VhcmNoTGVuZ3RoKSxcbiAgICAgIHN3aXRjaE1hcCh2YWx1ZSA9PiB0aGlzLmVtcGxveWVlU2VydmljZS5nZXRVc2Vycyh2YWx1ZSkpLFxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVzZXRUb0luaXQoKSB7XG4gICAgc3VwZXIucmVzZXRUb0luaXQoKTtcbiAgICB0aGlzLnJlc2V0QWRkaXRpb25hbEZpZWxkcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjdXN0b21SZXF1aXJlZFZhbGlkYXRvcihjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCB7XG4gICAgY29uc3QgdmFsdWUgPSBjb250cm9sLnZhbHVlO1xuICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnO1xuXG4gICAgcmV0dXJuICFpc1NlbGVjdGVkID8geyByZXF1aXJlZDogdHJ1ZSB9IDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VXNlck5hbWUodXNlcklkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmVtcGxveWVlU2VydmljZVxuICAgICAgLmdldFVzZXJCeUlkKHVzZXJJZClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YXAodXNlciA9PiB0aGlzLnNldFVzZXJOYW1lKHVzZXIsIHVzZXJJZCkpLFxuICAgICAgICBjYXRjaEVycm9yKGVyciA9PiB7XG4gICAgICAgICAgdGhpcy5zaGFyZWRTZXJ2aWNlLm9wZW5Ob3RpZmljYXRpb24odGhpcy5zaGFyZWRTZXJ2aWNlLmdldEVycm9yTWVzc2FnZShlcnIpLCAnZXJyb3InKTtcblxuICAgICAgICAgIHJldHVybiBFTVBUWTtcbiAgICAgICAgfSksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBwcml2YXRlIHNldFVzZXJOYW1lKHVzZXI6IEdldElkZW50aXR5LCB1c2VySWQ6IHN0cmluZykge1xuICAgIHRoaXMubmV3TWVzc2FnZUZvcm1Hcm91cC5jb250cm9sc1sncmVjaXBpZW50J10uc2V0VmFsdWUoeyAuLi51c2VyLCBpZDogdXNlcklkIH0pO1xuICAgIGlmICh0aGlzLmlzUHJlRGVmaW5lZFVzZXJSZWFkb25seSkge1xuICAgICAgdGhpcy5uZXdNZXNzYWdlRm9ybUdyb3VwLmNvbnRyb2xzWydyZWNpcGllbnQnXS5kaXNhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXNldEFkZGl0aW9uYWxGaWVsZHMoKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5hZGRpdGlvbmFsRm9ybUZpZWxkcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgdGhpcy5uZXdNZXNzYWdlRm9ybUdyb3VwLmNvbnRyb2xzW2tleV0uc2V0VmFsdWUodGhpcy5hZGRpdGlvbmFsRm9ybUZpZWxkc1trZXldKTtcbiAgICB9KTtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJFbXBsb3llZUNyZWF0ZU1lc3NhZ2VGb3JtQ3VzdG9taXphYmxlXScsXG59KVxuZXhwb3J0IGNsYXNzIEVtcGxveWVlQ3JlYXRlTWVzc2FnZUZvcm1DdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBFbXBsb3llZUNyZWF0ZU1lc3NhZ2VGb3JtQ29tcG9uZW50LFxuICB7IHRvcGljczogVG9waWNzR2V0RW1wbG95ZWVSZXNwb25zZUJvZHlbXSB9XG4+IHt9XG4iLCI8bmctY29udGFpbmVyXG4gIGJiRW1wbG95ZWVDcmVhdGVNZXNzYWdlRm9ybUN1c3RvbWl6YWJsZVxuICBbYmJIb3N0UmVmXT1cImhvc3RSZWZcIlxuICBbYmJUZW1wbGF0ZUNvbnRleHRdPVwie1xuICAgIHRvcGljczogdG9waWNzIHwgYXN5bmMsXG4gICAgbWF4QXR0YWNobWVudFNpemU6IG1heEF0dGFjaG1lbnRTaXplXG4gIH1cIlxuPjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGVcbiAgYmJFbXBsb3llZUNyZWF0ZU1lc3NhZ2VGb3JtQ3VzdG9taXphYmxlXG4gIGxldC1ob3N0XG4gIGxldC10b3BpY3M9XCJjb250ZXh0LnRvcGljc1wiXG4gIGxldC1tYXhBdHRhY2htZW50U2l6ZT1cImNvbnRleHQubWF4QXR0YWNobWVudFNpemVcIlxuPlxuICA8Zm9ybSBbZm9ybUdyb3VwXT1cImhvc3QubmV3TWVzc2FnZUZvcm1Hcm91cFwiIGRhdGEtcm9sZT1cImZvcm1cIiAoc3VibWl0KT1cImhvc3Qub25Db25maXJtKClcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgPGJiLWRyb3Bkb3duLXNpbmdsZS1zZWxlY3QtdWlcbiAgICAgICAgKm5nSWY9XCJcbiAgICAgICAgICB0b3BpY3M/Lmxlbmd0aFxuICAgICAgICAgICAgPyB0b3BpY1BsYWNlaG9sZGVyQ29uZmlnLnNlbGVjdFRvcGljUGxhY2Vob2xkZXJcbiAgICAgICAgICAgIDogdG9waWNQbGFjZWhvbGRlckNvbmZpZy5ub1RvcGljc1BsYWNlaG9sZGVyIGFzIHRvcGljUGxhY2Vob2xkZXJcbiAgICAgICAgXCJcbiAgICAgICAgW29wdGlvbnNdPVwidG9waWNzXCJcbiAgICAgICAgZGlzcGxheUF0dHJpYnV0ZVBhdGg9XCJuYW1lXCJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwidG9waWNcIlxuICAgICAgICBsYWJlbD1cIlRvcGljXCJcbiAgICAgICAgaTE4bi1sYWJlbD1cIlRvcGljIGxhYmVsIHRleHRAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0udG9waWNMYWJlbFwiXG4gICAgICAgIGFyaWEtbGFiZWw9XCJUb3BpY1wiXG4gICAgICAgIFthcmlhLWludmFsaWRdPVwiaG9zdC5pc0ludmFsaWRDb250cm9sKCd0b3BpYycpXCJcbiAgICAgICAgZGF0YS1yb2xlPVwidG9waWNzXCJcbiAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cImNvbXBvc2UtbWVzc2FnZS10b3BpYy1lcnJvci1tZXNzYWdlXCJcbiAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiVG9waWMgYXJpYS1sYWJlbCB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLnRvcGljQXJpYUxhYmVsXCJcbiAgICAgICAgbGFiZWxDbGFzc2VzPVwiZm9ybS1sYWJlbFwiXG4gICAgICAgIFthdHRyLnBsYWNlaG9sZGVyXT1cInRvcGljUGxhY2Vob2xkZXJcIlxuICAgICAgICBbcGxhY2Vob2xkZXJdPVwidG9waWNQbGFjZWhvbGRlclwiXG4gICAgICAgIChibHVyKT1cImhvc3QucmVzZXRGb3JtT25FbGVtZW50Qmx1cigpXCJcbiAgICAgID48L2JiLWRyb3Bkb3duLXNpbmdsZS1zZWxlY3QtdWk+XG4gICAgICA8YmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpXG4gICAgICAgIGlkPVwiY29tcG9zZS1tZXNzYWdlLXRvcGljLWVycm9yLW1lc3NhZ2VcIlxuICAgICAgICBbc2hvd0Vycm9yc109XCJob3N0LmlzSW52YWxpZENvbnRyb2woJ3RvcGljJylcIlxuICAgICAgPlxuICAgICAgICA8c3BhblxuICAgICAgICAgICpuZ0lmPVwiaG9zdC5oYXNFcnJvcigndG9waWMnLCAncmVxdWlyZWQnKVwiXG4gICAgICAgICAgaTE4bj1cIlxuICAgICAgICAgICAgRXJyb3IgbWVzc2FnZSBpZiBzdWJqZWN0IGZpZWxkIGlzXG4gICAgICAgICAgICByZXF1aXJlZEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5lcnJvcnMuc3ViamVjdFJlcXVpcmVkXCJcbiAgICAgICAgPlxuICAgICAgICAgIEZpZWxkIGlzIHJlcXVpcmVkXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvYmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICA8bGFiZWwgaTE4bj1cIlVzZXIgbGFiZWwgdGV4dEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5yZWNpcGllbnRMYWJlbFwiPlVzZXI8L2xhYmVsPlxuICAgICAgPGJiLXNlYXJjaC1ib3gtdWlcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwicmVjaXBpZW50XCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIlNlbGVjdCB1c2VyXCJcbiAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiXG4gICAgICAgICAgU2VsZWN0IHVzZXIgYXJpYS1sYWJlbCB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLnN1YmplY3RBcmlhTGFiZWxcIlxuICAgICAgICBbYXR0ci5hcmlhLWludmFsaWRdPVwiaG9zdC5pc0ludmFsaWRDb250cm9sKCdyZWNpcGllbnQnKVwiXG4gICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9XCJjb21wb3NlLW1lc3NhZ2UtcmVjaXBpZW50LWVycm9yLW1lc3NhZ2VcIlxuICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCB1c2VyXCJcbiAgICAgICAgaTE4bi1wbGFjZWhvbGRlcj1cIlNlbGVjdCB1c2VyQEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLnNlbGVjdFJlY2lwaWVudFBsYWNlaG9sZGVyXCJcbiAgICAgICAgW3R5cGVhaGVhZE9wdGlvbnNdPVwiaG9zdC50eXBlYWhlYWRPcHRpb25zXCJcbiAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgPjwvYmItc2VhcmNoLWJveC11aT5cbiAgICAgIDxiYi1pbnB1dC12YWxpZGF0aW9uLW1lc3NhZ2UtdWlcbiAgICAgICAgaWQ9XCJjb21wb3NlLW1lc3NhZ2UtcmVjaXBpZW50LWVycm9yLW1lc3NhZ2VcIlxuICAgICAgICBbc2hvd0Vycm9yc109XCJob3N0LmlzSW52YWxpZENvbnRyb2woJ3JlY2lwaWVudCcpXCJcbiAgICAgID5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICAqbmdJZj1cImhvc3QuaGFzRXJyb3IoJ3JlY2lwaWVudCcsICdyZXF1aXJlZCcpXCJcbiAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICBFcnJvciBtZXNzYWdlIGlmIHN1YmplY3QgZmllbGQgaXNcbiAgICAgICAgICAgIGVtcHR5QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLmVycm9ycy5yZWNpcGllbnRSZXF1aXJlZFwiXG4gICAgICAgICAgPkZpZWxkIGlzIHJlcXVpcmVkPC9zcGFuXG4gICAgICAgID5cbiAgICAgIDwvYmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgIDxiYi1pbnB1dC10ZXh0LXVpXG4gICAgICAgIGRhdGEtcm9sZT1cInN1YmplY3RcIlxuICAgICAgICBsYWJlbD1cIlN1YmplY3RcIlxuICAgICAgICBpMThuLWxhYmVsPVwiU3ViamVjdCBsYWJlbCB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLnN1YmplY3RMYWJlbFwiXG4gICAgICAgIGFyaWEtbGFiZWw9XCJTdWJqZWN0XCJcbiAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiU3ViamVjdCBhcmlhLWxhYmVsIHRleHRAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0uc3ViamVjdEFyaWFMYWJlbFwiXG4gICAgICAgIFthcmlhLWludmFsaWRdPVwiaG9zdC5pc0ludmFsaWRDb250cm9sKCdzdWJqZWN0JylcIlxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiY29tcG9zZS1tZXNzYWdlLXN1YmplY3QtZXJyb3ItbWVzc2FnZVwiXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiV3JpdGUgc3ViamVjdFwiXG4gICAgICAgIGkxOG4tcGxhY2Vob2xkZXI9XCJcbiAgICAgICAgICBTdWJqZWN0IHBsYWNlaG9sZGVyIHRleHRAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0uc3ViamVjdFBsYWNlaG9sZGVyXCJcbiAgICAgICAgbGFiZWxDbGFzc2VzPVwiZm9ybS1sYWJlbFwiXG4gICAgICAgIGZvcm1Db250cm9sTmFtZT1cInN1YmplY3RcIlxuICAgICAgICBbbWF4bGVuZ3RoXT1cImhvc3QubWF4U3ViamVjdExlbmd0aFwiXG4gICAgICAgIFtyZXF1aXJlZF09XCJ0cnVlXCJcbiAgICAgID5cbiAgICAgIDwvYmItaW5wdXQtdGV4dC11aT5cbiAgICAgIDxiYi1pbnB1dC12YWxpZGF0aW9uLW1lc3NhZ2UtdWlcbiAgICAgICAgaWQ9XCJjb21wb3NlLW1lc3NhZ2Utc3ViamVjdC1lcnJvci1tZXNzYWdlXCJcbiAgICAgICAgW3Nob3dFcnJvcnNdPVwiaG9zdC5pc0ludmFsaWRDb250cm9sKCdzdWJqZWN0JylcIlxuICAgICAgPlxuICAgICAgICA8c3BhblxuICAgICAgICAgICpuZ0lmPVwiaG9zdC5oYXNFcnJvcignc3ViamVjdCcsICdyZXF1aXJlZCcpXCJcbiAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICBFcnJvciBtZXNzYWdlIGlmIHN1YmplY3QgZmllbGQgaXNcbiAgICAgICAgICAgIGVtcHR5QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLmVycm9ycy5zdWJqZWN0UmVxdWlyZWRcIlxuICAgICAgICAgID5GaWVsZCBpcyByZXF1aXJlZDwvc3BhblxuICAgICAgICA+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgKm5nSWY9XCJob3N0Lmhhc0Vycm9yKCdzdWJqZWN0JywgJ21heGxlbmd0aCcpXCJcbiAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICBFcnJvciBtZXNzYWdlIGlmIHN1YmplY3QgdmFsdWUgaXMgbW9yZSB0aGVuIG1heGxlbmd0aFxuICAgICAgICAgICAgdmFsdWVAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0uZXJyb3JzLnN1YmplY3RNYXhsZW5ndGhcIlxuICAgICAgICAgID5Zb3VyIGlucHV0IG9mIHt7IG5ld01lc3NhZ2VGb3JtR3JvdXA/LmdldCgnc3ViamVjdCcpPy52YWx1ZT8ubGVuZ3RoIH19IGNoYXJhY3RlcnMgZXhjZWVkcyB0aGUgbGltaXQgb2ZcbiAgICAgICAgICB7eyBob3N0Lm1heFN1YmplY3RMZW5ndGggfX0uIFBsZWFzZSByZXBocmFzZS48L3NwYW5cbiAgICAgICAgPlxuICAgICAgPC9iYi1pbnB1dC12YWxpZGF0aW9uLW1lc3NhZ2UtdWk+XG4gICAgPC9kaXY+XG5cbiAgICA8aHIgLz5cblxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tcIj5cbiAgICAgICAgPGJiLWlucHV0LWNoZWNrYm94LXVpXG4gICAgICAgICAgY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tZmlsbFwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwicmVhZC1vbmx5XCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiUmVhZCBvbmx5XCJcbiAgICAgICAgICBkYXRhLXJvbGU9XCJyZWFkb25seVwiXG4gICAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiXG4gICAgICAgICAgICBjaGVja2JveCByZWFkLW9ubHkgYXJpYS1sYWJlbEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5yZWFkb25seUNoZWNrYm94QXJpYUxhYmVsXCJcbiAgICAgICAgICBsYWJlbD1cIlJlYWQgb25seVwiXG4gICAgICAgICAgaTE4bi1sYWJlbD1cIlxuICAgICAgICAgICAgcmVhZCBvbmx5IGNoZWNrYm94IGxhYmVsIHRleHRAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0ucmVhZG9ubHlDaGVja2JveExhYmVsXCJcbiAgICAgICAgPjwvYmItaW5wdXQtY2hlY2tib3gtdWk+XG5cbiAgICAgICAgPGJiLWlucHV0LWNoZWNrYm94LXVpXG4gICAgICAgICAgY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tZmlsbFwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwibm90RGVsZXRhYmxlXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2FuJ3QgYmUgZGVsZXRlZFwiXG4gICAgICAgICAgZGF0YS1yb2xlPVwiZGVsZXRhYmxlXCJcbiAgICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJcbiAgICAgICAgICAgIGNoZWNrYm94IGRlbGV0YWJsZSBhcmlhLWxhYmVsQEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLmRlbGV0YWJsZUNoZWNrYm94QXJpYUxhYmVsXCJcbiAgICAgICAgICBsYWJlbD1cIkNhbid0IGJlIGRlbGV0ZWRcIlxuICAgICAgICAgIGkxOG4tbGFiZWw9XCJcbiAgICAgICAgICAgIGRlbGV0YWJsZSBjaGVja2JveCBsYWJlbCB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLmRlbGV0YWJsZUNoZWNrYm94TGFiZWxcIlxuICAgICAgICA+PC9iYi1pbnB1dC1jaGVja2JveC11aT5cblxuICAgICAgICA8YmItaW5wdXQtY2hlY2tib3gtdWlcbiAgICAgICAgICBjbGFzcz1cImJiLXN0YWNrX19pdGVtIGJiLXN0YWNrX19pdGVtLS1maWxsXCJcbiAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJpbXBvcnRhbnRcIlxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJpbXBvcnRhbnRcIlxuICAgICAgICAgIGRhdGEtcm9sZT1cImltcG9ydGFudFwiXG4gICAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiXG4gICAgICAgICAgICBjaGVja2JveCBpbXBvcnRhbnQgYXJpYS1sYWJlbEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5pbXBvcnRhbnRDaGVja2JveEFyaWFMYWJlbFwiXG4gICAgICAgICAgbGFiZWw9XCJJbXBvcnRhbnRcIlxuICAgICAgICAgIGkxOG4tbGFiZWw9XCJcbiAgICAgICAgICAgIGltcG9ydGFudCBjaGVja2JveCBsYWJlbCB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLmltcG9ydGFudENoZWNrYm94TGFiZWxcIlxuICAgICAgICA+PC9iYi1pbnB1dC1jaGVja2JveC11aT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgIDxiYi1yaWNoLXRleHQtZWRpdG9yLXVpXG4gICAgICAgIGxhYmVsPVwiTWVzc2FnZVwiXG4gICAgICAgIGkxOG4tbGFiZWw9XCJNZXNzYWdlIGxhYmVsIHRleHRAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0ubWVzc2FnZUxhYmVsXCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIk1lc3NhZ2VcIlxuICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJNZXNzYWdlIGFyaWEtbGFiZWwgdGV4dEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5tZXNzYWdlQXJpYUxhYmVsXCJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJXcml0ZSBzb21lIHRleHRcIlxuICAgICAgICBpMThuLXBsYWNlaG9sZGVyPVwiXG4gICAgICAgICAgTWVzc2FnZSBwbGFjZWhvbGRlciB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLm1lc3NhZ2VQbGFjZWhvbGRlclwiXG4gICAgICAgIFthdHRyLmFyaWEtaW52YWxpZF09XCJob3N0LmlzSW52YWxpZENvbnRyb2woJ2JvZHknKVwiXG4gICAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwiJ2NvbXBvc2UtbWVzc2FnZS1ib2R5LWVycm9yLW1lc3NhZ2UnXCJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiYm9keVwiXG4gICAgICAgIFtjb3VudGVyXT1cInRydWVcIlxuICAgICAgICBbbWF4TGVuZ3RoXT1cImhvc3QubWF4TWVzc2FnZUxlbmd0aFwiXG4gICAgICAgIFtyZXF1aXJlZF09XCJ0cnVlXCJcbiAgICAgID5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNhY3Rpb25zIGJiUmljaFRleHRFZGl0b3JBY3Rpb25zPlxuICAgICAgICAgIDxiYi1yaWNoLXRleHQtZWRpdG9yLWJvbGQtYWN0aW9uPjwvYmItcmljaC10ZXh0LWVkaXRvci1ib2xkLWFjdGlvbj5cbiAgICAgICAgICA8YmItcmljaC10ZXh0LWVkaXRvci1pdGFsaWMtYWN0aW9uPjwvYmItcmljaC10ZXh0LWVkaXRvci1pdGFsaWMtYWN0aW9uPlxuICAgICAgICAgIDxiYi1yaWNoLXRleHQtZWRpdG9yLXVuZGVybGluZS1hY3Rpb24+PC9iYi1yaWNoLXRleHQtZWRpdG9yLXVuZGVybGluZS1hY3Rpb24+XG4gICAgICAgICAgPGJiLXJpY2gtdGV4dC1lZGl0b3Itc3RyaWtldGhyb3VnaC1hY3Rpb24+IDwvYmItcmljaC10ZXh0LWVkaXRvci1zdHJpa2V0aHJvdWdoLWFjdGlvbj5cbiAgICAgICAgICA8YmItcmljaC10ZXh0LWVkaXRvci1vbGlzdC1hY3Rpb24+PC9iYi1yaWNoLXRleHQtZWRpdG9yLW9saXN0LWFjdGlvbj5cbiAgICAgICAgICA8YmItcmljaC10ZXh0LWVkaXRvci11bGlzdC1hY3Rpb24+IDwvYmItcmljaC10ZXh0LWVkaXRvci11bGlzdC1hY3Rpb24+XG4gICAgICAgICAgPGJiLXJpY2gtdGV4dC1lZGl0b3ItbGluay1hY3Rpb24+PC9iYi1yaWNoLXRleHQtZWRpdG9yLWxpbmstYWN0aW9uPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgPC9iYi1yaWNoLXRleHQtZWRpdG9yLXVpPlxuICAgICAgPGJiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aVxuICAgICAgICBpZD1cImNvbXBvc2UtbWVzc2FnZS1ib2R5LWVycm9yLW1lc3NhZ2VcIlxuICAgICAgICBbc2hvd0Vycm9yc109XCJob3N0LmlzSW52YWxpZENvbnRyb2woJ2JvZHknKVwiXG4gICAgICA+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgKm5nSWY9XCJob3N0Lmhhc0Vycm9yKCdib2R5JywgJ3JlcXVpcmVkJylcIlxuICAgICAgICAgIGkxOG49XCJFcnJvciBtZXNzYWdlIGlmIGZpZWxkIGlzIHJlcXVpcmVkQEBtZXNzYWdlcy5jcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5lcnJvcnMubWVzc2FnZVJlcXVpcmVkXCJcbiAgICAgICAgPlxuICAgICAgICAgIEZpZWxkIGlzIHJlcXVpcmVkXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvYmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICA8YmItbWVzc2FnZXMtdXBsb2FkLWF0dGFjaG1lbnRzXG4gICAgICAgIFttYXhTaXplXT1cIm1heEF0dGFjaG1lbnRTaXplXCJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiYXR0YWNobWVudHNcIlxuICAgICAgPjwvYmItbWVzc2FnZXMtdXBsb2FkLWF0dGFjaG1lbnRzPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJiYi1idXR0b24tYmFyXCI+XG4gICAgICA8YmItbG9hZC1idXR0b24tdWlcbiAgICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgZGF0YS1yb2xlPVwic3VibWl0XCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIlNlbmRcIlxuICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJcbiAgICAgICAgICBTdWJtaXQgYnV0dG9uIGFyaWEtbGFiZWwgdGV4dEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5zdWJtaXRCdXR0b25BcmlhTGFiZWxcIlxuICAgICAgICBpMThuPVwiU3VibWl0IGJ1dHRvbiB0ZXh0QEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLnN1Ym1pdEJ1dHRvblwiXG4gICAgICAgIFtpc0xvYWRpbmddPVwiaG9zdC5mb3JtTG9hZGluZ1wiXG4gICAgICA+XG4gICAgICAgIFNlbmRcbiAgICAgIDwvYmItbG9hZC1idXR0b24tdWk+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGJiQnV0dG9uXG4gICAgICAgIGJiUHJldmVudEJ1YmJsZURvd25cbiAgICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXG4gICAgICAgIGRhdGEtcm9sZT1cImRpc2NhcmRcIlxuICAgICAgICBhcmlhLWxhYmVsPVwiRGlzY2FyZFwiXG4gICAgICAgIGkxOG4tYXJpYS1sYWJlbD1cIlxuICAgICAgICAgIERpc2NhcmQgYnV0dG9uIGFyaWEtbGFiZWwgdGV4dEBAbWVzc2FnZXMuZW1wbG95ZWVDcmVhdGVNZXNzYWdlLmNvbXBvc2VNZXNzYWdlRm9ybS5kaXNjYXJkQnV0dG9uQXJpYUxhYmVsXCJcbiAgICAgICAgaTE4bj1cIkRpc2NhcmQgYnV0dG9uIHRleHRAQG1lc3NhZ2VzLmVtcGxveWVlQ3JlYXRlTWVzc2FnZS5jb21wb3NlTWVzc2FnZUZvcm0uZGlzY2FyZEJ1dHRvblwiXG4gICAgICAgIChjbGljayk9XCJob3N0LmNvbmZpcm1Nb2RhbFNlcnZpY2UudG9nZ2xlTW9kYWwodHJ1ZSwgaG9zdC5tYW5pcHVsYXRpb25UeXBlcy5kaXNjYXJkLCBob3N0Lm5ld01lc3NhZ2VGb3JtR3JvdXApXCJcbiAgICAgID5cbiAgICAgICAgRGlzY2FyZFxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIDwvZm9ybT5cblxuICA8YmItbWVzc2FnZXMtbWFuaXB1bGF0aW9uLWNvbmZpcm0tbW9kYWxcbiAgICBbaXNPcGVuXT1cImhvc3QuY29uZmlybWF0aW9uTW9kYWwub3BlbmVkXCJcbiAgICBbdHlwZV09XCJob3N0LmNvbmZpcm1hdGlvbk1vZGFsLnR5cGVcIlxuICAgIChjYW5jZWwpPVwiaG9zdC5jb25maXJtTW9kYWxTZXJ2aWNlLnRvZ2dsZU1vZGFsKGZhbHNlKVwiXG4gICAgKGNvbmZpcm0pPVwiaG9zdC5jb25maXJtQ29uZmlybWF0aW9uTW9kYWwoKVwiXG4gID48L2JiLW1lc3NhZ2VzLW1hbmlwdWxhdGlvbi1jb25maXJtLW1vZGFsPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNtZXNzYWdlQ29tcG9zZVN1Y2Nlc3M+XG4gIDxzcGFuXG4gICAgaTE4bj1cIlxuICAgICAgWW91ciBtZXNzYWdlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBzZW50LnxUZXh0IG9mIHN1Y2Nlc3NmdWwgY29udmVyc2F0aW9uXG4gICAgICBjb21wb3NlQEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLm1lc3NhZ2VTdWNjZXNzQ29tcG9zZVwiXG4gICAgPllvdXIgbWVzc2FnZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgc2VudC48L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNtZXNzYWdlQ29tcG9zZUVycm9yPlxuICA8c3BhblxuICAgIGkxOG49XCJcbiAgICAgIFRoZXJlIGlzIGFuIGVycm9yIHNlbmRpbmcgbWVzc2FnZS58VGV4dCBvZiBmYWlsZWQgY29udmVyc2F0aW9uXG4gICAgICBjb21wb3NlQEBtZXNzYWdlcy5lbXBsb3llZUNyZWF0ZU1lc3NhZ2UuY29tcG9zZU1lc3NhZ2VGb3JtLm1lc3NhZ2VFcnJvckNvbXBvc2VcIlxuICAgID5UaGVyZSBpcyBhbiBlcnJvciBzZW5kaW5nIG1lc3NhZ2UuPC9zcGFuXG4gID5cbjwvbmctdGVtcGxhdGU+XG4iXX0=