# Changelog
All notable changes to messages-common will be documented in this file.

This project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

## 8.0.0
### Changed 
- updated version of messages api to v5 [DLRN-4243]

## 7.2.2
### Fixed
- added validation fix for catalog-info.yaml file [DLRN-4239]

## 7.2.1
### Changed
- added catalog-info.yaml file [DLRN-4239]

## 7.2.0
### Fixed
-  Add information message to Topic drop-down when user is not subscribed to any topic [DLRN-3803]

## 7.1.0
### Fixed
- fixed jumping discard button (implemented new directive) [DLRN-3859]

## 7.0.1
### Fixed
- missing error message for max size attachement [DLRN-4124]

## 7.0.0
### Removed
- remove deprecations

## 6.0.2
### Changed
- data-ang update

## 6.0.1
### Changed
- data-ang update

## 6.0.0
### Changed
- Upgrade to Angular 12 [DLRN-3989]

## 5.4.6
### Fixed
 - fix filters reset on reopen [DLRN-3800]

## 5.4.5
### Changed
 - Remove Paragraph and Code buttons from Rich text editor [DLRN-4010]
 
## 5.4.4
### Fixed
- add tooltip to attachment icon

## 5.4.3
### Changed
- remove NotificationModule import [DLRN-3050]
- fix Axe tool issue with not unique id

## 5.4.2
### Changed
- Remove dot from Field is required error message [DLRN-3891]

## 5.4.1
### Fixed
- accessibility test fix [DLRN-3429]

## 5.4.0
### Changed
- Mailout accessibility improvements [DLRN-3155]

## 5.3.5
### Changed
- add aria-describedby attribute for validation [DLRN-3164]

## 5.3.4
### Fixed
- remove deep import from `@backbase/user-http-ang/model/identityListedItem`

## 5.3.3
### Fixed
- `bb-messages-body-preview` issue displaying content from content services - iframe height does not correspond
  to responsive template height which results in vertical scroll [DLRN-3482]

## 5.3.2
### Changed
- update ui-ang imports

## 5.3.1
### Fixed
- fix create message form for employee when user is predefined

## 5.3.0
### Changed
- MC accessibility enhancements [DLRN-3191]
- limit mailout name length [DLRN-3693]

## 5.2.11
### Fixed
- make SR read modal subtitle on modal open, remove unneeded attributes [DLRN-3124]

## 5.2.10
### Fixed
- topics selection after back from preview [DLRN-3694]

## 5.2.9
### Fixed
- fix discard button in creation dialog [DLRN-3692]

## 5.2.8
### Fixed
- make submit button always active [DLRN-3677]

## 5.2.7
### Fixed
- `bb-messages-filter-conversation-list` - date range value display in filter params does not persist when filter is applied [DLRN-3684]

## 5.2.6
### Fixed
- fix null property value in the request [DLRN-3662]

## 5.2.5
### Fixed
- error description doesn't describe the reason of message [DLRN-3656]

## 5.2.4
### Fixed
- fix reset of additional fields of `employee-create-message` form

## 5.2.3
### Changed
- remove local karma config

## 5.2.2
### Changed
- message subject length is exceeded message for employee create message modal and mailouts [DLRN-3590]

## 5.2.1
### Added
- `shareReplayOnce` to fix memory leak [DLRN-3562]

## 5.2.0
### Added
- extension slot functionality for `bb-messages-conversation-message` [DLRN-3539]

## 5.1.2
### Changed
- `data-ang` bump

## 5.1.1
### Changed
- api.md file due to API extract script change
- Angular peerDeps optionality

## 5.1.0
### Changed
- journeyfication changes [DLRN-3359]

## 5.0.4
### Changed
- move api:check and api:extract scripts to root

## 5.0.3
### Fixed
- package.json libs version

## 5.0.2
### Fixed
- Styles for attachment in Mailout preview

## 5.0.1
### Fixed
- Remove delete button from attachment in Mailout preview [DLRN-3350]

## 5.0.0
### Changed
- Upgrade to Angular 11 [DLRN-3305]

## 4.3.3
## Fixed
- typo in deprecation message for `bb-messages-attachment` component

## 4.3.2
## Fixed
- `@backbase/ui-ang` peer-dependency version

## 4.3.1
## Fixed
- remove useless and incorrect aria-label for Filter conversations button [DLRN-3161]

## 4.3.0
## Changed
- bumped `@backbase/ui-ang` peer-dependency version
- replaced `bb-messages-attachment` with new `bb-file-attachment-ui` component from `ui-ang`, added deprecation message [DLRN-3287]
- replaced file input markup with new `bb-input-file-ui` component from `ui-ang` [DLRN-3287]

## 4.2.7
### Fixed
- inputs type issues
### Changed
- replace getters by a property
### Added
- `modelItemToBoolean` helper function

## 4.2.6
### Changed
- make itemModel optional for journey

## 4.2.5
### Fixed
- accessibility issues for `upload-attachments`, `messages-attachment` and `messages-conversation-message` [DLRN-1950]

## 4.2.4
### Added
- unit test coverage

## 4.2.3
### Added
- public api documentation

## 4.2.2
### Fixed
- employee-create-message-modal disabled field value getter

## 4.2.1
### Fixed
- tslint warnings

## 4.2.0
### Added
- `isPreDefinedUserReadonly` preference for a create-message-modal

## 4.1.3
### Fixed
- attachments loading for a draft

## 4.1.3
### Fixed
- @backbase/data-ang version

## 4.1.2
### Changed
- updated data-ang to the latest version

## 4.1.1
### Changed
- added http service suffix and fixed file download according to updated data-ang, updated foundation

## 4.1.0
### Removed
- deprecated @Input() `cancelUpload` of `MessagesUploadAttachmentsComponent`

## 4.0.0
### Changed
- replace raml generated controllers with openapi generated controllers [DLRN-2586]

## 3.2.1
### Changed
- Data-roles for employee-mailout-review columns changed to content

### Added
- Data-role attributes to employee-mailout-review component

## 3.2.0
### Added
- improve unit tests coverage [DLRN-2517]

## 3.1.0
### Changed
- api md [DLRN-2085]

## 3.0.1
### Changed
- Data-role mailout-name changed to mailout-name-content
- Data-role mailout-topic changed to mailout-topic-content

### Added
- Data-role mailout-name
- Data-role mailout-topic

## 3.0.0
### Changed
- Upgrade to Foundation 6 and Angular 10 [DLRN-2145]

## 2.42.5
### Fixed
- parallel get and read requests resulting in error when conversation is deleted [DLRN-1943]

## 2.42.4
### Fixed
- attachments ids for request with attachments [DLRN-2241]

## 2.42.3
### Fixed
- download attachments [DLRN-2233]

## 2.42.2
### Fixed
- click on Discard button removes html-template attachment [DLRN-2226]

## 2.42.1
### Fixed
- back-to-edit button closes preview-modal [DLRN-2225]

## 2.42.0
### Changed
- migrate messages-ui to common lib [DLRN-2095]

## 2.41.0
### Added
- mailout review component [DLRN-1857]
- migrate message-preview from messages-ui

## 2.40.0
### Added
- deletion in progress mailout status [DLRN-2125]

## 2.39.2
### Fixed
- the system is making two requests (read & conversation) parallel, after opening the conversation thread [DLRN-1943]

## 2.39.1
### Fixed
- deprecation messages [DLRN-2069]

## 2.39.0
### Added
- foundation 5.0.0.

## 2.38.0
### Added
- mailout statuses [DLRN-1945]

## 2.37.5
### Fixed
- Send button becomes active when not all required fields are filled [DLRN-1876]

## 2.37.4
### Added
- unknown id error class [DLRN-1879]

### Fixed
- get conversation id methom

## 2.37.3
### Added
- added data roles

## 2.37.2
### Added
- added data roles

## 2.37.1
### Fixed
- fixed Sonar issues [DLRN-1918]

## 2.37.0
### Added
- delete mailout manipulation modal type [DLRN-1843]

## 2.36.2
### Fixed
- xit unit test [DLRN-1920]
- fix test config

## 2.36.1
### Add
- imports order and prettify templates

## 2.36.0
### Removed
- Theme v1 Deprecations 

## 2.35.6
### Fixed
- Fix sonar issue

## 2.35.5
### Fixed
- Fix label for form

## 2.35.4
### Fixed
- Fix disabled `senderDisplayName` field

## 2.35.3
### Fixed
- Fix disabled sender Name + recipientsData should be string, not array

## 2.35.2
### Fixed
- Release 3.6.1 to master

## 2.35.1
### Fixed
- Fix default val for `showMailboxTypes`

## 2.35.0
### Added
- Add pre-defined user to widget properties (employee create message)

## 2.34.0
### Added
- Compose with pre-defined user

## 2.33.0
### Added
- New `bb-employee-create-mailout-form-ui` component to send mailout

### Fixed
- `bb-messages-upload-attachments-ui` avoid unnecessary removing attachment on successfully sent form

## 2.32.4
### Fixes
- Move notifications template outside of customization slot

## 2.32.3
### Fixes
- change deprecated interface from DraftDrat to PostDraft

## 2.32.2
### Deprecated
- enabledTheme2 and THEME_V2 is deprecated and will be removed in 3.7.0, please use @backbase/backbase-theme > 2.0.0

## 2.32.1

### Fixed
- `bb-messages-manipulation-confirm-modal-ui` heading for confirmation modals

## 2.32.0
### Added
- Migrate Confirmation modal on Theme v2
- Migrate Create message modal on Theme v2
- Migrate Attachments on Theme v2

### Changed
- Change modal size

## 2.31.0

### Added
- Add `enabledTheme2` flag for base-conversation
- Migrate filters on Theme v2

## 2.30.3

### Fixed
- `bb-messages-upload-attachments-ui` - rendering after opening draft with attachments

## 2.30.2

### Fixed
- Add loader to message form

## 2.30.1

### Fixed
- `bb-messages-upload-attachments-ui` - unexpected behavior with bbKeyboardClick
- `BaseCreateMessageFormComponent` - on `save & close` close window if form is empty

## 2.30.0

### Fixed
- `bb-messages-upload-attachments-ui` - disabled state

## 2.29.3

### Fixed
- Feature flag for Theme 2 (create message)

## 2.29.2

### Fixed
- Enable create message form on catching error

## 2.29.1

### Fixed
- `bb-employee-create-message-form-ui` - adding links to rich-text-editor field

## 2.29.0

### Added
- `bb-employee-create-message-form-ui` - ability to create read-only message or message that can't be deleted

## 2.28.0

### Added
- `BaseConversationThreadWidgetComponent` - ability to CRUD drafts

### Fixed
- `bb-messages-upload-attachments-ui` render attachments on open draft in compose window

## 2.27.0

### Added
- Feature flag for Theme 2

## 2.26.0

### Added
- `BaseConversationsListWidgetComponent` - Ability to open conversation thread with saved draft message

## 2.25.1

### Fixed
- Send only filled fields on save draft

## 2.25.0

### Added
- New communication API

### Deprecated
- URL-based cross-widget communication mechanism is deprecated and will be removed in the release 3.7.0. Please use Communication API'

## 2.24.1

### Fixed
- Bump widget

## 2.24.0

### Added
- `BaseCreateMessageFormComponent` ability to update and send draft

## 2.23.0

### Added
- `BaseConversationsListPropertiesService` for conversations list widgets
- `BaseConversationsListWidgetComponent` ability to send event for opening draft by id

## 2.22.0

### Added
- `BaseCreateMessageFormComponent` ability to get draft by id and prefill the form, and save draft
- `bb-messages-upload-attachments-ui` ability to prefill component with attachments

## 2.21.2

### Fixed
- Conversation thread component: focus rich text editor on reply open

## 2.21.1

### Fixed
- Modal windows should be accessible
- Upload attachment max file size error handling

## 2.21.0

### Added
- `bb-messages-upload-attachments-ui` checking maximum upload file size

## 2.20.1

### Changed
- Move `attachmentsMapper` from component to service

## 2.20.0

### Added
- Add base class + service for conversation thread

## 2.19.0

### Added
- Return created message id on confirm event emitting

## 2.18.1

### Changed
- Release (3.5.0) to master

## 2.18.0

### Added
- Add `TopicsConfirmationModalModel` model for public api 

## 2.17.9

### Fix
- Fixed max counter for employee create message description

## 2.17.8

### Fixed
- Fix sharedService unit test 

## 2.17.7

### Fixed
- `Attach file` accessible through the keyboard

## 2.17.6

### Fixed
- Update list after message was created

## 2.17.5

### Added
- Publish `createMessageClosedEventName` method after create message modal closed

## 2.17.4

### Changed
- New Lint rules and bump Schematics

## 2.17.3

### Fixed
- Fix margin in employee create message form

## 2.17.2

### Fixed
- Fix providers for employee create message form

## 2.17.1

### Fixed
- Change imports

## 2.17.0

### Added
- `eventBusPublish` method for `SharedMethodsService`

## 2.16.1

### Fixed
- Bump widget version

## 2.16.0

### Added
- `BaseCreateMessageModalComponent` common logic for create message modal widgets
- `MessagesEmployeeConversationCountersService` ability to send request on update event publishing

### Fixed
- Sonar issues

## 2.15.0

### Added
- `eventBusFactory` method to `SharedMethodsService`

## 2.14.1

### Fix
- Set `pagination` param for topics list
- Set `subscribed` param for topic res.

## 2.14.0

### Added
- Add `snapshot` util
- Add `processData` to `SharedMethodsService`

## 2.13.1

- Added data-attribute for "Clear All", "Close" and "Apply" buttons

## 2.13.0

### Added
- Service to get counters for employee
- Sonar issue

## 2.12.0

### Added
- Add unit test.ts

## 2.11.2

### Fixed
- `bb-employee-create-message-form-ui`: deprecated `bb-messages-employee-upload-attachments-ui` changed to `bb-messages-upload-attachments-ui`

## 2.11.1

### Fixed
- File deletion after sending compose request

## 2.11.0

### Added
- Filter conversations list component for conversation list widget
- Moved conversations list widget logic to the base component

## 2.10.4

### Fixed
- Remove useless and move const in mock file

## 2.10.3

### Fixed
- Fix providers for employee create form

## 2.10.2

### Added
- Write tests for create message form component
- Write tests for upload attachments component/service

## 2.10.1

### Fixed
- Remove attachment view on catch error

## 2.10.0

### Added
- Move employee upload attachment logic (.ts and .html) to `MessagesUploadAttachmentsComponent`
- Add `DeprecatedEmployeeModuleModule` to support the old component
- Add `MessagesClientUploadAttachmentsService` to manage upload attachments for client widget
- Rename `bb-messages-employee-upload-attachments-ui` -> `bb-messages-upload-attachments-ui` (old names left too, for correct work of old versions)
- Rename `bbMessagesEmployeeUploadAttachmentsCustomizable` -> `bbMessagesUploadAttachmentsCustomizable` (old names left too, for correct work of old versions)
- Add Upload Attachments component/services/module to public_api

### Deprecated
- `bbMessagesEmployeeUploadAttachmentsCustomizable` directive will be removed in the next major version, use `bbMessagesUploadAttachmentsCustomizable` instead
- `bb-messages-employee-upload-attachments-ui` component will be removed in the next major version, use `bb-messages-upload-attachments-ui` instead

## 2.9.0

### Added
- Move repeating logic of creating messages for the client and employee in baseComponent
- Added an abstract service in order to be able to create message with different endpoints from one place

## 2.8.0

### Added
- Add modules for common components and services for separation client and employee widgets

### Deprecated
- `MessagesCommonModule` module will be removed in the next major version, use separate modules instead

## 2.7.1

### Fixed
- Delete correct attachment item
- Showing confirmation modal if attachment was added and removed then

### Deprecated
- `BaseUploadAttachmentsComponent` @Input() cancelUpload, file upload canceling on reset form

## 2.7.0

### Added
- Add messages manipulation confirm modal
- Add confirmation to the Discard message flow

## 2.6.1

### Added
- Test for employee create message form

## 2.6.0

### Added
- `SharedMethods` service with shared methods between widgets

## 2.5.0

### Added
- Ability to set 'important' flag to message while creating new message(employee)

## 2.4.0

### Added
- Ability to delete attached files

## 2.3.0

### Added
- `bb-employee-create-message-form-ui` expanded with ability to attach files while creating new message

## 2.2.0

### Added
- `bb-messages-employee-upload-attachments-ui` component with ability to attach and upload files

## 2.1.1

### Fixed
- Showing two error messages if user input field is invalid with error required

## 2.1.0

### Added
- `bb-employee-create-message-form-ui` component to create messages for employee

## 2.0.1

### Fixed
- Sonar issues

## 2.0.0

### Fixed
- `MessagesUnreadConversationCountService` according to `foundation-ang` library fixes

## 2.0.0-beta.1

### Changed
- Migrated to angular 8

## 2.0.0-beta.0

### Changed
- Peer dependencies to angular 8.0.0-beta.9, @backbase/foundation-ang to 4.0.0-beta.12, @backbase/data-ang to 3.3.0-beta.7

## 1.29.0

### Added
- Unread conversation count service moved from `@backbase/messages-conversations-list-widget-ang`

## 1.6.2

### Fixed
- Bump version

## 1.0.0

### Added
- `messages-encoding` service
