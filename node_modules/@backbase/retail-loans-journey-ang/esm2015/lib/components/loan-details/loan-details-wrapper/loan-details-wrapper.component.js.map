{"version":3,"file":"loan-details-wrapper.component.js","sourceRoot":"","sources":["../../../../../../../../libs/retail-loans-journey/src/lib/components/loan-details/loan-details-wrapper/loan-details-wrapper.component.ts","../../../../../../../../libs/retail-loans-journey/src/lib/components/loan-details/loan-details-wrapper/loan-details-wrapper.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAC1C,OAAO,EAAE,cAAc,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzD,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAKrC,OAAO,EAAE,iBAAiB,EAAE,MAAM,oCAAoC,CAAC;;;;;;;AAOvE,MAAM,OAAO,2BAA2B;IAkBtC,YACmB,MAAc,EACd,cAA8B,EAC9B,YAA+B;;QAF/B,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAgB;QAC9B,iBAAY,GAAZ,YAAY,CAAmB;QApBlD;;WAEG;QACM,eAAU,GAAuB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CACvE,GAAG,CAAC,CAAC,EAAE,eAAe,EAAE,EAAE,EAAE,CAAC,eAAe,CAAC,CAC9C,CAAC;QAEF;;WAEG;QACM,0BAAqB,GAAwB,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC;QAEhG;;WAEG;QACM,SAAI,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,MAAA,MAAA,IAAI,CAAC,cAAc,CAAC,QAAQ,0CAAE,WAAW,0CAAE,QAA6B,KAAI,EAAE,CAAC,CAAC;QAOpH,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE,CAAC;IACzC,CAAC;IAED;;;;OAIG;IACH,kBAAkB;QAChB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;IAC7C,CAAC;IAEO,eAAe,CAAC,MAAwB;QAC9C,OAAO,MAAM;aACV,MAAM,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,IAAI,KAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,CAAA,CAAC;aACjD,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;YACxB,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE;YACrB,KAAK,EAAE,IAAI;SACZ,CAAC,CAAC,CAAC;IACR,CAAC;;4IA1CU,2BAA2B;gIAA3B,2BAA2B,+DCdxC,olCA2BA;4FDba,2BAA2B;kBAJvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,WAAW,EAAE,uCAAuC;iBACrD","sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\nimport { LoansTab } from '@backbase/loans-collection-ui-ang';\n\nimport { LoansStoreService } from '../../../store/loans/store.service';\nimport { DataTypedRoute } from '../../../models/tab-route.model';\n\n@Component({\n  selector: 'bb-loan-details-wrapper',\n  templateUrl: './loan-details-wrapper.component.html',\n})\nexport class LoanDetailsWrapperComponent {\n  /**\n   * Stream of account ids from router params\n   */\n  readonly accountId$: Observable<string> = this.activatedRoute.params.pipe(\n    map(({ selectedAccount }) => selectedAccount),\n  );\n\n  /**\n   * Whether to show / hide navigate to overview btn\n   */\n  readonly showNavigationButton$: Observable<boolean> = this.storeService.showNavigateToOverview$;\n\n  /**\n   * Array of tabs to be displayed\n   */\n  readonly tabs = this.createRouteTabs((this.activatedRoute.snapshot?.routeConfig?.children as DataTypedRoute[]) || []);\n\n  constructor(\n    private readonly router: Router,\n    private readonly activatedRoute: ActivatedRoute,\n    private readonly storeService: LoansStoreService,\n  ) {\n    this.storeService.fetchAmountOfLoans();\n  }\n\n  /**\n   * Navigates to the list overview view\n   *\n   * TODO: set up relative routing\n   */\n  navigateToAccounts(): void {\n    this.router.navigate(['my-accounts/list']);\n  }\n\n  private createRouteTabs(routes: DataTypedRoute[]): LoansTab[] {\n    return routes\n      .filter(({ path, data }) => path && data?.titleFn)\n      .map(({ path, data }) => ({\n        title: data.titleFn(),\n        route: path,\n      }));\n  }\n}\n","<div class=\"bb-layout__container d-block bb-block--xl mt-5 container-fluid container\">\n  <div class=\"bb-block bb-block--xl\">\n    <button\n      data-role=\"loans-heading-button__navigation\"\n      (click)=\"navigateToAccounts()\"\n      class=\"bb-stack justify-content-start bb-stack--density-sm btn-link-text btn-md btn\"\n    >\n      <i aria-hidden=\"true\" class=\"bb-icon bb-icon-arrow-back bb-icon--sm\"></i>\n      <span i18n-navigationButtonTitle=\"Loan details heading nav button title@@loans.details.heading.nav-button.title\"\n        >Back to My Accounts</span\n      >\n    </button>\n  </div>\n\n  <section class=\"bb-block bb-block--xl p--4\">\n    <h2 class=\"sr-only\" i18n=\"Loans details a11y section heading@@loans.details.section.a11y.heading\">Loan details</h2>\n    <bb-loan-summary *ngIf=\"accountId$ | async as accountId\" [loanId]=\"accountId\"></bb-loan-summary>\n  </section>\n\n  <div>\n    <div>\n      <div class=\"bb-card__body\">\n        <bb-loans-tabs data-role=\"loan-details__tabs\" [tabs]=\"tabs\"></bb-loans-tabs>\n      </div>\n    </div>\n  </div>\n</div>\n"]}