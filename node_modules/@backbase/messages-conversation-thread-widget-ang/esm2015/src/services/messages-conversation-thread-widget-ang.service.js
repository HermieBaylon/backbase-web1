import { Inject, Injectable } from '@angular/core';
import { tap } from 'rxjs/operators';
import { PUBSUB } from '@backbase/foundation-ang/web-sdk';
import { AbstractBaseMessagesConversationThreadService } from '@backbase/messages-common';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/messages-v5-http-ang";
import * as i2 from "@angular/common/http";
const bbEventUnreadConversationCountUpdate = 'bb.event.unread-conversation-count.update';
export class MessagesConversationThreadWidgetService extends AbstractBaseMessagesConversationThreadService {
    constructor(messagesService, http, pubSub) {
        super();
        this.messagesService = messagesService;
        this.http = http;
        this.pubSub = pubSub;
    }
    /**
     * Creat message draft
     *
     * @param messageId Message id
     * @param body Message request body
     * @returns Create converastion message draft stream
     */
    createDraft(messageId, body) {
        return this.messagesService.postConversationMessageDraft({
            messageId,
            conversationMessageDraftPostRequestBody: body,
        });
    }
    /**
     * Delete message draft
     *
     * @param draftId Draft id
     * @returns Delete draft stream
     */
    deleteDraft(draftId) {
        return this.messagesService.deleteMessageDrafts({ ids: [draftId] });
    }
    /**
     * Update message draft
     *
     * @param messageId Message id
     * @param body Conversation message draft request body
     * @returns Update draft stream
     */
    updateDraft(messageId, body) {
        return this.messagesService.putConversationMessageDraft({
            messageId,
            conversationMessageDraftPutRequestBody: body,
        });
    }
    /**
     * Delete conversation
     *
     * @param id Conversation id
     * @returns Delete conversation thread stream
     */
    deleteConversation(id) {
        return this.messagesService
            .deleteConversationThreads({ ids: [id] })
            .pipe(tap(() => this.pubSub.publish(bbEventUnreadConversationCountUpdate, undefined)));
    }
    /**
     * Get conversation thread
     *
     * @param messageId Message id
     * @returns Get conversation thread stream
     */
    getConversationThread(messageId) {
        return this.messagesService.getMessageThread({ messageId });
    }
    /**
     * Mark conversation as read or unread
     *
     * @param params Mark conversation as read/unread request body
     * @returns Mark conversation as read/unread stream
     */
    markConversationsAsReadUnread(params) {
        return this.messagesService
            .putMarkAsReadUnread({ markAsReadUnreadPutRequestBody: params })
            .pipe(tap(() => this.pubSub.publish(bbEventUnreadConversationCountUpdate, undefined)));
    }
    /**
     * Post reply message
     *
     * @param messageId Message id
     * @param body Message reply post request body
     * @returns Post reply message stream
     */
    postReplyMessage(messageId, body) {
        return this.messagesService.postMessageReply({ messageId, messageReplyPostRequestBody: body });
    }
    /**
     * Get url attachment download
     *
     * @param attachmentId Attachment id
     * @returns Download attachment url
     */
    getDownloadAttachmentUrl(attachmentId) {
        return this.messagesService.getMessageAttachmentUrl({ attachmentId });
    }
    /**
     * Download attachment
     *
     * @param attachmentId Attachment id
     * @returns Download file stream
     */
    downloadFile(attachmentId) {
        return this.http.get(this.getDownloadAttachmentUrl(attachmentId), { responseType: 'arraybuffer' });
    }
}
MessagesConversationThreadWidgetService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadWidgetService, deps: [{ token: i1.MessagecenterHttpService }, { token: i2.HttpClient }, { token: PUBSUB }], target: i0.ɵɵFactoryTarget.Injectable });
MessagesConversationThreadWidgetService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadWidgetService });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadWidgetService, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.MessagecenterHttpService }, { type: i2.HttpClient }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [PUBSUB]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZXMtY29udmVyc2F0aW9uLXRocmVhZC13aWRnZXQtYW5nLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL21lc3NhZ2VzLWNvbnZlcnNhdGlvbi10aHJlYWQtd2lkZ2V0LWFuZy9zcmMvc2VydmljZXMvbWVzc2FnZXMtY29udmVyc2F0aW9uLXRocmVhZC13aWRnZXQtYW5nLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFbkQsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXJDLE9BQU8sRUFBRSxNQUFNLEVBQVUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNsRSxPQUFPLEVBQUUsNkNBQTZDLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQzs7OztBQWUxRixNQUFNLG9DQUFvQyxHQUFHLDJDQUEyQyxDQUFDO0FBR3pGLE1BQU0sT0FBTyx1Q0FBd0MsU0FBUSw2Q0FBNkM7SUFDeEcsWUFDbUIsZUFBeUMsRUFDekMsSUFBZ0IsRUFDQSxNQUFjO1FBRS9DLEtBQUssRUFBRSxDQUFDO1FBSlMsb0JBQWUsR0FBZixlQUFlLENBQTBCO1FBQ3pDLFNBQUksR0FBSixJQUFJLENBQVk7UUFDQSxXQUFNLEdBQU4sTUFBTSxDQUFRO0lBR2pELENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxXQUFXLENBQ1QsU0FBaUIsRUFDakIsSUFBNkM7UUFFN0MsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLDRCQUE0QixDQUFDO1lBQ3ZELFNBQVM7WUFDVCx1Q0FBdUMsRUFBRSxJQUFJO1NBQzlDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFdBQVcsQ0FBQyxPQUFlO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsV0FBVyxDQUFDLFNBQWlCLEVBQUUsSUFBNEM7UUFDekUsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLDJCQUEyQixDQUFDO1lBQ3RELFNBQVM7WUFDVCxzQ0FBc0MsRUFBRSxJQUFJO1NBQzdDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILGtCQUFrQixDQUFDLEVBQVU7UUFDM0IsT0FBTyxJQUFJLENBQUMsZUFBZTthQUN4Qix5QkFBeUIsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7YUFDeEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxvQ0FBb0MsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0YsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gscUJBQXFCLENBQUMsU0FBaUI7UUFDckMsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztJQUM5RCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCw2QkFBNkIsQ0FDM0IsTUFBc0M7UUFFdEMsT0FBTyxJQUFJLENBQUMsZUFBZTthQUN4QixtQkFBbUIsQ0FBQyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sRUFBRSxDQUFDO2FBQy9ELElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsb0NBQW9DLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNGLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxnQkFBZ0IsQ0FDZCxTQUFpQixFQUNqQixJQUFpQztRQUVqQyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxTQUFTLEVBQUUsMkJBQTJCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNqRyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCx3QkFBd0IsQ0FBQyxZQUFvQjtRQUMzQyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQXVCLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDO0lBQ3hFLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFlBQVksQ0FBQyxZQUFvQjtRQUMvQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDO0lBQ3JHLENBQUM7O3FJQXRIVSx1Q0FBdUMsb0ZBSXhDLE1BQU07eUlBSkwsdUNBQXVDOzRGQUF2Qyx1Q0FBdUM7a0JBRG5ELFVBQVU7OzBCQUtOLE1BQU07MkJBQUMsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFBVQlNVQiwgUHVic3ViIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL3dlYi1zZGsnO1xuaW1wb3J0IHsgQWJzdHJhY3RCYXNlTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRTZXJ2aWNlIH0gZnJvbSAnQGJhY2tiYXNlL21lc3NhZ2VzLWNvbW1vbic7XG5pbXBvcnQge1xuICBDb252ZXJzYXRpb25NZXNzYWdlRHJhZnRQb3N0UmVxdWVzdEJvZHksXG4gIENvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdFB1dFJlcXVlc3RCb2R5LFxuICBDb252ZXJzYXRpb25UaHJlYWRzRGVsZXRlUmVzcG9uc2VCb2R5LFxuICBEZWxldGVEcmFmdHNSZXNwb25zZUJvZHksXG4gIERyYWZ0UG9zdFJlc3BvbnNlQm9keSxcbiAgTWFya0FzUmVhZFVucmVhZFB1dFJlcXVlc3RCb2R5LFxuICBNYXJrQXNSZWFkVW5yZWFkUHV0UmVzcG9uc2VCb2R5LFxuICBNZXNzYWdlY2VudGVySHR0cFNlcnZpY2UsXG4gIE1lc3NhZ2VSZXBseVBvc3RSZXF1ZXN0Qm9keSxcbiAgTWVzc2FnZVRocmVhZEdldFJlc3BvbnNlQm9keSxcbiAgUHJlc2VudGF0aW9uTWVzc2FnZVBvc3RSZXNwb25zZUJvZHksXG59IGZyb20gJ0BiYWNrYmFzZS9tZXNzYWdlcy12NS1odHRwLWFuZyc7XG5cbmNvbnN0IGJiRXZlbnRVbnJlYWRDb252ZXJzYXRpb25Db3VudFVwZGF0ZSA9ICdiYi5ldmVudC51bnJlYWQtY29udmVyc2F0aW9uLWNvdW50LnVwZGF0ZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBNZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZFdpZGdldFNlcnZpY2UgZXh0ZW5kcyBBYnN0cmFjdEJhc2VNZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZFNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1lc3NhZ2VzU2VydmljZTogTWVzc2FnZWNlbnRlckh0dHBTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgaHR0cDogSHR0cENsaWVudCxcbiAgICBASW5qZWN0KFBVQlNVQikgcHJpdmF0ZSByZWFkb25seSBwdWJTdWI6IFB1YnN1YixcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdCBtZXNzYWdlIGRyYWZ0XG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlSWQgTWVzc2FnZSBpZFxuICAgKiBAcGFyYW0gYm9keSBNZXNzYWdlIHJlcXVlc3QgYm9keVxuICAgKiBAcmV0dXJucyBDcmVhdGUgY29udmVyYXN0aW9uIG1lc3NhZ2UgZHJhZnQgc3RyZWFtXG4gICAqL1xuICBjcmVhdGVEcmFmdChcbiAgICBtZXNzYWdlSWQ6IHN0cmluZyxcbiAgICBib2R5OiBDb252ZXJzYXRpb25NZXNzYWdlRHJhZnRQb3N0UmVxdWVzdEJvZHksXG4gICk6IE9ic2VydmFibGU8RHJhZnRQb3N0UmVzcG9uc2VCb2R5IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzU2VydmljZS5wb3N0Q29udmVyc2F0aW9uTWVzc2FnZURyYWZ0KHtcbiAgICAgIG1lc3NhZ2VJZCxcbiAgICAgIGNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdFBvc3RSZXF1ZXN0Qm9keTogYm9keSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgbWVzc2FnZSBkcmFmdFxuICAgKlxuICAgKiBAcGFyYW0gZHJhZnRJZCBEcmFmdCBpZFxuICAgKiBAcmV0dXJucyBEZWxldGUgZHJhZnQgc3RyZWFtXG4gICAqL1xuICBkZWxldGVEcmFmdChkcmFmdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPERlbGV0ZURyYWZ0c1Jlc3BvbnNlQm9keT4ge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzU2VydmljZS5kZWxldGVNZXNzYWdlRHJhZnRzKHsgaWRzOiBbZHJhZnRJZF0gfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIG1lc3NhZ2UgZHJhZnRcbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2VJZCBNZXNzYWdlIGlkXG4gICAqIEBwYXJhbSBib2R5IENvbnZlcnNhdGlvbiBtZXNzYWdlIGRyYWZ0IHJlcXVlc3QgYm9keVxuICAgKiBAcmV0dXJucyBVcGRhdGUgZHJhZnQgc3RyZWFtXG4gICAqL1xuICB1cGRhdGVEcmFmdChtZXNzYWdlSWQ6IHN0cmluZywgYm9keTogQ29udmVyc2F0aW9uTWVzc2FnZURyYWZ0UHV0UmVxdWVzdEJvZHkpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzU2VydmljZS5wdXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoe1xuICAgICAgbWVzc2FnZUlkLFxuICAgICAgY29udmVyc2F0aW9uTWVzc2FnZURyYWZ0UHV0UmVxdWVzdEJvZHk6IGJvZHksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGNvbnZlcnNhdGlvblxuICAgKlxuICAgKiBAcGFyYW0gaWQgQ29udmVyc2F0aW9uIGlkXG4gICAqIEByZXR1cm5zIERlbGV0ZSBjb252ZXJzYXRpb24gdGhyZWFkIHN0cmVhbVxuICAgKi9cbiAgZGVsZXRlQ29udmVyc2F0aW9uKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPENvbnZlcnNhdGlvblRocmVhZHNEZWxldGVSZXNwb25zZUJvZHkgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZXNTZXJ2aWNlXG4gICAgICAuZGVsZXRlQ29udmVyc2F0aW9uVGhyZWFkcyh7IGlkczogW2lkXSB9KVxuICAgICAgLnBpcGUodGFwKCgpID0+IHRoaXMucHViU3ViLnB1Ymxpc2goYmJFdmVudFVucmVhZENvbnZlcnNhdGlvbkNvdW50VXBkYXRlLCB1bmRlZmluZWQpKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbnZlcnNhdGlvbiB0aHJlYWRcbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2VJZCBNZXNzYWdlIGlkXG4gICAqIEByZXR1cm5zIEdldCBjb252ZXJzYXRpb24gdGhyZWFkIHN0cmVhbVxuICAgKi9cbiAgZ2V0Q29udmVyc2F0aW9uVGhyZWFkKG1lc3NhZ2VJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxNZXNzYWdlVGhyZWFkR2V0UmVzcG9uc2VCb2R5IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZXNTZXJ2aWNlLmdldE1lc3NhZ2VUaHJlYWQoeyBtZXNzYWdlSWQgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFyayBjb252ZXJzYXRpb24gYXMgcmVhZCBvciB1bnJlYWRcbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBNYXJrIGNvbnZlcnNhdGlvbiBhcyByZWFkL3VucmVhZCByZXF1ZXN0IGJvZHlcbiAgICogQHJldHVybnMgTWFyayBjb252ZXJzYXRpb24gYXMgcmVhZC91bnJlYWQgc3RyZWFtXG4gICAqL1xuICBtYXJrQ29udmVyc2F0aW9uc0FzUmVhZFVucmVhZChcbiAgICBwYXJhbXM6IE1hcmtBc1JlYWRVbnJlYWRQdXRSZXF1ZXN0Qm9keSxcbiAgKTogT2JzZXJ2YWJsZTxNYXJrQXNSZWFkVW5yZWFkUHV0UmVzcG9uc2VCb2R5IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzU2VydmljZVxuICAgICAgLnB1dE1hcmtBc1JlYWRVbnJlYWQoeyBtYXJrQXNSZWFkVW5yZWFkUHV0UmVxdWVzdEJvZHk6IHBhcmFtcyB9KVxuICAgICAgLnBpcGUodGFwKCgpID0+IHRoaXMucHViU3ViLnB1Ymxpc2goYmJFdmVudFVucmVhZENvbnZlcnNhdGlvbkNvdW50VXBkYXRlLCB1bmRlZmluZWQpKSk7XG4gIH1cblxuICAvKipcbiAgICogUG9zdCByZXBseSBtZXNzYWdlXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlSWQgTWVzc2FnZSBpZFxuICAgKiBAcGFyYW0gYm9keSBNZXNzYWdlIHJlcGx5IHBvc3QgcmVxdWVzdCBib2R5XG4gICAqIEByZXR1cm5zIFBvc3QgcmVwbHkgbWVzc2FnZSBzdHJlYW1cbiAgICovXG4gIHBvc3RSZXBseU1lc3NhZ2UoXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgYm9keTogTWVzc2FnZVJlcGx5UG9zdFJlcXVlc3RCb2R5LFxuICApOiBPYnNlcnZhYmxlPFByZXNlbnRhdGlvbk1lc3NhZ2VQb3N0UmVzcG9uc2VCb2R5IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZXNTZXJ2aWNlLnBvc3RNZXNzYWdlUmVwbHkoeyBtZXNzYWdlSWQsIG1lc3NhZ2VSZXBseVBvc3RSZXF1ZXN0Qm9keTogYm9keSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdXJsIGF0dGFjaG1lbnQgZG93bmxvYWRcbiAgICpcbiAgICogQHBhcmFtIGF0dGFjaG1lbnRJZCBBdHRhY2htZW50IGlkXG4gICAqIEByZXR1cm5zIERvd25sb2FkIGF0dGFjaG1lbnQgdXJsXG4gICAqL1xuICBnZXREb3dubG9hZEF0dGFjaG1lbnRVcmwoYXR0YWNobWVudElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzU2VydmljZS5nZXRNZXNzYWdlQXR0YWNobWVudFVybCh7IGF0dGFjaG1lbnRJZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEb3dubG9hZCBhdHRhY2htZW50XG4gICAqXG4gICAqIEBwYXJhbSBhdHRhY2htZW50SWQgQXR0YWNobWVudCBpZFxuICAgKiBAcmV0dXJucyBEb3dubG9hZCBmaWxlIHN0cmVhbVxuICAgKi9cbiAgZG93bmxvYWRGaWxlKGF0dGFjaG1lbnRJZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxBcnJheUJ1ZmZlcj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHRoaXMuZ2V0RG93bmxvYWRBdHRhY2htZW50VXJsKGF0dGFjaG1lbnRJZCksIHsgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInIH0pO1xuICB9XG59XG4iXX0=