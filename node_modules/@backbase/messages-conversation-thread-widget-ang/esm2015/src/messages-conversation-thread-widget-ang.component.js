import { Component, Directive, Input } from '@angular/core';
import { catchError, concatMap, finalize, first, map, switchMap, takeUntil, tap, throttleTime, withLatestFrom, } from 'rxjs/operators';
import { BehaviorSubject, combineLatest, EMPTY, merge, of } from 'rxjs';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { AbstractBaseMessagesConversationThreadService, BaseConversationThreadComponent, BaseUploadAttachmentsService, getPropertyValue, ManipulationType, MessagesClientUploadAttachmentsService, MessagesEncodingService, MessagesManipulationConfirmModalService, MessagesUploadAttachmentsService, ReadUnreadStatusType, shareReplayOnce, } from '@backbase/messages-common';
import { MessagesConversationThreadWidgetService } from './services/messages-conversation-thread-widget-ang.service';
import { WidgetPropertiesService } from './services/widget-properties.service';
import * as i0 from "@angular/core";
import * as i1 from "./services/messages-conversation-thread-widget-ang.service";
import * as i2 from "./services/widget-properties.service";
import * as i3 from "@backbase/messages-common";
import * as i4 from "@angular/router";
import * as i5 from "@backbase/ui-ang/icon";
import * as i6 from "@backbase/ui-ang/badge";
import * as i7 from "@backbase/ui-ang/alert";
import * as i8 from "@backbase/ui-ang/rich-text-editor";
import * as i9 from "@backbase/ui-ang/input-validation-message";
import * as i10 from "@backbase/ui-ang/load-button";
import * as i11 from "@backbase/ui-ang/modal";
import * as i12 from "@backbase/ui-ang/button";
import * as i13 from "@backbase/ui-ang/empty-state";
import * as i14 from "@backbase/ui-ang/loading-indicator";
import * as i15 from "@angular/common";
import * as i16 from "@backbase/ui-ang/tooltip-directive";
import * as i17 from "@angular/forms";
export class MessagesConversationThreadWidgetComponent extends BaseConversationThreadComponent {
    constructor(messagesService, properties, encodingService, uploadService, confirmModalService, apiThreadService, activatedRoute, sharedService, cd) {
        super(apiThreadService, activatedRoute, sharedService, confirmModalService, uploadService, encodingService);
        this.messagesService = messagesService;
        this.properties = properties;
        this.encodingService = encodingService;
        this.uploadService = uploadService;
        this.confirmModalService = confirmModalService;
        this.apiThreadService = apiThreadService;
        this.activatedRoute = activatedRoute;
        this.sharedService = sharedService;
        this.cd = cd;
        this.hostRef = this;
        this.replyStream = this.getReplyStream();
        /**
         * The flag indicating if the remove confirmation modal is opened or closed.
         */
        this.removeModalOpened = false;
        this.mailboxTypeTitle$$ = new BehaviorSubject(undefined);
        this.maxAttachmentSize$$ = new BehaviorSubject(undefined);
        this.replyMessageMaxLength$$ = new BehaviorSubject(undefined);
        this.customerServiceTitle$$ = new BehaviorSubject(undefined);
        /**
         * The stream with the conversation data.
         */
        this.conversation = this.getConversationStream();
        /**
         * The stream with the mailbox type.
         */
        this.mailboxTypeTitle = getPropertyValue(this.mailboxTypeTitle$$, this.properties.mailboxTypeTitle);
        /**
         * The stream with the maximum attachment size.
         */
        this.maxAttachmentSize = getPropertyValue(this.maxAttachmentSize$$, this.properties.maxAttachmentSize);
        /**
         * The stream with the maximum message length.
         */
        this.replyMessageMaxLength = getPropertyValue(this.replyMessageMaxLength$$, this.properties.replyMessageMaxLength);
        /**
         * The stream with the maximum message length number.
         */
        this.replyMessageMaxLength$ = getPropertyValue(this.replyMessageMaxLength$$, this.properties.replyMessageMaxLength).pipe(map(val => Number(val)));
        /**
         * The stream with the customer service title.
         */
        this.customerServiceTitle$ = getPropertyValue(this.customerServiceTitle$$, this.properties.customerServiceTitle);
    }
    /**
     * The stream with the mailbox type.
     */
    set mailboxTypeTitleValue(value) {
        this.mailboxTypeTitle$$.next(value);
    }
    /**
     * The stream with the maximum attachment size.
     */
    set maxAttachmentSizeValue(value) {
        this.maxAttachmentSize$$.next(String(value));
    }
    /**
     * The stream with the maximum message length.
     */
    set replyMessageMaxLengthValue(value) {
        this.replyMessageMaxLength$$.next(String(value));
    }
    /**
     * The stream with the customer service title.
     */
    set customerServiceTitleValue(value) {
        this.customerServiceTitle$$.next(value);
    }
    ngOnInit() {
        this.conversation.pipe(first(), takeUntil(this.unsubscribe)).subscribe(() => {
            this.initSubscriptions();
        });
    }
    getReplyStream() {
        return this.replyPressed.pipe(throttleTime(1000), withLatestFrom(this.conversationId), concatMap(([obj, conversationId]) => {
            this.formLoading = true;
            return this.messagesService.postReplyMessage(conversationId, obj).pipe(switchMap(() => this.draftResponse ? this.messagesService.deleteDraft(this.draftResponse.id) : of(undefined)), tap(() => {
                this.uploadService.reset();
                this.replyFormGroup.reset();
                this.sharedService.openNotification(this.replySuccessTpl);
            }), catchError(error => {
                this.sharedService.openNotification(this.sharedService.getErrorMessage(error), 'error');
                this.cd.markForCheck();
                return EMPTY;
            }), finalize(() => {
                this.formLoading = false;
            }));
        }));
    }
    getConversationStream() {
        return combineLatest([this.conversationId, merge(this.replyStream, of(undefined))]).pipe(tap(() => {
            this.loading = true;
            this.errorResponse = undefined;
        }), switchMap(([conversationId]) => this.messagesService.getConversationThread(conversationId).pipe(withLatestFrom(this.customerServiceTitle$), map(([conversation, customerName]) => {
            const messages = conversation &&
                conversation.messages
                    .map(message => (Object.assign(Object.assign({}, message), { body: this.encodingService.b64Decode(message.body), attachments: message.attachments && this.apiThreadService.attachmentsMapper(message.attachments), sender: Object.assign(Object.assign({}, message.sender), { name: message.sender.id === 'customer.service' ? customerName : message.sender.name }) })))
                    .reverse();
            return Object.assign(Object.assign({}, conversation), { messages });
        }), tap(conversation => {
            this.draftResponse = conversation.draft && Object.assign({}, conversation.draft);
            if (this.draftResponse) {
                this.toggleReplyForm(true);
                if (this.draftResponse.attachments) {
                    this.replyFormGroup.controls['attachments'].setValue([...this.draftResponse.attachments]);
                }
                if (this.draftResponse.body) {
                    this.replyFormGroup.controls['body'].setValue(this.encodingService.b64Decode(this.draftResponse.body));
                }
            }
        }), catchError((error) => {
            this.errorResponse = error;
            this.cd.markForCheck();
            return EMPTY;
        }), finalize(() => {
            this.loading = false;
        }))), shareReplayOnce(), takeUntil(this.unsubscribe));
    }
    /**
     * The method to discard a message or a draft.
     */
    confirmConfirmationModal() {
        switch (this.confirmationModal && this.confirmationModal.type) {
            case ManipulationType.discard:
                this.toggleReplyForm(false);
                break;
            case ManipulationType.discardDraft:
                this.deleteDraft().pipe(takeUntil(this.unsubscribe)).subscribe();
                this.toggleReplyForm(false);
                break;
        }
        this.confirmModalService.toggleModal(false);
    }
    /**
     * The method to open the removal modal.
     */
    openRemoveModal() {
        this.removeModalOpened = true;
    }
    /**
     * The method to close the removal modal.
     */
    closeRemoveModal() {
        this.removeModalOpened = false;
    }
    /**
     * The method to remove a conversation.
     */
    removeConversation() {
        this.closeRemoveModal();
        this.conversationId
            .pipe(switchMap(id => this.messagesService.deleteConversation(id)), takeUntil(this.unsubscribe))
            .subscribe(() => {
            if (this.deleteSuccessTpl) {
                this.sharedService.openNotification(this.deleteSuccessTpl);
            }
            this.navigateBack();
        }, error => this.sharedService.openNotification(this.sharedService.getErrorMessage(error), 'error'));
    }
    /**
     * The method to toggle the read/unread conversation status.
     *
     * @param status Status type
     */
    toggleRead(status = ReadUnreadStatusType.UNREAD) {
        this.markAsReadUnreadSubject.next(status);
    }
    /**
     * The method to open the discard confirmation modal.
     */
    handleDiscardClick() {
        const manipulationType = this.draftResponse ? this.manipulationTypes.discardDraft : this.manipulationTypes.discard;
        this.confirmModalService.toggleModal(true, manipulationType, this.replyFormGroup);
    }
}
MessagesConversationThreadWidgetComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadWidgetComponent, deps: [{ token: i1.MessagesConversationThreadWidgetService }, { token: i2.WidgetPropertiesService }, { token: i3.MessagesEncodingService }, { token: i3.MessagesUploadAttachmentsService }, { token: i3.MessagesManipulationConfirmModalService }, { token: i3.AbstractBaseMessagesConversationThreadService }, { token: i4.ActivatedRoute }, { token: i3.SharedMethodsService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
MessagesConversationThreadWidgetComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.14", type: MessagesConversationThreadWidgetComponent, selector: "bb-messages-conversation-thread-widget-ang", inputs: { mailboxTypeTitleValue: ["mailboxTypeTitle", "mailboxTypeTitleValue"], maxAttachmentSizeValue: ["maxAttachmentSize", "maxAttachmentSizeValue"], replyMessageMaxLengthValue: ["replyMessageMaxLength", "replyMessageMaxLengthValue"], customerServiceTitleValue: ["customerServiceTitle", "customerServiceTitleValue"] }, providers: [
        MessagesEncodingService,
        WidgetPropertiesService,
        MessagesManipulationConfirmModalService,
        MessagesUploadAttachmentsService,
        {
            provide: BaseUploadAttachmentsService,
            useClass: MessagesClientUploadAttachmentsService,
        },
        {
            provide: AbstractBaseMessagesConversationThreadService,
            useClass: MessagesConversationThreadWidgetService,
        },
    ], usesInheritance: true, ngImport: i0, template: "<ng-container\n  bbMessagesConversationThreadCustomizable\n  [bbHostRef]=\"hostRef\"\n  [bbTemplateContext]=\"{\n    conversation: conversation | async,\n    maxAttachmentSize: maxAttachmentSize | async,\n    replyMessageMaxLength: replyMessageMaxLength$ | async,\n    mailboxType: mailboxTypeTitle | async\n  }\"\n></ng-container>\n\n<ng-template\n  bbMessagesConversationThreadCustomizable\n  let-host\n  let-conversation=\"context.conversation\"\n  let-maxAttachmentSize=\"context.maxAttachmentSize\"\n  let-replyMessageMaxLength=\"context.replyMessageMaxLength\"\n  let-mailboxType=\"context.mailboxType\"\n>\n  <div class=\"card card-lg\">\n    <ng-container *ngIf=\"host.conversationId | async; else errorState\">\n      <ng-container *ngIf=\"!host.loading; else loadingState\">\n        <ng-container *ngIf=\"!host.errorResponse; else errorState\">\n          <ng-container *ngIf=\"conversation?.messages.length; else emptyState\">\n            <div\n              class=\"card-header bb-block--md\"\n              role=\"region\"\n              aria-label=\"Conversation details\"\n              i18n-aria-label=\"Conversation details@@messages.messagesConversationThread.conversationDetails\"\n            >\n              <div class=\"bb-block--md\">\n                <button bbButton color=\"link\" data-role=\"navigate-back\" (click)=\"host.navigateBack()\">\n                  <bb-icon-ui [cropped]=\"true\" name=\"arrow-back\"></bb-icon-ui>\n                  <span\n                    i18n=\"\n                      Back button|Return to list of conversations of specified mailbox\n                      type@@messages.messagesConversationThread.backButton\"\n                    >Back to {{ mailboxType }}</span\n                  >\n                </button>\n              </div>\n              <div class=\"bb-stack\">\n                <div>\n                  <div class=\"bb-block--sm\" role=\"heading\" aria-level=\"3\">\n                    <span\n                      class=\"sr-only\"\n                      i18n=\"Conversation topic@@messages.messagesConversationThread.conversationTopic\"\n                      >Topic:</span\n                    >\n                    <bb-badge-ui\n                      [text]=\"conversation.topic.name\"\n                      [color]=\"conversation.topic.deleted ? 'secondary' : 'primary'\"\n                    ></bb-badge-ui>\n                  </div>\n                  <div class=\"bb-stack\">\n                    <span role=\"heading\" aria-level=\"4\" class=\"bb-stack__item\">\n                      <span\n                        class=\"sr-only\"\n                        i18n=\"Conversation subject@@messages.messagesConversationThread.conversationSubject\"\n                        >Subject:</span\n                      >\n                      <span\n                        class=\"bb-text-semi-bold break-word\"\n                        [innerHTML]=\"conversation.subject\"\n                        data-role=\"subject-name\"\n                      ></span>\n                    </span>\n                    <bb-icon-ui\n                      *ngIf=\"conversation.important\"\n                      name=\"error\"\n                      class=\"bb-stack__item\"\n                      color=\"danger\"\n                      data-role=\"important\"\n                      i18n-bbTooltip=\"High priority@@messages.messagesConversationThread.importantMessage.tooltip\"\n                      bbTooltip=\"High priority\"\n                      container=\"body\"\n                      triggers=\"hover\"\n                      placement=\"top\"\n                      aria-label=\"This conversation has high priority\"\n                      i18n-aria-label=\"\n                        This conversation has high priority@@messages.messagesConversationThread.importantMessage\"\n                    ></bb-icon-ui>\n                  </div>\n                </div>\n                <div class=\"bb-stack__item--push-right\">\n                  <span\n                    bbTooltip=\"Mark as unread\"\n                    i18n-bbTooltip=\"\n                      Mark as unread|Mark as unread button@@messages.messagesConversationThread.markAsUnreadButton\"\n                    container=\"body\"\n                    triggers=\"hover focus\"\n                    placement=\"top\"\n                    class=\"bb-stack__item\"\n                  >\n                    <button\n                      bbButton\n                      color=\"link\"\n                      circle=\"true\"\n                      data-role=\"mark-as-unread-conversation\"\n                      aria-label=\"Mark as unread\"\n                      i18n-aria-label=\"@@messages.messagesConversationThread.markAsUnreadButton\"\n                      (click)=\"host.toggleRead()\"\n                    >\n                      <bb-icon-ui class=\"bb-text-support\" name=\"markunread\"></bb-icon-ui>\n                    </button>\n                  </span>\n\n                  <span\n                    bbTooltip=\"Delete conversation\"\n                    container=\"body\"\n                    i18n-bbTooltip=\"\n                      Delete conversation|Delete conversation\n                      button@@messages.messagesConversationThread.deleteConversationButton\"\n                    triggers=\"hover focus\"\n                    placement=\"top\"\n                  >\n                    <button\n                      bbButton\n                      color=\"link\"\n                      circle=\"true\"\n                      data-role=\"delete-conversation\"\n                      *ngIf=\"conversation.deletable\"\n                      (click)=\"host.openRemoveModal()\"\n                      aria-label=\"Delete conversation\"\n                      i18n-aria-label=\"@@messages.messagesConversationThread.deleteConversationButton\"\n                    >\n                      <bb-icon-ui class=\"bb-text-support\" name=\"delete\"></bb-icon-ui>\n                    </button>\n                  </span>\n                </div>\n              </div>\n\n              <bb-alert-ui\n                role=\"alert\"\n                modifier=\"warning\"\n                [dismissible]=\"true\"\n                *ngIf=\"conversation.topic.deleted && !host.topicAlertClosed\"\n                (close)=\"host.topicAlertClosed = true\"\n                i18n-title=\"Topic no longer exists alert@@messages.messagesConversationThread.alertMessage.topicDeleted\"\n                title=\"This topic no longer exists. Contact support for details.\"\n              ></bb-alert-ui>\n            </div>\n            <div\n              [class.bb-list__item]=\"host.replyOpened\"\n              role=\"list\"\n              aria-label=\"Messages list\"\n              i18n-aria-label=\"Messages list@@messages.messagesConversationThread.conversationMessagesList\"\n            >\n              <bb-messages-conversation-message\n                *ngFor=\"let message of conversation.messages; let last = last\"\n                [sender]=\"message.isMyMessage ? me : message.sender.name\"\n                [created]=\"message.createdAt\"\n                [message]=\"message.body\"\n                [isBodyHtml]=\"message.isBodyHtml\"\n                [opened]=\"last\"\n                [attachments]=\"message.attachments\"\n                role=\"listitem\"\n                aria-label=\"Message\"\n                i18n-aria-label=\"Message@@messages.messagesConversationThread.conversationMessage\"\n              ></bb-messages-conversation-message>\n            </div>\n            <div class=\"card-footer\" *ngIf=\"!conversation['read-only']\">\n              <form [formGroup]=\"host.replyFormGroup\">\n                <div class=\"bb-block--xl\" [attr.id]=\"host.id + 'reply-container'\" [hidden]=\"!host.replyOpened\">\n                  <div class=\"form-group\">\n                    <bb-rich-text-editor-ui\n                      #richTextEditor\n                      i18n-placeholder=\"Write your message@@messages.messagesConversationThread.messagePlaceholder\"\n                      placeholder=\"Write your message\"\n                      i18n-label=\"Message@@messages.messagesConversationThread.messageLabel\"\n                      label=\"Message\"\n                      formControlName=\"body\"\n                      counter=\"true\"\n                      [maxLength]=\"replyMessageMaxLength\"\n                      [required]=\"true\"\n                      [attr.aria-describedby]=\"'conversation-thread-body-error'\"\n                    >\n                      <ng-template #actions bbRichTextEditorActions>\n                        <bb-rich-text-editor-bold-action></bb-rich-text-editor-bold-action>\n                        <bb-rich-text-editor-italic-action></bb-rich-text-editor-italic-action>\n                        <bb-rich-text-editor-underline-action></bb-rich-text-editor-underline-action>\n                        <bb-rich-text-editor-strikethrough-action> </bb-rich-text-editor-strikethrough-action>\n                        <bb-rich-text-editor-olist-action></bb-rich-text-editor-olist-action>\n                        <bb-rich-text-editor-ulist-action> </bb-rich-text-editor-ulist-action>\n                        <bb-rich-text-editor-link-action></bb-rich-text-editor-link-action>\n                      </ng-template>\n                    </bb-rich-text-editor-ui>\n                    <bb-input-validation-message-ui\n                      id=\"conversation-thread-body-error\"\n                      [showErrors]=\"host.isInvalidControl('body')\"\n                    >\n                      <span\n                        *ngIf=\"host.hasError('body', 'required')\"\n                        i18n=\"\n                          Error message if field is required@@messages.messagesConversationThread.errors.messageRequired\"\n                      >\n                        Field is required\n                      </span>\n                    </bb-input-validation-message-ui>\n                  </div>\n                  <div class=\"form-group\">\n                    <bb-messages-upload-attachments\n                      [maxSize]=\"maxAttachmentSize\"\n                      [initAttachments]=\"host.draftResponse?.attachments\"\n                      formControlName=\"attachments\"\n                    >\n                    </bb-messages-upload-attachments>\n                  </div>\n                </div>\n                <div class=\"bb-button-bar bb-button-bar--reverse\">\n                  <bb-load-button-ui\n                    *ngIf=\"host.replyOpened\"\n                    class=\"bb-button-bar__button\"\n                    data-role=\"submit\"\n                    type=\"submit\"\n                    i18n=\"Send@@messages.messagesConversationThread.sendButton\"\n                    [isLoading]=\"host.formLoading\"\n                    (click)=\"host.reply()\"\n                  >\n                    Send\n                  </bb-load-button-ui>\n                  <button\n                    bbButton\n                    [attr.data-role]=\"!host.replyOpened ? 'reply-btn' : 'discard-btn'\"\n                    class=\"bb-button-bar__button\"\n                    [attr.aria-expanded]=\"host.replyOpened\"\n                    [attr.aria-controls]=\"host.id + 'reply-container'\"\n                    color=\"secondary\"\n                    (click)=\"!host.replyOpened ? host.toggleReplyForm(true) : host.handleDiscardClick()\"\n                  >\n                    <span\n                      *ngIf=\"!host.replyOpened; else discardTextButton\"\n                      i18n=\"Reply@@messages.messagesConversationThread.replyButton\"\n                    >\n                      Reply\n                    </span>\n                    <ng-template #discardTextButton>\n                      <span i18n=\"Discard@@messages.messagesConversationThread.discardButton\"> Discard </span>\n                    </ng-template>\n                  </button>\n                  <button\n                    bbButton\n                    data-role=\"save-as-draft\"\n                    class=\"bb-button-bar__button\"\n                    color=\"link\"\n                    *ngIf=\"host.replyOpened\"\n                    (click)=\"host.onSaveDraft()\"\n                    i18n=\"Save as Draft@@messages.messagesConversationThread.saveAsDraftButton\"\n                  >\n                    Save as Draft\n                  </button>\n                </div>\n              </form>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n  </div>\n\n  <bb-modal-ui\n    [isOpen]=\"host.removeModalOpened\"\n    data-role=\"delete-conversation-modal\"\n    aria-describedby=\"delete-confirmation-modal-subtitle\"\n    (cancel)=\"host.closeRemoveModal()\"\n  >\n    <bb-modal-header-ui>\n      <ng-template bbCustomModalHeader>\n        <span\n          class=\"text-large bb-text-semi-bold\"\n          i18n=\"\n            Delete conversation|Header title of the confirmation modal to delete\n            conversation@@messages.messagesConversationThread.messagesDeleteModal.headerTitle\"\n          >Delete conversation?</span\n        >\n      </ng-template>\n    </bb-modal-header-ui>\n    <bb-modal-body-ui>\n      <ng-template bbCustomModalBody>\n        <span\n          id=\"delete-confirmation-modal-subtitle\"\n          i18n=\"\n            Are you sure you want to delete the selected conversation?|Body message of the confirmation modal to delete\n            conversation@@messages.messagesConversationThread.messagesDeleteModal.bodyMessage\"\n          >Are you sure you want to delete the selected conversation?</span\n        >\n      </ng-template>\n    </bb-modal-body-ui>\n    <bb-modal-footer-ui>\n      <ng-template bbCustomModalFooter>\n        <bb-button-ui\n          data-role=\"cancel-delete-conversation\"\n          color=\"secondary\"\n          i18n=\"\n            Cancel|Cancel button inside the confirmation modal\n            footer@@messages.messagesConversationThread.messagesDeleteModal.cancelButton\"\n          (click)=\"host.closeRemoveModal()\"\n          >Cancel\n        </bb-button-ui>\n        <bb-button-ui\n          data-role=\"confirm-delete-conversation\"\n          color=\"danger\"\n          i18n=\"\n            Delete|Delete button inside the confirmation modal\n            footer@@messages.messagesConversationThread.messagesDeleteModal.deleteButton\"\n          (click)=\"host.removeConversation()\"\n          >Delete\n        </bb-button-ui>\n      </ng-template>\n    </bb-modal-footer-ui>\n  </bb-modal-ui>\n\n  <bb-messages-manipulation-confirm-modal\n    [isOpen]=\"host.confirmationModal.opened\"\n    [type]=\"host.confirmationModal.type\"\n    (cancel)=\"host.confirmModalService.toggleModal(false)\"\n    (confirm)=\"host.confirmConfirmationModal()\"\n  ></bb-messages-manipulation-confirm-modal>\n\n  <ng-template #me>\n    <span i18n=\"Me|Show this string if this is clients message@@messages.messagesConversationThread.me\">Me</span>\n  </ng-template>\n\n  <ng-template #emptyState>\n    <div class=\"bb-state-container\">\n      <bb-empty-state-ui\n        i18n-title=\"Empty state title@@messages.messagesConversationThread.emptyStateTitle\"\n        title=\"No Messages\"\n        i18n-subtitle=\"Empty state subtitle@@messages.messagesConversationThread.emptyStateSubtitle\"\n        subtitle=\"You don't have any messages to be displayed.\"\n        iconModifier=\"email\"\n        iconColor=\"muted\"\n        data-role=\"empty-state\"\n      ></bb-empty-state-ui>\n    </div>\n  </ng-template>\n\n  <ng-template #errorState>\n    <bb-messages-request-error [error]=\"host.errorResponse\"></bb-messages-request-error>\n  </ng-template>\n\n  <ng-template #loadingState>\n    <bb-loading-indicator-ui class=\"py-4\" loaderSize=\"md\"></bb-loading-indicator-ui>\n  </ng-template>\n</ng-template>\n\n<ng-template #messageReplySuccess>\n  <span\n    i18n=\"\n      Your message has been successfully sent.|Text of successful send\n      message@@messages.messagesConversationThread.messageSuccessSent\"\n    >Your message has been successfully sent.</span\n  >\n</ng-template>\n\n<ng-template #messageDeleteSuccess>\n  <span\n    i18n=\"\n      Your conversation has been deleted successfully.|Text of successful deletion of the\n      conversation@@messages.messagesConversationThread.messageSuccessDelete\"\n    >Your conversation has been deleted successfully.</span\n  >\n</ng-template>\n\n<ng-template #draftSaveSuccess>\n  <span\n    i18n=\"\n      Your draft has been successfully saved.|Successfully saved draft\n      text@@messages.messagesConversationThread.draftSuccessSave\"\n    >Your draft has been successfully saved.</span\n  >\n</ng-template>\n\n<ng-template #draftDeleteSuccess>\n  <span\n    i18n=\"\n      Your draft has been successfully deleted.|Successfully deleted draft\n      text@@messages.messagesConversationThread.draftDeleteSuccess\"\n    >Your draft has been successfully deleted.</span\n  >\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i5.IconComponent; }), selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }, { type: i0.forwardRef(function () { return i6.BadgeComponent; }), selector: "bb-badge-ui", inputs: ["color", "text", "abbr", "circle", "wrap", "ariaLabel"] }, { type: i0.forwardRef(function () { return i7.AlertComponent; }), selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i0.forwardRef(function () { return i3.MessagesConversationMessageComponent; }), selector: "bb-messages-conversation-message, bb-message-ui", inputs: ["created", "message", "sender", "opened", "attachments", "isBodyHtml"] }, { type: i0.forwardRef(function () { return i8.RichTextEditorComponent; }), selector: "bb-rich-text-editor-ui", inputs: ["maxLength", "minLength", "placeholder", "counter", "readonly", "actionsTooltipPlacement"] }, { type: i0.forwardRef(function () { return i8.RichTextEditorBoldActionComponent; }), selector: "bb-rich-text-editor-bold-action" }, { type: i0.forwardRef(function () { return i8.RichTextEditorItalicActionComponent; }), selector: "bb-rich-text-editor-italic-action" }, { type: i0.forwardRef(function () { return i8.RichTextEditorUnderlineActionComponent; }), selector: "bb-rich-text-editor-underline-action" }, { type: i0.forwardRef(function () { return i8.RichTextEditorStrikethroughActionComponent; }), selector: "bb-rich-text-editor-strikethrough-action" }, { type: i0.forwardRef(function () { return i8.RichTextEditorOlistActionComponent; }), selector: "bb-rich-text-editor-olist-action" }, { type: i0.forwardRef(function () { return i8.RichTextEditorUlistActionComponent; }), selector: "bb-rich-text-editor-ulist-action" }, { type: i0.forwardRef(function () { return i8.RichTextEditorLinkActionComponent; }), selector: "bb-rich-text-editor-link-action", inputs: ["contentClassNames"], outputs: ["linkAdded"] }, { type: i0.forwardRef(function () { return i9.InputValidationMessageComponent; }), selector: "bb-input-validation-message-ui", inputs: ["showErrors", "messageId"] }, { type: i0.forwardRef(function () { return i3.MessagesUploadAttachmentsComponent; }), selector: "bb-messages-upload-attachments-ui, bb-messages-upload-attachments", inputs: ["maxSize", "initAttachments", "disabled", "multiple", "attachmentButtonText", "accept"] }, { type: i0.forwardRef(function () { return i10.LoadButtonComponent; }), selector: "bb-load-button-ui", inputs: ["isLoading", "from", "size", "circle", "totalCount"], outputs: ["paramChange"] }, { type: i0.forwardRef(function () { return i11.ModalComponent; }), selector: "bb-modal-ui", inputs: ["isOpen", "aria-labelledby", "aria-describedby", "modalOptions"], outputs: ["confirm", "cancel", "isOpenChange"] }, { type: i0.forwardRef(function () { return i11.ModalHeaderComponent; }), selector: "bb-modal-header-ui", inputs: ["title"], outputs: ["close"] }, { type: i0.forwardRef(function () { return i11.ModalBodyComponent; }), selector: "bb-modal-body-ui" }, { type: i0.forwardRef(function () { return i11.ModalFooterComponent; }), selector: "bb-modal-footer-ui", inputs: ["confirmText", "cancelText"], outputs: ["confirm", "cancel"] }, { type: i0.forwardRef(function () { return i12.ButtonComponent; }), selector: "bb-button-ui", inputs: ["autofocus", "type", "disabled", "buttonSize", "color", "block"] }, { type: i0.forwardRef(function () { return i3.ӨMessagesManipulationConfirmModalComponent; }), selector: "bb-messages-manipulation-confirm-modal", inputs: ["type"] }, { type: i0.forwardRef(function () { return i13.EmptyStateComponent; }), selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }, { type: i0.forwardRef(function () { return i3.MessagesRequestErrorComponent; }), selector: "bb-messages-request-error, bb-messages-request-error-ui", inputs: ["error"] }, { type: i0.forwardRef(function () { return i14.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }], directives: [{ type: i0.forwardRef(function () { return MessagesConversationThreadCustomizableDirective; }), selector: "[bbMessagesConversationThreadCustomizable]" }, { type: i0.forwardRef(function () { return i15.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i12.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i0.forwardRef(function () { return i16.TooltipDirective; }), selector: "[bbTooltip]", inputs: ["bbTooltip", "triggers"] }, { type: i0.forwardRef(function () { return i15.NgForOf; }), selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i0.forwardRef(function () { return i17.ɵNgNoValidate; }), selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i0.forwardRef(function () { return i17.NgControlStatusGroup; }), selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i0.forwardRef(function () { return i17.FormGroupDirective; }), selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i0.forwardRef(function () { return i17.NgControlStatus; }), selector: "[formControlName],[ngModel],[formControl]" }, { type: i0.forwardRef(function () { return i17.FormControlName; }), selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i0.forwardRef(function () { return i17.RequiredValidator; }), selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i0.forwardRef(function () { return i8.RichTextEditorActionsDirective; }), selector: "ng-template[bbRichTextEditorActions]" }, { type: i0.forwardRef(function () { return i11.CustomModalHeaderDirective; }), selector: "ng-template[bbCustomModalHeader]" }, { type: i0.forwardRef(function () { return i11.CustomModalBodyDirective; }), selector: "ng-template[bbCustomModalBody]" }, { type: i0.forwardRef(function () { return i11.CustomModalFooterDirective; }), selector: "ng-template[bbCustomModalFooter]" }], pipes: { "async": i0.forwardRef(function () { return i15.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadWidgetComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-messages-conversation-thread-widget-ang',
                    templateUrl: './messages-conversation-thread-widget-ang.component.html',
                    providers: [
                        MessagesEncodingService,
                        WidgetPropertiesService,
                        MessagesManipulationConfirmModalService,
                        MessagesUploadAttachmentsService,
                        {
                            provide: BaseUploadAttachmentsService,
                            useClass: MessagesClientUploadAttachmentsService,
                        },
                        {
                            provide: AbstractBaseMessagesConversationThreadService,
                            useClass: MessagesConversationThreadWidgetService,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i1.MessagesConversationThreadWidgetService }, { type: i2.WidgetPropertiesService }, { type: i3.MessagesEncodingService }, { type: i3.MessagesUploadAttachmentsService }, { type: i3.MessagesManipulationConfirmModalService }, { type: i3.AbstractBaseMessagesConversationThreadService }, { type: i4.ActivatedRoute }, { type: i3.SharedMethodsService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { mailboxTypeTitleValue: [{
                type: Input,
                args: ['mailboxTypeTitle']
            }], maxAttachmentSizeValue: [{
                type: Input,
                args: ['maxAttachmentSize']
            }], replyMessageMaxLengthValue: [{
                type: Input,
                args: ['replyMessageMaxLength']
            }], customerServiceTitleValue: [{
                type: Input,
                args: ['customerServiceTitle']
            }] } });
export class MessagesConversationThreadCustomizableDirective extends BbTemplate {
}
MessagesConversationThreadCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
MessagesConversationThreadCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: MessagesConversationThreadCustomizableDirective, selector: "[bbMessagesConversationThreadCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationThreadCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbMessagesConversationThreadCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZXMtY29udmVyc2F0aW9uLXRocmVhZC13aWRnZXQtYW5nLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2xpYnMvbWVzc2FnZXMtY29udmVyc2F0aW9uLXRocmVhZC13aWRnZXQtYW5nL3NyYy9tZXNzYWdlcy1jb252ZXJzYXRpb24tdGhyZWFkLXdpZGdldC1hbmcuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy9tZXNzYWdlcy1jb252ZXJzYXRpb24tdGhyZWFkLXdpZGdldC1hbmcvc3JjL21lc3NhZ2VzLWNvbnZlcnNhdGlvbi10aHJlYWQtd2lkZ2V0LWFuZy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQXFCLFNBQVMsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBR3ZGLE9BQU8sRUFDTCxVQUFVLEVBQ1YsU0FBUyxFQUNULFFBQVEsRUFDUixLQUFLLEVBQ0wsR0FBRyxFQUNILFNBQVMsRUFDVCxTQUFTLEVBQ1QsR0FBRyxFQUNILFlBQVksRUFDWixjQUFjLEdBQ2YsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDM0QsT0FBTyxFQUNMLDZDQUE2QyxFQUM3QywrQkFBK0IsRUFDL0IsNEJBQTRCLEVBQzVCLGdCQUFnQixFQUNoQixnQkFBZ0IsRUFDaEIsc0NBQXNDLEVBQ3RDLHVCQUF1QixFQUN2Qix1Q0FBdUMsRUFDdkMsZ0NBQWdDLEVBQ2hDLG9CQUFvQixFQUVwQixlQUFlLEdBQ2hCLE1BQU0sMkJBQTJCLENBQUM7QUFFbkMsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDckgsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sc0NBQXNDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQi9FLE1BQU0sT0FBTyx5Q0FBMEMsU0FBUSwrQkFBK0I7SUF3RjVGLFlBQ21CLGVBQXdELEVBQ3hELFVBQW1DLEVBQ2pDLGVBQXdDLEVBQ3hDLGFBQStDLEVBQ3pELG1CQUE0RCxFQUNsRCxnQkFBK0QsRUFDL0QsY0FBOEIsRUFDOUIsYUFBbUMsRUFDckMsRUFBcUI7UUFFdEMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxhQUFhLEVBQUUsbUJBQW1CLEVBQUUsYUFBYSxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBVjNGLG9CQUFlLEdBQWYsZUFBZSxDQUF5QztRQUN4RCxlQUFVLEdBQVYsVUFBVSxDQUF5QjtRQUNqQyxvQkFBZSxHQUFmLGVBQWUsQ0FBeUI7UUFDeEMsa0JBQWEsR0FBYixhQUFhLENBQWtDO1FBQ3pELHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBeUM7UUFDbEQscUJBQWdCLEdBQWhCLGdCQUFnQixDQUErQztRQUMvRCxtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsa0JBQWEsR0FBYixhQUFhLENBQXNCO1FBQ3JDLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBaEcvQixZQUFPLEdBQUcsSUFBSSxDQUFDO1FBOEJQLGdCQUFXLEdBQXFELElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUV2Rzs7V0FFRztRQUNILHNCQUFpQixHQUFHLEtBQUssQ0FBQztRQUVULHVCQUFrQixHQUFHLElBQUksZUFBZSxDQUFxQixTQUFTLENBQUMsQ0FBQztRQUN4RSx3QkFBbUIsR0FBRyxJQUFJLGVBQWUsQ0FBcUIsU0FBUyxDQUFDLENBQUM7UUFDekUsNEJBQXVCLEdBQUcsSUFBSSxlQUFlLENBQXFCLFNBQVMsQ0FBQyxDQUFDO1FBQzdFLDJCQUFzQixHQUFHLElBQUksZUFBZSxDQUFxQixTQUFTLENBQUMsQ0FBQztRQUU3Rjs7V0FFRztRQUNILGlCQUFZLEdBQTZDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBRXRGOztXQUVHO1FBQ00scUJBQWdCLEdBQXVCLGdCQUFnQixDQUM5RCxJQUFJLENBQUMsa0JBQWtCLEVBQ3ZCLElBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQ2pDLENBQUM7UUFFRjs7V0FFRztRQUNNLHNCQUFpQixHQUF1QixnQkFBZ0IsQ0FDL0QsSUFBSSxDQUFDLG1CQUFtQixFQUN4QixJQUFJLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUNsQyxDQUFDO1FBRUY7O1dBRUc7UUFDTSwwQkFBcUIsR0FBdUIsZ0JBQWdCLENBQ25FLElBQUksQ0FBQyx1QkFBdUIsRUFDNUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FDdEMsQ0FBQztRQUVGOztXQUVHO1FBQ00sMkJBQXNCLEdBQXVCLGdCQUFnQixDQUNwRSxJQUFJLENBQUMsdUJBQXVCLEVBQzVCLElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQ3RDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFaEM7O1dBRUc7UUFDTSwwQkFBcUIsR0FBdUIsZ0JBQWdCLENBQ25FLElBQUksQ0FBQyxzQkFBc0IsRUFDM0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FDckMsQ0FBQztJQWNGLENBQUM7SUFqR0Q7O09BRUc7SUFDSCxJQUErQixxQkFBcUIsQ0FBQyxLQUFhO1FBQ2hFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsSUFBZ0Msc0JBQXNCLENBQUMsS0FBc0I7UUFDM0UsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxJQUFvQywwQkFBMEIsQ0FBQyxLQUFzQjtRQUNuRixJQUFJLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRDs7T0FFRztJQUNILElBQW1DLHlCQUF5QixDQUFDLEtBQWE7UUFDeEUsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBeUVELFFBQVE7UUFDTixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtZQUMxRSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUMzQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxjQUFjO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQzNCLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFDbEIsY0FBYyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsRUFDbkMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsY0FBYyxDQUFDLEVBQUUsRUFBRTtZQUNsQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztZQUV4QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FDcEUsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUNiLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FDN0YsRUFDRCxHQUFHLENBQUMsR0FBRyxFQUFFO2dCQUNQLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzNCLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzVCLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzVELENBQUMsQ0FBQyxFQUNGLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDakIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDeEYsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFFdkIsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDLENBQUMsRUFDRixRQUFRLENBQUMsR0FBRyxFQUFFO2dCQUNaLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1lBQzNCLENBQUMsQ0FBQyxDQUNILENBQUM7UUFDSixDQUFDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVPLHFCQUFxQjtRQUMzQixPQUFPLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDdEYsR0FBRyxDQUFDLEdBQUcsRUFBRTtZQUNQLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxFQUNGLFNBQVMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBRSxDQUM3QixJQUFJLENBQUMsZUFBZSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FDN0QsY0FBYyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxFQUMxQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFlBQVksRUFBRSxZQUFZLENBQUMsRUFBRSxFQUFFO1lBQ25DLE1BQU0sUUFBUSxHQUNaLFlBQVk7Z0JBQ1osWUFBWSxDQUFDLFFBQVE7cUJBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLGlDQUNYLE9BQU8sS0FDVixJQUFJLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUNsRCxXQUFXLEVBQUUsT0FBTyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUNoRyxNQUFNLGtDQUNELE9BQU8sQ0FBQyxNQUFNLEtBQ2pCLElBQUksRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksT0FFckYsQ0FBQztxQkFDRixPQUFPLEVBQUUsQ0FBQztZQUVmLE9BQU8sZ0NBQ0YsWUFBWSxLQUNmLFFBQVEsR0FDdUIsQ0FBQztRQUNwQyxDQUFDLENBQUMsRUFDRixHQUFHLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDakIsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUMsS0FBSyxzQkFBUyxZQUFZLENBQUMsS0FBSyxDQUFFLENBQUM7WUFFckUsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO2dCQUN0QixJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUUzQixJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFO29CQUNsQyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztpQkFDM0Y7Z0JBRUQsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRTtvQkFDM0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztpQkFDeEc7YUFDRjtRQUNILENBQUMsQ0FBQyxFQUNGLFVBQVUsQ0FBQyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtZQUN0QyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUMzQixJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBRXZCLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQyxDQUFDLEVBQ0YsUUFBUSxDQUFDLEdBQUcsRUFBRTtZQUNaLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUNILENBQ0YsRUFDRCxlQUFlLEVBQUUsRUFDakIsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FDNUIsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILHdCQUF3QjtRQUN0QixRQUFRLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFO1lBQzdELEtBQUssZ0JBQWdCLENBQUMsT0FBTztnQkFDM0IsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDNUIsTUFBTTtZQUNSLEtBQUssZ0JBQWdCLENBQUMsWUFBWTtnQkFDaEMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBRWpFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzVCLE1BQU07U0FDVDtRQUVELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZUFBZTtRQUNiLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7SUFDaEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZ0JBQWdCO1FBQ2QsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGNBQWM7YUFDaEIsSUFBSSxDQUNILFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDNUQsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FDNUI7YUFDQSxTQUFTLENBQ1IsR0FBRyxFQUFFO1lBQ0gsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDNUQ7WUFDRCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdEIsQ0FBQyxFQUNELEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FDakcsQ0FBQztJQUNOLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsVUFBVSxDQUFDLFNBQStCLG9CQUFvQixDQUFDLE1BQU07UUFDbkUsSUFBSSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxrQkFBa0I7UUFDaEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDO1FBRW5ILElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLGdCQUFnQixFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNwRixDQUFDOzt1SUEzUVUseUNBQXlDOzJIQUF6Qyx5Q0FBeUMsdVlBZnpDO1FBQ1QsdUJBQXVCO1FBQ3ZCLHVCQUF1QjtRQUN2Qix1Q0FBdUM7UUFDdkMsZ0NBQWdDO1FBQ2hDO1lBQ0UsT0FBTyxFQUFFLDRCQUE0QjtZQUNyQyxRQUFRLEVBQUUsc0NBQXNDO1NBQ2pEO1FBQ0Q7WUFDRSxPQUFPLEVBQUUsNkNBQTZDO1lBQ3RELFFBQVEsRUFBRSx1Q0FBdUM7U0FDbEQ7S0FDRixpRENwREgsczBoQkE2WEEsK25JRHREYSwrQ0FBK0M7NEZBalIvQyx5Q0FBeUM7a0JBbEJyRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSw0Q0FBNEM7b0JBQ3RELFdBQVcsRUFBRSwwREFBMEQ7b0JBQ3ZFLFNBQVMsRUFBRTt3QkFDVCx1QkFBdUI7d0JBQ3ZCLHVCQUF1Qjt3QkFDdkIsdUNBQXVDO3dCQUN2QyxnQ0FBZ0M7d0JBQ2hDOzRCQUNFLE9BQU8sRUFBRSw0QkFBNEI7NEJBQ3JDLFFBQVEsRUFBRSxzQ0FBc0M7eUJBQ2pEO3dCQUNEOzRCQUNFLE9BQU8sRUFBRSw2Q0FBNkM7NEJBQ3RELFFBQVEsRUFBRSx1Q0FBdUM7eUJBQ2xEO3FCQUNGO2lCQUNGOzJjQU9nQyxxQkFBcUI7c0JBQW5ELEtBQUs7dUJBQUMsa0JBQWtCO2dCQU9PLHNCQUFzQjtzQkFBckQsS0FBSzt1QkFBQyxtQkFBbUI7Z0JBT1UsMEJBQTBCO3NCQUE3RCxLQUFLO3VCQUFDLHVCQUF1QjtnQkFPSyx5QkFBeUI7c0JBQTNELEtBQUs7dUJBQUMsc0JBQXNCOztBQXNQL0IsTUFBTSxPQUFPLCtDQUFnRCxTQUFRLFVBR3BFOzs2SUFIWSwrQ0FBK0M7aUlBQS9DLCtDQUErQzs0RkFBL0MsK0NBQStDO2tCQUgzRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSw0Q0FBNEM7aUJBQ3ZEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRGlyZWN0aXZlLCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBIdHRwRXJyb3JSZXNwb25zZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7XG4gIGNhdGNoRXJyb3IsXG4gIGNvbmNhdE1hcCxcbiAgZmluYWxpemUsXG4gIGZpcnN0LFxuICBtYXAsXG4gIHN3aXRjaE1hcCxcbiAgdGFrZVVudGlsLFxuICB0YXAsXG4gIHRocm90dGxlVGltZSxcbiAgd2l0aExhdGVzdEZyb20sXG59IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgRU1QVFksIG1lcmdlLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQmJUZW1wbGF0ZSB9IGZyb20gJ0BiYWNrYmFzZS9mb3VuZGF0aW9uLWFuZy9jb3JlJztcbmltcG9ydCB7XG4gIEFic3RyYWN0QmFzZU1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkU2VydmljZSxcbiAgQmFzZUNvbnZlcnNhdGlvblRocmVhZENvbXBvbmVudCxcbiAgQmFzZVVwbG9hZEF0dGFjaG1lbnRzU2VydmljZSxcbiAgZ2V0UHJvcGVydHlWYWx1ZSxcbiAgTWFuaXB1bGF0aW9uVHlwZSxcbiAgTWVzc2FnZXNDbGllbnRVcGxvYWRBdHRhY2htZW50c1NlcnZpY2UsXG4gIE1lc3NhZ2VzRW5jb2RpbmdTZXJ2aWNlLFxuICBNZXNzYWdlc01hbmlwdWxhdGlvbkNvbmZpcm1Nb2RhbFNlcnZpY2UsXG4gIE1lc3NhZ2VzVXBsb2FkQXR0YWNobWVudHNTZXJ2aWNlLFxuICBSZWFkVW5yZWFkU3RhdHVzVHlwZSxcbiAgU2hhcmVkTWV0aG9kc1NlcnZpY2UsXG4gIHNoYXJlUmVwbGF5T25jZSxcbn0gZnJvbSAnQGJhY2tiYXNlL21lc3NhZ2VzLWNvbW1vbic7XG5pbXBvcnQgeyBEZWxldGVEcmFmdHNSZXNwb25zZUJvZHksIE1lc3NhZ2VUaHJlYWRHZXRSZXNwb25zZUJvZHkgfSBmcm9tICdAYmFja2Jhc2UvbWVzc2FnZXMtdjUtaHR0cC1hbmcnO1xuaW1wb3J0IHsgTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRXaWRnZXRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9tZXNzYWdlcy1jb252ZXJzYXRpb24tdGhyZWFkLXdpZGdldC1hbmcuc2VydmljZSc7XG5pbXBvcnQgeyBXaWRnZXRQcm9wZXJ0aWVzU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvd2lkZ2V0LXByb3BlcnRpZXMuc2VydmljZSc7XG5pbXBvcnQgeyBNZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZFdpZGdldENvbnRleHQgfSBmcm9tICcuL21vZGVsL2NvbnZlcnNhdGlvbic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLW1lc3NhZ2VzLWNvbnZlcnNhdGlvbi10aHJlYWQtd2lkZ2V0LWFuZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9tZXNzYWdlcy1jb252ZXJzYXRpb24tdGhyZWFkLXdpZGdldC1hbmcuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtcbiAgICBNZXNzYWdlc0VuY29kaW5nU2VydmljZSxcbiAgICBXaWRnZXRQcm9wZXJ0aWVzU2VydmljZSxcbiAgICBNZXNzYWdlc01hbmlwdWxhdGlvbkNvbmZpcm1Nb2RhbFNlcnZpY2UsXG4gICAgTWVzc2FnZXNVcGxvYWRBdHRhY2htZW50c1NlcnZpY2UsXG4gICAge1xuICAgICAgcHJvdmlkZTogQmFzZVVwbG9hZEF0dGFjaG1lbnRzU2VydmljZSxcbiAgICAgIHVzZUNsYXNzOiBNZXNzYWdlc0NsaWVudFVwbG9hZEF0dGFjaG1lbnRzU2VydmljZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IEFic3RyYWN0QmFzZU1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkU2VydmljZSxcbiAgICAgIHVzZUNsYXNzOiBNZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZFdpZGdldFNlcnZpY2UsXG4gICAgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRXaWRnZXRDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29udmVyc2F0aW9uVGhyZWFkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgcmVhZG9ubHkgaG9zdFJlZiA9IHRoaXM7XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJlYW0gd2l0aCB0aGUgbWFpbGJveCB0eXBlLlxuICAgKi9cbiAgQElucHV0KCdtYWlsYm94VHlwZVRpdGxlJykgc2V0IG1haWxib3hUeXBlVGl0bGVWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5tYWlsYm94VHlwZVRpdGxlJCQubmV4dCh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmVhbSB3aXRoIHRoZSBtYXhpbXVtIGF0dGFjaG1lbnQgc2l6ZS5cbiAgICovXG4gIEBJbnB1dCgnbWF4QXR0YWNobWVudFNpemUnKSBzZXQgbWF4QXR0YWNobWVudFNpemVWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgdGhpcy5tYXhBdHRhY2htZW50U2l6ZSQkLm5leHQoU3RyaW5nKHZhbHVlKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmVhbSB3aXRoIHRoZSBtYXhpbXVtIG1lc3NhZ2UgbGVuZ3RoLlxuICAgKi9cbiAgQElucHV0KCdyZXBseU1lc3NhZ2VNYXhMZW5ndGgnKSBzZXQgcmVwbHlNZXNzYWdlTWF4TGVuZ3RoVmFsdWUodmFsdWU6IHN0cmluZyB8IG51bWJlcikge1xuICAgIHRoaXMucmVwbHlNZXNzYWdlTWF4TGVuZ3RoJCQubmV4dChTdHJpbmcodmFsdWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3RyZWFtIHdpdGggdGhlIGN1c3RvbWVyIHNlcnZpY2UgdGl0bGUuXG4gICAqL1xuICBASW5wdXQoJ2N1c3RvbWVyU2VydmljZVRpdGxlJykgc2V0IGN1c3RvbWVyU2VydmljZVRpdGxlVmFsdWUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlVGl0bGUkJC5uZXh0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVwbHlTdHJlYW06IE9ic2VydmFibGU8RGVsZXRlRHJhZnRzUmVzcG9uc2VCb2R5IHwgdW5kZWZpbmVkPiA9IHRoaXMuZ2V0UmVwbHlTdHJlYW0oKTtcblxuICAvKipcbiAgICogVGhlIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgcmVtb3ZlIGNvbmZpcm1hdGlvbiBtb2RhbCBpcyBvcGVuZWQgb3IgY2xvc2VkLlxuICAgKi9cbiAgcmVtb3ZlTW9kYWxPcGVuZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IG1haWxib3hUeXBlVGl0bGUkJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEF0dGFjaG1lbnRTaXplJCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgcHJpdmF0ZSByZWFkb25seSByZXBseU1lc3NhZ2VNYXhMZW5ndGgkJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBwcml2YXRlIHJlYWRvbmx5IGN1c3RvbWVyU2VydmljZVRpdGxlJCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuICAvKipcbiAgICogVGhlIHN0cmVhbSB3aXRoIHRoZSBjb252ZXJzYXRpb24gZGF0YS5cbiAgICovXG4gIGNvbnZlcnNhdGlvbjogT2JzZXJ2YWJsZTxNZXNzYWdlVGhyZWFkR2V0UmVzcG9uc2VCb2R5PiA9IHRoaXMuZ2V0Q29udmVyc2F0aW9uU3RyZWFtKCk7XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJlYW0gd2l0aCB0aGUgbWFpbGJveCB0eXBlLlxuICAgKi9cbiAgcmVhZG9ubHkgbWFpbGJveFR5cGVUaXRsZTogT2JzZXJ2YWJsZTxzdHJpbmc+ID0gZ2V0UHJvcGVydHlWYWx1ZShcbiAgICB0aGlzLm1haWxib3hUeXBlVGl0bGUkJCxcbiAgICB0aGlzLnByb3BlcnRpZXMubWFpbGJveFR5cGVUaXRsZSxcbiAgKTtcblxuICAvKipcbiAgICogVGhlIHN0cmVhbSB3aXRoIHRoZSBtYXhpbXVtIGF0dGFjaG1lbnQgc2l6ZS5cbiAgICovXG4gIHJlYWRvbmx5IG1heEF0dGFjaG1lbnRTaXplOiBPYnNlcnZhYmxlPHN0cmluZz4gPSBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgIHRoaXMubWF4QXR0YWNobWVudFNpemUkJCxcbiAgICB0aGlzLnByb3BlcnRpZXMubWF4QXR0YWNobWVudFNpemUsXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJlYW0gd2l0aCB0aGUgbWF4aW11bSBtZXNzYWdlIGxlbmd0aC5cbiAgICovXG4gIHJlYWRvbmx5IHJlcGx5TWVzc2FnZU1heExlbmd0aDogT2JzZXJ2YWJsZTxzdHJpbmc+ID0gZ2V0UHJvcGVydHlWYWx1ZShcbiAgICB0aGlzLnJlcGx5TWVzc2FnZU1heExlbmd0aCQkLFxuICAgIHRoaXMucHJvcGVydGllcy5yZXBseU1lc3NhZ2VNYXhMZW5ndGgsXG4gICk7XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJlYW0gd2l0aCB0aGUgbWF4aW11bSBtZXNzYWdlIGxlbmd0aCBudW1iZXIuXG4gICAqL1xuICByZWFkb25seSByZXBseU1lc3NhZ2VNYXhMZW5ndGgkOiBPYnNlcnZhYmxlPG51bWJlcj4gPSBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgIHRoaXMucmVwbHlNZXNzYWdlTWF4TGVuZ3RoJCQsXG4gICAgdGhpcy5wcm9wZXJ0aWVzLnJlcGx5TWVzc2FnZU1heExlbmd0aCxcbiAgKS5waXBlKG1hcCh2YWwgPT4gTnVtYmVyKHZhbCkpKTtcblxuICAvKipcbiAgICogVGhlIHN0cmVhbSB3aXRoIHRoZSBjdXN0b21lciBzZXJ2aWNlIHRpdGxlLlxuICAgKi9cbiAgcmVhZG9ubHkgY3VzdG9tZXJTZXJ2aWNlVGl0bGUkOiBPYnNlcnZhYmxlPHN0cmluZz4gPSBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlVGl0bGUkJCxcbiAgICB0aGlzLnByb3BlcnRpZXMuY3VzdG9tZXJTZXJ2aWNlVGl0bGUsXG4gICk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBtZXNzYWdlc1NlcnZpY2U6IE1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkV2lkZ2V0U2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHByb3BlcnRpZXM6IFdpZGdldFByb3BlcnRpZXNTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBlbmNvZGluZ1NlcnZpY2U6IE1lc3NhZ2VzRW5jb2RpbmdTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCByZWFkb25seSB1cGxvYWRTZXJ2aWNlOiBNZXNzYWdlc1VwbG9hZEF0dGFjaG1lbnRzU2VydmljZSxcbiAgICByZWFkb25seSBjb25maXJtTW9kYWxTZXJ2aWNlOiBNZXNzYWdlc01hbmlwdWxhdGlvbkNvbmZpcm1Nb2RhbFNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGFwaVRocmVhZFNlcnZpY2U6IEFic3RyYWN0QmFzZU1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYWN0aXZhdGVkUm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBzaGFyZWRTZXJ2aWNlOiBTaGFyZWRNZXRob2RzU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgKSB7XG4gICAgc3VwZXIoYXBpVGhyZWFkU2VydmljZSwgYWN0aXZhdGVkUm91dGUsIHNoYXJlZFNlcnZpY2UsIGNvbmZpcm1Nb2RhbFNlcnZpY2UsIHVwbG9hZFNlcnZpY2UsIGVuY29kaW5nU2VydmljZSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmNvbnZlcnNhdGlvbi5waXBlKGZpcnN0KCksIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuaW5pdFN1YnNjcmlwdGlvbnMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmVwbHlTdHJlYW0oKTogT2JzZXJ2YWJsZTxEZWxldGVEcmFmdHNSZXNwb25zZUJvZHkgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXBseVByZXNzZWQucGlwZShcbiAgICAgIHRocm90dGxlVGltZSgxMDAwKSxcbiAgICAgIHdpdGhMYXRlc3RGcm9tKHRoaXMuY29udmVyc2F0aW9uSWQpLFxuICAgICAgY29uY2F0TWFwKChbb2JqLCBjb252ZXJzYXRpb25JZF0pID0+IHtcbiAgICAgICAgdGhpcy5mb3JtTG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXNTZXJ2aWNlLnBvc3RSZXBseU1lc3NhZ2UoY29udmVyc2F0aW9uSWQsIG9iaikucGlwZShcbiAgICAgICAgICBzd2l0Y2hNYXAoKCkgPT5cbiAgICAgICAgICAgIHRoaXMuZHJhZnRSZXNwb25zZSA/IHRoaXMubWVzc2FnZXNTZXJ2aWNlLmRlbGV0ZURyYWZ0KHRoaXMuZHJhZnRSZXNwb25zZS5pZCkgOiBvZih1bmRlZmluZWQpLFxuICAgICAgICAgICksXG4gICAgICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkU2VydmljZS5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5yZXBseUZvcm1Hcm91cC5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zaGFyZWRTZXJ2aWNlLm9wZW5Ob3RpZmljYXRpb24odGhpcy5yZXBseVN1Y2Nlc3NUcGwpO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNhdGNoRXJyb3IoZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaGFyZWRTZXJ2aWNlLm9wZW5Ob3RpZmljYXRpb24odGhpcy5zaGFyZWRTZXJ2aWNlLmdldEVycm9yTWVzc2FnZShlcnJvciksICdlcnJvcicpO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcblxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGZpbmFsaXplKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZm9ybUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGdldENvbnZlcnNhdGlvblN0cmVhbSgpOiBPYnNlcnZhYmxlPE1lc3NhZ2VUaHJlYWRHZXRSZXNwb25zZUJvZHk+IHtcbiAgICByZXR1cm4gY29tYmluZUxhdGVzdChbdGhpcy5jb252ZXJzYXRpb25JZCwgbWVyZ2UodGhpcy5yZXBseVN0cmVhbSwgb2YodW5kZWZpbmVkKSldKS5waXBlKFxuICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvclJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgICAgfSksXG4gICAgICBzd2l0Y2hNYXAoKFtjb252ZXJzYXRpb25JZF0pID0+XG4gICAgICAgIHRoaXMubWVzc2FnZXNTZXJ2aWNlLmdldENvbnZlcnNhdGlvblRocmVhZChjb252ZXJzYXRpb25JZCkucGlwZShcbiAgICAgICAgICB3aXRoTGF0ZXN0RnJvbSh0aGlzLmN1c3RvbWVyU2VydmljZVRpdGxlJCksXG4gICAgICAgICAgbWFwKChbY29udmVyc2F0aW9uLCBjdXN0b21lck5hbWVdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9XG4gICAgICAgICAgICAgIGNvbnZlcnNhdGlvbiAmJlxuICAgICAgICAgICAgICBjb252ZXJzYXRpb24ubWVzc2FnZXNcbiAgICAgICAgICAgICAgICAubWFwKG1lc3NhZ2UgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICBib2R5OiB0aGlzLmVuY29kaW5nU2VydmljZS5iNjREZWNvZGUobWVzc2FnZS5ib2R5KSxcbiAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBtZXNzYWdlLmF0dGFjaG1lbnRzICYmIHRoaXMuYXBpVGhyZWFkU2VydmljZS5hdHRhY2htZW50c01hcHBlcihtZXNzYWdlLmF0dGFjaG1lbnRzKSxcbiAgICAgICAgICAgICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlLnNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbWVzc2FnZS5zZW5kZXIuaWQgPT09ICdjdXN0b21lci5zZXJ2aWNlJyA/IGN1c3RvbWVyTmFtZSA6IG1lc3NhZ2Uuc2VuZGVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5yZXZlcnNlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmNvbnZlcnNhdGlvbixcbiAgICAgICAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgICAgICB9IGFzIE1lc3NhZ2VUaHJlYWRHZXRSZXNwb25zZUJvZHk7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGFwKGNvbnZlcnNhdGlvbiA9PiB7XG4gICAgICAgICAgICB0aGlzLmRyYWZ0UmVzcG9uc2UgPSBjb252ZXJzYXRpb24uZHJhZnQgJiYgeyAuLi5jb252ZXJzYXRpb24uZHJhZnQgfTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZnRSZXNwb25zZSkge1xuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVJlcGx5Rm9ybSh0cnVlKTtcblxuICAgICAgICAgICAgICBpZiAodGhpcy5kcmFmdFJlc3BvbnNlLmF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXBseUZvcm1Hcm91cC5jb250cm9sc1snYXR0YWNobWVudHMnXS5zZXRWYWx1ZShbLi4udGhpcy5kcmFmdFJlc3BvbnNlLmF0dGFjaG1lbnRzXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodGhpcy5kcmFmdFJlc3BvbnNlLmJvZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGx5Rm9ybUdyb3VwLmNvbnRyb2xzWydib2R5J10uc2V0VmFsdWUodGhpcy5lbmNvZGluZ1NlcnZpY2UuYjY0RGVjb2RlKHRoaXMuZHJhZnRSZXNwb25zZS5ib2R5KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjYXRjaEVycm9yKChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JSZXNwb25zZSA9IGVycm9yO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcblxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGZpbmFsaXplKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIH0pLFxuICAgICAgICApLFxuICAgICAgKSxcbiAgICAgIHNoYXJlUmVwbGF5T25jZSgpLFxuICAgICAgdGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1ldGhvZCB0byBkaXNjYXJkIGEgbWVzc2FnZSBvciBhIGRyYWZ0LlxuICAgKi9cbiAgY29uZmlybUNvbmZpcm1hdGlvbk1vZGFsKCkge1xuICAgIHN3aXRjaCAodGhpcy5jb25maXJtYXRpb25Nb2RhbCAmJiB0aGlzLmNvbmZpcm1hdGlvbk1vZGFsLnR5cGUpIHtcbiAgICAgIGNhc2UgTWFuaXB1bGF0aW9uVHlwZS5kaXNjYXJkOlxuICAgICAgICB0aGlzLnRvZ2dsZVJlcGx5Rm9ybShmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBNYW5pcHVsYXRpb25UeXBlLmRpc2NhcmREcmFmdDpcbiAgICAgICAgdGhpcy5kZWxldGVEcmFmdCgpLnBpcGUodGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUpKS5zdWJzY3JpYmUoKTtcblxuICAgICAgICB0aGlzLnRvZ2dsZVJlcGx5Rm9ybShmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMuY29uZmlybU1vZGFsU2VydmljZS50b2dnbGVNb2RhbChmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1ldGhvZCB0byBvcGVuIHRoZSByZW1vdmFsIG1vZGFsLlxuICAgKi9cbiAgb3BlblJlbW92ZU1vZGFsKCkge1xuICAgIHRoaXMucmVtb3ZlTW9kYWxPcGVuZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBtZXRob2QgdG8gY2xvc2UgdGhlIHJlbW92YWwgbW9kYWwuXG4gICAqL1xuICBjbG9zZVJlbW92ZU1vZGFsKCkge1xuICAgIHRoaXMucmVtb3ZlTW9kYWxPcGVuZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWV0aG9kIHRvIHJlbW92ZSBhIGNvbnZlcnNhdGlvbi5cbiAgICovXG4gIHJlbW92ZUNvbnZlcnNhdGlvbigpIHtcbiAgICB0aGlzLmNsb3NlUmVtb3ZlTW9kYWwoKTtcbiAgICB0aGlzLmNvbnZlcnNhdGlvbklkXG4gICAgICAucGlwZShcbiAgICAgICAgc3dpdGNoTWFwKGlkID0+IHRoaXMubWVzc2FnZXNTZXJ2aWNlLmRlbGV0ZUNvbnZlcnNhdGlvbihpZCkpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZGVsZXRlU3VjY2Vzc1RwbCkge1xuICAgICAgICAgICAgdGhpcy5zaGFyZWRTZXJ2aWNlLm9wZW5Ob3RpZmljYXRpb24odGhpcy5kZWxldGVTdWNjZXNzVHBsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5uYXZpZ2F0ZUJhY2soKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4gdGhpcy5zaGFyZWRTZXJ2aWNlLm9wZW5Ob3RpZmljYXRpb24odGhpcy5zaGFyZWRTZXJ2aWNlLmdldEVycm9yTWVzc2FnZShlcnJvciksICdlcnJvcicpLFxuICAgICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWV0aG9kIHRvIHRvZ2dsZSB0aGUgcmVhZC91bnJlYWQgY29udmVyc2F0aW9uIHN0YXR1cy5cbiAgICpcbiAgICogQHBhcmFtIHN0YXR1cyBTdGF0dXMgdHlwZVxuICAgKi9cbiAgdG9nZ2xlUmVhZChzdGF0dXM6IFJlYWRVbnJlYWRTdGF0dXNUeXBlID0gUmVhZFVucmVhZFN0YXR1c1R5cGUuVU5SRUFEKSB7XG4gICAgdGhpcy5tYXJrQXNSZWFkVW5yZWFkU3ViamVjdC5uZXh0KHN0YXR1cyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1ldGhvZCB0byBvcGVuIHRoZSBkaXNjYXJkIGNvbmZpcm1hdGlvbiBtb2RhbC5cbiAgICovXG4gIGhhbmRsZURpc2NhcmRDbGljaygpIHtcbiAgICBjb25zdCBtYW5pcHVsYXRpb25UeXBlID0gdGhpcy5kcmFmdFJlc3BvbnNlID8gdGhpcy5tYW5pcHVsYXRpb25UeXBlcy5kaXNjYXJkRHJhZnQgOiB0aGlzLm1hbmlwdWxhdGlvblR5cGVzLmRpc2NhcmQ7XG5cbiAgICB0aGlzLmNvbmZpcm1Nb2RhbFNlcnZpY2UudG9nZ2xlTW9kYWwodHJ1ZSwgbWFuaXB1bGF0aW9uVHlwZSwgdGhpcy5yZXBseUZvcm1Hcm91cCk7XG4gIH1cbn1cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRDdXN0b21pemFibGVdJyxcbn0pXG5leHBvcnQgY2xhc3MgTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBNZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZFdpZGdldENvbXBvbmVudCxcbiAgTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRXaWRnZXRDb250ZXh0XG4+IHt9XG4iLCI8bmctY29udGFpbmVyXG4gIGJiTWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWRDdXN0b21pemFibGVcbiAgW2JiSG9zdFJlZl09XCJob3N0UmVmXCJcbiAgW2JiVGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICBjb252ZXJzYXRpb246IGNvbnZlcnNhdGlvbiB8IGFzeW5jLFxuICAgIG1heEF0dGFjaG1lbnRTaXplOiBtYXhBdHRhY2htZW50U2l6ZSB8IGFzeW5jLFxuICAgIHJlcGx5TWVzc2FnZU1heExlbmd0aDogcmVwbHlNZXNzYWdlTWF4TGVuZ3RoJCB8IGFzeW5jLFxuICAgIG1haWxib3hUeXBlOiBtYWlsYm94VHlwZVRpdGxlIHwgYXN5bmNcbiAgfVwiXG4+PC9uZy1jb250YWluZXI+XG5cbjxuZy10ZW1wbGF0ZVxuICBiYk1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkQ3VzdG9taXphYmxlXG4gIGxldC1ob3N0XG4gIGxldC1jb252ZXJzYXRpb249XCJjb250ZXh0LmNvbnZlcnNhdGlvblwiXG4gIGxldC1tYXhBdHRhY2htZW50U2l6ZT1cImNvbnRleHQubWF4QXR0YWNobWVudFNpemVcIlxuICBsZXQtcmVwbHlNZXNzYWdlTWF4TGVuZ3RoPVwiY29udGV4dC5yZXBseU1lc3NhZ2VNYXhMZW5ndGhcIlxuICBsZXQtbWFpbGJveFR5cGU9XCJjb250ZXh0Lm1haWxib3hUeXBlXCJcbj5cbiAgPGRpdiBjbGFzcz1cImNhcmQgY2FyZC1sZ1wiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJob3N0LmNvbnZlcnNhdGlvbklkIHwgYXN5bmM7IGVsc2UgZXJyb3JTdGF0ZVwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFob3N0LmxvYWRpbmc7IGVsc2UgbG9hZGluZ1N0YXRlXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhaG9zdC5lcnJvclJlc3BvbnNlOyBlbHNlIGVycm9yU3RhdGVcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29udmVyc2F0aW9uPy5tZXNzYWdlcy5sZW5ndGg7IGVsc2UgZW1wdHlTdGF0ZVwiPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzcz1cImNhcmQtaGVhZGVyIGJiLWJsb2NrLS1tZFwiXG4gICAgICAgICAgICAgIHJvbGU9XCJyZWdpb25cIlxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ29udmVyc2F0aW9uIGRldGFpbHNcIlxuICAgICAgICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJDb252ZXJzYXRpb24gZGV0YWlsc0BAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuY29udmVyc2F0aW9uRGV0YWlsc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jay0tbWRcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGJiQnV0dG9uIGNvbG9yPVwibGlua1wiIGRhdGEtcm9sZT1cIm5hdmlnYXRlLWJhY2tcIiAoY2xpY2spPVwiaG9zdC5uYXZpZ2F0ZUJhY2soKVwiPlxuICAgICAgICAgICAgICAgICAgPGJiLWljb24tdWkgW2Nyb3BwZWRdPVwidHJ1ZVwiIG5hbWU9XCJhcnJvdy1iYWNrXCI+PC9iYi1pY29uLXVpPlxuICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgaTE4bj1cIlxuICAgICAgICAgICAgICAgICAgICAgIEJhY2sgYnV0dG9ufFJldHVybiB0byBsaXN0IG9mIGNvbnZlcnNhdGlvbnMgb2Ygc3BlY2lmaWVkIG1haWxib3hcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5iYWNrQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgPkJhY2sgdG8ge3sgbWFpbGJveFR5cGUgfX08L3NwYW5cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja1wiPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2stLXNtXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxldmVsPVwiM1wiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Itb25seVwiXG4gICAgICAgICAgICAgICAgICAgICAgaTE4bj1cIkNvbnZlcnNhdGlvbiB0b3BpY0BAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuY29udmVyc2F0aW9uVG9waWNcIlxuICAgICAgICAgICAgICAgICAgICAgID5Ub3BpYzo8L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8YmItYmFkZ2UtdWlcbiAgICAgICAgICAgICAgICAgICAgICBbdGV4dF09XCJjb252ZXJzYXRpb24udG9waWMubmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgW2NvbG9yXT1cImNvbnZlcnNhdGlvbi50b3BpYy5kZWxldGVkID8gJ3NlY29uZGFyeScgOiAncHJpbWFyeSdcIlxuICAgICAgICAgICAgICAgICAgICA+PC9iYi1iYWRnZS11aT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJiLXN0YWNrXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1sZXZlbD1cIjRcIiBjbGFzcz1cImJiLXN0YWNrX19pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Itb25seVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiQ29udmVyc2F0aW9uIHN1YmplY3RAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLmNvbnZlcnNhdGlvblN1YmplY3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlN1YmplY3Q6PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJiLXRleHQtc2VtaS1ib2xkIGJyZWFrLXdvcmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2lubmVySFRNTF09XCJjb252ZXJzYXRpb24uc3ViamVjdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJzdWJqZWN0LW5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgID48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGJiLWljb24tdWlcbiAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cImNvbnZlcnNhdGlvbi5pbXBvcnRhbnRcIlxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJlcnJvclwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJiYi1zdGFja19faXRlbVwiXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I9XCJkYW5nZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cImltcG9ydGFudFwiXG4gICAgICAgICAgICAgICAgICAgICAgaTE4bi1iYlRvb2x0aXA9XCJIaWdoIHByaW9yaXR5QEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5pbXBvcnRhbnRNZXNzYWdlLnRvb2x0aXBcIlxuICAgICAgICAgICAgICAgICAgICAgIGJiVG9vbHRpcD1cIkhpZ2ggcHJpb3JpdHlcIlxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzPVwiaG92ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlRoaXMgY29udmVyc2F0aW9uIGhhcyBoaWdoIHByaW9yaXR5XCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgY29udmVyc2F0aW9uIGhhcyBoaWdoIHByaW9yaXR5QEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5pbXBvcnRhbnRNZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvYmItaWNvbi11aT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFja19faXRlbS0tcHVzaC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgYmJUb29sdGlwPVwiTWFyayBhcyB1bnJlYWRcIlxuICAgICAgICAgICAgICAgICAgICBpMThuLWJiVG9vbHRpcD1cIlxuICAgICAgICAgICAgICAgICAgICAgIE1hcmsgYXMgdW5yZWFkfE1hcmsgYXMgdW5yZWFkIGJ1dHRvbkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQubWFya0FzVW5yZWFkQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyPVwiYm9keVwiXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzPVwiaG92ZXIgZm9jdXNcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJiLXN0YWNrX19pdGVtXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I9XCJsaW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICBjaXJjbGU9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJtYXJrLWFzLXVucmVhZC1jb252ZXJzYXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJNYXJrIGFzIHVucmVhZFwiXG4gICAgICAgICAgICAgICAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5tYXJrQXNVbnJlYWRCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJob3N0LnRvZ2dsZVJlYWQoKVwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8YmItaWNvbi11aSBjbGFzcz1cImJiLXRleHQtc3VwcG9ydFwiIG5hbWU9XCJtYXJrdW5yZWFkXCI+PC9iYi1pY29uLXVpPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cblxuICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgYmJUb29sdGlwPVwiRGVsZXRlIGNvbnZlcnNhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICAgICAgICAgICAgICAgICBpMThuLWJiVG9vbHRpcD1cIlxuICAgICAgICAgICAgICAgICAgICAgIERlbGV0ZSBjb252ZXJzYXRpb258RGVsZXRlIGNvbnZlcnNhdGlvblxuICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuZGVsZXRlQ29udmVyc2F0aW9uQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnM9XCJob3ZlciBmb2N1c1wiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBiYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgICAgICAgICAgICAgICAgICAgY2lyY2xlPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1yb2xlPVwiZGVsZXRlLWNvbnZlcnNhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJjb252ZXJzYXRpb24uZGVsZXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiaG9zdC5vcGVuUmVtb3ZlTW9kYWwoKVwiXG4gICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkRlbGV0ZSBjb252ZXJzYXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgIGkxOG4tYXJpYS1sYWJlbD1cIkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuZGVsZXRlQ29udmVyc2F0aW9uQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxiYi1pY29uLXVpIGNsYXNzPVwiYmItdGV4dC1zdXBwb3J0XCIgbmFtZT1cImRlbGV0ZVwiPjwvYmItaWNvbi11aT5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxiYi1hbGVydC11aVxuICAgICAgICAgICAgICAgIHJvbGU9XCJhbGVydFwiXG4gICAgICAgICAgICAgICAgbW9kaWZpZXI9XCJ3YXJuaW5nXCJcbiAgICAgICAgICAgICAgICBbZGlzbWlzc2libGVdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJjb252ZXJzYXRpb24udG9waWMuZGVsZXRlZCAmJiAhaG9zdC50b3BpY0FsZXJ0Q2xvc2VkXCJcbiAgICAgICAgICAgICAgICAoY2xvc2UpPVwiaG9zdC50b3BpY0FsZXJ0Q2xvc2VkID0gdHJ1ZVwiXG4gICAgICAgICAgICAgICAgaTE4bi10aXRsZT1cIlRvcGljIG5vIGxvbmdlciBleGlzdHMgYWxlcnRAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLmFsZXJ0TWVzc2FnZS50b3BpY0RlbGV0ZWRcIlxuICAgICAgICAgICAgICAgIHRpdGxlPVwiVGhpcyB0b3BpYyBubyBsb25nZXIgZXhpc3RzLiBDb250YWN0IHN1cHBvcnQgZm9yIGRldGFpbHMuXCJcbiAgICAgICAgICAgICAgPjwvYmItYWxlcnQtdWk+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgW2NsYXNzLmJiLWxpc3RfX2l0ZW1dPVwiaG9zdC5yZXBseU9wZW5lZFwiXG4gICAgICAgICAgICAgIHJvbGU9XCJsaXN0XCJcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIk1lc3NhZ2VzIGxpc3RcIlxuICAgICAgICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJNZXNzYWdlcyBsaXN0QEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5jb252ZXJzYXRpb25NZXNzYWdlc0xpc3RcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8YmItbWVzc2FnZXMtY29udmVyc2F0aW9uLW1lc3NhZ2VcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgbWVzc2FnZSBvZiBjb252ZXJzYXRpb24ubWVzc2FnZXM7IGxldCBsYXN0ID0gbGFzdFwiXG4gICAgICAgICAgICAgICAgW3NlbmRlcl09XCJtZXNzYWdlLmlzTXlNZXNzYWdlID8gbWUgOiBtZXNzYWdlLnNlbmRlci5uYW1lXCJcbiAgICAgICAgICAgICAgICBbY3JlYXRlZF09XCJtZXNzYWdlLmNyZWF0ZWRBdFwiXG4gICAgICAgICAgICAgICAgW21lc3NhZ2VdPVwibWVzc2FnZS5ib2R5XCJcbiAgICAgICAgICAgICAgICBbaXNCb2R5SHRtbF09XCJtZXNzYWdlLmlzQm9keUh0bWxcIlxuICAgICAgICAgICAgICAgIFtvcGVuZWRdPVwibGFzdFwiXG4gICAgICAgICAgICAgICAgW2F0dGFjaG1lbnRzXT1cIm1lc3NhZ2UuYXR0YWNobWVudHNcIlxuICAgICAgICAgICAgICAgIHJvbGU9XCJsaXN0aXRlbVwiXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIk1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgIGkxOG4tYXJpYS1sYWJlbD1cIk1lc3NhZ2VAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLmNvbnZlcnNhdGlvbk1lc3NhZ2VcIlxuICAgICAgICAgICAgICA+PC9iYi1tZXNzYWdlcy1jb252ZXJzYXRpb24tbWVzc2FnZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtZm9vdGVyXCIgKm5nSWY9XCIhY29udmVyc2F0aW9uWydyZWFkLW9ubHknXVwiPlxuICAgICAgICAgICAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cImhvc3QucmVwbHlGb3JtR3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItYmxvY2stLXhsXCIgW2F0dHIuaWRdPVwiaG9zdC5pZCArICdyZXBseS1jb250YWluZXInXCIgW2hpZGRlbl09XCIhaG9zdC5yZXBseU9wZW5lZFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJiLXJpY2gtdGV4dC1lZGl0b3ItdWlcbiAgICAgICAgICAgICAgICAgICAgICAjcmljaFRleHRFZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgICBpMThuLXBsYWNlaG9sZGVyPVwiV3JpdGUgeW91ciBtZXNzYWdlQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5tZXNzYWdlUGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiV3JpdGUgeW91ciBtZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgICBpMThuLWxhYmVsPVwiTWVzc2FnZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQubWVzc2FnZUxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIk1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImJvZHlcIlxuICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXI9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgICBbbWF4TGVuZ3RoXT1cInJlcGx5TWVzc2FnZU1heExlbmd0aFwiXG4gICAgICAgICAgICAgICAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwiJ2NvbnZlcnNhdGlvbi10aHJlYWQtYm9keS1lcnJvcidcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNhY3Rpb25zIGJiUmljaFRleHRFZGl0b3JBY3Rpb25zPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJiLXJpY2gtdGV4dC1lZGl0b3ItYm9sZC1hY3Rpb24+PC9iYi1yaWNoLXRleHQtZWRpdG9yLWJvbGQtYWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJiLXJpY2gtdGV4dC1lZGl0b3ItaXRhbGljLWFjdGlvbj48L2JiLXJpY2gtdGV4dC1lZGl0b3ItaXRhbGljLWFjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiYi1yaWNoLXRleHQtZWRpdG9yLXVuZGVybGluZS1hY3Rpb24+PC9iYi1yaWNoLXRleHQtZWRpdG9yLXVuZGVybGluZS1hY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YmItcmljaC10ZXh0LWVkaXRvci1zdHJpa2V0aHJvdWdoLWFjdGlvbj4gPC9iYi1yaWNoLXRleHQtZWRpdG9yLXN0cmlrZXRocm91Z2gtYWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJiLXJpY2gtdGV4dC1lZGl0b3Itb2xpc3QtYWN0aW9uPjwvYmItcmljaC10ZXh0LWVkaXRvci1vbGlzdC1hY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YmItcmljaC10ZXh0LWVkaXRvci11bGlzdC1hY3Rpb24+IDwvYmItcmljaC10ZXh0LWVkaXRvci11bGlzdC1hY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YmItcmljaC10ZXh0LWVkaXRvci1saW5rLWFjdGlvbj48L2JiLXJpY2gtdGV4dC1lZGl0b3ItbGluay1hY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgPC9iYi1yaWNoLXRleHQtZWRpdG9yLXVpPlxuICAgICAgICAgICAgICAgICAgICA8YmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9XCJjb252ZXJzYXRpb24tdGhyZWFkLWJvZHktZXJyb3JcIlxuICAgICAgICAgICAgICAgICAgICAgIFtzaG93RXJyb3JzXT1cImhvc3QuaXNJbnZhbGlkQ29udHJvbCgnYm9keScpXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cImhvc3QuaGFzRXJyb3IoJ2JvZHknLCAncmVxdWlyZWQnKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yIG1lc3NhZ2UgaWYgZmllbGQgaXMgcmVxdWlyZWRAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLmVycm9ycy5tZXNzYWdlUmVxdWlyZWRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkIGlzIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2JiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJiLW1lc3NhZ2VzLXVwbG9hZC1hdHRhY2htZW50c1xuICAgICAgICAgICAgICAgICAgICAgIFttYXhTaXplXT1cIm1heEF0dGFjaG1lbnRTaXplXCJcbiAgICAgICAgICAgICAgICAgICAgICBbaW5pdEF0dGFjaG1lbnRzXT1cImhvc3QuZHJhZnRSZXNwb25zZT8uYXR0YWNobWVudHNcIlxuICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImF0dGFjaG1lbnRzXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L2JiLW1lc3NhZ2VzLXVwbG9hZC1hdHRhY2htZW50cz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1idXR0b24tYmFyIGJiLWJ1dHRvbi1iYXItLXJldmVyc2VcIj5cbiAgICAgICAgICAgICAgICAgIDxiYi1sb2FkLWJ1dHRvbi11aVxuICAgICAgICAgICAgICAgICAgICAqbmdJZj1cImhvc3QucmVwbHlPcGVuZWRcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgICAgICBpMThuPVwiU2VuZEBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuc2VuZEJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIFtpc0xvYWRpbmddPVwiaG9zdC5mb3JtTG9hZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJob3N0LnJlcGx5KClcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBTZW5kXG4gICAgICAgICAgICAgICAgICA8L2JiLWxvYWQtYnV0dG9uLXVpPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBiYkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBbYXR0ci5kYXRhLXJvbGVdPVwiIWhvc3QucmVwbHlPcGVuZWQgPyAncmVwbHktYnRuJyA6ICdkaXNjYXJkLWJ0bidcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiaG9zdC5yZXBseU9wZW5lZFwiXG4gICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtY29udHJvbHNdPVwiaG9zdC5pZCArICdyZXBseS1jb250YWluZXInXCJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiIWhvc3QucmVwbHlPcGVuZWQgPyBob3N0LnRvZ2dsZVJlcGx5Rm9ybSh0cnVlKSA6IGhvc3QuaGFuZGxlRGlzY2FyZENsaWNrKClcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiIWhvc3QucmVwbHlPcGVuZWQ7IGVsc2UgZGlzY2FyZFRleHRCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgIGkxOG49XCJSZXBseUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQucmVwbHlCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgUmVwbHlcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI2Rpc2NhcmRUZXh0QnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGkxOG49XCJEaXNjYXJkQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5kaXNjYXJkQnV0dG9uXCI+IERpc2NhcmQgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cInNhdmUtYXMtZHJhZnRcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiaG9zdC5yZXBseU9wZW5lZFwiXG4gICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJob3N0Lm9uU2F2ZURyYWZ0KClcIlxuICAgICAgICAgICAgICAgICAgICBpMThuPVwiU2F2ZSBhcyBEcmFmdEBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuc2F2ZUFzRHJhZnRCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBTYXZlIGFzIERyYWZ0XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvZGl2PlxuXG4gIDxiYi1tb2RhbC11aVxuICAgIFtpc09wZW5dPVwiaG9zdC5yZW1vdmVNb2RhbE9wZW5lZFwiXG4gICAgZGF0YS1yb2xlPVwiZGVsZXRlLWNvbnZlcnNhdGlvbi1tb2RhbFwiXG4gICAgYXJpYS1kZXNjcmliZWRieT1cImRlbGV0ZS1jb25maXJtYXRpb24tbW9kYWwtc3VidGl0bGVcIlxuICAgIChjYW5jZWwpPVwiaG9zdC5jbG9zZVJlbW92ZU1vZGFsKClcIlxuICA+XG4gICAgPGJiLW1vZGFsLWhlYWRlci11aT5cbiAgICAgIDxuZy10ZW1wbGF0ZSBiYkN1c3RvbU1vZGFsSGVhZGVyPlxuICAgICAgICA8c3BhblxuICAgICAgICAgIGNsYXNzPVwidGV4dC1sYXJnZSBiYi10ZXh0LXNlbWktYm9sZFwiXG4gICAgICAgICAgaTE4bj1cIlxuICAgICAgICAgICAgRGVsZXRlIGNvbnZlcnNhdGlvbnxIZWFkZXIgdGl0bGUgb2YgdGhlIGNvbmZpcm1hdGlvbiBtb2RhbCB0byBkZWxldGVcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQubWVzc2FnZXNEZWxldGVNb2RhbC5oZWFkZXJUaXRsZVwiXG4gICAgICAgICAgPkRlbGV0ZSBjb252ZXJzYXRpb24/PC9zcGFuXG4gICAgICAgID5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgPC9iYi1tb2RhbC1oZWFkZXItdWk+XG4gICAgPGJiLW1vZGFsLWJvZHktdWk+XG4gICAgICA8bmctdGVtcGxhdGUgYmJDdXN0b21Nb2RhbEJvZHk+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgaWQ9XCJkZWxldGUtY29uZmlybWF0aW9uLW1vZGFsLXN1YnRpdGxlXCJcbiAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSBzZWxlY3RlZCBjb252ZXJzYXRpb24/fEJvZHkgbWVzc2FnZSBvZiB0aGUgY29uZmlybWF0aW9uIG1vZGFsIHRvIGRlbGV0ZVxuICAgICAgICAgICAgY29udmVyc2F0aW9uQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5tZXNzYWdlc0RlbGV0ZU1vZGFsLmJvZHlNZXNzYWdlXCJcbiAgICAgICAgICA+QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgc2VsZWN0ZWQgY29udmVyc2F0aW9uPzwvc3BhblxuICAgICAgICA+XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvYmItbW9kYWwtYm9keS11aT5cbiAgICA8YmItbW9kYWwtZm9vdGVyLXVpPlxuICAgICAgPG5nLXRlbXBsYXRlIGJiQ3VzdG9tTW9kYWxGb290ZXI+XG4gICAgICAgIDxiYi1idXR0b24tdWlcbiAgICAgICAgICBkYXRhLXJvbGU9XCJjYW5jZWwtZGVsZXRlLWNvbnZlcnNhdGlvblwiXG4gICAgICAgICAgY29sb3I9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgIGkxOG49XCJcbiAgICAgICAgICAgIENhbmNlbHxDYW5jZWwgYnV0dG9uIGluc2lkZSB0aGUgY29uZmlybWF0aW9uIG1vZGFsXG4gICAgICAgICAgICBmb290ZXJAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLm1lc3NhZ2VzRGVsZXRlTW9kYWwuY2FuY2VsQnV0dG9uXCJcbiAgICAgICAgICAoY2xpY2spPVwiaG9zdC5jbG9zZVJlbW92ZU1vZGFsKClcIlxuICAgICAgICAgID5DYW5jZWxcbiAgICAgICAgPC9iYi1idXR0b24tdWk+XG4gICAgICAgIDxiYi1idXR0b24tdWlcbiAgICAgICAgICBkYXRhLXJvbGU9XCJjb25maXJtLWRlbGV0ZS1jb252ZXJzYXRpb25cIlxuICAgICAgICAgIGNvbG9yPVwiZGFuZ2VyXCJcbiAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICBEZWxldGV8RGVsZXRlIGJ1dHRvbiBpbnNpZGUgdGhlIGNvbmZpcm1hdGlvbiBtb2RhbFxuICAgICAgICAgICAgZm9vdGVyQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5tZXNzYWdlc0RlbGV0ZU1vZGFsLmRlbGV0ZUJ1dHRvblwiXG4gICAgICAgICAgKGNsaWNrKT1cImhvc3QucmVtb3ZlQ29udmVyc2F0aW9uKClcIlxuICAgICAgICAgID5EZWxldGVcbiAgICAgICAgPC9iYi1idXR0b24tdWk+XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvYmItbW9kYWwtZm9vdGVyLXVpPlxuICA8L2JiLW1vZGFsLXVpPlxuXG4gIDxiYi1tZXNzYWdlcy1tYW5pcHVsYXRpb24tY29uZmlybS1tb2RhbFxuICAgIFtpc09wZW5dPVwiaG9zdC5jb25maXJtYXRpb25Nb2RhbC5vcGVuZWRcIlxuICAgIFt0eXBlXT1cImhvc3QuY29uZmlybWF0aW9uTW9kYWwudHlwZVwiXG4gICAgKGNhbmNlbCk9XCJob3N0LmNvbmZpcm1Nb2RhbFNlcnZpY2UudG9nZ2xlTW9kYWwoZmFsc2UpXCJcbiAgICAoY29uZmlybSk9XCJob3N0LmNvbmZpcm1Db25maXJtYXRpb25Nb2RhbCgpXCJcbiAgPjwvYmItbWVzc2FnZXMtbWFuaXB1bGF0aW9uLWNvbmZpcm0tbW9kYWw+XG5cbiAgPG5nLXRlbXBsYXRlICNtZT5cbiAgICA8c3BhbiBpMThuPVwiTWV8U2hvdyB0aGlzIHN0cmluZyBpZiB0aGlzIGlzIGNsaWVudHMgbWVzc2FnZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQubWVcIj5NZTwvc3Bhbj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2VtcHR5U3RhdGU+XG4gICAgPGRpdiBjbGFzcz1cImJiLXN0YXRlLWNvbnRhaW5lclwiPlxuICAgICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICAgIGkxOG4tdGl0bGU9XCJFbXB0eSBzdGF0ZSB0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuZW1wdHlTdGF0ZVRpdGxlXCJcbiAgICAgICAgdGl0bGU9XCJObyBNZXNzYWdlc1wiXG4gICAgICAgIGkxOG4tc3VidGl0bGU9XCJFbXB0eSBzdGF0ZSBzdWJ0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQuZW1wdHlTdGF0ZVN1YnRpdGxlXCJcbiAgICAgICAgc3VidGl0bGU9XCJZb3UgZG9uJ3QgaGF2ZSBhbnkgbWVzc2FnZXMgdG8gYmUgZGlzcGxheWVkLlwiXG4gICAgICAgIGljb25Nb2RpZmllcj1cImVtYWlsXCJcbiAgICAgICAgaWNvbkNvbG9yPVwibXV0ZWRcIlxuICAgICAgICBkYXRhLXJvbGU9XCJlbXB0eS1zdGF0ZVwiXG4gICAgICA+PC9iYi1lbXB0eS1zdGF0ZS11aT5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2Vycm9yU3RhdGU+XG4gICAgPGJiLW1lc3NhZ2VzLXJlcXVlc3QtZXJyb3IgW2Vycm9yXT1cImhvc3QuZXJyb3JSZXNwb25zZVwiPjwvYmItbWVzc2FnZXMtcmVxdWVzdC1lcnJvcj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2xvYWRpbmdTdGF0ZT5cbiAgICA8YmItbG9hZGluZy1pbmRpY2F0b3ItdWkgY2xhc3M9XCJweS00XCIgbG9hZGVyU2l6ZT1cIm1kXCI+PC9iYi1sb2FkaW5nLWluZGljYXRvci11aT5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbWVzc2FnZVJlcGx5U3VjY2Vzcz5cbiAgPHNwYW5cbiAgICBpMThuPVwiXG4gICAgICBZb3VyIG1lc3NhZ2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHNlbnQufFRleHQgb2Ygc3VjY2Vzc2Z1bCBzZW5kXG4gICAgICBtZXNzYWdlQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvblRocmVhZC5tZXNzYWdlU3VjY2Vzc1NlbnRcIlxuICAgID5Zb3VyIG1lc3NhZ2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHNlbnQuPC9zcGFuXG4gID5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbWVzc2FnZURlbGV0ZVN1Y2Nlc3M+XG4gIDxzcGFuXG4gICAgaTE4bj1cIlxuICAgICAgWW91ciBjb252ZXJzYXRpb24gaGFzIGJlZW4gZGVsZXRlZCBzdWNjZXNzZnVsbHkufFRleHQgb2Ygc3VjY2Vzc2Z1bCBkZWxldGlvbiBvZiB0aGVcbiAgICAgIGNvbnZlcnNhdGlvbkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25UaHJlYWQubWVzc2FnZVN1Y2Nlc3NEZWxldGVcIlxuICAgID5Zb3VyIGNvbnZlcnNhdGlvbiBoYXMgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseS48L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNkcmFmdFNhdmVTdWNjZXNzPlxuICA8c3BhblxuICAgIGkxOG49XCJcbiAgICAgIFlvdXIgZHJhZnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHNhdmVkLnxTdWNjZXNzZnVsbHkgc2F2ZWQgZHJhZnRcbiAgICAgIHRleHRAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLmRyYWZ0U3VjY2Vzc1NhdmVcIlxuICAgID5Zb3VyIGRyYWZ0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBzYXZlZC48L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNkcmFmdERlbGV0ZVN1Y2Nlc3M+XG4gIDxzcGFuXG4gICAgaTE4bj1cIlxuICAgICAgWW91ciBkcmFmdCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZGVsZXRlZC58U3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgZHJhZnRcbiAgICAgIHRleHRAQG1lc3NhZ2VzLm1lc3NhZ2VzQ29udmVyc2F0aW9uVGhyZWFkLmRyYWZ0RGVsZXRlU3VjY2Vzc1wiXG4gICAgPllvdXIgZHJhZnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQuPC9zcGFuXG4gID5cbjwvbmctdGVtcGxhdGU+XG4iXX0=