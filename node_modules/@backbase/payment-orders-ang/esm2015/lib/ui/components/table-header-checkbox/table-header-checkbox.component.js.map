{"version":3,"file":"table-header-checkbox.component.js","sourceRoot":"","sources":["../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/table-header-checkbox/table-header-checkbox.component.ts","../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/table-header-checkbox/table-header-checkbox.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ElementRef,\n  ViewChild,\n  Input,\n  OnInit,\n  OnDestroy,\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { TableDirective } from '@backbase/ui-ang/table';\n\n@Component({\n  selector: 'bb-table-header-checkbox',\n  templateUrl: './table-header-checkbox.component.html',\n})\nexport class TableHeaderCheckboxComponent implements OnInit, OnDestroy {\n  @ViewChild('checkbox', { read: ElementRef, static: true })\n  checkboxInput?: ElementRef<HTMLInputElement>;\n\n  /**\n   * Input which sends current selection set to be cleared\n   */\n  @Input() clearSelection: Subject<Set<string>> = new Subject();\n\n  private getSelectedItemsCount(list: Array<any>) {\n    return list.filter((item) => this.parentTable.isSelected(item)).length;\n  }\n\n  constructor(private readonly parentTable: TableDirective) {}\n\n  get isChecked(): boolean {\n    const pageList = this.parentTable.dataSource\n      ? this.parentTable.dataSource\n      : [];\n    const selected = this.getSelectedItemsCount(pageList);\n    return selected === pageList.length;\n  }\n\n  get isIntermediate(): boolean {\n    const pageList = this.parentTable.dataSource\n      ? this.parentTable.dataSource\n      : [];\n    const selected = this.getSelectedItemsCount(pageList);\n    return selected > 0 && selected < pageList.length;\n  }\n\n  onClick(event: Event) {\n    event.stopPropagation();\n    if (this.checkboxInput) {\n      const pageList = this.parentTable.dataSource\n        ? this.parentTable.dataSource\n        : [];\n      if (this.isIntermediate) {\n        pageList.forEach((item) => {\n          if (this.parentTable.isSelected(item)) {\n            this.parentTable.toggleItem(item, false);\n          }\n        });\n      } else {\n        pageList.forEach((item) => {\n          this.parentTable.toggleItem(item, !this.parentTable.isSelected(item));\n        });\n      }\n    }\n  }\n\n  ngOnInit() {\n    this.clearSelection.subscribe((items) => {\n      if (items.size) {\n        items.forEach((pid) => {\n          this.parentTable.toggleItem(pid, false);\n        });\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.clearSelection.unsubscribe();\n  }\n}\n","<div class=\"bb-input-checkbox\" (click)=\"onClick($event)\">\n  <input\n    #checkbox\n    type=\"checkbox\"\n    [checked]=\"isChecked\"\n    aria-label=\"select all items\"\n    [indeterminate]=\"isIntermediate\"\n    class=\"bb-input-checkbox__input\"\n    i18n-aria-label=\"@@bb-table-header-checkbox.aria-label\"\n  />\n  <span class=\"bb-input-checkbox__content bb-block--xs\"></span>\n</div>\n"]}