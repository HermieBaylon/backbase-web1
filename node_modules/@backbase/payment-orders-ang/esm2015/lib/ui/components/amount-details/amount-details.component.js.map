{"version":3,"file":"amount-details.component.js","sourceRoot":"","sources":["../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/amount-details/amount-details.component.ts","../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/amount-details/amount-details.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAU,MAAM,eAAe,CAAC;AACzD,OAAO,SAAS,MAAM,cAAc,CAAC;AAKrC,OAAO,EAAE,YAAY,EAAgB,MAAM,cAAc,CAAC;;;;;AAO1D,MAAM,OAAO,4BAA4B;IAJzC;QA2BE,mBAAc,GAAG,KAAK,CAAC;QACvB,sBAAiB,GAAG,KAAK,CAAC;KAwB3B;IAtBC,QAAQ;;QACN,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,EAAE,CAAC;QAC1E,MAAM,MAAM,GAAG,MAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,WAAW,0CAAE,MAAM,CAAC;QACjD,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC;QAC3C,MAAM,gBAAgB,GAAG,IAAI,SAAS,CACpC,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,gBAAgB,KAAI,MAAM,IAAI,GAAG,CACrD;aACE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;aACxB,QAAQ,EAAE,CAAC;QACd,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAC9C,IAAI,CAAC,WAAW;YACd,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,YAAY,KAAK,KAAK;gBAChD,CAAC,CAAC,gBAAgB;gBAClB,CAAC,CAAC,MAAM,CAAC;IACf,CAAC;IAEO,aAAa;;QACnB,OAAO,CAAC,CAAC,CACP,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,YAAY,OAAK,MAAA,IAAI,CAAC,YAAY,0CAAE,UAAU,CAAA;YACjE,CAAC,CAAA,MAAA,IAAI,CAAC,YAAY,0CAAE,IAAI,CAAA,CACzB,CAAC;IACJ,CAAC;;6IA/CU,4BAA4B;iIAA5B,4BAA4B,0MCbzC,ylGA0FA;4FD7Ea,4BAA4B;kBAJxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,0BAA0B;oBACpC,WAAW,EAAE,iCAAiC;iBAC/C;8BAKU,MAAM;sBAAd,KAAK;gBAIG,OAAO;sBAAf,KAAK;gBAIG,WAAW;sBAAnB,KAAK;gBAIG,YAAY;sBAApB,KAAK;gBAIG,YAAY;sBAApB,KAAK","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport BigNumber from 'bignumber.js';\nimport {\n  PaymentTypeConfig,\n  RemittanceDetails,\n} from '../../../configs/models/form-items.model';\nimport { ChargeBearer, ForexDetails } from '../../models';\nimport { Currency } from '../../models/types';\n\n@Component({\n  selector: 'bb-payord-amount-details',\n  templateUrl: './amount-details.component.html',\n})\nexport class PayordAmountDetailsComponent implements OnInit {\n  /**\n   * The config of current payment type\n   */\n  @Input() config!: PaymentTypeConfig;\n  /**\n   * Remittance Details\n   */\n  @Input() details!: RemittanceDetails;\n  /**\n   * Transfer fee details\n   */\n  @Input() transferFee?: Currency;\n  /**\n   * Charge bearer type\n   */\n  @Input() chargeBearer?: ChargeBearer;\n  /**\n   * The currency exchange details of the payment\n   */\n  @Input() forexDetails?: ForexDetails;\n\n  totalAmount!: number | string;\n  hasTransferFee = false;\n  exchangeRateError = false;\n\n  ngOnInit() {\n    const transferFee = this.transferFee || { amount: '0', currencyCode: '' };\n    const amount = this.details?.amountGroup?.amount;\n    this.hasTransferFee = !!transferFee.amount;\n    const calculatedAmount = new BigNumber(\n      this.forexDetails?.calculatedAmount || amount || '0'\n    )\n      .plus(transferFee.amount)\n      .toString();\n    this.exchangeRateError = this.hasForexError();\n    this.totalAmount =\n      this.hasTransferFee && this.chargeBearer !== 'BEN'\n        ? calculatedAmount\n        : amount;\n  }\n\n  private hasForexError() {\n    return !!(\n      this.forexDetails?.fromCurrency !== this.forexDetails?.toCurrency &&\n      !this.forexDetails?.rate\n    );\n  }\n}\n","<div class=\"bb-block bb-block--md\">\n  <div class=\"bb-text-bold\">\n    <bb-payord-dynamic-label\n      name=\"amountGroup\"\n      [config]=\"config\"\n      defaultLabel=\"Amount\"\n      i18n-defaultLabel\n    ></bb-payord-dynamic-label>\n  </div>\n  <div\n    class=\"bb-highlight break-word bb-block bb-block--xs\"\n    data-role=\"transfer-amount\"\n  >\n    <bb-amount-ui\n      [amount]=\"details?.amountGroup?.amount\"\n      [currency]=\"details?.amountGroup?.currency\"\n      [mapCurrency]=\"false\"\n    ></bb-amount-ui>\n  </div>\n  <ng-container *ngIf=\"forexDetails?.calculatedAmount\">\n    <div class=\"bb-block bb-block--xs\">\n      <span i18n=\"amount-details.payment.details.amount-you-pay-label\"\n        >Amount you pay</span\n      >:\n      <span data-role=\"amount-you-pay\">\n        &asymp;\n        <bb-amount-ui\n          [mapCurrency]=\"false\"\n          [amount]=\"forexDetails?.calculatedAmount\"\n          [currency]=\"forexDetails?.fromCurrency\"\n        ></bb-amount-ui>\n      </span>\n    </div>\n    <div class=\"bb-block bb-block--xs\" data-role=\"indicative-rate\">\n      <span i18n=\"amount-details.payment.details.indicative-fee-label\"\n        >Indicative rate</span\n      >: 1 {{ forexDetails?.fromCurrency }} &asymp; {{ forexDetails?.rate }}\n      {{ forexDetails?.toCurrency }}\n    </div>\n  </ng-container>\n\n  <div class=\"bb-block bb-block--md\" *ngIf=\"transferFee\">\n    <div class=\"bb-block bb-block--xs\" data-role=\"transfer-fee\">\n      <span\n        *ngIf=\"config?.name\"\n        i18n=\"@@standard-transfer-fee-label\"\n        data-role=\"transfer-fee-label\"\n        >Transfer fee - {{ config.name }}:\n      </span>\n\n      <bb-amount-ui\n        [amount]=\"transferFee?.amount\"\n        [currency]=\"transferFee?.currencyCode || details?.amountGroup?.currency\"\n        [mapCurrency]=\"false\"\n        data-role=\"transfer-fee\"\n      ></bb-amount-ui>\n    </div>\n\n    <div class=\"bb-block bb-block--xs\" data-role=\"charge-bearer\">\n      <ng-container *ngIf=\"chargeBearer\" [ngSwitch]=\"chargeBearer\">\n        <ng-container i18n=\"@@charge-bearer-value-our\" *ngSwitchCase=\"'OUR'\">\n          I pay all fees (OUR)\n        </ng-container>\n        <ng-container i18n=\"@@charge-bearer-value-ben\" *ngSwitchCase=\"'BEN'\">\n          Beneficiary pays all fees (BEN)\n        </ng-container>\n        <ng-container i18n=\"@@charge-bearer-value-sha\" *ngSwitchCase=\"'SHA'\">\n          Fee is shared between you and beneficiary (SHA)\n        </ng-container>\n      </ng-container>\n    </div>\n\n    <div *ngIf=\"!exchangeRateError\" class=\"bb-text-bold\">\n      <span i18n=\"@@total-label\">Total: </span>\n      <ng-container\n        i18n=\"@@total-approximate-sign\"\n        *ngIf=\"forexDetails?.calculatedAmount\"\n        >&asymp;\n      </ng-container>\n      <bb-amount-ui\n        [amount]=\"totalAmount\"\n        [currency]=\"\n          forexDetails?.fromCurrency || details?.amountGroup?.currency\n        \"\n        [mapCurrency]=\"false\"\n        [attr.data-role]=\"'transfer-total'\"\n      ></bb-amount-ui>\n    </div>\n  </div>\n</div>\n"]}