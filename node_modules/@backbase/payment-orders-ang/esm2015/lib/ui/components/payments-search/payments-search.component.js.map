{"version":3,"file":"payments-search.component.js","sourceRoot":"","sources":["../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/payments-search/payments-search.component.ts","../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/payments-search/payments-search.component.html"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,SAAS,EACT,YAAY,EACZ,KAAK,EAGL,MAAM,GACP,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,YAAY,EAAE,oBAAoB,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAC/E,OAAO,EAAE,OAAO,EAAE,MAAM,MAAM,CAAC;AAC/B,OAAO,EAAE,mBAAmB,EAAE,eAAe,EAAE,MAAM,iBAAiB,CAAC;AACvE,OAAO,EAAE,UAAU,EAAE,MAAM,+BAA+B,CAAC;;;;AAM3D,MAAM,OAAO,uBAAuB;IAJpC;QAKE;;WAEG;QACM,YAAO,GAAG,IAAI,CAAC;QACf,QAAG,GAAG,IAAI,OAAO,EAAE,CAAC;QACpB,oBAAe,GAAG,IAAI,OAAO,EAAU,CAAC;QAEjD,eAAU,GAAG,EAAE,CAAC;QAEhB;;;WAGG;QACM,iBAAY,GAAG,mBAAmB,CAAC;QAC5C;;;WAGG;QACM,oBAAe,GAAG,eAAe,CAAC;QAC3C;;WAEG;QACO,WAAM,GAAG,IAAI,YAAY,EAAU,CAAC;KAqC/C;IAnCC,QAAQ;QACN,IAAI,CAAC,eAAe;aACjB,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,EACnB,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,EAC/B,oBAAoB,EAAE,CACvB;aACA,SAAS,CAAC,CAAC,IAAY,EAAE,EAAE;YAC1B,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,eAAe,EAAE;gBAChD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACxB;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,cAAc,CAAC,KAAa;QAC1B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC7C,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC7C,CAAC;IAED,YAAY;QACV,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,IAAI,CAAC,eAAe,EAAE;YAClD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACnC;IACH,CAAC;IAED,WAAW;QACT,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QAChB,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;QAChC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;IACtB,CAAC;;wIA3DU,uBAAuB;4HAAvB,uBAAuB,uKClBpC,qwBAoBA,6WD+Da,mCAAmC;4FAjEnC,uBAAuB;kBAJnC,SAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,WAAW,EAAE,gCAAgC;iBAC9C;8BAeU,YAAY;sBAApB,KAAK;gBAKG,eAAe;sBAAvB,KAAK;gBAII,MAAM;sBAAf,MAAM;;AA0CT,MAAM,OAAO,mCAAoC,SAAQ,UAGxD;;oJAHY,mCAAmC;wIAAnC,mCAAmC;4FAAnC,mCAAmC;kBAH/C,SAAS;mBAAC;oBACT,QAAQ,EAAE,gCAAgC;iBAC3C","sourcesContent":["import {\n  Component,\n  Directive,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { debounceTime, distinctUntilChanged, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { DefaultDebounceTime, SearchMinLength } from '../../constants';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\n\n@Component({\n  selector: 'bb-payments-search',\n  templateUrl: 'payments-search.component.html',\n})\nexport class PaymentsSearchComponent implements OnDestroy, OnInit {\n  /**\n   * Reference to instance of customizable component.\n   */\n  readonly hostRef = this;\n  readonly gc$ = new Subject();\n  readonly debounceSearch$ = new Subject<string>();\n\n  searchTerm = '';\n\n  /**\n   * Time delay between each search requests in milliseconds.\n   * Default is 300\n   */\n  @Input() debounceTime = DefaultDebounceTime;\n  /**\n   * Minimum search length\n   * Default is 3\n   */\n  @Input() searchMinLength = SearchMinLength;\n  /**\n   * Changes will be triggered on search\n   */\n  @Output() search = new EventEmitter<string>();\n\n  ngOnInit() {\n    this.debounceSearch$\n      .pipe(\n        takeUntil(this.gc$),\n        debounceTime(this.debounceTime),\n        distinctUntilChanged()\n      )\n      .subscribe((term: string) => {\n        if (!term || term.length >= this.searchMinLength) {\n          this.search.emit(term);\n        }\n      });\n  }\n\n  startSearching(query: string) {\n    this.searchTerm = query;\n    this.debounceSearch$.next(this.searchTerm);\n  }\n\n  clearSearching() {\n    this.searchTerm = '';\n    this.debounceSearch$.next(this.searchTerm);\n  }\n\n  submitSearch() {\n    if (this.searchTerm.length >= this.searchMinLength) {\n      this.search.emit(this.searchTerm);\n    }\n  }\n\n  ngOnDestroy() {\n    this.gc$.next();\n    this.debounceSearch$.complete();\n    this.gc$.complete();\n  }\n}\n\n@Directive({\n  selector: '[bbPaymentsSearchCustomizable]',\n})\nexport class PaymentsSearchCustomizableDirective extends BbTemplate<\n  PaymentsSearchComponent,\n  undefined\n> {}\n","<ng-container bbPaymentsSearchCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n<ng-template bbPaymentsSearchCustomizable let-hostRef>\n  <div class=\"payments-search-container\">\n    <bb-search-box-ui\n      placeholder=\"Search\"\n      i18n-placeholder=\"@@payments-list.placeholder.search\"\n      aria-label=\"Search payments\"\n      i18n-aria-label=\"@@payments-list.label.search\"\n      [showSearch]=\"true\"\n      [showClear]=\"true\"\n      (submit)=\"hostRef.submitSearch()\"\n      (clear)=\"hostRef.clearSearching()\"\n      (search)=\"$event.stopPropagation()\"\n      [ngModel]=\"hostRef.searchTerm\"\n      (ngModelChange)=\"hostRef.startSearching($event)\"\n      data-role=\"searchbox\"\n    >\n    </bb-search-box-ui>\n  </div>\n</ng-template>\n"]}