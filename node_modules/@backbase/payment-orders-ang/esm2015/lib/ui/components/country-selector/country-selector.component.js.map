{"version":3,"file":"country-selector.component.js","sourceRoot":"","sources":["../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/country-selector/country-selector.component.ts","../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/country-selector/country-selector.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  forwardRef,\n  Input,\n  Output,\n} from '@angular/core';\nimport {\n  ControlValueAccessor,\n  FormControl,\n  NG_VALUE_ACCESSOR,\n} from '@angular/forms';\nimport { CountriesMap } from '../../constants';\n\n@Component({\n  selector: 'bb-country-selector',\n  templateUrl: './country-selector.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: forwardRef(() => CountrySelectorComponent),\n    },\n  ],\n})\nexport class CountrySelectorComponent implements ControlValueAccessor {\n  _countries!: Array<string>;\n  _selectedCountry = '';\n  search = new FormControl();\n  countryEntries!: Array<[string, string]>;\n  filteredCountries: Array<string> = [];\n\n  /** */\n  @Input() set countries(countries: Array<string>) {\n    this._countries = countries || [];\n    this.setupCountries();\n  }\n  /** */\n  @Input() selectedCountry = '';\n  /** */\n  @Input() helperText = '';\n  /** */\n  @Input() placeholder = '';\n  /** */\n  @Input() label = '';\n  /** */\n  @Input() searchPlaceholder = '';\n  /** */\n  @Input() dropdownIcon = 'toggle-down';\n  /** */\n  @Output() selectCountry = new EventEmitter<string>();\n\n  setupCountries() {\n    this.countryEntries = this._countries.map((country: string) => [\n      country,\n      CountriesMap[country],\n    ]);\n    this.filteredCountries = [...this._countries];\n  }\n\n  selectItem(country: string) {\n    this.selectedCountry = country;\n    this.selectCountry.emit(country);\n  }\n\n  handleSearch(query = '') {\n    if (query) {\n      this.filteredCountries = this.countryEntries.reduce(\n        (acc: Array<string>, [key, country]) => {\n          if (\n            key.toLocaleLowerCase().indexOf(query.toLocaleLowerCase()) > -1 ||\n            country.toLocaleLowerCase().indexOf(query.toLocaleLowerCase()) > -1\n          ) {\n            acc.push(key);\n          }\n          return acc;\n        },\n        []\n      );\n    } else {\n      this.filteredCountries = this._countries;\n    }\n  }\n\n  onChange(_value: string) {}\n  onTouched() {}\n  writeValue(_value: string): void {}\n  onBlur() {}\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n}\n","<div\n  class=\"bb-country-selector\"\n  ngbDropdown\n  #dropdown=\"ngbDropdown\"\n  display=\"static\"\n>\n  <div class=\"d-inline-block bb-label\" (click)=\"btn.focus()\" *ngIf=\"label\">\n    {{ label }}\n  </div>\n  <span\n    class=\"bb-dynamic-input__helper-text bb-text-support\"\n    *ngIf=\"helperText\"\n    [id]=\"searchElem?.id + '__helper-text'\"\n    [textContent]=\"helperText\"\n  >\n  </span>\n  <div>\n    <button\n      bbButton\n      ngbDropdownToggle\n      color=\"unstyled\"\n      (blur)=\"onBlur()\"\n      data-role=\"open-country-dropdown-list-button\"\n      [attr.aria-label]=\"label\"\n      class=\"bb-country-selector__toggle form-control w-100 d-flex justify-content-between bb-text-support\"\n      #btn\n    >\n      <ng-container *ngIf=\"selectedCountry\">\n        <ng-container\n          *ngTemplateOutlet=\"\n            countryTmpl;\n            context: { $implicit: selectedCountry }\n          \"\n        ></ng-container>\n      </ng-container>\n      <div *ngIf=\"!selectedCountry\">\n        <ng-container\n          *ngIf=\"placeholder; else defaultPlaceHolder\"\n        ></ng-container>\n        {{ placeholder }}\n      </div>\n      <bb-icon-ui [name]=\"dropdownIcon || 'toggle-down'\"></bb-icon-ui>\n    </button>\n  </div>\n\n  <div ngbDropdownMenu class=\"dropdown-menu dropdown-menu-right w-100\">\n    <div class=\"bb-block bb-block--md px-3\">\n      <bb-search-box-ui\n        (focus)=\"dropdown.open()\"\n        [formControl]=\"search\"\n        (clear)=\"handleSearch('')\"\n        data-role=\"country-search\"\n        role=\"searchbox\"\n        (ngModelChange)=\"handleSearch(search.value)\"\n        [placeholder]=\"searchPlaceholder || 'Search'\"\n        [showSearch]=\"true\"\n        [showClear]=\"true\"\n        [autocomplete]=\"'off'\"\n        #searchElem\n      >\n      </bb-search-box-ui>\n    </div>\n    <div *ngIf=\"filteredCountries?.length\" class=\"pre-scrollable\">\n      <button\n        *ngFor=\"let country of filteredCountries\"\n        role=\"menuitem\"\n        type=\"button\"\n        class=\"d-sm-flex px-3 py-2 d-flex-row align-items-center btn--unstyled\"\n        (bbKeyboardClick)=\"selectItem(country); dropdown.close()\"\n        ngbDropdownItem\n      >\n        <ng-container\n          *ngTemplateOutlet=\"countryTmpl; context: { $implicit: country }\"\n        ></ng-container>\n      </button>\n    </div>\n    <ng-container *ngIf=\"!filteredCountries?.length && search?.value\">\n      <ng-container *ngTemplateOutlet=\"emptySearch\"></ng-container>\n    </ng-container>\n  </div>\n</div>\n\n<ng-template let-code #countryTmpl>\n  <div class=\"d-flex justify-content-between align-items-center w-100\">\n    <div class=\"d-flex align-items-center\">\n      <bb-flag-icon\n        class=\"mr-2 d-flex\"\n        [countryCode]=\"code\"\n        [flagSize]=\"'sm'\"\n      ></bb-flag-icon>\n      <bb-country-name [countryCode]=\"code\"></bb-country-name>\n    </div>\n    <div class=\"bb-text-support\">{{ code }}</div>\n  </div>\n</ng-template>\n\n<ng-template #emptySearch>\n  <div class=\"card-body\">\n    <bb-empty-state-ui\n      data-role=\"no-templates-found\"\n      title=\"No Results Found\"\n      subtitle=\"We can’t find what you’re looking for. Please try a different criteria.\"\n      iconSize=\"xxl\"\n      i18n-subtitle=\"@@bb-country-selector.empty-state-subtitle\"\n      i18n-title=\"@@bb-country-selector.empty-state-title\"\n      iconModifier=\"search\"\n      [showIcon]=\"true\"\n    ></bb-empty-state-ui>\n  </div>\n</ng-template>\n\n<ng-template #defaultPlaceHolder>\n  <ng-container i18n>- select a country -</ng-container>\n</ng-template>\n"]}