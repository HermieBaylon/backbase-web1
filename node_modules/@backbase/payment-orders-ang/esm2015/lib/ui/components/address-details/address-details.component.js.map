{"version":3,"file":"address-details.component.js","sourceRoot":"","sources":["../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/address-details/address-details.component.ts","../../../../../../../../libs/payment-orders-ang/src/lib/ui/components/address-details/address-details.component.html"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,UAAU,EACV,YAAY,EACZ,KAAK,EAIL,MAAM,GAEP,MAAM,eAAe,CAAC;AACvB,OAAO,EAAmB,SAAS,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AAExE,OAAO,EAAE,cAAc,EAAE,MAAM,2BAA2B,CAAC;AAC3D,OAAO,EAAE,eAAe,EAAE,MAAM,4BAA4B,CAAC;AAC7D,OAAO,EAAW,QAAQ,EAAE,MAAM,oBAAoB,CAAC;;;;;;;;;;;;AAMvD,MAAM,OAAO,uBAAuB;IAgFlC,YAA6B,KAAiB;QAAjB,UAAK,GAAL,KAAK,CAAY;QA9ErC,OAAE,GAAG,uBAAuB,CAAC,GAAG,EAAE,CAAC;QAY5C;;WAEG;QACM,YAAO,GAAY,EAAE,CAAC;QAE/B;;WAEG;QACM,2BAAsB,GAAG,KAAK,CAAC;QASxC;;WAEG;QACM,gBAAW,GAAG,KAAK,CAAC;QAE7B;;WAEG;QACM,aAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC;QAEpC;;;WAGG;QACM,oBAAe,GAAG,KAAK,CAAC;QAEjC;;WAEG;QACH,4DAA4D;QAClD,WAAM,GAAG,IAAI,YAAY,EAAE,CAAC;QACtC;;WAEG;QACH,4DAA4D;QAClD,UAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QAErC;;WAEG;QACO,YAAO,GAAG,IAAI,YAAY,EAAE,CAAC;QAEvC;;WAEG;QACO,WAAM,GAAG,IAAI,YAAY,EAAE,CAAC;QAEtC;;WAEG;QACO,SAAI,GAAG,IAAI,YAAY,EAAE,CAAC;QAEpC;;WAEG;QACO,QAAG,GAAG,IAAI,YAAY,EAAE,CAAC;QAE3B,mBAAc,GAAG,CAAC,cAAc,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;IAEb,CAAC;IAElD,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACrC;QACD,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE;YAC3B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC;YAChC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SACnB;QAED,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,SAAS,CACpE,GAAG,EAAE;YACH,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACtC,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,EAAE;gBACnC,IAAI,IAAI,CAAC,eAAe,EAAE,EAAE;oBAC1B,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;iBACpB;qBAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,EAAE;oBAC1C,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;iBACnB;aACF;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,WAAW,CAAC,OAAsB;;QAChC,MAAM,SAAS,GAAG,MAAA,MAAA,IAAI,CAAC,WAAW,0CAAE,QAAQ,CAAC,cAAc,CAAC,0CAAE,SAAS,CAAC;QACxE,MAAM,WAAW,GAAG,MAAA,OAAO,CAAC,UAAU,CAAC,0CAAE,YAAY,CAAC;QAEtD,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE;YACvB,IAAI,WAAW,KAAK,QAAQ,CAAC,IAAI,EAAE;gBACjC,IAAI,CAAC,SAAS,EAAE;oBACd,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;iBAC7B;aACF;iBAAM;gBACL,IAAI,WAAW,KAAK,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE;oBAC5D,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;iBACnB;gBACD,IAAI,SAAS,EAAE;oBACb,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;iBAC9B;aACF;SACF;IACH,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,WAAmB,EAAE,EAAE;YAClD,MAAM,OAAO,GAAoB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACxE,IAAI,OAAO,EAAE;gBACX,OAAO,CAAC,eAAe,EAAE,CAAC;gBAC1B,OAAO,CAAC,cAAc,EAAE,CAAC;aAC1B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU;;QACR,IAAI,CAAA,MAAA,IAAI,CAAC,SAAS,0CAAE,MAAM,MAAK,CAAC,EAAE;YAChC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;SACnE;QACD,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE;YAC5B,0EAA0E;YAC1E,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;SACpC;QACD,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAClB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IACnB,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,aAAa;QACX,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IACrB,CAAC;IAED,aAAa;QACX,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,EAAE;YACnC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;YAC/B,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;SACrC;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IACrB,CAAC;IAED,gBAAgB,CAAC,aAAsB;QACrC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,WAAmB,EAAE,EAAE;YAClD,MAAM,OAAO,GAAoB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACxE,MAAM,UAAU,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAChE,IAAI,OAAO,EAAE;gBACX,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;gBAClC,OAAO,CAAC,sBAAsB,EAAE,CAAC;aAClC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,aAAa,CAAC,OAAe;QAC3B,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;IAC3C,CAAC;IAED,eAAe;;QACb,OAAO,eAAe,CAAC,MAAA,IAAI,CAAC,WAAW,0CAAE,KAAK,CAAC,CAAC;IAClD,CAAC;IAED,UAAU;QACR,cAAc,CACZ,8BAA8B,EAC9B,IAAI,CAAC,KAAK,CAAC,aAAa,EACxB,KAAK,CACN,CAAC;IACJ,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;SAC5C;IACH,CAAC;;AArMc,2BAAG,GAAG,CAAC,CAAC;wIADZ,uBAAuB;4HAAvB,uBAAuB,6cCrBpC,6zXA8TA;4FDzSa,uBAAuB;kBAJnC,SAAS;mBAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,WAAW,EAAE,kCAAkC;iBAChD;iGAQU,WAAW;sBAAnB,KAAK;gBAKG,WAAW;sBAAnB,KAAK;gBAKG,OAAO;sBAAf,KAAK;gBAKG,sBAAsB;sBAA9B,KAAK;gBAIG,MAAM;sBAAd,KAAK;gBAIG,SAAS;sBAAjB,KAAK;gBAIG,WAAW;sBAAnB,KAAK;gBAKG,QAAQ;sBAAhB,KAAK;gBAMG,eAAe;sBAAvB,KAAK;gBAMI,MAAM;sBAAf,MAAM;gBAKG,KAAK;sBAAd,MAAM;gBAKG,OAAO;sBAAhB,MAAM;gBAKG,MAAM;sBAAf,MAAM;gBAKG,IAAI;sBAAb,MAAM;gBAKG,GAAG;sBAAZ,MAAM","sourcesContent":["import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n} from '@angular/core';\nimport { AbstractControl, FormGroup, Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { toggleTabIndex } from '../../helpers/dom-helpers';\nimport { isAddressTruthy } from '../../helpers/type-helpers';\nimport { Address, ViewType } from '../../models/types';\n\n@Component({\n  selector: 'bb-address-item-details',\n  templateUrl: './address-details.component.html',\n})\nexport class AddressDetailsComponent implements OnInit, OnDestroy, OnChanges {\n  private static _id = 0;\n  readonly id = AddressDetailsComponent._id++;\n\n  /**\n   * The parent formGroup\n   */\n  @Input() addressForm!: FormGroup;\n\n  /**\n   * Type of address\n   */\n  @Input() addressType!: string;\n\n  /**\n   * Instance that holds the address details\n   */\n  @Input() address: Address = {};\n\n  /**\n   * Flag that denoted if contact address is copied\n   */\n  @Input() isContactAddressCopied = false;\n  /**\n   * List of states in the address group\n   */\n  @Input() states?: Array<{ label: string; value: string | number }>;\n  /**\n   * List of countries in the address group\n   */\n  @Input() countries?: Array<{ label: string; value: string | undefined }>;\n  /**\n   * Flag to hide country input in the address component\n   */\n  @Input() hideCountry = false;\n\n  /**\n   * Type of address view. Possible values `FORM`| `CARD`. Defaults to `FORM`\n   */\n  @Input() viewType = ViewType.BUTTON;\n\n  /**\n   * Flag to denote if the debit account has only closed payment permissions\n   * Default value is `false`\n   */\n  @Input() isClosedPayment = false;\n\n  /**\n   * Event emitted when address is submitted\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() submit = new EventEmitter();\n  /**\n   * Event emitted when address is reset\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() reset = new EventEmitter();\n\n  /**\n   * Event emitted when address is discarded\n   */\n  @Output() discard = new EventEmitter();\n\n  /**\n   * Event emitted when address is deleted\n   */\n  @Output() delete = new EventEmitter();\n\n  /**\n   * Event emitted when address is editted\n   */\n  @Output() edit = new EventEmitter();\n\n  /**\n   * Event emitted when add address action is triggered\n   */\n  @Output() add = new EventEmitter();\n  private valueChangeSubscription?: Subscription;\n  private requiredFields = ['addressLine1', 'postCode', 'town'];\n\n  constructor(private readonly elRef: ElementRef) {}\n\n  ngOnInit() {\n    if (!this.hideCountry) {\n      this.requiredFields.push('country');\n    }\n    this.markFieldsAsPristine();\n    if (!this.isAddressTruthy()) {\n      this.viewType = ViewType.BUTTON;\n      this.reset.emit();\n    }\n\n    this.valueChangeSubscription = this.addressForm.valueChanges.subscribe(\n      () => {\n        this.address = this.addressForm.value;\n        if (this.viewType !== ViewType.FORM) {\n          if (this.isAddressTruthy()) {\n            this.submit.emit();\n          } else if (this.viewType === ViewType.CARD) {\n            this.reset.emit();\n          }\n        }\n      }\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const validator = this.addressForm?.controls['addressLine1']?.validator;\n    const currentView = changes['viewType']?.currentValue;\n\n    if (changes['viewType']) {\n      if (currentView === ViewType.FORM) {\n        if (!validator) {\n          this.toggleValidators(true);\n        }\n      } else {\n        if (currentView === ViewType.CARD && !this.isAddressTruthy()) {\n          this.reset.emit();\n        }\n        if (validator) {\n          this.toggleValidators(false);\n        }\n      }\n    }\n  }\n\n  markFieldsAsPristine() {\n    this.requiredFields.forEach((controlName: string) => {\n      const control: AbstractControl = this.addressForm.controls[controlName];\n      if (control) {\n        control.markAsUntouched();\n        control.markAsPristine();\n      }\n    });\n  }\n\n  addAddress() {\n    if (this.countries?.length === 1) {\n      this.addressForm.patchValue({ country: this.countries[0].value });\n    }\n    if (this.addressForm.touched) {\n      // This prevents address form from showing errors before saving an address\n      this.addressForm.markAsUntouched();\n    }\n    this.add.emit();\n  }\n\n  editAddress() {\n    this.edit.emit();\n  }\n\n  discardAddress() {\n    this.discard.emit();\n  }\n\n  deleteAddress() {\n    this.delete.emit();\n  }\n\n  submitAddress() {\n    if (this.viewType === ViewType.FORM) {\n      this.addressForm.markAsDirty();\n      this.addressForm.markAllAsTouched();\n    }\n    this.submit.emit();\n  }\n\n  toggleValidators(addValidators: boolean) {\n    this.requiredFields.forEach((controlName: string) => {\n      const control: AbstractControl = this.addressForm.controls[controlName];\n      const validators = addValidators ? [Validators.required] : null;\n      if (control) {\n        control.setValidators(validators);\n        control.updateValueAndValidity();\n      }\n    });\n  }\n\n  selectCountry(country: string) {\n    this.addressForm.patchValue({ country });\n  }\n\n  isAddressTruthy() {\n    return isAddressTruthy(this.addressForm?.value);\n  }\n\n  onFocusout() {\n    toggleTabIndex(\n      '.bb-input-validation-message',\n      this.elRef.nativeElement,\n      false\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.valueChangeSubscription) {\n      this.valueChangeSubscription.unsubscribe();\n    }\n  }\n}\n","<div class=\"address__view-btn\" [hidden]=\"viewType !== 'BUTTON'\">\n  <button\n    bbButton\n    color=\"link\"\n    (click)=\"addAddress()\"\n    class=\"bb-text-wrap\"\n    data-role=\"control-point\"\n    [disabled]=\"isClosedPayment\"\n  >\n    <bb-icon-ui class=\"mr-2\" name=\"control-point\"></bb-icon-ui>\n    <ng-container i18n=\"@@address-data.add.address.label\"\n      >Add {{ addressType | lowercase }} address</ng-container\n    >\n  </button>\n</div>\n\n<div\n  class=\"address__container--collapsed card card-sm card--highlight card--shadowless\"\n  [hidden]=\"viewType !== 'CARD'\"\n>\n  <div class=\"card-body\">\n    <div class=\"address__container-header bb-stack justify-content-between\">\n      <div class=\"address-label bb-highlight bb-block--md\">\n        <ng-container *ngTemplateOutlet=\"addressTitle\"></ng-container>\n      </div>\n      <div *ngIf=\"!isClosedPayment\">\n        <button\n          bbButton\n          data-role=\"control-point\"\n          color=\"link\"\n          circle=\"true\"\n          (click)=\"editAddress()\"\n          class=\"edit-btn\"\n          bbTooltip=\"Edit address\"\n          [attr.aria-labelledby]=\"'addressInfo_' + id\"\n          triggers=\"hover focus\"\n          i18n-bbTooltip=\"@@address-data.contactaddress.card.buttons.edit.label\"\n        >\n          <bb-icon-ui color=\"dark\" name=\"edit\"></bb-icon-ui>\n        </button>\n        <button\n          bbButton\n          color=\"link\"\n          circle=\"true\"\n          (click)=\"deleteAddress()\"\n          class=\"address__delete-btn\"\n          bbTooltip=\"Delete address\"\n          [attr.aria-labelledby]=\"'addressInfo_' + id\"\n          triggers=\"hover focus\"\n          i18n-bbTooltip=\"\n            @@address-data.contactaddress.card.buttons.delete.label\"\n        >\n          <bb-icon-ui color=\"dark\" name=\"delete\"></bb-icon-ui>\n        </button>\n      </div>\n    </div>\n    <div class=\"address__details--collapsed\" id=\"addressInfo_{{ id }}\">\n      <span class=\"sr-only\"\n        ><ng-container *ngTemplateOutlet=\"addressTitle\"></ng-container\n      ></span>\n      <bb-full-address [address]=\"addressForm?.value\"></bb-full-address>\n    </div>\n  </div>\n</div>\n\n<div\n  class=\"address__container card card-sm card--highlight card--shadowless\"\n  *ngIf=\"viewType === 'FORM'\"\n>\n  <div class=\"card-body\">\n    <fieldSet [formGroup]=\"addressForm\">\n      <legend class=\"sr-only\" i18n=\"@@address-data.addressGroup.title\">\n        Address details\n      </legend>\n      <div class=\"form-group\">\n        <div>\n          <div\n            class=\"address-label bb-highlight bb-block--md\"\n            data-role=\"address-label\"\n            i18n=\"@@address-data.contactAddress.label\"\n          >\n            {{ addressType | titlecase }} address\n          </div>\n          <div class=\"form-group\">\n            <bb-input-text-ui\n              label=\"Address line 1\"\n              i18n-label=\"@@address-data.addressLine1.label\"\n              formControlName=\"addressLine1\"\n              data-role=\"addressLine1\"\n              [maxLength]=\"70\"\n              [attr.aria-describedby]=\"addressLine1?.id + '__error'\"\n              #addressLine1\n            >\n            </bb-input-text-ui>\n            <bb-input-validation-message-ui\n              [attr.id]=\"addressLine1?.id + '__error'\"\n              *ngIf=\"addressForm.controls['addressLine1'] as formControl\"\n              [showErrors]=\"formControl?.touched && formControl?.invalid\"\n              (focusout)=\"onFocusout()\"\n            >\n              <ng-container *ngIf=\"formControl?.errors?.required\">\n                <span i18n=\"@@address-data.addressLine1.requiredError\"\n                  >Address is required.</span\n                >\n              </ng-container>\n            </bb-input-validation-message-ui>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <bb-input-text-ui\n            label=\"Address line 2 (Optional)\"\n            i18n-label=\"@@address-data.addressLine2.label\"\n            formControlName=\"addressLine2\"\n            data-role=\"addressLine2\"\n            [maxLength]=\"70\"\n            #addressLine2\n          >\n          </bb-input-text-ui>\n        </div>\n        <div class=\"form-group\">\n          <bb-input-text-ui\n            label=\"Address line 3 (Optional)\"\n            i18n-label=\"@@address-data.addressLine3.label\"\n            formControlName=\"streetName\"\n            data-role=\"streetName\"\n            [maxLength]=\"70\"\n            #addressLine3\n          >\n          </bb-input-text-ui>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-4 form-group\">\n          <bb-input-text-ui\n            label=\"Postal code\"\n            i18n-label=\"@@address-data.postCode.label\"\n            formControlName=\"postCode\"\n            data-role=\"postCode\"\n            #postCode\n            [maxLength]=\"16\"\n            [attr.aria-describedby]=\"postCode?.id + '__error'\"\n          >\n          </bb-input-text-ui>\n          <bb-input-validation-message-ui\n            [attr.id]=\"postCode?.id + '__error'\"\n            *ngIf=\"addressForm.controls['postCode'] as formControl\"\n            [showErrors]=\"formControl?.touched && formControl?.invalid\"\n            (focusout)=\"onFocusout()\"\n          >\n            <ng-container *ngIf=\"formControl?.errors?.required\">\n              <span i18n=\"@@address-data.postCode.requiredError\"\n                >Postal code is required.</span\n              >\n            </ng-container>\n          </bb-input-validation-message-ui>\n        </div>\n        <div class=\"col-md-8 form-group\">\n          <bb-input-text-ui\n            #contactCity\n            label=\"City\"\n            formControlName=\"town\"\n            data-role=\"town\"\n            [maxLength]=\"35\"\n            [attr.aria-describedby]=\"contactCity?.id + '__error'\"\n          >\n          </bb-input-text-ui>\n          <bb-input-validation-message-ui\n            [attr.id]=\"contactCity?.id + '__error'\"\n            *ngIf=\"addressForm.controls['town'] as formControl\"\n            [showErrors]=\"formControl?.touched && formControl?.invalid\"\n            (focusout)=\"onFocusout()\"\n          >\n            <ng-container *ngIf=\"formControl?.errors?.required\">\n              <span i18n=\"@@address-data.city.requiredError\"\n                >City is required.</span\n              >\n            </ng-container>\n          </bb-input-validation-message-ui>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-6 form-group\">\n          <ng-container *ngIf=\"states?.length > 0; else stateText\">\n            <bb-dropdown-single-select-ui\n              label=\"State or area (Optional)\"\n              i18n-label=\"@@address-data.countrySubDivision.label\"\n              data-role=\"stateOrArea\"\n              formControlName=\"countrySubDivision\"\n              placeholder=\"Select\"\n              i18n-placeholder=\"@@address-data.countrySubDivision.placeholder\"\n            >\n              <bb-dropdown-single-select-option-ui\n                *ngFor=\"let option of states\"\n                [value]=\"option.value\"\n                [label]=\"option.label\"\n              >\n              </bb-dropdown-single-select-option-ui>\n            </bb-dropdown-single-select-ui>\n          </ng-container>\n\n          <ng-template #stateText>\n            <bb-input-text-ui\n              #countrySubDivision\n              label=\"State or area (Optional)\"\n              data-role=\"countrySubDivision\"\n              i18n-label=\"@@address-data.countrySubDivision.label\"\n              formControlName=\"countrySubDivision\"\n              [maxLength]=\"35\"\n            >\n            </bb-input-text-ui>\n          </ng-template>\n        </div>\n        <div\n          class=\"col-md-6 form-group\"\n          data-role=\"country\"\n          *ngIf=\"!hideCountry\"\n        >\n          <ng-container *ngIf=\"countries?.length > 0; else countryText\">\n            <bb-dropdown-single-select-ui\n              label=\"Country\"\n              data-role=\"country\"\n              i18n-label=\"@@address-data.country.label\"\n              formControlName=\"country\"\n              placeholder=\"Select\"\n              i18n-placeholder=\"@@address-data.country.placeholder\"\n              [attr.aria-describedby]=\"countryEl?.id + '__error'\"\n              #countryEl\n            >\n              <bb-dropdown-single-select-option-ui\n                *ngFor=\"let option of countries\"\n                [value]=\"option.value\"\n                [label]=\"option.label\"\n              >\n              </bb-dropdown-single-select-option-ui>\n            </bb-dropdown-single-select-ui>\n            <bb-input-validation-message-ui\n              [attr.id]=\"countryEl?.id + '__error'\"\n              *ngIf=\"addressForm.controls['country'] as formControl\"\n              [showErrors]=\"formControl?.touched && formControl?.invalid\"\n              (focusout)=\"onFocusout()\"\n            >\n              <span i18n=\"@@address-data.country.requiredError\"\n                >Country is required.</span\n              >\n            </bb-input-validation-message-ui>\n          </ng-container>\n          <ng-template #countryText>\n            <bb-input-text-ui\n              label=\"Country\"\n              i18n-label=\"@@address-data.country.label\"\n              formControlName=\"country\"\n              [attr.aria-describedby]=\"countryTextEl?.id + '__error'\"\n              #countryTextEl\n            >\n            </bb-input-text-ui>\n            <bb-input-validation-message-ui\n              [attr.id]=\"countryTextEl?.id + '__error'\"\n              *ngIf=\"addressForm.controls['country'] as formControl\"\n              [showErrors]=\"formControl?.touched && formControl?.invalid\"\n              (focusout)=\"onFocusout()\"\n            >\n              <span i18n=\"@@address-data.country.requiredError\"\n                >Country is required.</span\n              >\n            </bb-input-validation-message-ui>\n          </ng-template>\n        </div>\n        <div class=\"col-md-6 form-group\" *ngIf=\"hideCountry\">\n          <div class=\"bb-label\" i18n=\"@@address-data.country-readonly.label\">\n            Country\n          </div>\n          <div class=\"form-control disabled bg-light\">\n            <bb-country-name\n              *ngIf=\"this.addressForm.get('country')?.value as countryCode\"\n              [countryCode]=\"countryCode\"\n            ></bb-country-name>\n          </div>\n        </div>\n      </div>\n    </fieldSet>\n    <div class=\"address__btn-container bb-button-bar bb-button-bar--reverse\">\n      <button\n        class=\"address__confirm-btn bb-button-bar__button\"\n        bbButton\n        buttonSize=\"sm\"\n        color=\"primary\"\n        data-role=\"confirm-address\"\n        (click)=\"submitAddress()\"\n      >\n        <ng-container i18n=\"@@address-data.submitAddressBtn.label\"\n          >Confirm address</ng-container\n        >\n      </button>\n      <button\n        class=\"address__cancel-btn bb-button-bar__button\"\n        bbButton\n        buttonSize=\"sm\"\n        color=\"link\"\n        (click)=\"discardAddress()\"\n      >\n        <ng-container i18n=\"@@address-data.discardAddressBtn.label\"\n          >Discard</ng-container\n        >\n      </button>\n    </div>\n  </div>\n</div>\n\n<ng-template #addressTitle>\n  <ng-container i18n=\"@@address-data.addressType.label\">\n    { addressType, select, beneficiary {Beneficiary} client {Client} beneficiary\n    bank {Beneficiary Bank} correspondent bank {Correspondent Bank} intermediary\n    bank {Intermediary Bank} client bank {Client Bank} }\n  </ng-container>\n  <ng-container i18n=\"@@address-data.contactaddress.card.label\">\n    address\n  </ng-container>\n</ng-template>\n"]}