{"version":3,"file":"accessgroup-approval-log.component.js","sourceRoot":"","sources":["../../../../../../libs/accessgroup-ui/src/lib/accessgroup-approval-log/accessgroup-approval-log.component.ts","../../../../../../libs/accessgroup-ui/src/lib/accessgroup-approval-log/accessgroup-approval-log.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACjD,OAAO,wBAAwB,CAAC;AAChC,OAAO,EAAE,cAAc,EAAE,MAAM,+BAA+B,CAAC;;;;AAI/D,MAAM,YAAY,GAAG;IACnB,QAAQ,EAAE,SAAS,CAAA,2EAA2E;IAC9F,QAAQ,EAAE,SAAS,CAAA,2EAA2E;CAC/F,CAAC;AAMF,MAAM,OAAO,+BAA+B;IAJ5C;QAKE,wBAAwB;QACf,cAAS,GAAG,KAAK,CAAC;QAa3B,YAAO,GAAwB,EAAE,CAAC;QAElC,gDAAgD;QACvC,eAAU,GAAG;YACpB,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,YAAY,CAAC,QAAQ;YAChD,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,YAAY,CAAC,QAAQ;SACjD,CAAC;QAEF,iCAAiC;QACxB,aAAQ,GAAG;YAClB,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,QAAQ;YACnC,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,SAAS;SACrC,CAAC;QAEF,kCAAkC;QACzB,cAAS,GAAG;YACnB,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,QAAQ;YACnC,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,SAAS;SACrC,CAAC;KACH;IA9BC,2BAA2B;IAC3B,IAAa,YAAY,CAAC,KAAoC;QAC5D,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,KAAK,CAAC,OAAO,EAAE;YACjB,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,EAAqB,EAAE,EAAE;;gBAC9C,EAAE,CAAC,aAAa,GAAG,MAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,aAAa,0CAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,cAAc,CAAC,0CAAE,IAAI,CAAC;gBAC3F,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACxB,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;;gJAbU,+BAA+B;oIAA/B,+BAA+B,qICf5C,+sEAiDA;4FDlCa,+BAA+B;kBAJ3C,SAAS;mBAAC;oBACT,QAAQ,EAAE,6BAA6B;oBACvC,WAAW,EAAE,2CAA2C;iBACzD;8BAGU,SAAS;sBAAjB,KAAK;gBAGO,YAAY;sBAAxB,KAAK","sourcesContent":["import { Component, Input } from '@angular/core';\nimport '@angular/localize/init';\nimport { ApprovalStatus } from '../model/approval-status.enum';\nimport { ApprovalLogRecord } from '../model/approval-log-record.interface';\nimport { PresentationApprovalDetailDto } from '@backbase/consolidated-approvals-beta-http-ang/model/presentationApprovalDetailDto';\n\nconst translations = {\n  approved: $localize`:Approved status@@approvals-journey.approval-log.status.approved:Approved`,\n  rejected: $localize`:Rejected status@@approvals-journey.approval-log.status.rejected:Rejected`,\n};\n\n@Component({\n  selector: 'bb-accessgroup-approval-log',\n  templateUrl: './accessgroup-approval-log.component.html',\n})\nexport class AccessgroupApprovalLogComponent {\n  /** Is pending status */\n  @Input() isPending = false;\n\n  /** Approval info setter */\n  @Input() set approvalInfo(value: PresentationApprovalDetailDto) {\n    this.records = [];\n    if (value.records) {\n      value.records.forEach((el: ApprovalLogRecord) => {\n        el.approvalLevel = value?.approvalTypes?.find(item => item.id === el.approvalTypeId)?.name;\n        this.records.push(el);\n      });\n    }\n  }\n\n  records: ApprovalLogRecord[] = [];\n\n  /** Status name (translated) reference object */\n  readonly statusName = {\n    [ApprovalStatus.REJECTED]: translations.rejected,\n    [ApprovalStatus.APPROVED]: translations.approved,\n  };\n\n  /** Icon name reference object */\n  readonly iconName = {\n    [ApprovalStatus.REJECTED]: 'cancel',\n    [ApprovalStatus.APPROVED]: 'success',\n  };\n\n  /** Icon color reference object */\n  readonly iconColor = {\n    [ApprovalStatus.REJECTED]: 'danger',\n    [ApprovalStatus.APPROVED]: 'success',\n  };\n}\n","<div class=\"bb-item-log bb-accessgroup-approval-log\">\n  <div *ngFor=\"let itemLogRecord of records\" class=\"bb-item-log__record\" data-role=\"approval-log-record\">\n    <div class=\"bb-stack bb-stack--align-top bb-stack--wrap\">\n      <bb-icon-ui\n        class=\"bb-item-log-record__icon\"\n        size=\"md\"\n        [name]=\"iconName[itemLogRecord.status]\"\n        [color]=\"iconColor[itemLogRecord.status]\"></bb-icon-ui>\n      <div class=\"bb-item-log-record__details\">\n        <span class=\"bb-text-bold\">{{ statusName[itemLogRecord.status] }} </span>\n\n        <!-- TODO: Replace letter with component -->\n        <span\n          *ngIf=\"itemLogRecord.approvalLevel\"\n          class=\"d-inline-block px-2 mx-1\"\n          style=\"background-color: #dedede; border-radius: 4px\"\n          >{{ itemLogRecord.approvalLevel }}</span\n        >\n\n        <small>\n          <ng-container> {{ itemLogRecord.userFullName }}</ng-container>\n          <ng-container *ngIf=\"itemLogRecord.externalUserId\"> ({{ itemLogRecord.externalUserId }})</ng-container>\n        </small>\n\n        <div class=\"bb-item-log-record__time\">\n          <time> {{ itemLogRecord.createdAt | date: 'd MMM YYYY' }}</time>\n          <ng-container i18n=\"At (used in date info)@@approvals-journey.approval-log.date.at\"> at</ng-container>\n          <time> {{ itemLogRecord.createdAt | date: 'shortTime' }}</time>\n        </div>\n      </div>\n\n      <div *ngIf=\"itemLogRecord.comment\" class=\"w-100 mt-3 mr-4 mb-2 ml-4\">\n        <div class=\"bb-card bb-card--sm bb-card--shadowless ml-2 bb-accessgroup-approval-log__comment\">\n          <div class=\"bb-card__body\">\n            <small>{{ itemLogRecord.comment }}</small>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"isPending\" class=\"bb-item-log__record\" data-role=\"approval-log-pending\">\n    <bb-icon-ui class=\"bb-text-support bb-item-log-record__icon\" name=\"watch-later\" size=\"md\"></bb-icon-ui>\n    <div\n      class=\"bb-item-log__pending-record--details bb-text-bold\"\n      i18n=\"Waiting for further approval(s)@@approvals-journey.approval-log.pending.title\">\n      Waiting for further approval(s)\n    </div>\n  </div>\n</div>\n"]}