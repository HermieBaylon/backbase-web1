import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpParameterCodec } from '../encoder';
import { ARRANGEMENT_MANAGER_BASE_PATH } from '../variables';
import { ArrangementManagerConfiguration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
export class ProductSummaryHttpService {
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = '';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new ArrangementManagerConfiguration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                value.forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, value.toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    getArrangementsByBusinessFunction(requestParameters, observe = 'body', reportProgress = false, options) {
        const _businessFunction = requestParameters["businessFunction"];
        if (_businessFunction === null || _businessFunction === undefined) {
            throw new Error('Required parameter businessFunction was null or undefined when calling getArrangementsByBusinessFunction.');
        }
        const _resourceName = requestParameters["resourceName"];
        if (_resourceName === null || _resourceName === undefined) {
            throw new Error('Required parameter resourceName was null or undefined when calling getArrangementsByBusinessFunction.');
        }
        const _privilege = requestParameters["privilege"];
        if (_privilege === null || _privilege === undefined) {
            throw new Error('Required parameter privilege was null or undefined when calling getArrangementsByBusinessFunction.');
        }
        const _contentLanguage = requestParameters["contentLanguage"];
        const _withLatestBalances = requestParameters["withLatestBalances"];
        const _maskIndicator = requestParameters["maskIndicator"];
        const _debitAccount = requestParameters["debitAccount"];
        const _creditAccount = requestParameters["creditAccount"];
        const _externalTransferAllowed = requestParameters["externalTransferAllowed"];
        const _productKindName = requestParameters["productKindName"];
        const _legalEntityIds = requestParameters["legalEntityIds"];
        const _sourceId = requestParameters["sourceId"];
        const _favorite = requestParameters["favorite"];
        const _searchTerm = requestParameters["searchTerm"];
        const _customOrder = requestParameters["customOrder"];
        const _favoriteFirst = requestParameters["favoriteFirst"];
        const _subscriptions = requestParameters["subscriptions"];
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _cursor = requestParameters["cursor"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        const _ignoredProductKindNames = requestParameters["ignoredProductKindNames"];
        const _productKindNames = requestParameters["productKindNames"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_withLatestBalances !== undefined && _withLatestBalances !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _withLatestBalances, 'withLatestBalances');
        }
        if (_maskIndicator !== undefined && _maskIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _maskIndicator, 'maskIndicator');
        }
        if (_debitAccount !== undefined && _debitAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _debitAccount, 'debitAccount');
        }
        if (_creditAccount !== undefined && _creditAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creditAccount, 'creditAccount');
        }
        if (_businessFunction !== undefined && _businessFunction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _businessFunction, 'businessFunction');
        }
        if (_resourceName !== undefined && _resourceName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _resourceName, 'resourceName');
        }
        if (_privilege !== undefined && _privilege !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _privilege, 'privilege');
        }
        if (_externalTransferAllowed !== undefined && _externalTransferAllowed !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _externalTransferAllowed, 'externalTransferAllowed');
        }
        if (_productKindName !== undefined && _productKindName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _productKindName, 'productKindName');
        }
        if (_legalEntityIds) {
            _legalEntityIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'legalEntityIds');
            });
        }
        if (_sourceId !== undefined && _sourceId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _sourceId, 'sourceId');
        }
        if (_favorite !== undefined && _favorite !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _favorite, 'favorite');
        }
        if (_searchTerm !== undefined && _searchTerm !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _searchTerm, 'searchTerm');
        }
        if (_customOrder !== undefined && _customOrder !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _customOrder, 'customOrder');
        }
        if (_favoriteFirst !== undefined && _favoriteFirst !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _favoriteFirst, 'favoriteFirst');
        }
        if (_subscriptions) {
            _subscriptions.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'subscriptions');
            });
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_orderBy) {
            _orderBy.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'orderBy');
            });
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        if (_ignoredProductKindNames) {
            _ignoredProductKindNames.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'ignoredProductKindNames');
            });
        }
        if (_productKindNames) {
            _productKindNames.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'productKindNames');
            });
        }
        let headers = this.defaultHeaders;
        if (_contentLanguage !== undefined && _contentLanguage !== null) {
            headers = headers.set('Content-Language', String(_contentLanguage));
        }
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/productsummary/context/arrangements`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getArrangementsByBusinessFunctionUrl(requestParameters) {
        const _businessFunction = requestParameters["businessFunction"];
        if (_businessFunction === null || _businessFunction === undefined) {
            throw new Error('Required parameter businessFunction was null or undefined when calling getArrangementsByBusinessFunction.');
        }
        const _resourceName = requestParameters["resourceName"];
        if (_resourceName === null || _resourceName === undefined) {
            throw new Error('Required parameter resourceName was null or undefined when calling getArrangementsByBusinessFunction.');
        }
        const _privilege = requestParameters["privilege"];
        if (_privilege === null || _privilege === undefined) {
            throw new Error('Required parameter privilege was null or undefined when calling getArrangementsByBusinessFunction.');
        }
        const _contentLanguage = requestParameters["contentLanguage"];
        const _withLatestBalances = requestParameters["withLatestBalances"];
        const _maskIndicator = requestParameters["maskIndicator"];
        const _debitAccount = requestParameters["debitAccount"];
        const _creditAccount = requestParameters["creditAccount"];
        const _externalTransferAllowed = requestParameters["externalTransferAllowed"];
        const _productKindName = requestParameters["productKindName"];
        const _legalEntityIds = requestParameters["legalEntityIds"];
        const _sourceId = requestParameters["sourceId"];
        const _favorite = requestParameters["favorite"];
        const _searchTerm = requestParameters["searchTerm"];
        const _customOrder = requestParameters["customOrder"];
        const _favoriteFirst = requestParameters["favoriteFirst"];
        const _subscriptions = requestParameters["subscriptions"];
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _cursor = requestParameters["cursor"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        const _ignoredProductKindNames = requestParameters["ignoredProductKindNames"];
        const _productKindNames = requestParameters["productKindNames"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_withLatestBalances !== undefined && _withLatestBalances !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _withLatestBalances, 'withLatestBalances');
        }
        if (_maskIndicator !== undefined && _maskIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _maskIndicator, 'maskIndicator');
        }
        if (_debitAccount !== undefined && _debitAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _debitAccount, 'debitAccount');
        }
        if (_creditAccount !== undefined && _creditAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creditAccount, 'creditAccount');
        }
        if (_businessFunction !== undefined && _businessFunction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _businessFunction, 'businessFunction');
        }
        if (_resourceName !== undefined && _resourceName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _resourceName, 'resourceName');
        }
        if (_privilege !== undefined && _privilege !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _privilege, 'privilege');
        }
        if (_externalTransferAllowed !== undefined && _externalTransferAllowed !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _externalTransferAllowed, 'externalTransferAllowed');
        }
        if (_productKindName !== undefined && _productKindName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _productKindName, 'productKindName');
        }
        if (_legalEntityIds) {
            _legalEntityIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'legalEntityIds');
            });
        }
        if (_sourceId !== undefined && _sourceId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _sourceId, 'sourceId');
        }
        if (_favorite !== undefined && _favorite !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _favorite, 'favorite');
        }
        if (_searchTerm !== undefined && _searchTerm !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _searchTerm, 'searchTerm');
        }
        if (_customOrder !== undefined && _customOrder !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _customOrder, 'customOrder');
        }
        if (_favoriteFirst !== undefined && _favoriteFirst !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _favoriteFirst, 'favoriteFirst');
        }
        if (_subscriptions) {
            _subscriptions.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'subscriptions');
            });
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_orderBy) {
            _orderBy.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'orderBy');
            });
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        if (_ignoredProductKindNames) {
            _ignoredProductKindNames.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'ignoredProductKindNames');
            });
        }
        if (_productKindNames) {
            _productKindNames.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'productKindNames');
            });
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/productsummary/context/arrangements${queryString ? `?${queryString}` : ''}`;
    }
    getProductSummary(requestParameters, observe = 'body', reportProgress = false, options) {
        const _contentLanguage = requestParameters["contentLanguage"];
        const _debitAccount = requestParameters["debitAccount"];
        const _creditAccount = requestParameters["creditAccount"];
        const _maskIndicator = requestParameters["maskIndicator"];
        const _ignoredProductKindNames = requestParameters["ignoredProductKindNames"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_debitAccount !== undefined && _debitAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _debitAccount, 'debitAccount');
        }
        if (_creditAccount !== undefined && _creditAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creditAccount, 'creditAccount');
        }
        if (_maskIndicator !== undefined && _maskIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _maskIndicator, 'maskIndicator');
        }
        if (_ignoredProductKindNames) {
            _ignoredProductKindNames.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'ignoredProductKindNames');
            });
        }
        let headers = this.defaultHeaders;
        if (_contentLanguage !== undefined && _contentLanguage !== null) {
            headers = headers.set('Content-Language', String(_contentLanguage));
        }
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/productsummary`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getProductSummaryUrl(requestParameters) {
        const _contentLanguage = requestParameters["contentLanguage"];
        const _debitAccount = requestParameters["debitAccount"];
        const _creditAccount = requestParameters["creditAccount"];
        const _maskIndicator = requestParameters["maskIndicator"];
        const _ignoredProductKindNames = requestParameters["ignoredProductKindNames"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_debitAccount !== undefined && _debitAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _debitAccount, 'debitAccount');
        }
        if (_creditAccount !== undefined && _creditAccount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _creditAccount, 'creditAccount');
        }
        if (_maskIndicator !== undefined && _maskIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _maskIndicator, 'maskIndicator');
        }
        if (_ignoredProductKindNames) {
            _ignoredProductKindNames.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'ignoredProductKindNames');
            });
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/productsummary${queryString ? `?${queryString}` : ''}`;
    }
    getProductSummaryEntitlementsByLegalEntityId(requestParameters, observe = 'body', reportProgress = false, options) {
        const _legalEntityIds = requestParameters["legalEntityIds"];
        if (_legalEntityIds === null || _legalEntityIds === undefined) {
            throw new Error('Required parameter legalEntityIds was null or undefined when calling getProductSummaryEntitlementsByLegalEntityId.');
        }
        const _arrangementIds = requestParameters["arrangementIds"];
        const _ignoredArrangementIds = requestParameters["ignoredArrangementIds"];
        const _searchTerm = requestParameters["searchTerm"];
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _cursor = requestParameters["cursor"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_arrangementIds) {
            _arrangementIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'arrangementIds');
            });
        }
        if (_ignoredArrangementIds) {
            _ignoredArrangementIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'ignoredArrangementIds');
            });
        }
        if (_legalEntityIds) {
            _legalEntityIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'legalEntityIds');
            });
        }
        if (_searchTerm !== undefined && _searchTerm !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _searchTerm, 'searchTerm');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_orderBy) {
            _orderBy.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'orderBy');
            });
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/productsummary/configuration`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getProductSummaryEntitlementsByLegalEntityIdUrl(requestParameters) {
        const _legalEntityIds = requestParameters["legalEntityIds"];
        if (_legalEntityIds === null || _legalEntityIds === undefined) {
            throw new Error('Required parameter legalEntityIds was null or undefined when calling getProductSummaryEntitlementsByLegalEntityId.');
        }
        const _arrangementIds = requestParameters["arrangementIds"];
        const _ignoredArrangementIds = requestParameters["ignoredArrangementIds"];
        const _searchTerm = requestParameters["searchTerm"];
        const _from = requestParameters["from"];
        const _size = requestParameters["size"];
        const _cursor = requestParameters["cursor"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_arrangementIds) {
            _arrangementIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'arrangementIds');
            });
        }
        if (_ignoredArrangementIds) {
            _ignoredArrangementIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'ignoredArrangementIds');
            });
        }
        if (_legalEntityIds) {
            _legalEntityIds.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'legalEntityIds');
            });
        }
        if (_searchTerm !== undefined && _searchTerm !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _searchTerm, 'searchTerm');
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_orderBy) {
            _orderBy.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'orderBy');
            });
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/productsummary/configuration${queryString ? `?${queryString}` : ''}`;
    }
    postFilterProductSummaries(requestParameters, observe = 'body', reportProgress = false, options) {
        const _productSummaryFilterParams = requestParameters["productSummaryFilterParams"];
        if (_productSummaryFilterParams === null || _productSummaryFilterParams === undefined) {
            throw new Error('Required parameter productSummaryFilterParams was null or undefined when calling postFilterProductSummaries.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/productsummary/configuration/filter`, _productSummaryFilterParams, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postFilterProductSummariesUrl(requestParameters) {
        const _productSummaryFilterParams = requestParameters["productSummaryFilterParams"];
        if (_productSummaryFilterParams === null || _productSummaryFilterParams === undefined) {
            throw new Error('Required parameter productSummaryFilterParams was null or undefined when calling postFilterProductSummaries.');
        }
        return `${this.configuration.basePath}/client-api/v2/productsummary/configuration/filter`;
    }
}
ProductSummaryHttpService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ProductSummaryHttpService, deps: [{ token: i1.HttpClient }, { token: ARRANGEMENT_MANAGER_BASE_PATH, optional: true }, { token: i2.ArrangementManagerConfiguration, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
ProductSummaryHttpService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ProductSummaryHttpService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: ProductSummaryHttpService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [ARRANGEMENT_MANAGER_BASE_PATH]
                }] }, { type: i2.ArrangementManagerConfiguration, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdFN1bW1hcnkuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2FwaS9wcm9kdWN0U3VtbWFyeS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUEyQixlQUFlLENBQUM7QUFDbEYsT0FBTyxFQUFjLFdBQVcsRUFBRSxVQUFVLEVBQ1UsTUFBWSxzQkFBc0IsQ0FBQztBQUN6RixPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBK0IsWUFBWSxDQUFDO0FBYS9FLE9BQU8sRUFBRSw2QkFBNkIsRUFBc0IsTUFBMEIsY0FBYyxDQUFDO0FBQ3JHLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUEwQyxrQkFBa0IsQ0FBQzs7OztBQWdHdkcsTUFBTSxPQUFPLHlCQUF5QjtJQU9sQyxZQUFzQixVQUFzQixFQUFxRCxRQUFnQixFQUFjLGFBQThDO1FBQXZKLGVBQVUsR0FBVixVQUFVLENBQVk7UUFMbEMsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNqQixtQkFBYyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDbkMsa0JBQWEsR0FBRyxJQUFJLCtCQUErQixFQUFFLENBQUM7UUFJekQsSUFBSSxhQUFhLEVBQUU7WUFDZixJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztTQUN0QztRQUNELElBQUksT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsS0FBSyxRQUFRLEVBQUU7WUFDakQsSUFBSSxPQUFPLFFBQVEsS0FBSyxRQUFRLEVBQUU7Z0JBQzlCLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2FBQzVCO1lBQ0QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1NBQzFDO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sSUFBSSxJQUFJLHdCQUF3QixF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ZTtZQUNuRCxPQUFPLEVBQUUsT0FBTztZQUNoQixPQUFPLEVBQUUsT0FBTztZQUNoQixjQUFjLEVBQUUsY0FBYztTQUNqQyxDQUNKLENBQUM7SUFDTixDQUFDO0lBRU0sNkJBQTZCLENBQUMsaUJBQTBEO1FBQzNGLE1BQU0sMkJBQTJCLEdBQUcsaUJBQWlCLENBQUMsNEJBQTRCLENBQUMsQ0FBQztRQUNwRixJQUFJLDJCQUEyQixLQUFLLElBQUksSUFBSSwyQkFBMkIsS0FBSyxTQUFTLEVBQUU7WUFDbkYsTUFBTSxJQUFJLEtBQUssQ0FBQyw4R0FBOEcsQ0FBQyxDQUFDO1NBQ25JO1FBQ0QsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxvREFBb0QsQ0FBQztJQUM5RixDQUFDOzt1SEE5d0JRLHlCQUF5Qiw0Q0FPZ0MsNkJBQTZCOzJIQVB0Rix5QkFBeUIsY0FGeEIsTUFBTTs0RkFFUCx5QkFBeUI7a0JBSHJDLFVBQVU7bUJBQUM7b0JBQ1YsVUFBVSxFQUFFLE1BQU07aUJBQ25COzswQkFRa0QsUUFBUTs7MEJBQUksTUFBTTsyQkFBQyw2QkFBNkI7OzBCQUFxQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBcnJhbmdlbWVudCBNYW5hZ2VyIENsaWVudCBBUElcbiAqIFRoaXMgQVBJIGFsbG93cyB3ZWIgYW5kIG1vYmlsZSB3aWRnZXRzIHRvIGRpc3BsYXkgYW5kIGNoYW5nZSBwcm9kdWN0cyBmb3IgYW4gZW5kLXVzZXJcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMi43LjVcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vZ2l0aHViLmNvbS9CYWNrYmFzZS9iYWNrYmFzZS1vcGVuYXBpLXRvb2xzKS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9CYWNrYmFzZS9iYWNrYmFzZS1vcGVuYXBpLXRvb2xzXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cblxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbnRlcm5hbFNlcnZlckVycm9yIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IE9yZGVyQnlGaWVsZCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm9kdWN0U3VtbWFyeSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm9kdWN0U3VtbWFyeUZpbHRlclBhcmFtcyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm9kdWN0U3VtbWFyeUZpbHRlclJlc3VsdCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm9kdWN0U3VtbWFyeUl0ZW0gfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgU29ydERpcmVjdGlvbiB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5cbmltcG9ydCB7IEFSUkFOR0VNRU5UX01BTkFHRVJfQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBBcnJhbmdlbWVudE1hbmFnZXJDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBHZXRBcnJhbmdlbWVudHNCeUJ1c2luZXNzRnVuY3Rpb25SZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogUHJvdmlkZSBjb21tYSBzZXBhcmF0ZWQgY29udGV4dHMgZm9yIHJldHJpZXZpbmcgYXJyYW5nZW1lbnRzICovXG4gICAgW1wiYnVzaW5lc3NGdW5jdGlvblwiXTogc3RyaW5nO1xuICAgIC8qKiBQcm92aWRlIHRoZSByZXNvdXJjZSBmb3IgcmV0cmlldmluZyBhcnJhbmdlbWVudHMgKi9cbiAgICBbXCJyZXNvdXJjZU5hbWVcIl06IHN0cmluZztcbiAgICAvKiogUHJpdmlsZWdlIGZvciB0aGUgYXJyYW5nZW1lbnRzICovXG4gICAgW1wicHJpdmlsZWdlXCJdOiBzdHJpbmc7XG4gICAgLyoqIERlZmluZXMgdGhlIHRyYW5zbGF0aW9uIG5hdHVyYWwgbGFuZ3VhZ2UgYXMgc3BlY2lmaWVkIGluIElTTyA2MzktMSwgYW5kIHRlcnJpdG9yeSB0d28tbGV0dGVyIGZvcm0gb2YgSVNPIDMxNjYuICovXG4gICAgW1wiY29udGVudExhbmd1YWdlXCJdPzogc3RyaW5nO1xuICAgIC8qKiBSZXRyaWV2ZSBhIGxpc3Qgb2YgYXJyYW5nZW1lbnRzIHdpdGggdGhlIGxhdGVzdCBiYWxhbmNlcyAqL1xuICAgIFtcIndpdGhMYXRlc3RCYWxhbmNlc1wiXT86IGJvb2xlYW47XG4gICAgLyoqIE1hc2tlZC9Vbm1hc2tlZCBjYXJkIG51bWJlciAqL1xuICAgIFtcIm1hc2tJbmRpY2F0b3JcIl0/OiBib29sZWFuO1xuICAgIC8qKiBUeXBlIG9mIGFjY291bnQgKi9cbiAgICBbXCJkZWJpdEFjY291bnRcIl0/OiBib29sZWFuO1xuICAgIC8qKiBUeXBlIG9mIGFjY291bnQgKi9cbiAgICBbXCJjcmVkaXRBY2NvdW50XCJdPzogYm9vbGVhbjtcbiAgICAvKiogUHJpdmlsZWdlIGZvciBleHRlcm5hbCB0cmFuc2ZlcnMgKi9cbiAgICBbXCJleHRlcm5hbFRyYW5zZmVyQWxsb3dlZFwiXT86IGJvb2xlYW47XG4gICAgLyoqIFByb2R1Y3QgS2luZCBOYW1lICovXG4gICAgW1wicHJvZHVjdEtpbmROYW1lXCJdPzogc3RyaW5nO1xuICAgIC8qKiBBIGxpc3Qgb2YgbGVnYWwgZW50aXRpZXMgaWRzIHRvIGZpbHRlciBieSAqL1xuICAgIFtcImxlZ2FsRW50aXR5SWRzXCJdPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlICovXG4gICAgW1wic291cmNlSWRcIl0/OiBzdHJpbmc7XG4gICAgLyoqIEluZGljYXRlcyB3aGV0aGVyIGFuIGFycmFuZ2VtZW50IGlzIGZhdm9yaXRlIGZvciBhIHVzZXIgb3Igbm90ICovXG4gICAgW1wiZmF2b3JpdGVcIl0/OiBib29sZWFuO1xuICAgIC8qKiBGdWxsIHRleHQgc2VhcmNoICovXG4gICAgW1wic2VhcmNoVGVybVwiXT86IHN0cmluZztcbiAgICAvKiogUGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB3ZWF0aGVyIHRoZSByZXR1cm5lZCBsaXN0IHNob3VsZCBiZSBvcmRlcmVkIGJ5IGN1c3RvbSBvcmRlci9ncm91cGluZyAqL1xuICAgIFtcImN1c3RvbU9yZGVyXCJdPzogYm9vbGVhbjtcbiAgICAvKiogUGFyYW1ldGVyIHRoYXQgc2V0cyBmYXZvcml0ZSBhcnJhbmdlbWVudHMgb24gdG9wIHdoZW4gdHJ1ZSAqL1xuICAgIFtcImZhdm9yaXRlRmlyc3RcIl0/OiBib29sZWFuO1xuICAgIC8qKiBBIGxpc3Qgb2Ygc3Vic2NyaXB0aW9uIGlkZW50aWZpZXJzICovXG4gICAgW1wic3Vic2NyaXB0aW9uc1wiXT86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIFBhZ2UgTnVtYmVyLiBTa2lwIG92ZXIgcGFnZXMgb2YgZWxlbWVudHMgYnkgc3BlY2lmeWluZyBhIHN0YXJ0IHZhbHVlIGZvciB0aGUgcXVlcnkgKi9cbiAgICBbXCJmcm9tXCJdPzogbnVtYmVyO1xuICAgIC8qKiBMaW1pdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIG9uIHRoZSByZXNwb25zZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggY3Vyc29yLCB0aGUgdmFsdWUgaXMgYWxsb3dlZCB0byBiZSBhIG5lZ2F0aXZlIG51bWJlciB0byBpbmRpY2F0ZSByZXF1ZXN0aW5nIHJlY29yZHMgdXB3YXJkcyBmcm9tIHRoZSBzdGFydGluZyBwb2ludCBpbmRpY2F0ZWQgYnkgdGhlIGN1cnNvci4gICovXG4gICAgW1wic2l6ZVwiXT86IG51bWJlcjtcbiAgICAvKiogUmVjb3JkIFVVSUQuIEFzIGFuIGFsdGVybmF0aXZlIGZvciBzcGVjaWZ5aW5nIFxcJiMzOTtmcm9tXFwmIzM5OyB0aGlzIGFsbG93cyB0byBwb2ludCB0byB0aGUgcmVjb3JkIHRvIHN0YXJ0IHRoZSBzZWxlY3Rpb24gZnJvbS4gICovXG4gICAgW1wiY3Vyc29yXCJdPzogc3RyaW5nO1xuICAgIC8qKiBPcmRlciBieSBmaWVsZCAqL1xuICAgIFtcIm9yZGVyQnlcIl0/OiBBcnJheTxPcmRlckJ5RmllbGQ+O1xuICAgIC8qKiBEaXJlY3Rpb24gKi9cbiAgICBbXCJkaXJlY3Rpb25cIl0/OiBTb3J0RGlyZWN0aW9uO1xuICAgIC8qKiBQcm9kdWN0IGtpbmQgbmFtZXMgdG8gYmUgaWdub3JlZCAqL1xuICAgIFtcImlnbm9yZWRQcm9kdWN0S2luZE5hbWVzXCJdPzogQXJyYXk8c3RyaW5nPjtcbiAgICAvKiogUHJvZHVjdCBraW5kIG5hbWVzIHRvIGJlIGNvbnNpZGVyZWQgaW4gdGhlIHF1ZXJ5ICovXG4gICAgW1wicHJvZHVjdEtpbmROYW1lc1wiXT86IEFycmF5PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0UHJvZHVjdFN1bW1hcnlSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogRGVmaW5lcyB0aGUgdHJhbnNsYXRpb24gbmF0dXJhbCBsYW5ndWFnZSBhcyBzcGVjaWZpZWQgaW4gSVNPIDYzOS0xLCBhbmQgdGVycml0b3J5IHR3by1sZXR0ZXIgZm9ybSBvZiBJU08gMzE2Ni4gKi9cbiAgICBbXCJjb250ZW50TGFuZ3VhZ2VcIl0/OiBzdHJpbmc7XG4gICAgLyoqIFR5cGUgb2YgYWNjb3VudCAqL1xuICAgIFtcImRlYml0QWNjb3VudFwiXT86IGJvb2xlYW47XG4gICAgLyoqIFR5cGUgb2YgYWNjb3VudCAqL1xuICAgIFtcImNyZWRpdEFjY291bnRcIl0/OiBib29sZWFuO1xuICAgIC8qKiBNYXNrZWQvVW5tYXNrZWQgY2FyZCBudW1iZXIgKi9cbiAgICBbXCJtYXNrSW5kaWNhdG9yXCJdPzogYm9vbGVhbjtcbiAgICAvKiogUHJvZHVjdCBraW5kIG5hbWVzIHRvIGJlIGlnbm9yZWQgKi9cbiAgICBbXCJpZ25vcmVkUHJvZHVjdEtpbmROYW1lc1wiXT86IEFycmF5PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0UHJvZHVjdFN1bW1hcnlFbnRpdGxlbWVudHNCeUxlZ2FsRW50aXR5SWRSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogbGVnYWwgZW50aXR5IGlkcyAqL1xuICAgIFtcImxlZ2FsRW50aXR5SWRzXCJdOiBBcnJheTxzdHJpbmc+O1xuICAgIC8qKiBhcnJhbmdlbWVudCBpZHMgKi9cbiAgICBbXCJhcnJhbmdlbWVudElkc1wiXT86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIE5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZSAqL1xuICAgIFtcImlnbm9yZWRBcnJhbmdlbWVudElkc1wiXT86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIEZ1bGwgdGV4dCBzZWFyY2ggKi9cbiAgICBbXCJzZWFyY2hUZXJtXCJdPzogc3RyaW5nO1xuICAgIC8qKiBQYWdlIE51bWJlci4gU2tpcCBvdmVyIHBhZ2VzIG9mIGVsZW1lbnRzIGJ5IHNwZWNpZnlpbmcgYSBzdGFydCB2YWx1ZSBmb3IgdGhlIHF1ZXJ5ICovXG4gICAgW1wiZnJvbVwiXT86IG51bWJlcjtcbiAgICAvKiogTGltaXQgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvbiB0aGUgcmVzcG9uc2UuIFdoZW4gdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIGN1cnNvciwgdGhlIHZhbHVlIGlzIGFsbG93ZWQgdG8gYmUgYSBuZWdhdGl2ZSBudW1iZXIgdG8gaW5kaWNhdGUgcmVxdWVzdGluZyByZWNvcmRzIHVwd2FyZHMgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQgaW5kaWNhdGVkIGJ5IHRoZSBjdXJzb3IuICAqL1xuICAgIFtcInNpemVcIl0/OiBudW1iZXI7XG4gICAgLyoqIFJlY29yZCBVVUlELiBBcyBhbiBhbHRlcm5hdGl2ZSBmb3Igc3BlY2lmeWluZyBcXCYjMzk7ZnJvbVxcJiMzOTsgdGhpcyBhbGxvd3MgdG8gcG9pbnQgdG8gdGhlIHJlY29yZCB0byBzdGFydCB0aGUgc2VsZWN0aW9uIGZyb20uICAqL1xuICAgIFtcImN1cnNvclwiXT86IHN0cmluZztcbiAgICAvKiogT3JkZXIgYnkgZmllbGQgKi9cbiAgICBbXCJvcmRlckJ5XCJdPzogQXJyYXk8T3JkZXJCeUZpZWxkPjtcbiAgICAvKiogRGlyZWN0aW9uICovXG4gICAgW1wiZGlyZWN0aW9uXCJdPzogU29ydERpcmVjdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3N0RmlsdGVyUHJvZHVjdFN1bW1hcmllc1JlcXVlc3RQYXJhbXMge1xuICAgIFtcInByb2R1Y3RTdW1tYXJ5RmlsdGVyUGFyYW1zXCJdOiBQcm9kdWN0U3VtbWFyeUZpbHRlclBhcmFtcztcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBQcm9kdWN0U3VtbWFyeUh0dHBTZXJ2aWNlIHtcblxuICAgIHByb3RlY3RlZCBiYXNlUGF0aCA9ICcnO1xuICAgIHB1YmxpYyBkZWZhdWx0SGVhZGVycyA9IG5ldyBIdHRwSGVhZGVycygpO1xuICAgIHB1YmxpYyBjb25maWd1cmF0aW9uID0gbmV3IEFycmFuZ2VtZW50TWFuYWdlckNvbmZpZ3VyYXRpb24oKTtcbiAgICBwdWJsaWMgZW5jb2RlcjogSHR0cFBhcmFtZXRlckNvZGVjO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQVJSQU5HRU1FTlRfTUFOQUdFUl9CQVNFX1BBVEgpIGJhc2VQYXRoOiBzdHJpbmcsIEBPcHRpb25hbCgpIGNvbmZpZ3VyYXRpb246IEFycmFuZ2VtZW50TWFuYWdlckNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGJhc2VQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGJhc2VQYXRoID0gdGhpcy5iYXNlUGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5jb2RlciA9IHRoaXMuY29uZmlndXJhdGlvbi5lbmNvZGVyIHx8IG5ldyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMoKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgYWRkVG9IdHRwUGFyYW1zKGh0dHBQYXJhbXM6IEh0dHBQYXJhbXMsIHZhbHVlOiBhbnksIGtleT86IHN0cmluZyk6IEh0dHBQYXJhbXMge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtczogSHR0cFBhcmFtcywgdmFsdWU/OiBhbnksIGtleT86IHN0cmluZyk6IEh0dHBQYXJhbXMge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAodmFsdWUgYXMgYW55W10pLmZvckVhY2goIGVsZW0gPT4gaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIGVsZW0sIGtleSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaHR0cFBhcmFtcyA9IGh0dHBQYXJhbXMuYXBwZW5kKGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICh2YWx1ZSBhcyBEYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIERhdGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCggayA9PiBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoXG4gICAgICAgICAgICAgICAgICAgIGh0dHBQYXJhbXMsIHZhbHVlW2tdLCBrZXkgIT0gbnVsbCA/IGAke2tleX0uJHtrfWAgOiBrKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwia2V5IG1heSBub3QgYmUgbnVsbCBpZiB2YWx1ZSBpcyBub3Qgb2JqZWN0IG9yIGFycmF5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhIGxpc3Qgb2YgYXJyYW5nZW1lbnRzIGFjY29yZGluZyB0byBhIGdpdmVuIGJ1c2luZXNzIGZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRBcnJhbmdlbWVudHNCeUJ1c2luZXNzRnVuY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFycmFuZ2VtZW50c0J5QnVzaW5lc3NGdW5jdGlvblJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8QXJyYXk8UHJvZHVjdFN1bW1hcnlJdGVtPj47XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGlzdCBvZiBhcnJhbmdlbWVudHMgYWNjb3JkaW5nIHRvIGEgZ2l2ZW4gYnVzaW5lc3MgZnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEFycmFuZ2VtZW50c0J5QnVzaW5lc3NGdW5jdGlvbihyZXF1ZXN0UGFyYW1ldGVyczogR2V0QXJyYW5nZW1lbnRzQnlCdXNpbmVzc0Z1bmN0aW9uUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PFByb2R1Y3RTdW1tYXJ5SXRlbT4+PjtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIGFycmFuZ2VtZW50cyBhY2NvcmRpbmcgdG8gYSBnaXZlbiBidXNpbmVzcyBmdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXJyYW5nZW1lbnRzQnlCdXNpbmVzc0Z1bmN0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBcnJhbmdlbWVudHNCeUJ1c2luZXNzRnVuY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFycmF5PFByb2R1Y3RTdW1tYXJ5SXRlbT4+PjtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIGFycmFuZ2VtZW50cyBhY2NvcmRpbmcgdG8gYSBnaXZlbiBidXNpbmVzcyBmdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QXJyYW5nZW1lbnRzQnlCdXNpbmVzc0Z1bmN0aW9uKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBcnJhbmdlbWVudHNCeUJ1c2luZXNzRnVuY3Rpb25SZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfYnVzaW5lc3NGdW5jdGlvbiA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYnVzaW5lc3NGdW5jdGlvblwiXTtcbiAgICAgICAgaWYgKF9idXNpbmVzc0Z1bmN0aW9uID09PSBudWxsIHx8IF9idXNpbmVzc0Z1bmN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJ1c2luZXNzRnVuY3Rpb24gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRBcnJhbmdlbWVudHNCeUJ1c2luZXNzRnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX3Jlc291cmNlTmFtZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicmVzb3VyY2VOYW1lXCJdO1xuICAgICAgICBpZiAoX3Jlc291cmNlTmFtZSA9PT0gbnVsbCB8fCBfcmVzb3VyY2VOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlc291cmNlTmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEFycmFuZ2VtZW50c0J5QnVzaW5lc3NGdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfcHJpdmlsZWdlID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJwcml2aWxlZ2VcIl07XG4gICAgICAgIGlmIChfcHJpdmlsZWdlID09PSBudWxsIHx8IF9wcml2aWxlZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJpdmlsZWdlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QXJyYW5nZW1lbnRzQnlCdXNpbmVzc0Z1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9jb250ZW50TGFuZ3VhZ2UgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImNvbnRlbnRMYW5ndWFnZVwiXTtcbiAgICAgICAgY29uc3QgX3dpdGhMYXRlc3RCYWxhbmNlcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wid2l0aExhdGVzdEJhbGFuY2VzXCJdO1xuICAgICAgICBjb25zdCBfbWFza0luZGljYXRvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibWFza0luZGljYXRvclwiXTtcbiAgICAgICAgY29uc3QgX2RlYml0QWNjb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZGViaXRBY2NvdW50XCJdO1xuICAgICAgICBjb25zdCBfY3JlZGl0QWNjb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3JlZGl0QWNjb3VudFwiXTtcbiAgICAgICAgY29uc3QgX2V4dGVybmFsVHJhbnNmZXJBbGxvd2VkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJleHRlcm5hbFRyYW5zZmVyQWxsb3dlZFwiXTtcbiAgICAgICAgY29uc3QgX3Byb2R1Y3RLaW5kTmFtZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicHJvZHVjdEtpbmROYW1lXCJdO1xuICAgICAgICBjb25zdCBfbGVnYWxFbnRpdHlJZHMgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImxlZ2FsRW50aXR5SWRzXCJdO1xuICAgICAgICBjb25zdCBfc291cmNlSWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNvdXJjZUlkXCJdO1xuICAgICAgICBjb25zdCBfZmF2b3JpdGUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZhdm9yaXRlXCJdO1xuICAgICAgICBjb25zdCBfc2VhcmNoVGVybSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VhcmNoVGVybVwiXTtcbiAgICAgICAgY29uc3QgX2N1c3RvbU9yZGVyID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXN0b21PcmRlclwiXTtcbiAgICAgICAgY29uc3QgX2Zhdm9yaXRlRmlyc3QgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZhdm9yaXRlRmlyc3RcIl07XG4gICAgICAgIGNvbnN0IF9zdWJzY3JpcHRpb25zID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzdWJzY3JpcHRpb25zXCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG4gICAgICAgIGNvbnN0IF9jdXJzb3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1cnNvclwiXTtcbiAgICAgICAgY29uc3QgX29yZGVyQnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcIm9yZGVyQnlcIl07XG4gICAgICAgIGNvbnN0IF9kaXJlY3Rpb24gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImRpcmVjdGlvblwiXTtcbiAgICAgICAgY29uc3QgX2lnbm9yZWRQcm9kdWN0S2luZE5hbWVzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJpZ25vcmVkUHJvZHVjdEtpbmROYW1lc1wiXTtcbiAgICAgICAgY29uc3QgX3Byb2R1Y3RLaW5kTmFtZXMgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInByb2R1Y3RLaW5kTmFtZXNcIl07XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF93aXRoTGF0ZXN0QmFsYW5jZXMgIT09IHVuZGVmaW5lZCAmJiBfd2l0aExhdGVzdEJhbGFuY2VzICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fd2l0aExhdGVzdEJhbGFuY2VzLCAnd2l0aExhdGVzdEJhbGFuY2VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9tYXNrSW5kaWNhdG9yICE9PSB1bmRlZmluZWQgJiYgX21hc2tJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9tYXNrSW5kaWNhdG9yLCAnbWFza0luZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZGViaXRBY2NvdW50ICE9PSB1bmRlZmluZWQgJiYgX2RlYml0QWNjb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2RlYml0QWNjb3VudCwgJ2RlYml0QWNjb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3JlZGl0QWNjb3VudCAhPT0gdW5kZWZpbmVkICYmIF9jcmVkaXRBY2NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3JlZGl0QWNjb3VudCwgJ2NyZWRpdEFjY291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2J1c2luZXNzRnVuY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfYnVzaW5lc3NGdW5jdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2J1c2luZXNzRnVuY3Rpb24sICdidXNpbmVzc0Z1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9yZXNvdXJjZU5hbWUgIT09IHVuZGVmaW5lZCAmJiBfcmVzb3VyY2VOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcmVzb3VyY2VOYW1lLCAncmVzb3VyY2VOYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9wcml2aWxlZ2UgIT09IHVuZGVmaW5lZCAmJiBfcHJpdmlsZWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcHJpdmlsZWdlLCAncHJpdmlsZWdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9leHRlcm5hbFRyYW5zZmVyQWxsb3dlZCAhPT0gdW5kZWZpbmVkICYmIF9leHRlcm5hbFRyYW5zZmVyQWxsb3dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2V4dGVybmFsVHJhbnNmZXJBbGxvd2VkLCAnZXh0ZXJuYWxUcmFuc2ZlckFsbG93ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3Byb2R1Y3RLaW5kTmFtZSAhPT0gdW5kZWZpbmVkICYmIF9wcm9kdWN0S2luZE5hbWUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9wcm9kdWN0S2luZE5hbWUsICdwcm9kdWN0S2luZE5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2xlZ2FsRW50aXR5SWRzKSB7XG4gICAgICAgICAgICBfbGVnYWxFbnRpdHlJZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2xlZ2FsRW50aXR5SWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChfc291cmNlSWQgIT09IHVuZGVmaW5lZCAmJiBfc291cmNlSWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zb3VyY2VJZCwgJ3NvdXJjZUlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mYXZvcml0ZSAhPT0gdW5kZWZpbmVkICYmIF9mYXZvcml0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zhdm9yaXRlLCAnZmF2b3JpdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3NlYXJjaFRlcm0gIT09IHVuZGVmaW5lZCAmJiBfc2VhcmNoVGVybSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NlYXJjaFRlcm0sICdzZWFyY2hUZXJtJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXN0b21PcmRlciAhPT0gdW5kZWZpbmVkICYmIF9jdXN0b21PcmRlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1c3RvbU9yZGVyLCAnY3VzdG9tT3JkZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zhdm9yaXRlRmlyc3QgIT09IHVuZGVmaW5lZCAmJiBfZmF2b3JpdGVGaXJzdCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zhdm9yaXRlRmlyc3QsICdmYXZvcml0ZUZpcnN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBfc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3Vic2NyaXB0aW9ucycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb3JkZXJCeSkge1xuICAgICAgICAgICAgX29yZGVyQnkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ29yZGVyQnknKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfZGlyZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGlyZWN0aW9uLCAnZGlyZWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pZ25vcmVkUHJvZHVjdEtpbmROYW1lcykge1xuICAgICAgICAgICAgX2lnbm9yZWRQcm9kdWN0S2luZE5hbWVzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpZ25vcmVkUHJvZHVjdEtpbmROYW1lcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3Byb2R1Y3RLaW5kTmFtZXMpIHtcbiAgICAgICAgICAgIF9wcm9kdWN0S2luZE5hbWVzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm9kdWN0S2luZE5hbWVzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAoX2NvbnRlbnRMYW5ndWFnZSAhPT0gdW5kZWZpbmVkICYmIF9jb250ZW50TGFuZ3VhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1MYW5ndWFnZScsIFN0cmluZyhfY29udGVudExhbmd1YWdlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXJyYXk8UHJvZHVjdFN1bW1hcnlJdGVtPj4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL3Byb2R1Y3RzdW1tYXJ5L2NvbnRleHQvYXJyYW5nZW1lbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFycmFuZ2VtZW50c0J5QnVzaW5lc3NGdW5jdGlvblVybChyZXF1ZXN0UGFyYW1ldGVyczogR2V0QXJyYW5nZW1lbnRzQnlCdXNpbmVzc0Z1bmN0aW9uUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9idXNpbmVzc0Z1bmN0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJidXNpbmVzc0Z1bmN0aW9uXCJdO1xuICAgICAgICBpZiAoX2J1c2luZXNzRnVuY3Rpb24gPT09IG51bGwgfHwgX2J1c2luZXNzRnVuY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYnVzaW5lc3NGdW5jdGlvbiB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEFycmFuZ2VtZW50c0J5QnVzaW5lc3NGdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfcmVzb3VyY2VOYW1lID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJyZXNvdXJjZU5hbWVcIl07XG4gICAgICAgIGlmIChfcmVzb3VyY2VOYW1lID09PSBudWxsIHx8IF9yZXNvdXJjZU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVzb3VyY2VOYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QXJyYW5nZW1lbnRzQnlCdXNpbmVzc0Z1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9wcml2aWxlZ2UgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInByaXZpbGVnZVwiXTtcbiAgICAgICAgaWYgKF9wcml2aWxlZ2UgPT09IG51bGwgfHwgX3ByaXZpbGVnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcml2aWxlZ2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRBcnJhbmdlbWVudHNCeUJ1c2luZXNzRnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2NvbnRlbnRMYW5ndWFnZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY29udGVudExhbmd1YWdlXCJdO1xuICAgICAgICBjb25zdCBfd2l0aExhdGVzdEJhbGFuY2VzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJ3aXRoTGF0ZXN0QmFsYW5jZXNcIl07XG4gICAgICAgIGNvbnN0IF9tYXNrSW5kaWNhdG9yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJtYXNrSW5kaWNhdG9yXCJdO1xuICAgICAgICBjb25zdCBfZGViaXRBY2NvdW50ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkZWJpdEFjY291bnRcIl07XG4gICAgICAgIGNvbnN0IF9jcmVkaXRBY2NvdW50ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjcmVkaXRBY2NvdW50XCJdO1xuICAgICAgICBjb25zdCBfZXh0ZXJuYWxUcmFuc2ZlckFsbG93ZWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImV4dGVybmFsVHJhbnNmZXJBbGxvd2VkXCJdO1xuICAgICAgICBjb25zdCBfcHJvZHVjdEtpbmROYW1lID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJwcm9kdWN0S2luZE5hbWVcIl07XG4gICAgICAgIGNvbnN0IF9sZWdhbEVudGl0eUlkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibGVnYWxFbnRpdHlJZHNcIl07XG4gICAgICAgIGNvbnN0IF9zb3VyY2VJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic291cmNlSWRcIl07XG4gICAgICAgIGNvbnN0IF9mYXZvcml0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZmF2b3JpdGVcIl07XG4gICAgICAgIGNvbnN0IF9zZWFyY2hUZXJtID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzZWFyY2hUZXJtXCJdO1xuICAgICAgICBjb25zdCBfY3VzdG9tT3JkZXIgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1c3RvbU9yZGVyXCJdO1xuICAgICAgICBjb25zdCBfZmF2b3JpdGVGaXJzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZmF2b3JpdGVGaXJzdFwiXTtcbiAgICAgICAgY29uc3QgX3N1YnNjcmlwdGlvbnMgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInN1YnNjcmlwdGlvbnNcIl07XG4gICAgICAgIGNvbnN0IF9mcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJmcm9tXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfb3JkZXJCeSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wib3JkZXJCeVwiXTtcbiAgICAgICAgY29uc3QgX2RpcmVjdGlvbiA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZGlyZWN0aW9uXCJdO1xuICAgICAgICBjb25zdCBfaWdub3JlZFByb2R1Y3RLaW5kTmFtZXMgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlnbm9yZWRQcm9kdWN0S2luZE5hbWVzXCJdO1xuICAgICAgICBjb25zdCBfcHJvZHVjdEtpbmROYW1lcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicHJvZHVjdEtpbmROYW1lc1wiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF93aXRoTGF0ZXN0QmFsYW5jZXMgIT09IHVuZGVmaW5lZCAmJiBfd2l0aExhdGVzdEJhbGFuY2VzICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fd2l0aExhdGVzdEJhbGFuY2VzLCAnd2l0aExhdGVzdEJhbGFuY2VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9tYXNrSW5kaWNhdG9yICE9PSB1bmRlZmluZWQgJiYgX21hc2tJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9tYXNrSW5kaWNhdG9yLCAnbWFza0luZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZGViaXRBY2NvdW50ICE9PSB1bmRlZmluZWQgJiYgX2RlYml0QWNjb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2RlYml0QWNjb3VudCwgJ2RlYml0QWNjb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3JlZGl0QWNjb3VudCAhPT0gdW5kZWZpbmVkICYmIF9jcmVkaXRBY2NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3JlZGl0QWNjb3VudCwgJ2NyZWRpdEFjY291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2J1c2luZXNzRnVuY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfYnVzaW5lc3NGdW5jdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2J1c2luZXNzRnVuY3Rpb24sICdidXNpbmVzc0Z1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9yZXNvdXJjZU5hbWUgIT09IHVuZGVmaW5lZCAmJiBfcmVzb3VyY2VOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcmVzb3VyY2VOYW1lLCAncmVzb3VyY2VOYW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9wcml2aWxlZ2UgIT09IHVuZGVmaW5lZCAmJiBfcHJpdmlsZWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcHJpdmlsZWdlLCAncHJpdmlsZWdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9leHRlcm5hbFRyYW5zZmVyQWxsb3dlZCAhPT0gdW5kZWZpbmVkICYmIF9leHRlcm5hbFRyYW5zZmVyQWxsb3dlZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2V4dGVybmFsVHJhbnNmZXJBbGxvd2VkLCAnZXh0ZXJuYWxUcmFuc2ZlckFsbG93ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3Byb2R1Y3RLaW5kTmFtZSAhPT0gdW5kZWZpbmVkICYmIF9wcm9kdWN0S2luZE5hbWUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9wcm9kdWN0S2luZE5hbWUsICdwcm9kdWN0S2luZE5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2xlZ2FsRW50aXR5SWRzKSB7XG4gICAgICAgICAgICBfbGVnYWxFbnRpdHlJZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2xlZ2FsRW50aXR5SWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChfc291cmNlSWQgIT09IHVuZGVmaW5lZCAmJiBfc291cmNlSWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zb3VyY2VJZCwgJ3NvdXJjZUlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mYXZvcml0ZSAhPT0gdW5kZWZpbmVkICYmIF9mYXZvcml0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zhdm9yaXRlLCAnZmF2b3JpdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3NlYXJjaFRlcm0gIT09IHVuZGVmaW5lZCAmJiBfc2VhcmNoVGVybSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NlYXJjaFRlcm0sICdzZWFyY2hUZXJtJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXN0b21PcmRlciAhPT0gdW5kZWZpbmVkICYmIF9jdXN0b21PcmRlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1c3RvbU9yZGVyLCAnY3VzdG9tT3JkZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zhdm9yaXRlRmlyc3QgIT09IHVuZGVmaW5lZCAmJiBfZmF2b3JpdGVGaXJzdCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zhdm9yaXRlRmlyc3QsICdmYXZvcml0ZUZpcnN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBfc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3Vic2NyaXB0aW9ucycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb3JkZXJCeSkge1xuICAgICAgICAgICAgX29yZGVyQnkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ29yZGVyQnknKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfZGlyZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGlyZWN0aW9uLCAnZGlyZWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pZ25vcmVkUHJvZHVjdEtpbmROYW1lcykge1xuICAgICAgICAgICAgX2lnbm9yZWRQcm9kdWN0S2luZE5hbWVzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpZ25vcmVkUHJvZHVjdEtpbmROYW1lcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3Byb2R1Y3RLaW5kTmFtZXMpIHtcbiAgICAgICAgICAgIF9wcm9kdWN0S2luZE5hbWVzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm9kdWN0S2luZE5hbWVzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvcHJvZHVjdHN1bW1hcnkvY29udGV4dC9hcnJhbmdlbWVudHMke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiAnJ31gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgcHJvZHVjdHMgc3VtbWFyaWVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQcm9kdWN0U3VtbWFyeShyZXF1ZXN0UGFyYW1ldGVyczogR2V0UHJvZHVjdFN1bW1hcnlSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPFByb2R1Y3RTdW1tYXJ5PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBsaXN0IG9mIHByb2R1Y3RzIHN1bW1hcmllcy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHJvZHVjdFN1bW1hcnkocmVxdWVzdFBhcmFtZXRlcnM6IEdldFByb2R1Y3RTdW1tYXJ5UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb2R1Y3RTdW1tYXJ5Pj47XG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgbGlzdCBvZiBwcm9kdWN0cyBzdW1tYXJpZXMuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFByb2R1Y3RTdW1tYXJ5KHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRQcm9kdWN0U3VtbWFyeVJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJvZHVjdFN1bW1hcnk+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBsaXN0IG9mIHByb2R1Y3RzIHN1bW1hcmllcy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHJvZHVjdFN1bW1hcnkocmVxdWVzdFBhcmFtZXRlcnM6IEdldFByb2R1Y3RTdW1tYXJ5UmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2NvbnRlbnRMYW5ndWFnZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY29udGVudExhbmd1YWdlXCJdO1xuICAgICAgICBjb25zdCBfZGViaXRBY2NvdW50ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkZWJpdEFjY291bnRcIl07XG4gICAgICAgIGNvbnN0IF9jcmVkaXRBY2NvdW50ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjcmVkaXRBY2NvdW50XCJdO1xuICAgICAgICBjb25zdCBfbWFza0luZGljYXRvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibWFza0luZGljYXRvclwiXTtcbiAgICAgICAgY29uc3QgX2lnbm9yZWRQcm9kdWN0S2luZE5hbWVzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJpZ25vcmVkUHJvZHVjdEtpbmROYW1lc1wiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2RlYml0QWNjb3VudCAhPT0gdW5kZWZpbmVkICYmIF9kZWJpdEFjY291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9kZWJpdEFjY291bnQsICdkZWJpdEFjY291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2NyZWRpdEFjY291bnQgIT09IHVuZGVmaW5lZCAmJiBfY3JlZGl0QWNjb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2NyZWRpdEFjY291bnQsICdjcmVkaXRBY2NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9tYXNrSW5kaWNhdG9yICE9PSB1bmRlZmluZWQgJiYgX21hc2tJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9tYXNrSW5kaWNhdG9yLCAnbWFza0luZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfaWdub3JlZFByb2R1Y3RLaW5kTmFtZXMpIHtcbiAgICAgICAgICAgIF9pZ25vcmVkUHJvZHVjdEtpbmROYW1lcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWdub3JlZFByb2R1Y3RLaW5kTmFtZXMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChfY29udGVudExhbmd1YWdlICE9PSB1bmRlZmluZWQgJiYgX2NvbnRlbnRMYW5ndWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LUxhbmd1YWdlJywgU3RyaW5nKF9jb250ZW50TGFuZ3VhZ2UpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQcm9kdWN0U3VtbWFyeT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL3Byb2R1Y3RzdW1tYXJ5YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFByb2R1Y3RTdW1tYXJ5VXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRQcm9kdWN0U3VtbWFyeVJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfY29udGVudExhbmd1YWdlID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjb250ZW50TGFuZ3VhZ2VcIl07XG4gICAgICAgIGNvbnN0IF9kZWJpdEFjY291bnQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImRlYml0QWNjb3VudFwiXTtcbiAgICAgICAgY29uc3QgX2NyZWRpdEFjY291bnQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImNyZWRpdEFjY291bnRcIl07XG4gICAgICAgIGNvbnN0IF9tYXNrSW5kaWNhdG9yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJtYXNrSW5kaWNhdG9yXCJdO1xuICAgICAgICBjb25zdCBfaWdub3JlZFByb2R1Y3RLaW5kTmFtZXMgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImlnbm9yZWRQcm9kdWN0S2luZE5hbWVzXCJdO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2RlYml0QWNjb3VudCAhPT0gdW5kZWZpbmVkICYmIF9kZWJpdEFjY291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9kZWJpdEFjY291bnQsICdkZWJpdEFjY291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2NyZWRpdEFjY291bnQgIT09IHVuZGVmaW5lZCAmJiBfY3JlZGl0QWNjb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2NyZWRpdEFjY291bnQsICdjcmVkaXRBY2NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9tYXNrSW5kaWNhdG9yICE9PSB1bmRlZmluZWQgJiYgX21hc2tJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9tYXNrSW5kaWNhdG9yLCAnbWFza0luZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfaWdub3JlZFByb2R1Y3RLaW5kTmFtZXMpIHtcbiAgICAgICAgICAgIF9pZ25vcmVkUHJvZHVjdEtpbmROYW1lcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWdub3JlZFByb2R1Y3RLaW5kTmFtZXMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtZXRlcnMudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9wcm9kdWN0c3VtbWFyeSR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgbGlzdCBvZiBwcm9kdWN0cyBzdW1tYXJpZXMsIGZsYXQgc3RydWN0dXJlLiBVc2UgUE9TVCAvY2xpZW50LWFwaS92Mi9wcm9kdWN0c3VtbWFyeS9jb25maWd1cmF0aW9uL2ZpbHRlciBpbnN0ZWFkLiBBbHdheXMgcmV0dXJucyBudWxsIGZvciB0aGUgdXNlclByZWZlcmVuY2VzIGZpZWxkLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHJvZHVjdFN1bW1hcnlFbnRpdGxlbWVudHNCeUxlZ2FsRW50aXR5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldFByb2R1Y3RTdW1tYXJ5RW50aXRsZW1lbnRzQnlMZWdhbEVudGl0eUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBcnJheTxQcm9kdWN0U3VtbWFyeUl0ZW0+PjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBsaXN0IG9mIHByb2R1Y3RzIHN1bW1hcmllcywgZmxhdCBzdHJ1Y3R1cmUuIFVzZSBQT1NUIC9jbGllbnQtYXBpL3YyL3Byb2R1Y3RzdW1tYXJ5L2NvbmZpZ3VyYXRpb24vZmlsdGVyIGluc3RlYWQuIEFsd2F5cyByZXR1cm5zIG51bGwgZm9yIHRoZSB1c2VyUHJlZmVyZW5jZXMgZmllbGQuIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQcm9kdWN0U3VtbWFyeUVudGl0bGVtZW50c0J5TGVnYWxFbnRpdHlJZChyZXF1ZXN0UGFyYW1ldGVyczogR2V0UHJvZHVjdFN1bW1hcnlFbnRpdGxlbWVudHNCeUxlZ2FsRW50aXR5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXJyYXk8UHJvZHVjdFN1bW1hcnlJdGVtPj4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgcHJvZHVjdHMgc3VtbWFyaWVzLCBmbGF0IHN0cnVjdHVyZS4gVXNlIFBPU1QgL2NsaWVudC1hcGkvdjIvcHJvZHVjdHN1bW1hcnkvY29uZmlndXJhdGlvbi9maWx0ZXIgaW5zdGVhZC4gQWx3YXlzIHJldHVybnMgbnVsbCBmb3IgdGhlIHVzZXJQcmVmZXJlbmNlcyBmaWVsZC4gXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIGdldFByb2R1Y3RTdW1tYXJ5RW50aXRsZW1lbnRzQnlMZWdhbEVudGl0eUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRQcm9kdWN0U3VtbWFyeUVudGl0bGVtZW50c0J5TGVnYWxFbnRpdHlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXJyYXk8UHJvZHVjdFN1bW1hcnlJdGVtPj4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgcHJvZHVjdHMgc3VtbWFyaWVzLCBmbGF0IHN0cnVjdHVyZS4gVXNlIFBPU1QgL2NsaWVudC1hcGkvdjIvcHJvZHVjdHN1bW1hcnkvY29uZmlndXJhdGlvbi9maWx0ZXIgaW5zdGVhZC4gQWx3YXlzIHJldHVybnMgbnVsbCBmb3IgdGhlIHVzZXJQcmVmZXJlbmNlcyBmaWVsZC4gXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIGdldFByb2R1Y3RTdW1tYXJ5RW50aXRsZW1lbnRzQnlMZWdhbEVudGl0eUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRQcm9kdWN0U3VtbWFyeUVudGl0bGVtZW50c0J5TGVnYWxFbnRpdHlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9sZWdhbEVudGl0eUlkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibGVnYWxFbnRpdHlJZHNcIl07XG4gICAgICAgIGlmIChfbGVnYWxFbnRpdHlJZHMgPT09IG51bGwgfHwgX2xlZ2FsRW50aXR5SWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGxlZ2FsRW50aXR5SWRzIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHJvZHVjdFN1bW1hcnlFbnRpdGxlbWVudHNCeUxlZ2FsRW50aXR5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2FycmFuZ2VtZW50SWRzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhcnJhbmdlbWVudElkc1wiXTtcbiAgICAgICAgY29uc3QgX2lnbm9yZWRBcnJhbmdlbWVudElkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWdub3JlZEFycmFuZ2VtZW50SWRzXCJdO1xuICAgICAgICBjb25zdCBfc2VhcmNoVGVybSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VhcmNoVGVybVwiXTtcbiAgICAgICAgY29uc3QgX2Zyb20gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZyb21cIl07XG4gICAgICAgIGNvbnN0IF9zaXplID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzaXplXCJdO1xuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9vcmRlckJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvcmRlckJ5XCJdO1xuICAgICAgICBjb25zdCBfZGlyZWN0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkaXJlY3Rpb25cIl07XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9hcnJhbmdlbWVudElkcykge1xuICAgICAgICAgICAgX2FycmFuZ2VtZW50SWRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhcnJhbmdlbWVudElkcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2lnbm9yZWRBcnJhbmdlbWVudElkcykge1xuICAgICAgICAgICAgX2lnbm9yZWRBcnJhbmdlbWVudElkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaWdub3JlZEFycmFuZ2VtZW50SWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChfbGVnYWxFbnRpdHlJZHMpIHtcbiAgICAgICAgICAgIF9sZWdhbEVudGl0eUlkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbGVnYWxFbnRpdHlJZHMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zZWFyY2hUZXJtICE9PSB1bmRlZmluZWQgJiYgX3NlYXJjaFRlcm0gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zZWFyY2hUZXJtLCAnc2VhcmNoVGVybScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZnJvbSAhPT0gdW5kZWZpbmVkICYmIF9mcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZnJvbSwgJ2Zyb20nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3NpemUgIT09IHVuZGVmaW5lZCAmJiBfc2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X3NpemUsICdzaXplJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9vcmRlckJ5KSB7XG4gICAgICAgICAgICBfb3JkZXJCeS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnb3JkZXJCeScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2RpcmVjdGlvbiAhPT0gdW5kZWZpbmVkICYmIF9kaXJlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9kaXJlY3Rpb24sICdkaXJlY3Rpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXJyYXk8UHJvZHVjdFN1bW1hcnlJdGVtPj4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL3Byb2R1Y3RzdW1tYXJ5L2NvbmZpZ3VyYXRpb25gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UHJvZHVjdFN1bW1hcnlFbnRpdGxlbWVudHNCeUxlZ2FsRW50aXR5SWRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldFByb2R1Y3RTdW1tYXJ5RW50aXRsZW1lbnRzQnlMZWdhbEVudGl0eUlkUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9sZWdhbEVudGl0eUlkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wibGVnYWxFbnRpdHlJZHNcIl07XG4gICAgICAgIGlmIChfbGVnYWxFbnRpdHlJZHMgPT09IG51bGwgfHwgX2xlZ2FsRW50aXR5SWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGxlZ2FsRW50aXR5SWRzIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHJvZHVjdFN1bW1hcnlFbnRpdGxlbWVudHNCeUxlZ2FsRW50aXR5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2FycmFuZ2VtZW50SWRzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhcnJhbmdlbWVudElkc1wiXTtcbiAgICAgICAgY29uc3QgX2lnbm9yZWRBcnJhbmdlbWVudElkcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaWdub3JlZEFycmFuZ2VtZW50SWRzXCJdO1xuICAgICAgICBjb25zdCBfc2VhcmNoVGVybSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2VhcmNoVGVybVwiXTtcbiAgICAgICAgY29uc3QgX2Zyb20gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZyb21cIl07XG4gICAgICAgIGNvbnN0IF9zaXplID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzaXplXCJdO1xuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9vcmRlckJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvcmRlckJ5XCJdO1xuICAgICAgICBjb25zdCBfZGlyZWN0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkaXJlY3Rpb25cIl07XG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfYXJyYW5nZW1lbnRJZHMpIHtcbiAgICAgICAgICAgIF9hcnJhbmdlbWVudElkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYXJyYW5nZW1lbnRJZHMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pZ25vcmVkQXJyYW5nZW1lbnRJZHMpIHtcbiAgICAgICAgICAgIF9pZ25vcmVkQXJyYW5nZW1lbnRJZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2lnbm9yZWRBcnJhbmdlbWVudElkcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2xlZ2FsRW50aXR5SWRzKSB7XG4gICAgICAgICAgICBfbGVnYWxFbnRpdHlJZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2xlZ2FsRW50aXR5SWRzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChfc2VhcmNoVGVybSAhPT0gdW5kZWZpbmVkICYmIF9zZWFyY2hUZXJtICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2VhcmNoVGVybSwgJ3NlYXJjaFRlcm0nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb3JkZXJCeSkge1xuICAgICAgICAgICAgX29yZGVyQnkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ29yZGVyQnknKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfZGlyZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGlyZWN0aW9uLCAnZGlyZWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtZXRlcnMudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9wcm9kdWN0c3VtbWFyeS9jb25maWd1cmF0aW9uJHtxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogJyd9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgcHJvZHVjdHMgc3VtbWFyaWVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0RmlsdGVyUHJvZHVjdFN1bW1hcmllcyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEZpbHRlclByb2R1Y3RTdW1tYXJpZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPFByb2R1Y3RTdW1tYXJ5RmlsdGVyUmVzdWx0PjtcbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgcHJvZHVjdHMgc3VtbWFyaWVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0RmlsdGVyUHJvZHVjdFN1bW1hcmllcyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEZpbHRlclByb2R1Y3RTdW1tYXJpZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHJvZHVjdFN1bW1hcnlGaWx0ZXJSZXN1bHQ+PjtcbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgcHJvZHVjdHMgc3VtbWFyaWVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0RmlsdGVyUHJvZHVjdFN1bW1hcmllcyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEZpbHRlclByb2R1Y3RTdW1tYXJpZXNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFByb2R1Y3RTdW1tYXJ5RmlsdGVyUmVzdWx0Pj47XG4gICAgLyoqXG4gICAgICogRmlsdGVyIHByb2R1Y3RzIHN1bW1hcmllcy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEZpbHRlclByb2R1Y3RTdW1tYXJpZXMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RGaWx0ZXJQcm9kdWN0U3VtbWFyaWVzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3Byb2R1Y3RTdW1tYXJ5RmlsdGVyUGFyYW1zID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJwcm9kdWN0U3VtbWFyeUZpbHRlclBhcmFtc1wiXTtcbiAgICAgICAgaWYgKF9wcm9kdWN0U3VtbWFyeUZpbHRlclBhcmFtcyA9PT0gbnVsbCB8fCBfcHJvZHVjdFN1bW1hcnlGaWx0ZXJQYXJhbXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvZHVjdFN1bW1hcnlGaWx0ZXJQYXJhbXMgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwb3N0RmlsdGVyUHJvZHVjdFN1bW1hcmllcy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFByb2R1Y3RTdW1tYXJ5RmlsdGVyUmVzdWx0PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvcHJvZHVjdHN1bW1hcnkvY29uZmlndXJhdGlvbi9maWx0ZXJgLFxuICAgICAgICAgICAgX3Byb2R1Y3RTdW1tYXJ5RmlsdGVyUGFyYW1zLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdEZpbHRlclByb2R1Y3RTdW1tYXJpZXNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RGaWx0ZXJQcm9kdWN0U3VtbWFyaWVzUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9wcm9kdWN0U3VtbWFyeUZpbHRlclBhcmFtcyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicHJvZHVjdFN1bW1hcnlGaWx0ZXJQYXJhbXNcIl07XG4gICAgICAgIGlmIChfcHJvZHVjdFN1bW1hcnlGaWx0ZXJQYXJhbXMgPT09IG51bGwgfHwgX3Byb2R1Y3RTdW1tYXJ5RmlsdGVyUGFyYW1zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb2R1Y3RTdW1tYXJ5RmlsdGVyUGFyYW1zIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcG9zdEZpbHRlclByb2R1Y3RTdW1tYXJpZXMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9wcm9kdWN0c3VtbWFyeS9jb25maWd1cmF0aW9uL2ZpbHRlcmA7XG4gICAgfVxuXG59XG4iXX0=