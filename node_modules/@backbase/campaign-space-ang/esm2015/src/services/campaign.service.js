import { Injectable, Inject, InjectionToken, Optional } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/engagement-http-ang";
export const CampaignSpaceConfigurationToken = new InjectionToken('CampaignSpaceConfiguration injection token');
const staticConfig = {
    portalName: 'backbase-wc3',
    locale: 'en-US',
    designMode: false,
};
export class CampaignService {
    constructor(selectCampaignService, config) {
        this.selectCampaignService = selectCampaignService;
        this._config = Object.assign(Object.assign({}, staticConfig), config);
    }
    get portalName() {
        return this._config.portalName;
    }
    get locale() {
        return this._config.locale;
    }
    get designMode() {
        return this._config.designMode;
    }
    selectCampaign(widgetName, dimensions, pageName) {
        const spaceId = `${this.portalName}.${pageName}.${widgetName}`;
        return this.selectCampaignService.selectCampaign({ locale: this.locale, dimensions, spaceId });
    }
    b64Decode(str) {
        return decodeURIComponent(atob(str)
            .split('')
            .map(function (c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        })
            .join(''));
    }
}
CampaignService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: CampaignService, deps: [{ token: i1.SelectCampaignService }, { token: CampaignSpaceConfigurationToken, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
CampaignService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: CampaignService });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: CampaignService, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.SelectCampaignService }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [CampaignSpaceConfigurationToken]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FtcGFpZ24uc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY2FtcGFpZ24tc3BhY2UtYW5nL3NyYy9zZXJ2aWNlcy9jYW1wYWlnbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7OztBQUk3RSxNQUFNLENBQUMsTUFBTSwrQkFBK0IsR0FBRyxJQUFJLGNBQWMsQ0FDL0QsNENBQTRDLENBQzdDLENBQUM7QUFRRixNQUFNLFlBQVksR0FBK0I7SUFDL0MsVUFBVSxFQUFFLGNBQWM7SUFDMUIsTUFBTSxFQUFFLE9BQU87SUFDZixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDO0FBR0YsTUFBTSxPQUFPLGVBQWU7SUFHMUIsWUFDVSxxQkFBNEMsRUFDQyxNQUFrQztRQUQvRSwwQkFBcUIsR0FBckIscUJBQXFCLENBQXVCO1FBR3BELElBQUksQ0FBQyxPQUFPLG1DQUFRLFlBQVksR0FBSyxNQUFNLENBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1osT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztJQUNqQyxDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1osT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztJQUNqQyxDQUFDO0lBRUQsY0FBYyxDQUNaLFVBQWtCLEVBQ2xCLFVBQWtCLEVBQ2xCLFFBQWdCO1FBRWhCLE1BQU0sT0FBTyxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxRQUFRLElBQUksVUFBVSxFQUFFLENBQUM7UUFFL0QsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUVELFNBQVMsQ0FBQyxHQUFXO1FBQ25CLE9BQU8sa0JBQWtCLENBQ3ZCLElBQUksQ0FBQyxHQUFHLENBQUM7YUFDTixLQUFLLENBQUMsRUFBRSxDQUFDO2FBQ1QsR0FBRyxDQUFDLFVBQVUsQ0FBQztZQUNkLE9BQU8sR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDO2FBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUNaLENBQUM7SUFDSixDQUFDOzs2R0F6Q1UsZUFBZSx1REFLSiwrQkFBK0I7aUhBTDFDLGVBQWU7NEZBQWYsZUFBZTtrQkFEM0IsVUFBVTs7MEJBTU4sUUFBUTs7MEJBQUksTUFBTTsyQkFBQywrQkFBK0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QsIEluamVjdGlvblRva2VuLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgU2VsZWN0Q2FtcGFpZ25TZXJ2aWNlLCBTZWxlY3RlZENhbXBhaWduUmVzb3VyY2UgfSBmcm9tICdAYmFja2Jhc2UvZW5nYWdlbWVudC1odHRwLWFuZyc7XG5cbmV4cG9ydCBjb25zdCBDYW1wYWlnblNwYWNlQ29uZmlndXJhdGlvblRva2VuID0gbmV3IEluamVjdGlvblRva2VuPENhbXBhaWduU3BhY2VDb25maWd1cmF0aW9uPihcbiAgJ0NhbXBhaWduU3BhY2VDb25maWd1cmF0aW9uIGluamVjdGlvbiB0b2tlbicsXG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduU3BhY2VDb25maWd1cmF0aW9uIHtcbiAgcG9ydGFsTmFtZTogc3RyaW5nO1xuICBsb2NhbGU6IHN0cmluZztcbiAgZGVzaWduTW9kZTogYm9vbGVhbjtcbn1cblxuY29uc3Qgc3RhdGljQ29uZmlnOiBDYW1wYWlnblNwYWNlQ29uZmlndXJhdGlvbiA9IHtcbiAgcG9ydGFsTmFtZTogJ2JhY2tiYXNlLXdjMycsXG4gIGxvY2FsZTogJ2VuLVVTJyxcbiAgZGVzaWduTW9kZTogZmFsc2UsXG59O1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQ2FtcGFpZ25TZXJ2aWNlIHtcbiAgcHJpdmF0ZSBfY29uZmlnOiBDYW1wYWlnblNwYWNlQ29uZmlndXJhdGlvbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHNlbGVjdENhbXBhaWduU2VydmljZTogU2VsZWN0Q2FtcGFpZ25TZXJ2aWNlLFxuICAgIEBPcHRpb25hbCgpIEBJbmplY3QoQ2FtcGFpZ25TcGFjZUNvbmZpZ3VyYXRpb25Ub2tlbikgY29uZmlnOiBDYW1wYWlnblNwYWNlQ29uZmlndXJhdGlvbixcbiAgKSB7XG4gICAgdGhpcy5fY29uZmlnID0geyAuLi5zdGF0aWNDb25maWcsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgZ2V0IHBvcnRhbE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5wb3J0YWxOYW1lO1xuICB9XG5cbiAgZ2V0IGxvY2FsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29uZmlnLmxvY2FsZTtcbiAgfVxuXG4gIGdldCBkZXNpZ25Nb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25maWcuZGVzaWduTW9kZTtcbiAgfVxuXG4gIHNlbGVjdENhbXBhaWduKFxuICAgIHdpZGdldE5hbWU6IHN0cmluZyxcbiAgICBkaW1lbnNpb25zOiBzdHJpbmcsXG4gICAgcGFnZU5hbWU6IHN0cmluZyxcbiAgKTogT2JzZXJ2YWJsZTxTZWxlY3RlZENhbXBhaWduUmVzb3VyY2UgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBzcGFjZUlkID0gYCR7dGhpcy5wb3J0YWxOYW1lfS4ke3BhZ2VOYW1lfS4ke3dpZGdldE5hbWV9YDtcblxuICAgIHJldHVybiB0aGlzLnNlbGVjdENhbXBhaWduU2VydmljZS5zZWxlY3RDYW1wYWlnbih7IGxvY2FsZTogdGhpcy5sb2NhbGUsIGRpbWVuc2lvbnMsIHNwYWNlSWQgfSk7XG4gIH1cblxuICBiNjREZWNvZGUoc3RyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgICAgYXRvYihzdHIpXG4gICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoYykge1xuICAgICAgICAgIHJldHVybiAnJScgKyAoJzAwJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJycpLFxuICAgICk7XG4gIH1cbn1cbiJdfQ==