import { Component, Directive } from '@angular/core';
import { PaymentCardContainerBase, PaymentCardLockStatus, PaymentCardStatus, } from '@backbase/cards-common-ang';
import { BbTemplate } from '@backbase/foundation-ang/core';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/cards-common-ang";
import * as i2 from "@backbase/ui-ang/notification";
import * as i3 from "@backbase/ui-ang/payment-card";
export class PaymentCardComponent extends PaymentCardContainerBase {
    constructor(cardsService, cd, notificationService) {
        super(cardsService, cd, notificationService);
        this.cardsService = cardsService;
        this.cd = cd;
        this.notificationService = notificationService;
        this.hostRef = this;
    }
    ngOnInit() {
        var _a, _b, _c, _d;
        /* eslint-disable max-len */
        const cardListLocalizations = {
            activationErrorHeader: $localize `:Error@@card.list.activation.notification.errorHeader:Error`,
            activationErrorMessage: $localize `:Failed to Activate Card. Unable to proceed, please try again.@@card.list.activation.notification.errorBody:Failed to Activate Card. Unable to proceed, please try again.`,
            activationSuccessHeader: $localize `:Card Activated@@card.list.activation.notification.successHeader:Card Activated.`,
            lockErrorHeader: $localize `:Error@@card.list.lock.notification.errorHeader:Error`,
            lockErrorMessage: $localize `:Card number cannot be locked, try again later|Lock Error Message@@card.list.lock.notification.errorMessage:Card number ending with ${(_a = this.paymentCard) === null || _a === void 0 ? void 0 : _a.number}:Card Number: cannot be locked! Try again later.`,
            lockSuccessHeader: $localize `:Card locked@@card.list.lock.notification.successHeader:Card locked`,
            lockSuccessMessage: $localize `:Card number locked|Successful lock message@@card.list.lock.notification.successMessage:Card number ending with ${(_b = this.paymentCard) === null || _b === void 0 ? void 0 : _b.number}:Card Number: has been locked.`,
            replacementErrorHeader: $localize `:Error@@card.list.replacement.notification.errorHeader:Error`,
            replacementErrorMessage: $localize `:Can't request card replacement. Try again@@card.list.replacement.notification.errorBody:Unable to request a card replacement. Try again later.`,
            replacementSuccessHeader: $localize `:New card ordered header@@card.list.replacement.notification.successHeader:New card ordered`,
            replacementSuccessMessage: $localize `:New card ordered@@card.list.replacement.notification.successBody:A new card has been ordered.`,
            requestNewPinSuccessMessage: $localize `:New PIN requested@@card.list.pin.notification.requestNewPinSuccessMessage:New PIN requested`,
            requestPinErrorMessage: $localize `:Can't request PIN. Try again@@card.list.requestPin.notification.errorBody:Can't request PIN.  Please try again later.`,
            resetPinSuccessMessage: $localize `:PIN successfully reset@@card.list.pin.notification.resetPinSuccessMessage:PIN successfully reset`,
            resetPinErrorMessage: $localize `:Unable to change PIN, try again@@card.list.resetPin.notification.errorBody:Unable to change PIN.  Please try again later.`,
            resetInvalidPinMessage: $localize `:Unable to change PIN, validations not meet@@card.list.pin.notification.resetInvalidPinMessage:Unable to change PIN. New PIN and confirm don't match`,
            unlockErrorHeader: $localize `:Error@@card.list.unlock.notification.errorHeader:Error`,
            unlockErrorMessage: $localize `:Card number cannot be unlocked, try again later|Unlock Error Message@@card.list.unlock.notification.errorMessage:Card number ending with ${(_c = this.paymentCard) === null || _c === void 0 ? void 0 : _c.number}:Card Number: cannot be unlocked! Try again later.`,
            unlockSuccessHeader: $localize `:Card unlocked@@card.list.unlock.notification.successHeader:Card unlocked`,
            unlockSuccessMessage: $localize `:Card number unlocked|Successful unlock Error Message@@card.list.unlock.notification.successMessage:Card number ending with ${(_d = this.paymentCard) === null || _d === void 0 ? void 0 : _d.number}:Card Number: has been unlocked.`,
            updateLimitErrorHeader: $localize `:Update Limit Error Header@@card.list.limit.notification.errorHeader:`,
            updateLimitErrorMessage: $localize `:Unable to change card limit@@card.list.limit.notification.errorBody:Unable to change card limit`,
            updateLimitSuccessHeader: $localize `:Limit changed header@@card.list.limit.notification.successHeader:Limit changed`,
            updateLimitSuccessMessage: $localize `:Card limit changed successfully@@card.list.limit.notification.changeLimitSuccessMessage:Card limit changed successfully`,
        };
        this.localizations = Object.assign({}, cardListLocalizations);
    }
    /**
     * Translate the payment card status/lock status/replacement status into a displayable
     * PaymentCardDisplayState.
     */
    getDisplayState() {
        if (this.paymentCard && this.paymentCard.status === PaymentCardStatus.Inactive) {
            return 'INACTIVE';
        }
        if (this.paymentCard && this.paymentCard.status === PaymentCardStatus.Canceled) {
            return 'CANCELLED';
        }
        if (this.paymentCard && this.paymentCard.status === PaymentCardStatus.Expired) {
            return 'EXPIRED';
        }
        if (this.paymentCard && this.paymentCard.lockStatus === PaymentCardLockStatus.Locked) {
            return 'LOCKED';
        }
        return undefined;
    }
}
PaymentCardComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: PaymentCardComponent, deps: [{ token: i1.CardsService }, { token: i0.ChangeDetectorRef }, { token: i2.NotificationService }], target: i0.ɵɵFactoryTarget.Component });
PaymentCardComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: PaymentCardComponent, selector: "bb-payment-card", usesInheritance: true, ngImport: i0, template: "<ng-container bbCardsListPaymentCardCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n\n<ng-template bbCardsListPaymentCardCustomizable let-hostRef>\n  <div class=\"bb-payment-card-component\">\n    <bb-payment-card-state-wrapper-ui\n      [state]=\"hostRef.getDisplayState()\"\n      (click)=\"hostRef.onOpenDetails()\"\n      style=\"cursor: pointer;\"\n    >\n    <bb-payment-card-ui bbAccessibilityKeyboard [paymentCard]=\"hostRef.paymentCard\"></bb-payment-card-ui>\n    </bb-payment-card-state-wrapper-ui>\n  </div>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i1.PaymentCardStateWrapperComponent; }), selector: "bb-payment-card-state-wrapper,bb-payment-card-state-wrapper-ui", inputs: ["state"] }, { type: i0.forwardRef(function () { return i3.PaymentCardComponent; }), selector: "bb-payment-card-ui", inputs: ["paymentCard", "paymentCardNumberFormat"] }], directives: [{ type: i0.forwardRef(function () { return CardsListPaymentCardCustomizableDirective; }), selector: "[bbCardsListPaymentCardCustomizable]" }, { type: i0.forwardRef(function () { return i1.AccessibilityKeyboardDirective; }), selector: "[bbAccessibilityKeyboard]" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: PaymentCardComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-payment-card',
                    templateUrl: './payment-card.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.CardsService }, { type: i0.ChangeDetectorRef }, { type: i2.NotificationService }]; } });
export class CardsListPaymentCardCustomizableDirective extends BbTemplate {
}
CardsListPaymentCardCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: CardsListPaymentCardCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
CardsListPaymentCardCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.15", type: CardsListPaymentCardCustomizableDirective, selector: "[bbCardsListPaymentCardCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: CardsListPaymentCardCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbCardsListPaymentCardCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bWVudC1jYXJkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY2FyZHMtbGlzdC13aWRnZXQtYW5nL3NyYy9jb21wb25lbnRzL2JiLXBheW1lbnQtY2FyZC9wYXltZW50LWNhcmQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9jYXJkcy1saXN0LXdpZGdldC1hbmcvc3JjL2NvbXBvbmVudHMvYmItcGF5bWVudC1jYXJkL3BheW1lbnQtY2FyZC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQXFCLFNBQVMsRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDaEYsT0FBTyxFQUVMLHdCQUF3QixFQUV4QixxQkFBcUIsRUFDckIsaUJBQWlCLEdBQ2xCLE1BQU0sNEJBQTRCLENBQUM7QUFDcEMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtCQUErQixDQUFDOzs7OztBQVMzRCxNQUFNLE9BQU8sb0JBQXFCLFNBQVEsd0JBQXdCO0lBbUNoRSxZQUNxQixZQUEwQixFQUMxQixFQUFxQixFQUNyQixtQkFBd0M7UUFFM0QsS0FBSyxDQUFDLFlBQVksRUFBRSxFQUFFLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztRQUoxQixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUMxQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUNyQix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBckNwRCxZQUFPLEdBQUcsSUFBSSxDQUFDO0lBd0N4QixDQUFDO0lBdENELFFBQVE7O1FBQ04sNEJBQTRCO1FBQzVCLE1BQU0scUJBQXFCLEdBQUc7WUFDNUIscUJBQXFCLEVBQUUsU0FBUyxDQUFBLDZEQUE2RDtZQUM3RixzQkFBc0IsRUFBRSxTQUFTLENBQUEsMktBQTJLO1lBQzVNLHVCQUF1QixFQUFFLFNBQVMsQ0FBQSxrRkFBa0Y7WUFDcEgsZUFBZSxFQUFFLFNBQVMsQ0FBQSx1REFBdUQ7WUFDakYsZ0JBQWdCLEVBQUUsU0FBUyxDQUFBLHVJQUF1SSxNQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLE1BQU0sa0RBQWtEO1lBQzVPLGlCQUFpQixFQUFFLFNBQVMsQ0FBQSxxRUFBcUU7WUFDakcsa0JBQWtCLEVBQUUsU0FBUyxDQUFBLG1IQUFtSCxNQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLE1BQU0sZ0NBQWdDO1lBQ3hNLHNCQUFzQixFQUFFLFNBQVMsQ0FBQSw4REFBOEQ7WUFDL0YsdUJBQXVCLEVBQUUsU0FBUyxDQUFBLGlKQUFpSjtZQUNuTCx3QkFBd0IsRUFBRSxTQUFTLENBQUEsNkZBQTZGO1lBQ2hJLHlCQUF5QixFQUFFLFNBQVMsQ0FBQSxnR0FBZ0c7WUFDcEksMkJBQTJCLEVBQUUsU0FBUyxDQUFBLDhGQUE4RjtZQUNwSSxzQkFBc0IsRUFBRSxTQUFTLENBQUEsd0hBQXdIO1lBQ3pKLHNCQUFzQixFQUFFLFNBQVMsQ0FBQSxtR0FBbUc7WUFDcEksb0JBQW9CLEVBQUUsU0FBUyxDQUFBLDRIQUE0SDtZQUMzSixzQkFBc0IsRUFBRSxTQUFTLENBQUEsc0pBQXNKO1lBQ3ZMLGlCQUFpQixFQUFFLFNBQVMsQ0FBQSx5REFBeUQ7WUFDckYsa0JBQWtCLEVBQUUsU0FBUyxDQUFBLDZJQUE2SSxNQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLE1BQU0sb0RBQW9EO1lBQ3RQLG1CQUFtQixFQUFFLFNBQVMsQ0FBQSwyRUFBMkU7WUFDekcsb0JBQW9CLEVBQUUsU0FBUyxDQUFBLCtIQUErSCxNQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLE1BQU0sa0NBQWtDO1lBQ3hOLHNCQUFzQixFQUFFLFNBQVMsQ0FBQSx1RUFBdUU7WUFDeEcsdUJBQXVCLEVBQUUsU0FBUyxDQUFBLGtHQUFrRztZQUNwSSx3QkFBd0IsRUFBRSxTQUFTLENBQUEsaUZBQWlGO1lBQ3BILHlCQUF5QixFQUFFLFNBQVMsQ0FBQSwwSEFBMEg7U0FDL0osQ0FBQztRQUVGLElBQUksQ0FBQyxhQUFhLHFCQUFRLHFCQUFxQixDQUFFLENBQUM7SUFDcEQsQ0FBQztJQVVEOzs7T0FHRztJQUNILGVBQWU7UUFDYixJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEtBQUssaUJBQWlCLENBQUMsUUFBUSxFQUFFO1lBQzlFLE9BQU8sVUFBVSxDQUFDO1NBQ25CO1FBRUQsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxLQUFLLGlCQUFpQixDQUFDLFFBQVEsRUFBRTtZQUM5RSxPQUFPLFdBQVcsQ0FBQztTQUNwQjtRQUVELElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sS0FBSyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUU7WUFDN0UsT0FBTyxTQUFTLENBQUM7U0FDbEI7UUFFRCxJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEtBQUsscUJBQXFCLENBQUMsTUFBTSxFQUFFO1lBQ3BGLE9BQU8sUUFBUSxDQUFDO1NBQ2pCO1FBRUQsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQzs7a0hBakVVLG9CQUFvQjtzR0FBcEIsb0JBQW9CLDhFQ2pCakMsaWlCQWFBLDJaRDJFYSx5Q0FBeUM7NEZBdkV6QyxvQkFBb0I7a0JBSmhDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLGlCQUFpQjtvQkFDM0IsV0FBVyxFQUFFLCtCQUErQjtpQkFDN0M7O0FBd0VELE1BQU0sT0FBTyx5Q0FBMEMsU0FBUSxVQUEyQzs7dUlBQTdGLHlDQUF5QzsySEFBekMseUNBQXlDOzRGQUF6Qyx5Q0FBeUM7a0JBSHJELFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHNDQUFzQztpQkFDakQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBEaXJlY3RpdmUsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQ2FyZHNTZXJ2aWNlLFxuICBQYXltZW50Q2FyZENvbnRhaW5lckJhc2UsXG4gIFBheW1lbnRDYXJkRGlzcGxheVN0YXRlLFxuICBQYXltZW50Q2FyZExvY2tTdGF0dXMsXG4gIFBheW1lbnRDYXJkU3RhdHVzLFxufSBmcm9tICdAYmFja2Jhc2UvY2FyZHMtY29tbW9uLWFuZyc7XG5pbXBvcnQgeyBCYlRlbXBsYXRlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2NvcmUnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJ0BiYWNrYmFzZS91aS1hbmcvbm90aWZpY2F0aW9uJztcblxuZGVjbGFyZSBjb25zdCAkbG9jYWxpemU6IGFueTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItcGF5bWVudC1jYXJkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3BheW1lbnQtY2FyZC5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIFBheW1lbnRDYXJkQ29tcG9uZW50IGV4dGVuZHMgUGF5bWVudENhcmRDb250YWluZXJCYXNlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgcmVhZG9ubHkgaG9zdFJlZiA9IHRoaXM7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgIGNvbnN0IGNhcmRMaXN0TG9jYWxpemF0aW9ucyA9IHtcbiAgICAgIGFjdGl2YXRpb25FcnJvckhlYWRlcjogJGxvY2FsaXplYDpFcnJvckBAY2FyZC5saXN0LmFjdGl2YXRpb24ubm90aWZpY2F0aW9uLmVycm9ySGVhZGVyOkVycm9yYCxcbiAgICAgIGFjdGl2YXRpb25FcnJvck1lc3NhZ2U6ICRsb2NhbGl6ZWA6RmFpbGVkIHRvIEFjdGl2YXRlIENhcmQuIFVuYWJsZSB0byBwcm9jZWVkLCBwbGVhc2UgdHJ5IGFnYWluLkBAY2FyZC5saXN0LmFjdGl2YXRpb24ubm90aWZpY2F0aW9uLmVycm9yQm9keTpGYWlsZWQgdG8gQWN0aXZhdGUgQ2FyZC4gVW5hYmxlIHRvIHByb2NlZWQsIHBsZWFzZSB0cnkgYWdhaW4uYCxcbiAgICAgIGFjdGl2YXRpb25TdWNjZXNzSGVhZGVyOiAkbG9jYWxpemVgOkNhcmQgQWN0aXZhdGVkQEBjYXJkLmxpc3QuYWN0aXZhdGlvbi5ub3RpZmljYXRpb24uc3VjY2Vzc0hlYWRlcjpDYXJkIEFjdGl2YXRlZC5gLFxuICAgICAgbG9ja0Vycm9ySGVhZGVyOiAkbG9jYWxpemVgOkVycm9yQEBjYXJkLmxpc3QubG9jay5ub3RpZmljYXRpb24uZXJyb3JIZWFkZXI6RXJyb3JgLFxuICAgICAgbG9ja0Vycm9yTWVzc2FnZTogJGxvY2FsaXplYDpDYXJkIG51bWJlciBjYW5ub3QgYmUgbG9ja2VkLCB0cnkgYWdhaW4gbGF0ZXJ8TG9jayBFcnJvciBNZXNzYWdlQEBjYXJkLmxpc3QubG9jay5ub3RpZmljYXRpb24uZXJyb3JNZXNzYWdlOkNhcmQgbnVtYmVyIGVuZGluZyB3aXRoICR7dGhpcy5wYXltZW50Q2FyZD8ubnVtYmVyfTpDYXJkIE51bWJlcjogY2Fubm90IGJlIGxvY2tlZCEgVHJ5IGFnYWluIGxhdGVyLmAsXG4gICAgICBsb2NrU3VjY2Vzc0hlYWRlcjogJGxvY2FsaXplYDpDYXJkIGxvY2tlZEBAY2FyZC5saXN0LmxvY2subm90aWZpY2F0aW9uLnN1Y2Nlc3NIZWFkZXI6Q2FyZCBsb2NrZWRgLFxuICAgICAgbG9ja1N1Y2Nlc3NNZXNzYWdlOiAkbG9jYWxpemVgOkNhcmQgbnVtYmVyIGxvY2tlZHxTdWNjZXNzZnVsIGxvY2sgbWVzc2FnZUBAY2FyZC5saXN0LmxvY2subm90aWZpY2F0aW9uLnN1Y2Nlc3NNZXNzYWdlOkNhcmQgbnVtYmVyIGVuZGluZyB3aXRoICR7dGhpcy5wYXltZW50Q2FyZD8ubnVtYmVyfTpDYXJkIE51bWJlcjogaGFzIGJlZW4gbG9ja2VkLmAsXG4gICAgICByZXBsYWNlbWVudEVycm9ySGVhZGVyOiAkbG9jYWxpemVgOkVycm9yQEBjYXJkLmxpc3QucmVwbGFjZW1lbnQubm90aWZpY2F0aW9uLmVycm9ySGVhZGVyOkVycm9yYCxcbiAgICAgIHJlcGxhY2VtZW50RXJyb3JNZXNzYWdlOiAkbG9jYWxpemVgOkNhbid0IHJlcXVlc3QgY2FyZCByZXBsYWNlbWVudC4gVHJ5IGFnYWluQEBjYXJkLmxpc3QucmVwbGFjZW1lbnQubm90aWZpY2F0aW9uLmVycm9yQm9keTpVbmFibGUgdG8gcmVxdWVzdCBhIGNhcmQgcmVwbGFjZW1lbnQuIFRyeSBhZ2FpbiBsYXRlci5gLFxuICAgICAgcmVwbGFjZW1lbnRTdWNjZXNzSGVhZGVyOiAkbG9jYWxpemVgOk5ldyBjYXJkIG9yZGVyZWQgaGVhZGVyQEBjYXJkLmxpc3QucmVwbGFjZW1lbnQubm90aWZpY2F0aW9uLnN1Y2Nlc3NIZWFkZXI6TmV3IGNhcmQgb3JkZXJlZGAsXG4gICAgICByZXBsYWNlbWVudFN1Y2Nlc3NNZXNzYWdlOiAkbG9jYWxpemVgOk5ldyBjYXJkIG9yZGVyZWRAQGNhcmQubGlzdC5yZXBsYWNlbWVudC5ub3RpZmljYXRpb24uc3VjY2Vzc0JvZHk6QSBuZXcgY2FyZCBoYXMgYmVlbiBvcmRlcmVkLmAsXG4gICAgICByZXF1ZXN0TmV3UGluU3VjY2Vzc01lc3NhZ2U6ICRsb2NhbGl6ZWA6TmV3IFBJTiByZXF1ZXN0ZWRAQGNhcmQubGlzdC5waW4ubm90aWZpY2F0aW9uLnJlcXVlc3ROZXdQaW5TdWNjZXNzTWVzc2FnZTpOZXcgUElOIHJlcXVlc3RlZGAsXG4gICAgICByZXF1ZXN0UGluRXJyb3JNZXNzYWdlOiAkbG9jYWxpemVgOkNhbid0IHJlcXVlc3QgUElOLiBUcnkgYWdhaW5AQGNhcmQubGlzdC5yZXF1ZXN0UGluLm5vdGlmaWNhdGlvbi5lcnJvckJvZHk6Q2FuJ3QgcmVxdWVzdCBQSU4uICBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLmAsXG4gICAgICByZXNldFBpblN1Y2Nlc3NNZXNzYWdlOiAkbG9jYWxpemVgOlBJTiBzdWNjZXNzZnVsbHkgcmVzZXRAQGNhcmQubGlzdC5waW4ubm90aWZpY2F0aW9uLnJlc2V0UGluU3VjY2Vzc01lc3NhZ2U6UElOIHN1Y2Nlc3NmdWxseSByZXNldGAsXG4gICAgICByZXNldFBpbkVycm9yTWVzc2FnZTogJGxvY2FsaXplYDpVbmFibGUgdG8gY2hhbmdlIFBJTiwgdHJ5IGFnYWluQEBjYXJkLmxpc3QucmVzZXRQaW4ubm90aWZpY2F0aW9uLmVycm9yQm9keTpVbmFibGUgdG8gY2hhbmdlIFBJTi4gIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuYCxcbiAgICAgIHJlc2V0SW52YWxpZFBpbk1lc3NhZ2U6ICRsb2NhbGl6ZWA6VW5hYmxlIHRvIGNoYW5nZSBQSU4sIHZhbGlkYXRpb25zIG5vdCBtZWV0QEBjYXJkLmxpc3QucGluLm5vdGlmaWNhdGlvbi5yZXNldEludmFsaWRQaW5NZXNzYWdlOlVuYWJsZSB0byBjaGFuZ2UgUElOLiBOZXcgUElOIGFuZCBjb25maXJtIGRvbid0IG1hdGNoYCxcbiAgICAgIHVubG9ja0Vycm9ySGVhZGVyOiAkbG9jYWxpemVgOkVycm9yQEBjYXJkLmxpc3QudW5sb2NrLm5vdGlmaWNhdGlvbi5lcnJvckhlYWRlcjpFcnJvcmAsXG4gICAgICB1bmxvY2tFcnJvck1lc3NhZ2U6ICRsb2NhbGl6ZWA6Q2FyZCBudW1iZXIgY2Fubm90IGJlIHVubG9ja2VkLCB0cnkgYWdhaW4gbGF0ZXJ8VW5sb2NrIEVycm9yIE1lc3NhZ2VAQGNhcmQubGlzdC51bmxvY2subm90aWZpY2F0aW9uLmVycm9yTWVzc2FnZTpDYXJkIG51bWJlciBlbmRpbmcgd2l0aCAke3RoaXMucGF5bWVudENhcmQ/Lm51bWJlcn06Q2FyZCBOdW1iZXI6IGNhbm5vdCBiZSB1bmxvY2tlZCEgVHJ5IGFnYWluIGxhdGVyLmAsXG4gICAgICB1bmxvY2tTdWNjZXNzSGVhZGVyOiAkbG9jYWxpemVgOkNhcmQgdW5sb2NrZWRAQGNhcmQubGlzdC51bmxvY2subm90aWZpY2F0aW9uLnN1Y2Nlc3NIZWFkZXI6Q2FyZCB1bmxvY2tlZGAsXG4gICAgICB1bmxvY2tTdWNjZXNzTWVzc2FnZTogJGxvY2FsaXplYDpDYXJkIG51bWJlciB1bmxvY2tlZHxTdWNjZXNzZnVsIHVubG9jayBFcnJvciBNZXNzYWdlQEBjYXJkLmxpc3QudW5sb2NrLm5vdGlmaWNhdGlvbi5zdWNjZXNzTWVzc2FnZTpDYXJkIG51bWJlciBlbmRpbmcgd2l0aCAke3RoaXMucGF5bWVudENhcmQ/Lm51bWJlcn06Q2FyZCBOdW1iZXI6IGhhcyBiZWVuIHVubG9ja2VkLmAsXG4gICAgICB1cGRhdGVMaW1pdEVycm9ySGVhZGVyOiAkbG9jYWxpemVgOlVwZGF0ZSBMaW1pdCBFcnJvciBIZWFkZXJAQGNhcmQubGlzdC5saW1pdC5ub3RpZmljYXRpb24uZXJyb3JIZWFkZXI6YCxcbiAgICAgIHVwZGF0ZUxpbWl0RXJyb3JNZXNzYWdlOiAkbG9jYWxpemVgOlVuYWJsZSB0byBjaGFuZ2UgY2FyZCBsaW1pdEBAY2FyZC5saXN0LmxpbWl0Lm5vdGlmaWNhdGlvbi5lcnJvckJvZHk6VW5hYmxlIHRvIGNoYW5nZSBjYXJkIGxpbWl0YCxcbiAgICAgIHVwZGF0ZUxpbWl0U3VjY2Vzc0hlYWRlcjogJGxvY2FsaXplYDpMaW1pdCBjaGFuZ2VkIGhlYWRlckBAY2FyZC5saXN0LmxpbWl0Lm5vdGlmaWNhdGlvbi5zdWNjZXNzSGVhZGVyOkxpbWl0IGNoYW5nZWRgLFxuICAgICAgdXBkYXRlTGltaXRTdWNjZXNzTWVzc2FnZTogJGxvY2FsaXplYDpDYXJkIGxpbWl0IGNoYW5nZWQgc3VjY2Vzc2Z1bGx5QEBjYXJkLmxpc3QubGltaXQubm90aWZpY2F0aW9uLmNoYW5nZUxpbWl0U3VjY2Vzc01lc3NhZ2U6Q2FyZCBsaW1pdCBjaGFuZ2VkIHN1Y2Nlc3NmdWxseWAsXG4gICAgfTtcblxuICAgIHRoaXMubG9jYWxpemF0aW9ucyA9IHsgLi4uY2FyZExpc3RMb2NhbGl6YXRpb25zIH07XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY2FyZHNTZXJ2aWNlOiBDYXJkc1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgbm90aWZpY2F0aW9uU2VydmljZTogTm90aWZpY2F0aW9uU2VydmljZSxcbiAgKSB7XG4gICAgc3VwZXIoY2FyZHNTZXJ2aWNlLCBjZCwgbm90aWZpY2F0aW9uU2VydmljZSk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlIHRoZSBwYXltZW50IGNhcmQgc3RhdHVzL2xvY2sgc3RhdHVzL3JlcGxhY2VtZW50IHN0YXR1cyBpbnRvIGEgZGlzcGxheWFibGVcbiAgICogUGF5bWVudENhcmREaXNwbGF5U3RhdGUuXG4gICAqL1xuICBnZXREaXNwbGF5U3RhdGUoKTogUGF5bWVudENhcmREaXNwbGF5U3RhdGUgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLnBheW1lbnRDYXJkICYmIHRoaXMucGF5bWVudENhcmQuc3RhdHVzID09PSBQYXltZW50Q2FyZFN0YXR1cy5JbmFjdGl2ZSkge1xuICAgICAgcmV0dXJuICdJTkFDVElWRSc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGF5bWVudENhcmQgJiYgdGhpcy5wYXltZW50Q2FyZC5zdGF0dXMgPT09IFBheW1lbnRDYXJkU3RhdHVzLkNhbmNlbGVkKSB7XG4gICAgICByZXR1cm4gJ0NBTkNFTExFRCc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGF5bWVudENhcmQgJiYgdGhpcy5wYXltZW50Q2FyZC5zdGF0dXMgPT09IFBheW1lbnRDYXJkU3RhdHVzLkV4cGlyZWQpIHtcbiAgICAgIHJldHVybiAnRVhQSVJFRCc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGF5bWVudENhcmQgJiYgdGhpcy5wYXltZW50Q2FyZC5sb2NrU3RhdHVzID09PSBQYXltZW50Q2FyZExvY2tTdGF0dXMuTG9ja2VkKSB7XG4gICAgICByZXR1cm4gJ0xPQ0tFRCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJDYXJkc0xpc3RQYXltZW50Q2FyZEN1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBDYXJkc0xpc3RQYXltZW50Q2FyZEN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8UGF5bWVudENhcmRDb21wb25lbnQsIHVuZGVmaW5lZD4ge31cbiIsIjxuZy1jb250YWluZXIgYmJDYXJkc0xpc3RQYXltZW50Q2FyZEN1c3RvbWl6YWJsZSBbYmJIb3N0UmVmXT1cImhvc3RSZWZcIj48L25nLWNvbnRhaW5lcj5cblxuPG5nLXRlbXBsYXRlIGJiQ2FyZHNMaXN0UGF5bWVudENhcmRDdXN0b21pemFibGUgbGV0LWhvc3RSZWY+XG4gIDxkaXYgY2xhc3M9XCJiYi1wYXltZW50LWNhcmQtY29tcG9uZW50XCI+XG4gICAgPGJiLXBheW1lbnQtY2FyZC1zdGF0ZS13cmFwcGVyLXVpXG4gICAgICBbc3RhdGVdPVwiaG9zdFJlZi5nZXREaXNwbGF5U3RhdGUoKVwiXG4gICAgICAoY2xpY2spPVwiaG9zdFJlZi5vbk9wZW5EZXRhaWxzKClcIlxuICAgICAgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7XCJcbiAgICA+XG4gICAgPGJiLXBheW1lbnQtY2FyZC11aSBiYkFjY2Vzc2liaWxpdHlLZXlib2FyZCBbcGF5bWVudENhcmRdPVwiaG9zdFJlZi5wYXltZW50Q2FyZFwiPjwvYmItcGF5bWVudC1jYXJkLXVpPlxuICAgIDwvYmItcGF5bWVudC1jYXJkLXN0YXRlLXdyYXBwZXItdWk+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==