{"version":3,"file":"discard-changes-base.component.js","sourceRoot":"","sources":["../../../../../../../libs/accessgroup-common-ang/src/lib/discard-changes/discard-changes-base-component/discard-changes-base.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAc,EAAE,EAAE,MAAM,MAAM,CAAC;AAC/C,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;;AAIxD,MAAM,OAAgB,2BAA2B;IADjD;QAEE,8BAAyB,GAAG,KAAK,CAAC;QAEzB,mBAAc,GAAqB,IAAI,OAAO,EAAW,CAAC;KAuBpE;IAnBC,qBAAqB,CAAC,KAAc;QAClC,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;QACvC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC;IAGD,cAAc,CAAC,MAAyB;QACtC,IAAI,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE;YACrE,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;SAC3B;IACH,CAAC;IAED,uBAAuB;QACrB,IAAI,IAAI,CAAC,uBAAuB,EAAE,EAAE;YAClC,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;YACtC,OAAO,IAAI,CAAC,cAAc,CAAC;SAC5B;QACD,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC;;4IAzBmB,2BAA2B;gIAA3B,2BAA2B;4FAA3B,2BAA2B;kBADhD,SAAS;8BAcR,cAAc;sBADb,YAAY;uBAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC","sourcesContent":["import { Subject, Observable, of } from 'rxjs';\nimport { HostListener, Directive } from '@angular/core';\nimport { WithDiscardChangesComponent } from '../types';\n\n@Directive() /* eslint-disable-next-line @angular-eslint/directive-class-suffix */\nexport abstract class DiscardChangesBaseComponent implements WithDiscardChangesComponent {\n  isDiscardChangesModalOpen = false;\n\n  readonly discardSubject: Subject<boolean> = new Subject<boolean>();\n\n  protected abstract shouldPreventNavigation(): boolean;\n\n  resolveDiscardChanges(value: boolean) {\n    this.isDiscardChangesModalOpen = false;\n    this.discardSubject.next(value);\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if (this.shouldPreventNavigation() && !this.isDiscardChangesModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  openDiscardChangesModal(): Observable<boolean> {\n    if (this.shouldPreventNavigation()) {\n      this.isDiscardChangesModalOpen = true;\n      return this.discardSubject;\n    }\n    return of(true);\n  }\n}\n"]}