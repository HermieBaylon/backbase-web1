{"version":3,"file":"loan-summary-edit-alias.component.js","sourceRoot":"","sources":["../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/loan-summary-edit-alias/loan-summary-edit-alias.component.ts","../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/loan-summary-edit-alias/loan-summary-edit-alias.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Inject, Input, Optional, Output } from '@angular/core';\n\nimport { InputInlineEditState } from '@backbase/ui-ang/input-inline-edit';\nimport { ACCOUNT_ALIAS_DISPLAYING_LEVEL, AccountAliasDisplayingLevel } from '@backbase/product-summary-common-ang';\n\nimport { aliasDisplayLevel } from './loan-summary-edit-alias.model';\n\n@Component({\n  selector: 'bb-loan-summary-edit-alias',\n  templateUrl: './loan-summary-edit-alias.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LoanSummaryEditAliasComponent {\n  private newAlias: string | undefined;\n  private _editState = InputInlineEditState.IDLE;\n  /**\n   * The alias text\n   */\n  @Input() alias: string | undefined;\n  /**\n   * Max length for alias\n   */\n  @Input() aliasMaxLength = 50;\n  /**\n   * Flag to show/hide edit alias button\n   */\n  @Input() showEditButton!: boolean;\n  /**\n   * Alias inline edit state\n   *\n   * @param value\n   */\n  @Input() set editState(value: InputInlineEditState) {\n    this._editState = value;\n  }\n  get editState(): InputInlineEditState {\n    return this._editState;\n  }\n  /**\n   * Emit on alias edit state changes\n   */\n  @Output() editStateChange = new EventEmitter<InputInlineEditState>();\n  /**\n   * Emits on alias changes\n   */\n  @Output() updateAlias = new EventEmitter<string>();\n  /**\n   * Emits on canceling update for alias\n   */\n  @Output() cancelAliasUpdate = new EventEmitter<void>();\n\n  /**\n   * Hint for alias editing\n   */\n  readonly aliasHint: string;\n  /**\n   *  Flag represents modal open state\n   */\n  isOpen = false;\n\n  constructor(\n    @Optional()\n    @Inject(ACCOUNT_ALIAS_DISPLAYING_LEVEL)\n    private readonly accountAliasDisplayingLevel: AccountAliasDisplayingLevel,\n  ) {\n    this.accountAliasDisplayingLevel = accountAliasDisplayingLevel || AccountAliasDisplayingLevel.USER;\n    this.aliasHint = this.getAliasHint();\n  }\n\n  onAcceptAlias(alias: string): void {\n    if ([this.newAlias, this.alias].includes(alias)) {\n      this.onEditStateChange(InputInlineEditState.IDLE);\n\n      return;\n    }\n\n    if (this.accountAliasDisplayingLevel === AccountAliasDisplayingLevel.ACCOUNT) {\n      this.newAlias = alias;\n      this.isOpen = true;\n    } else {\n      this.updateAlias.emit(alias);\n    }\n  }\n\n  onConfirmModal(): void {\n    this.isOpen = false;\n    this.updateAlias.emit(this.newAlias);\n  }\n\n  onCloseModal(): void {\n    this.isOpen = false;\n    this.onEditStateChange(InputInlineEditState.IDLE);\n  }\n\n  onEditStateChange(state: InputInlineEditState): void {\n    this._editState = state;\n    this.editStateChange.emit(state);\n  }\n\n  private getAliasHint(): string {\n    switch (this.accountAliasDisplayingLevel) {\n      case AccountAliasDisplayingLevel.USER: {\n        return aliasDisplayLevel.user;\n      }\n      case AccountAliasDisplayingLevel.ACCOUNT: {\n        return aliasDisplayLevel.account;\n      }\n    }\n  }\n}\n","<bb-input-inline-edit-ui\n  [inputText]=\"alias\"\n  [maxLength]=\"aliasMaxLength\"\n  [canEdit]=\"showEditButton\"\n  [hint]=\"aliasHint\"\n  [inputInlineTemplate]=\"customTemplate\"\n  [hasLoadingState]=\"true\"\n  [state]=\"editState\"\n  (accept)=\"onAcceptAlias($event)\"\n  (stateChange)=\"onEditStateChange($event)\"\n  (cancel)=\"cancelAliasUpdate.emit()\"\n  data-role=\"bb-loan-summary-edit-alias__inline-edit\"\n>\n</bb-input-inline-edit-ui>\n\n<ng-template let-text=\"inputText\" #customTemplate>\n  <bb-loan-item-name\n    [headingLevel]=\"3\"\n    [loanName]=\"text\"\n    class=\"bb-stack__item bb-stack__item--spacing-sm\"\n  ></bb-loan-item-name>\n</ng-template>\n\n<bb-loan-summary-edit-alias-confirm-modal\n  data-role=\"bb-loan-summary-edit-alias__confirm-modal\"\n  [isOpen]=\"isOpen\"\n  (confirmModal)=\"onConfirmModal()\"\n  (closeModal)=\"onCloseModal()\"\n></bb-loan-summary-edit-alias-confirm-modal>\n"]}