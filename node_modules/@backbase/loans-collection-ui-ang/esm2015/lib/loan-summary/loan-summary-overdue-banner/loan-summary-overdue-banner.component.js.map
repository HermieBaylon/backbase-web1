{"version":3,"file":"loan-summary-overdue-banner.component.js","sourceRoot":"","sources":["../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/loan-summary-overdue-banner/loan-summary-overdue-banner.component.ts","../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/loan-summary-overdue-banner/loan-summary-overdue-banner.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAa,MAAM,EAAE,MAAM,eAAe,CAAC;;;;;;;AAO3G,MAAM,OAAO,iCAAiC;IAL9C;QAOmB,OAAE,GAAG,iCAAiC,CAAC,GAAG,EAAE,CAAC;QAE9D;;WAEG;QACM,eAAU,GAAG;YACpB,KAAK,EAAE,sBAAsB,IAAI,CAAC,EAAE,EAAE;YACtC,WAAW,EAAE,4BAA4B,IAAI,CAAC,EAAE,EAAE;YAClD,MAAM,EAAE,uBAAuB,IAAI,CAAC,EAAE,EAAE;SACzC,CAAC;QAaF;;;;WAIG;QACM,qBAAgB,GAAG,IAAI,CAAC;QACjC;;WAEG;QACO,WAAM,GAAG,IAAI,YAAY,EAAQ,CAAC;KAkC7C;IAjBC,WAAW;QACT,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QAChD,MAAM,cAAc,GAAG,EAAE,CAAC;QAE1B,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;QACnG,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC;QAE1E,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,eAAe,EAAE;YACtE,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAClC;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC7B;QAED,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;IACzD,CAAC;;AAjEc,qCAAG,GAAG,CAAC,CAAC;kJADZ,iCAAiC;sIAAjC,iCAAiC,sQCP9C,muGA+EA;4FDxEa,iCAAiC;kBAL7C,SAAS;mBAAC;oBACT,QAAQ,EAAE,gCAAgC;oBAC1C,WAAW,EAAE,8CAA8C;oBAC3D,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAgBU,aAAa;sBAArB,KAAK;gBAIG,WAAW;sBAAnB,KAAK;gBAIG,YAAY;sBAApB,KAAK;gBAMG,gBAAgB;sBAAxB,KAAK;gBAII,MAAM;sBAAf,MAAM","sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnChanges, Output } from '@angular/core';\n\n@Component({\n  selector: 'bb-loan-summary-overdue-banner',\n  templateUrl: './loan-summary-overdue-banner.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LoanSummaryOverdueBannerComponent implements OnChanges {\n  private static _id = 0;\n  private readonly id = LoanSummaryOverdueBannerComponent._id++;\n\n  /**\n   * Ids for banner a11y references\n   */\n  readonly elementIds = {\n    title: `loan-overdue-title-${this.id}`,\n    description: `loan-overdue-description-${this.id}`,\n    amount: `loan-overdue-amount-${this.id}`,\n  };\n  /**\n   * Overdue amount\n   */\n  @Input() overdueAmount: string | undefined;\n  /**\n   * Overdue date\n   */\n  @Input() overdueDate: string | undefined;\n  /**\n   * Currency code\n   */\n  @Input() currencyCode: string | undefined;\n  /**\n   * Indicator to show/hide `payNow` button\n   *\n   * @default true\n   */\n  @Input() showPayNowButton = true;\n  /**\n   * Pay now event emitter\n   */\n  @Output() payNow = new EventEmitter<void>();\n\n  /**\n   * Overdue banner described by ids for a11y\n   */\n  describedByIds!: string | null;\n\n  /**\n   * Flag to show/hide overdue date with label\n   */\n  showOverdueDate!: boolean;\n\n  /**\n   * Flag to show/hide overdue amount\n   */\n  showOverdueAmount!: boolean;\n\n  ngOnChanges(): void {\n    const { amount, description } = this.elementIds;\n    const describedByIds = [];\n\n    this.showOverdueDate = Boolean(this.overdueDate && Date.parse(this.overdueDate) - Date.now() <= 0);\n    this.showOverdueAmount = Boolean(this.currencyCode && this.overdueAmount);\n\n    if ((!this.overdueDate && !this.overdueAmount) || this.showOverdueDate) {\n      describedByIds.push(description);\n    }\n\n    if (this.showOverdueAmount) {\n      describedByIds.push(amount);\n    }\n\n    this.describedByIds = describedByIds.join(' ') || null;\n  }\n}\n","<div\n  class=\"alert bb-loans-summary-overdue-alert bb-block bb-block--lg bb-block--md-md-down\"\n  [class.bb-loans-summary-overdue-alert--with-amount]=\"showOverdueAmount\"\n  role=\"alert\"\n  data-role=\"loan-overdue-banner\"\n  [attr.aria-describedby]=\"describedByIds\"\n  [attr.aria-labelledby]=\"elementIds.title\"\n>\n  <div class=\"bb-loans-summary-overdue-alert__body alert-body bb-stack bb-stack--wrap\">\n    <bb-icon-ui class=\"bb-stack__item bb-stack__item--align-top\" name=\"error-outline\" color=\"danger\"></bb-icon-ui>\n    <div class=\"alert-content bb-stack__item bb-stack__item--align-top bb-stack__item--fill\">\n      <strong\n        [id]=\"elementIds.title\"\n        class=\"alert-heading\"\n        i18n=\"Loan summary overdue banner title@@loans.loan-summary.overdue-banner.title\"\n      >\n        Overdue\n      </strong>\n      <div\n        *ngIf=\"showOverdueDate\"\n        [id]=\"elementIds.description\"\n        class=\"alert-description\"\n        data-role=\"loan-overdue-banner__payment-date\"\n        i18n=\"Loan summary overdue banner payment date@@loans.loan-summary.overdue-banner.payment-date\"\n      >\n        Payments missed since {{ overdueDate | bbDate }}\n      </div>\n      <div\n        *ngIf=\"!overdueDate && !overdueAmount\"\n        [id]=\"elementIds.description\"\n        class=\"alert-description\"\n        data-role=\"loan-overdue-banner__contact-manager\"\n        i18n=\"Loan summary overdue banner contact admin@@loans.loan-summary.overdue-banner.contact-admin\"\n      >\n        Please contact your account manager\n      </div>\n    </div>\n    <ng-container *ngIf=\"overdueAmount && currencyCode\">\n      <div class=\"bb-stack__break bb-stack__break--sm-down bb-stack__break--spacing-sm\"></div>\n      <div class=\"bb-stack__item\">\n        <div class=\"bb-stack\">\n          <div class=\"bb-stack__item bb-highlight\" [id]=\"elementIds.amount\">\n            <span\n              class=\"sr-only\"\n              i18n=\"Loan summary overdue banner a11y amount title@@loans.loan-summary.overdue-banner.a11y.amount-title\"\n            >\n              Overdue amount:\n            </span>\n            <bb-amount-ui\n              data-role=\"loan-overdue-banner__amount\"\n              [amount]=\"overdueAmount\"\n              [currency]=\"currencyCode\"\n              [mapCurrency]=\"false\"\n            ></bb-amount-ui>\n          </div>\n          <div class=\"bb-stack__item bb-stack__item--no-shrink\">\n            <button\n              *ngIf=\"showPayNowButton\"\n              (click)=\"payNow.emit()\"\n              class=\"bb-loans-summary-overdue-alert__button\"\n              bbButton\n              color=\"primary\"\n              data-role=\"loan-overdue-banner__pay-btn\"\n            >\n              <span\n                class=\"bb-d-md-inline-flex bb-d-none\"\n                i18n=\"\n                  Loan summary overdue banner pay now button text@@loans.loan-summary.overdue-banner.button.pay-now.text\"\n              >\n                Pay Now\n              </span>\n              <bb-icon-ui name=\"call-received\" class=\"bb-d-md-none bb-d-inline-flex\"></bb-icon-ui>\n            </button>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n"]}