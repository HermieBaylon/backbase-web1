{"version":3,"file":"loan-summary-formula.component.js","sourceRoot":"","sources":["../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/loan-summary-formula/loan-summary-formula.component.ts","../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/loan-summary-formula/loan-summary-formula.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAa,MAAM,eAAe,CAAC;AAI9E,OAAO,EAAE,iBAAiB,EAAE,MAAM,kCAAkC,CAAC;AAErE,OAAO,EAAE,uBAAuB,EAAE,MAAM,uCAAuC,CAAC;AAChF,OAAO,EAGL,0BAA0B,GAC3B,MAAM,8BAA8B,CAAC;;;;;;;AAOtC,MAAM,OAAO,2BACX,SAAQ,uBAA2D;IAmBnE,YAA6B,iBAAoC;QAC/D,KAAK,EAAE,CAAC;QADmB,sBAAiB,GAAjB,iBAAiB,CAAmB;QAhBjE;;WAEG;QACM,cAAS,GAAG,0BAA0B,CAAC;QAChD;;WAEG;QACM,wBAAmB,GAAwB,IAAI,CAAC,iBAAiB,CAAC,wBAAwB,CACjG,WAAW,EACX,IAAI,CACL,CAAC;IAQF,CAAC;IAED;;OAEG;IACH,WAAW;QACT,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;IAChE,CAAC;;4IA7BU,2BAA2B;gIAA3B,2BAA2B,2GClBxC,owHAmGA;4FDjFa,2BAA2B;kBALvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,WAAW,EAAE,uCAAuC;oBACpD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD","sourcesContent":["import { ChangeDetectionStrategy, Component, OnChanges } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { PresentationLoan } from '@backbase/data-ang/loans';\nimport { MediaQueryService } from '@backbase/ui-ang/media-query-lib';\n\nimport { LoanConfigBaseComponent } from '../../base/loan-config-base.component';\nimport {\n  LoanSummaryFormulaData,\n  LoanSummaryFormulaDataConfig,\n  LoanSummaryFormulaViewType,\n} from './loan-summary-formula.model';\n\n@Component({\n  selector: 'bb-loan-summary-formula',\n  templateUrl: './loan-summary-formula.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LoanSummaryFormulaComponent<T extends PresentationLoan = PresentationLoan>\n  extends LoanConfigBaseComponent<T, LoanSummaryFormulaDataConfig<T>>\n  implements OnChanges\n{\n  /**\n   * Loan formula view types\n   */\n  readonly viewTypes = LoanSummaryFormulaViewType;\n  /**\n   * Flag represents the tablet screen resolution\n   */\n  readonly isTabletResolution$: Observable<boolean> = this.mediaQueryService.isMediaBreakpointMatches(\n    'max-width',\n    'lg',\n  );\n  /**\n   * Loan formula data\n   */\n  formulaData!: LoanSummaryFormulaData;\n\n  constructor(private readonly mediaQueryService: MediaQueryService) {\n    super();\n  }\n\n  /**\n   * @internal\n   */\n  ngOnChanges(): void {\n    this.formulaData = this.dataConfig.call(undefined, this.loan);\n  }\n}\n","<ng-container *ngIf=\"formulaData.shouldShow\">\n  <bb-collapsible-card-ui\n    *ngIf=\"\n      formulaData.viewType === viewTypes.CollapsibleList ||\n        (formulaData.viewType === viewTypes.Equation && (isTabletResolution$ | async));\n      else staticCard\n    \"\n    [highlight]=\"true\"\n    [shadow]=\"false\"\n    [aria-label]=\"null\"\n    size=\"sm\"\n    data-role=\"loan-summary-formula\"\n    class=\"bb-loans-summary-formula bb-loans-summary-formula--list\"\n  >\n    <div bbCollapsibleTitle>\n      <ng-container *ngTemplateOutlet=\"total\"></ng-container>\n    </div>\n    <div bbCollapsibleBody>\n      <ng-container *ngTemplateOutlet=\"amounts\"></ng-container>\n    </div>\n  </bb-collapsible-card-ui>\n</ng-container>\n\n<ng-template #staticCard>\n  <div\n    class=\"bb-card bb-card--shadowless bb-card--highlight bb-card--sm bb-loans-summary-formula\"\n    [class.bb-loans-summary-formula--list]=\"formulaData.viewType === viewTypes.AmountsInRows\"\n    data-role=\"loan-summary-formula\"\n  >\n    <div class=\"bb-card__body row no-gutters\">\n      <ng-container [ngSwitch]=\"formulaData.viewType\">\n        <ng-container *ngSwitchCase=\"viewTypes.OnlyTotal\">\n          <ng-container *ngTemplateOutlet=\"total\"></ng-container>\n        </ng-container>\n\n        <ng-container *ngSwitchCase=\"viewTypes.AmountsInColumns\">\n          <ng-container *ngTemplateOutlet=\"amounts; context: { classes: 'col-12 col-sm-6 col-lg-3' }\"></ng-container>\n        </ng-container>\n\n        <ng-container *ngSwitchCase=\"viewTypes.AmountsInRows\">\n          <div class=\"col-12\">\n            <ng-container *ngTemplateOutlet=\"amounts\"></ng-container>\n          </div>\n        </ng-container>\n\n        <ng-container *ngSwitchCase=\"viewTypes.Equation\">\n          <div class=\"col-12 bb-stack bb-stack--wrap bb-loans-summary-formula__amounts-wrapper\">\n            <ng-container\n              *ngTemplateOutlet=\"total; context: { classes: 'bb-stack__item', showIcon: true }\"\n            ></ng-container>\n            <div class=\"bb-stack__break bb-stack__break--xl-down d-xl-none\"></div>\n            <ng-container\n              *ngTemplateOutlet=\"amounts; context: { classes: 'bb-stack__item', showIcon: true }\"\n            ></ng-container>\n          </div>\n        </ng-container>\n      </ng-container>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #total let-classes=\"classes\" let-showIcon=\"showIcon\">\n  <bb-loan-summary-amount-item\n    data-role=\"loan-summary-formula__total-amount\"\n    [amount]=\"formulaData.totalAmount.value\"\n    [title]=\"formulaData.totalAmount.title\"\n    [currency]=\"loan.currencyCode\"\n    amountClasses=\"bb-highlight\"\n    [ngClass]=\"classes\"\n  >\n  </bb-loan-summary-amount-item>\n  <bb-icon-ui\n    *ngIf=\"showIcon\"\n    [ngClass]=\"classes\"\n    name=\"drag-n-drop\"\n    aria-label=\"Equal\"\n    i18n-aria-label=\"Loan summary formula equal icon aria label@@loans.loan-summary-formula.equal-icon.aria-label\"\n  ></bb-icon-ui>\n</ng-template>\n\n<ng-template #amounts let-classes=\"classes\" let-showIcon=\"showIcon\">\n  <ng-container *ngFor=\"let amount of formulaData.amounts; let last = last\">\n    <div [ngClass]=\"classes\" data-role=\"loan-summary-formula__amount-wrapper\">\n      <bb-loan-summary-amount-item\n        data-role=\"loan-summary-formula__amount\"\n        [amount]=\"amount.value\"\n        [currency]=\"loan.currencyCode\"\n        [title]=\"amount.title\"\n      ></bb-loan-summary-amount-item>\n    </div>\n    <bb-icon-ui\n      *ngIf=\"showIcon && !last\"\n      [ngClass]=\"classes\"\n      name=\"add\"\n      aria-label=\"Plus\"\n      i18n-aria-label=\"Loan summary formula plus icon aria label@@loans.loan-summary-formula.plus-icon.aria-label\"\n    ></bb-icon-ui>\n  </ng-container>\n</ng-template>\n"]}