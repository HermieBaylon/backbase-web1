{"version":3,"file":"retail-loan-summary-overdue-banner.component.js","sourceRoot":"","sources":["../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/retail-loan-summary-overdue-banner/retail-loan-summary-overdue-banner.component.ts","../../../../../../../libs/loans-collection-ui-ang/src/lib/loan-summary/retail-loan-summary-overdue-banner/retail-loan-summary-overdue-banner.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,KAAK,EAAa,MAAM,eAAe,CAAC;;;;;;AAOrF,MAAM,OAAO,uCAAuC;IALpD;QAOmB,OAAE,GAAG,uCAAuC,CAAC,GAAG,EAAE,CAAC;QAEpE;;WAEG;QACM,eAAU,GAAG;YACpB,KAAK,EAAE,6BAA6B,IAAI,CAAC,EAAE,EAAE;YAC7C,WAAW,EAAE,mCAAmC,IAAI,CAAC,EAAE,EAAE;YACzD,MAAM,EAAE,8BAA8B,IAAI,CAAC,EAAE,EAAE;SAChD,CAAC;KA+CH;IAjBC,WAAW;QACT,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;QAChD,MAAM,cAAc,GAAG,EAAE,CAAC;QAE1B,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;QACnG,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC;QAE1E,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,eAAe,EAAE;YACtE,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAClC;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC7B;QAED,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;IACzD,CAAC;;AAxDc,2CAAG,GAAG,CAAC,CAAC;wJADZ,uCAAuC;4IAAvC,uCAAuC,sPCPpD,qhFA2DA;4FDpDa,uCAAuC;kBALnD,SAAS;mBAAC;oBACT,QAAQ,EAAE,uCAAuC;oBACjD,WAAW,EAAE,qDAAqD;oBAClE,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAgBU,aAAa;sBAArB,KAAK;gBAIG,WAAW;sBAAnB,KAAK;gBAIG,oBAAoB;sBAA5B,KAAK;gBAIG,YAAY;sBAApB,KAAK","sourcesContent":["import { ChangeDetectionStrategy, Component, Input, OnChanges } from '@angular/core';\n\n@Component({\n  selector: 'bb-retail-loan-summary-overdue-banner',\n  templateUrl: './retail-loan-summary-overdue-banner.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RetailLoanSummaryOverdueBannerComponent implements OnChanges {\n  private static _id = 0;\n  private readonly id = RetailLoanSummaryOverdueBannerComponent._id++;\n\n  /**\n   * Ids for banner a11y references\n   */\n  readonly elementIds = {\n    title: `retail-loan-overdue-title-${this.id}`,\n    description: `retail-loan-overdue-description-${this.id}`,\n    amount: `retail-loan-overdue-amount-${this.id}`,\n  };\n  /**\n   * Overdue amount\n   */\n  @Input() overdueAmount: string | undefined;\n  /**\n   * Overdue date\n   */\n  @Input() overdueDate: string | undefined;\n  /**\n   * Overdue payments count\n   */\n  @Input() overduePaymentsCount: number | undefined;\n  /**\n   * Currency code\n   */\n  @Input() currencyCode: string | undefined;\n  /**\n   * Overdue banner described by ids for a11y\n   */\n  describedByIds!: string | null;\n  /**\n   * Flag to show/hide overdue date with label\n   */\n  showOverdueDate!: boolean;\n  /**\n   * Flag to show/hide overdue amount\n   */\n  showOverdueAmount!: boolean;\n\n  ngOnChanges(): void {\n    const { amount, description } = this.elementIds;\n    const describedByIds = [];\n\n    this.showOverdueDate = Boolean(this.overdueDate && Date.parse(this.overdueDate) - Date.now() <= 0);\n    this.showOverdueAmount = Boolean(this.currencyCode && this.overdueAmount);\n\n    if ((!this.overdueDate && !this.overdueAmount) || this.showOverdueDate) {\n      describedByIds.push(description);\n    }\n\n    if (this.showOverdueAmount) {\n      describedByIds.push(amount);\n    }\n\n    this.describedByIds = describedByIds.join(' ') || null;\n  }\n}\n","<bb-alert-ui\n  role=\"alert\"\n  title=\"\"\n  data-role=\"retail-loan-overdue-banner\"\n  [attr.aria-describedby]=\"describedByIds\"\n  [attr.aria-labelledby]=\"elementIds.title\"\n>\n  <div class=\"bb-stack bb-stack--wrap\">\n    <div class=\"bb-stack__item bb-stack__item--align-top bb-stack__item--fill bb-text-bold bb-text-default\">\n      <ng-container *ngIf=\"overduePaymentsCount; else amountOverdue\">\n        <div\n          [id]=\"elementIds.description\"\n          data-role=\"retail-loan-overdue-banner__payments-count\"\n          i18n=\"Loan summary overdue banner payments count@@loans.retail-loan-summary.overdue-banner.payments-count\"\n        >\n          {{ overduePaymentsCount }} missed payment{{ overduePaymentsCount === 1 ? \"\" : \"s\" }}\n          <span *ngIf=\"showOverdueDate\">since {{ overdueDate | bbDate }}</span>\n        </div>\n      </ng-container>\n      <ng-template #amountOverdue>\n        <ng-container *ngIf=\"overdueAmount && currencyCode; else dateOverdue\">\n          <div\n            *ngIf=\"overdueAmount && currencyCode\"\n            [id]=\"elementIds.description\"\n            data-role=\"retail-loan-overdue-banner__overdue-amount\"\n            i18n=\"Loan summary overdue banner payment date@@loans.retail-loan-summary.overdue-banner.overdue-amount\"\n          >\n            <bb-amount-ui\n              data-role=\"retail-loan-overdue-banner__amount\"\n              [amount]=\"overdueAmount\"\n              [currency]=\"currencyCode\"\n              [mapCurrency]=\"true\"\n            ></bb-amount-ui>\n            overdue\n            <span *ngIf=\"showOverdueDate\">since {{ overdueDate | bbDate }}</span>\n          </div>\n        </ng-container>\n      </ng-template>\n      <ng-template #dateOverdue>\n        <div\n          *ngIf=\"showOverdueDate\"\n          [id]=\"elementIds.description\"\n          data-role=\"retail-loan-overdue-banner__payment-date\"\n          i18n=\"Loan summary overdue banner payment date@@loans.retail-loan-summary.overdue-banner.payment-date\"\n        >\n          Overdue since {{ overdueDate | bbDate }}\n        </div>\n      </ng-template>\n      <div\n        *ngIf=\"!overdueDate && (!overdueAmount || !currencyCode) && !overduePaymentsCount\"\n        [id]=\"elementIds.description\"\n        data-role=\"retail-loan-overdue-banner__default-message\"\n        i18n=\"Loan summary overdue banner contact admin@@loans.retail-loan-summary.overdue-banner.default-message\"\n      >\n        This account is overdue\n      </div>\n    </div>\n  </div>\n</bb-alert-ui>\n"]}