{"version":3,"file":"tooltip-trigger.directive.js","sourceRoot":"","sources":["../../../../../../../libs/loans-collection-ui-ang/src/lib/directives/tooltip-trigger/tooltip-trigger.directive.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,YAAY,EAAU,SAAS,EAAE,MAAM,eAAe,CAAC;AAC7F,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AACzD,OAAO,EAAE,OAAO,EAAE,MAAM,MAAM,CAAC;AAE/B,OAAO,EAAE,gBAAgB,EAAE,MAAM,oCAAoC,CAAC;AAEtE,OAAO,EAAE,oBAAoB,EAAE,MAAM,kCAAkC,CAAC;;;AAKxE,MAAM,OAAO,uBAAwB,SAAQ,oBAAoB;IAG/D,YAC2B,OAAyB,EACjC,UAAmC,EACnC,QAAmB;QAEpC,KAAK,EAAE,CAAC;QAJiB,YAAO,GAAP,OAAO,CAAkB;QACjC,eAAU,GAAV,UAAU,CAAyB;QACnC,aAAQ,GAAR,QAAQ,CAAW;QALrB,wBAAmB,GAAG,IAAI,OAAO,EAAW,CAAC;QAS5D,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC;IAC7E,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,SAAS,EAAE,EAAE;YAC5G,IAAI,SAAS,EAAE;gBACb,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACrB;iBAAM;gBACL,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;aACtB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAID,IAAI;QACF,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC;IAID,KAAK;QACH,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC;IAGD,MAAM;QACJ,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC;IACxD,CAAC;;wIAvCU,uBAAuB;4HAAvB,uBAAuB;4FAAvB,uBAAuB;kBAHnC,SAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;iBAC/B;;0BAKI,IAAI;6FAsBP,IAAI;sBAFH,YAAY;uBAAC,WAAW;;sBACxB,YAAY;uBAAC,SAAS;gBAOvB,KAAK;sBAFJ,YAAY;uBAAC,YAAY;;sBACzB,YAAY;uBAAC,UAAU;gBAMxB,MAAM;sBADL,YAAY;uBAAC,OAAO","sourcesContent":["import { Directive, ElementRef, Host, HostListener, OnInit, Renderer2 } from '@angular/core';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nimport { TooltipDirective } from '@backbase/ui-ang/tooltip-directive';\n\nimport { DestroyableComponent } from '../../base/destroyable.component';\n\n@Directive({\n  selector: '[bbTooltipTrigger]',\n})\nexport class TooltipTriggerDirective extends DestroyableComponent implements OnInit {\n  private readonly tooltipVisibility$$ = new Subject<boolean>();\n\n  constructor(\n    @Host() private readonly tooltip: TooltipDirective,\n    private readonly elementRef: ElementRef<HTMLElement>,\n    private readonly renderer: Renderer2,\n  ) {\n    super();\n\n    this.tooltip.triggers = 'manual';\n    this.renderer.setAttribute(this.elementRef.nativeElement, 'tabindex', '0');\n  }\n\n  ngOnInit() {\n    this.tooltipVisibility$$.pipe(debounceTime(100), takeUntil(this.componentDestroyed$)).subscribe((isVisible) => {\n      if (isVisible) {\n        this.tooltip.open();\n      } else {\n        this.tooltip.close();\n      }\n    });\n  }\n\n  @HostListener('mouseover')\n  @HostListener('focusin')\n  open() {\n    this.tooltipVisibility$$.next(true);\n  }\n\n  @HostListener('mouseleave')\n  @HostListener('focusout')\n  close() {\n    this.tooltipVisibility$$.next(false);\n  }\n\n  @HostListener('click')\n  toggle() {\n    this.tooltipVisibility$$.next(!this.tooltip.isOpen());\n  }\n}\n"]}