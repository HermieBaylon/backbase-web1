import { ChangeDetectionStrategy, Component, EventEmitter, Output } from '@angular/core';
import { LoanConfigBaseComponent } from '../base/loan-config-base.component';
import { LoanDefaultViewType } from '../models/loan.model';
import { CustomLoanStatus } from './loan-item-status/loan-item-status.model';
import { getLoanAlias, isLoanOverdue } from '../utils/loan.util';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/ui-ang/icon";
import * as i2 from "./loan-item-type/loan-item-type.component";
import * as i3 from "./loan-item-status/loan-item-status.component";
import * as i4 from "./loan-item-name/loan-item-name.component";
import * as i5 from "./loan-item-payment-info/loan-item-payment-info.component";
import * as i6 from "@backbase/ui-ang/amount";
import * as i7 from "@backbase/ui-ang/keyboard-click-directive";
import * as i8 from "@angular/common";
/**
 * @dynamic
 */
export class LoanListItemComponent extends LoanConfigBaseComponent {
    constructor() {
        super(...arguments);
        /**
         * Loan select emitter
         */
        this.selectLoan = new EventEmitter();
        /**
         * Container unique id
         */
        this.itemId = LoanListItemComponent.id++;
        /**
         * Loan overdue status
         */
        this.overdueStatus = CustomLoanStatus.Overdue;
    }
    /**
     * @internal
     */
    ngOnChanges() {
        const { viewType, availableBalance, paidAmount } = this.loan;
        this.loanIconName = this.dataConfig.icons[viewType];
        this.amountByType = viewType === LoanDefaultViewType.LineOfCredit ? availableBalance : paidAmount;
        this.isOverdue = isLoanOverdue(this.loan);
        this.loanAlias = getLoanAlias(this.loan);
    }
}
LoanListItemComponent.id = 0;
/** @nocollapse */ LoanListItemComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: LoanListItemComponent, deps: null, target: i0.ɵɵFactoryTarget.Component });
/** @nocollapse */ LoanListItemComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: LoanListItemComponent, selector: "bb-loan-list-item", outputs: { selectLoan: "selectLoan" }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: "<div\n  class=\"bb-loans-list-item-wrapper\"\n  [class.bb-loans-list-item-wrapper--overdue]=\"isOverdue\"\n  role=\"button\"\n  tabindex=\"0\"\n  aria-label=\"View loan details\"\n  [attr.aria-describedby]=\"'loan-item-text-' + itemId\"\n  data-role=\"bb-loans-list-item__button\"\n  i18n-aria-label=\"Loan list item button aria label@@loans.loan-list-item.button.aria-label\"\n  (bbKeyboardClick)=\"selectLoan.emit(loan)\"\n>\n  <div class=\"bb-stack bb-stack--align-top bb-table-text-default bb-loans-list-item\" id=\"loan-item-text-{{ itemId }}\">\n    <bb-icon-ui\n      class=\"bb-stack__item bb-stack__item--align-top bb-loans-list-item__icon\"\n      data-role=\"bb-loans-list-item__icon\"\n      [name]=\"loanIconName\"\n      backgroundType=\"square\"\n      color=\"secondary\"\n      size=\"lg\"\n    ></bb-icon-ui>\n    <div class=\"bb-stack__item bb-stack__item--fill bb-loans-list-item__base-info-wrapper\">\n      <div class=\"bb-block bb-block--xs bb-loans-list-item__type\">\n        <bb-loan-item-type [loanType]=\"loan.loanTypeAlias\"></bb-loan-item-type>\n        <bb-loan-item-status\n          *ngIf=\"isOverdue\"\n          [status]=\"overdueStatus\"\n          data-role=\"bb-loans-list-item__status\"\n        ></bb-loan-item-status>\n      </div>\n      <bb-loan-item-name [headingLevel]=\"3\" [loanName]=\"loanAlias\"></bb-loan-item-name>\n      <div class=\"bb-block bb-block--sm\">\n        <bb-loan-item-payment-info\n          [loan]=\"loan\"\n          [dataConfig]=\"dataConfig.paymentInfo\"\n          class=\"bb-subheader bb-subheader--regular\"\n        >\n        </bb-loan-item-payment-info>\n      </div>\n    </div>\n    <div\n      *ngIf=\"loan.currencyCode as currencyCode\"\n      class=\"bb-stack__item bb-stack__item--push-right bb-text-align-right bb-loans-list-item__amounts\"\n      data-role=\"bb-loans-list-item__amounts-wrapper\"\n    >\n      <div *ngIf=\"amountByType as amount\" class=\"bb-block bb-block--xs\">\n        <span\n          class=\"bb-text-bold\"\n          i18n=\"Loan list item amount balance text@@loans.loan-list-item.amount-balance.text\"\n          data-role=\"bb-loans-list-item__available-balance-label\"\n        >\n          {loan.viewType, select, LineOfCredit {Available balance} other {Amount repaid}}:\n        </span>\n        <bb-amount-ui\n          [amount]=\"amount\"\n          [currency]=\"currencyCode\"\n          [mapCurrency]=\"false\"\n          data-role=\"bb-loans-list-item__available-balance-amount\"\n        ></bb-amount-ui>\n        <span class=\"sr-only\">,</span>\n      </div>\n      <div *ngIf=\"loan.outstandingAmount as outstandingAmount\">\n        <span\n          class=\"bb-text-bold\"\n          i18n=\"Loan list item outstanding amount text@@loans.loan-list-item.outstanding-amount.text\"\n        >\n          Outstanding amount:\n        </span>\n        <bb-amount-ui\n          [amount]=\"outstandingAmount\"\n          [currency]=\"currencyCode\"\n          [mapCurrency]=\"false\"\n          data-role=\"bb-loans-list-item__outstanding-amount\"\n        >\n        </bb-amount-ui>\n      </div>\n    </div>\n  </div>\n</div>\n", components: [{ type: i1.IconComponent, selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }, { type: i2.LoanItemTypeComponent, selector: "bb-loan-item-type", inputs: ["loanType", "useSubtitleClass"] }, { type: i3.LoanItemStatusComponent, selector: "bb-loan-item-status", inputs: ["status", "itemStatusColorMap"] }, { type: i4.LoanItemNameComponent, selector: "bb-loan-item-name", inputs: ["loanName", "headingLevel"] }, { type: i5.LoanItemPaymentInfoComponent, selector: "bb-loan-item-payment-info" }, { type: i6.AmountComponent, selector: "bb-amount-ui", inputs: ["currency", "showPlusSign", "mapCurrency", "showPercent", "abbreviate", "decimalPlaces", "trailingZeroes", "amount"] }], directives: [{ type: i7.KeyboardClickDirective, selector: "[bbKeyboardClick]", outputs: ["bbKeyboardClick"] }, { type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: LoanListItemComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-loan-list-item',
                    templateUrl: './loan-list-item.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], propDecorators: { selectLoan: [{
                type: Output
            }] } });
//# sourceMappingURL=loan-list-item.component.js.map