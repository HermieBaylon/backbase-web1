import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormGroup, FormControl, Validators } from '@angular/forms';
import { PayverisEnrolmentComponentState } from '../../../model';
import { take } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/ui-ang/loading-indicator";
import * as i2 from "@backbase/ui-ang/alert";
import * as i3 from "@backbase/ui-ang/input-text";
import * as i4 from "@backbase/ui-ang/input-validation-message";
import * as i5 from "../billpay-payveris-ebills-enrolment-cancel-modal/billpay-payveris-ebills-enrolment-cancel-modal.component";
import * as i6 from "@angular/common";
import * as i7 from "@angular/forms";
import * as i8 from "@backbase/ui-ang/button";
export class BillpayPayverisEbillsEnrolmentOtpEntryComponent {
    constructor() {
        this.submitted = false;
        this.cancelModalOpen = false;
        this._passcodeFailed = false;
        this.passcodeRecentlyFailed = false;
        this.ComponentStates = PayverisEnrolmentComponentState;
        /**
         * The current state of the component. Controls loaded elements.
         */
        this.componentState = PayverisEnrolmentComponentState.Undefined;
        this.returnToPayeeList = new EventEmitter();
        this.passcodeEntry = new EventEmitter();
        this.passcodeForm = new FormGroup({
            passcode: new FormControl('', Validators.required),
        });
    }
    set passcodeFailed(hasFailed) {
        this._passcodeFailed = hasFailed;
        this.passcodeRecentlyFailed = hasFailed;
        if (hasFailed) {
            this.passcodeForm.controls['passcode'].markAsDirty();
            this.passcodeForm.controls['passcode'].markAsTouched();
            this.passcodeForm.controls['passcode'].setValue('');
            this.passcodeForm.controls['passcode'].valueChanges.pipe(take(1)).subscribe(() => {
                this.passcodeRecentlyFailed = false;
            });
        }
    }
    /**
     * Displays elements for a failed submission. Invalidates passcode form.
     */
    get passcodeFailed() {
        return this._passcodeFailed;
    }
    onPayverisOtpPasscodeSubmit() {
        this.submitted = true;
        if (this.passcodeForm.valid) {
            this.passcodeEntry.emit(this.passcodeForm.value);
        }
    }
    onModalResolve(operationCancelled) {
        this.cancelModalOpen = false;
        if (operationCancelled) {
            this.handleReturnToPayeeList();
        }
    }
    handleReturnToPayeeList() {
        this.returnToPayeeList.emit();
    }
}
BillpayPayverisEbillsEnrolmentOtpEntryComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPayverisEbillsEnrolmentOtpEntryComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
BillpayPayverisEbillsEnrolmentOtpEntryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: BillpayPayverisEbillsEnrolmentOtpEntryComponent, selector: "bb-billpay-payveris-ebills-enrolment-otp-entry", inputs: { payeeName: "payeeName", optTransportMethod: "optTransportMethod", componentState: "componentState", passcodeFailed: "passcodeFailed" }, outputs: { returnToPayeeList: "returnToPayeeList", passcodeEntry: "passcodeEntry" }, ngImport: i0, template: "<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking passcode...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget checking otp passcode\n        text@@bb-billpay-ebills-payveris-enrolment-otp-passcode.checking-otp-passcode.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget taking longer than usual\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.otp-entry-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <bb-alert-ui\n      *ngIf=\"passcodeFailed\"\n      title=\"The passcode you provided is incorrect. Please try again.\"\n      i18n-title=\"\n        Text for passcode failed alert@@bb-billpay-payveris-ebills-enrolment-otp-passcode.passcode-failed-alert\"\n      data-role=\"payveris-payee-otp-passcode-warning\"\n    >\n    </bb-alert-ui>\n\n    <div\n      class=\"bb-block bb-block--md\"\n      i18n=\"\n        otp passcode prompt|otp passcode prompt for payveris ebill enrolment otp passcode form\n        @@bb-billpay-payveris-ebills-enrolment-otp-passcode.note.otp-passcode-prompt\"\n    >\n      A one-time passocde (OTP) has been sent to {{ optTransportMethod }}.\n    </div>\n\n    <form [formGroup]=\"passcodeForm\" (ngSubmit)=\"onPayverisOtpPasscodeSubmit()\">\n      <div class=\"bb-block bb-block--xl\">\n        <div class=\"bb-form-field bb-form-field--xs\">\n          <bb-input-text-ui\n            name=\"passcode\"\n            label=\"Passcode\"\n            i18n-label=\"\n              otp passcode label|Label for otp passcode on payveris ebill otp passcode form\n              @@bb-billpay-payveris-ebills-enrolment-otp-passcode.label.otp-passcode-label\"\n            data-role=\"payveris-payee-otp-passcode-input\"\n            [maxLength]=\"255\"\n            formControlName=\"passcode\"\n            [autofocus]=\"true\"\n            ngDefaultControl\n          >\n          </bb-input-text-ui>\n        </div>\n\n        <bb-input-validation-message-ui\n          *ngIf=\"passcodeForm.controls['passcode'].invalid && passcodeRecentlyFailed; else submitPasscode\"\n          [showErrors]=\"true\"\n        >\n          <span\n            i18n=\"\n              Incorrect otp passcode warning|Validity warning for otp passcode on payveris ebill enrolment otp passcode\n              form @@bb-billpay-payveris-ebills-enrolment-otp-passcode.warning.otp-passcode-incorrect\"\n          >\n            Incorrect passcode entered\n          </span>\n        </bb-input-validation-message-ui>\n\n        <ng-template #submitPasscode>\n          <bb-input-validation-message-ui [showErrors]=\"submitted && passcodeForm.controls['passcode'].invalid\">\n            <span\n              data-role=\"payveris-payee-otp-passcode-blank-warning\"\n              i18n=\"\n                Empty otp passcode warning|Empty warning for otp passcode on payveris ebill enrolment otp passcode form\n                @@bb-billpay-payveris-ebills-enrolment-otp-passcode.warning.otp-passcode-empty\"\n            >\n              You must submit a passcode\n            </span>\n          </bb-input-validation-message-ui>\n        </ng-template>\n      </div>\n\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          type=\"submit\"\n          data-role=\"payveris-payee-otp-passcode-continue\"\n          i18n=\"\n            Continue enrolment|Continue enrolment button on payveris ebill enrolment otp-passcode form\n            @@bb-billpay-payveris-ebills-enrolment-otp-passcode.button.continue-enrolment\"\n        >\n          Continue\n        </button>\n\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          color=\"link\"\n          i18n=\"\n            Cancel enrolment|Cancel enrolment button on payveris ebill enrolment otp passcode form\n            @@bb-billpay-payveris-ebills-enrolment-otp-passcode.button.cancel-enrolment\"\n          (click)=\"cancelModalOpen = true\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n", components: [{ type: i1.LoadingIndicatorComponent, selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i2.AlertComponent, selector: "bb-alert-ui", inputs: ["modifier", "dismissible", "title", "message"], outputs: ["close"] }, { type: i3.InputTextComponent, selector: "bb-input-text-ui", inputs: ["placeholder", "maxLength", "minLength", "autocomplete", "readonly", "mask", "maskValidator", "showCharCounter"], outputs: ["valueChange"] }, { type: i4.InputValidationMessageComponent, selector: "bb-input-validation-message-ui", inputs: ["showErrors", "messageId"] }, { type: i5.BillpayPayverisEbillsEnrolmentCancelModalComponent, selector: "bb-billpay-payveris-ebills-enrolment-cancel-modal", outputs: ["resolve"] }], directives: [{ type: i6.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i6.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i7.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i7.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i7.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i8.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayPayverisEbillsEnrolmentOtpEntryComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-billpay-payveris-ebills-enrolment-otp-entry',
                    templateUrl: './billpay-payveris-ebills-enrolment-otp-entry.component.html',
                }]
        }], propDecorators: { payeeName: [{
                type: Input
            }], optTransportMethod: [{
                type: Input
            }], componentState: [{
                type: Input
            }], passcodeFailed: [{
                type: Input
            }], returnToPayeeList: [{
                type: Output
            }], passcodeEntry: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1wYXl2ZXJpcy1lYmlsbHMtZW5yb2xtZW50LW90cC1lbnRyeS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL21hbmFnZS1wYXllZXMtam91cm5leS9zcmMvY29tcG9uZW50cy9wYXl2ZXJpcy1lYmlsbHMtZW5yb2xsbWVudC9iaWxscGF5LXBheXZlcmlzLWViaWxscy1lbnJvbG1lbnQtb3RwLWVudHJ5L2JpbGxwYXktcGF5dmVyaXMtZWJpbGxzLWVucm9sbWVudC1vdHAtZW50cnkuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9tYW5hZ2UtcGF5ZWVzLWpvdXJuZXkvc3JjL2NvbXBvbmVudHMvcGF5dmVyaXMtZWJpbGxzLWVucm9sbG1lbnQvYmlsbHBheS1wYXl2ZXJpcy1lYmlsbHMtZW5yb2xtZW50LW90cC1lbnRyeS9iaWxscGF5LXBheXZlcmlzLWViaWxscy1lbnJvbG1lbnQtb3RwLWVudHJ5LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkUsT0FBTyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEUsT0FBTyxFQUF1QiwrQkFBK0IsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3RGLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7OztBQU10QyxNQUFNLE9BQU8sK0NBQStDO0lBSjVEO1FBS0UsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNsQixvQkFBZSxHQUFHLEtBQUssQ0FBQztRQUNoQixvQkFBZSxHQUFHLEtBQUssQ0FBQztRQUNoQywyQkFBc0IsR0FBRyxLQUFLLENBQUM7UUFDdEIsb0JBQWUsR0FBRywrQkFBK0IsQ0FBQztRQVUzRDs7V0FFRztRQUNNLG1CQUFjLEdBQUcsK0JBQStCLENBQUMsU0FBUyxDQUFDO1FBYzFELHNCQUFpQixHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDdkMsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBdUIsQ0FBQztRQUVsRSxpQkFBWSxHQUFHLElBQUksU0FBUyxDQUFDO1lBQzNCLFFBQVEsRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLFFBQVEsQ0FBQztTQUNuRCxDQUFDLENBQUM7S0EwQko7SUEzQ0MsSUFBYSxjQUFjLENBQUMsU0FBa0I7UUFDNUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxTQUFTLENBQUM7UUFDakMsSUFBSSxDQUFDLHNCQUFzQixHQUFHLFNBQVMsQ0FBQztRQUN4QyxJQUFJLFNBQVMsRUFBRTtZQUNiLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3JELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3ZELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNwRCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7Z0JBQy9FLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxLQUFLLENBQUM7WUFDdEMsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFRRDs7T0FFRztJQUNILElBQUksY0FBYztRQUNoQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDOUIsQ0FBQztJQUVELDJCQUEyQjtRQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN0QixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFO1lBQzNCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBNEIsQ0FBQyxDQUFDO1NBQ3pFO0lBQ0gsQ0FBQztJQUVELGNBQWMsQ0FBQyxrQkFBMkI7UUFDeEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7UUFDN0IsSUFBSSxrQkFBa0IsRUFBRTtZQUN0QixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztTQUNoQztJQUNILENBQUM7SUFFRCx1QkFBdUI7UUFDckIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2hDLENBQUM7OzZJQTlEVSwrQ0FBK0M7aUlBQS9DLCtDQUErQyw2VENUNUQsbXJKQXFIQTs0RkQ1R2EsK0NBQStDO2tCQUozRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxnREFBZ0Q7b0JBQzFELFdBQVcsRUFBRSw4REFBOEQ7aUJBQzVFOzhCQVdVLFNBQVM7c0JBQWpCLEtBQUs7Z0JBSUcsa0JBQWtCO3NCQUExQixLQUFLO2dCQUlHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBRU8sY0FBYztzQkFBMUIsS0FBSztnQkFZSSxpQkFBaUI7c0JBQTFCLE1BQU07Z0JBQ0csYUFBYTtzQkFBdEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIEZvcm1Db250cm9sLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgUGF5dmVyaXNPdHBQYXNzY29kZSwgUGF5dmVyaXNFbnJvbG1lbnRDb21wb25lbnRTdGF0ZSB9IGZyb20gJy4uLy4uLy4uL21vZGVsJztcbmltcG9ydCB7IHRha2UgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLWJpbGxwYXktcGF5dmVyaXMtZWJpbGxzLWVucm9sbWVudC1vdHAtZW50cnknLFxuICB0ZW1wbGF0ZVVybDogJy4vYmlsbHBheS1wYXl2ZXJpcy1lYmlsbHMtZW5yb2xtZW50LW90cC1lbnRyeS5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEJpbGxwYXlQYXl2ZXJpc0ViaWxsc0Vucm9sbWVudE90cEVudHJ5Q29tcG9uZW50IHtcbiAgc3VibWl0dGVkID0gZmFsc2U7XG4gIGNhbmNlbE1vZGFsT3BlbiA9IGZhbHNlO1xuICBwcml2YXRlIF9wYXNzY29kZUZhaWxlZCA9IGZhbHNlO1xuICBwYXNzY29kZVJlY2VudGx5RmFpbGVkID0gZmFsc2U7XG4gIHJlYWRvbmx5IENvbXBvbmVudFN0YXRlcyA9IFBheXZlcmlzRW5yb2xtZW50Q29tcG9uZW50U3RhdGU7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHBheWVlLlxuICAgKi9cbiAgQElucHV0KCkgcGF5ZWVOYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBUaGUgc2VsZWN0ZWQgT1RQIHRyYW5zcG9ydCBtZXRob2QuXG4gICAqL1xuICBASW5wdXQoKSBvcHRUcmFuc3BvcnRNZXRob2Q6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBjb21wb25lbnQuIENvbnRyb2xzIGxvYWRlZCBlbGVtZW50cy5cbiAgICovXG4gIEBJbnB1dCgpIGNvbXBvbmVudFN0YXRlID0gUGF5dmVyaXNFbnJvbG1lbnRDb21wb25lbnRTdGF0ZS5VbmRlZmluZWQ7XG5cbiAgQElucHV0KCkgc2V0IHBhc3Njb2RlRmFpbGVkKGhhc0ZhaWxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX3Bhc3Njb2RlRmFpbGVkID0gaGFzRmFpbGVkO1xuICAgIHRoaXMucGFzc2NvZGVSZWNlbnRseUZhaWxlZCA9IGhhc0ZhaWxlZDtcbiAgICBpZiAoaGFzRmFpbGVkKSB7XG4gICAgICB0aGlzLnBhc3Njb2RlRm9ybS5jb250cm9sc1sncGFzc2NvZGUnXS5tYXJrQXNEaXJ0eSgpO1xuICAgICAgdGhpcy5wYXNzY29kZUZvcm0uY29udHJvbHNbJ3Bhc3Njb2RlJ10ubWFya0FzVG91Y2hlZCgpO1xuICAgICAgdGhpcy5wYXNzY29kZUZvcm0uY29udHJvbHNbJ3Bhc3Njb2RlJ10uc2V0VmFsdWUoJycpO1xuICAgICAgdGhpcy5wYXNzY29kZUZvcm0uY29udHJvbHNbJ3Bhc3Njb2RlJ10udmFsdWVDaGFuZ2VzLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgdGhpcy5wYXNzY29kZVJlY2VudGx5RmFpbGVkID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgQE91dHB1dCgpIHJldHVyblRvUGF5ZWVMaXN0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgcGFzc2NvZGVFbnRyeSA9IG5ldyBFdmVudEVtaXR0ZXI8UGF5dmVyaXNPdHBQYXNzY29kZT4oKTtcblxuICBwYXNzY29kZUZvcm0gPSBuZXcgRm9ybUdyb3VwKHtcbiAgICBwYXNzY29kZTogbmV3IEZvcm1Db250cm9sKCcnLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcbiAgfSk7XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIGVsZW1lbnRzIGZvciBhIGZhaWxlZCBzdWJtaXNzaW9uLiBJbnZhbGlkYXRlcyBwYXNzY29kZSBmb3JtLlxuICAgKi9cbiAgZ2V0IHBhc3Njb2RlRmFpbGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wYXNzY29kZUZhaWxlZDtcbiAgfVxuXG4gIG9uUGF5dmVyaXNPdHBQYXNzY29kZVN1Ym1pdCgpIHtcbiAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7XG4gICAgaWYgKHRoaXMucGFzc2NvZGVGb3JtLnZhbGlkKSB7XG4gICAgICB0aGlzLnBhc3Njb2RlRW50cnkuZW1pdCh0aGlzLnBhc3Njb2RlRm9ybS52YWx1ZSBhcyBQYXl2ZXJpc090cFBhc3Njb2RlKTtcbiAgICB9XG4gIH1cblxuICBvbk1vZGFsUmVzb2x2ZShvcGVyYXRpb25DYW5jZWxsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNhbmNlbE1vZGFsT3BlbiA9IGZhbHNlO1xuICAgIGlmIChvcGVyYXRpb25DYW5jZWxsZWQpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmV0dXJuVG9QYXllZUxpc3QoKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVSZXR1cm5Ub1BheWVlTGlzdCgpIHtcbiAgICB0aGlzLnJldHVyblRvUGF5ZWVMaXN0LmVtaXQoKTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwiY29tcG9uZW50U3RhdGVcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiQ29tcG9uZW50U3RhdGVzLkNoZWNraW5nXCI+XG4gICAgPGJiLWxvYWRpbmctaW5kaWNhdG9yLXVpXG4gICAgICB0ZXh0PVwiQ2hlY2tpbmcgcGFzc2NvZGUuLi5cIlxuICAgICAgaTE4bi10ZXh0PVwiXG4gICAgICAgIEViaWxsIFBheXZlcmlzIEVucm9sbWVudCBXaWRnZXQgY2hlY2tpbmcgb3RwIHBhc3Njb2RlXG4gICAgICAgIHRleHRAQGJiLWJpbGxwYXktZWJpbGxzLXBheXZlcmlzLWVucm9sbWVudC1vdHAtcGFzc2NvZGUuY2hlY2tpbmctb3RwLXBhc3Njb2RlLnRleHRcIlxuICAgICAgbG9hZGVyU2l6ZT1cImxnXCJcbiAgICA+PC9iYi1sb2FkaW5nLWluZGljYXRvci11aT5cbiAgPC9uZy1jb250YWluZXI+XG5cbiAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiQ29tcG9uZW50U3RhdGVzLkNhbGxiYWNrXCI+XG4gICAgPGJiLWxvYWRpbmctaW5kaWNhdG9yLXVpXG4gICAgICB0ZXh0PVwiZUJpbGwgZW5yb2xtZW50IGlzIHRha2luZyBhIGxpdHRsZSBsb25nZXIgdGhhbiB1c3VhbCwgcGxlYXNlIGJlIHBhdGllbnQuLi5cIlxuICAgICAgaTE4bi10ZXh0PVwiXG4gICAgICAgIEViaWxsIFBheXZlcmlzIEVucm9sbWVudCBXaWRnZXQgdGFraW5nIGxvbmdlciB0aGFuIHVzdWFsXG4gICAgICAgIHRleHRAQGJiLWJpbGxwYXktZWJpbGxzLXBheXZlcmlzLWVucm9sbWVudC13aWRnZXQtYW5nLm90cC1lbnRyeS1jYWxsLWJhY2sudGV4dFwiXG4gICAgICBsb2FkZXJTaXplPVwibGdcIlxuICAgICAgZGF0YS1yb2xlPVwicGF5dmVyaXMtY2FsbGJhY2staW5mb1wiXG4gICAgPjwvYmItbG9hZGluZy1pbmRpY2F0b3ItdWk+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cIkNvbXBvbmVudFN0YXRlcy5SZWFkeVwiPlxuICAgIDxiYi1hbGVydC11aVxuICAgICAgKm5nSWY9XCJwYXNzY29kZUZhaWxlZFwiXG4gICAgICB0aXRsZT1cIlRoZSBwYXNzY29kZSB5b3UgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgdHJ5IGFnYWluLlwiXG4gICAgICBpMThuLXRpdGxlPVwiXG4gICAgICAgIFRleHQgZm9yIHBhc3Njb2RlIGZhaWxlZCBhbGVydEBAYmItYmlsbHBheS1wYXl2ZXJpcy1lYmlsbHMtZW5yb2xtZW50LW90cC1wYXNzY29kZS5wYXNzY29kZS1mYWlsZWQtYWxlcnRcIlxuICAgICAgZGF0YS1yb2xlPVwicGF5dmVyaXMtcGF5ZWUtb3RwLXBhc3Njb2RlLXdhcm5pbmdcIlxuICAgID5cbiAgICA8L2JiLWFsZXJ0LXVpPlxuXG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0tbWRcIlxuICAgICAgaTE4bj1cIlxuICAgICAgICBvdHAgcGFzc2NvZGUgcHJvbXB0fG90cCBwYXNzY29kZSBwcm9tcHQgZm9yIHBheXZlcmlzIGViaWxsIGVucm9sbWVudCBvdHAgcGFzc2NvZGUgZm9ybVxuICAgICAgICBAQGJiLWJpbGxwYXktcGF5dmVyaXMtZWJpbGxzLWVucm9sbWVudC1vdHAtcGFzc2NvZGUubm90ZS5vdHAtcGFzc2NvZGUtcHJvbXB0XCJcbiAgICA+XG4gICAgICBBIG9uZS10aW1lIHBhc3NvY2RlIChPVFApIGhhcyBiZWVuIHNlbnQgdG8ge3sgb3B0VHJhbnNwb3J0TWV0aG9kIH19LlxuICAgIDwvZGl2PlxuXG4gICAgPGZvcm0gW2Zvcm1Hcm91cF09XCJwYXNzY29kZUZvcm1cIiAobmdTdWJtaXQpPVwib25QYXl2ZXJpc090cFBhc3Njb2RlU3VibWl0KClcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0teGxcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJiLWZvcm0tZmllbGQgYmItZm9ybS1maWVsZC0teHNcIj5cbiAgICAgICAgICA8YmItaW5wdXQtdGV4dC11aVxuICAgICAgICAgICAgbmFtZT1cInBhc3Njb2RlXCJcbiAgICAgICAgICAgIGxhYmVsPVwiUGFzc2NvZGVcIlxuICAgICAgICAgICAgaTE4bi1sYWJlbD1cIlxuICAgICAgICAgICAgICBvdHAgcGFzc2NvZGUgbGFiZWx8TGFiZWwgZm9yIG90cCBwYXNzY29kZSBvbiBwYXl2ZXJpcyBlYmlsbCBvdHAgcGFzc2NvZGUgZm9ybVxuICAgICAgICAgICAgICBAQGJiLWJpbGxwYXktcGF5dmVyaXMtZWJpbGxzLWVucm9sbWVudC1vdHAtcGFzc2NvZGUubGFiZWwub3RwLXBhc3Njb2RlLWxhYmVsXCJcbiAgICAgICAgICAgIGRhdGEtcm9sZT1cInBheXZlcmlzLXBheWVlLW90cC1wYXNzY29kZS1pbnB1dFwiXG4gICAgICAgICAgICBbbWF4TGVuZ3RoXT1cIjI1NVwiXG4gICAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJwYXNzY29kZVwiXG4gICAgICAgICAgICBbYXV0b2ZvY3VzXT1cInRydWVcIlxuICAgICAgICAgICAgbmdEZWZhdWx0Q29udHJvbFxuICAgICAgICAgID5cbiAgICAgICAgICA8L2JiLWlucHV0LXRleHQtdWk+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxiYi1pbnB1dC12YWxpZGF0aW9uLW1lc3NhZ2UtdWlcbiAgICAgICAgICAqbmdJZj1cInBhc3Njb2RlRm9ybS5jb250cm9sc1sncGFzc2NvZGUnXS5pbnZhbGlkICYmIHBhc3Njb2RlUmVjZW50bHlGYWlsZWQ7IGVsc2Ugc3VibWl0UGFzc2NvZGVcIlxuICAgICAgICAgIFtzaG93RXJyb3JzXT1cInRydWVcIlxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGkxOG49XCJcbiAgICAgICAgICAgICAgSW5jb3JyZWN0IG90cCBwYXNzY29kZSB3YXJuaW5nfFZhbGlkaXR5IHdhcm5pbmcgZm9yIG90cCBwYXNzY29kZSBvbiBwYXl2ZXJpcyBlYmlsbCBlbnJvbG1lbnQgb3RwIHBhc3Njb2RlXG4gICAgICAgICAgICAgIGZvcm0gQEBiYi1iaWxscGF5LXBheXZlcmlzLWViaWxscy1lbnJvbG1lbnQtb3RwLXBhc3Njb2RlLndhcm5pbmcub3RwLXBhc3Njb2RlLWluY29ycmVjdFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgSW5jb3JyZWN0IHBhc3Njb2RlIGVudGVyZWRcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvYmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpPlxuXG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjc3VibWl0UGFzc2NvZGU+XG4gICAgICAgICAgPGJiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aSBbc2hvd0Vycm9yc109XCJzdWJtaXR0ZWQgJiYgcGFzc2NvZGVGb3JtLmNvbnRyb2xzWydwYXNzY29kZSddLmludmFsaWRcIj5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgIGRhdGEtcm9sZT1cInBheXZlcmlzLXBheWVlLW90cC1wYXNzY29kZS1ibGFuay13YXJuaW5nXCJcbiAgICAgICAgICAgICAgaTE4bj1cIlxuICAgICAgICAgICAgICAgIEVtcHR5IG90cCBwYXNzY29kZSB3YXJuaW5nfEVtcHR5IHdhcm5pbmcgZm9yIG90cCBwYXNzY29kZSBvbiBwYXl2ZXJpcyBlYmlsbCBlbnJvbG1lbnQgb3RwIHBhc3Njb2RlIGZvcm1cbiAgICAgICAgICAgICAgICBAQGJiLWJpbGxwYXktcGF5dmVyaXMtZWJpbGxzLWVucm9sbWVudC1vdHAtcGFzc2NvZGUud2FybmluZy5vdHAtcGFzc2NvZGUtZW1wdHlcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBZb3UgbXVzdCBzdWJtaXQgYSBwYXNzY29kZVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvYmItaW5wdXQtdmFsaWRhdGlvbi1tZXNzYWdlLXVpPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1idXR0b24tYmFyIGJiLWJ1dHRvbi1iYXItLXJldmVyc2VcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJiYi1idXR0b24tYmFyX19idXR0b25cIlxuICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgIGRhdGEtcm9sZT1cInBheXZlcmlzLXBheWVlLW90cC1wYXNzY29kZS1jb250aW51ZVwiXG4gICAgICAgICAgaTE4bj1cIlxuICAgICAgICAgICAgQ29udGludWUgZW5yb2xtZW50fENvbnRpbnVlIGVucm9sbWVudCBidXR0b24gb24gcGF5dmVyaXMgZWJpbGwgZW5yb2xtZW50IG90cC1wYXNzY29kZSBmb3JtXG4gICAgICAgICAgICBAQGJiLWJpbGxwYXktcGF5dmVyaXMtZWJpbGxzLWVucm9sbWVudC1vdHAtcGFzc2NvZGUuYnV0dG9uLmNvbnRpbnVlLWVucm9sbWVudFwiXG4gICAgICAgID5cbiAgICAgICAgICBDb250aW51ZVxuICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICBjbGFzcz1cImJiLWJ1dHRvbi1iYXJfX2J1dHRvblwiXG4gICAgICAgICAgY29sb3I9XCJsaW5rXCJcbiAgICAgICAgICBpMThuPVwiXG4gICAgICAgICAgICBDYW5jZWwgZW5yb2xtZW50fENhbmNlbCBlbnJvbG1lbnQgYnV0dG9uIG9uIHBheXZlcmlzIGViaWxsIGVucm9sbWVudCBvdHAgcGFzc2NvZGUgZm9ybVxuICAgICAgICAgICAgQEBiYi1iaWxscGF5LXBheXZlcmlzLWViaWxscy1lbnJvbG1lbnQtb3RwLXBhc3Njb2RlLmJ1dHRvbi5jYW5jZWwtZW5yb2xtZW50XCJcbiAgICAgICAgICAoY2xpY2spPVwiY2FuY2VsTW9kYWxPcGVuID0gdHJ1ZVwiXG4gICAgICAgID5cbiAgICAgICAgICBDYW5jZWxcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Zvcm0+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy1jb250YWluZXI+XG5cbjxiYi1iaWxscGF5LXBheXZlcmlzLWViaWxscy1lbnJvbG1lbnQtY2FuY2VsLW1vZGFsICpuZ0lmPVwiY2FuY2VsTW9kYWxPcGVuXCIgKHJlc29sdmUpPVwib25Nb2RhbFJlc29sdmUoJGV2ZW50KVwiPlxuPC9iYi1iaWxscGF5LXBheXZlcmlzLWViaWxscy1lbnJvbG1lbnQtY2FuY2VsLW1vZGFsPlxuIl19