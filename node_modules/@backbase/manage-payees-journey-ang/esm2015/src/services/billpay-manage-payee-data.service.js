import { __rest } from "tslib";
import { Injectable } from '@angular/core';
import { map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/data-ang/billpay";
export class BillpayManagePayeeDataService {
    /** @internal */
    constructor(dataService, searchService) {
        this.dataService = dataService;
        this.searchService = searchService;
    }
    addManualPayee(payee) {
        return this.dataService.postBillPayPayees({ billPayPayeesPostRequestBody: this.toPayeeRequest(payee) });
    }
    updateManualPayee(id, payee) {
        return this.dataService.putPayeeById({ payeeByIdPutRequestBody: this.toManualPutRequest(payee), id });
    }
    getManualPayee(id) {
        return this.dataService.getPayeeById({ id }).pipe(map(response => response.payee));
    }
    searchPayeesByName(name) {
        return this.searchService.getBillPaySearch({ name });
    }
    addElectronicPayee(payee) {
        return this.dataService.postBillPayElectronicPayees({
            billPayElectronicPayeesPostRequestBody: this.toElectronicPostRequest(payee),
        });
    }
    getElectronicPayee(id) {
        return this.dataService.getElectronicPayeeById({ id });
    }
    updateElectronicPayee(id, payee) {
        return this.dataService.putElectronicPayeeById({
            electronicPayeeByIdPutRequestBody: this.toElectronicPutRequest(payee),
            id,
        });
    }
    toPayeeRequest(payee) {
        const { name, address: { address1, address2, city, state, postalCode }, phoneNumber, accountNumber, nickName, } = payee;
        return {
            payee: Object.assign(Object.assign(Object.assign({ name, address: Object.assign(Object.assign({ address1 }, (address2 && { address2 })), { city,
                    state,
                    postalCode }) }, (phoneNumber && { phoneNumber: phoneNumber.replace(/^\+1/, '').replace(/\D/g, '') })), (accountNumber && { accountNumber })), (nickName && { nickName })),
        };
    }
    toManualPutRequest(payee) {
        return {
            payee: Object.assign(Object.assign({}, this.toPayeeRequest(payee).payee), { modifyPendingPayments: true }),
        };
    }
    toElectronicPutRequest(payee) {
        const { nickName } = payee, payeeWithoutNickname = __rest(payee, ["nickName"]);
        return {
            payee: Object.assign(Object.assign(Object.assign({}, payeeWithoutNickname), (nickName && { nickName })), { modifyPendingPayments: true }),
        };
    }
    toElectronicPostRequest(payee) {
        const { nickName } = payee, restProperties = __rest(payee, ["nickName"]);
        return {
            payee: Object.assign(Object.assign({}, (nickName && { nickName })), restProperties),
        };
    }
}
BillpayManagePayeeDataService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayManagePayeeDataService, deps: [{ token: i1.BillPayPayeesService }, { token: i1.BillPaySearchService }], target: i0.ɵɵFactoryTarget.Injectable });
BillpayManagePayeeDataService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayManagePayeeDataService });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BillpayManagePayeeDataService, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.BillPayPayeesService }, { type: i1.BillPaySearchService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbHBheS1tYW5hZ2UtcGF5ZWUtZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9tYW5hZ2UtcGF5ZWVzLWpvdXJuZXkvc3JjL3NlcnZpY2VzL2JpbGxwYXktbWFuYWdlLXBheWVlLWRhdGEuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQWtCM0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7QUFLckMsTUFBTSxPQUFPLDZCQUE2QjtJQUN4QyxnQkFBZ0I7SUFDaEIsWUFDbUIsV0FBaUMsRUFDakMsYUFBbUM7UUFEbkMsZ0JBQVcsR0FBWCxXQUFXLENBQXNCO1FBQ2pDLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtJQUNuRCxDQUFDO0lBRUosY0FBYyxDQUFDLEtBQTJCO1FBQ3hDLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLDRCQUE0QixFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzFHLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxFQUFVLEVBQUUsS0FBMkI7UUFDdkQsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxFQUFFLHVCQUF1QixFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3hHLENBQUM7SUFFRCxjQUFjLENBQUMsRUFBVTtRQUN2QixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDckYsQ0FBQztJQUVELGtCQUFrQixDQUFDLElBQVk7UUFDN0IsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsa0JBQWtCLENBQUMsS0FBaUM7UUFDbEQsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLDJCQUEyQixDQUFDO1lBQ2xELHNDQUFzQyxFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLENBQUM7U0FDNUUsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGtCQUFrQixDQUFDLEVBQVU7UUFDM0IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQscUJBQXFCLENBQUMsRUFBVSxFQUFFLEtBQTBCO1FBQzFELE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQztZQUM3QyxpQ0FBaUMsRUFBRSxJQUFJLENBQUMsc0JBQXNCLENBQUMsS0FBSyxDQUFDO1lBQ3JFLEVBQUU7U0FDSCxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU8sY0FBYyxDQUFDLEtBQTJCO1FBQ2hELE1BQU0sRUFDSixJQUFJLEVBQ0osT0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxFQUN4RCxXQUFXLEVBQ1gsYUFBYSxFQUNiLFFBQVEsR0FDVCxHQUFHLEtBQUssQ0FBQztRQUVWLE9BQU87WUFDTCxLQUFLLDhDQUNILElBQUksRUFDSixPQUFPLGdDQUNMLFFBQVEsSUFDTCxDQUFDLFFBQVEsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLEtBQzdCLElBQUk7b0JBQ0osS0FBSztvQkFDTCxVQUFVLE9BRVQsQ0FBQyxXQUFXLElBQUksRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQ3BGLENBQUMsYUFBYSxJQUFJLEVBQUUsYUFBYSxFQUFFLENBQUMsR0FDcEMsQ0FBQyxRQUFRLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUM5QjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRU8sa0JBQWtCLENBQUMsS0FBMkI7UUFDcEQsT0FBTztZQUNMLEtBQUssa0NBQ0EsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQ25DLHFCQUFxQixFQUFFLElBQUksR0FDNUI7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUVPLHNCQUFzQixDQUFDLEtBQTBCO1FBQ3ZELE1BQU0sRUFBRSxRQUFRLEtBQThCLEtBQUssRUFBOUIsb0JBQW9CLFVBQUssS0FBSyxFQUE3QyxZQUFxQyxDQUFRLENBQUM7UUFFcEQsT0FBTztZQUNMLEtBQUssZ0RBQ0Esb0JBQW9CLEdBQ3BCLENBQUMsUUFBUSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsS0FDN0IscUJBQXFCLEVBQUUsSUFBSSxHQUM1QjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRU8sdUJBQXVCLENBQUMsS0FBaUM7UUFDL0QsTUFBTSxFQUFFLFFBQVEsS0FBd0IsS0FBSyxFQUF4QixjQUFjLFVBQUssS0FBSyxFQUF2QyxZQUErQixDQUFRLENBQUM7UUFFOUMsT0FBTztZQUNMLEtBQUssa0NBQ0EsQ0FBQyxRQUFRLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUMxQixjQUFjLENBQ2xCO1NBQ0YsQ0FBQztJQUNKLENBQUM7OzJIQWhHVSw2QkFBNkI7K0hBQTdCLDZCQUE2Qjs0RkFBN0IsNkJBQTZCO2tCQUR6QyxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQmlsbFBheVBheWVlc1NlcnZpY2UsXG4gIEJpbGxQYXlTZWFyY2hTZXJ2aWNlLFxuICBCaWxsUGF5UGF5ZWVzUG9zdFJlcXVlc3RCb2R5LFxuICBCaWxsUGF5UGF5ZWVzUG9zdFJlc3BvbnNlQm9keSxcbiAgUGF5ZWVCeUlkUHV0UmVzcG9uc2VCb2R5LFxuICBCaWxsUGF5RWxlY3Ryb25pY1BheWVlc1Bvc3RSZXNwb25zZUJvZHksXG4gIEJpbGxQYXlFbGVjdHJvbmljUGF5ZWVzUG9zdFJlcXVlc3RCb2R5LFxuICBQYXllZUJ5SWRQdXRSZXF1ZXN0Qm9keSxcbiAgUG9zdEVsZWN0cm9uaWNSZXF1ZXN0UGF5ZWUsXG4gIEVsZWN0cm9uaWNQYXllZUJ5SWRQdXRSZXF1ZXN0Qm9keSxcbiAgUGF5ZWUsXG4gIEVsZWN0cm9uaWNQYXllZUJ5SWRHZXRSZXNwb25zZUJvZHksXG4gIEVsZWN0cm9uaWNQYXllZUJ5SWRQdXRSZXNwb25zZUJvZHksXG4gIEJpbGxQYXlTZWFyY2hHZXRSZXNwb25zZUJvZHksXG59IGZyb20gJ0BiYWNrYmFzZS9kYXRhLWFuZy9iaWxscGF5JztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgTWFudWFsUGF5ZWVGb3JtU3RhdGUsIEVsZWN0cm9uaWNQYXllZUZvcm0gfSBmcm9tICcuLi9tb2RlbCc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBCaWxscGF5TWFuYWdlUGF5ZWVEYXRhU2VydmljZSB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBkYXRhU2VydmljZTogQmlsbFBheVBheWVlc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBzZWFyY2hTZXJ2aWNlOiBCaWxsUGF5U2VhcmNoU2VydmljZSxcbiAgKSB7fVxuXG4gIGFkZE1hbnVhbFBheWVlKHBheWVlOiBNYW51YWxQYXllZUZvcm1TdGF0ZSk6IE9ic2VydmFibGU8QmlsbFBheVBheWVlc1Bvc3RSZXNwb25zZUJvZHk+IHtcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5wb3N0QmlsbFBheVBheWVlcyh7IGJpbGxQYXlQYXllZXNQb3N0UmVxdWVzdEJvZHk6IHRoaXMudG9QYXllZVJlcXVlc3QocGF5ZWUpIH0pO1xuICB9XG5cbiAgdXBkYXRlTWFudWFsUGF5ZWUoaWQ6IHN0cmluZywgcGF5ZWU6IE1hbnVhbFBheWVlRm9ybVN0YXRlKTogT2JzZXJ2YWJsZTxQYXllZUJ5SWRQdXRSZXNwb25zZUJvZHk+IHtcbiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5wdXRQYXllZUJ5SWQoeyBwYXllZUJ5SWRQdXRSZXF1ZXN0Qm9keTogdGhpcy50b01hbnVhbFB1dFJlcXVlc3QocGF5ZWUpLCBpZCB9KTtcbiAgfVxuXG4gIGdldE1hbnVhbFBheWVlKGlkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFBheWVlPiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZ2V0UGF5ZWVCeUlkKHsgaWQgfSkucGlwZShtYXAocmVzcG9uc2UgPT4gcmVzcG9uc2UucGF5ZWUpKTtcbiAgfVxuXG4gIHNlYXJjaFBheWVlc0J5TmFtZShuYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEJpbGxQYXlTZWFyY2hHZXRSZXNwb25zZUJvZHk+IHtcbiAgICByZXR1cm4gdGhpcy5zZWFyY2hTZXJ2aWNlLmdldEJpbGxQYXlTZWFyY2goeyBuYW1lIH0pO1xuICB9XG5cbiAgYWRkRWxlY3Ryb25pY1BheWVlKHBheWVlOiBQb3N0RWxlY3Ryb25pY1JlcXVlc3RQYXllZSk6IE9ic2VydmFibGU8QmlsbFBheUVsZWN0cm9uaWNQYXllZXNQb3N0UmVzcG9uc2VCb2R5PiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UucG9zdEJpbGxQYXlFbGVjdHJvbmljUGF5ZWVzKHtcbiAgICAgIGJpbGxQYXlFbGVjdHJvbmljUGF5ZWVzUG9zdFJlcXVlc3RCb2R5OiB0aGlzLnRvRWxlY3Ryb25pY1Bvc3RSZXF1ZXN0KHBheWVlKSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldEVsZWN0cm9uaWNQYXllZShpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxFbGVjdHJvbmljUGF5ZWVCeUlkR2V0UmVzcG9uc2VCb2R5PiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UuZ2V0RWxlY3Ryb25pY1BheWVlQnlJZCh7IGlkIH0pO1xuICB9XG5cbiAgdXBkYXRlRWxlY3Ryb25pY1BheWVlKGlkOiBzdHJpbmcsIHBheWVlOiBFbGVjdHJvbmljUGF5ZWVGb3JtKTogT2JzZXJ2YWJsZTxFbGVjdHJvbmljUGF5ZWVCeUlkUHV0UmVzcG9uc2VCb2R5PiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNlcnZpY2UucHV0RWxlY3Ryb25pY1BheWVlQnlJZCh7XG4gICAgICBlbGVjdHJvbmljUGF5ZWVCeUlkUHV0UmVxdWVzdEJvZHk6IHRoaXMudG9FbGVjdHJvbmljUHV0UmVxdWVzdChwYXllZSksXG4gICAgICBpZCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdG9QYXllZVJlcXVlc3QocGF5ZWU6IE1hbnVhbFBheWVlRm9ybVN0YXRlKTogQmlsbFBheVBheWVlc1Bvc3RSZXF1ZXN0Qm9keSB7XG4gICAgY29uc3Qge1xuICAgICAgbmFtZSxcbiAgICAgIGFkZHJlc3M6IHsgYWRkcmVzczEsIGFkZHJlc3MyLCBjaXR5LCBzdGF0ZSwgcG9zdGFsQ29kZSB9LFxuICAgICAgcGhvbmVOdW1iZXIsXG4gICAgICBhY2NvdW50TnVtYmVyLFxuICAgICAgbmlja05hbWUsXG4gICAgfSA9IHBheWVlO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBheWVlOiB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICBhZGRyZXNzMSxcbiAgICAgICAgICAuLi4oYWRkcmVzczIgJiYgeyBhZGRyZXNzMiB9KSxcbiAgICAgICAgICBjaXR5LFxuICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgIH0sXG4gICAgICAgIC4uLihwaG9uZU51bWJlciAmJiB7IHBob25lTnVtYmVyOiBwaG9uZU51bWJlci5yZXBsYWNlKC9eXFwrMS8sICcnKS5yZXBsYWNlKC9cXEQvZywgJycpIH0pLFxuICAgICAgICAuLi4oYWNjb3VudE51bWJlciAmJiB7IGFjY291bnROdW1iZXIgfSksXG4gICAgICAgIC4uLihuaWNrTmFtZSAmJiB7IG5pY2tOYW1lIH0pLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0b01hbnVhbFB1dFJlcXVlc3QocGF5ZWU6IE1hbnVhbFBheWVlRm9ybVN0YXRlKTogUGF5ZWVCeUlkUHV0UmVxdWVzdEJvZHkge1xuICAgIHJldHVybiB7XG4gICAgICBwYXllZToge1xuICAgICAgICAuLi50aGlzLnRvUGF5ZWVSZXF1ZXN0KHBheWVlKS5wYXllZSxcbiAgICAgICAgbW9kaWZ5UGVuZGluZ1BheW1lbnRzOiB0cnVlLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0b0VsZWN0cm9uaWNQdXRSZXF1ZXN0KHBheWVlOiBFbGVjdHJvbmljUGF5ZWVGb3JtKTogRWxlY3Ryb25pY1BheWVlQnlJZFB1dFJlcXVlc3RCb2R5IHtcbiAgICBjb25zdCB7IG5pY2tOYW1lLCAuLi5wYXllZVdpdGhvdXROaWNrbmFtZSB9ID0gcGF5ZWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF5ZWU6IHtcbiAgICAgICAgLi4ucGF5ZWVXaXRob3V0Tmlja25hbWUsXG4gICAgICAgIC4uLihuaWNrTmFtZSAmJiB7IG5pY2tOYW1lIH0pLFxuICAgICAgICBtb2RpZnlQZW5kaW5nUGF5bWVudHM6IHRydWUsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRvRWxlY3Ryb25pY1Bvc3RSZXF1ZXN0KHBheWVlOiBQb3N0RWxlY3Ryb25pY1JlcXVlc3RQYXllZSk6IEJpbGxQYXlFbGVjdHJvbmljUGF5ZWVzUG9zdFJlcXVlc3RCb2R5IHtcbiAgICBjb25zdCB7IG5pY2tOYW1lLCAuLi5yZXN0UHJvcGVydGllcyB9ID0gcGF5ZWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF5ZWU6IHtcbiAgICAgICAgLi4uKG5pY2tOYW1lICYmIHsgbmlja05hbWUgfSksXG4gICAgICAgIC4uLnJlc3RQcm9wZXJ0aWVzLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iXX0=