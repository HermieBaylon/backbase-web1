{"version":3,"file":"backbase-manage-payees-journey-ang.js","sources":["../../../../libs/manage-payees-journey/src/services/manage-payees-journey-config.service.ts","../../../../libs/manage-payees-journey/src/communication.service.ts","../../../../libs/manage-payees-journey/src/services/manage-payees-navigation.service.ts","../../../../libs/manage-payees-journey/src/manage-payees-journey.component.ts","../../../../libs/manage-payees-journey/src/components/payee-list/billpay-payee-summary-item/billpay-payee-summary-item.component.ts","../../../../libs/manage-payees-journey/src/components/payee-list/billpay-payee-summary-item/billpay-payee-summary-item.component.html","../../../../libs/manage-payees-journey/src/components/payee-list/billpay-payee-summary-list/billpay-payee-summary-list.component.ts","../../../../libs/manage-payees-journey/src/components/payee-list/billpay-payee-summary-list/billpay-payee-summary-list.component.html","../../../../libs/manage-payees-journey/src/views/billpay-payee-list/billpay-payee-list-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-payee-list/billpay-payee-list-view.component.html","../../../../libs/manage-payees-journey/src/services/billpay-payee-summary-widget.service.ts","../../../../libs/manage-payees-journey/src/components/payee-summary/billpay-payee-stepper/billpay-payee-stepper.component.ts","../../../../libs/manage-payees-journey/src/components/payee-summary/billpay-payee-stepper/billpay-payee-stepper.component.html","../../../../libs/manage-payees-journey/src/components/payee-summary/billpay-payee-information/billpay-payee-information.component.ts","../../../../libs/manage-payees-journey/src/components/payee-summary/billpay-payee-information/billpay-payee-information.component.html","../../../../libs/manage-payees-journey/src/views/billpay-payee-summary/billpay-payee-summary-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-payee-summary/billpay-payee-summary-view.component.html","../../../../libs/manage-payees-journey/src/model/payveris-enrolment-state.enum.ts","../../../../libs/manage-payees-journey/src/services/billpay-manage-payee-state.service.ts","../../../../libs/manage-payees-journey/src/model/base-electronic-payee-review-page.model.ts","../../../../libs/manage-payees-journey/src/model/base-electronic-payee-page.model.ts","../../../../libs/manage-payees-journey/src/services/billpay-payveris-ebills-enrolment-widget.service.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-cancel-modal/billpay-payveris-ebills-enrolment-cancel-modal.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-cancel-modal/billpay-payveris-ebills-enrolment-cancel-modal.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-select-biller/billpay-payveris-ebills-enrolment-select-biller.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-select-biller/billpay-payveris-ebills-enrolment-select-biller.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-login/billpay-payveris-ebills-enrolment-login.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-login/billpay-payveris-ebills-enrolment-login.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-mfa-entry/billpay-payveris-ebills-enrolment-mfa-entry.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-mfa-entry/billpay-payveris-ebills-enrolment-mfa-entry.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-otp-select/billpay-payveris-ebills-enrolment-otp-select.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-otp-select/billpay-payveris-ebills-enrolment-otp-select.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-otp-entry/billpay-payveris-ebills-enrolment-otp-entry.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-otp-entry/billpay-payveris-ebills-enrolment-otp-entry.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-captcha/billpay-payveris-ebills-enrolment-captcha.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-captcha/billpay-payveris-ebills-enrolment-captcha.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-select-account/billpay-payveris-ebills-enrolment-select-account.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-select-account/billpay-payveris-ebills-enrolment-select-account.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-error/billpay-payveris-ebills-enrolment-error.component.ts","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-error/billpay-payveris-ebills-enrolment-error.component.html","../../../../libs/manage-payees-journey/src/components/payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-notification-success/billpay-payveris-ebills-enrolment-notification-success.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-ebills-enrolment/billpay-ebills-enrolment-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-ebills-enrolment/billpay-ebills-enrolment-view.component.html","../../../../libs/manage-payees-journey/src/views/billpay-manage-payee/billpay-manage-payee-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-enrolment/billpay-enrolment-view.component.ts","../../../../libs/manage-payees-journey/src/services/billpay-manage-payee-data.service.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-manual-payee-review/billpay-manual-payee-review.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-manual-payee-review/billpay-manual-payee-review.component.html","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-cancel-new-payee-modal/billpay-cancel-new-payee-modal.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-cancel-new-payee-modal/billpay-cancel-new-payee-modal.component.html","../../../../libs/manage-payees-journey/src/views/billpay-create-manual-payee-review/billpay-create-manual-payee-review-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-create-manual-payee-review/billpay-create-manual-payee-review-view.component.html","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-cancel-edit-payee-modal/billpay-cancel-edit-payee-modal.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-cancel-edit-payee-modal/billpay-cancel-edit-payee-modal.component.html","../../../../libs/manage-payees-journey/src/views/billpay-edit-manual-payee-review/billpay-edit-manual-payee-review-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-edit-manual-payee-review/billpay-edit-manual-payee-review-view.component.html","../../../../libs/manage-payees-journey/src/directives/base-electronic-payee-review-page.model.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-electronic-payee-review/billpay-electronic-payee-review.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-electronic-payee-review/billpay-electronic-payee-review.component.html","../../../../libs/manage-payees-journey/src/views/billpay-create-electronic-payee-review/billpay-create-electronic-payee-review-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-create-electronic-payee-review/billpay-create-electronic-payee-review-view.component.html","../../../../libs/manage-payees-journey/src/views/billpay-edit-electronic-payee-review/billpay-edit-electronic-payee-review-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-edit-electronic-payee-review/billpay-edit-electronic-payee-review-view.component.html","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-electronic-payee-form/billpay-electronic-payee-form.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-electronic-payee-form/billpay-electronic-payee-form.component.html","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-electronic-payee-search/billpay-electronic-payee-search.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-electronic-payee-search/billpay-electronic-payee-search.component.html","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-manual-payee-form/billpay-manual-payee-form.component.ts","../../../../libs/manage-payees-journey/src/components/add-payee/billpay-manual-payee-form/billpay-manual-payee-form.component.html","../../../../libs/manage-payees-journey/src/components/manage-payees-journey-ui.module.ts","../../../../libs/manage-payees-journey/src/services/billpay-manage-payee-deactivate-guard.service.ts","../../../../libs/manage-payees-journey/src/views/billpay-search-payee/billpay-search-payee-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-search-payee/billpay-search-payee-view.component.html","../../../../libs/manage-payees-journey/src/views/billpay-create-manual-payee/billpay-create-manual-payee-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-create-manual-payee/billpay-create-manual-payee-view.component.html","../../../../libs/manage-payees-journey/src/views/billpay-edit-manual-payee/billpay-edit-manual-payee-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-edit-manual-payee/billpay-edit-manual-payee-view.component.html","../../../../libs/manage-payees-journey/src/views/billpay-create-electronic-payee/billpay-create-electronic-payee-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-create-electronic-payee/billpay-create-electronic-payee-view.component.html","../../../../libs/manage-payees-journey/src/views/billpay-edit-electronic-payee/billpay-edit-electronic-payee-view.component.ts","../../../../libs/manage-payees-journey/src/views/billpay-edit-electronic-payee/billpay-edit-electronic-payee-view.component.html","../../../../libs/manage-payees-journey/src/manage-payees-journey.module.ts","../../../../libs/manage-payees-journey/backbase-manage-payees-journey-ang.ts"],"sourcesContent":["import { Injectable, Optional, Inject, InjectionToken } from '@angular/core';\n\nexport const ManagePayeesJourneyConfigurationToken = new InjectionToken<ManagePayeesJourneyConfiguration>(\n  'ManagePayeesJourneyConfigurationToken injection token',\n);\n\nexport interface ManagePayeesJourneyConfiguration {\n  notificationDismissTime: number;\n  multipleBillsMode: boolean;\n}\n\nconst configDefaults: ManagePayeesJourneyConfiguration = {\n  notificationDismissTime: 5000,\n  multipleBillsMode: false,\n};\n\n@Injectable()\nexport class ManagePayeesJourneyConfigService {\n  private _config: ManagePayeesJourneyConfiguration;\n\n  constructor(@Optional() @Inject(ManagePayeesJourneyConfigurationToken) config: ManagePayeesJourneyConfiguration) {\n    config = config || {};\n    this._config = { ...configDefaults, ...config };\n  }\n\n  get defaults(): ManagePayeesJourneyConfiguration {\n    return configDefaults;\n  }\n\n  get notificationDismissTime(): number {\n    return this._config.notificationDismissTime;\n  }\n  get multipleBillsMode(): boolean {\n    return this._config.multipleBillsMode;\n  }\n}\n","export abstract class CommunicationService {\n  abstract navigateToOneOffPayment(_: string): void;\n  abstract navigateToRecurringPayment(_: string): void;\n  abstract navigateToPaymentsList(): void;\n  abstract navigateToMultiplePaymentsForm(): void;\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\nimport { CommunicationService } from '../communication.service';\nimport { ManagePayeesJourneyConfigService } from './manage-payees-journey-config.service';\n\n@Injectable()\nexport class ManagePayeesNavigationService {\n  private readonly defaultRelative: NavigationExtras;\n\n  constructor(\n    private readonly router: Router,\n    private readonly route: ActivatedRoute,\n    private config: ManagePayeesJourneyConfigService,\n    @Optional() private communicationService: CommunicationService,\n  ) {\n    this.defaultRelative = { relativeTo: this.route };\n  }\n\n  navigateToPayeeList(extras?: NavigationExtras) {\n    if (this.config.multipleBillsMode) {\n      this.communicationService?.navigateToMultiplePaymentsForm();\n    } else {\n      this.router.navigate(['./'], extras || this.defaultRelative);\n    }\n  }\n\n  navigateToSearch(extras?: NavigationExtras) {\n    this.router.navigate(['payees'], extras || this.defaultRelative);\n  }\n\n  navigateToManualPayeeForm(extras?: NavigationExtras) {\n    this.router.navigate(['payees/manual'], extras || this.defaultRelative);\n  }\n\n  navigateToManualPayeeReview(extras?: NavigationExtras) {\n    this.router.navigate(['payees/manual/review'], extras || this.defaultRelative);\n  }\n\n  navigateToEditManualPayeeForm(id: string, extras?: NavigationExtras) {\n    this.router.navigate(['payees/manual', 'edit', id], extras || this.defaultRelative);\n  }\n\n  navigateToEditManualReview(id: string, extras?: NavigationExtras) {\n    this.router.navigate(['payees/manual/edit', id, 'review'], extras || this.defaultRelative);\n  }\n\n  navigateToElectronicPayeeForm(id: string, extras?: NavigationExtras) {\n    this.router.navigate(['payees/electronic', id], { ...this.defaultRelative, ...extras });\n  }\n\n  navigateToElectronicPayeeReview(id: string, extras?: NavigationExtras) {\n    this.router.navigate(['payees/electronic', id, 'review'], { ...this.defaultRelative, ...extras });\n  }\n\n  navigateToEditElectronicPayeeForm(id: string, extras?: NavigationExtras) {\n    this.router.navigate(['payees/electronic', 'edit', id], extras || this.defaultRelative);\n  }\n\n  navigateToEditElectronicPayeeReview(id: string, extras?: NavigationExtras) {\n    this.router.navigate(['payees/electronic', 'edit', id, 'review'], extras || this.defaultRelative);\n  }\n\n  navigateToPayeeSummary(payeeID: string, extras?: NavigationExtras) {\n    this.router.navigate(['payee-summary', { payeeID }], extras || this.defaultRelative);\n  }\n\n  navigateToPayveris(payeeID: string, extras?: NavigationExtras) {\n    this.router.navigate(['ebills', { payeeID }], extras || this.defaultRelative);\n  }\n\n  // External Navigations\n  navigateToRecurringPayment(id: string) {\n    this.communicationService?.navigateToRecurringPayment(id);\n  }\n  navigateToOneOffPayment(id: string) {\n    this.communicationService?.navigateToOneOffPayment(id);\n  }\n  navigateToPendingPayments() {\n    this.communicationService?.navigateToPaymentsList();\n  }\n}\n","import { Component } from '@angular/core';\nimport { ManagePayeesNavigationService } from './services/manage-payees-navigation.service';\n\n@Component({\n  selector: 'bb-manage-payees-journey',\n  template: `<router-outlet></router-outlet>`,\n  providers: [ManagePayeesNavigationService],\n})\nexport class ManagePayeesJourneyComponent {}\n","import { Component } from '@angular/core';\nimport {\n  RECURRING_PAYMENT,\n  PaymentType,\n  BillpayPayeeDataService,\n  BillpayPayeeSummaryItemBaseComponent,\n} from '@backbase/billpay-journeys-common';\nimport { NgbDropdownConfig } from '@ng-bootstrap/ng-bootstrap';\nimport { ManagePayeesNavigationService } from '../../../services/manage-payees-navigation.service';\n\n@Component({\n  selector: 'bb-billpay-payee-summary-item',\n  templateUrl: './billpay-payee-summary-item.component.html',\n  providers: [ManagePayeesNavigationService],\n})\nexport class BillpayPayeeSummaryItemComponent extends BillpayPayeeSummaryItemBaseComponent {\n  constructor(\n    readonly payeeDataService: BillpayPayeeDataService,\n    readonly ngbDropdownConfig: NgbDropdownConfig,\n    private readonly navigationService: ManagePayeesNavigationService,\n  ) {\n    super(payeeDataService, ngbDropdownConfig);\n  }\n\n  handlePayPayee(type?: PaymentType): void {\n    if (!this.payeeSummary) return;\n\n    if (type === RECURRING_PAYMENT) {\n      this.navigationService.navigateToRecurringPayment(this.payeeSummary.id);\n    } else {\n      this.navigationService.navigateToOneOffPayment(this.payeeSummary.id);\n    }\n  }\n\n  handleEditPayee(): void {\n    if (this.payeeSummary && !this.payeeSummary?.electronic) {\n      this.navigationService.navigateToEditManualPayeeForm(this.payeeSummary.id);\n    } else if (this.payeeSummary?.electronic) {\n      this.navigationService.navigateToEditElectronicPayeeForm(this.payeeSummary.id);\n    }\n  }\n  handleViewSummary() {\n    if (this.payeeSummary) {\n      this.navigationService.navigateToPayeeSummary(this.payeeSummary.id);\n    }\n  }\n\n  handleGetEbills() {\n    if (this.payeeSummary) {\n      this.navigationService.navigateToPayveris(this.payeeSummary.id);\n    }\n  }\n}\n","<div class=\"bb-stack bb-stack--wrap\">\n  <div class=\"bb-stack__item bb-stack__item--fill\">\n    <a\n      attr.aria-describedBy=\"{{\n        [\n          ebillRetrieveErrorId,\n          noEbillsDueId,\n          ebillsAvailableId,\n          recurringPaymentScheduledIdId,\n          ebillPaymentScheduledId,\n          ebillDueOnId,\n          ebillSupportErrorId,\n          ebillUserActionErrorId,\n          ebillUnknownErrorId,\n          payeeAmountId\n        ].join(' ')\n      }}\"\n      (bbKeyboardClick)=\"handleViewSummary()\"\n      class=\"bb-text-bold\"\n      tabindex=\"0\"\n      role=\"button\"\n      style=\"cursor: pointer\"\n      [attr.aria-label]=\"'view payee summary for ' + payeeName\"\n      data-role=\"payee-name\"\n      >{{ payeeName }}</a\n    >\n\n    <div *ngIf=\"isLatestEbillPaid\" class=\"bb-stack bb-stack--align-top\">\n      <bb-icon-ui\n        class=\"bb-stack__item bb-stack__item--spacing-none\"\n        data-role=\"ebill-payment-icon\"\n        name=\"savings-accounts\"\n        color=\"secondary\"\n      ></bb-icon-ui>\n      <span\n        id=\"{{ ebillPaymentScheduledId }}\"\n        class=\"bb-stack__item bb-text-support\"\n        data-role=\"ebill-payment-label\"\n        i18n=\"\n          eBill payment scheduled note|Text for the information that an eBill payment is\n          scheduled@@bb-billpay-payee-summary-item.note.eBill-payment-scheduled\"\n        >eBill payment scheduled</span\n      >\n    </div>\n\n    <div *ngIf=\"areEbillsDue\" class=\"bb-stack\">\n      <bb-icon-ui\n        class=\"bb-stack__item bb-stack__item--spacing-sm\"\n        data-role=\"receipt-icon\"\n        size=\"sm\"\n        name=\"receipt\"\n        color=\"secondary\"\n      ></bb-icon-ui>\n      <span\n        id=\"{{ ebillDueOnId }}\"\n        class=\"bb-stack__item bb-subtitle bb-text-support\"\n        data-role=\"due-date-label\"\n        *ngIf=\"payeeSummary?.ebill?.latestBill?.paymentDate as ebillPaymentDate\"\n        i18n=\"Ebill due note|Text for the information about the due eBill@@bb-billpay-payee-summary-item.note.ebill-due\"\n        >eBill due on {{ ebillPaymentDate | bbDate: 'MMM d' }}</span\n      >\n    </div>\n\n    <div *ngIf=\"areEbillsInErrorState\" class=\"bb-stack bb-stack--wrap bb-stack--align-top\">\n      <ng-container *ngIf=\"isEbillsErrorUpdateCredentials\">\n        <div class=\"bb-stack__item bb-stack__item--spacing-sm\">\n          <div class=\"bb-stack\">\n            <bb-icon-ui\n              class=\"bb-stack__item bb-stack__item--spacing-sm\"\n              data-role=\"ebills-error-icon\"\n              size=\"sm\"\n              name=\"error-outline\"\n              color=\"danger\"\n            ></bb-icon-ui>\n            <div\n              id=\"{{ ebillRetrieveErrorId }}\"\n              class=\"bb-stack__item bb-subtitle bb-text-danger\"\n              data-role=\"ebills-error-cannot-be-retrieved-message\"\n              i18n=\"\n                Ebills cannot be retrieved error|Error text to display when the eBills cannot be retrieved due to\n                invalid login credentials@@bb-billpay-payee-summary-item.ebill-error.ebills-cannot-be-retrieved\"\n            >\n              eBills cannot be retrieved.\n            </div>\n          </div>\n        </div>\n        <a\n          class=\"bb-stack__item\"\n          (bbKeyboardClick)=\"handleResolveEbillsErrors()\"\n          tabindex=\"0\"\n          role=\"button\"\n          class=\"bb-stack__item bb-subtitle\"\n          style=\"cursor: pointer\"\n          i18n=\"\n            Ebills update login credentials link|Button text to display for updating login credentials for the\n            payee@@bb-billpay-payee-summary-item.ebill-link.update-login-credentials\"\n          attr.aria-label=\"Update login credentials for {{ payeeName }}\"\n          i18n-attr.aria-label=\"\n            Ebills update login credentials link aria label|Aria label for updating login credentials for the\n            payee@@bb-billpay-payee-summary-item.ebill-link.aria-label.update-login-credentials\"\n          data-role=\"ebills-update-login-credentials-button\"\n          >Update login credentials\n        </a>\n      </ng-container>\n\n      <ng-container *ngIf=\"isEbillsErrorNotSupported\">\n        <div class=\"bb-stack__item bb-stack__item--spacing-sm\">\n          <div class=\"bb-stack\">\n            <bb-icon-ui\n              class=\"bb-stack__item bb-stack__item--spacing-sm\"\n              data-role=\"ebills-error-icon\"\n              size=\"sm\"\n              name=\"error-outline\"\n              color=\"danger\"\n            ></bb-icon-ui>\n            <div\n              id=\"{{ ebillSupportErrorId }}\"\n              class=\"bb-stack__item bb-subtitle bb-text-danger\"\n              data-role=\"ebills-error-no-longer-supported-message\"\n              i18n=\"\n                Biller no longer supports ebills error|Error text to display when the payee no longer supports\n                eBills@@bb-billpay-payee-summary-item.ebill-error.ebills-no-longer-available\"\n            >\n              This biller no longer supports eBills.\n            </div>\n          </div>\n        </div>\n        <a\n          (bbKeyboardClick)=\"handleResolveEbillsErrors()\"\n          tabindex=\"0\"\n          role=\"button\"\n          class=\"bb-stack__item bb-subtitle\"\n          style=\"cursor: pointer\"\n          attr.aria-label=\"Disable eBills for {{ payeeName }}\"\n          i18n-attr.aria-label=\"\n            Disable eBills link aria label|Aria label for Disable\n            eBills@@bb-billpay-payee-summary-item.ebill-link.ebills-no-longer-available\"\n          i18n=\"\n            Disable eBills for this payee link|Button text to display to disable eBills for the\n            payee@@bb-billpay-payee-summary-item.ebill-link.aria-label.ebills-no-longer-available\"\n          data-role=\"ebills-disabled-button\"\n          >Disable eBills for this payee\n        </a>\n      </ng-container>\n\n      <ng-container *ngIf=\"isEbillsErrorUserAction\">\n        <div class=\"bb-stack__item\">\n          <div class=\"bb-stack\">\n            <bb-icon-ui\n              class=\"bb-stack__item bb-stack__item--spacing-sm\"\n              data-role=\"ebills-error-icon\"\n              name=\"error-outline\"\n              size=\"sm\"\n              color=\"danger\"\n            ></bb-icon-ui>\n            <div\n              id=\"{{ ebillUserActionErrorId }}\"\n              class=\"bb-stack__item bb-subtitle bb-text-danger\"\n              data-role=\"ebills-error-login-to-biller-message\"\n              i18n=\"\n                Please log in to biller to resolve error|Error text to display when the user must log into the biller's\n                site to resolve an issue@@bb-billpay-payee-summary-item.ebill-error.log-in-to-bille-site\"\n            >\n              Please log in to the biller's site to resolve an issue and continue receiving eBills for this payee.\n            </div>\n          </div>\n        </div>\n        <a\n          (bbKeyboardClick)=\"handleResolveEbillsErrors()\"\n          tabindex=\"0\"\n          role=\"button\"\n          class=\"bb-stack__item bb-subtitle\"\n          style=\"cursor: pointer\"\n          i18n=\"\n            Refresh status for payee link|Button text to display for refreshing the status of eBills for the\n            payee@@bb-billpay-payee-summary-item.ebill-link.refresh-status\"\n          attr.aria-label=\"Refresh status for {{ payeeName }}\"\n          i18n-attr.aria-label=\"\n            Refresh status for payee link aria label|Aria label for Refresh\n            status@@bb-billpay-payee-summary-item.ebill-link.aria-label.refresh-status\"\n          data-role=\"ebills-refresh-status-button\"\n          >Refresh status\n        </a>\n      </ng-container>\n\n      <ng-container *ngIf=\"isEbillsErrorUnknown\">\n        <div class=\"bb-stack\">\n          <bb-icon-ui\n            class=\"bb-stack__item bb-stack__item--spacing-sm\"\n            data-role=\"ebills-error-icon\"\n            name=\"error-outline\"\n            size=\"sm\"\n            color=\"danger\"\n          ></bb-icon-ui>\n          <div\n            attr.id=\"{{ ebillUnknownErrorId }}\"\n            class=\"bb-stack__item bb-subtitle bb-text-danger\"\n            data-role=\"ebills-error-try-again-later-message\"\n            i18n=\"\n              Ebills cannot be retrieved error|Error text to display when eBills cannot currently be retreived for the\n              payee@@bb-billpay-payee-summary-item.ebill-error.ebills-cannot-be-retrieved\"\n          >\n            eBills cannot be retrieved, please try again later or contact support\n          </div>\n        </div>\n      </ng-container>\n    </div>\n\n    <div\n      *ngIf=\"areEbillsEnabledButNotDue\"\n      id=\"{{ noEbillsDueId }}\"\n      class=\"bb-text-support\"\n      data-role=\"no-due-date-label\"\n      i18n=\"\n        No eBill due note|Text for the information that no eBill is due@@bb-billpay-payee-summary-item.note.no-ebill-due\"\n    >\n      No eBills due\n    </div>\n\n    <div *ngIf=\"areEbillsAvailable\" class=\"bb-stack\">\n      <bb-icon-ui\n        class=\"bb-stack__item bb-stack__item--spacing-sm\"\n        data-role=\"receipt-icon\"\n        size=\"sm\"\n        name=\"receipt\"\n        color=\"secondary\"\n      ></bb-icon-ui>\n      <span\n        id=\"{{ ebillsAvailableId }}\"\n        class=\"bb-text-support bb-subtitle bb-stack__item\"\n        data-role=\"ebills-available-label\"\n        i18n=\"\n          eBills available note|Text for the information that eBills are\n          available@@bb-billpay-payee-summary-item.note.ebills-available\"\n        >eBills available</span\n      >\n    </div>\n\n    <div *ngIf=\"areRecurringPaymentsScheduled\" class=\"bb-stack bb-stack--align-top\">\n      <div class=\"bb-stack__item bb-stack__item--spacing-sm\">\n        <bb-icon-ui data-role=\"recurring-payment-icon\" size=\"sm\" name=\"repeat\" color=\"secondary\"></bb-icon-ui>\n      </div>\n      <div\n        id=\"{{ recurringPaymentScheduledIdId }}\"\n        class=\"bb-stack__item bb-subtitle bb-text-support\"\n        data-role=\"recurring-payment-label\"\n        i18n=\"\n          Recurring payments scheduled note|Text for the information that recurring payments are\n          scheduled@@bb-billpay-payee-summary-item.note.recurring-payments-scheduled\"\n      >\n        Recurring payments scheduled\n      </div>\n    </div>\n  </div>\n\n  <div class=\"bb-stack__item bb-stack__item--fill\">\n    <div class=\"bb-stack\">\n      <div class=\"bb-stack__item bb-stack__item--fill bb-text-align-left bb-text-align-right--md-up\">\n        <bb-amount-ui\n          id=\"{{ payeeAmountId }}\"\n          class=\"bb-text-bold\"\n          *ngIf=\"areEbillsDue\"\n          data-role=\"amount\"\n          [amount]=\"payeeSummary?.ebill?.latestBill?.amount?.amount\"\n          [currency]=\"payeeSummary?.ebill?.latestBill?.amount?.currencyCode\"\n        >\n        </bb-amount-ui>\n      </div>\n      <div class=\"bb-stack__item\">\n        <ng-container *ngTemplateOutlet=\"payeeSummaryItemButton\"> </ng-container>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #payeeSummaryItemButton>\n  <div class=\"btn-group\" data-role=\"payee-dropdown-menu\">\n    <button\n      bbButton\n      data-role=\"pay-button\"\n      (bbKeyboardClick)=\"handlePayPayee(ONE_OFF_PAYMENT)\"\n      i18n=\"Pay payee button|Button for paying the payee@@bb-billpay-payee-summary-item.button.pay\"\n      [attr.aria-label]=\"'Pay ' + payeeName\"\n      i18n-attr.aria-label=\"\n        Pay payee aria label|Aria label for paying the payee@@bb-billpay-payee-summary-item.aria-label.pay\"\n    >\n      Pay\n    </button>\n\n    <bb-dropdown-menu-ui\n      class=\"btn-group\"\n      btnColor=\"primary\"\n      container=\"body\"\n      icon=\"caret-down\"\n      [attr.aria-label]=\"'More options for ' + payeeName\"\n      i18n-attr.aria-label=\"\n        More options for payee aria label|Aria label for more payee\n        options@@bb-billpay-payee-summary-item.aria-label.more-payee-options\"\n    >\n      <ng-template bbDropdownMenuItem>\n        <ng-container *ngIf=\"payeeSummary?.ebill?.capable\">\n          <a role=\"menuitem\" class=\"dropdown-item bb-dropdown-single-select\" *ngIf=\"ebillLink\" target=\"_blank\">\n            <span\n              i18n=\"\n                View eBill dropdown list button|Button in the dropdown list for viewing the\n                eBill@@bb-billpay-payee-summary-item.button.dropdown.view-eBill\"\n              >View eBill</span\n            >\n          </a>\n\n          <a\n            role=\"menuitem\"\n            target=\"_blank\"\n            data-role=\"stop-ebills-menu-item\"\n            class=\"dropdown-item bb-dropdown-single-select\"\n            *ngIf=\"showStopEbills\"\n            (bbKeyboardClick)=\"handleStopEbills($event)\"\n          >\n            <span\n              i18n=\"\n                Stop eBills dropdown list button|Button in the dropdown list for getting\n                eBills@@bb-billpay-payee-summary-item.button.dropdown.stop-eBills\"\n              >Stop eBills</span\n            >\n          </a>\n\n          <a\n            data-role=\"get-ebills-menu-item\"\n            class=\"dropdown-item bb-dropdown-single-select\"\n            *ngIf=\"areEbillsAvailable\"\n            role=\"menuitem\"\n            target=\"_blank\"\n            (bbKeyboardClick)=\"handleGetEbills()\"\n          >\n            <span\n              i18n=\"\n                Get eBills dropdown list button|Button in the dropdown list for getting\n                eBills@@bb-billpay-payee-summary-item.button.dropdown.get-eBills\"\n              >Get eBills</span\n            >\n          </a>\n        </ng-container>\n\n        <a\n          role=\"menuitem\"\n          data-role=\"view-payee-menu-item\"\n          class=\"dropdown-item bb-dropdown-single-select\"\n          (bbKeyboardClick)=\"handleViewSummary()\"\n        >\n          <span\n            i18n=\"\n              View payee dropdown list button|Button in the dropdown list for viewing the\n              payee@@bb-billpay-payee-summary-item.button.dropdown.view-payee\"\n            >View payee</span\n          >\n        </a>\n        <a\n          role=\"menuitem\"\n          data-role=\"edit-payee-menu-item\"\n          class=\"dropdown-item bb-dropdown-single-select\"\n          (bbKeyboardClick)=\"handleEditPayee()\"\n        >\n          <span\n            i18n=\"\n              Edit payee dropdown list button|Button in the dropdown list for editing the\n              payee@@bb-billpay-payee-summary-item.button.dropdown.edit-payee\"\n            >Edit payee</span\n          >\n        </a>\n        <a\n          role=\"menuitem\"\n          data-role=\"delete-payee-menu-item\"\n          class=\"dropdown-item bb-dropdown-single-select\"\n          (bbKeyboardClick)=\"handleDeletePayee($event)\"\n        >\n          <span\n            i18n=\"\n              Delete payee dropdown list button|Button in the dropdown list for deleting the\n              payee@@bb-billpay-payee-summary-item.button.dropdown.delete-payee\"\n            >Delete payee</span\n          >\n        </a>\n      </ng-template>\n    </bb-dropdown-menu-ui>\n  </div>\n</ng-template>\n","import { Component, Input } from '@angular/core';\nimport { PayeeSummary } from '@backbase/data-ang/billpay';\n\n@Component({\n  selector: 'bb-billpay-payee-summary-list',\n  templateUrl: './billpay-payee-summary-list.component.html',\n})\nexport class BillpayPayeeSummaryListComponent {\n  /**\n   * Array of payee summary details.\n   */\n  @Input() payeeSummaries: PayeeSummary[] = [];\n\n  ngForTrackByIdFn(payee: PayeeSummary): string {\n    return payee.id;\n  }\n}\n","<ul class=\"bb-list\" data-role=\"list-group\">\n  <li *ngFor=\"let payeeSummary of payeeSummaries; trackBy: ngForTrackByIdFn\" class=\"bb-list__item\">\n    <bb-billpay-payee-summary-item [payeeSummary]=\"payeeSummary\"></bb-billpay-payee-summary-item>\n  </li>\n</ul>\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { Observable, of, Subject } from 'rxjs';\nimport { PayeeSummariesByEbill } from '../../model';\nimport { skip, switchMap, take, takeUntil } from 'rxjs/operators';\nimport { HttpResponse } from '@angular/common/http';\nimport { BillpayNotificationRoutingService, BillpayPayeeDataService } from '@backbase/billpay-journeys-common';\nimport { ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { Currency, PayeeSummary } from '@backbase/billpay-http-ang';\nimport { ManagePayeesJourneyConfigService } from '../../services/manage-payees-journey-config.service';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n@Component({\n  selector: 'bb-billpay-payee-list-view',\n  templateUrl: './billpay-payee-list-view.component.html',\n})\nexport class PayeeListViewComponent implements OnDestroy, OnInit {\n  private readonly navigationExtras: NavigationExtras;\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n  payeeSummariesByEbillObservable: Observable<PayeeSummariesByEbill | undefined> = new Observable();\n  payeeSummariesByEbill: PayeeSummariesByEbill | undefined;\n  destroy$ = new Subject<boolean>();\n  isDeleteModalOpened = false;\n  isDeleteEbillsModalOpen = false;\n  isNavigateModalOpened = false;\n  notificationType = '';\n\n  /** @internal */\n  constructor(\n    private readonly routerService: ManagePayeesNavigationService,\n    private readonly route: ActivatedRoute,\n    readonly config: ManagePayeesJourneyConfigService,\n    private readonly payeeDataService: BillpayPayeeDataService,\n    private readonly notificationService: NotificationService,\n    private readonly cdRef: ChangeDetectorRef,\n    private readonly billpayNotificationRoutingService: BillpayNotificationRoutingService,\n  ) {\n    this.navigationExtras = { relativeTo: this.route };\n  }\n\n  ngOnInit() {\n    this.payeeSummariesByEbillObservable = this.payeeDataService.getPayees();\n\n    this.setupNavigationSubscriptions();\n\n    this.payeeDataService.selectedDeletePayee\n      .pipe(takeUntil(this.destroy$), skip(1))\n      .subscribe(payee => (payee ? (this.isDeleteModalOpened = true) : (this.isNavigateModalOpened = true)));\n\n    this.payeeDataService.selectedDeleteEbills\n      .pipe(takeUntil(this.destroy$), skip(1))\n      .subscribe(payee => (payee ? (this.isDeleteEbillsModalOpen = true) : (this.isNavigateModalOpened = true)));\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  private deletePayee(): Observable<HttpResponse<any> | {}> {\n    return this.payeeDataService.selectedDeletePayee.pipe(\n      switchMap((payee: any) =>\n        payee ? this.payeeDataService.deletePayee(payee.id, payee.electronic) : of<Observable<any>>(),\n      ),\n    );\n  }\n  private deleteEbills(): Observable<HttpResponse<PayeeSummary> | {}> {\n    return this.payeeDataService.selectedDeleteEbills.pipe(\n      switchMap((payee: any) => (payee ? this.payeeDataService.deleteEbills(payee.id) : of<Observable<any>>())),\n    );\n  }\n\n  private get dismissTimeout(): number {\n    if (this.config.notificationDismissTime === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.config.notificationDismissTime;\n  }\n\n  selectedDeletePayee(): Observable<PayeeSummary | undefined> {\n    return this.payeeDataService.selectedDeletePayee;\n  }\n\n  selectedDeleteEbills(): Observable<PayeeSummary | undefined> {\n    return this.payeeDataService.selectedDeleteEbills;\n  }\n\n  onNavigateToPayments(hasNavigated: boolean) {\n    if (hasNavigated) {\n      this.goToPaymentsList();\n    }\n    this.isNavigateModalOpened = false;\n  }\n\n  onDeletePayee(resolve: boolean) {\n    this.isDeleteModalOpened = false;\n\n    if (resolve) {\n      this.deletePayee()\n        .pipe(take(1))\n        .subscribe(() => {\n          this.deletionNotify('delete');\n        });\n    }\n  }\n\n  onDeleteEbills(resolve: boolean) {\n    this.isDeleteEbillsModalOpen = false;\n\n    if (resolve) {\n      this.deleteEbills()\n        .pipe(take(1))\n        .subscribe(() => {\n          this.deletionNotify('ebills');\n        });\n    }\n  }\n\n  private deletionNotify(type: string) {\n    this.payeeDataService.reloadPayees();\n    this.cdRef.markForCheck();\n    this.notificationType = type;\n    this.notificationService.showNotification({\n      header: this.notificationHeaderTemplate,\n      message: this.notificationMessageTemplate,\n      modifier: 'success',\n      ttl: this.dismissTimeout,\n    });\n  }\n\n  private setupNavigationSubscriptions() {\n    this.billpayNotificationRoutingService.managePayeesSubject$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.goToAddPayee());\n\n    this.billpayNotificationRoutingService.managePaymentSubject$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(async payeeId =>\n        this.gotoOneOffPayment((await this.payeeDataService.findPayeeSummaryById(payeeId))?.id || ''),\n      );\n\n    this.billpayNotificationRoutingService.upcommingPaymentsSubject$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.goToPaymentsList());\n  }\n\n  areBothListsPresent(payeeSummariesByEbill: PayeeSummariesByEbill): boolean {\n    return !!(\n      payeeSummariesByEbill.ebillsEnabled &&\n      payeeSummariesByEbill.ebillsEnabled.length &&\n      payeeSummariesByEbill.ebillsNotEnabled &&\n      payeeSummariesByEbill.ebillsNotEnabled.length\n    );\n  }\n\n  // Get totals of the eBills, grouped by currency\n  // Ideally there should only be one currency in use, but it doesn't hurt to check\n  getEbillTotals(ebillPayeeSummaries: PayeeSummary[] = []): Currency[] {\n    const ebillTotalsByCurrency: Record<string, number> = ebillPayeeSummaries.reduce(\n      (currenciesTotalsObj: Record<string, number>, payeeSummary: PayeeSummary) => {\n        if (!(payeeSummary.ebill && payeeSummary.ebill.latestBill && payeeSummary.ebill.latestBill.amount)) {\n          return currenciesTotalsObj;\n        }\n\n        const thisCurrencyCode = payeeSummary.ebill.latestBill.amount.currencyCode;\n        const thisAmount = parseFloat(payeeSummary.ebill.latestBill.amount.amount);\n\n        if (!currenciesTotalsObj[thisCurrencyCode]) {\n          currenciesTotalsObj[thisCurrencyCode] = 0;\n        }\n        currenciesTotalsObj[thisCurrencyCode] = currenciesTotalsObj[thisCurrencyCode] + thisAmount;\n\n        return currenciesTotalsObj;\n      },\n      {},\n    );\n\n    return Object.keys(ebillTotalsByCurrency).map(currencyCode => {\n      return {\n        currencyCode,\n        amount: ebillTotalsByCurrency[currencyCode].toString(),\n      };\n    });\n  }\n\n  ngForTrackByCurrencyFn(currencies: Currency) {\n    return currencies.currencyCode;\n  }\n\n  get currentLoadingState() {\n    return this.payeeDataService.payeesLoadingState;\n  }\n\n  get areButtonsDisabled(): boolean {\n    return this.payeeDataService.areButtonsDisabled;\n  }\n\n  get numberOfPayees(): number | undefined {\n    return this.payeeDataService.numberOfPayees;\n  }\n\n  goToAddPayee() {\n    this.routerService.navigateToSearch(this.navigationExtras);\n  }\n  private goToPaymentsList() {\n    this.routerService?.navigateToPendingPayments();\n  }\n  private gotoOneOffPayment(id: string) {\n    this.routerService?.navigateToOneOffPayment(id);\n  }\n}\n","<div class=\"bb-stack bb-block bb-block--lg\">\n  <bb-header-ui\n    class=\"bb-stack__item bb-stack__item--fill\"\n    headingType=\"h1\"\n    heading=\"Pay a bill\"\n    i18n-heading=\"@@billpay-payees-journey.payee-list-view\"\n  >\n  </bb-header-ui>\n  <button\n    bbButton\n    (click)=\"goToAddPayee()\"\n    color=\"secondary\"\n    i18n=\"button label|Add payee button@@billpay-payees-journey.payee-list\"\n  >\n    Add a payee\n  </button>\n</div>\n\n<ng-container>\n  <section>\n    <ng-container *ngIf=\"currentLoadingState !== 'error'; else errorState\">\n      <ng-container *ngIf=\"payeeSummariesByEbillObservable | async as ebillGroupedData; else loadingState\">\n        <ng-container *ngIf=\"currentLoadingState !== 'loading'; else loadingState\">\n          <ng-container\n            *ngIf=\"ebillGroupedData.ebillsEnabled.length || ebillGroupedData.ebillsNotEnabled.length; else emptyState\"\n          >\n            <div\n              class=\"bb-block bb-block--lg\"\n              *ngIf=\"ebillGroupedData.ebillsEnabled.length\"\n              data-role=\"payees-with-active-e-bills-list\"\n            >\n              <div class=\"card card-lg\">\n                <div class=\"card-body\">\n                  <div class=\"bb-block bb-block--md\">\n                    <bb-header-ui\n                      headingType=\"h2\"\n                      *ngIf=\"areBothListsPresent(ebillGroupedData)\"\n                      data-role=\"sub-header\"\n                      heading=\"Payees with active eBills\"\n                      i18n-heading=\"\n                        Payees with eBills title|Title for the list of payees with eBills\n                        enabled@@bb-billpay-payee-list-widget-ang.title.payees-with-ebills\"\n                    >\n                    </bb-header-ui>\n                  </div>\n                  <ul class=\"bb-list\">\n                    <li class=\"bb-list__item\">\n                      <bb-billpay-payee-summary-list [payeeSummaries]=\"ebillGroupedData.ebillsEnabled\">\n                      </bb-billpay-payee-summary-list>\n                    </li>\n                    <li class=\"bb-list__item\">\n                      <div\n                        data-role=\"outstanding-e-bill-total\"\n                        role=\"listitem\"\n                        *ngFor=\"\n                          let ebillCurrencyTotal of getEbillTotals(ebillGroupedData.ebillsEnabled);\n                          trackBy: ngForTrackByCurrencyFn\n                        \"\n                        class=\"bb-highlight\"\n                      >\n                        <span\n                          i18n=\"\n                            Outstanding eBills total text|Text for the total of outstanding\n                            eBills@@bb-billpay-payee-list-widget-ang.ebills.total\"\n                        >\n                          Outstanding eBill total:\n                        </span>\n                        <bb-amount-ui\n                          data-role=\"total-amount\"\n                          class=\"bb-highlight\"\n                          [amount]=\"ebillCurrencyTotal.amount\"\n                          [currency]=\"ebillCurrencyTotal.currencyCode\"\n                        >\n                        </bb-amount-ui>\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            <div\n              class=\"card card-lg\"\n              data-role=\"all-other-payees-list\"\n              *ngIf=\"ebillGroupedData.ebillsNotEnabled.length\"\n            >\n              <div class=\"card-body\">\n                <div class=\"bb-block bb-block--md\">\n                  <bb-header-ui\n                    headingType=\"h2\"\n                    *ngIf=\"areBothListsPresent(ebillGroupedData)\"\n                    data-role=\"sub-header\"\n                    heading=\"All other payees\"\n                    i18n-heading=\"\n                      Payees without eBills title|Title for the list of payees that do not have eBills\n                      enabled@@bb-billpay-payee-list-widget-ang.title.other-payees\"\n                  >\n                  </bb-header-ui>\n                </div>\n                <div class=\"bb-list\">\n                  <bb-billpay-payee-summary-list [payeeSummaries]=\"ebillGroupedData.ebillsNotEnabled\">\n                  </bb-billpay-payee-summary-list>\n                </div>\n              </div>\n            </div>\n          </ng-container>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n  </section>\n</ng-container>\n\n<ng-template #loadingState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #errorState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <bb-empty-state-ui\n        data-role=\"error-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"error-outline\"\n        subtitle=\"Try to reload the page or contact support\"\n        i18n-subtitle=\"\n          Try to reload the page or contact the support.|Payee List loading\n          subtitle@@bb-billpay-payee-list-widget-ang.loading.subtitle\"\n        title=\"Payee list is not loading\"\n        i18n-title=\"Payee list is not loading|Payee List loading title@@bb-billpay-payee-list-widget-ang.loading.title\"\n      >\n      </bb-empty-state-ui>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #emptyState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body bb-state-container\">\n      <bb-empty-state-ui\n        data-role=\"empty-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"assignment-ind\"\n        subtitle=\"Add a payee to make a bill payment\"\n        i18n-subtitle=\"\n          Add a payee to make a bill payment|Payee List no payees\n          subtitle@@bb-billpay-payee-list-widget-ang.bb-empty-state-ui.subtitle\"\n        title=\"No payees\"\n        i18n-title=\"\n          No payees state text|Payee List no payees title@@bb-billpay-payee-list-widget-ang.bb-empty-state-ui.title\"\n      >\n      </bb-empty-state-ui>\n      <div class=\"bb-state-container__footer\">\n        <button\n          bbButton\n          data-role=\"empty-state-add-payee-btn\"\n          (click)=\"addPayee()\"\n          [disabled]=\"areButtonsDisabled\"\n          i18n=\"\n            Add a payee|Payee List add payee button@@bb-billpay-payee-list-widget-ang.bb-empty-state-ui.button.add-payee\"\n        >\n          Add a payee\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<bb-billpay-payee-delete-modal\n  *ngIf=\"isDeleteModalOpened\"\n  (resolve)=\"onDeletePayee($event)\"\n></bb-billpay-payee-delete-modal>\n\n<bb-billpay-ebills-delete-modal\n  *ngIf=\"isDeleteEbillsModalOpen\"\n  (resolve)=\"onDeleteEbills($event)\"\n></bb-billpay-ebills-delete-modal>\n\n<bb-billpay-payee-navigate-modal\n  *ngIf=\"isNavigateModalOpened\"\n  (resolve)=\"onNavigateToPayments($event)\"\n></bb-billpay-payee-navigate-modal>\n\n<ng-template #notificationHeader>\n  <div [ngSwitch]=\"notificationType\">\n    <span\n      *ngSwitchCase=\"'ebills'\"\n      class=\"bb-text-bold\"\n      i18n=\"\n        eBills stopped notification header|eBills stopped confirmation success notification\n        header@@billpay-payee-list.confirm.notification.header\"\n      >eBills stopped</span\n    >\n    <span\n      *ngSwitchCase=\"'delete'\"\n      class=\"bb-text-bold\"\n      i18n=\"\n        delete payee notification header|Payee delete confirmation success notification\n        header@@billpay-payee-list.confirm.notification.header\"\n      >Payee deleted</span\n    >\n  </div>\n</ng-template>\n\n<ng-template #notificationMessage>\n  <div [ngSwitch]=\"notificationType\">\n    <ng-container *ngSwitchCase=\"'delete'\">\n      <span\n        *ngIf=\"selectedDeletePayee() | async as payee\"\n        i18n=\"\n          delete payee notification message|Payee delete confirmation success notification\n          message@@billpay-payee-list.delete-payee-confirm.notification.message\"\n        >The payee {{ payee.nickName ? payee.nickName + ' (' + payee.name + ')' : payee.name }} has been deleted\n        successfully</span\n      >\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'ebills'\">\n      <span\n        *ngIf=\"selectedDeleteEbills() | async as payee\"\n        i18n=\"\n          stop ebill notification message|Payee stop ebill confirmation success notification\n          message@@billpay-payee-list.stop-ebill-confirm.notification.message\"\n        >eBills for {{ payee.nickName ? payee.nickName + ' (' + payee.name + ')' : payee.name }} has been stopped\n        successfully</span\n      >\n    </ng-container>\n  </div>\n</ng-template>\n","import { Injectable } from '@angular/core';\nimport {\n  BillPayPayeesSummaryService,\n  BillPayPayeesService,\n  BillPayPayeesSummaryGetResponseBody,\n  PayeeSummary,\n  Payee,\n} from '@backbase/data-ang/billpay';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { HttpResponse } from '@angular/common/http';\nimport { BehaviorSubject, EMPTY, Observable } from 'rxjs';\n\nexport const defaultDeleteParams = {\n  cancelPendingPayments: false,\n};\n\n@Injectable()\nexport class BillpayPayeeSummaryWidgetService {\n  private currentPayeeSummaryLoadingState = new BehaviorSubject<'loading' | 'error' | ''>('');\n\n  /** @internal */\n  constructor(\n    private readonly payeesSummaryData: BillPayPayeesSummaryService,\n    private readonly payeesData: BillPayPayeesService,\n  ) {}\n\n  getPayees(): Observable<PayeeSummary[]> {\n    this.currentPayeeSummaryLoadingState.next('loading');\n    return this.payeesSummaryData.getBillPayPayeesSummary().pipe(\n      map(this.getPayeeSummaries),\n      tap(data => sortPayees(data)),\n      tap(() => this.currentPayeeSummaryLoadingState.next('')),\n      catchError(() => {\n        this.currentPayeeSummaryLoadingState.next('error');\n        return EMPTY;\n      }),\n    );\n  }\n\n  deletePayee(id: string, electronic: boolean): Observable<HttpResponse<any>> {\n    return electronic\n      ? this.payeesData.deleteElectronicPayeeById({ ...defaultDeleteParams, id })\n      : this.payeesData.deletePayeeById({ ...defaultDeleteParams, id });\n  }\n\n  getFullSummary(id: string): Observable<Payee> {\n    return this.payeesData.getPayeeById({ id }).pipe(map(a => a.payee));\n  }\n\n  private getPayeeSummaries(response: BillPayPayeesSummaryGetResponseBody): Array<PayeeSummary> {\n    // eslint-disable-next-line no-null/no-null\n    if (response.payeeSummaries === null) {\n      throw new Error('Response body not set');\n    }\n    return response.payeeSummaries ? response.payeeSummaries : [];\n  }\n\n  get payeesSummaryLoadingState() {\n    return this.currentPayeeSummaryLoadingState;\n  }\n}\n\nfunction getPayeeDisplayName(payee: PayeeSummary): string {\n  return (payee.nickName || payee.name).toLowerCase();\n}\n\nfunction isEbillEnabled(payee: PayeeSummary): boolean {\n  return payee.ebill ? payee.ebill.enabled : false;\n}\n\nfunction sortPayees(data: PayeeSummary[] | undefined) {\n  if (data) {\n    data.sort(function (payee1, payee2) {\n      if (isEbillEnabled(payee1) && !isEbillEnabled(payee2)) return -1;\n      if (!isEbillEnabled(payee1) && isEbillEnabled(payee2)) return 1;\n      return getPayeeDisplayName(payee1) > getPayeeDisplayName(payee2) ? 1 : -1;\n    });\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-payee-stepper',\n  templateUrl: './billpay-payee-stepper.component.html',\n})\nexport class BillpayPayeeStepperComponent {\n  /**\n   * Index of the payee that the stepper is accessing.\n   */\n  @Input() index: number | undefined;\n  /**\n   * Total number of payees available to step through.\n   */\n  @Input() size: number | undefined;\n\n  @Output() nextPayee = new EventEmitter();\n  @Output() previousPayee = new EventEmitter();\n\n  handleGetPreviousPayee() {\n    this.previousPayee.emit();\n  }\n\n  handleGetNextPayee() {\n    this.nextPayee.emit();\n  }\n}\n","<div class=\"bb-stack\" *ngIf=\"index || index === 0\">\n  <span\n    class=\"bb-stack__item bb-stack__item--fill bb-text-support bb-subtitle\"\n    data-role=\"payee-index\"\n    i18n=\"\n      Number of payees|Text for the payee number and of total\n      payees@@bb-billpay-view-payee-full-summary.note.payee-of-payees\"\n    >Payee {{ index + 1 }} of {{ size }}</span\n  >\n  <button\n    bbButton\n    data-role=\"previous-payee-button\"\n    class=\"bb-stack__item\"\n    color=\"link\"\n    circle=\"true\"\n    aria-label=\"show previous payee\"\n    i18n-aria-label=\"\n      Show previous payee button|Aria label for show previous\n      payee@@bb-billpay-view-payee-full-summary.payee-information.show-previous-payee-button\"\n    [disabled]=\"index <= 0\"\n    (click)=\"handleGetPreviousPayee()\"\n  >\n    <bb-icon-ui name=\"angle-left\"></bb-icon-ui>\n  </button>\n  <button\n    bbButton\n    data-role=\"next-payee-button\"\n    class=\"bb-stack__item\"\n    color=\"link\"\n    circle=\"true\"\n    aria-label=\"show next payee\"\n    i18n-aria-label=\"\n      Show next payee button|Aria label for show next\n      payee@@bb-billpay-view-payee-full-summary.payee-information.show-next-payee-button\"\n    [disabled]=\"index + 1 >= size\"\n    (click)=\"handleGetNextPayee()\"\n  >\n    <bb-icon-ui name=\"angle-right\"></bb-icon-ui>\n  </button>\n</div>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { PayeeSummary, Payee } from '@backbase/data-ang/billpay';\nimport { PhoneNumberPipe } from '@backbase/ui-ang/phone-number-format-pipe';\n\n@Component({\n  selector: 'bb-billpay-payee-information',\n  templateUrl: './billpay-payee-information.component.html',\n  providers: [PhoneNumberPipe],\n})\nexport class BillpayPayeeInformationComponent {\n  /**\n   * Details of the payee.\n   */\n  @Input() payeeSummary: PayeeSummary | undefined;\n  /**\n   * Full details of the payee for manual payees.\n   */\n  @Input() fullPayee: Payee | undefined;\n\n  @Output() editPayee = new EventEmitter();\n  @Output() deletePayee = new EventEmitter();\n\n  /** @internal */\n  constructor(private readonly phoneNumberFormatter: PhoneNumberPipe) {}\n\n  handleEditPayee() {\n    this.editPayee.emit();\n  }\n\n  handleDeletePayee() {\n    this.deletePayee.emit();\n  }\n\n  get payeePhoneNumber(): string | undefined {\n    return (\n      this.fullPayee &&\n      this.fullPayee.phoneNumber &&\n      this.phoneNumberFormatter.transform(this.fullPayee.phoneNumber, 'US', true)\n    );\n  }\n}\n","<bb-collapsible-ui data-role=\"full-summary-toggle\" [isOpen]=\"true\">\n  <ng-template bbCollapsibleHeader let-toggle=\"toggle\" let-isOpen=\"isOpen\">\n    <div class=\"bb-stack bb-block bb-block--md\">\n      <bb-header-ui\n        headingType=\"h3\"\n        class=\"bb-stack__item bb-stack__item--fill\"\n        *ngIf=\"payeeSummary.nickName || payeeSummary.name\"\n        data-role=\"full-summary-toggle-heading\"\n        heading=\"Payee Information\"\n        i18n-heading=\"\n          Payee Information|Title of the payee information\n          section@@bb-billpay-view-payee-full-summary.payee-information.title\"\n      >\n      </bb-header-ui>\n      <button\n        id=\"payee-information-toggle-view\"\n        bbButton\n        class=\"bb-stack__item\"\n        (click)=\"toggle()\"\n        type=\"button\"\n        color=\"outline\"\n        role=\"switch\"\n        title=\"toggle-view\"\n        [attr.aria-checked]=\"isOpen\"\n        attr.aria-label=\"toggle to {{ isOpen ? 'hide' : 'show' }} payee information\"\n        i18n-attr.aria-label=\"\n          Payee information toggle label|Aria label for payee information\n          toggle@@bb-billpay-view-payee-full-summary.payee-information.toggle-view\"\n      >\n        <bb-icon-ui [name]=\"isOpen ? 'toggle-up' : 'toggle-down'\"></bb-icon-ui>\n      </button>\n    </div>\n  </ng-template>\n  <ng-template bbCollapsibleBody>\n    <dl>\n      <ng-container *ngIf=\"payeeSummary.name\">\n        <dt\n          i18n=\"\n            Payee name label|Label for payee name in payee\n            information@@bb-billpay-view-payee-full-summary.payee-information.payee-name-label\"\n          data-role=\"payee-name-label\"\n        >\n          Payee name\n        </dt>\n        <dd data-role=\"payee-name\">\n          {{ payeeSummary.name }}\n        </dd>\n      </ng-container>\n      <dt\n        i18n=\"\n          Payee type label|Label for payee type in payee\n          information@@bb-billpay-view-payee-full-summary.payee-information.payee-type-label\"\n        data-role=\"payee-type-label\"\n      >\n        Payee type\n      </dt>\n      <dd data-role=\"payee-type\">\n        <span\n          *ngIf=\"payeeSummary.electronic; else manualPayeeLabel\"\n          i18n=\"\n            Electronic payee|Label for electronic\n            payee@@bb-billpay-view-payee-full-summary.payee-information.electronic-payee-label\"\n          >Electronic</span\n        >\n        <ng-template #manualPayeeLabel>\n          <span\n            i18n=\"\n              Manual payee|Label for manual\n              payee@@bb-billpay-view-payee-full-summary.payee-information.manual-payee-label\"\n            >Check</span\n          >\n        </ng-template>\n      </dd>\n      <ng-container *ngIf=\"payeeSummary.accountNumber\">\n        <dt\n          i18n=\"\n            Payee account number label|Label for payee account number in payee\n            information@@bb-billpay-view-payee-full-summary.payee-information.payee-account-number-label\"\n          data-role=\"payee-account-number-label\"\n        >\n          Payee account number\n        </dt>\n        <dd data-role=\"payee-account-number\">\n          {{ payeeSummary.accountNumber }}\n        </dd>\n      </ng-container>\n      <ng-container *ngIf=\"payeeSummary.nickName\">\n        <dt\n          i18n=\"\n            Payee nickname label|Label for payee nickname in payee\n            information@@bb-billpay-view-payee-full-summary.payee-information.payee-nickname-label\"\n          data-role=\"payee-nickname-label\"\n        >\n          Payee nickname\n        </dt>\n        <dd data-role=\"payee-nickname\">\n          {{ payeeSummary.nickName }}\n        </dd>\n      </ng-container>\n      <ng-container *ngIf=\"fullPayee && fullPayee.address as address\">\n        <dt\n          i18n=\"\n            Payee address label|Label for payee address in payee\n            information@@bb-billpay-view-payee-full-summary.payee-information.payee-address-label\"\n          data-role=\"payee-address-label\"\n        >\n          Payee address\n        </dt>\n        <dd data-role=\"payee-address\">\n          <div>{{ address.address1 }}</div>\n          <div *ngIf=\"address.address2\">{{ address.address2 }}</div>\n          <div>\n            <span class=\"bb-text-nowrap\">{{ address.city }} </span>\n            <span class=\"bb-text-nowrap\">{{ address.state }} </span>\n            <span class=\"bb-text-nowrap\">{{ address.postalCode }}</span>\n          </div>\n        </dd>\n      </ng-container>\n      <ng-container *ngIf=\"payeePhoneNumber as phoneNumber\">\n        <dt\n          i18n=\"\n            Payee phone number label|Label for payee phone number in payee\n            information@@bb-billpay-view-payee-full-summary.payee-information.payee-phone-number-label\"\n          data-role=\"payee-phone-number-label\"\n        >\n          Phone number\n        </dt>\n        <dd data-role=\"payee-phone-number\">\n          {{ phoneNumber }}\n        </dd>\n      </ng-container>\n    </dl>\n    <div class=\"bb-button-bar bb-button-bar--reverse bb-block bb-block--xl\">\n      <button\n        bbButton\n        (click)=\"handleEditPayee()\"\n        data-role=\"edit-payee-button\"\n        class=\"bb-button-bar__button\"\n        color=\"secondary\"\n        i18n=\"Edit payee button|Text for the edit payee button@@bb-billpay-view-payee-full-summary.button.edit-payee\"\n      >\n        Edit payee\n      </button>\n      <button\n        bbButton\n        (click)=\"handleDeletePayee()\"\n        class=\"bb-button-bar__button\"\n        data-role=\"delete-payee-button\"\n        color=\"danger\"\n        i18n=\"\n          Delete payee button|Text for the delete payee button@@bb-billpay-view-payee-full-summary.button.delete-payee\"\n      >\n        Delete payee\n      </button>\n    </div>\n  </ng-template>\n</bb-collapsible-ui>\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport { Payee, PayeeSummary } from '@backbase/data-ang/billpay';\nimport { BillpayPayeeSummaryWidgetService } from '../../services/billpay-payee-summary-widget.service';\nimport { ManagePayeesJourneyConfigService } from '../../services/manage-payees-journey-config.service';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n@Component({\n  selector: 'bb-billpay-payee-details-view',\n  templateUrl: './billpay-payee-summary-view.component.html',\n})\nexport class PayeeSummaryViewComponent implements OnInit, OnDestroy {\n  private readonly navigationExtras: NavigationExtras;\n  private readonly selectedDeletePayeeSource = new BehaviorSubject<PayeeSummary | undefined>(undefined);\n  private readonly destroy$ = new Subject<void>();\n  payees$: Observable<PayeeSummary[]> = new Observable();\n  isDeleteModalOpened = false;\n  isNavigateModalOpened = false;\n  private payeeSummaries!: PayeeSummary[];\n  payeeSummary!: PayeeSummary;\n  fullManualPayeeSummary?: Payee;\n  payeeIndex = 0;\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n\n  /** @internal */\n  constructor(\n    private readonly routerService: ManagePayeesNavigationService,\n    private readonly route: ActivatedRoute,\n    private readonly config: ManagePayeesJourneyConfigService,\n    private readonly payeeSummaryService: BillpayPayeeSummaryWidgetService,\n    private readonly notificationService: NotificationService,\n    private readonly cdRef: ChangeDetectorRef,\n  ) {\n    this.navigationExtras = { relativeTo: this.route.parent };\n  }\n\n  gotoPayeeList() {\n    this.routerService.navigateToPayeeList(this.navigationExtras);\n  }\n  gotoAddPayee() {\n    this.routerService.navigateToSearch(this.navigationExtras);\n  }\n  gotoOneOffPayment(id: string) {\n    this.routerService.navigateToOneOffPayment(id);\n  }\n  private gotoEditManual(id: string) {\n    this.routerService.navigateToEditManualPayeeForm(id, this.navigationExtras);\n  }\n  private gotoEditElectronic(id: string) {\n    this.routerService.navigateToEditElectronicPayeeForm(id, this.navigationExtras);\n  }\n  private gotoPaymentsList() {\n    this.routerService.navigateToPendingPayments();\n  }\n\n  ngOnInit() {\n    const id = this.route.snapshot.params['payeeID'] || undefined;\n    this.payees$ = this.payeeSummaryService.getPayees().pipe(\n      tap(data => this.setPayee(data, id)),\n      tap(data => (this.payeeSummaries = data)),\n    );\n  }\n\n  private setPayee(payeeSummaries: PayeeSummary[], id: string | undefined) {\n    if (!payeeSummaries || payeeSummaries.length === 0) {\n      return;\n    } else if (id === undefined) {\n      this.payeeSummary = payeeSummaries[0];\n    } else {\n      const payeeIndex = payeeSummaries.findIndex(payee => payee.id === id);\n      if (payeeIndex > 0) {\n        this.payeeIndex = payeeIndex;\n        this.payeeSummary = payeeSummaries[payeeIndex];\n      } else {\n        this.payeeSummary = payeeSummaries[0];\n      }\n    }\n    if (!this.payeeSummary.electronic) {\n      this.payeeSummaryService\n        .getFullSummary(this.payeeSummary.id)\n        .pipe(takeUntil(this.destroy$))\n        .subscribe(payee => {\n          this.fullManualPayeeSummary = payee;\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  handleEditPayee(): void {\n    if (this.payeeSummary && this.payeeSummary.electronic) {\n      this.gotoEditElectronic(this.payeeSummary.id);\n    } else if (this.payeeSummary && !this.payeeSummary.electronic) {\n      this.gotoEditManual(this.payeeSummary.id);\n    }\n  }\n\n  onNavigateToPayments(resolve: boolean) {\n    if (resolve) {\n      this.gotoPaymentsList();\n    }\n    this.closeNavigateModal();\n  }\n\n  selectedDeletePayee(): Observable<PayeeSummary | undefined> {\n    return this.selectedDeletePayeeSource.asObservable();\n  }\n\n  handleDeletePayee(): void {\n    this.payeeSummary && !this.payeeSummary.nextPayment ? this.openDeleteModal() : this.openNavigateModal();\n    this.selectedDeletePayeeSource.next(this.payeeSummary);\n  }\n\n  private openNavigateModal() {\n    this.isNavigateModalOpened = true;\n  }\n\n  private closeNavigateModal() {\n    this.isNavigateModalOpened = false;\n  }\n\n  private openDeleteModal() {\n    this.isDeleteModalOpened = true;\n  }\n\n  private closeDeleteModal() {\n    this.isDeleteModalOpened = false;\n  }\n\n  onDeletePayee(resolve: boolean) {\n    this.closeDeleteModal();\n\n    if (resolve && this.payeeSummary) {\n      this.payeeSummaryService\n        .deletePayee(this.payeeSummary.id, this.payeeSummary.electronic)\n        .pipe(takeUntil(this.destroy$))\n        .subscribe(() => {\n          this.deletionNotify();\n        });\n      this.gotoPayeeList();\n    }\n  }\n\n  private deletionNotify() {\n    this.notificationService.showNotification({\n      header: this.notificationHeaderTemplate,\n      message: this.notificationMessageTemplate,\n      modifier: 'success',\n      ttl: this.dismissTimeoutValue,\n    });\n  }\n\n  private get dismissTimeoutValue(): number {\n    if (this.config.notificationDismissTime === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.config.notificationDismissTime;\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  private updatePayee() {\n    if (this.payeeSummaries) {\n      this.payeeSummary = this.payeeSummaries[this.payeeIndex];\n      if (this.payeeSummary && !this.payeeSummary.electronic) {\n        this.payeeSummaryService\n          .getFullSummary(this.payeeSummary.id)\n          .pipe(takeUntil(this.destroy$))\n          .subscribe(payee => {\n            this.fullManualPayeeSummary = payee;\n            this.cdRef.detectChanges();\n          });\n      } else {\n        this.fullManualPayeeSummary = undefined;\n        this.cdRef.detectChanges();\n      }\n    }\n  }\n\n  nextPayee() {\n    ++this.payeeIndex;\n    this.updatePayee();\n  }\n\n  previousPayee() {\n    --this.payeeIndex;\n    this.updatePayee();\n  }\n\n  get currentLoadingState() {\n    return this.payeeSummaryService.payeesSummaryLoadingState;\n  }\n}\n","<div class=\"bb-block bb-block--lg\">\n  <button bbButton color=\"link\" class=\"bb-block bb-block--md pl-0\" (click)=\"gotoPayeeList()\">\n    <bb-icon-ui name=\"arrow-back\" size=\"md\"></bb-icon-ui>\n    <span i18n=\"button label|Back button@@billpay-payees-journey.payee-summary.back\">Back to Payee List</span>\n  </button>\n  <bb-header-ui headingType=\"h1\" [heading]=\"'Payee summary'\" i18n-heading=\"@@billpay-payees-journey.add-payee\">\n  </bb-header-ui>\n</div>\n\n<ng-template #notificationMessage>\n  <div>\n    <div>\n      <span\n        i18n=\"\n          delete payee notification message|Payee delete confirmation success notification\n          message@@billpay-payee-summary.delete-payee-confirm.notification.message\"\n        >The payee\n        {{ payeeSummary.nickName ? payeeSummary.nickName + ' (' + payeeSummary.name + ')' : payeeSummary.name }} has\n        been deleted successfully</span\n      >\n    </div>\n  </div>\n</ng-template>\n\n <ng-container *ngIf=\"payees$ | async as allPayees\">\n  <ng-container *ngIf=\"payeeSummary; else emptyState\">\n    <div class=\"card card-lg\">\n      <div class=\"card-body\">\n        <div class=\"bb-block bb-block--md\">\n          <bb-billpay-payee-stepper\n            [index]=\"payeeIndex\"\n            [size]=\"allPayees.length\"\n            (nextPayee)=\"nextPayee()\"\n            (previousPayee)=\"previousPayee()\"\n          >\n          </bb-billpay-payee-stepper>\n        </div>\n        <div class=\"bb-block bb-block--lg\">\n          <bb-header-ui\n            headingType=\"h2\"\n            *ngIf=\"payeeSummary.nickName || payeeSummary.name\"\n            data-role=\"full-summary-payee-name-primary\"\n            heading=\"{{ payeeSummary.nickName || payeeSummary.name }}\"\n          >\n          </bb-header-ui>\n          <div\n            class=\"bb-highlight\"\n            *ngIf=\"payeeSummary.nickName && payeeSummary.name\"\n            data-role=\"full-summary-payee-name-secondary\"\n          >\n            {{ payeeSummary.name }}\n          </div>\n        </div>\n\n        <bb-billpay-payee-information\n          [payeeSummary]=\"payeeSummary\"\n          [fullPayee]=\"fullManualPayeeSummary\"\n          (editPayee)=\"handleEditPayee()\"\n          (deletePayee)=\"handleDeletePayee()\"\n        >\n        </bb-billpay-payee-information>\n\n        <div class=\"bb-button-bar bb-button-bar--reverse\">\n          <button\n            bbButton\n            (click)=\"gotoOneOffPayment(payeeSummary)\"\n            data-role=\"make-payment-from-summary-payee-button\"\n            color=\"primary\"\n            class=\"bb-button-bar__button\"\n            i18n=\"\n              Make a payment button|Text for the make a payment vie full summary\n              button@@bb-billpay-view-payee-full-summary.button.make-payment\"\n          >\n            Make a payment\n          </button>\n        </div>\n\n        <bb-billpay-payee-delete-modal\n          *ngIf=\"isDeleteModalOpened\"\n          (resolve)=\"onDeletePayee($event)\"\n        ></bb-billpay-payee-delete-modal>\n\n        <bb-billpay-payee-navigate-modal\n          *ngIf=\"isNavigateModalOpened\"\n          (resolve)=\"onNavigateToPayments($event)\"\n        ></bb-billpay-payee-navigate-modal>\n      </div>\n    </div>\n  </ng-container>\n</ng-container> \n\n<ng-container *ngIf=\"currentLoadingState | async as currentLoadingState\">\n  <ng-container *ngIf=\"currentLoadingState === 'loading'\">\n    <div class=\"card card-lg\">\n      <div class=\"card-body\">\n        <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"currentLoadingState === 'error'\">\n    <div class=\"card card-lg\">\n      <div class=\"card-body\">\n        <bb-empty-state-ui\n          data-role=\"error-state\"\n          iconSize=\"xxl\"\n          iconModifier=\"error-outline\"\n          subtitle=\"Try to reload the page or contact support\"\n          i18n-subtitle=\"\n            Try to reload the page or contact support|Payee Summary error loading\n            subtitle@@bb-billpay-payee-summary-widget-ang.loading.subtitle\"\n          title=\"Could not fetch payee details\"\n          i18n-title=\"\n            Could not fetch payee details|Payee Summary error loading\n            title@@bb-billpay-payee-summary-widget-ang.loading.title\"\n        >\n        </bb-empty-state-ui>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template #emptyState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body bb-state-container\">\n      <bb-empty-state-ui\n        data-role=\"empty-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"assignment-ind\"\n        subtitle=\"Add a payee to make a bill payment\"\n        i18n-subtitle=\"\n          Add a payee to make a bill payment|Payee Summary no payees\n          subtitle@@bb-billpay-payee-summary-widget-ang.bb-empty-state-ui.subtitle\"\n        title=\"No payees\"\n        i18n-title=\"\n          No payees state text|Payee Summary no payees\n          title@@bb-billpay-payee-summary-widget-ang.bb-empty-state-ui.title\"\n      >\n      </bb-empty-state-ui>\n      <div class=\"bb-state-container__footer\">\n        <button\n          bbButton\n          data-role=\"empty-state-add-payee-btn\"\n          (click)=\"gotoAddPayee()\"\n          i18n=\"\n            Add a payee|Payee Summary add payee\n            button@@bb-billpay-payee-summary-widget-ang.bb-empty-state-ui.button.add-payee\"\n        >\n          Add a payee\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <div>\n    <span\n      i18n=\"\n        delete payee notification header|Payee delete confirmation success notification\n        header@@billpay-payee-summary.confirm.notification.header\"\n      >Payee deleted</span\n    >\n  </div>\n</ng-template>\n","export enum PayverisEnrolmentState {\n  Initialize,\n  Login,\n  SelectBiller,\n  OtpSelect,\n  OtpEntry,\n  Callback,\n  Captcha,\n  Mfa,\n  SelectAccounts,\n  Success,\n  ErrorState,\n  Undefined,\n}\n\nexport enum PayverisEnrolmentComponentState {\n  Undefined,\n  Ready,\n  Checking,\n  Callback,\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { Payee, ElectronicPayeeByIdGetResponseBody } from '@backbase/data-ang/billpay';\n\nimport { ManualPayeeFormState, ElectronicPayeeForm } from '../model';\n\n@Injectable()\nexport class BillpayManagePayeeStateService {\n  private readonly manualPayeeStateSource$ = new BehaviorSubject<ManualPayeeFormState | undefined>(undefined);\n  readonly manualPayeeFormState: Observable<\n    ManualPayeeFormState | undefined\n  > = this.manualPayeeStateSource$.asObservable();\n\n  private readonly electronicPayeeStateSource = new BehaviorSubject<ElectronicPayeeForm | undefined>(undefined);\n  readonly electronicPayeeFormState: Observable<\n    ElectronicPayeeForm | undefined\n  > = this.electronicPayeeStateSource.asObservable();\n\n  isFormProcessing = false;\n\n  setManualPayee(state?: ManualPayeeFormState) {\n    this.manualPayeeStateSource$.next(state);\n  }\n\n  toManualFormState(data: Payee): ManualPayeeFormState {\n    return {\n      name: data.name,\n      address: data.address,\n      phoneNumber: data.phoneNumber || '',\n      ...(data.accountNumber && { accountNumber: data.accountNumber }),\n      ...(data.nickName && { nickName: data.nickName }),\n    };\n  }\n\n  resetManualPayee() {\n    this.setManualPayee();\n  }\n\n  setElectronicPayee(state?: ElectronicPayeeForm) {\n    this.electronicPayeeStateSource.next(state);\n  }\n\n  resetElectronicPayee() {\n    this.setElectronicPayee();\n  }\n\n  electronicGetResponseToForm(payeeResponse: ElectronicPayeeByIdGetResponseBody): ElectronicPayeeForm {\n    const { name, nickName, accountNumber } = payeeResponse.payee;\n\n    return {\n      name,\n      nickName,\n      accountNumber,\n    };\n  }\n}\n","import { HostListener, OnDestroy, OnInit, Directive, Input } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BehaviorSubject, Observable, of, Subject } from 'rxjs';\nimport { filter, map, shareReplay, switchMap, take, takeUntil, tap } from 'rxjs/operators';\n\nimport {\n  BillpayDiscardChangesModalService,\n  BillpayDiscardChangesFormComponent,\n} from '@backbase/billpay-journeys-common';\nimport { ElectronicPayeeForm } from './payee-form.model';\nimport { BillpayManagePayeeStateService } from '../services/billpay-manage-payee-state.service';\n\n@Directive()\nexport abstract class BaseElectronicPayeeReviewPageModelDirective\n  implements OnInit, OnDestroy, BillpayDiscardChangesFormComponent {\n  readonly payee$: Observable<ElectronicPayeeForm | undefined>;\n  readonly id$: Observable<string>;\n  protected readonly destroy$ = new Subject<void>();\n  @Input() dismissTimeoutValue: number | undefined;\n\n  protected abstract readonly payeeSubmit$: BehaviorSubject<any>;\n  abstract navigateBack(id: string): void;\n  protected abstract onSubmitPayee(payee: any): void;\n\n  /** @internal */\n  protected constructor(\n    protected readonly route: ActivatedRoute,\n    protected readonly stateService: BillpayManagePayeeStateService,\n    protected readonly discardModalService: BillpayDiscardChangesModalService,\n  ) {\n    this.payee$ = this.stateService.electronicPayeeFormState.pipe(take(1), shareReplay(1));\n\n    this.id$ = this.route.paramMap.pipe(\n      take(1),\n      map(params => params.get('id') || ''),\n    );\n  }\n\n  ngOnInit() {\n    this.payee$\n      .pipe(\n        filter(payee => !payee),\n        switchMap(() => this.id$),\n      )\n      .subscribe(id => {\n        this.navigateBack(id);\n      });\n\n    this.payeeSubmit$.pipe(takeUntil(this.destroy$), filter(Boolean)).subscribe(payee => this.onSubmitPayee(payee));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if (!this.isDiscardModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  protected get dismissTimeout(): number {\n    if (this.dismissTimeoutValue === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.dismissTimeoutValue;\n  }\n\n  openModal(): Observable<boolean> {\n    return this.payeeSubmit$.pipe(\n      switchMap(payee => (payee ? of(true) : this.discardModalService.openModal())),\n      tap(isResolved => isResolved && this.stateService.resetElectronicPayee()),\n    );\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    this.discardModalService.onModalResolve(resolvedWith);\n  }\n}\n","import { HostListener, OnDestroy, Directive } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  BillpayDiscardChangesFormComponent,\n  BillpayDiscardChangesModalService,\n} from '@backbase/billpay-journeys-common';\nimport { Observable, of, Subject } from 'rxjs';\nimport { map, shareReplay, switchMap, take, takeUntil, tap } from 'rxjs/operators';\n\nimport { BillpayManagePayeeStateService } from '../services/billpay-manage-payee-state.service';\nimport { ElectronicPayeeForm } from './payee-form.model';\n\n@Directive()\nexport abstract class BaseElectronicPayeePageDirective implements OnDestroy, BillpayDiscardChangesFormComponent {\n  protected isFormTouched = false;\n  protected readonly payeeState$: Observable<ElectronicPayeeForm | undefined>;\n  protected readonly id$: Observable<string>;\n  protected readonly destroy$ = new Subject<void>();\n  isFindPayeeModal = false;\n\n  /** @internal */\n  protected constructor(\n    protected readonly route: ActivatedRoute,\n    protected readonly stateService: BillpayManagePayeeStateService,\n    protected readonly discardModalService: BillpayDiscardChangesModalService,\n  ) {\n    this.id$ = this.route.paramMap.pipe(\n      take(1),\n      map(params => params.get('id') || ''),\n    );\n\n    this.payeeState$ = this.stateService.electronicPayeeFormState.pipe(take(1), shareReplay(1));\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    this.payeeState$.subscribe(state => {\n      if ((state || this.isFormTouched) && !this.isDiscardModalOpen) {\n        $event.returnValue = true;\n      }\n    });\n  }\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  onFormValueChanged() {\n    this.isFormTouched = true;\n  }\n\n  openModal(): Observable<boolean> {\n    const openModal = () =>\n      this.discardModalService\n        .openModal()\n        .pipe(tap(isResolved => isResolved && this.stateService.resetElectronicPayee()));\n\n    return this.payeeState$.pipe(\n      switchMap(payeeState => (payeeState || this.isFormTouched ? openModal() : of(true))),\n      takeUntil(this.destroy$),\n    );\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    this.isFindPayeeModal = false;\n    this.discardModalService.onModalResolve(resolvedWith);\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpResponse } from '@angular/common/http';\nimport { Observable, Subject } from 'rxjs';\nimport { catchError, pluck } from 'rxjs/operators';\nimport {\n  BillPayPayverisService,\n  BillPayPayeesService,\n  EbillAccount,\n  EbillBiller,\n  EbillCredential,\n  OtpDeliveryMethod,\n  BillPayPayverisEbillsEnrolmentPostRequestBody,\n  BillPayPayverisEbillsEnrolmentPostResponseBody,\n} from '@backbase/data-ang/billpay';\nimport { BillpayUtilityService as Utilities } from '@backbase/billpay-journeys-common';\nimport { PayverisEnrolmentState } from '../model/payveris-enrolment-state.enum';\nimport { PayverisEnrolmentComponentState, PayverisOtpPasscode, PayverisLogin, PayverisCaptcha } from '../model';\n\n@Injectable()\nexport class BillpayPayverisEbillsEnrolmentWidgetService {\n  private readonly widgetStateSource = new Subject<void>();\n  private _payeeId: string | undefined;\n  private _currentState = PayverisEnrolmentState.Initialize;\n  private _errorState: string | undefined;\n  private _componentState = PayverisEnrolmentComponentState.Undefined;\n  private _userInputFailed = false;\n  private readonly _responses = <any>{};\n  private _expectingLoginResponse = true;\n  private _otpTransportMethodSelected: string | undefined;\n  private _expectingOtpEntryResponse = false;\n  private _payload: BillPayPayverisEbillsEnrolmentPostRequestBody;\n  private readonly _MIN_CALLBACK_TIME = 1;\n  private timer: ReturnType<typeof setTimeout> | undefined;\n\n  readonly widgetStateChange: Observable<void> = this.widgetStateSource.asObservable();\n\n  /** @internal */\n  constructor(\n    private readonly payverisData: BillPayPayverisService,\n    private readonly payeesData: BillPayPayeesService,\n  ) {\n    this._payload = {\n      payeeID: <string>this._payeeId,\n      credentials: [],\n    };\n  }\n\n  submitPayverisRequest(\n    payload: BillPayPayverisEbillsEnrolmentPostRequestBody,\n  ): Observable<HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>> {\n    this._componentState = PayverisEnrolmentComponentState.Checking;\n    this._userInputFailed = false;\n    return this.payverisData\n      .postBillPayPayverisEbillsEnrolment({ billPayPayverisEbillsEnrolmentPostRequestBody: payload }, 'response')\n      .pipe(\n        catchError(err => {\n          this.handleError(err);\n          return new Observable<HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>>();\n        }),\n      );\n  }\n\n  getPayeeNameFromID(id: string | undefined): Observable<string> {\n    return this.payeesData.getElectronicPayeeById({ id: <string>id }).pipe(pluck('payee', 'name'));\n  }\n\n  onInitializeEnrolment() {\n    if (this._payeeId) {\n      this._payload = {\n        payeeID: this._payeeId,\n        credentials: [],\n      };\n    } else {\n      this.handleError(undefined);\n      return false;\n    }\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleStatusResponse(response);\n    });\n    return true;\n  }\n\n  private handleStatusResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>) {\n    if (this.isBillersResponse(response)) {\n      return this.setState(PayverisEnrolmentState.SelectBiller, response, 'billersResponse');\n    }\n    if (this.isSelectAccountResponse(response)) {\n      return this.setState(PayverisEnrolmentState.SelectAccounts, response, 'accountsResponse');\n    }\n    if (this.isOtpSelectResponse(response)) {\n      return this.setState(PayverisEnrolmentState.OtpSelect, response, 'otpTransportResponse');\n    }\n    if (this.isCaptchaResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Captcha, response, 'captchaResponse');\n    }\n    if (this.isCredentialsResponse(response)) {\n      return this.handleCredentialsOnStatusResponse(response);\n    }\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    if (this.isSuccessResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Success);\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  private handleCredentialsOnStatusResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>) {\n    if (this._expectingLoginResponse) {\n      this._expectingLoginResponse = false;\n      return this.setState(PayverisEnrolmentState.Login, response, 'credentialsResponse');\n    }\n    if (this._expectingOtpEntryResponse) {\n      this._expectingOtpEntryResponse = false;\n      return this.setState(PayverisEnrolmentState.OtpEntry, response, 'otpPasscodeResponse');\n    }\n    return this.setState(PayverisEnrolmentState.Mfa, response, 'mfaResponse');\n  }\n\n  onSubmitBillerSelection(billerSelectedIndex: number) {\n    const billerSelected = this.billers ? this.billers[billerSelectedIndex] : {};\n    this._payload = {\n      payeeID: <string>this._payeeId,\n      biller: billerSelected,\n      credentials: [],\n    };\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleBillerResponse(response);\n    });\n  }\n\n  private handleBillerResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>) {\n    if (this.isCredentialsResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Login, response, 'credentialsResponse');\n    }\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  onSubmitPayeeLogin(login: PayverisLogin | undefined) {\n    if (login && this.loginCredentialsArray && this.loginCredentialsArray.length >= 2) {\n      const credentials = this.loginCredentialsArray?.map((credentials, i) => {\n        return {\n          ...credentials,\n          value: login[i],\n        };\n      });\n      this._payload = {\n        payeeID: <string>this._payeeId,\n        credentials: credentials,\n      };\n    } else {\n      this.handleError(undefined);\n    }\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleCredentialResponse(response);\n    });\n  }\n\n  private handleCredentialResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    if (this.isOtpSelectResponse(response)) {\n      return this.setState(PayverisEnrolmentState.OtpSelect, response, 'otpTransportResponse');\n    }\n    if (this.isCaptchaResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Captcha, response, 'captchaResponse');\n    }\n    if (this.isCredentialsResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Mfa, response, 'mfaResponse');\n    }\n    if (this.isSelectAccountResponse(response)) {\n      return this.setState(PayverisEnrolmentState.SelectAccounts, response, 'accountsResponse');\n    }\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  onSubmitPayverisEbillMfa() {\n    this._payload = {\n      payeeID: <string>this._payeeId,\n      credentials: this.mfaArray || [],\n    };\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleMfaResponse(response);\n    });\n  }\n\n  private handleMfaResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    if (this.isCredentialsResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Mfa, response, 'mfaResponse');\n    }\n    if (this.isSelectAccountResponse(response)) {\n      return this.setState(PayverisEnrolmentState.SelectAccounts, response, 'accountsResponse');\n    }\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  onSubmitPayverisEbillOtpTransportSelection(transportSelectedIndex: number) {\n    this._expectingOtpEntryResponse = true;\n    const transportSelected = this.otpTransports ? this.otpTransports[transportSelectedIndex] : {};\n    this._otpTransportMethodSelected = transportSelected.value;\n    const label = this.getLabelFromResponse(this._responses['otpTransportResponse']);\n    const selection: EbillCredential = {\n      label: label,\n      value: transportSelected.id,\n    };\n    this._payload = {\n      payeeID: <string>this._payeeId,\n      credentials: [selection],\n    };\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleOtpTransportResponse(response);\n    });\n  }\n\n  private handleOtpTransportResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    if (this.isCredentialsResponse(response)) {\n      return this.setState(PayverisEnrolmentState.OtpEntry, response, 'otpPasscodeResponse');\n    }\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  onSubmitPayverisEbillPayeeOtpPasscode(passcode: PayverisOtpPasscode) {\n    this.submitVerificationStep(this._responses['otpPasscodeResponse'], passcode.passcode);\n  }\n\n  onSubmitPayverisEbillPayeeCaptcha(captcha: PayverisCaptcha) {\n    this.submitVerificationStep(this._responses['captchaResponse'], captcha.captcha);\n  }\n\n  private submitVerificationStep(\n    previousResponse: BillPayPayverisEbillsEnrolmentPostResponseBody | undefined,\n    credentialValue: string | undefined,\n  ) {\n    this._payload = this.prepareCredentialPayload(previousResponse, credentialValue);\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleVerificationResponse(response);\n    });\n  }\n\n  private prepareCredentialPayload(\n    response: BillPayPayverisEbillsEnrolmentPostResponseBody | undefined,\n    credentialValue: string | undefined,\n  ): BillPayPayverisEbillsEnrolmentPostRequestBody {\n    const label = this.getLabelFromResponse(response);\n    const selection: EbillCredential = {\n      label: label,\n      value: credentialValue,\n    };\n    return {\n      payeeID: <string>this.payeeId,\n      credentials: [selection],\n    };\n  }\n\n  private handleVerificationResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>) {\n    if (this.isSelectAccountResponse(response)) {\n      return this.setState(PayverisEnrolmentState.SelectAccounts, response, 'accountsResponse');\n    }\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  cancelEnrolment(): Observable<HttpResponse<any>> {\n    return this.payverisData.deleteBillPayPayverisEbillsEnrolment(this._payload);\n  }\n\n  onSubmitPayverisEbillAccountSelection(accountSelectedIndex: number) {\n    const accountSelected = this.accounts ? this.accounts[accountSelectedIndex] : undefined;\n    this._payload = {\n      payeeID: <string>this._payeeId,\n      account: accountSelected,\n      credentials: [],\n    };\n    this.submitPayverisRequest(this._payload).subscribe(response => {\n      this.handleAccountsResponse(response);\n    });\n  }\n\n  private handleAccountsResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>) {\n    if (this.isCallbackResponse(response)) {\n      return this.handleCallbackResponse(response);\n    }\n    if (this.isSuccessResponse(response)) {\n      return this.setState(PayverisEnrolmentState.Success, response, 'successResponse');\n    }\n    this.handleError(undefined);\n    return false;\n  }\n\n  private handleCallbackResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>) {\n    const callbackTime = Utilities.checkForProperty('body.callBackTime', response) || 0;\n    const callbackTimeInMs = Math.max(new Date(callbackTime).getTime() - new Date().getTime(), this._MIN_CALLBACK_TIME);\n    this.timer = setTimeout(() => {\n      this.onInitializeEnrolment();\n    }, callbackTimeInMs);\n    this._componentState = PayverisEnrolmentComponentState.Callback;\n    this.widgetStateSource.next();\n    return true;\n  }\n\n  cancelCallback() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n  }\n\n  private setState(\n    state: PayverisEnrolmentState,\n    response?: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody> | undefined,\n    responseToSet?: string | undefined,\n  ) {\n    this._currentState = state;\n    this._componentState = PayverisEnrolmentComponentState.Ready;\n    if (responseToSet) {\n      this._responses[responseToSet] = Utilities.checkForProperty('body', response);\n    }\n    this.widgetStateSource.next();\n    return true;\n  }\n\n  private handleError(error: any) {\n    this._errorState = Utilities.checkForProperty(['error', 'errors', 0, 'key'], error);\n    if (this._errorState === 'billpay.api.invalidCredentials') {\n      this._userInputFailed = true;\n      this._componentState = PayverisEnrolmentComponentState.Ready;\n      this.widgetStateSource.next();\n    } else {\n      this.setState(PayverisEnrolmentState.ErrorState);\n    }\n  }\n\n  private isCredentialsResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    return !!(\n      response.status === 200 && Utilities.checkForProperty('body.authentication.credentials.length', response) > 0\n    );\n  }\n\n  private isBillersResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    return !!(response.status === 200 && Utilities.checkForProperty('body.billers.length', response) > 0);\n  }\n\n  private isCallbackResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    const accounts = Utilities.checkForProperty('body.accounts', response);\n    return !!(\n      response.status === 200 &&\n      (!accounts || accounts.length === 0) &&\n      Utilities.checkForProperty('body.callBackRequired', response) &&\n      Utilities.checkForProperty('body.callBackTime', response)\n    );\n  }\n\n  private isSelectAccountResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    return !!(response.status === 200 && Utilities.checkForProperty('body.accounts.length', response) >= 1);\n  }\n\n  private isOtpSelectResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    return !!(\n      response.status === 200 &&\n      Utilities.checkForProperty('body.authentication.securityChallenge.oneTimePasscode', response)\n    );\n  }\n\n  private isCaptchaResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    return !!(\n      response.status === 200 &&\n      Utilities.checkForProperty('body.authentication.securityChallenge.captcha', response) &&\n      Utilities.checkForProperty('body.authentication.credentials', response)\n    );\n  }\n\n  private isSuccessResponse(response: HttpResponse<BillPayPayverisEbillsEnrolmentPostResponseBody>): boolean {\n    return !!(response.status === 200 && Utilities.checkForProperty('body.payeeID', response));\n  }\n\n  private getLabelFromResponse(\n    response: BillPayPayverisEbillsEnrolmentPostResponseBody | undefined,\n  ): string | undefined {\n    return Utilities.checkForProperty(['authentication', 'credentials', 0, 'label'], response);\n  }\n\n  set payeeId(value: string | undefined) {\n    this._payeeId = value;\n  }\n\n  credentialsResponse = (value: BillPayPayverisEbillsEnrolmentPostResponseBody | undefined) => {\n    this._responses.credentialsResponse = value;\n  };\n  get payeeId(): string | undefined {\n    return this._payeeId;\n  }\n\n  get currentState(): PayverisEnrolmentState {\n    return this._currentState;\n  }\n\n  get errorState(): string | undefined {\n    return this._errorState;\n  }\n\n  get componentState(): PayverisEnrolmentComponentState {\n    return this._componentState;\n  }\n\n  set componentState(value: PayverisEnrolmentComponentState) {\n    this._componentState = value;\n  }\n\n  get userInputFailed(): boolean {\n    return this._userInputFailed;\n  }\n\n  get loginCredentialsArray(): EbillCredential[] | undefined {\n    return Utilities.checkForProperty('credentialsResponse.authentication.credentials', this._responses) || [];\n  }\n\n  get mfaArray(): EbillCredential[] | undefined {\n    return Utilities.checkForProperty('mfaResponse.authentication.credentials', this._responses) || [];\n  }\n\n  get billers(): EbillBiller[] {\n    return Utilities.checkForProperty('billersResponse.billers', this._responses) || [];\n  }\n\n  get accounts(): EbillAccount[] {\n    return Utilities.checkForProperty('accountsResponse.accounts', this._responses) || [];\n  }\n\n  get otpTransportMethodSelected(): string | undefined {\n    return this._otpTransportMethodSelected;\n  }\n\n  private checkForPropertyWrapper(propertyBranch: string): any | undefined {\n    return Utilities.checkForProperty(propertyBranch, this._responses);\n  }\n\n  get otpTransports(): OtpDeliveryMethod[] | undefined {\n    return this.checkForPropertyWrapper(\n      'otpTransportResponse.authentication.securityChallenge.oneTimePasscode.deliveryMethods',\n    );\n  }\n\n  get captchaImageSrc(): string | undefined {\n    return this.checkForPropertyWrapper('captchaResponse.authentication.securityChallenge.captcha.image');\n  }\n\n  get captchaImageType(): string | undefined {\n    return this.checkForPropertyWrapper('captchaResponse.authentication.securityChallenge.captcha.mimeType');\n  }\n}\n","import { Component, EventEmitter, Output } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-cancel-modal',\n  templateUrl: './billpay-payveris-ebills-enrolment-cancel-modal.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentCancelModalComponent {\n  @Output() resolve = new EventEmitter<boolean>();\n\n  cancelModal() {\n    this.resolve.emit(false);\n  }\n\n  confirmModal() {\n    this.resolve.emit(true);\n  }\n}\n","<bb-modal-ui\n  [isOpen]=\"true\"\n  (cancel)=\"cancelModal()\"\n  (confirm)=\"confirmModal()\"\n  data-role=\"cancel-payveris-enrolment-modal\"\n>\n  <bb-modal-header-ui>\n    <ng-template bbCustomModalHeader>\n      <bb-header-ui\n        headingType=\"h2\"\n        heading=\"Cancel eBill enrolment?\"\n        i18n-heading=\"\n          Cancel eBill enrolment modal header|Header on cancel eBill enrolment modal in payveris ebill enrolment form\n          @@bb-billpay-payveris-ebills-enrolment.modal-header.cancel-enrolment\"\n      >\n      </bb-header-ui>\n    </ng-template>\n  </bb-modal-header-ui>\n\n  <bb-modal-body-ui>\n    <ng-template bbCustomModalBody>\n      <span\n        i18n=\"\n          Cancel eBill enrolment modal body|Body on cancel eBill enrolment modal in payveris ebill enrolment form\n          @@bb-billpay-payveris-ebills-enrolment.modal-body.cancel-enrolment\"\n        >Are you sure you want to cancel eBill enrolment? You will lose any details entered.</span\n      >\n    </ng-template>\n  </bb-modal-body-ui>\n\n  <bb-modal-footer-ui #footerRef>\n    <ng-template bbCustomModalFooter>\n      <div class=\"bb-button-bar\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          (click)=\"confirmModal()\"\n          color=\"danger\"\n          data-role=\"payveris-payee-cancel-enrollment-confirm\"\n          i18n=\"\n            Submit button text|Submit button on cancel eBill enrolment modal in payveris ebill enrolment\n            form@@bb-billpay-payveris-ebills-enrolment.button.composeMessageModal.submitButton\"\n        >\n          Cancel eBill enrolment\n        </button>\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          (click)=\"cancelModal()\"\n          color=\"secondary\"\n          data-role=\"payveris-payee-continue-enrollment-confirm\"\n          i18n=\"\n            Cancel button text|Cancel button on cancel eBill enrolment modal in payveris ebill enrolment\n            form@@bb-billpay-payveris-ebills-enrolment.button..composeMessageModal.cancelButton\"\n        >\n          Continue eBill enrolment\n        </button>\n      </div>\n    </ng-template>\n  </bb-modal-footer-ui>\n</bb-modal-ui>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { EbillBiller } from '@backbase/data-ang/billpay';\nimport { PayverisEnrolmentComponentState } from '../../../model';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-select-biller',\n  templateUrl: './billpay-payveris-ebills-enrolment-select-biller.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentSelectBillerComponent implements OnInit {\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * Array of applicable payee eBillers to pay.\n   */\n  @Input() billers: EbillBiller[] = [];\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n  @Output() billerSelect = new EventEmitter<number>();\n  @Output() returnToPayeeList = new EventEmitter();\n\n  billerSelectedIndex: number | undefined;\n  submitted = false;\n  selectingBiller = false;\n  cancelModalOpen = false;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  ngOnInit() {\n    if (this.billers && this.billers.length === 1) {\n      this.billerSelectedIndex = 0;\n    }\n  }\n\n  onSelectBillerSubmit() {\n    this.submitted = true;\n    if (this.billerSelectedIndex !== undefined) {\n      this.selectingBiller = true;\n      this.billerSelect.emit(this.billerSelectedIndex);\n    }\n  }\n\n  noSelectionMade() {\n    return this.billerSelectedIndex === undefined;\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking biller selection...\"\n      i18n-text=\"\n        Checking biller selection|Ebill Payveris Enrolment Widget checking biller selection\n        text@@bb-billpay-payveris-ebills-enrolment-select-biller.checking-biller.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        eBill enrolment is taking a little longer than usual, please be patient......|Ebill Payveris Enrolment Widget\n        taking longer than usual text@@bb-billpay-ebills-payveris-enrolment-widget-ang.select-biller-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <div\n      id=\"bb-select-biller\"\n      i18n=\"\n        Biller select prompt|Biller select prompt for payveris ebill enrolment biller select form\n        @@bb-billpay-payveris-ebills-enrolment-select-biller.note.biller-select-prompt\"\n    >\n      Select the biller you would like to get eBills for.\n    </div>\n\n    <form name=\"selectBillerForm\" #f=\"ngForm\" (ngSubmit)=\"onSelectBillerSubmit()\">\n      <!-- lg is chosen as the last element of `bb-input-radio-ui` has 8px bottom margin totalling 32px -->\n      <div class=\"bb-block bb-block--lg\">\n        <bb-input-radio-group-ui\n          name=\"billerID\"\n          id=\"billerID\"\n          aria-labelledby=\"bb-select-biller\"\n          [preselect]=\"false\"\n          [required]=\"true\"\n          [(ngModel)]=\"billerSelectedIndex\"\n          #billerID=\"ngModel\"\n          ngDefaultControl\n        >\n          <bb-input-radio-ui *ngFor=\"let biller of billers; let i = index\" value=\"{{ i }}\" label=\"{{ biller.value }}\">\n          </bb-input-radio-ui>\n        </bb-input-radio-group-ui>\n\n        <bb-input-validation-message-ui\n          [showErrors]=\"submitted && noSelectionMade()\"\n          i18n=\"\n            Select biller warning|Warning on payveris ebill enrolment select biller form\n            @@bb-billpay-payveris-ebills-enrolment-select-biller.warning.select-biller-warning\"\n          data-role=\"payveris-payee-select-biller-multiple-no-selection-warning\"\n        >\n          You must select a biller.\n        </bb-input-validation-message-ui>\n      </div>\n\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          type=\"submit\"\n          i18n=\"\n            Continue from biller selection|Continue from biller selection button on payveris ebill enrolment biller\n            select form @@bb-billpay-payveris-ebills-enrolment-select-biller.button.continue-from-billers\"\n          data-role=\"payveris-payee-select-biller-continue\"\n        >\n          Continue\n        </button>\n\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          color=\"link\"\n          (click)=\"cancelModalOpen = true\"\n          i18n=\"\n            Cancel enrolment multiple billers|Cancel enrolment button on payveris ebill enrolment multiple biller select\n            form @@bb-billpay-payveris-ebills-enrolment-select-biller.button.cancel-enrolment-multiple-billers\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { EbillCredential } from '@backbase/data-ang/billpay';\nimport { PayverisLogin, PayverisEnrolmentComponentState } from '../../../model';\ndeclare const $localize: any;\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-login',\n  templateUrl: './billpay-payveris-ebills-enrolment-login.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentLoginComponent implements OnInit {\n  loginForm!: FormGroup;\n\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * Array of login credential objects to be used for username and password elements.\n   */\n  @Input() credentialsArray: EbillCredential[] | undefined;\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n  /**\n   * Displays elements for a failed submission. Defaults to false.\n   */\n  @Input() credentialsFailed = false;\n  @Output() returnToPayeeList = new EventEmitter();\n  @Output() payeeLogin = new EventEmitter<PayverisLogin>();\n\n  submitted = false;\n  cancelModalOpen = false;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  /** @internal */\n  constructor(private formBuilder: FormBuilder) {}\n\n  ngOnInit() {\n    this.credentialsArray = this.credentialsArray?.map(credentials => {\n      return {\n        ...credentials,\n        additions: {\n          ...credentials.additions,\n          label_text: $localize`${credentials.label}`,\n        },\n      };\n    });\n    this.loginForm = this.formBuilder.group(this.formFields());\n  }\n\n  formFields() {\n    const group: any = {};\n    this.credentialsArray?.forEach((field, i) => {\n      group[i] = [field.value || '', Validators.required];\n    });\n    return group;\n  }\n\n  onPayverisLoginSubmit() {\n    this.submitted = true;\n    if (this.loginForm.valid) {\n      this.payeeLogin.emit(this.loginForm.value);\n    }\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking credentials...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget checking credentials\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.checking-credentials.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget taking longer than usual\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.login-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <bb-alert-ui\n      *ngIf=\"credentialsFailed\"\n      title=\"The information you provided is incorrect. Please try again.\"\n      data-role=\"payveris-payee-login-credentials-warning\"\n      i18n-title=\"\n        Login credentials failed alert|Text for login credentials failed\n        alert@@bb-billpay-payveris-ebills-enrolment-login.login-credentials-failed-alert\"\n    >\n    </bb-alert-ui>\n\n    <div\n      class=\"bb-block bb-block--lg\"\n      i18n=\"\n        Login prompt|Login prompt for payveris ebill enrolment login form\n        @@bb-billpay-payveris-ebills-enrolment-login.note.login-prompt\"\n    >\n      Please log in with your {{ payeeName }} credentials. We will only use them to retrieve information about bills.\n    </div>\n\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"onPayverisLoginSubmit()\">\n      <div class=\"bb-block bb-block--xl\">\n        <div class=\"bb-block bb-block--sm\" *ngFor=\"let field of credentialsArray; index as i\">\n          <bb-input-text-ui\n            class=\"bb-form-field bb-form-field--md\"\n            [label]=\"field.additions.label_text\"\n            [attr.data-role]=\"'payveris-payee-login-' + i\"\n            [required]=\"true\"\n            [maxLength]=\"255\"\n            [formControlName]=\"i\"\n            *ngIf=\"field.label !== 'password'\"\n            [autofocus]=\"i === 0\"\n          >\n          </bb-input-text-ui>\n\n          <bb-input-password-ui\n            class=\"bb-form-field bb-form-field--md\"\n            [label]=\"field.additions.label_text\"\n            [attr.data-role]=\"'payveris-payee-login-' + i\"\n            [required]=\"true\"\n            [maxLength]=\"255\"\n            [showVisibilityControl]=\"true\"\n            [formControlName]=\"i\"\n            *ngIf=\"field.label === 'password'\"\n          >\n          </bb-input-password-ui>\n\n          <bb-input-validation-message-ui [showErrors]=\"submitted && loginForm?.get(i.toString())?.invalid\">\n            <ng-container\n              i18n=\"\n                You must enter warning|Validity warning for login field on payveris ebill enrolment login form\n                @@bb-billpay-payveris-ebills-enrolment-login.warning.login-warning\"\n            >\n              You must enter\n            </ng-container>\n            {{ field.additions.label_text }}\n          </bb-input-validation-message-ui>\n        </div>\n      </div>\n\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          type=\"submit\"\n          data-role=\"payveris-payee-login-continue\"\n          i18n=\"\n            Continue enrolment|Continue enrolment button on payveris ebill enrolment login form\n            @@bb-billpay-payveris-ebills-enrolment-login.button.continue-enrolment\"\n        >\n          Continue\n        </button>\n\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          color=\"light\"\n          (click)=\"cancelModalOpen = true\"\n          data-role=\"payveris-payee-cancel-enrollment-init\"\n          color=\"link\"\n          i18n=\"\n            Cancel enrolment|Cancel enrolment button on payveris ebill enrolment login form\n            @@bb-billpay-payveris-ebills-enrolment-login.button.cancel-enrolment\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EbillCredential } from '@backbase/data-ang/billpay';\nimport { BillpayUtilityService as Utilities } from '@backbase/billpay-journeys-common';\nimport { PayverisEnrolmentComponentState } from '../../../model';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-mfa-entry',\n  templateUrl: './billpay-payveris-ebills-enrolment-mfa-entry.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentMfaEntryComponent implements OnInit {\n  submitted = false;\n  cancelModalOpen = false;\n  mfaLabel: string | undefined = undefined;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * Array of MFA options.\n   */\n  @Input() mfaArray: EbillCredential[] | undefined;\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n  /**\n   * Displays elements for a failed submission. Defaults to false.\n   */\n  @Input() mfaFailed = false;\n  @Output() returnToPayeeList = new EventEmitter();\n  @Output() mfaEntry = new EventEmitter();\n\n  mfaForm = new FormGroup({\n    formQuestions: new FormArray([]),\n  });\n\n  get formQuestions() {\n    return this.mfaForm.get('formQuestions') as FormArray;\n  }\n\n  ngOnInit() {\n    if (this.mfaArray) {\n      this.mfaArray.forEach(() => {\n        this.formQuestions.push(new FormControl('', Validators.required));\n      });\n    }\n    this.mfaLabel = Utilities.checkForProperty([0, 'label'], this.mfaArray);\n  }\n\n  onMfaSubmit() {\n    this.submitted = true;\n    if (this.mfaForm.valid) {\n      this.mfaEntry.emit();\n      this.submitted = false;\n    }\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking answer ...\"\n      i18n-text=\"\n        Checking answer|Ebill Payveris Enrolment Widget checking mfa\n        text@@bb-billpay-ebills-payveris-enrolment-mfa-entry.checking-mfa.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget taking longer than usual\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.mfa-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <bb-alert-ui\n      *ngIf=\"mfaFailed\"\n      title=\"The answer you provided is incorrect. Please try again.\"\n      data-role=\"payveris-payee-mfa-warning\"\n      i18n-title=\"Mfa failed alert|Text for mfa failed alert@@bb-billpay-payveris-ebills-enrolment-mfa.mfa-failed-alert\"\n    >\n    </bb-alert-ui>\n\n    <div\n      class=\"bb-block bb-block--lg\"\n      i18n=\"\n        mfa prompt|mfa prompt for payveris ebill enrolment mfa\n        form@@bb-billpay-payveris-ebills-enrolment-mfa.note.mfa-prompt\"\n    >\n      Please answer the following security question(s).\n    </div>\n\n    <form [formGroup]=\"mfaForm\" (ngSubmit)=\"onMfaSubmit()\">\n      <div class=\"bb-block bb-block--xl\" formArrayName=\"formQuestions\">\n        <div *ngFor=\"let mfa of mfaArray; let i = index\" class=\"bb-block bb-block--md\">\n          <bb-input-text-ui\n            class=\"bb-form-field bb-form-field--md\"\n            i18n-label=\"\n              mfa label|Label for mfa on payveris ebill mfa form\n              @@bb-billpay-payveris-ebills-enrolment-mfa.label.mfa-label\"\n            label=\"{{ mfaArray[i].label }}\"\n            data-role=\"payveris-payee-mfa-input\"\n            [required]=\"true\"\n            [maxLength]=\"255\"\n            [formControlName]=\"i\"\n            ngDefaultControl\n            autofocus\n          >\n          </bb-input-text-ui>\n\n          <bb-input-validation-message-ui [showErrors]=\"submitted && formQuestions.controls[i].invalid\">\n            <span\n              data-role=\"payveris-payee-mfa-blank-warning\"\n              i18n=\"\n                mfa warning|Validity warning for mfa on payveris ebill enrolment mfa form\n                @@bb-billpay-payveris-ebills-enrolment-mfa.warning.mfa-warning\"\n            >\n              You must submit an answer\n            </span>\n          </bb-input-validation-message-ui>\n        </div>\n      </div>\n\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          type=\"submit\"\n          data-role=\"payveris-payee-mfa-continue\"\n          i18n=\"\n            Continue enrolment|Continue enrolment button on payveris ebill enrolment mfa form\n            @@bb-billpay-payveris-ebills-enrolment-mfa.button.continue-enrolment\"\n        >\n          Continue\n        </button>\n\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          color=\"link\"\n          (click)=\"cancelModalOpen = true\"\n          i18n=\"\n            Cancel enrolment|Cancel enrolment button on payveris ebill enrolment mfa form\n            @@bb-billpay-payveris-ebills-enrolment-mfa.button.cancel-enrolment\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { OtpDeliveryMethod } from '@backbase/data-ang/billpay';\nimport { PayverisEnrolmentComponentState } from '../../../model';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-otp-select',\n  templateUrl: './billpay-payveris-ebills-enrolment-otp-select.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentOtpSelectComponent implements OnInit {\n  transportSelectedIndex: number | undefined;\n  submitted = false;\n  cancelModalOpen = false;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * Array of OTP transport methods.\n   */\n  @Input() transports: OtpDeliveryMethod[] = [];\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n  @Output() transportSelect = new EventEmitter<number>();\n  @Output() returnToPayeeList = new EventEmitter();\n\n  ngOnInit() {\n    if (this.transports && this.transports.length === 1) {\n      this.transportSelectedIndex = 0;\n    }\n  }\n\n  onSelectTransportSubmit() {\n    this.submitted = true;\n    if (this.transportSelectedIndex !== undefined) {\n      this.transportSelect.emit(this.transportSelectedIndex);\n    }\n  }\n\n  noSelectionMade() {\n    return this.transportSelectedIndex === undefined;\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Submitting selection...\"\n      i18n-text=\"\n        Submitting selection|Ebill Payveris Enrolment Widget submitting otp selection\n        text@@bb-billpay-ebills-payveris-enrolment-otp-select.submit-otp-selection.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        eBill enrolment is taking a little longer than usual, please be patient...|Ebill Payveris Enrolment Widget\n        taking longer than usual text@@bb-billpay-ebills-payveris-enrolment-widget-ang.otp-select-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <ng-container *ngIf=\"transports.length > 1\">\n      <div\n        class=\"bb-block bb-block--sm\"\n        i18n=\"\n          Transport select prompt|Transport select prompt for payveris ebill enrolment transport select form\n          @@bb-billpay-payveris-ebills-enrolment-select-transport.note.transport-select-prompt\"\n      >\n        A one-time passcode (OTP) is required to verify your identity. Please select how you would like to receive it.\n      </div>\n\n      <form name=\"selectTransportForm\" #f=\"ngForm\" (ngSubmit)=\"onSelectTransportSubmit()\">\n        <div class=\"bb-block bb-block--lg\">\n          <bb-input-radio-group-ui\n            name=\"transportID\"\n            id=\"transportID\"\n            aria-labelledby=\"bb-select-transport\"\n            [required]=\"true\"\n            [preselect]=\"false\"\n            [(ngModel)]=\"transportSelectedIndex\"\n            #transportID=\"ngModel\"\n            ngDefaultControl\n          >\n            <bb-input-radio-ui\n              *ngFor=\"let transport of transports; let i = index\"\n              value=\"{{ i }}\"\n              label=\"{{ transport.value }}\"\n              i18n-label=\"\n                Transport type of one-time-passcode radio\n                button@@bb-billpay-payveris-ebills-enrolment-select-transport.radio.label\"\n            >\n            </bb-input-radio-ui>\n          </bb-input-radio-group-ui>\n\n          <bb-input-validation-message-ui [showErrors]=\"submitted && noSelectionMade()\">\n            <span\n              data-role=\"payveris-payee-select-transport-multiple-no-selection-warning\"\n              i18n=\"\n                Select transport warning|Warning on payveris ebill enrolment select transport form\n                @@bb-billpay-payveris-ebills-enrolment-select-transport.warning.select-transport-warning\"\n            >\n              You must select a passcode destination.\n            </span>\n          </bb-input-validation-message-ui>\n        </div>\n\n        <div class=\"bb-button-bar bb-button-bar--reverse\">\n          <button\n            class=\"bb-button-bar__button\"\n            bbButton\n            type=\"submit\"\n            i18n=\"\n              Continue from multiple transports|Continue button on payveris ebill enrolment multiple transports select\n              form @@bb-billpay-payveris-ebills-enrolment-select-transports.button.continue-multiple-transports\"\n            data-role=\"payveris-payee-select-transports-multiple-continue\"\n          >\n            Continue\n          </button>\n\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            color=\"link\"\n            (click)=\"cancelModalOpen = true\"\n            i18n=\"\n              Cancel enrolment multiple transports|Cancel enrolment button on payveris ebill enrolment multiple\n              transports select form\n              @@bb-billpay-payveris-ebills-enrolment-select-transport.button.cancel-enrolment-multiple-transports\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </ng-container>\n\n    <ng-container *ngIf=\"transports.length === 1\">\n      <div\n        class=\"bb-block bb-block--lg\"\n        i18n=\"\n          Check single transport prompt|Check single transport prompt on payveris ebill enrolment single transport\n          select form @@bb-billpay-payveris-ebills-enrolment-select-transport.button.check-single-transport-prompt\"\n        data-role=\"payveris-payee-select-transport-single-prompt\"\n      >\n        A one-time passcode (OTP) is required to verify your identity. Please confirm the delivery method.\n      </div>\n\n      <div\n        class=\"bb-block bb-block--xl\"\n        i18n=\"\n          Check single transport sub-header|Check single transport sub-header on payveris ebill enrolment single\n          transport select form\n          @@bb-billpay-payveris-ebills-enrolment-select-transport.button.check-single-transport-sub-header\"\n      >\n        {{ transports[0].value }}\n      </div>\n\n      <form name=\"selectTransportForm\" #f=\"ngForm\" (ngSubmit)=\"onSelectTransportSubmit()\">\n        <div class=\"bb-button-bar bb-button-bar--reverse\">\n          <button\n            bbButton\n            type=\"submit\"\n            class=\"bb-button-bar__button\"\n            i18n=\"\n              Continue from single transport|Continue ebills button on payveris ebill enrolment single transport select\n              form @@bb-billpay-payveris-ebills-enrolment-select-transport.button.continue-single-transport\"\n            data-role=\"payveris-payee-select-transport-single-continue\"\n          >\n            Continue\n          </button>\n\n          <button\n            bbButton\n            color=\"link\"\n            (click)=\"cancelModalOpen = true\"\n            class=\"bb-button-bar__button\"\n            i18n=\"\n              Cancel enrolment single transport|Cancel enrolment button on payveris ebill enrolment single transport\n              select form\n              @@bb-billpay-payveris-ebills-enrolment-select-transport.button.cancel-enrolment-single-transport\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { PayverisOtpPasscode, PayverisEnrolmentComponentState } from '../../../model';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-otp-entry',\n  templateUrl: './billpay-payveris-ebills-enrolment-otp-entry.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentOtpEntryComponent {\n  submitted = false;\n  cancelModalOpen = false;\n  private _passcodeFailed = false;\n  passcodeRecentlyFailed = false;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * The selected OTP transport method.\n   */\n  @Input() optTransportMethod: string | undefined;\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n\n  @Input() set passcodeFailed(hasFailed: boolean) {\n    this._passcodeFailed = hasFailed;\n    this.passcodeRecentlyFailed = hasFailed;\n    if (hasFailed) {\n      this.passcodeForm.controls['passcode'].markAsDirty();\n      this.passcodeForm.controls['passcode'].markAsTouched();\n      this.passcodeForm.controls['passcode'].setValue('');\n      this.passcodeForm.controls['passcode'].valueChanges.pipe(take(1)).subscribe(() => {\n        this.passcodeRecentlyFailed = false;\n      });\n    }\n  }\n  @Output() returnToPayeeList = new EventEmitter();\n  @Output() passcodeEntry = new EventEmitter<PayverisOtpPasscode>();\n\n  passcodeForm = new FormGroup({\n    passcode: new FormControl('', Validators.required),\n  });\n\n  /**\n   * Displays elements for a failed submission. Invalidates passcode form.\n   */\n  get passcodeFailed(): boolean {\n    return this._passcodeFailed;\n  }\n\n  onPayverisOtpPasscodeSubmit() {\n    this.submitted = true;\n    if (this.passcodeForm.valid) {\n      this.passcodeEntry.emit(this.passcodeForm.value as PayverisOtpPasscode);\n    }\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking passcode...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget checking otp passcode\n        text@@bb-billpay-ebills-payveris-enrolment-otp-passcode.checking-otp-passcode.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget taking longer than usual\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.otp-entry-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <bb-alert-ui\n      *ngIf=\"passcodeFailed\"\n      title=\"The passcode you provided is incorrect. Please try again.\"\n      i18n-title=\"\n        Text for passcode failed alert@@bb-billpay-payveris-ebills-enrolment-otp-passcode.passcode-failed-alert\"\n      data-role=\"payveris-payee-otp-passcode-warning\"\n    >\n    </bb-alert-ui>\n\n    <div\n      class=\"bb-block bb-block--md\"\n      i18n=\"\n        otp passcode prompt|otp passcode prompt for payveris ebill enrolment otp passcode form\n        @@bb-billpay-payveris-ebills-enrolment-otp-passcode.note.otp-passcode-prompt\"\n    >\n      A one-time passocde (OTP) has been sent to {{ optTransportMethod }}.\n    </div>\n\n    <form [formGroup]=\"passcodeForm\" (ngSubmit)=\"onPayverisOtpPasscodeSubmit()\">\n      <div class=\"bb-block bb-block--xl\">\n        <div class=\"bb-form-field bb-form-field--xs\">\n          <bb-input-text-ui\n            name=\"passcode\"\n            label=\"Passcode\"\n            i18n-label=\"\n              otp passcode label|Label for otp passcode on payveris ebill otp passcode form\n              @@bb-billpay-payveris-ebills-enrolment-otp-passcode.label.otp-passcode-label\"\n            data-role=\"payveris-payee-otp-passcode-input\"\n            [maxLength]=\"255\"\n            formControlName=\"passcode\"\n            [autofocus]=\"true\"\n            ngDefaultControl\n          >\n          </bb-input-text-ui>\n        </div>\n\n        <bb-input-validation-message-ui\n          *ngIf=\"passcodeForm.controls['passcode'].invalid && passcodeRecentlyFailed; else submitPasscode\"\n          [showErrors]=\"true\"\n        >\n          <span\n            i18n=\"\n              Incorrect otp passcode warning|Validity warning for otp passcode on payveris ebill enrolment otp passcode\n              form @@bb-billpay-payveris-ebills-enrolment-otp-passcode.warning.otp-passcode-incorrect\"\n          >\n            Incorrect passcode entered\n          </span>\n        </bb-input-validation-message-ui>\n\n        <ng-template #submitPasscode>\n          <bb-input-validation-message-ui [showErrors]=\"submitted && passcodeForm.controls['passcode'].invalid\">\n            <span\n              data-role=\"payveris-payee-otp-passcode-blank-warning\"\n              i18n=\"\n                Empty otp passcode warning|Empty warning for otp passcode on payveris ebill enrolment otp passcode form\n                @@bb-billpay-payveris-ebills-enrolment-otp-passcode.warning.otp-passcode-empty\"\n            >\n              You must submit a passcode\n            </span>\n          </bb-input-validation-message-ui>\n        </ng-template>\n      </div>\n\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          type=\"submit\"\n          data-role=\"payveris-payee-otp-passcode-continue\"\n          i18n=\"\n            Continue enrolment|Continue enrolment button on payveris ebill enrolment otp-passcode form\n            @@bb-billpay-payveris-ebills-enrolment-otp-passcode.button.continue-enrolment\"\n        >\n          Continue\n        </button>\n\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          color=\"link\"\n          i18n=\"\n            Cancel enrolment|Cancel enrolment button on payveris ebill enrolment otp passcode form\n            @@bb-billpay-payveris-ebills-enrolment-otp-passcode.button.cancel-enrolment\"\n          (click)=\"cancelModalOpen = true\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, OnInit, EventEmitter, Input, Output } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { PayverisCaptcha, PayverisEnrolmentComponentState } from '../../../model';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-captcha',\n  templateUrl: './billpay-payveris-ebills-enrolment-captcha.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentCaptchaComponent implements OnInit {\n  imageSrcRaw = '';\n  imageSrcData: SafeResourceUrl | undefined;\n  submitted = false;\n  cancelModalOpen = false;\n  _captchaFailed = false;\n  captchaRecentlyFailed = false;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * Image type of the captcha.\n   */\n  @Input() captchaImageType: string | undefined;\n  /**\n   * Image source of the captcha.\n   */\n  @Input() captchaImageSrc: string | undefined;\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n\n  @Input() set captchaFailed(hasFailed: boolean) {\n    this._captchaFailed = hasFailed;\n    this.captchaRecentlyFailed = hasFailed;\n    if (hasFailed) {\n      this.captchaForm.controls['captcha'].markAsDirty();\n      this.captchaForm.controls['captcha'].markAsTouched();\n      this.captchaForm.controls['captcha'].setValue('');\n      this.captchaForm.controls['captcha'].valueChanges.pipe(take(1)).subscribe(() => {\n        this.captchaRecentlyFailed = false;\n      });\n    }\n  }\n  @Output() returnToPayeeList = new EventEmitter();\n  @Output() captchaEntry = new EventEmitter<PayverisCaptcha>();\n\n  captchaForm = new FormGroup({\n    captcha: new FormControl('', Validators.required),\n  });\n\n  /** @internal */\n  constructor(private readonly sanitizer: DomSanitizer) {}\n\n  ngOnInit() {\n    const imageType = this.captchaImageType || '';\n    const imageSrc = this.captchaImageSrc || '';\n    this.imageSrcRaw = `data:${imageType};base64,${imageSrc}`;\n    this.imageSrcData = this.sanitizer.bypassSecurityTrustResourceUrl(this.imageSrcRaw);\n  }\n\n  /**\n   * @return _captchaFailed. Displays elements for a failed submission. Invalidates captcha form.\n   */\n  get captchaFailed(): boolean {\n    return this._captchaFailed;\n  }\n\n  onCaptchaSubmit() {\n    this.submitted = true;\n    if (this.captchaForm.valid) {\n      this.captchaEntry.emit(this.captchaForm.value as PayverisCaptcha);\n    }\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking text...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget checking captcha text\n        text@@bb-billpay-ebills-payveris-enrolment-captcha-ang.checking-captcha-text.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        Ebill Payveris Enrolment Widget taking longer than usual\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.captcha-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <bb-alert-ui\n      *ngIf=\"captchaFailed\"\n      title=\"The text you provided is incorrect. Please try again.\"\n      i18n-title=\"\n        Captcha failed alert|Text for captcha failed\n        alert@@bb-billpay-payveris-ebills-enrolment-captcha.captcha-failed-alert\"\n      data-role=\"payveris-payee-captcha-warning\"\n    >\n    </bb-alert-ui>\n\n    <div\n      class=\"bb-block bb-block--lg\"\n      i18n=\"\n        captcha prompt|captcha prompt for payveris ebill enrolment captcha form\n        @@bb-billpay-payveris-ebills-enrolment-captcha.note.captcha-prompt\"\n    >\n      Type the characters you see in this image.\n    </div>\n\n    <div class=\"bb-block bb-block--lg\">\n      <img\n        role=\"img\"\n        aria-label=\"Captcha image\"\n        i18n-aria-label=\"Captcha image aria-label@@bb-billpay-payveris-ebills-enrolment-captcha.img.captcha-img\"\n        [src]=\"imageSrcData\"\n        alt=\"Captcha image for payee.\"\n        i18n-alt=\"\n          Catcha image|Catcha image for payveris ebill enrolment captcha form\n          @@bb-billpay-payveris-ebills-enrolment-captcha.image.captcha-image\"\n      />\n    </div>\n\n    <form [formGroup]=\"captchaForm\" (ngSubmit)=\"onCaptchaSubmit()\">\n      <div class=\"bb-block bb-block--xl\">\n        <bb-input-text-ui\n          class=\"bb-form-field bb-form-field--xs\"\n          name=\"captcha\"\n          i18n-label=\"\n            captcha label|Label for captcha on payveris ebill captcha form\n            @@bb-billpay-payveris-ebills-enrolment-captcha.label.captcha-label\"\n          label=\"Type characters\"\n          data-role=\"payveris-payee-captcha-input\"\n          [required]=\"true\"\n          [maxLength]=\"255\"\n          formControlName=\"captcha\"\n          [autofocus]=\"true\"\n          ngDefaultControl\n        >\n        </bb-input-text-ui>\n\n        <bb-input-validation-message-ui\n          *ngIf=\"captchaForm.controls['captcha'].invalid && captchaRecentlyFailed; else submitCaptcha\"\n          [showErrors]=\"true\"\n        >\n          <span\n            i18n=\"\n              Incorrect captcha warning|Validity warning for captcha on payveris ebill enrolment captcha\n              form@@bb-billpay-payveris-ebills-enrolment-captcha.warning.captcha-incorrect\"\n          >\n            Incorrect captcha entered\n          </span>\n        </bb-input-validation-message-ui>\n\n        <ng-template #submitCaptcha>\n          <bb-input-validation-message-ui [showErrors]=\"submitted && captchaForm.controls['captcha'].invalid\">\n            <span\n              data-role=\"payveris-payee-captcha-blank-warning\"\n              i18n=\"\n                Empty captcha warning|Empty warning for captcha on payveris ebill enrolment captcha\n                form@@bb-billpay-payveris-ebills-enrolment-captcha.warning.captcha-empty\"\n            >\n              Please enter the captcha text shown\n            </span>\n          </bb-input-validation-message-ui>\n        </ng-template>\n      </div>\n\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          type=\"submit\"\n          data-role=\"payveris-payee-captcha-continue\"\n          i18n=\"\n            Continue enrolment|Continue enrolment button on payveris ebill enrolment captcha form\n            @@bb-billpay-payveris-ebills-enrolment-captcha.button.continue-enrolment\"\n        >\n          Continue\n        </button>\n\n        <button\n          bbButton\n          class=\"bb-button-bar__button\"\n          color=\"link\"\n          (click)=\"cancelModalOpen = true\"\n          i18n=\"\n            Cancel enrolment|Cancel enrolment button on payveris ebill enrolment captcha form\n            @@bb-billpay-payveris-ebills-enrolment-captcha.button.cancel-enrolment\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\nimport { EbillAccount } from '@backbase/data-ang/billpay';\nimport { PayverisEnrolmentComponentState } from '../../../model';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-select-account',\n  templateUrl: './billpay-payveris-ebills-enrolment-select-account.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentSelectAccountComponent implements OnInit {\n  /**\n   * Name of the payee.\n   */\n  @Input() payeeName: string | undefined;\n  /**\n   * Array of biller accounts.\n   */\n  @Input() accounts: EbillAccount[] = [];\n  /**\n   * The current state of the component. Controls loaded elements.\n   */\n  @Input() componentState = PayverisEnrolmentComponentState.Undefined;\n  @Output() accountSelect = new EventEmitter<number>();\n  @Output() returnToPayeeList = new EventEmitter();\n\n  accountSelectedIndex: number | undefined;\n  submitted = false;\n  cancelModalOpen = false;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n\n  ngOnInit() {\n    if (this.accounts && this.accounts.length === 1) {\n      this.accountSelectedIndex = 0;\n    }\n  }\n\n  onSelectAccountSubmit() {\n    this.submitted = true;\n    if (this.accountSelectedIndex !== undefined) {\n      this.accountSelect.emit(this.accountSelectedIndex);\n    }\n  }\n\n  noSelectionMade() {\n    return this.accountSelectedIndex === undefined;\n  }\n\n  onModalResolve(operationCancelled: boolean) {\n    this.cancelModalOpen = false;\n    if (operationCancelled) {\n      this.handleReturnToPayeeList();\n    }\n  }\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<ng-container [ngSwitch]=\"componentState\">\n  <ng-container *ngSwitchCase=\"ComponentStates.Checking\">\n    <bb-loading-indicator-ui\n      text=\"Checking account...\"\n      i18n-text=\"\n        Checking account...|Ebill Payveris Enrolment Widget checking account\n        text@@bb-billpay-ebills-payveris-enrolment-widget-ang.checking-account.text\"\n      loaderSize=\"lg\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Callback\">\n    <bb-loading-indicator-ui\n      text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n      i18n-text=\"\n        eBill enrolment is taking a little longer than usual, please be patient...|Ebill Payveris Enrolment Widget\n        taking longer than usual text@@bb-billpay-ebills-payveris-enrolment-widget-ang.select-account-call-back.text\"\n      loaderSize=\"lg\"\n      data-role=\"payveris-callback-info\"\n    ></bb-loading-indicator-ui>\n  </ng-container>\n\n  <ng-container *ngSwitchCase=\"ComponentStates.Ready\">\n    <ng-container *ngIf=\"accounts.length > 1\">\n      <div\n        i18n=\"\n          Account select prompt|Account select prompt for payveris ebill enrolment account select form\n          @@bb-billpay-payveris-ebills-enrolment-select-account.note.account-select-prompt\"\n      >\n        There are multiple accounts associated with this login ID. Please choose the correct one.\n      </div>\n\n      <form name=\"selectAccountForm\" #f=\"ngForm\" (ngSubmit)=\"onSelectAccountSubmit()\">\n        <div class=\"bb-block bb-block--lg\">\n          <bb-input-radio-group-ui\n            name=\"accountID\"\n            id=\"accountID\"\n            aria-labelledby=\"bb-select-account\"\n            [preselect]=\"false\"\n            [required]=\"true\"\n            [(ngModel)]=\"accountSelectedIndex\"\n            #accountID=\"ngModel\"\n          >\n            <bb-input-radio-ui\n              *ngFor=\"let account of accounts; let i = index\"\n              value=\"{{ i }}\"\n              label=\"{{ account.value }}\"\n            >\n            </bb-input-radio-ui>\n          </bb-input-radio-group-ui>\n\n          <bb-input-validation-message-ui [showErrors]=\"submitted && noSelectionMade()\">\n            <span\n              i18n=\"\n                Select account warning|Warning on payveris ebill enrolment select account form\n                @@bb-billpay-payveris-ebills-enrolment-select-account.warning.select-account-warning\"\n              data-role=\"payveris-payee-select-account-multiple-no-selection-warning\"\n            >\n              You must select an account.\n            </span>\n          </bb-input-validation-message-ui>\n        </div>\n\n        <div class=\"bb-button-bar bb-button-bar--reverse\">\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            type=\"submit\"\n            i18n=\"\n              Enable ebills multiple accounts|Enable ebills button on payveris ebill enrolment multiple account select\n              form @@bb-billpay-payveris-ebills-enrolment-select-account.button.enable-ebills-multiple-accounts\"\n            data-role=\"payveris-payee-select-account-multiple-enable-ebills\"\n          >\n            Enable eBills\n          </button>\n\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            color=\"link\"\n            (click)=\"cancelModalOpen = true\"\n            i18n=\"\n              Cancel enrolment multiple accounts|Cancel enrolment button on payveris ebill enrolment multiple account\n              select form\n              @@bb-billpay-payveris-ebills-enrolment-select-account.button.cancel-enrolment-multiple-accounts\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </ng-container>\n\n    <ng-container *ngIf=\"accounts.length === 1\">\n      <div\n        class=\"bb-block bb-block--lg\"\n        i18n=\"\n          Check single account prompt|Check single account prompt on payveris ebill enrolment single account select form\n          @@bb-billpay-payveris-ebills-enrolment-select-account.button.check-single-account-prompt\"\n        data-role=\"payveris-payee-select-account-single-prompt\"\n      >\n        Please check your account details to ensure you receive the correct bills for this payee.\n      </div>\n\n      <div\n        class=\"bb-block bb-block--xl\"\n        i18n=\"\n          Check single account sub-header|Check single account sub-header on payveris ebill enrolment single account\n          select form @@bb-billpay-payveris-ebills-enrolment-select-account.button.check-single-account-sub-header\"\n      >\n        {{ accounts[0].value }}\n      </div>\n\n      <form name=\"selectAccountForm\" #f=\"ngForm\" (ngSubmit)=\"onSelectAccountSubmit()\">\n        <div class=\"bb-button-bar bb-button-bar--reverse\">\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            type=\"submit\"\n            i18n=\"\n              Enable ebills single account|Enable ebills button on payveris ebill enrolment single account select form\n              @@bb-billpay-payveris-ebills-enrolment-select-account.button.enable-ebills-single-account\"\n            data-role=\"payveris-payee-select-account-single-enable-ebills\"\n          >\n            Enable eBills\n          </button>\n\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            color=\"link\"\n            (click)=\"cancelModalOpen = true\"\n            i18n=\"\n              Cancel enrolment single account|Cancel enrolment button on payveris ebill enrolment single account select\n              form @@bb-billpay-payveris-ebills-enrolment-select-account.button.cancel-enrolment-single-account\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-payveris-ebills-enrolment-cancel-modal *ngIf=\"cancelModalOpen\" (resolve)=\"onModalResolve($event)\">\n</bb-billpay-payveris-ebills-enrolment-cancel-modal>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-error',\n  templateUrl: './billpay-payveris-ebills-enrolment-error.component.html',\n})\nexport class BillpayPayverisEbillsEnrolmentErrorComponent {\n  /**\n   * Selects the error element to display based on supported billpay api error codes.\n   */\n  @Input() errorState: string | undefined;\n  @Output() returnToPayeeList = new EventEmitter();\n\n  handleReturnToPayeeList() {\n    this.returnToPayeeList.emit();\n  }\n}\n","<div [ngSwitch]=\"errorState\">\n  <bb-empty-state-ui\n    *ngSwitchCase=\"'billpay.api.invalidCredentials'\"\n    title=\"The information you entered is incorrect. Please try again.\"\n    i18n-title=\"\n      The information you provided is incorrect. Please try again.|eBills Payveris Enrolment invalid credentials\n      error@@bb-billpay-ebills-payveris-enrolment-error.title.invalid-credentials-error\"\n    iconSize=\"lg\"\n    iconModifier=\"error-outline\"\n    iconColor=\"danger\"\n  ></bb-empty-state-ui>\n  <bb-empty-state-ui\n    *ngSwitchCase=\"'billpay.api.ebillsAlreadyEnabled'\"\n    title=\"eBills are already enabled for the payee.\"\n    i18n-title=\"\n      eBills are already enabled for the payee.|eBills Payveris Enrolment eBills already enabled\n      error@@bb-billpay-ebills-payveris-enrolment-error.title.ebills-already-enabled-error\"\n    iconSize=\"lg\"\n    iconModifier=\"error-outline\"\n    iconColor=\"danger\"\n  ></bb-empty-state-ui>\n  <bb-empty-state-ui\n    *ngSwitchCase=\"'billpay.api.ebillsNotEnabled'\"\n    title=\"eBills are not enabled for the payee.\"\n    i18n-title=\"\n      eBills are not enabled for the payee.|eBills Payveris Enrolment eBills not enabled\n      error@@bb-billpay-ebills-payveris-enrolment-error.title.ebills-not-enabled-error\"\n    iconSize=\"lg\"\n    iconModifier=\"error-outline\"\n    iconColor=\"danger\"\n  ></bb-empty-state-ui>\n  <bb-empty-state-ui\n    *ngSwitchCase=\"'billpay.api.payeeNotEbillCapable'\"\n    title=\"The payee does not support eBills.\"\n    i18n-title=\"\n      The payee is not capable of eBills.|eBills Payveris Enrolment payee not eBill capable\n      error@@bb-billpay-ebills-payveris-enrolment-error.title.payee-not-ebill-capable-error\"\n    iconSize=\"lg\"\n    iconModifier=\"error-outline\"\n    iconColor=\"danger\"\n  ></bb-empty-state-ui>\n  <bb-empty-state-ui\n    *ngSwitchCase=\"'billpay.api.noValidEbillAccounts'\"\n    title=\"There are no accounts that support eBills for this payee.\"\n    i18n-title=\"\n      There are no valid eBill accounts found for the payee.|eBills Payveris Enrolment no valid eBill accounts\n      error@@bb-billpay-ebills-payveris-enrolment-error.title.payee-no-valid-ebill-accounts-error\"\n    iconSize=\"lg\"\n    iconModifier=\"error-outline\"\n    iconColor=\"danger\"\n  ></bb-empty-state-ui>\n  <bb-empty-state-ui\n    *ngSwitchDefault\n    title=\"An error occurred. Please try again later.\"\n    i18n-title=\"\n      An error occurred. Please try again later.|eBills Payveris Enrolment general\n      error@@bb-billpay-ebills-payveris-enrolment-error.title.general-error\"\n    iconSize=\"lg\"\n    iconModifier=\"error-outline\"\n    iconColor=\"danger\"\n  ></bb-empty-state-ui>\n</div>\n","import { Component, Input, OnInit, TemplateRef } from '@angular/core';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n@Component({\n  selector: 'bb-billpay-payveris-ebills-enrolment-notification-success',\n  template: '',\n})\nexport class BillpayPayverisEbillsEnrolmentNotificationSuccessComponent implements OnInit {\n  /**\n   * Time until the notification disappears in milliseconds.\n   */\n  @Input() ttl = 5000;\n  /**\n   * The modal header.\n   */\n  @Input() header: string | TemplateRef<any> | undefined;\n  /**\n   * The modal message.\n   */\n  @Input() message: string | TemplateRef<any> = '';\n\n  /** @internal */\n  constructor(private readonly notificationService: NotificationService) {}\n\n  ngOnInit() {\n    this.notificationService.showNotification({\n      header: this.header,\n      message: this.message,\n      dismissible: true,\n      modifier: 'success',\n      ttl: this.ttl,\n    });\n  }\n}\n","import { ActivatedRoute } from '@angular/router';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { ChangeDetectorRef, Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { EbillAccount, EbillCredential, EbillBiller, OtpDeliveryMethod } from '@backbase/data-ang/billpay';\nimport { PayverisEnrolmentState } from '../../model/payveris-enrolment-state.enum';\nimport { BillpayPayverisEbillsEnrolmentWidgetService } from '../../services/billpay-payveris-ebills-enrolment-widget.service';\nimport { PayverisOtpPasscode, PayverisLogin, PayverisEnrolmentComponentState } from '../../model';\nimport { PayverisCaptcha } from '../../model/payveris.model';\n\n@Component({\n  selector: 'bb-billpay-ebills-enrolment-view',\n  templateUrl: './billpay-ebills-enrolment-view.component.html',\n})\nexport class EbillsEnrolmentViewComponent implements OnInit, OnDestroy {\n  readonly EnrolmentStates = PayverisEnrolmentState;\n  readonly ComponentStates = PayverisEnrolmentComponentState;\n  payeeName: Observable<string> | undefined;\n\n  private readonly destroy$ = new Subject<void>();\n\n  @Input() dismissTimeoutValue: number | undefined;\n\n  @ViewChild('payverisEnrolmentSuccessHeaderMessage') payverisEnrolmentSuccessHeaderMessage = '';\n  @ViewChild('payverisEnrolmentSuccessMessage') payverisEnrolmentSuccessMessage = '';\n\n  /** @internal */\n  constructor(\n    private readonly payverisEbillsEnrolmentWidgetService: BillpayPayverisEbillsEnrolmentWidgetService,\n    private readonly route: ActivatedRoute,\n    private readonly ref: ChangeDetectorRef,\n    private readonly routerService: ManagePayeesNavigationService,\n  ) {}\n\n  ngOnInit() {\n    this.payverisEbillsEnrolmentWidgetService.widgetStateChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n      this.ref.detectChanges();\n      if (this.currentState === PayverisEnrolmentState.Success) {\n        this.goToPayeeList();\n      }\n    });\n    this.payverisEbillsEnrolmentWidgetService.payeeId = this.route.snapshot.params['payeeID'] || undefined;\n    if (this.payeeId) {\n      this.payeeName = this.payverisEbillsEnrolmentWidgetService.getPayeeNameFromID(this.payeeId);\n    }\n\n    this.payverisEbillsEnrolmentWidgetService.onInitializeEnrolment();\n  }\n\n  submitPayeeLogin(login: PayverisLogin) {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitPayeeLogin(login);\n  }\n\n  submitBiller(billerSelectedIndex: number) {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitBillerSelection(billerSelectedIndex);\n  }\n\n  submitMfa() {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitPayverisEbillMfa();\n  }\n\n  submitOtpTransport(transportSelectedIndex: number) {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitPayverisEbillOtpTransportSelection(transportSelectedIndex);\n  }\n\n  submitOtpPasscode(passcode: PayverisOtpPasscode) {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitPayverisEbillPayeeOtpPasscode(passcode);\n  }\n\n  submitCaptcha(captcha: PayverisCaptcha) {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitPayverisEbillPayeeCaptcha(captcha);\n  }\n\n  submitPayverisEbillAccountSelection(accountSelectedIndex: number) {\n    this.payverisEbillsEnrolmentWidgetService.onSubmitPayverisEbillAccountSelection(accountSelectedIndex);\n  }\n\n  goToPayeeList() {\n    this.payverisEbillsEnrolmentWidgetService.cancelEnrolment().subscribe();\n    this.routerService.navigateToPayeeList({ relativeTo: this.route.parent });\n  }\n\n  get payeeId(): string | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.payeeId;\n  }\n\n  get currentState(): PayverisEnrolmentState {\n    return this.payverisEbillsEnrolmentWidgetService.currentState;\n  }\n\n  get errorState(): string | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.errorState;\n  }\n\n  get loginCredentialsArray(): EbillCredential[] | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.loginCredentialsArray;\n  }\n\n  get mfaArray(): EbillCredential[] | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.mfaArray;\n  }\n\n  get componentState(): PayverisEnrolmentComponentState {\n    return this.payverisEbillsEnrolmentWidgetService.componentState;\n  }\n\n  get userInputFailed(): boolean {\n    return this.payverisEbillsEnrolmentWidgetService.userInputFailed;\n  }\n\n  get otpTransportMethodSelected(): string | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.otpTransportMethodSelected;\n  }\n\n  get otpTransports(): OtpDeliveryMethod[] | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.otpTransports;\n  }\n\n  get captchaImageType(): string | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.captchaImageType;\n  }\n\n  get captchaImageSrc(): string | undefined {\n    return this.payverisEbillsEnrolmentWidgetService.captchaImageSrc;\n  }\n\n  get accounts(): EbillAccount[] {\n    return this.payverisEbillsEnrolmentWidgetService.accounts;\n  }\n\n  get billers(): EbillBiller[] {\n    return this.payverisEbillsEnrolmentWidgetService.billers;\n  }\n\n  ngOnDestroy() {\n    this.payverisEbillsEnrolmentWidgetService.cancelCallback();\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","<div class=\"bb-block bb-block--xl\">\n  <button\n    bbButton\n    class=\"bb-block bb-block--md pl-0\"\n    (click)=\"goToPayeeList()\"\n    data-role=\"payveris-payee-login-return-to-payee-list-link\"\n    color=\"link\"\n  >\n    <bb-icon-ui name=\"arrow-back\" size=\"md\"></bb-icon-ui>\n    <span\n      i18n=\"\n        Back to payee list button|Button on login page for returning to payee list\n        @@bb-billpay-payveris-ebills-enrolment-login.button.back-to-payee-list\"\n      >Back to payee list</span\n    >\n  </button>\n  <bb-header-ui\n    headingType=\"h1\"\n    heading=\"Get eBills for '{{ payeeName | async }}'\"\n    i18n-heading=\"\n      Get ebills for payee|Header on payveris ebill enrolment login form\n      @@bb-billpay-payveris-ebills-enrolment-login.main-header.get-ebills-for-payee\"\n    data-role=\"payveris-payee-login-header\"\n  >\n  </bb-header-ui>\n</div>\n\n<div class=\"card card-lg\">\n  <div class=\"card-body\">\n    <ng-container [ngSwitch]=\"currentState\">\n      <ng-container *ngSwitchCase=\"EnrolmentStates.Initialize\">\n        <ng-container [ngSwitch]=\"componentState\">\n          <bb-loading-indicator-ui\n            *ngSwitchCase=\"ComponentStates.Checking\"\n            loaderSize=\"lg\"\n            text=\"Initializing...\"\n            i18n-text=\"\n              Initializing...|Ebill Payveris Enrolment Widget initializing\n              text@@bb-billpay-ebills-payveris-enrolment-widget-ang.initializing.text\"\n          >\n          </bb-loading-indicator-ui>\n\n          <bb-loading-indicator-ui\n            *ngSwitchCase=\"ComponentStates.Callback\"\n            text=\"eBill enrolment is taking a little longer than usual, please be patient...\"\n            i18n-text=\"\n              eBill enrolment is taking a little longer than usual, please be patient...|Ebill Payveris Enrolment Widget\n              taking longer than usual text@@bb-billpay-ebills-payveris-enrolment-widget-ang.initializing-callback.text\"\n            loaderSize=\"lg\"\n            data-role=\"payveris-callback-info\"\n          ></bb-loading-indicator-ui>\n        </ng-container>\n      </ng-container>\n      <ng-container *ngIf=\"payeeName | async as name\">\n        <bb-billpay-payveris-ebills-enrolment-select-biller\n          *ngSwitchCase=\"EnrolmentStates.SelectBiller\"\n          [payeeName]=\"name\"\n          [componentState]=\"componentState\"\n          [billers]=\"billers\"\n          (billerSelect)=\"submitBiller($event)\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-select-biller>\n\n        <bb-billpay-payveris-ebills-enrolment-login\n          *ngSwitchCase=\"EnrolmentStates.Login\"\n          [payeeName]=\"name\"\n          [componentState]=\"componentState\"\n          [credentialsFailed]=\"userInputFailed\"\n          [credentialsArray]=\"loginCredentialsArray\"\n          (payeeLogin)=\"submitPayeeLogin($event)\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-login>\n\n        <bb-billpay-payveris-ebills-enrolment-mfa-entry\n          *ngSwitchCase=\"EnrolmentStates.Mfa\"\n          [payeeName]=\"name\"\n          [mfaArray]=\"mfaArray\"\n          [componentState]=\"componentState\"\n          [mfaFailed]=\"userInputFailed\"\n          (mfaEntry)=\"submitMfa()\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-mfa-entry>\n\n        <bb-billpay-payveris-ebills-enrolment-otp-select\n          *ngSwitchCase=\"EnrolmentStates.OtpSelect\"\n          [payeeName]=\"name\"\n          [componentState]=\"componentState\"\n          [transports]=\"otpTransports\"\n          (transportSelect)=\"submitOtpTransport($event)\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-otp-select>\n\n        <bb-billpay-payveris-ebills-enrolment-otp-entry\n          *ngSwitchCase=\"EnrolmentStates.OtpEntry\"\n          [payeeName]=\"name\"\n          [optTransportMethod]=\"otpTransportMethodSelected\"\n          [componentState]=\"componentState\"\n          [passcodeFailed]=\"userInputFailed\"\n          (passcodeEntry)=\"submitOtpPasscode($event)\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-otp-entry>\n\n        <bb-billpay-payveris-ebills-enrolment-captcha\n          *ngSwitchCase=\"EnrolmentStates.Captcha\"\n          [payeeName]=\"name\"\n          [captchaImageType]=\"captchaImageType\"\n          [captchaImageSrc]=\"captchaImageSrc\"\n          [componentState]=\"componentState\"\n          [captchaFailed]=\"userInputFailed\"\n          (captchaEntry)=\"submitCaptcha($event)\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-captcha>\n\n        <bb-billpay-payveris-ebills-enrolment-select-account\n          *ngSwitchCase=\"EnrolmentStates.SelectAccounts\"\n          [payeeName]=\"name\"\n          [componentState]=\"componentState\"\n          [accounts]=\"accounts\"\n          (accountSelect)=\"submitPayverisEbillAccountSelection($event)\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-select-account>\n\n        <bb-billpay-payveris-ebills-enrolment-error\n          *ngSwitchCase=\"EnrolmentStates.ErrorState\"\n          [errorState]=\"errorState\"\n          (returnToPayeeList)=\"goToPayeeList()\"\n        ></bb-billpay-payveris-ebills-enrolment-error>\n\n        <bb-billpay-payveris-ebills-enrolment-notification-success\n          *ngSwitchCase=\"EnrolmentStates.Success\"\n          [ttl]=\"dismissTimeoutValue\"\n          [header]=\"payverisEnrolmentSuccessHeaderMessage\"\n          [message]=\"payverisEnrolmentSuccessMessage2\"\n        ></bb-billpay-payveris-ebills-enrolment-notification-success>\n\n        <ng-template #payverisEnrolmentSuccessMessage2>\n          <span\n            i18n=\"\n              eBills enabled|eBills enabled successfully notification\n              message@@bb-billpay-payveris-ebills-enrolment.notification.successBody\"\n            >eBills for the payee &apos;{{ name }}&apos; have been enabled successfully</span\n          >\n        </ng-template>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n<ng-template #payverisEnrolmentSuccessHeaderMessage>\n  <span\n    i18n=\"\n      eBills enabled|eBills enabled successfully notification\n      header@@bb-billpay-payveris-ebills-enrolment.notification.successHeader\"\n    >eBills enabled</span\n  >\n</ng-template>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\n\n@Component({\n  selector: 'bb-billpay-payee-list-view',\n  template: `\n    <div class=\"bb-block bb-block--lg\">\n      <button bbButton color=\"link\" class=\"bb-block bb-block--md pl-0\" (click)=\"gotoPayeeList()\">\n        <bb-icon-ui name=\"arrow-back\" size=\"md\"></bb-icon-ui>\n        <span i18n=\"button label|Back button@@billpay-payees-journey.payee-summary.back\">Back to Payee List</span>\n      </button>\n      <bb-header-ui\n        headingType=\"h1\"\n        [heading]=\"editMode ? 'Edit Payee' : 'Add Payee'\"\n        i18n-heading=\"@@billpay-payees-journey.add-payee\"\n      >\n      </bb-header-ui>\n    </div>\n    <router-outlet></router-outlet>\n  `,\n})\nexport class ManagePayeeViewComponent implements OnInit {\n  editMode = false;\n  constructor(private readonly routerService: ManagePayeesNavigationService, private readonly route: ActivatedRoute) {}\n  ngOnInit() {\n    this.editMode = !!this.route.firstChild?.snapshot.url.some(a => a.path === 'edit');\n  }\n  gotoPayeeList() {\n    this.routerService.navigateToPayeeList({ relativeTo: this.route.parent });\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-enrolment-view',\n  template: `\n    <div>\n      <div class=\"bb-block bb-block--lg\">\n        <bb-header-ui\n          headingType=\"h1\"\n          heading=\"Enrol in bill pay\"\n          i18n-heading=\"@@billpay-manage-payee-journey.enrolment-heading\"\n        ></bb-header-ui>\n      </div>\n      <bb-billpay-enrolment></bb-billpay-enrolment>\n    </div>\n  `,\n})\nexport class BillPayEnrolmentViewComponent {}\n","import { Injectable } from '@angular/core';\nimport {\n  BillPayPayeesService,\n  BillPaySearchService,\n  BillPayPayeesPostRequestBody,\n  BillPayPayeesPostResponseBody,\n  PayeeByIdPutResponseBody,\n  BillPayElectronicPayeesPostResponseBody,\n  BillPayElectronicPayeesPostRequestBody,\n  PayeeByIdPutRequestBody,\n  PostElectronicRequestPayee,\n  ElectronicPayeeByIdPutRequestBody,\n  Payee,\n  ElectronicPayeeByIdGetResponseBody,\n  ElectronicPayeeByIdPutResponseBody,\n  BillPaySearchGetResponseBody,\n} from '@backbase/data-ang/billpay';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { ManualPayeeFormState, ElectronicPayeeForm } from '../model';\n\n@Injectable()\nexport class BillpayManagePayeeDataService {\n  /** @internal */\n  constructor(\n    private readonly dataService: BillPayPayeesService,\n    private readonly searchService: BillPaySearchService,\n  ) {}\n\n  addManualPayee(payee: ManualPayeeFormState): Observable<BillPayPayeesPostResponseBody> {\n    return this.dataService.postBillPayPayees({ billPayPayeesPostRequestBody: this.toPayeeRequest(payee) });\n  }\n\n  updateManualPayee(id: string, payee: ManualPayeeFormState): Observable<PayeeByIdPutResponseBody> {\n    return this.dataService.putPayeeById({ payeeByIdPutRequestBody: this.toManualPutRequest(payee), id });\n  }\n\n  getManualPayee(id: string): Observable<Payee> {\n    return this.dataService.getPayeeById({ id }).pipe(map(response => response.payee));\n  }\n\n  searchPayeesByName(name: string): Observable<BillPaySearchGetResponseBody> {\n    return this.searchService.getBillPaySearch({ name });\n  }\n\n  addElectronicPayee(payee: PostElectronicRequestPayee): Observable<BillPayElectronicPayeesPostResponseBody> {\n    return this.dataService.postBillPayElectronicPayees({\n      billPayElectronicPayeesPostRequestBody: this.toElectronicPostRequest(payee),\n    });\n  }\n\n  getElectronicPayee(id: string): Observable<ElectronicPayeeByIdGetResponseBody> {\n    return this.dataService.getElectronicPayeeById({ id });\n  }\n\n  updateElectronicPayee(id: string, payee: ElectronicPayeeForm): Observable<ElectronicPayeeByIdPutResponseBody> {\n    return this.dataService.putElectronicPayeeById({\n      electronicPayeeByIdPutRequestBody: this.toElectronicPutRequest(payee),\n      id,\n    });\n  }\n\n  private toPayeeRequest(payee: ManualPayeeFormState): BillPayPayeesPostRequestBody {\n    const {\n      name,\n      address: { address1, address2, city, state, postalCode },\n      phoneNumber,\n      accountNumber,\n      nickName,\n    } = payee;\n\n    return {\n      payee: {\n        name,\n        address: {\n          address1,\n          ...(address2 && { address2 }),\n          city,\n          state,\n          postalCode,\n        },\n        ...(phoneNumber && { phoneNumber: phoneNumber.replace(/^\\+1/, '').replace(/\\D/g, '') }),\n        ...(accountNumber && { accountNumber }),\n        ...(nickName && { nickName }),\n      },\n    };\n  }\n\n  private toManualPutRequest(payee: ManualPayeeFormState): PayeeByIdPutRequestBody {\n    return {\n      payee: {\n        ...this.toPayeeRequest(payee).payee,\n        modifyPendingPayments: true,\n      },\n    };\n  }\n\n  private toElectronicPutRequest(payee: ElectronicPayeeForm): ElectronicPayeeByIdPutRequestBody {\n    const { nickName, ...payeeWithoutNickname } = payee;\n\n    return {\n      payee: {\n        ...payeeWithoutNickname,\n        ...(nickName && { nickName }),\n        modifyPendingPayments: true,\n      },\n    };\n  }\n\n  private toElectronicPostRequest(payee: PostElectronicRequestPayee): BillPayElectronicPayeesPostRequestBody {\n    const { nickName, ...restProperties } = payee;\n\n    return {\n      payee: {\n        ...(nickName && { nickName }),\n        ...restProperties,\n      },\n    };\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { ManualPayeeFormState } from '../../../model';\n\n@Component({\n  selector: 'bb-billpay-manual-payee-review',\n  templateUrl: './billpay-manual-payee-review.component.html',\n})\nexport class BillpayManualPayeeReviewComponent {\n  /**\n   * Details of the manual payee to be reviewed before creation.\n   */\n  @Input() payeeFormState?: ManualPayeeFormState;\n}\n","<div *ngIf=\"payeeFormState as payee\" class=\"bb-block bb-block--xl\">\n  <div class=\"bb-block bb-block--md\">\n    <bb-header-ui\n      headingType=\"h2\"\n      heading=\"Payee details\"\n      i18n-heading=\"\n        Manual payee review heading|Label for group of data related to the payee\n        details@@billpay-manual-payee-review.details-heading\"\n      data-role=\"payee-review-heading\"\n    ></bb-header-ui>\n  </div>\n  <div class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee name@@billpay-manual-payee-review.name\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-name-label\"\n    >\n      Payee name\n    </div>\n    <div data-role=\"payee-name\">{{ payee.name }}</div>\n  </div>\n\n  <div class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee address@@billpay-manual-payee-review.address\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-address-label\"\n    >\n      Address\n    </div>\n    <div data-role=\"payee-address-address1\">{{ payee.address.address1 }}</div>\n    <div data-role=\"payee-address-address2\">{{ payee.address.address2 }}</div>\n    <div>\n      <span data-role=\"payee-address-city\">{{ payee.address.city }} </span>\n      <span data-role=\"payee-address-state\">{{ payee.address.state }} </span>\n      <span data-role=\"payee-address-postal-code\">{{ payee.address.postalCode }}</span>\n    </div>\n  </div>\n\n  <div *ngIf=\"payee.phoneNumber\" class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee phone number@@billpay-manual-payee-review.phone-number\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-phone-number-label\"\n    >\n      Phone number\n    </div>\n    <div data-role=\"payee-phone-number\">{{ payee.phoneNumber }}</div>\n  </div>\n\n  <div *ngIf=\"payee.accountNumber\" class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee account number@@billpay-manual-payee-review.account-number\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-account-number-label\"\n    >\n      Account number\n    </div>\n    <div data-role=\"payee-account-number\">{{ payee.accountNumber }}</div>\n  </div>\n\n  <div *ngIf=\"payee.nickName\">\n    <div\n      i18n=\"label|Label for payee nickname@@billpay-manual-payee-review.nickname\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-nickname-label\"\n    >\n      Payee nickname\n    </div>\n    <div data-role=\"payee-nickname\">{{ payee.nickName }}</div>\n  </div>\n</div>\n","import { Component, EventEmitter, Output, Input } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-cancel-new-payee-modal',\n  templateUrl: './billpay-cancel-new-payee-modal.component.html',\n})\nexport class BillpayCancelNewPayeeModalComponent {\n  @Output() resolve = new EventEmitter<boolean>();\n  /**\n   * Modal navigation routes to payee search. Defaults to false.\n   */\n  @Input() findPayee = false;\n\n  cancelModal() {\n    this.resolve.emit(false);\n  }\n\n  confirmModal() {\n    this.resolve.emit(true);\n  }\n}\n","<bb-modal-ui [isOpen]=\"true\" (cancel)=\"cancelModal()\" data-role=\"cancel-new-payee-modal\">\n  <bb-modal-header-ui>\n    <ng-template bbCustomModalHeader>\n      <bb-header-ui\n        *ngIf=\"!findPayee\"\n        data-role=\"cancel-new-payee-modal-header\"\n        headingType=\"h2\"\n        heading=\"Cancel new payee?\"\n        i18n-heading=\"Cancel new payee modal header@@billpay.manage-payee.cancel-new-payee-modal.header\"\n      >\n      </bb-header-ui>\n      <bb-header-ui\n        *ngIf=\"findPayee\"\n        data-role=\"cancel-new-payee-modal-header\"\n        headingType=\"h2\"\n        heading=\"Find different payee?\"\n        i18n-heading=\"Find different payee modal header@@billpay.manage-payee.cancel-new-payee-modal.findheader\"\n      >\n      </bb-header-ui>\n    </ng-template>\n  </bb-modal-header-ui>\n  <bb-modal-body-ui>\n    <ng-template bbCustomModalBody>\n      <span\n        i18n=\"Cancel new payee modal body@@billpay.manage-payee.cancel-new-payee-modal.body\"\n        data-role=\"cancel-new-payee-modal-body\"\n        >The new payee will be canceled and any details entered will be lost.</span\n      >\n    </ng-template>\n  </bb-modal-body-ui>\n  <bb-modal-footer-ui>\n    <ng-template bbCustomModalFooter>\n      <div class=\"bb-button-bar\">\n        <button\n          bbButton\n          color=\"danger\"\n          class=\"bb-button-bar__button\"\n          (click)=\"confirmModal()\"\n          data-role=\"cancel-new-payee-modal-confirm-button\"\n        >\n          <span\n            *ngIf=\"!findPayee\"\n            i18n=\"\n              confirm modal button|Cancel payee confirmation\n              button@@billpay.manage-payee.cancel-new-payee-modal.confirm-button\"\n          >\n            Cancel new payee\n          </span>\n          <span\n            *ngIf=\"findPayee\"\n            i18n=\"\n              confirm modal button|Cancel payee confirmation\n              button@@billpay.manage-payee.cancel-new-payee-modal.confirm-button2\"\n          >\n            Find a different payee\n          </span>\n        </button>\n        <button\n          bbButton\n          color=\"link\"\n          class=\"bb-button-bar__button\"\n          i18n=\"\n            cancel modal button|Continue with current payee\n            button@@billpay.manage-payee.cancel-new-payee-modal.cancel-button\"\n          (click)=\"cancelModal()\"\n          data-role=\"cancel-new-payee-modal-cancel-button\"\n        >\n          Continue with this payee\n        </button>\n      </div>\n    </ng-template>\n  </bb-modal-footer-ui>\n</bb-modal-ui>\n","import { ManagePayeesJourneyConfigService } from '../../services/manage-payees-journey-config.service';\nimport { Component, HostListener, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { filter, switchMap, take, takeUntil, tap } from 'rxjs/operators';\nimport { BehaviorSubject, Observable, of, Subject } from 'rxjs';\nimport {\n  BillpayDiscardChangesModalService,\n  BillpayDiscardChangesFormComponent,\n  BillpayNotificationRoutingService,\n} from '@backbase/billpay-journeys-common';\nimport { ManualPayeeFormState } from '../../model';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { BillpayManagePayeeDataService } from '../../services/billpay-manage-payee-data.service';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\ndeclare const $localize: any;\n@Component({\n  templateUrl: './billpay-create-manual-payee-review-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class CreateManualPayeeReviewViewComponent implements OnInit, OnDestroy, BillpayDiscardChangesFormComponent {\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n  payee?: ManualPayeeFormState;\n  private readonly payeeSubmit$ = new BehaviorSubject<ManualPayeeFormState | undefined>(undefined);\n  private readonly destroy$ = new Subject<void>();\n\n  /** @internal */\n  constructor(\n    readonly config: ManagePayeesJourneyConfigService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly stateService: BillpayManagePayeeStateService,\n    private readonly dataService: BillpayManagePayeeDataService,\n    private readonly notificationService: NotificationService,\n    private readonly discardModalService: BillpayDiscardChangesModalService,\n    private readonly billpayNotificationRoutingService: BillpayNotificationRoutingService,\n  ) {}\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  ngOnInit() {\n    this.stateService.manualPayeeFormState.pipe(take(1)).subscribe(payee => {\n      this.payee = payee;\n      if (!this.payee) {\n        this.router.navigateToManualPayeeForm();\n      }\n    });\n    this.payeeSubmit$\n      .pipe(takeUntil(this.destroy$), filter(Boolean))\n      .subscribe(payee => this.onSubmitPayee(payee as ManualPayeeFormState));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if (!this.isDiscardModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  submitPayee(payee: ManualPayeeFormState) {\n    this.payeeSubmit$.next(payee);\n  }\n\n  navigateBack() {\n    this.router.navigateToManualPayeeForm();\n  }\n\n  cancel() {\n    this.router.navigateToPayeeList();\n  }\n\n  navigateToPayee() {\n    this.billpayNotificationRoutingService.navigateToPayees();\n  }\n\n  openModal(): Observable<boolean> {\n    return this.payeeSubmit$.pipe(\n      switchMap(payee => (payee ? of(true) : this.discardModalService.openModal())),\n      tap(isResolved => isResolved && this.stateService.resetManualPayee()),\n    );\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    this.discardModalService.onModalResolve(resolvedWith);\n  }\n\n  private onSubmitPayee(payee: ManualPayeeFormState) {\n    this.dataService.addManualPayee(payee).subscribe(\n      () => {\n        this.router.navigateToPayeeList();\n        this.notificationService.showNotification({\n          header: this.notificationHeaderTemplate,\n          message: this.notificationMessageTemplate,\n          modifier: 'success',\n          ttl: this.dismissTimeout,\n        });\n      },\n      () =>\n        this.notificationService.showNotification({\n          header: $localize`:@@billpay.create-manuel-payee.error-notification.header:Something went wrong`,\n          message: $localize`:@@billpay.create-manuel-payee.error-notification.header:We were unable to proceed. Please try again.`,\n          modifier: 'error',\n          ttl: this.dismissTimeout,\n        }),\n    );\n  }\n\n  private get dismissTimeout(): number {\n    if (this.config.notificationDismissTime === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.config.notificationDismissTime;\n  }\n}\n","<div class=\"card card-lg\" *ngIf=\"payee\">\n  <section class=\"card-body\">\n    <bb-billpay-manual-payee-review [payeeFormState]=\"payee\"> </bb-billpay-manual-payee-review>\n    <div class=\"bb-button-bar bb-button-bar--reverse\">\n      <button\n        bbButton\n        data-role=\"add-payee-button\"\n        i18n=\"Label for button|Manual payee continue button@@billpay-create-manual-payee-review.add-payee\"\n        (click)=\"submitPayee(payee)\"\n        class=\"bb-button-bar__button\"\n      >\n        Add payee\n      </button>\n      <button\n        bbButton\n        data-role=\"back-button\"\n        i18n=\"Label for button|Find a different payee button@@billpay-create-manual-payee-review.edit-payee\"\n        (click)=\"navigateBack()\"\n        class=\"bb-button-bar__button\"\n        color=\"secondary\"\n      >\n        Edit\n      </button>\n      <button\n        bbButton\n        data-role=\"cancel-button\"\n        color=\"link\"\n        class=\"bb-button-bar__button bb-button-bar__button--across\"\n        (click)=\"cancel()\"\n        i18n=\"Label for button|Cancel button@@billpay-create-manual-payee-review.cancel-payee\"\n      >\n        Cancel\n      </button>\n    </div>\n  </section>\n</div>\n\n<bb-billpay-cancel-new-payee-modal\n  *ngIf=\"isDiscardModalOpen\"\n  (resolve)=\"onModalResolve($event)\"\n></bb-billpay-cancel-new-payee-modal>\n\n<ng-template #notificationMessage>\n  <span\n    data-role=\"notification-message\"\n    i18n=\"\n      Payee notification message|Payee has created successfully\n      notification@@billpay-create-manual-payee-review.notification.message\"\n    >The payee {{ (payee.nickName && payee.nickName + ' (' + payee.name + ')') || payee.name }} has been created\n    successfully\n  </span>\n\n  <div class=\"bb-button-bar bb-button-bar--reverse\">\n    <button\n      bbButton\n      data-role=\"notification-add-payee-button\"\n      color=\"primary\"\n      class=\"bb-button-bar__button\"\n      i18n=\"notification button|Add another payee@@billpay-create-manual-payee-review.notification.add-button\"\n      (click)=\"navigateToPayee()\"\n    >\n      Add another payee\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <span\n    i18n=\"\n      Payee notification header|Payee created success notification\n      header@@billpay-create-manual-payee-review.notification.header\"\n    >Payee created</span\n  >\n</ng-template>\n","import { Component, EventEmitter, Output } from '@angular/core';\n\n@Component({\n  selector: 'bb-billpay-cancel-edit-payee-modal',\n  templateUrl: './billpay-cancel-edit-payee-modal.component.html',\n})\nexport class BillpayCancelEditPayeeModalComponent {\n  @Output() resolve = new EventEmitter<boolean>();\n\n  cancelModal() {\n    this.resolve.emit(false);\n  }\n\n  confirmModal() {\n    this.resolve.emit(true);\n  }\n}\n","<bb-modal-ui [isOpen]=\"true\" (cancel)=\"cancelModal()\" data-role=\"cancel-edit-payee-modal\">\n  <bb-modal-header-ui>\n    <ng-template bbCustomModalHeader>\n      <bb-header-ui\n        data-role=\"cancel-edit-payee-modal-header\"\n        headingType=\"h2\"\n        heading=\"Lose changes?\"\n        i18n-heading=\"Lose changes modal header@@billpay.cancel-edit-payee.modal.header\"\n      >\n      </bb-header-ui>\n    </ng-template>\n  </bb-modal-header-ui>\n  <bb-modal-body-ui>\n    <ng-template bbCustomModalBody>\n      <span\n        i18n=\"Lose changes modal body@@billpay.cancel-edit-payee.modal.body\"\n        data-role=\"cancel-edit-payee-modal-body\"\n        >Are you sure you want to cancel editing this payee? You will lose any changes made.</span\n      >\n    </ng-template>\n  </bb-modal-body-ui>\n  <bb-modal-footer-ui>\n    <ng-template bbCustomModalFooter>\n      <div class=\"bb-button-bar\">\n        <button\n          bbButton\n          color=\"danger\"\n          class=\"bb-button-bar__button\"\n          i18n=\"\n            confirm modal button|Cancel edit payee confirmation button@@billpay.cancel-edit-payee.modal.confirm-button\"\n          (click)=\"confirmModal()\"\n          data-role=\"cancel-edit-payee-modal-confirm-button\"\n        >\n          Lose changes\n        </button>\n        <button\n          bbButton\n          color=\"link\"\n          class=\"bb-button-bar__button\"\n          i18n=\"\n            cancel modal button|Continue edit with current payee button@@billpay.cancel-edit-payee.modal.cancel-button\"\n          (click)=\"cancelModal()\"\n          data-role=\"cancel-edit-payee-modal-cancel-button\"\n        >\n          Continue editing\n        </button>\n      </div>\n    </ng-template>\n  </bb-modal-footer-ui>\n</bb-modal-ui>\n","import { ManagePayeesJourneyConfigService } from '../../services/manage-payees-journey-config.service';\nimport { Component, OnInit, TemplateRef, ViewChild, HostListener } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BehaviorSubject, Subject, Observable, of } from 'rxjs';\nimport { filter, switchMap, take, takeUntil, map, tap } from 'rxjs/operators';\nimport {\n  BillpayDiscardChangesModalService,\n  BillpayDiscardChangesFormComponent,\n} from '@backbase/billpay-journeys-common';\nimport { ManualPayeeFormState } from '../../model';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { BillpayManagePayeeDataService } from '../../services/billpay-manage-payee-data.service';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n@Component({\n  templateUrl: './billpay-edit-manual-payee-review-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class EditManualPayeeReviewViewComponent implements OnInit, BillpayDiscardChangesFormComponent {\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n\n  payee?: ManualPayeeFormState;\n  private readonly payeeSubmit$ = new BehaviorSubject<ManualPayeeFormState | undefined>(undefined);\n  private readonly destroy$ = new Subject<void>();\n  private readonly id$ = this.route.paramMap.pipe(\n    take(1),\n    map(params => params.get('id') || ''),\n  );\n\n  /** @internal */\n  constructor(\n    readonly config: ManagePayeesJourneyConfigService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly stateService: BillpayManagePayeeStateService,\n    private readonly dataService: BillpayManagePayeeDataService,\n    private readonly notificationService: NotificationService,\n    private readonly route: ActivatedRoute,\n    private readonly discardModalService: BillpayDiscardChangesModalService,\n  ) {}\n\n  ngOnInit() {\n    this.stateService.manualPayeeFormState.pipe(take(1)).subscribe(payee => {\n      this.payee = payee;\n      if (!this.payee) {\n        this.navigateToForm();\n      }\n    });\n    this.payeeSubmit$\n      .pipe(takeUntil(this.destroy$), filter(Boolean))\n      .subscribe(payee => this.onSubmitPayee(payee as ManualPayeeFormState));\n  }\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  private get dismissTimeout(): number {\n    if (this.config.notificationDismissTime === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.config.notificationDismissTime;\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if (!this.isDiscardModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  openModal(): Observable<boolean> {\n    return this.payeeSubmit$.pipe(\n      switchMap(payee => (payee ? of(true) : this.discardModalService.openModal())),\n      tap(isResolved => isResolved && this.stateService.resetManualPayee()),\n    );\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    this.discardModalService.onModalResolve(resolvedWith);\n    if (resolvedWith) {\n      this.router.navigateToPayeeList();\n    }\n  }\n\n  submitPayee(payee: ManualPayeeFormState) {\n    this.payeeSubmit$.next(payee);\n  }\n\n  navigateBack() {\n    this.navigateToForm();\n  }\n\n  cancel() {\n    this.router.navigateToPayeeList();\n  }\n\n  private navigateToForm() {\n    this.id$.subscribe(id => this.router.navigateToEditManualPayeeForm(id));\n  }\n\n  private onSubmitPayee(payee: ManualPayeeFormState) {\n    this.id$.pipe(switchMap(id => this.dataService.updateManualPayee(id, payee))).subscribe(\n      () => {\n        this.router.navigateToPayeeList();\n        this.notificationService.showNotification({\n          header: this.notificationHeaderTemplate,\n          message: this.notificationMessageTemplate,\n          modifier: 'success',\n          ttl: this.dismissTimeout,\n        });\n      },\n      () => {\n        this.notificationService.showNotification({\n          header: $localize`:@@billpay.edit-manuel-payee.error-notification.header:Something went wrong`,\n          message: $localize`:@@billpay.edit-manuel-payee.error-notification.message:We were unable to proceed. Please try again.`,\n          modifier: 'error',\n          ttl: this.dismissTimeout,\n        });\n      },\n    );\n  }\n}\n","<div class=\"card card-lg\" *ngIf=\"payee\">\n  <section class=\"card-body\">\n    <bb-billpay-manual-payee-review [payeeFormState]=\"payee\"> </bb-billpay-manual-payee-review>\n    <div class=\"bb-button-bar bb-button-bar--reverse\">\n      <button\n        bbButton\n        data-role=\"save-payee-button\"\n        i18n=\"Label for button|Manual payee continue button@@billpay-edit-manual-payee-review.save-payee\"\n        (click)=\"submitPayee(payee)\"\n        class=\"bb-button-bar__button\"\n      >\n        Confirm payee details\n      </button>\n      <button\n        bbButton\n        data-role=\"back-button\"\n        i18n=\"Label for button|Find a different payee button@@billpay-edit-manual-payee-review.edit-payee\"\n        (click)=\"navigateBack()\"\n        class=\"bb-button-bar__button\"\n        color=\"secondary\"\n      >\n        Edit payee details\n      </button>\n      <button\n        bbButton\n        data-role=\"cancel-button\"\n        color=\"link\"\n        class=\"bb-button-bar__button bb-button-bar__button--across\"\n        (click)=\"cancel()\"\n        i18n=\"Cancel edit|Label for a button that cancels form changes@@billpay-edit-manual-payee-review.cancel\"\n      >\n        Cancel\n      </button>\n    </div>\n  </section>\n</div>\n<bb-billpay-cancel-edit-payee-modal\n  *ngIf=\"isDiscardModalOpen\"\n  (resolve)=\"onModalResolve($event)\"\n></bb-billpay-cancel-edit-payee-modal>\n\n<ng-template #notificationMessage>\n  <ng-container>\n    <span\n      data-role=\"notification-message\"\n      i18n=\"Payee notification message|Payee edited notification@@billpay-edit-manual-payee-review.notification.message\"\n      >The payee {{ (payee.nickName && payee.nickName + ' (' + payee.name + ')') || payee.name }} has been changed\n      successfully</span\n    >\n  </ng-container>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <span\n    i18n=\"\n      Payee notification header|Payee edited notification header@@billpay-edit-manual-payee-review.notification.header\"\n    >Payee edited</span\n  >\n</ng-template>\n","import { HostListener, OnDestroy, OnInit, Directive } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BehaviorSubject, Observable, of, Subject } from 'rxjs';\nimport { filter, map, shareReplay, switchMap, take, takeUntil, tap } from 'rxjs/operators';\nimport {\n  BillpayDiscardChangesModalService,\n  BillpayDiscardChangesFormComponent,\n} from '@backbase/billpay-journeys-common';\nimport { BillpayManagePayeeStateService } from '../services/billpay-manage-payee-state.service';\nimport { ElectronicPayeeForm } from '../model';\nimport { ManagePayeesJourneyConfigService } from '../services/manage-payees-journey-config.service';\n\n@Directive()\nexport abstract class BaseElectronicPayeeReviewPageModelDirective\n  implements OnInit, OnDestroy, BillpayDiscardChangesFormComponent {\n  readonly payee$: Observable<ElectronicPayeeForm | undefined>;\n  readonly id$: Observable<string>;\n  protected readonly destroy$ = new Subject<void>();\n  protected abstract readonly payeeSubmit$: BehaviorSubject<any>;\n  abstract navigateBack(id: string): void;\n  protected abstract onSubmitPayee(payee: any): void;\n\n  /** @internal */\n  protected constructor(\n    protected readonly route: ActivatedRoute,\n    protected readonly stateService: BillpayManagePayeeStateService,\n    protected readonly discardModalService: BillpayDiscardChangesModalService,\n    readonly config: ManagePayeesJourneyConfigService,\n  ) {\n    this.payee$ = this.stateService.electronicPayeeFormState.pipe(take(1), shareReplay(1));\n\n    this.id$ = this.route.paramMap.pipe(\n      take(1),\n      map(params => params.get('id') || ''),\n    );\n  }\n\n  ngOnInit() {\n    this.payee$\n      .pipe(\n        filter(payee => !payee),\n        switchMap(() => this.id$),\n      )\n      .subscribe(id => {\n        this.navigateBack(id);\n      });\n\n    this.payeeSubmit$.pipe(takeUntil(this.destroy$), filter(Boolean)).subscribe(payee => this.onSubmitPayee(payee));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if (!this.isDiscardModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  protected get dismissTimeout(): number {\n    if (this.config.notificationDismissTime === undefined) {\n      throw new Error('Dismiss timeout value not found');\n    }\n    return this.config.notificationDismissTime;\n  }\n\n  openModal(): Observable<boolean> {\n    return this.payeeSubmit$.pipe(\n      switchMap(payee => (payee ? of(true) : this.discardModalService.openModal())),\n      tap(isResolved => isResolved && this.stateService.resetElectronicPayee()),\n    );\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    this.discardModalService.onModalResolve(resolvedWith);\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { ElectronicPayeeForm } from '../../../model';\n\n@Component({\n  selector: 'bb-billpay-electronic-payee-review',\n  templateUrl: './billpay-electronic-payee-review.component.html',\n})\nexport class BillpayElectronicPayeeReviewComponent {\n  /**\n   * Details of the electronic payee to be reviewed before creation.\n   */\n  @Input() payee?: ElectronicPayeeForm;\n}\n","<div *ngIf=\"payee\" class=\"bb-block bb-block--xl\">\n  <div class=\"bb-block bb-block--md\">\n    <bb-header-ui\n      headingType=\"h2\"\n      heading=\"Payee details\"\n      i18n-heading=\"\n        Electronic payee review heading|Label for group of data related to the payee\n        details@@billpay-electronic-payee-review.details-heading\"\n      data-role=\"payee-review-heading\"\n    ></bb-header-ui>\n  </div>\n  <div class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee name@@billpay-electronic-payee-review.name\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-name-label\"\n    >\n      Payee name\n    </div>\n    <div data-role=\"payee-name\">{{ payee.name }}</div>\n  </div>\n\n  <div class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee account number@@billpay-electronic-payee-review.account-number\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-account-number-label\"\n    >\n      Account number\n    </div>\n    <div data-role=\"payee-account-number\">{{ payee.accountNumber }}</div>\n  </div>\n\n  <div *ngIf=\"payee.merchantZipCode\" class=\"bb-block bb-block--md\">\n    <div\n      i18n=\"label|Label for payee address@@billpay-electronic-payee-review.address\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-zip-code-label\"\n    >\n      Payee ZIP code\n    </div>\n    <div data-role=\"payee-zip-code\">{{ payee.merchantZipCode }}</div>\n  </div>\n\n  <div *ngIf=\"payee.nickName\">\n    <div\n      i18n=\"label|Label for payee nickname@@billpay-electronic-payee-review.nickname\"\n      class=\"bb-text-semi-bold\"\n      data-role=\"payee-nickname-label\"\n    >\n      Payee nickname\n    </div>\n    <div data-role=\"payee-nickname\">{{ payee.nickName }}</div>\n  </div>\n</div>\n","import { ManagePayeesJourneyConfigService } from '../../services/manage-payees-journey-config.service';\nimport { Component, TemplateRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { ErrorItem, PostElectronicRequestPayee } from '@backbase/data-ang/billpay';\nimport {\n  BillpayDiscardChangesModalService,\n  BillpayNotificationRoutingService,\n} from '@backbase/billpay-journeys-common';\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeDataService } from '../../services/billpay-manage-payee-data.service';\nimport { ElectronicPayeeForm } from '../../model';\nimport { BaseElectronicPayeeReviewPageModelDirective } from '../../directives/base-electronic-payee-review-page.model';\nimport { NotificationService } from '@backbase/ui-ang/notification';\ndeclare const $localize: any;\n\n@Component({\n  templateUrl: './billpay-create-electronic-payee-review-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class CreateElectronicPayeeReviewViewComponent extends BaseElectronicPayeeReviewPageModelDirective {\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n  protected readonly payeeSubmit$ = new BehaviorSubject<PostElectronicRequestPayee | undefined>(undefined);\n  private successfulPayeeId!: string;\n\n  /** @internal */\n  constructor(\n    readonly config: ManagePayeesJourneyConfigService,\n    readonly route: ActivatedRoute,\n    stateService: BillpayManagePayeeStateService,\n    discardModalService: BillpayDiscardChangesModalService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly dataService: BillpayManagePayeeDataService,\n    private readonly notificationService: NotificationService,\n    private readonly billpayNotificationRoutingService: BillpayNotificationRoutingService,\n  ) {\n    super(route, stateService, discardModalService, config);\n  }\n\n  submitPayee(id: string, payee: ElectronicPayeeForm) {\n    this.payeeSubmit$.next({\n      merchantID: id,\n      ...payee,\n    });\n  }\n\n  navigateBack(id: string) {\n    this.router.navigateToElectronicPayeeForm(id, { queryParamsHandling: 'preserve' });\n  }\n\n  navigateToPayee() {\n    this.billpayNotificationRoutingService.navigateToPayees();\n  }\n\n  navigateToNewPayment() {\n    this.billpayNotificationRoutingService.navigateToNewPayment(this.successfulPayeeId);\n  }\n\n  protected onSubmitPayee(payee: PostElectronicRequestPayee) {\n    this.dataService.addElectronicPayee(payee).subscribe(\n      billPayPutPostResponse => {\n        this.successfulPayeeId = billPayPutPostResponse.id;\n        this.router.navigateToPayeeList();\n        this.notificationService.showNotification({\n          header: this.notificationHeaderTemplate,\n          message: this.notificationMessageTemplate,\n          modifier: 'success',\n          ttl: this.dismissTimeout,\n        });\n      },\n      ({ error }) => {\n        const { header, message } = this.mapErrorNotificationContent(error?.errors);\n        this.notificationService.showNotification({\n          header,\n          message,\n          modifier: 'error',\n          ttl: this.dismissTimeout,\n        });\n      },\n    );\n  }\n\n  private mapErrorNotificationContent(errors: ErrorItem[] = []): { header: string; message: string } {\n    if (errors.find(error => error.key === 'billpay.api.payeeAlreadyExists')) {\n      return {\n        header: $localize`:@@billpay.add-e-payee.alreadyExist-error-notification.header:Failed to add a new payee`,\n        message: $localize`:@@billpay.add-e-payee.alreadyExist-error-notification.header:The payee could not be added because it already exists.`,\n      };\n    } else {\n      return {\n        header: $localize`:@@billpay.add-e-payee.default-error-notification.header:Something went wrong`,\n        message: $localize`:@@billpay.add-e-payee.default-error-notification.header:We were unable to proceed. Please try again.`,\n      };\n    }\n  }\n\n  cancel() {\n    this.router.navigateToPayeeList();\n  }\n}\n","<ng-container *ngIf=\"{ payee: payee$ | async, id: id$ | async } as context\">\n  <div class=\"card card-lg\">\n    <section class=\"card-body\">\n      <bb-billpay-electronic-payee-review [payee]=\"context.payee\"> </bb-billpay-electronic-payee-review>\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          data-role=\"add-payee-button\"\n          i18n=\"Label for button|Electronic payee continue button@@billpay-create-electronic-payee-review.add-payee\"\n          (click)=\"submitPayee(context.id, context.payee)\"\n          class=\"bb-button-bar__button\"\n        >\n          Add payee\n        </button>\n        <button\n          bbButton\n          data-role=\"back-button\"\n          i18n=\"Label for button|Edit button@@billpay-create-electronic-payee-review.edit-payee\"\n          (click)=\"navigateBack(context.id)\"\n          class=\"bb-button-bar__button\"\n          color=\"secondary\"\n        >\n          Edit\n        </button>\n        <button\n          bbButton\n          data-role=\"cancel-button\"\n          color=\"link\"\n          class=\"bb-button-bar__button bb-button-bar__button--across\"\n          (click)=\"cancel()\"\n          i18n=\"Label for button|Cancel button@@billpay-create-electronic-payee-review.cancel-payee\"\n        >\n          Cancel\n        </button>\n      </div>\n    </section>\n  </div>\n\n  <bb-billpay-cancel-new-payee-modal\n    *ngIf=\"isDiscardModalOpen\"\n    (resolve)=\"onModalResolve($event)\"\n  ></bb-billpay-cancel-new-payee-modal>\n</ng-container>\n\n<ng-template *ngIf=\"payee$ | async as payee\" #notificationMessage>\n  <span\n    data-role=\"notification-message\"\n    i18n=\"\n      Payee notification message|Payee has created successfully\n      notification@@billpay-create-electronic-payee-review.notification.message\"\n    >The payee {{ (payee.nickName && payee.nickName + ' (' + payee.name + ')') || payee.name }} has been created\n    successfully\n  </span>\n\n  <div class=\"bb-button-bar\">\n    <button\n      bbButton\n      data-role=\"notification-payee-button\"\n      class=\"bb-button-bar__button\"\n      i18n=\"notification button|Pay button@@billpay-create-electronic-payee-review.notification.pay-button\"\n      (click)=\"navigateToNewPayment()\"\n    >\n      Pay\n    </button>\n    <button\n      bbButton\n      data-role=\"notification-add-payee-button\"\n      color=\"secondary\"\n      class=\"bb-button-bar__button\"\n      i18n=\"notification button|Add another payee@@billpay-create-electronic-payee-review.notification.add-button\"\n      (click)=\"navigateToPayee()\"\n    >\n      Add another payee\n    </button>\n  </div>\n</ng-template>\n\n<ng-template #notificationHeader>\n  <span\n    class=\"text-dark\"\n    i18n=\"\n      Payee notification header|Payee created success notification\n      header@@billpay-create-electronic-payee-review.notification.header\"\n    >Payee created</span\n  >\n</ng-template>\n","import { ManagePayeesJourneyConfigService } from '../../services/manage-payees-journey-config.service';\nimport { Component, TemplateRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { BillpayDiscardChangesModalService } from '@backbase/billpay-journeys-common';\nimport { ElectronicPayeeForm } from '../../model';\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeDataService } from '../../services/billpay-manage-payee-data.service';\nimport { BaseElectronicPayeeReviewPageModelDirective } from '../../directives/base-electronic-payee-review-page.model';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n@Component({\n  templateUrl: './billpay-edit-electronic-payee-review-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class EditElectronicPayeeReviewViewComponent extends BaseElectronicPayeeReviewPageModelDirective {\n  @ViewChild('notificationHeader') notificationHeaderTemplate: TemplateRef<any> | string = '';\n  @ViewChild('notificationMessage') notificationMessageTemplate: TemplateRef<any> | string = '';\n\n  protected readonly payeeSubmit$ = new BehaviorSubject<ElectronicPayeeForm | undefined>(undefined);\n\n  /** @internal */\n  constructor(\n    readonly config: ManagePayeesJourneyConfigService,\n    route: ActivatedRoute,\n    stateService: BillpayManagePayeeStateService,\n    discardModalService: BillpayDiscardChangesModalService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly dataService: BillpayManagePayeeDataService,\n    private readonly notificationService: NotificationService,\n  ) {\n    super(route, stateService, discardModalService, config);\n  }\n\n  submitPayee(payee: ElectronicPayeeForm) {\n    this.payeeSubmit$.next(payee);\n  }\n\n  navigateBack(id: string) {\n    this.router.navigateToEditElectronicPayeeForm(id);\n  }\n\n  protected onSubmitPayee(payee: ElectronicPayeeForm) {\n    this.id$.pipe(switchMap(id => this.dataService.updateElectronicPayee(id, payee))).subscribe(\n      () => {\n        this.router.navigateToPayeeList();\n        this.notificationService.showNotification({\n          header: this.notificationHeaderTemplate,\n          message: this.notificationMessageTemplate,\n          modifier: 'success',\n          ttl: this.dismissTimeout,\n        });\n      },\n      () => {\n        this.notificationService.showNotification({\n          header: $localize`:@@billpay.edit-e-payee.error-notification.header:Something went wrong`,\n          message: $localize`:@@billpay.edit-e-payee.error-notification.message:We were unable to proceed. Please try again.`,\n          modifier: 'error',\n          ttl: this.dismissTimeout,\n        });\n      },\n    );\n  }\n\n  cancel() {\n    this.router.navigateToPayeeList();\n  }\n}\n","<div class=\"card card-lg\" *ngIf=\"payee$ | async as payee\">\n  <section class=\"card-body\">\n    <bb-billpay-electronic-payee-review [payee]=\"payee\"> </bb-billpay-electronic-payee-review>\n    <div class=\"bb-button-bar bb-button-bar--reverse\">\n      <button\n        bbButton\n        data-role=\"add-payee-button\"\n        i18n=\"Label for button|Electronic payee confirm edit button@@billpay-edit-electronic-payee-review.confirm-payee\"\n        (click)=\"submitPayee(payee)\"\n        class=\"bb-button-bar__button\"\n      >\n        Confirm payee details\n      </button>\n      <button\n        *ngIf=\"id$ | async as id\"\n        bbButton\n        data-role=\"back-button\"\n        i18n=\"Label for button|Edit payee details button@@billpay-edit-electronic-payee-review.edit-payee\"\n        (click)=\"navigateBack(id)\"\n        class=\"bb-button-bar__button\"\n        color=\"secondary\"\n      >\n        Edit payee details\n      </button>\n      <button\n        bbButton\n        data-role=\"cancel-button\"\n        color=\"link\"\n        class=\"bb-button-bar__button bb-button-bar__button--across\"\n        (click)=\"cancel()\"\n        i18n=\"Cancel edit|Label for a button that cancels form changes@@billpay-edit-electronic-payee-review.cancel\"\n      >\n        Cancel\n      </button>\n    </div>\n  </section>\n  \n  <ng-template #notificationMessage>\n    <span\n      data-role=\"notification-message\"\n      i18n=\"\n        Payee notification message|Payee has been changed successfully\n        notification@@billpay-edit-electronic-payee-review.notification.message\"\n      >The payee {{ payee.nickName ? payee.nickName + ' (' + payee.name + ')' : payee.name }} has been changed\n      successfully\n    </span>\n  </ng-template>\n</div>\n\n<bb-billpay-cancel-edit-payee-modal\n  *ngIf=\"isDiscardModalOpen\"\n  (resolve)=\"onModalResolve($event)\"\n></bb-billpay-cancel-edit-payee-modal>\n\n\n<ng-template #notificationHeader>\n  <span\n    class=\"text-dark\"\n    i18n=\"\n      Payee notification header|Payee edited success notification\n      header@@billpay-edit-electronic-payee-review.notification.header\"\n    >Payee edited</span\n  >\n</ng-template>\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, ValidatorFn, Validators } from '@angular/forms';\nimport { takeUntil, take } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nimport { ElectronicPayeeForm } from '../../../model';\nimport { BillpayUtilityService as Utility } from '@backbase/billpay-journeys-common';\n\n@Component({\n  selector: 'bb-billpay-electronic-payee-form',\n  templateUrl: './billpay-electronic-payee-form.component.html',\n})\nexport class BillpayElectronicPayeeFormComponent implements OnInit, OnDestroy {\n  /**\n   * Details of the electronic payee to be created.\n   */\n  @Input() payee?: ElectronicPayeeForm;\n  /**\n   * Displays the zip code input field. Defaults to false.\n   */\n  @Input() zipCodeRequired = false;\n  /**\n   * Displays back button which returns to payee search. Defaults to true.\n   */\n  @Input() backButtonShown = true;\n  @Output() formSubmitted = new EventEmitter<ElectronicPayeeForm>();\n  @Output() formCanceled = new EventEmitter<void>();\n  @Output() backToSearch = new EventEmitter<void>();\n  @Output() valueChanged = new EventEmitter<void>();\n\n  payeeForm = new FormGroup({});\n  destroy$ = new Subject<void>();\n  private isSubmissionAttempted = false;\n  readonly nickNameDescId: string;\n  readonly accNumberDescId: string;\n\n  /** @internal */\n  constructor(private readonly formBuilder: FormBuilder) {\n    this.nickNameDescId = Utility.generateId();\n    this.accNumberDescId = Utility.generateId();\n  }\n\n  ngOnInit() {\n    this.payeeForm = this.createForm();\n    this.setValidators();\n    this.payeeForm.valueChanges.pipe(takeUntil(this.destroy$), take(1)).subscribe(() => {\n      this.valueChanged.emit();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  onSubmit(payeeForm: FormGroup) {\n    if (!this.isSubmissionAttempted) {\n      this.isSubmissionAttempted = true;\n    }\n    if (payeeForm.invalid) {\n      payeeForm.markAllAsTouched();\n      return;\n    }\n    this.formSubmitted.emit(this.payeeForm.value);\n  }\n\n  cancelForm() {\n    this.formCanceled.emit();\n  }\n\n  toSearch() {\n    this.backToSearch.emit();\n  }\n\n  hasError(controlName: string, errorName: string): boolean {\n    const control = this.payeeForm.get(controlName);\n    return !!control && control.touched && control.hasError(errorName);\n  }\n\n  private createForm(): FormGroup {\n    return this.formBuilder.group({ ...this.payee });\n  }\n\n  private setValidators() {\n    ([\n      ['merchantZipCode', [Validators.required, Validators.pattern(/^\\d{5}(\\d{4})?$/)]],\n      ['accountNumber', [Validators.required, Validators.minLength(2), Validators.maxLength(100)]],\n      ['nickName', [Validators.minLength(2), Validators.maxLength(100)]],\n    ] as [string, ValidatorFn[]][]).forEach(([controlName, validators]) => {\n      const control = this.payeeForm.get(controlName);\n      if (control) {\n        control.setValidators(validators);\n        control.updateValueAndValidity();\n      }\n    });\n  }\n}\n","<div class=\"card card-lg\">\n  <section class=\"card-body\">\n    <form data-role=\"electronic-payee-form\" (ngSubmit)=\"onSubmit(payeeForm)\" [formGroup]=\"payeeForm\">\n      <bb-fieldset-ui>\n        <div class=\"bb-block bb-block--md\">\n          <bb-header-ui\n            headingType=\"h2\"\n            [heading]=\"'Account details for ' + payee?.name\"\n            i18n-heading=\"Fieldset heading|Account name heading@@billpay-electronic-payee-form.payee-details-heading\"\n            data-role=\"payee-name-heading\"\n          ></bb-header-ui>\n        </div>\n        <div [class.bb-block--lg]=\"zipCodeRequired\" data-role=\"account-number-label\">\n          <div class=\"bb-form-field bb-form-field--md\">\n            <bb-input-text-ui\n              formControlName=\"accountNumber\"\n              data-role=\"account-number-input\"\n              label=\"Account number\"\n              i18n-label=\"label|Label for account number field@@billpay-electronic-payee-form.account-number-label\"\n              [aria-describedby]=\"accNumberDescId\"\n              autofocus\n            >\n            </bb-input-text-ui>\n          </div>\n          <div\n            id=\"{{ accNumberDescId }}\"\n            class=\"bb-subtitle bb-text-support\"\n            i18n=\"label|Label for account number info message@@billpay-electronic-payee-form.account-number-info\"\n            data-role=\"account-number-help-text\"\n          >\n            Enter account number as it appears on your bill\n          </div>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('accountNumber', 'required')\"\n            i18n=\"\n              error text|Account number required error text@@billpay-electronic-payee-form.error.account-number-required\"\n            data-role=\"account-number-error-required\"\n          >\n            Please enter an account number\n          </bb-input-validation-message-ui>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('accountNumber', 'minlength')\"\n            i18n=\"\n              error text|Account number minlength error\n              text@@billpay-electronic-payee-form.error.account-number-minlength\"\n            data-role=\"account-number-error-minlength\"\n          >\n            Account number must be at least 2 characters\n          </bb-input-validation-message-ui>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('accountNumber', 'maxlength')\"\n            i18n=\"\n              error text|Account number max length error\n              text@@billpay-electronic-payee-form.error.account-number-maxlength\"\n            data-role=\"account-number-error-maxlength\"\n          >\n            Account number may not be over a hundred characters\n          </bb-input-validation-message-ui>\n        </div>\n        <div *ngIf=\"zipCodeRequired\" data-role=\"zip-code-label\">\n          <div class=\"bb-form-field bb-form-field--xs\">\n            <bb-input-text-ui\n              formControlName=\"merchantZipCode\"\n              data-role=\"zip-code-input\"\n              label=\"Payee ZIP code\"\n              i18n-label=\"label|Label for ZIP code field@@billpay-electronic-payee-form.zip-label\"\n            >\n            </bb-input-text-ui>\n          </div>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('merchantZipCode', 'required')\"\n            i18n=\"error text|Zip code is required error text@@billpay-electronic-payee-form.error.zip-code-required\"\n            data-role=\"zip-code-error-required\"\n          >\n            Please enter a Zip Code\n          </bb-input-validation-message-ui>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('merchantZipCode', 'pattern')\"\n            i18n=\"error text|Zip code format error text@@billpay-electronic-payee-form.error.zip-code-format\"\n            data-role=\"zip-code-error-pattern\"\n          >\n            ZIP code should be 5 or 9 digits long\n          </bb-input-validation-message-ui>\n        </div>\n      </bb-fieldset-ui>\n\n      <bb-fieldset-ui>\n        <div class=\"bb-block bb-block--md\">\n          <bb-header-ui\n            headingType=\"h2\"\n            heading=\"Payee nickname\"\n            i18n-heading=\"Payee nickname@@billpay-electronic-payee-form.payee-nickname-heading\"\n            data-role=\"payee-nickname-heading\"\n          ></bb-header-ui>\n        </div>\n        <div>\n          <div class=\"bb-form-field bb-form-field--md\">\n            <label data-role=\"nickname-input-label\" class=\"bb-label\" [attr.id]=\"'bb-nickname-label' + nickNameDescId\">\n              <span i18n=\"label|Label for payee nickname field@@billpay-electronic-payee-form.payee-nickname-label\"\n                >Create payee nickname</span\n              >\n              <span\n                class=\"bb-text-default bb-text-support\"\n                i18n=\"label optional|Label for optional text@@billpay-electronic-payee-form.payee-nickname-label-helper\"\n              >\n                (Optional)</span\n              >\n            </label>\n            <bb-input-text-ui\n              formControlName=\"nickName\"\n              data-role=\"nickname-input\"\n              [aria-describedby]=\"nickNameDescId\"\n              [aria-labelledby]=\"'bb-nickname-label' + nickNameDescId\"\n            ></bb-input-text-ui>\n          </div>\n          <div\n            id=\"{{ nickNameDescId }}\"\n            class=\"bb-subtitle bb-text-support\"\n            i18n=\"label|Label for payee nickname info message@@billpay-electronic-payee-form.payee-nickname-info\"\n            data-role=\"nickname-help-text\"\n          >\n            Choose how you want this payee to appear in bill pay. This information is only available to you.\n          </div>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('nickName', 'minlength')\"\n            i18n=\"error text|Nickname min length error text@@billpay-electronic-payee-form.error.nickname-minlength\"\n            data-role=\"nickname-error-minlength\"\n          >\n            Nickname must be at least 2 characters\n          </bb-input-validation-message-ui>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('nickName', 'maxlength')\"\n            i18n=\"error text|Nickname max length error text@@billpay-electronic-payee-form.error.nickname-maxlength\"\n            data-role=\"nickname-error-maxlength\"\n          >\n            Nickname may not be over a hundred characters\n          </bb-input-validation-message-ui>\n        </div>\n      </bb-fieldset-ui>\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          type=\"submit\"\n          data-role=\"continue-button\"\n          i18n=\"Label for button|Electronic payee continue button@@billpay-electronic-payee-form.continue\"\n          class=\"bb-button-bar__button\"\n        >\n          Continue\n        </button>\n        <button\n          bbButton\n          *ngIf=\"backButtonShown\"\n          data-role=\"back-button\"\n          i18n=\"Label for button|Find a different payee button@@billpay-electronic-payee-form.find-different-payee\"\n          (click)=\"toSearch()\"\n          class=\"bb-button-bar__button\"\n          color=\"secondary\"\n        >\n          Find a different payee\n        </button>\n        <button\n          bbButton\n          data-role=\"cancel-button\"\n          color=\"link\"\n          class=\"bb-button-bar__button bb-button-bar__button--across\"\n          (click)=\"cancelForm()\"\n        >\n          <span i18n=\"Cancel edit|Label for a button that cancels form changes@@billpay-electronic-payee-form.cancel\"\n            >Cancel</span\n          >\n        </button>\n      </div>\n    </form>\n  </section>\n</div>\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { catchError, debounceTime, distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\nimport { BillpayManagePayeeDataService } from '../../../services/billpay-manage-payee-data.service';\nimport { PayeeSearch } from '@backbase/data-ang/billpay';\n\n@Component({\n  selector: 'bb-billpay-electronic-payee-search',\n  templateUrl: './billpay-electronic-payee-search.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BillpayElectronicPayeeSearchComponent {\n  /**\n   * Fires a payee's id when electronic payee is selected in the search box.\n   */\n  @Output() payeeSelected = new EventEmitter<PayeeSearch>();\n  @Output() errorSearching = new EventEmitter();\n  /**\n   * Description text element id of the search input\n   */\n  @Input() descTextId?: string;\n  readonly typeaheadOptions = {\n    ngbTypeahead: this.search.bind(this),\n    selectItem: this.onItemSelected.bind(this),\n    resultFormatter: (payee: PayeeSearch) => payee.name,\n    inputFormatter: (payee: PayeeSearch) => payee.name,\n  };\n\n  /** @internal */\n  constructor(private readonly dataService: BillpayManagePayeeDataService) {}\n\n  search(text$: Observable<string>): Observable<PayeeSearch[]> {\n    const payees$ = (text: string) =>\n      this.dataService.searchPayeesByName(text).pipe(\n        map(({ payees }) => payees || []),\n        catchError(() => {\n          this.errorSearching.emit();\n          return of([]);\n        }),\n      );\n\n    return text$.pipe(\n      debounceTime(300),\n      distinctUntilChanged(),\n      filter(text => text.length >= 2),\n      switchMap(payees$),\n      catchError(() => of([])),\n    );\n  }\n\n  onItemSelected(event: { item: PayeeSearch; preventDefault: () => void }) {\n    this.payeeSelected.emit(event.item);\n  }\n}\n","<div class=\"bb-block bb-block--xl\">\n  <bb-search-box-ui\n    [role]=\"'combobox'\"\n    showClear=\"true\"\n    [aria-describedby]=\"descTextId\"\n    label=\"Payee name\"\n    i18n-label=\"\n      Payee name|Label for electronic search input @@billpay-manage-payee.electronic-payee-search.form.search-label\"\n    clearLabel=\"Clear search\"\n    i18n-clearLabel=\"\n      The aria label used when the clear button is in focus@@billpay-manage-payee.electronic-payee-search.clear-label\"\n    [typeaheadOptions]=\"typeaheadOptions\"\n    [autocomplete]=\"'off'\"\n    autofocus\n  ></bb-search-box-ui>\n</div>\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { ManualPayeeFormState } from '../../../model';\nimport { AbstractControl, FormBuilder, FormGroup, ValidatorFn, Validators } from '@angular/forms';\nimport { takeUntil, take, distinctUntilChanged } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { BillpayUtilityService as Utility } from '@backbase/billpay-journeys-common';\nimport { PhoneNumberPipe } from '@backbase/ui-ang/phone-number-format-pipe';\n\nexport const DEFAULT_FORM_VALUE = {\n  name: '',\n  address: { address1: '', address2: '', city: '', state: '', postalCode: '' },\n  phoneNumber: '',\n  accountNumber: '',\n  nickName: '',\n};\nconst DEFAULT_COUNTRY_CODE = 'US';\n\n@Component({\n  selector: 'bb-billpay-manual-payee-form',\n  templateUrl: './billpay-manual-payee-form.component.html',\n  providers: [PhoneNumberPipe],\n})\nexport class BillpayManualPayeeFormComponent implements OnInit, OnDestroy {\n  /**\n   * Details of the manual payee to be created.\n   */\n  @Input() payeeFormState?: ManualPayeeFormState;\n  /**\n   * Hides elements that are not relevant when editing a payee. Defaults to false.\n   */\n  @Input() editForm = false;\n  @Output() formSubmitted = new EventEmitter<ManualPayeeFormState>();\n  @Output() formCanceled = new EventEmitter<void>();\n  @Output() backToSearch = new EventEmitter<void>();\n  @Output() valueChanged = new EventEmitter<void>();\n\n  payeeForm = new FormGroup({});\n  componentDestroyed$ = new Subject<void>();\n  private isSubmissionAttempted = false;\n  readonly requiredErrorId = Utility.generateId();\n  readonly minLengthErrorId = Utility.generateId();\n  readonly maxlengthErrorId = Utility.generateId();\n  readonly helpTextId = Utility.generateId();\n  readonly formatErrorId = Utility.generateId();\n  readonly labelId = Utility.generateId();\n\n  /** @internal */\n  constructor(private readonly formBuilder: FormBuilder, private readonly phoneNumberFormatter: PhoneNumberPipe) {}\n\n  ngOnInit() {\n    this.payeeForm = this.createForm();\n    this.setValidators();\n    this.payeeForm.valueChanges.pipe(takeUntil(this.componentDestroyed$), take(1)).subscribe(() => {\n      this.valueChanged.emit();\n    });\n\n    const phoneNumberControl = this.payeeForm.get('phoneNumber');\n    if (phoneNumberControl) {\n      this.setupPhoneNumberFormatter(phoneNumberControl);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.componentDestroyed$.next();\n    this.componentDestroyed$.complete();\n  }\n\n  onSubmit(payeeForm: FormGroup) {\n    if (!this.isSubmissionAttempted) {\n      this.isSubmissionAttempted = true;\n    }\n    if (payeeForm.invalid) {\n      payeeForm.markAllAsTouched();\n      return;\n    }\n    this.formSubmitted.emit(payeeForm.value);\n  }\n\n  cancelForm() {\n    this.formCanceled.emit();\n  }\n\n  toSearch() {\n    this.backToSearch.emit();\n  }\n\n  hasError(controlName: string, errorName: string): boolean {\n    const control = this.payeeForm.get(controlName);\n    return !!control && control.touched && control.hasError(errorName);\n  }\n\n  private createForm(): FormGroup {\n    const { phoneNumber, address, ...restFormState } = {\n      ...DEFAULT_FORM_VALUE,\n      ...this.payeeFormState,\n      address: {\n        ...DEFAULT_FORM_VALUE.address,\n        ...(this.payeeFormState && { ...this.payeeFormState.address }),\n      },\n    };\n\n    return this.formBuilder.group({\n      ...restFormState,\n      phoneNumber: this.formatPhoneNumber(phoneNumber),\n      address: this.formBuilder.group(address),\n    });\n  }\n\n  private setValidators() {\n    ([\n      ['name', [Validators.required, Validators.minLength(2), Validators.maxLength(100)]],\n      ['address.address1', [Validators.required, Validators.maxLength(40)]],\n      ['address.address2', [Validators.maxLength(40)]],\n      ['address.city', [Validators.required, Validators.maxLength(32)]],\n      ['address.state', [Validators.required]],\n      ['address.postalCode', [Validators.required, Validators.pattern(/^\\d{5}(\\d{4})?$/)]],\n      ['phoneNumber', [Validators.pattern(/^\\+1 \\d{3} \\d{3} \\d{4}$/)]],\n      ['accountNumber', [Validators.minLength(2), Validators.maxLength(100)]],\n      ['nickName', [Validators.minLength(2), Validators.maxLength(100)]],\n    ] as [string, ValidatorFn[]][]).forEach(([controlName, validators]) => {\n      const control = this.payeeForm.get(controlName);\n      if (control) {\n        control.setValidators(validators);\n        control.updateValueAndValidity();\n      }\n    });\n  }\n\n  private formatPhoneNumber(phoneNumber: string): string {\n    return this.phoneNumberFormatter.transform(phoneNumber, DEFAULT_COUNTRY_CODE, true);\n  }\n\n  private setupPhoneNumberFormatter(control: AbstractControl) {\n    control.valueChanges.pipe(distinctUntilChanged()).subscribe(() => {\n      control.setValue(this.formatPhoneNumber(control.value), {\n        emitEvent: false,\n      });\n    });\n  }\n}\n","<div class=\"card card-lg\">\n  <section class=\"card-body\">\n    <form #form data-role=\"manual-payee-form\" (ngSubmit)=\"onSubmit(payeeForm)\" [formGroup]=\"payeeForm\">\n      <bb-alert-ui\n        *ngIf=\"!editForm\"\n        modifier=\"warning\"\n        [title]=\"\n          'Please note that payees entered manually will have a longer payment processing time and no eBill functionality'\n        \"\n        i18n-title=\"alert title|For create payee form alert@@billpay-manual-payee-form.alert\"\n      >\n      </bb-alert-ui>\n      <div class=\"bb-block bb-block--xl\">\n        <div class=\"bb-form-field bb-form-field--md\">\n          <bb-input-text-ui\n            formControlName=\"name\"\n            data-role=\"name-input\"\n            label=\"Company, organisation or individual's name\"\n            i18n-label=\"label|Label for company, organisation, individual's name field@@billpay-manual-payee-form.name\"\n            [aria-describedby]=\"\n              ['name-' + requiredErrorId, 'name-' + minLengthErrorId, 'name-' + maxlengthErrorId].join(' ')\n            \"\n            autofocus\n          >\n          </bb-input-text-ui>\n        </div>\n        <bb-input-validation-message-ui\n          role=\"alert\"\n          [showErrors]=\"hasError('name', 'required')\"\n          i18n=\"error text|Name is required error text@@billpay-manual-payee-form.error.name-required\"\n          data-role=\"name-error-required\"\n          [messageId]=\"'name-' + requiredErrorId\"\n        >\n          Please enter a name\n        </bb-input-validation-message-ui>\n        <bb-input-validation-message-ui\n          role=\"alert\"\n          [showErrors]=\"hasError('name', 'minlength')\"\n          i18n=\"error text|Name minlength error text@@billpay-manual-payee-form.error.name-minlength\"\n          data-role=\"name-error-minlength\"\n          [messageId]=\"'name-' + minLengthErrorId\"\n        >\n          Name must be at least 2 characters\n        </bb-input-validation-message-ui>\n        <bb-input-validation-message-ui\n          role=\"alert\"\n          [showErrors]=\"hasError('name', 'maxlength')\"\n          i18n=\"error text|Name max length error text@@billpay-manual-payee-form.error.name-maxlength\"\n          data-role=\"name-error-maxlength\"\n          [messageId]=\"'name-' + maxlengthErrorId\"\n        >\n          Name may not be over a hundred characters\n        </bb-input-validation-message-ui>\n      </div>\n      <bb-fieldset-ui\n        heading=\"Payee contact details\"\n        i18n-heading=\"Payee contact details heading@@billpay-manual-payee-form.payee-details-heading\"\n      >\n        <bb-billpay-address-form formGroupName=\"address\"></bb-billpay-address-form>\n\n        <div class=\"bb-block bb-block--md\">\n          <div class=\"bb-form-field bb-form-field--sm\">\n            <label for=\"billpay-phone-number-input\" data-role=\"phone-number-label\">\n              <ng-container i18n=\"label|Label for phone number field@@billpay-manual-payee-form.phone-label\"\n                >Phone number&nbsp;</ng-container\n              ><span\n                class=\"bb-text-default bb-text-support\"\n                i18n=\"label optional|Label for optional field@@billpay-manual-payee-form.optional-label\"\n                >(Optional)</span\n              ></label\n            >\n            <input\n              class=\"form-control\"\n              id=\"billpay-phone-number-input\"\n              formControlName=\"phoneNumber\"\n              data-role=\"phone-number-input\"\n              [attr.aria-describedby]=\"\n                ['billpay-phone-number-help-' + helpTextId, 'billpay-phone-number-help-' + formatErrorId].join(' ')\n              \"\n              type=\"tel\"\n              aria-label=\"Phone number\"\n              i18n-aria-label=\"\n                aria label|Aria label for phone number field@@billpay-manual-payee-form.phone-number-aria-label\"\n            />\n          </div>\n          <span\n            id=\"{{ 'billpay-phone-number-help-' + helpTextId }}\"\n            class=\"bb-subtitle bb-text-support\"\n            i18n=\"label|Label for phone number format info message@@billpay-manual-payee-form.phone-format\"\n            data-role=\"phone-number-help-text\"\n          >\n            Format +1 XXX XXX XXXX\n          </span>\n          <bb-input-validation-message-ui\n            [messageId]=\"'billpay-phone-number-help-' + formatErrorId\"\n            role=\"alert\"\n            [showErrors]=\"hasError('phoneNumber', 'pattern')\"\n            i18n=\"error text|Phone number format error text@@billpay-manual-payee-form.error.phone-number-format\"\n            data-role=\"phone-number-error-pattern\"\n          >\n            Phone number format should be +1 xxx xxx xxxx\n          </bb-input-validation-message-ui>\n        </div>\n\n        <div>\n          <div class=\"bb-form-field bb-form-field--md\">\n            <label\n              class=\"bb-label\"\n              data-role=\"account-number-input-label\"\n              [attr.id]=\"'bb-account-number-label' + labelId\"\n            >\n              <span i18n=\"label|Label for account number field@@billpay-manual-payee-form.account-number-label\"\n                >Account number</span\n              >\n              <span\n                class=\"bb-text-default bb-text-support\"\n                i18n=\"label optional|Label for optional text@@billpay-manual-payee-form.account-number-label-helper\"\n              >\n                (Optional)</span\n              >\n            </label>\n            <bb-input-text-ui\n              formControlName=\"accountNumber\"\n              data-role=\"account-number-input\"\n              [aria-labelledby]=\"'bb-account-number-label' + labelId\"\n              [aria-describedby]=\"\n                [\n                  'account-number-help-' + helpTextId,\n                  'account-number-help-' + minLengthErrorId,\n                  'account-number-help-' + maxlengthErrorId\n                ].join(' ')\n              \"\n            >\n            </bb-input-text-ui>\n          </div>\n          <span\n            [id]=\"'account-number-help-' + helpTextId\"\n            class=\"bb-subtitle bb-text-support\"\n            i18n=\"label|Label for account number info message@@billpay-manual-payee-form.account-number-info\"\n            data-role=\"account-number-help-text\"\n            >If you have an account number for this payee, enter it as it appears on your bill\n          </span>\n          <bb-input-validation-message-ui\n            [messageId]=\"'account-number-help-' + minLengthErrorId\"\n            role=\"alert\"\n            [showErrors]=\"hasError('accountNumber', 'minlength')\"\n            i18n=\"\n              error text|Account number minlength error text@@billpay-manual-payee-form.error.account-number-minlength\"\n            data-role=\"account-number-error-minlength\"\n          >\n            Account number must be at least 2 characters\n          </bb-input-validation-message-ui>\n          <bb-input-validation-message-ui\n            [messageId]=\"'account-number-help-' + maxlengthErrorId\"\n            role=\"alert\"\n            [showErrors]=\"hasError('accountNumber', 'maxlength')\"\n            i18n=\"\n              error text|Account number max length error text@@billpay-manual-payee-form.error.account-number-maxlength\"\n            data-role=\"account-number-error-maxlength\"\n          >\n            Account number may not be over a hundred characters\n          </bb-input-validation-message-ui>\n        </div>\n      </bb-fieldset-ui>\n\n      <bb-fieldset-ui\n        heading=\"Payee nickname\"\n        i18n-heading=\"Payee nickname@@billpay-manual-payee-form.payee-nickname-heading\"\n      >\n        <div class=\"bb-block bb-block--md\">\n          <div class=\"bb-form-field bb-form-field--md\">\n            <label class=\"bb-label\" data-role=\"nickname-input-label\" [attr.id]=\"'bb-nickname-label' + labelId\">\n              <span i18n=\"label|Label for payee nickname field@@billpay-manual-payee-form.payee-nickname-label\"\n                >Create payee nickname\n              </span>\n              <span\n                class=\"bb-text-default bb-text-support\"\n                i18n=\"label optional|Label for optional text@@billpay-manual-payee-form.payee-nickname-label-helper\"\n              >\n                (Optional)</span\n              >\n            </label>\n            <bb-input-text-ui\n              formControlName=\"nickName\"\n              data-role=\"nickname-input\"\n              [aria-labelledby]=\"'bb-nickname-label' + labelId\"\n              [aria-describedby]=\"\n                ['nickName-' + helpTextId, 'nickName-' + minLengthErrorId, 'nickName-' + maxlengthErrorId].join(' ')\n              \"\n            >\n            </bb-input-text-ui>\n          </div>\n          <span\n            [id]=\"'nickName-' + helpTextId\"\n            class=\"bb-subtitle bb-text-support\"\n            i18n=\"label|Label for payee nickname info message@@billpay-manual-payee-form.payee-nickname-info\"\n            data-role=\"nickname-help-text\"\n            >Choose how you want this payee to appear in bill pay. This information is only available to you.</span\n          >\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('nickName', 'minlength')\"\n            i18n=\"error text|Nickname min length error text@@billpay-manual-payee-form.error.nickname-minlength\"\n            data-role=\"nickname-error-minlength\"\n            [messageId]=\"'nickName-' + minLengthErrorId\"\n          >\n            Nickname must be at least 2 characters\n          </bb-input-validation-message-ui>\n          <bb-input-validation-message-ui\n            role=\"alert\"\n            [showErrors]=\"hasError('nickName', 'maxlength')\"\n            i18n=\"error text|Nickname max length error text@@billpay-manual-payee-form.error.nickname-maxlength\"\n            data-role=\"nickname-error-maxlength\"\n            [messageId]=\"'nickName-' + maxlengthErrorId\"\n          >\n            Nickname may not be over a hundred characters\n          </bb-input-validation-message-ui>\n        </div>\n      </bb-fieldset-ui>\n      <div class=\"bb-button-bar bb-button-bar--reverse\">\n        <button\n          bbButton\n          type=\"submit\"\n          data-role=\"continue-button\"\n          i18n=\"Label for button|Manual payee continue button@@billpay-manual-payee-form.continue\"\n          class=\"bb-button-bar__button\"\n        >\n          Continue\n        </button>\n        <button\n          *ngIf=\"!editForm\"\n          bbButton\n          data-role=\"back-button\"\n          i18n=\"Label for button|Find a different payee button@@billpay-manual-payee-form.find-different-payee\"\n          (click)=\"toSearch()\"\n          class=\"bb-button-bar__button\"\n          color=\"secondary\"\n        >\n          Find a different payee\n        </button>\n        <button\n          bbButton\n          data-role=\"cancel-button\"\n          i18n=\"Label for button|Cancel button@@billpay-manual-payee-form.cancel\"\n          (click)=\"cancelForm()\"\n          class=\"bb-button-bar__button bb-button-bar__button--across\"\n          color=\"link\"\n        >\n          Cancel\n        </button>\n      </div>\n    </form>\n  </section>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { BillpayJourneysCommonModule } from '@backbase/billpay-journeys-common';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { BillpayCancelNewPayeeModalComponent } from './add-payee/billpay-cancel-new-payee-modal/billpay-cancel-new-payee-modal.component';\nimport { BillpayElectronicPayeeReviewComponent } from './add-payee/billpay-electronic-payee-review/billpay-electronic-payee-review.component';\nimport { BillpayManualPayeeReviewComponent } from './add-payee/billpay-manual-payee-review/billpay-manual-payee-review.component';\nimport { BillpayPayverisEbillsEnrolmentCancelModalComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-cancel-modal/billpay-payveris-ebills-enrolment-cancel-modal.component';\nimport { BillpayPayeeSummaryListComponent } from './payee-list/billpay-payee-summary-list/billpay-payee-summary-list.component';\nimport { BillpayPayeeSummaryItemComponent } from './payee-list/billpay-payee-summary-item/billpay-payee-summary-item.component';\nimport { BillpayPayeeStepperComponent } from './payee-summary/billpay-payee-stepper/billpay-payee-stepper.component';\nimport { BillpayPayeeInformationComponent } from './payee-summary/billpay-payee-information/billpay-payee-information.component';\nimport { BillpayPayverisEbillsEnrolmentSelectBillerComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-select-biller/billpay-payveris-ebills-enrolment-select-biller.component';\nimport { BillpayPayverisEbillsEnrolmentMfaEntryComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-mfa-entry/billpay-payveris-ebills-enrolment-mfa-entry.component';\nimport { BillpayPayverisEbillsEnrolmentLoginComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-login/billpay-payveris-ebills-enrolment-login.component';\nimport { BillpayPayverisEbillsEnrolmentOtpSelectComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-otp-select/billpay-payveris-ebills-enrolment-otp-select.component';\nimport { BillpayPayverisEbillsEnrolmentOtpEntryComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-otp-entry/billpay-payveris-ebills-enrolment-otp-entry.component';\nimport { BillpayPayverisEbillsEnrolmentCaptchaComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-captcha/billpay-payveris-ebills-enrolment-captcha.component';\nimport { BillpayPayverisEbillsEnrolmentSelectAccountComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-select-account/billpay-payveris-ebills-enrolment-select-account.component';\nimport { BillpayPayverisEbillsEnrolmentErrorComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-error/billpay-payveris-ebills-enrolment-error.component';\nimport { BillpayPayverisEbillsEnrolmentNotificationSuccessComponent } from './payveris-ebills-enrollment/billpay-payveris-ebills-enrolment-notification-success/billpay-payveris-ebills-enrolment-notification-success.component';\nimport { AlertModule } from '@backbase/ui-ang/alert';\nimport { BbDatePipeModule } from '@backbase/ui-ang/date-pipe';\nimport { CollapsibleModule } from '@backbase/ui-ang/collapsible';\nimport { DropdownMenuModule } from '@backbase/ui-ang/dropdown-menu';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { InputPasswordModule } from '@backbase/ui-ang/input-password';\nimport { InputRadioGroupModule } from '@backbase/ui-ang/input-radio-group';\nimport { PhoneNumberModule } from '@backbase/ui-ang/phone-number-format-pipe';\nimport { BillpayCancelEditPayeeModalComponent } from './add-payee/billpay-cancel-edit-payee-modal/billpay-cancel-edit-payee-modal.component';\nimport { BillpayElectronicPayeeFormComponent } from './add-payee/billpay-electronic-payee-form/billpay-electronic-payee-form.component';\nimport { BillpayElectronicPayeeSearchComponent } from './add-payee/billpay-electronic-payee-search/billpay-electronic-payee-search.component';\nimport { BillpayManualPayeeFormComponent } from './add-payee/billpay-manual-payee-form/billpay-manual-payee-form.component';\nimport { FieldsetModule } from '@backbase/ui-ang/fieldset';\nimport { SearchBoxModule } from '@backbase/ui-ang/search-box';\n\nconst components = [\n  BillpayCancelNewPayeeModalComponent,\n  BillpayElectronicPayeeReviewComponent,\n  BillpayManualPayeeReviewComponent,\n  BillpayPayverisEbillsEnrolmentSelectBillerComponent,\n  BillpayPayverisEbillsEnrolmentCancelModalComponent,\n  BillpayPayverisEbillsEnrolmentMfaEntryComponent,\n  BillpayPayverisEbillsEnrolmentLoginComponent,\n  BillpayPayverisEbillsEnrolmentOtpSelectComponent,\n  BillpayPayverisEbillsEnrolmentOtpEntryComponent,\n  BillpayPayverisEbillsEnrolmentCaptchaComponent,\n  BillpayPayverisEbillsEnrolmentSelectAccountComponent,\n  BillpayPayverisEbillsEnrolmentErrorComponent,\n  BillpayPayeeSummaryListComponent,\n  BillpayPayeeSummaryItemComponent,\n  BillpayPayeeStepperComponent,\n  BillpayPayeeInformationComponent,\n  BillpayPayverisEbillsEnrolmentNotificationSuccessComponent,\n  BillpayCancelEditPayeeModalComponent,\n  BillpayElectronicPayeeFormComponent,\n  BillpayElectronicPayeeSearchComponent,\n  BillpayManualPayeeFormComponent,\n];\n\nconst uiAngModules = [\n  IconModule,\n  CollapsibleModule,\n  PhoneNumberModule,\n  AlertModule,\n  InputPasswordModule,\n  InputRadioGroupModule,\n  BbDatePipeModule,\n  DropdownMenuModule,\n  FieldsetModule,\n  SearchBoxModule,\n];\n\n@NgModule({\n  declarations: [...components],\n  imports: [CommonModule, ReactiveFormsModule, FormsModule, NgbModule, BillpayJourneysCommonModule, ...uiAngModules],\n  exports: [...components, ...uiAngModules],\n})\nexport class ManagePayeesJourneyUiModule {}\n","import { Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { BillpayBaseDeactivateGuardService } from '@backbase/billpay-journeys-common';\n\n@Injectable()\nexport class BillpayManagePayeeDeactivateGuardService extends BillpayBaseDeactivateGuardService {\n  protected readonly allowedPreviousRoutes: RegExp[] = [\n    /^.*\\/manual(\\/review)?$/,\n    /^.*\\/manual\\/edit\\/.+(\\/review.+)?$/,\n    /^.*\\/electronic\\/.+(\\/review.+)?$/,\n    /^.*\\/electronic\\/edit\\/.+(\\/review.+)?$/,\n  ];\n  protected readonly allowedNextRoutes: RegExp[] = [\n    /^.*\\/manual(\\/review)?$/,\n    /^.*\\/manual\\/edit\\/.+(\\/review.+)?$/,\n    /^.*\\/electronic\\/.+(\\/review.+)?$/,\n    /^.*\\/electronic\\/edit\\/.+(\\/review.+)?$/,\n  ];\n\n  /** @internal */\n  constructor(router: Router, location: Location) {\n    super(router, location);\n  }\n}\n","import { Component } from '@angular/core';\nimport { PayeeSearch } from '@backbase/data-ang/billpay';\nimport { BillpayUtilityService as Utility } from '@backbase/billpay-journeys-common';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\n\n@Component({\n  templateUrl: './billpay-search-payee-view.component.html',\n})\nexport class BillpaySearchPayeeViewComponent {\n  private _searchAvailable = true;\n  descTextId: string;\n\n  /** @internal */\n  constructor(private readonly router: ManagePayeesNavigationService) {\n    this.descTextId = Utility.generateId();\n  }\n\n  createManualPayee() {\n    this.router.navigateToManualPayeeForm();\n  }\n\n  onPayeeSelected(payee: PayeeSearch) {\n    const { merchantID, zipRequired, name } = payee;\n    this.router.navigateToElectronicPayeeForm(merchantID, { queryParams: { zipRequired, name } });\n  }\n\n  onSearchError() {\n    this._searchAvailable = false;\n  }\n\n  onCanceled() {\n    this.router.navigateToPayeeList();\n  }\n\n  get searchAvailable(): boolean {\n    return this._searchAvailable;\n  }\n}\n","<ng-container *ngIf=\"searchAvailable; else errorState\">\n  <div class=\"card card-lg\">\n    <div class=\"card-body\">\n      <section class=\"bb-block bb-block--md\">\n        <bb-header-ui\n          headingType=\"h2\"\n          i18n-heading=\"Find a payee heading|Form heading@@billpay-manage-payee.search.form.heading\"\n          heading=\"Find a payee\"\n        >\n        </bb-header-ui>\n        <bb-billpay-electronic-payee-search\n          (payeeSelected)=\"onPayeeSelected($event)\"\n          (errorSearching)=\"onSearchError()\"\n          [descTextId]=\"descTextId\"\n          data-role=\"search-box\"\n        ></bb-billpay-electronic-payee-search>\n        <p\n          id=\"{{ descTextId }}\"\n          class=\"bb-block bb-block--md\"\n          i18n=\"Payee search description|Description under search box@@billpay-manage-payee.search.form.description\"\n        >\n          If the payee cant be found, you can choose to enter their details manually\n        </p>\n        <div class=\"bb-button-bar bb-button-bar--reverse\">\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            data-role=\"enter-details-button\"\n            (click)=\"createManualPayee()\"\n            color=\"secondary\"\n            i18n=\"button label|Create manual payee button@@billpay-manage-payee.search.form.button\"\n          >\n            Enter details manually\n          </button>\n        </div>\n      </section>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #errorState>\n  <div class=\"card card-lg\">\n    <div class=\"card-body bb-state-container\">\n      <bb-empty-state-ui\n        data-role=\"error-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"error-outline\"\n        subtitle=\"Please try again later or enter details manually. Please note that payees entered manually will have a longer payment processing time and no eBill functionality.\"\n        i18n-subtitle=\"Payee search unavailable subtitle@@bb-billpay-payee-list-widget-ang.search-unavailable.subtitle\"\n        title=\"Payee search is currently unavailable\"\n        i18n-title=\"Payee search unavailable title@@bb-billpay-payee-list-widget-ang.search-unavailable.title\"\n      >\n      </bb-empty-state-ui>\n      <div class=\"bb-state-container__footer\">\n        <div class=\"bb-button-bar bb-button-bar--reverse bb-button-bar--center bb-block bb-block--xl\">\n          <button\n            bbButton\n            class=\"bb-button-bar__button\"\n            data-role=\"enter-details-button\"\n            (click)=\"createManualPayee()\"\n            color=\"secondary\"\n            i18n=\"button label|Create manual payee button@@billpay-manage-payee.search.form.button\"\n          >\n            Enter details manually\n          </button>\n        </div>\n        <div class=\"bb-button-bar bb-button-bar--reverse bb-button-bar--center\">\n          <button\n            bbButton\n            class=\"bb-button-bar__button bb-button-bar__button--across\"\n            data-role=\"cancel-button\"\n            (click)=\"onCanceled()\"\n            color=\"link\"\n            i18n=\"button label|Cancel payee search button@@billpay-manage-payee.cancel.form.button\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { Component, HostListener } from '@angular/core';\n\nimport { ManualPayeeFormState } from '../../model';\nimport { Observable, of } from 'rxjs';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport {\n  BillpayDiscardChangesFormComponent,\n  BillpayDiscardChangesModalService,\n} from '@backbase/billpay-journeys-common';\n\n@Component({\n  templateUrl: './billpay-create-manual-payee-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class BillpayCreateManualPayeeViewComponent implements BillpayDiscardChangesFormComponent {\n  readonly payeeFormState: Observable<ManualPayeeFormState | undefined> = this.stateService.manualPayeeFormState;\n  private isFormTouched = false;\n  isFindPayeeModal = false;\n\n  /** @internal */\n  constructor(\n    private readonly stateService: BillpayManagePayeeStateService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly discardModalService: BillpayDiscardChangesModalService,\n  ) {}\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if ((this.isFormTouched || this.stateService.isFormProcessing) && !this.isDiscardModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  onFormSubmitted(payee: ManualPayeeFormState) {\n    this.stateService.isFormProcessing = true;\n    this.stateService.setManualPayee(payee);\n    this.router.navigateToManualPayeeReview();\n  }\n\n  onBackToSearch() {\n    this.isFindPayeeModal = true;\n    this.router.navigateToSearch();\n  }\n\n  onFormCanceled() {\n    this.router.navigateToPayeeList();\n  }\n\n  onFormValueChanged() {\n    this.isFormTouched = true;\n  }\n\n  openModal(): Observable<boolean> {\n    return this.isFormTouched || this.stateService.isFormProcessing ? this.discardModalService.openModal() : of(true);\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    if (resolvedWith) this.stateService.resetManualPayee();\n    this.isFindPayeeModal = false;\n    this.discardModalService.onModalResolve(resolvedWith);\n  }\n}\n","<bb-billpay-manual-payee-form\n  [payeeFormState]=\"payeeFormState | async\"\n  (formSubmitted)=\"onFormSubmitted($event)\"\n  (formCanceled)=\"onFormCanceled()\"\n  (backToSearch)=\"onBackToSearch()\"\n  (valueChanged)=\"onFormValueChanged()\"\n>\n</bb-billpay-manual-payee-form>\n<bb-billpay-cancel-new-payee-modal\n  *ngIf=\"isDiscardModalOpen\"\n  [findPayee]=\"isFindPayeeModal\"\n  (resolve)=\"onModalResolve($event)\"\n></bb-billpay-cancel-new-payee-modal>\n","import { Component, HostListener, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { switchMap, map, catchError, tap } from 'rxjs/operators';\nimport { of, Observable, combineLatest } from 'rxjs';\nimport { ManualPayeeFormState } from '../../model';\nimport {\n  BillpayDiscardChangesFormComponent,\n  BillpayDiscardChangesModalService,\n} from '@backbase/billpay-journeys-common';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeDataService } from '../../services/billpay-manage-payee-data.service';\n\n@Component({\n  templateUrl: './billpay-edit-manual-payee-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class BillpayEditManualPayeeViewComponent implements OnInit, BillpayDiscardChangesFormComponent {\n  payeeFormState?: Observable<ManualPayeeFormState>;\n  hasLoadingError = false;\n  isFormTouched = false;\n  private payeeId = '';\n\n  /** @internal */\n  constructor(\n    private readonly route: ActivatedRoute,\n    private readonly stateService: BillpayManagePayeeStateService,\n    private readonly dataService: BillpayManagePayeeDataService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly discardModalService: BillpayDiscardChangesModalService,\n  ) {}\n\n  ngOnInit() {\n    this.payeeFormState = combineLatest([\n      this.route.paramMap.pipe(map(params => params.get('id') || '')),\n      this.stateService.manualPayeeFormState,\n    ]).pipe(\n      tap(([id]) => (this.payeeId = id)),\n      switchMap(\n        ([id, state]) =>\n          (state && of(state)) ||\n          this.dataService.getManualPayee(id).pipe(\n            map(payee => payee && this.stateService.toManualFormState(payee)),\n            catchError(() => {\n              this.hasLoadingError = true;\n              return of({} as ManualPayeeFormState);\n            }),\n          ),\n      ),\n    );\n  }\n\n  get isDiscardModalOpen() {\n    return this.discardModalService.isDiscardModalOpen;\n  }\n\n  @HostListener('window:beforeunload', ['$event'])\n  onWindowUnload($event: BeforeUnloadEvent) {\n    if ((this.isFormTouched || this.stateService.isFormProcessing) && !this.isDiscardModalOpen) {\n      $event.returnValue = true;\n    }\n  }\n\n  onFormSubmitted(payee: ManualPayeeFormState) {\n    this.stateService.isFormProcessing = true;\n    this.stateService.setManualPayee(payee);\n    this.router.navigateToEditManualReview(this.payeeId);\n  }\n\n  onFormValueChanged() {\n    this.isFormTouched = true;\n  }\n\n  onFormCanceled() {\n    this.router.navigateToPayeeList();\n  }\n\n  openModal(): Observable<boolean> {\n    return this.isFormTouched || this.stateService.isFormProcessing ? this.discardModalService.openModal() : of(true);\n  }\n\n  onModalResolve(resolvedWith: boolean) {\n    this.discardModalService.onModalResolve(resolvedWith);\n    if (resolvedWith) {\n      this.router.navigateToPayeeList();\n    }\n  }\n}\n","<ng-container *ngIf=\"payeeFormState | async as payeeState; else loadingState\">\n  <ng-container *ngIf=\"!hasLoadingError; else errorState\">\n    <bb-billpay-manual-payee-form\n      [editForm]=\"true\"\n      [payeeFormState]=\"payeeState\"\n      (formSubmitted)=\"onFormSubmitted($event)\"\n      (formCanceled)=\"onFormCanceled()\"\n      (valueChanged)=\"onFormValueChanged()\"\n    >\n    </bb-billpay-manual-payee-form>\n  </ng-container>\n</ng-container>\n\n<bb-billpay-cancel-edit-payee-modal\n  *ngIf=\"isDiscardModalOpen\"\n  (resolve)=\"onModalResolve($event)\"\n></bb-billpay-cancel-edit-payee-modal>\n\n<ng-template #loadingState>\n  <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n</ng-template>\n\n<ng-template #errorState>\n  <bb-empty-state-ui\n    data-role=\"error-state\"\n    iconSize=\"xxl\"\n    iconModifier=\"error\"\n    subtitle=\"Try to reload the page or contact support\"\n    i18n-subtitle=\"\n      Try to reload the page or contact support|Edit manual payee\n      subtitle@@bb-billpay-manage-payee-widget-ang.loading.subtitle\"\n    title=\"Payee is not loading\"\n    i18n-title=\"Payee is not loading|Edit manual payee loading title@@bb-billpay-manage-payee-widget-ang.loading.title\"\n  >\n  </bb-empty-state-ui>\n</ng-template> \n","import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap, take } from 'rxjs/operators';\n\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { ElectronicPayeeForm } from '../../model';\nimport { BaseElectronicPayeePageDirective } from '../../model/base-electronic-payee-page.model';\nimport { BillpayDiscardChangesModalService } from '@backbase/billpay-journeys-common';\n\n@Component({\n  templateUrl: './billpay-create-electronic-payee-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class BillpayCreateElectronicPayeeViewComponent extends BaseElectronicPayeePageDirective {\n  readonly payee$: Observable<ElectronicPayeeForm>;\n  readonly zipRequired$: Observable<boolean>;\n  private readonly name$: Observable<string>;\n\n  /** @internal */\n  constructor(\n    route: ActivatedRoute,\n    stateService: BillpayManagePayeeStateService,\n    discardModalService: BillpayDiscardChangesModalService,\n    private readonly router: ManagePayeesNavigationService,\n  ) {\n    super(route, stateService, discardModalService);\n\n    this.zipRequired$ = this.route.queryParamMap.pipe(\n      take(1),\n      map(params => params.get('zipRequired')),\n      map(zipRequired => (zipRequired ? JSON.parse(zipRequired) : false)),\n    );\n    this.name$ = this.route.queryParamMap.pipe(\n      take(1),\n      map(params => params.get('name') || ''),\n    );\n    this.payee$ = this.initializePayee();\n  }\n\n  onFormSubmitted(payee: ElectronicPayeeForm) {\n    this.stateService.setElectronicPayee(payee);\n    this.id$.subscribe(id => this.router.navigateToElectronicPayeeReview(id, { queryParamsHandling: 'preserve' }));\n  }\n\n  onBackToSearch() {\n    this.isFindPayeeModal = true;\n    this.router.navigateToSearch();\n  }\n\n  onFormCanceled() {\n    this.router.navigateToPayeeList();\n  }\n\n  private initializePayee(): Observable<ElectronicPayeeForm> {\n    const payee$ = combineLatest([this.zipRequired$, this.name$]).pipe(\n      map(([zipRequired, name]) => ({\n        name,\n        accountNumber: '',\n        nickName: '',\n        ...(zipRequired && { merchantZipCode: '' }),\n      })),\n    );\n\n    return this.payeeState$.pipe(switchMap(state => (state ? of(state) : payee$)));\n  }\n}\n","<ng-container *ngIf=\"payee$ | async as payee\">\n  <bb-billpay-electronic-payee-form\n    [payee]=\"payee\"\n    [zipCodeRequired]=\"zipRequired$ | async\"\n    (formSubmitted)=\"onFormSubmitted($event)\"\n    (formCanceled)=\"onFormCanceled()\"\n    (backToSearch)=\"onBackToSearch()\"\n    (valueChanged)=\"onFormValueChanged()\"\n  >\n  </bb-billpay-electronic-payee-form>\n\n  <bb-billpay-cancel-new-payee-modal\n    *ngIf=\"isDiscardModalOpen\"\n    [findPayee]=\"isFindPayeeModal\"\n    (resolve)=\"onModalResolve($event)\"\n  ></bb-billpay-cancel-new-payee-modal>\n</ng-container>\n","import { ChangeDetectorRef, Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { PostElectronicRequestPayee } from '@backbase/data-ang/billpay';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, switchMap } from 'rxjs/operators';\n\nimport { BillpayManagePayeeStateService } from '../../services/billpay-manage-payee-state.service';\nimport { ManagePayeesNavigationService } from '../../services/manage-payees-navigation.service';\nimport { BillpayManagePayeeDataService } from '../../services/billpay-manage-payee-data.service';\nimport { BillpayDiscardChangesModalService } from '@backbase/billpay-journeys-common';\nimport { ElectronicPayeeForm } from '../../model';\nimport { BaseElectronicPayeePageDirective } from '../../model/base-electronic-payee-page.model';\n\n@Component({\n  templateUrl: './billpay-edit-electronic-payee-view.component.html',\n  providers: [BillpayDiscardChangesModalService],\n})\nexport class BillpayEditElectronicPayeeViewComponent extends BaseElectronicPayeePageDirective {\n  readonly payee$: Observable<ElectronicPayeeForm | undefined>;\n  hasLoadingError = false;\n\n  /** @internal */\n  constructor(\n    route: ActivatedRoute,\n    stateService: BillpayManagePayeeStateService,\n    discardModalService: BillpayDiscardChangesModalService,\n    private readonly router: ManagePayeesNavigationService,\n    private readonly dataService: BillpayManagePayeeDataService,\n    private readonly cd: ChangeDetectorRef,\n  ) {\n    super(route, stateService, discardModalService);\n    this.payee$ = this.initializePayee();\n  }\n\n  onFormSubmitted(payee: PostElectronicRequestPayee) {\n    this.stateService.setElectronicPayee(payee);\n    this.id$.subscribe(id => this.router.navigateToEditElectronicPayeeReview(id));\n  }\n\n  private initializePayee(): Observable<ElectronicPayeeForm | undefined> {\n    const payee$ = this.id$.pipe(\n      switchMap(id => this.dataService.getElectronicPayee(id)),\n      map(payee => this.stateService.electronicGetResponseToForm(payee)),\n      catchError(() => {\n        this.hasLoadingError = true;\n        this.cd.detectChanges();\n        return of(undefined);\n      }),\n    );\n\n    return this.payeeState$.pipe(switchMap(state => (state ? of(state) : payee$)));\n  }\n\n  onFormCanceled() {\n    this.router.navigateToPayeeList();\n  }\n}\n","<ng-container *ngIf=\"!hasLoadingError; else errorState\">\n  <ng-container *ngIf=\"payee$ | async as payee; else loadingState\">\n    <bb-billpay-electronic-payee-form\n      [payee]=\"payee\"\n      [zipCodeRequired]=\"false\"\n      [backButtonShown]=\"false\"\n      (formSubmitted)=\"onFormSubmitted($event)\"\n      (formCanceled)=\"onFormCanceled()\"\n      (valueChanged)=\"onFormValueChanged()\"\n    >\n    </bb-billpay-electronic-payee-form>\n  </ng-container>\n</ng-container>\n\n<ng-template #loadingState>\n  <bb-loading-indicator-ui loaderSize=\"lg\"> </bb-loading-indicator-ui>\n</ng-template>\n\n<ng-template #errorState>\n  <bb-empty-state-ui\n    data-role=\"error-state\"\n    iconSize=\"xxl\"\n    iconModifier=\"error\"\n    title=\"Payee is not loading\"\n    i18n-title=\"Payee is not loading title@@billpay-manage-payee.edit-electronic.error-state.title\"\n    subtitle=\"Try to reload the page or contact support\"\n    i18n-subtitle=\"Payments list is not loading subtitle@@billpay-manage-payee.edit-electronic.error-state.subtitle\"\n  >\n  </bb-empty-state-ui>\n</ng-template>\n\n<bb-billpay-cancel-edit-payee-modal\n  *ngIf=\"isDiscardModalOpen\"\n  (resolve)=\"onModalResolve($event)\"\n></bb-billpay-cancel-edit-payee-modal>\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BackbaseCoreModule } from '@backbase/foundation-ang/core';\nimport { ManagePayeesJourneyComponent } from './manage-payees-journey.component';\nimport {\n  BillpayEnrolmentGuard,\n  BillpayJourneysCommonModule,\n  BillpayPayeeDataService,\n} from '@backbase/billpay-journeys-common';\n\nimport { provideRoutes, Route, RouterModule } from '@angular/router';\nimport { PayeeListViewComponent } from './views/billpay-payee-list/billpay-payee-list-view.component';\nimport { PayeeSummaryViewComponent } from './views/billpay-payee-summary/billpay-payee-summary-view.component';\nimport { EbillsEnrolmentViewComponent } from './views/billpay-ebills-enrolment/billpay-ebills-enrolment-view.component';\nimport { ManagePayeeViewComponent } from './views/billpay-manage-payee/billpay-manage-payee-view.component';\nimport { BillPayEnrolmentViewComponent } from './views/billpay-enrolment/billpay-enrolment-view.component';\nimport { CreateManualPayeeReviewViewComponent } from './views/billpay-create-manual-payee-review/billpay-create-manual-payee-review-view.component';\nimport { EditManualPayeeReviewViewComponent } from './views/billpay-edit-manual-payee-review/billpay-edit-manual-payee-review-view.component';\nimport { CreateElectronicPayeeReviewViewComponent } from './views/billpay-create-electronic-payee-review/billpay-create-electronic-payee-review-view.component';\nimport { EditElectronicPayeeReviewViewComponent } from './views/billpay-edit-electronic-payee-review/billpay-edit-electronic-payee-review-view.component';\nimport { ManagePayeesJourneyConfigService } from './services/manage-payees-journey-config.service';\nimport { ManagePayeesJourneyUiModule } from './components/manage-payees-journey-ui.module';\nimport { BillpayPayverisEbillsEnrolmentWidgetService } from './services/billpay-payveris-ebills-enrolment-widget.service';\nimport { BillpayPayeeSummaryWidgetService } from './services/billpay-payee-summary-widget.service';\nimport { BillpayManagePayeeDeactivateGuardService } from './services/billpay-manage-payee-deactivate-guard.service';\nimport { BillpaySearchPayeeViewComponent } from './views/billpay-search-payee/billpay-search-payee-view.component';\nimport { BillpayCreateManualPayeeViewComponent } from './views/billpay-create-manual-payee/billpay-create-manual-payee-view.component';\nimport { BillpayEditManualPayeeViewComponent } from './views/billpay-edit-manual-payee/billpay-edit-manual-payee-view.component';\nimport { BillpayCreateElectronicPayeeViewComponent } from './views/billpay-create-electronic-payee/billpay-create-electronic-payee-view.component';\nimport { BillpayEditElectronicPayeeViewComponent } from './views/billpay-edit-electronic-payee/billpay-edit-electronic-payee-view.component';\nimport { BillpayManagePayeeDataService } from './services/billpay-manage-payee-data.service';\nimport { BillpayManagePayeeStateService } from './services/billpay-manage-payee-state.service';\n\nexport const defaultRoute: Route = {\n  path: '',\n  component: ManagePayeesJourneyComponent,\n  children: [\n    { path: 'enrolment', component: BillPayEnrolmentViewComponent },\n    {\n      path: '',\n      canActivate: [BillpayEnrolmentGuard],\n      children: [\n        { path: '', component: PayeeListViewComponent, pathMatch: 'full' },\n        {\n          path: 'payees',\n          component: ManagePayeeViewComponent,\n          children: [\n            {\n              path: '',\n              component: BillpaySearchPayeeViewComponent,\n              pathMatch: 'full',\n            },\n            {\n              path: 'manual',\n              component: BillpayCreateManualPayeeViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'manual/review',\n              component: CreateManualPayeeReviewViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'manual/edit/:id',\n              component: BillpayEditManualPayeeViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'manual/edit/:id/review',\n              component: EditManualPayeeReviewViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'electronic/:id',\n              component: BillpayCreateElectronicPayeeViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'electronic/:id/review',\n              component: CreateElectronicPayeeReviewViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'electronic/edit/:id',\n              component: BillpayEditElectronicPayeeViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n            {\n              path: 'electronic/edit/:id/review',\n              component: EditElectronicPayeeReviewViewComponent,\n              canDeactivate: [BillpayManagePayeeDeactivateGuardService],\n            },\n          ],\n        },\n        { path: 'payee-summary', component: PayeeSummaryViewComponent },\n        { path: 'ebills', component: EbillsEnrolmentViewComponent },\n      ],\n    },\n  ],\n};\n\n@NgModule({\n  declarations: [\n    ManagePayeesJourneyComponent,\n    PayeeListViewComponent,\n    PayeeSummaryViewComponent,\n    EbillsEnrolmentViewComponent,\n    ManagePayeeViewComponent,\n    BillPayEnrolmentViewComponent,\n    CreateManualPayeeReviewViewComponent,\n    EditManualPayeeReviewViewComponent,\n    CreateElectronicPayeeReviewViewComponent,\n    EditElectronicPayeeReviewViewComponent,\n    BillpaySearchPayeeViewComponent,\n    BillpayCreateManualPayeeViewComponent,\n    BillpayEditManualPayeeViewComponent,\n    BillpayCreateElectronicPayeeViewComponent,\n    BillpayEditElectronicPayeeViewComponent,\n  ],\n  imports: [\n    CommonModule,\n    RouterModule,\n    BillpayJourneysCommonModule,\n    ManagePayeesJourneyUiModule,\n    BackbaseCoreModule.withConfig({\n      classMap: { ManagePayeesJourneyComponent },\n    }),\n  ],\n  providers: [\n    ManagePayeesJourneyConfigService,\n    BillpayPayeeDataService,\n    BillpayPayverisEbillsEnrolmentWidgetService,\n    BillpayPayeeSummaryWidgetService,\n    BillpayManagePayeeDeactivateGuardService,\n    BillpayManagePayeeDataService,\n    BillpayManagePayeeStateService,\n  ],\n})\nexport class ManagePayeesJourneyModule {\n  static forRoot(\n    data: { route: Route; [key: string]: any } = { route: defaultRoute },\n  ): ModuleWithProviders<ManagePayeesJourneyModule> {\n    return {\n      ngModule: ManagePayeesJourneyModule,\n      providers: [provideRoutes([data.route])],\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["BaseElectronicPayeeReviewPageModelDirective","Utilities","Utility"],"mappings":"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"}