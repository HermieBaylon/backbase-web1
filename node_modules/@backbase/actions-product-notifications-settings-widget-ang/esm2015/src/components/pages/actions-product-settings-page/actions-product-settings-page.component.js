import { Component, Directive, Input, ViewChild } from '@angular/core';
import { getPropertyValue, SpecificationIds, } from '@backbase/actions-common-ang';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { BehaviorSubject, combineLatest, of } from 'rxjs';
import { catchError, first, map, mapTo, publishReplay, refCount, startWith, switchMap, withLatestFrom, } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/actions-store-ang";
import * as i2 from "../../../services/actions-product-notifications-settings-router.service";
import * as i3 from "../../../services/actions-product-notifications-settings-data.service";
import * as i4 from "../../../services/actions-product-notifications-settings-properties.service";
import * as i5 from "../../actions-product-item-card/actions-product-item-card.component";
import * as i6 from "@backbase/actions-common-ang";
import * as i7 from "@backbase/ui-ang/loading-indicator";
import * as i8 from "@backbase/ui-ang/empty-state";
import * as i9 from "@angular/common";
export class ActionsProductSettingsPageComponent {
    constructor(store, routerService, widgetDataService, widgetPropertiesService) {
        this.store = store;
        this.routerService = routerService;
        this.widgetDataService = widgetDataService;
        this.widgetPropertiesService = widgetPropertiesService;
        this.notificationDismissTime$$ = new BehaviorSubject(undefined);
        this.specificationIDs$$ = new BehaviorSubject(undefined);
        /**
         * Stream of Specifications with action recipe.
         */
        this.specificationsWithActionRecipe$ = this.store.specificationsWithActionRecipe$;
        this.hasAccountLoadingError = new BehaviorSubject(false);
        /**
         * Stream of loading errors.
         */
        this.loadingError$ = combineLatest([
            this.store.actionRecipesError$,
            this.store.specificationsError$,
            this.hasAccountLoadingError,
        ]).pipe(map(errors => errors.find(Boolean)));
        /**
         * Specification IDs enum.
         */
        this.specificationIds = SpecificationIds;
        this.accountId$ = this.routerService.selectedAccountId$;
        this.account$ = this.accountId$.pipe(switchMap(id => this.getAccount(id)), publishReplay(), refCount());
        this.isLoading$ = combineLatest([
            this.store.actionRecipesLoading$,
            this.store.specificationsLoading$,
            this.account$.pipe(mapTo(false), startWith(true)),
        ]).pipe(map(loadings => loadings.some(Boolean)));
    }
    /**
     * Notification dismiss time value setter.
     * Configurable via model property.
     */
    set notificationDismissTime(value) {
        this.notificationDismissTime$$.next(value);
    }
    /**
     * Specification IDs value setter.
     * Configurable via model property.
     */
    set specificationIDs(value) {
        this.specificationIDs$$.next(value);
    }
    ngOnInit() {
        const specificationIdsStream = getPropertyValue(this.specificationIDs$$, this.widgetPropertiesService.getSpecificationIDs());
        this.accountId$.pipe(first(), withLatestFrom(specificationIdsStream)).subscribe(([accountId, specificationIDs]) => {
            const specificationIDsSet = new Set(specificationIDs);
            this.store.dispatchLoadSpecifications({ specificationIds: specificationIDsSet });
            this.store.dispatchLoadActionRecipes({
                specificationIds: specificationIDsSet,
                arrangementId: accountId,
            });
        });
    }
    /**
     * Method to submit action recipe form.
     *
     * @param formValue - action recipe form value
     */
    onSubmit(formValue) {
        const notificationDismissTime$ = getPropertyValue(this.notificationDismissTime$$, this.widgetPropertiesService.getNotificationDismissTimeProperty());
        combineLatest([this.accountId$, notificationDismissTime$])
            .pipe(first())
            .subscribe(([arrangementId, ttl]) => {
            const errorNotification = {
                header: Object.create(this.errorNotificationHeaderTemplate),
                message: Object.create(this.errorNotificationMessageTemplate),
                modifier: 'error',
                ttl,
            };
            this.store.dispatchSaveActionRecipe({
                actionRecipe: formValue,
                arrangementId,
                warningNotification: errorNotification,
            });
        });
    }
    getAccount(id) {
        return this.widgetDataService.getAccountById(id).pipe(catchError(() => {
            this.hasAccountLoadingError.next(true);
            return of({});
        }));
    }
}
ActionsProductSettingsPageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageComponent, deps: [{ token: i1.ActionsStoreModel }, { token: i2.ActionsProductNotificationsSettingsRouterService }, { token: i3.ActionsProductNotificationsSettingsDataService }, { token: i4.ActionsProductNotificationsSettingsPropertiesService }], target: i0.ɵɵFactoryTarget.Component });
ActionsProductSettingsPageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.14", type: ActionsProductSettingsPageComponent, selector: "bb-actions-product-settings-page", inputs: { notificationDismissTime: "notificationDismissTime", specificationIDs: "specificationIDs" }, viewQueries: [{ propertyName: "errorNotificationHeaderTemplate", first: true, predicate: ["errorNotificationHeader"], descendants: true }, { propertyName: "errorNotificationMessageTemplate", first: true, predicate: ["errorNotificationMessage"], descendants: true }], ngImport: i0, template: "<ng-container\n  bbActionsProductSettingsPageCustomizable\n  [bbHostRef]=\"this\"\n  [bbTemplateContext]=\"{\n    account: account$ | async,\n    loadingError: loadingError$ | async,\n    loading: isLoading$ | async,\n    specificationsWithAction: specificationsWithActionRecipe$ | async,\n    specificationIds: specificationIds\n  }\"\n></ng-container>\n\n<ng-template\n  bbActionsProductSettingsPageCustomizable\n  let-host\n  let-actions=\"context.actions\"\n  let-specifications=\"context.specifications\"\n  let-account=\"context.account\"\n  let-loadingError=\"context.loadingError\"\n  let-loading=\"context.loading\"\n  let-specificationsWithAction=\"context.specificationsWithAction\"\n  let-specificationIds=\"context.specificationIds\"\n>\n  <ng-container *ngIf=\"!loading; else loadingState\">\n    <ng-container *ngIf=\"!loadingError; else errorState\">\n      <bb-actions-product-item-card [account]=\"account\"></bb-actions-product-item-card>\n\n      <div class=\"bb-block bb-block--xl\">\n        <bb-actions-account-balance-recipe-form\n          *ngIf=\"specificationsWithAction[specificationIds.AccountBalance] as specificationWithAction\"\n          [account]=\"account\"\n          [specification]=\"specificationWithAction.specification\"\n          [actionRecipe]=\"specificationWithAction.actionRecipe\"\n          (submit)=\"host.onSubmit($event)\"\n        ></bb-actions-account-balance-recipe-form>\n      </div>\n\n      <div class=\"bb-block bb-block--xl\">\n        <bb-actions-transactions-recipe-form\n          *ngIf=\"specificationsWithAction[specificationIds.Transactions] as specificationWithAction\"\n          [specification]=\"specificationWithAction.specification\"\n          [actionRecipe]=\"specificationWithAction.actionRecipe\"\n          (submit)=\"host.onSubmit($event)\"\n        ></bb-actions-transactions-recipe-form>\n      </div>\n    </ng-container>\n  </ng-container>\n\n  <ng-template #loadingState>\n    <div class=\"card\">\n      <bb-loading-indicator-ui\n        class=\"bb-state-container\"\n        loaderSize=\"lg\"\n        text=\"Loading...\"\n        i18n-text=\"Loading... text@@actions-product-settings-page.title\"\n      ></bb-loading-indicator-ui>\n    </div>\n  </ng-template>\n\n  <ng-template #errorState>\n    <div class=\"card\">\n      <bb-empty-state-ui\n        class=\"bb-state-container\"\n        data-role=\"error-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"error-outline\"\n        title=\"Unknown Error\"\n        i18n-title=\"\n          Actions product notifications settings are not loading title@@actions-product-settings-page.error-state.title\"\n        subtitle=\"Try to reload the page or contact the system administrator.\"\n        i18n-subtitle=\"\n          Actions product notifications settings are not loading\n          subtitle@@actions-product-settings-page.error-state.subtitle\"\n      >\n      </bb-empty-state-ui>\n    </div>\n  </ng-template>\n</ng-template>\n\n<ng-template #errorNotificationHeader>\n  <ng-container bbActionsProductSettingsPageErrorNotificationHeaderCustomizable [bbHostRef]=\"this\"> </ng-container>\n</ng-template>\n\n<ng-template #errorNotificationMessage>\n  <ng-container bbActionsProductSettingsPageErrorNotificationMessageCustomizable [bbHostRef]=\"this\"> </ng-container>\n</ng-template>\n\n<ng-template bbActionsProductSettingsPageErrorNotificationHeaderCustomizable>\n  <span i18n=\"Couldn't save changes@@actions-product-settings-page.error-notification.header\"\n    >Couldn't make changes</span\n  >\n</ng-template>\n\n<ng-template bbActionsProductSettingsPageErrorNotificationMessageCustomizable>\n  <div i18n=\"Please try again later@@actions-product-settings-page.error-notification.message\">\n    Please try again later\n  </div>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i5.ActionsProductItemCardComponent; }), selector: "bb-actions-product-item-card", inputs: ["account"] }, { type: i0.forwardRef(function () { return i6.ӨActionsAccountBalanceRecipeFormComponent; }), selector: "bb-actions-account-balance-recipe-form" }, { type: i0.forwardRef(function () { return i6.ӨActionsTransactionsRecipeFormComponent; }), selector: "bb-actions-transactions-recipe-form" }, { type: i0.forwardRef(function () { return i7.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i0.forwardRef(function () { return i8.EmptyStateComponent; }), selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }], directives: [{ type: i0.forwardRef(function () { return ActionsProductSettingsPageCustomizableDirective; }), selector: "[bbActionsProductSettingsPageCustomizable]" }, { type: i0.forwardRef(function () { return i9.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective; }), selector: "[bbActionsProductSettingsPageErrorNotificationHeaderCustomizable]" }, { type: i0.forwardRef(function () { return ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective; }), selector: "[bbActionsProductSettingsPageErrorNotificationMessageCustomizable]" }], pipes: { "async": i0.forwardRef(function () { return i9.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-actions-product-settings-page',
                    templateUrl: './actions-product-settings-page.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.ActionsStoreModel }, { type: i2.ActionsProductNotificationsSettingsRouterService }, { type: i3.ActionsProductNotificationsSettingsDataService }, { type: i4.ActionsProductNotificationsSettingsPropertiesService }]; }, propDecorators: { notificationDismissTime: [{
                type: Input
            }], specificationIDs: [{
                type: Input
            }], errorNotificationHeaderTemplate: [{
                type: ViewChild,
                args: ['errorNotificationHeader', { static: false }]
            }], errorNotificationMessageTemplate: [{
                type: ViewChild,
                args: ['errorNotificationMessage', { static: false }]
            }] } });
export class ActionsProductSettingsPageCustomizableDirective extends BbTemplate {
}
ActionsProductSettingsPageCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ActionsProductSettingsPageCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: ActionsProductSettingsPageCustomizableDirective, selector: "[bbActionsProductSettingsPageCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbActionsProductSettingsPageCustomizable]',
                }]
        }] });
export class ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective extends BbTemplate {
}
ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective, selector: "[bbActionsProductSettingsPageErrorNotificationHeaderCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageErrorNotificationHeaderCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbActionsProductSettingsPageErrorNotificationHeaderCustomizable]',
                }]
        }] });
export class ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective extends BbTemplate {
}
ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective, selector: "[bbActionsProductSettingsPageErrorNotificationMessageCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsProductSettingsPageErrorNotificationMessageCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbActionsProductSettingsPageErrorNotificationMessageCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9ucy1wcm9kdWN0LXNldHRpbmdzLXBhZ2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9hY3Rpb25zLXByb2R1Y3Qtbm90aWZpY2F0aW9ucy1zZXR0aW5ncy13aWRnZXQtYW5nL3NyYy9jb21wb25lbnRzL3BhZ2VzL2FjdGlvbnMtcHJvZHVjdC1zZXR0aW5ncy1wYWdlL2FjdGlvbnMtcHJvZHVjdC1zZXR0aW5ncy1wYWdlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYWN0aW9ucy1wcm9kdWN0LW5vdGlmaWNhdGlvbnMtc2V0dGluZ3Mtd2lkZ2V0LWFuZy9zcmMvY29tcG9uZW50cy9wYWdlcy9hY3Rpb25zLXByb2R1Y3Qtc2V0dGluZ3MtcGFnZS9hY3Rpb25zLXByb2R1Y3Qtc2V0dGluZ3MtcGFnZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQXVCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM1RixPQUFPLEVBR0wsZ0JBQWdCLEVBRWhCLGdCQUFnQixHQUVqQixNQUFNLDhCQUE4QixDQUFDO0FBSXRDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUMzRCxPQUFPLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDdEUsT0FBTyxFQUNMLFVBQVUsRUFDVixLQUFLLEVBQ0wsR0FBRyxFQUNILEtBQUssRUFDTCxhQUFhLEVBQ2IsUUFBUSxFQUNSLFNBQVMsRUFDVCxTQUFTLEVBQ1QsY0FBYyxHQUNmLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7O0FBU3hCLE1BQU0sT0FBTyxtQ0FBbUM7SUFnRTlDLFlBQ21CLEtBQXdCLEVBQ3hCLGFBQStELEVBQy9ELGlCQUFp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SUF6SVUsbUNBQW1DO3FIQUFuQyxtQ0FBbUMseWJDakNoRCxndUhBa0dBLG80QkQ4RWEsK0NBQStDLG1PQWMvQyxzRUFBc0Usa0lBUXRFLHVFQUF1RTs0RkFyS3ZFLG1DQUFtQztrQkFKL0MsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsa0NBQWtDO29CQUM1QyxXQUFXLEVBQUUsZ0RBQWdEO2lCQUM5RDt1U0FTYyx1QkFBdUI7c0JBQW5DLEtBQUs7Z0JBUU8sZ0JBQWdCO3NCQUE1QixLQUFLO2dCQXlDbUQsK0JBQStCO3NCQUF2RixTQUFTO3VCQUFDLHlCQUF5QixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtnQkFLRyxnQ0FBZ0M7c0JBQXpGLFNBQVM7dUJBQUMsMEJBQTBCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOztBQWlGMUQsTUFBTSxPQUFPLCtDQUFnRCxTQUFRLFVBU3BFOzs2SUFUWSwrQ0FBK0M7aUlBQS9DLCtDQUErQzs0RkFBL0MsK0NBQStDO2tCQUgzRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSw0Q0FBNEM7aUJBQ3ZEOztBQWVELE1BQU0sT0FBTyxzRUFBdUUsU0FBUSxVQUczRjs7b0tBSFksc0VBQXNFO3dKQUF0RSxzRUFBc0U7NEZBQXRFLHNFQUFzRTtrQkFIbEYsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsbUVBQW1FO2lCQUM5RTs7QUFTRCxNQUFNLE9BQU8sdUVBQXdFLFNBQVEsVUFHNUY7O3FLQUhZLHVFQUF1RTt5SkFBdkUsdUVBQXVFOzRGQUF2RSx1RUFBdUU7a0JBSG5GLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLG9FQUFvRTtpQkFDL0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIERpcmVjdGl2ZSwgSW5wdXQsIE9uSW5pdCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQWN0aW9uUmVjaXBlRm9ybUl0ZW1WYWx1ZSxcbiAgQWN0aW9uUmVjaXBlSXRlbSxcbiAgZ2V0UHJvcGVydHlWYWx1ZSxcbiAgTm90aWZpY2F0aW9uLFxuICBTcGVjaWZpY2F0aW9uSWRzLFxuICBTcGVjaWZpY2F0aW9uc1dpdGhBY3Rpb24sXG59IGZyb20gJ0BiYWNrYmFzZS9hY3Rpb25zLWNvbW1vbi1hbmcnO1xuaW1wb3J0IHsgQWN0aW9uUmVjaXBlR2V0UmVzcG9uc2VCb2R5LCBBY3Rpb25SZWNpcGVTcGVjaWZpY2F0aW9uIH0gZnJvbSAnQGJhY2tiYXNlL2RhdGEtYW5nL2FjdGlvbnMnO1xuaW1wb3J0IHsgQWN0aW9uc1N0b3JlTW9kZWwgfSBmcm9tICdAYmFja2Jhc2UvYWN0aW9ucy1zdG9yZS1hbmcnO1xuaW1wb3J0IHsgQWNjb3VudEFycmFuZ2VtZW50SXRlbSB9IGZyb20gJ0BiYWNrYmFzZS9kYXRhLWFuZy9hcnJhbmdlbWVudHMnO1xuaW1wb3J0IHsgQmJUZW1wbGF0ZSB9IGZyb20gJ0BiYWNrYmFzZS9mb3VuZGF0aW9uLWFuZy9jb3JlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIGNhdGNoRXJyb3IsXG4gIGZpcnN0LFxuICBtYXAsXG4gIG1hcFRvLFxuICBwdWJsaXNoUmVwbGF5LFxuICByZWZDb3VudCxcbiAgc3RhcnRXaXRoLFxuICBzd2l0Y2hNYXAsXG4gIHdpdGhMYXRlc3RGcm9tLFxufSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBBY3Rpb25zUHJvZHVjdE5vdGlmaWNhdGlvbnNTZXR0aW5nc0RhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvYWN0aW9ucy1wcm9kdWN0LW5vdGlmaWNhdGlvbnMtc2V0dGluZ3MtZGF0YS5zZXJ2aWNlJztcbmltcG9ydCB7IEFjdGlvbnNQcm9kdWN0Tm90aWZpY2F0aW9uc1NldHRpbmdzUHJvcGVydGllc1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9hY3Rpb25zLXByb2R1Y3Qtbm90aWZpY2F0aW9ucy1zZXR0aW5ncy1wcm9wZXJ0aWVzLnNlcnZpY2UnO1xuaW1wb3J0IHsgQWN0aW9uc1Byb2R1Y3ROb3RpZmljYXRpb25zU2V0dGluZ3NSb3V0ZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvYWN0aW9ucy1wcm9kdWN0LW5vdGlmaWNhdGlvbnMtc2V0dGluZ3Mtcm91dGVyLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1hY3Rpb25zLXByb2R1Y3Qtc2V0dGluZ3MtcGFnZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9hY3Rpb25zLXByb2R1Y3Qtc2V0dGluZ3MtcGFnZS5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEFjdGlvbnNQcm9kdWN0U2V0dGluZ3NQYWdlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgcHJpdmF0ZSByZWFkb25seSBub3RpZmljYXRpb25EaXNtaXNzVGltZSQkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXIgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgc3BlY2lmaWNhdGlvbklEcyQkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmdbXSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuICAvKipcbiAgICogTm90aWZpY2F0aW9uIGRpc21pc3MgdGltZSB2YWx1ZSBzZXR0ZXIuXG4gICAqIENvbmZpZ3VyYWJsZSB2aWEgbW9kZWwgcHJvcGVydHkuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgbm90aWZpY2F0aW9uRGlzbWlzc1RpbWUodmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMubm90aWZpY2F0aW9uRGlzbWlzc1RpbWUkJC5uZXh0KHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWZpY2F0aW9uIElEcyB2YWx1ZSBzZXR0ZXIuXG4gICAqIENvbmZpZ3VyYWJsZSB2aWEgbW9kZWwgcHJvcGVydHkuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgc3BlY2lmaWNhdGlvbklEcyh2YWx1ZTogc3RyaW5nW10gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25JRHMkJC5uZXh0KHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJlYW0gb2YgYWNjb3VudCBhcnJhbmdlbWVudCBpdGVtIGRhdGEuXG4gICAqL1xuICByZWFkb25seSBhY2NvdW50JDogT2JzZXJ2YWJsZTxBY2NvdW50QXJyYW5nZW1lbnRJdGVtPjtcblxuICBwcml2YXRlIHJlYWRvbmx5IGFjY291bnRJZCQ6IE9ic2VydmFibGU8c3RyaW5nPjtcblxuICAvKipcbiAgICogU3RyZWFtIG9mIFNwZWNpZmljYXRpb25zIHdpdGggYWN0aW9uIHJlY2lwZS5cbiAgICovXG4gIHJlYWRvbmx5IHNwZWNpZmljYXRpb25zV2l0aEFjdGlvblJlY2lwZSQ/OiBPYnNlcnZhYmxlPFNwZWNpZmljYXRpb25zV2l0aEFjdGlvbj4gPVxuICAgIHRoaXMuc3RvcmUuc3BlY2lmaWNhdGlvbnNXaXRoQWN0aW9uUmVjaXBlJDtcblxuICAvKipcbiAgICogU3RyZWFtIG9mIGxvYWRpbmcgZmxhZyBpbmRpY2F0b3JzLlxuICAgKi9cbiAgcmVhZG9ubHkgaXNMb2FkaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICBwcml2YXRlIHJlYWRvbmx5IGhhc0FjY291bnRMb2FkaW5nRXJyb3IgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcblxuICAvKipcbiAgICogU3RyZWFtIG9mIGxvYWRpbmcgZXJyb3JzLlxuICAgKi9cbiAgcmVhZG9ubHkgbG9hZGluZ0Vycm9yJCA9IGNvbWJpbmVMYXRlc3QoW1xuICAgIHRoaXMuc3RvcmUuYWN0aW9uUmVjaXBlc0Vycm9yJCxcbiAgICB0aGlzLnN0b3JlLnNwZWNpZmljYXRpb25zRXJyb3IkLFxuICAgIHRoaXMuaGFzQWNjb3VudExvYWRpbmdFcnJvcixcbiAgXSkucGlwZShtYXAoZXJyb3JzID0+IGVycm9ycy5maW5kKEJvb2xlYW4pKSk7XG5cbiAgLyoqXG4gICAqIFNwZWNpZmljYXRpb24gSURzIGVudW0uXG4gICAqL1xuICByZWFkb25seSBzcGVjaWZpY2F0aW9uSWRzID0gU3BlY2lmaWNhdGlvbklkcztcblxuICAvKipcbiAgICogRXJyb3Igbm90aWZpY2F0aW9uIGhlYWRlciB0ZW1wbGF0ZS5cbiAgICovXG4gIEBWaWV3Q2hpbGQoJ2Vycm9yTm90aWZpY2F0aW9uSGVhZGVyJywgeyBzdGF0aWM6IGZhbHNlIH0pIGVycm9yTm90aWZpY2F0aW9uSGVhZGVyVGVtcGxhdGUhOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gIC8qKlxuICAgKiBFcnJvciBub3RpZmljYXRpb24gbWVzc2FnZSB0ZW1wbGF0ZS5cbiAgICovXG4gIEBWaWV3Q2hpbGQoJ2Vycm9yTm90aWZpY2F0aW9uTWVzc2FnZScsIHsgc3RhdGljOiBmYWxzZSB9KSBlcnJvck5vdGlmaWNhdGlvbk1lc3NhZ2VUZW1wbGF0ZSE6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBzdG9yZTogQWN0aW9uc1N0b3JlTW9kZWwsXG4gICAgcHJpdmF0ZSByZWFkb25seSByb3V0ZXJTZXJ2aWNlOiBBY3Rpb25zUHJvZHVjdE5vdGlmaWNhdGlvbnNTZXR0aW5nc1JvdXRlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSB3aWRnZXREYXRhU2VydmljZTogQWN0aW9uc1Byb2R1Y3ROb3RpZmljYXRpb25zU2V0dGluZ3NEYXRhU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHdpZGdldFByb3BlcnRpZXNTZXJ2aWNlOiBBY3Rpb25zUHJvZHVjdE5vdGlmaWNhdGlvbnNTZXR0aW5nc1Byb3BlcnRpZXNTZXJ2aWNlLFxuICApIHtcbiAgICB0aGlzLmFjY291bnRJZCQgPSB0aGlzLnJvdXRlclNlcnZpY2Uuc2VsZWN0ZWRBY2NvdW50SWQkO1xuICAgIHRoaXMuYWNjb3VudCQgPSB0aGlzLmFjY291bnRJZCQucGlwZShcbiAgICAgIHN3aXRjaE1hcChpZCA9PiB0aGlzLmdldEFjY291bnQoaWQpKSxcbiAgICAgIHB1Ymxpc2hSZXBsYXkoKSxcbiAgICAgIHJlZkNvdW50KCksXG4gICAgKTtcblxuICAgIHRoaXMuaXNMb2FkaW5nJCA9IGNvbWJpbmVMYXRlc3QoW1xuICAgICAgdGhpcy5zdG9yZS5hY3Rpb25SZWNpcGVzTG9hZGluZyQsXG4gICAgICB0aGlzLnN0b3JlLnNwZWNpZmljYXRpb25zTG9hZGluZyQsXG4gICAgICB0aGlzLmFjY291bnQkLnBpcGUobWFwVG8oZmFsc2UpLCBzdGFydFdpdGgodHJ1ZSkpLFxuICAgIF0pLnBpcGUobWFwKGxvYWRpbmdzID0+IGxvYWRpbmdzLnNvbWUoQm9vbGVhbikpKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGNvbnN0IHNwZWNpZmljYXRpb25JZHNTdHJlYW0gPSBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgdGhpcy5zcGVjaWZpY2F0aW9uSURzJCQsXG4gICAgICB0aGlzLndpZGdldFByb3BlcnRpZXNTZXJ2aWNlLmdldFNwZWNpZmljYXRpb25JRHMoKSxcbiAgICApO1xuXG4gICAgdGhpcy5hY2NvdW50SWQkLnBpcGUoZmlyc3QoKSwgd2l0aExhdGVzdEZyb20oc3BlY2lmaWNhdGlvbklkc1N0cmVhbSkpLnN1YnNjcmliZSgoW2FjY291bnRJZCwgc3BlY2lmaWNhdGlvbklEc10pID0+IHtcbiAgICAgIGNvbnN0IHNwZWNpZmljYXRpb25JRHNTZXQgPSBuZXcgU2V0KHNwZWNpZmljYXRpb25JRHMpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaExvYWRTcGVjaWZpY2F0aW9ucyh7IHNwZWNpZmljYXRpb25JZHM6IHNwZWNpZmljYXRpb25JRHNTZXQgfSk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoTG9hZEFjdGlvblJlY2lwZXMoe1xuICAgICAgICBzcGVjaWZpY2F0aW9uSWRzOiBzcGVjaWZpY2F0aW9uSURzU2V0LFxuICAgICAgICBhcnJhbmdlbWVudElkOiBhY2NvdW50SWQsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXRob2QgdG8gc3VibWl0IGFjdGlvbiByZWNpcGUgZm9ybS5cbiAgICpcbiAgICogQHBhcmFtIGZvcm1WYWx1ZSAtIGFjdGlvbiByZWNpcGUgZm9ybSB2YWx1ZVxuICAgKi9cbiAgb25TdWJtaXQoZm9ybVZhbHVlOiBBY3Rpb25SZWNpcGVGb3JtSXRlbVZhbHVlKSB7XG4gICAgY29uc3Qgbm90aWZpY2F0aW9uRGlzbWlzc1RpbWUkID0gZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgIHRoaXMubm90aWZpY2F0aW9uRGlzbWlzc1RpbWUkJCxcbiAgICAgIHRoaXMud2lkZ2V0UHJvcGVydGllc1NlcnZpY2UuZ2V0Tm90aWZpY2F0aW9uRGlzbWlzc1RpbWVQcm9wZXJ0eSgpLFxuICAgICk7XG5cbiAgICBjb21iaW5lTGF0ZXN0KFt0aGlzLmFjY291bnRJZCQsIG5vdGlmaWNhdGlvbkRpc21pc3NUaW1lJF0pXG4gICAgICAucGlwZShmaXJzdCgpKVxuICAgICAgLnN1YnNjcmliZSgoW2FycmFuZ2VtZW50SWQsIHR0bF0pID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JOb3RpZmljYXRpb246IE5vdGlmaWNhdGlvbiA9IHtcbiAgICAgICAgICBoZWFkZXI6IE9iamVjdC5jcmVhdGUodGhpcy5lcnJvck5vdGlmaWNhdGlvbkhlYWRlclRlbXBsYXRlKSxcbiAgICAgICAgICBtZXNzYWdlOiBPYmplY3QuY3JlYXRlKHRoaXMuZXJyb3JOb3RpZmljYXRpb25NZXNzYWdlVGVtcGxhdGUpLFxuICAgICAgICAgIG1vZGlmaWVyOiAnZXJyb3InLFxuICAgICAgICAgIHR0bCxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoU2F2ZUFjdGlvblJlY2lwZSh7XG4gICAgICAgICAgYWN0aW9uUmVjaXBlOiBmb3JtVmFsdWUsXG4gICAgICAgICAgYXJyYW5nZW1lbnRJZCxcbiAgICAgICAgICB3YXJuaW5nTm90aWZpY2F0aW9uOiBlcnJvck5vdGlmaWNhdGlvbixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWNjb3VudChpZDogc3RyaW5nKTogT2JzZXJ2YWJsZTxBY2NvdW50QXJyYW5nZW1lbnRJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMud2lkZ2V0RGF0YVNlcnZpY2UuZ2V0QWNjb3VudEJ5SWQoaWQpLnBpcGUoXG4gICAgICBjYXRjaEVycm9yKCgpID0+IHtcbiAgICAgICAgdGhpcy5oYXNBY2NvdW50TG9hZGluZ0Vycm9yLm5leHQodHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIG9mKHt9IGFzIEFjY291bnRBcnJhbmdlbWVudEl0ZW0pO1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJBY3Rpb25zUHJvZHVjdFNldHRpbmdzUGFnZUN1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBBY3Rpb25zUHJvZHVjdFNldHRpbmdzUGFnZUN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8XG4gIEFjdGlvbnNQcm9kdWN0U2V0dGluZ3NQYWdlQ29tcG9uZW50LFxuICB7XG4gICAgYWN0aW9uczogKEFjdGlvblJlY2lwZUdldFJlc3BvbnNlQm9keSB8IEFjdGlvblJlY2lwZUl0ZW0pW107XG4gICAgc3BlY2lmaWNhdGlvbnM6IEFjdGlvblJlY2lwZVNwZWNpZmljYXRpb25bXTtcbiAgICBhY2NvdW50OiBBY2NvdW50QXJyYW5nZW1lbnRJdGVtO1xuICAgIHNwZWNpZmljYXRpb25zV2l0aEFjdGlvbjogU3BlY2lmaWNhdGlvbnNXaXRoQWN0aW9uO1xuICAgIHNwZWNpZmljYXRpb25JZHM6IFNwZWNpZmljYXRpb25JZHM7XG4gIH1cbj4ge31cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VFcnJvck5vdGlmaWNhdGlvbkhlYWRlckN1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBBY3Rpb25zUHJvZHVjdFNldHRpbmdzUGFnZUVycm9yTm90aWZpY2F0aW9uSGVhZGVyQ3VzdG9taXphYmxlRGlyZWN0aXZlIGV4dGVuZHMgQmJUZW1wbGF0ZTxcbiAgQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VDb21wb25lbnQsXG4gIHZvaWRcbj4ge31cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VFcnJvck5vdGlmaWNhdGlvbk1lc3NhZ2VDdXN0b21pemFibGVdJyxcbn0pXG5leHBvcnQgY2xhc3MgQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VFcnJvck5vdGlmaWNhdGlvbk1lc3NhZ2VDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBBY3Rpb25zUHJvZHVjdFNldHRpbmdzUGFnZUNvbXBvbmVudCxcbiAgdm9pZFxuPiB7fVxuIiwiPG5nLWNvbnRhaW5lclxuICBiYkFjdGlvbnNQcm9kdWN0U2V0dGluZ3NQYWdlQ3VzdG9taXphYmxlXG4gIFtiYkhvc3RSZWZdPVwidGhpc1wiXG4gIFtiYlRlbXBsYXRlQ29udGV4dF09XCJ7XG4gICAgYWNjb3VudDogYWNjb3VudCQgfCBhc3luYyxcbiAgICBsb2FkaW5nRXJyb3I6IGxvYWRpbmdFcnJvciQgfCBhc3luYyxcbiAgICBsb2FkaW5nOiBpc0xvYWRpbmckIHwgYXN5bmMsXG4gICAgc3BlY2lmaWNhdGlvbnNXaXRoQWN0aW9uOiBzcGVjaWZpY2F0aW9uc1dpdGhBY3Rpb25SZWNpcGUkIHwgYXN5bmMsXG4gICAgc3BlY2lmaWNhdGlvbklkczogc3BlY2lmaWNhdGlvbklkc1xuICB9XCJcbj48L25nLWNvbnRhaW5lcj5cblxuPG5nLXRlbXBsYXRlXG4gIGJiQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VDdXN0b21pemFibGVcbiAgbGV0LWhvc3RcbiAgbGV0LWFjdGlvbnM9XCJjb250ZXh0LmFjdGlvbnNcIlxuICBsZXQtc3BlY2lmaWNhdGlvbnM9XCJjb250ZXh0LnNwZWNpZmljYXRpb25zXCJcbiAgbGV0LWFjY291bnQ9XCJjb250ZXh0LmFjY291bnRcIlxuICBsZXQtbG9hZGluZ0Vycm9yPVwiY29udGV4dC5sb2FkaW5nRXJyb3JcIlxuICBsZXQtbG9hZGluZz1cImNvbnRleHQubG9hZGluZ1wiXG4gIGxldC1zcGVjaWZpY2F0aW9uc1dpdGhBY3Rpb249XCJjb250ZXh0LnNwZWNpZmljYXRpb25zV2l0aEFjdGlvblwiXG4gIGxldC1zcGVjaWZpY2F0aW9uSWRzPVwiY29udGV4dC5zcGVjaWZpY2F0aW9uSWRzXCJcbj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFsb2FkaW5nOyBlbHNlIGxvYWRpbmdTdGF0ZVwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhbG9hZGluZ0Vycm9yOyBlbHNlIGVycm9yU3RhdGVcIj5cbiAgICAgIDxiYi1hY3Rpb25zLXByb2R1Y3QtaXRlbS1jYXJkIFthY2NvdW50XT1cImFjY291bnRcIj48L2JiLWFjdGlvbnMtcHJvZHVjdC1pdGVtLWNhcmQ+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0teGxcIj5cbiAgICAgICAgPGJiLWFjdGlvbnMtYWNjb3VudC1iYWxhbmNlLXJlY2lwZS1mb3JtXG4gICAgICAgICAgKm5nSWY9XCJzcGVjaWZpY2F0aW9uc1dpdGhBY3Rpb25bc3BlY2lmaWNhdGlvbklkcy5BY2NvdW50QmFsYW5jZV0gYXMgc3BlY2lmaWNhdGlvbldpdGhBY3Rpb25cIlxuICAgICAgICAgIFthY2NvdW50XT1cImFjY291bnRcIlxuICAgICAgICAgIFtzcGVjaWZpY2F0aW9uXT1cInNwZWNpZmljYXRpb25XaXRoQWN0aW9uLnNwZWNpZmljYXRpb25cIlxuICAgICAgICAgIFthY3Rpb25SZWNpcGVdPVwic3BlY2lmaWNhdGlvbldpdGhBY3Rpb24uYWN0aW9uUmVjaXBlXCJcbiAgICAgICAgICAoc3VibWl0KT1cImhvc3Qub25TdWJtaXQoJGV2ZW50KVwiXG4gICAgICAgID48L2JiLWFjdGlvbnMtYWNjb3VudC1iYWxhbmNlLXJlY2lwZS1mb3JtPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0teGxcIj5cbiAgICAgICAgPGJiLWFjdGlvbnMtdHJhbnNhY3Rpb25zLXJlY2lwZS1mb3JtXG4gICAgICAgICAgKm5nSWY9XCJzcGVjaWZpY2F0aW9uc1dpdGhBY3Rpb25bc3BlY2lmaWNhdGlvbklkcy5UcmFuc2FjdGlvbnNdIGFzIHNwZWNpZmljYXRpb25XaXRoQWN0aW9uXCJcbiAgICAgICAgICBbc3BlY2lmaWNhdGlvbl09XCJzcGVjaWZpY2F0aW9uV2l0aEFjdGlvbi5zcGVjaWZpY2F0aW9uXCJcbiAgICAgICAgICBbYWN0aW9uUmVjaXBlXT1cInNwZWNpZmljYXRpb25XaXRoQWN0aW9uLmFjdGlvblJlY2lwZVwiXG4gICAgICAgICAgKHN1Ym1pdCk9XCJob3N0Lm9uU3VibWl0KCRldmVudClcIlxuICAgICAgICA+PC9iYi1hY3Rpb25zLXRyYW5zYWN0aW9ucy1yZWNpcGUtZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cblxuICA8bmctdGVtcGxhdGUgI2xvYWRpbmdTdGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGJiLWxvYWRpbmctaW5kaWNhdG9yLXVpXG4gICAgICAgIGNsYXNzPVwiYmItc3RhdGUtY29udGFpbmVyXCJcbiAgICAgICAgbG9hZGVyU2l6ZT1cImxnXCJcbiAgICAgICAgdGV4dD1cIkxvYWRpbmcuLi5cIlxuICAgICAgICBpMThuLXRleHQ9XCJMb2FkaW5nLi4uIHRleHRAQGFjdGlvbnMtcHJvZHVjdC1zZXR0aW5ncy1wYWdlLnRpdGxlXCJcbiAgICAgID48L2JiLWxvYWRpbmctaW5kaWNhdG9yLXVpPlxuICAgIDwvZGl2PlxuICA8L25nLXRlbXBsYXRlPlxuXG4gIDxuZy10ZW1wbGF0ZSAjZXJyb3JTdGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICAgIGNsYXNzPVwiYmItc3RhdGUtY29udGFpbmVyXCJcbiAgICAgICAgZGF0YS1yb2xlPVwiZXJyb3Itc3RhdGVcIlxuICAgICAgICBpY29uU2l6ZT1cInh4bFwiXG4gICAgICAgIGljb25Nb2RpZmllcj1cImVycm9yLW91dGxpbmVcIlxuICAgICAgICB0aXRsZT1cIlVua25vd24gRXJyb3JcIlxuICAgICAgICBpMThuLXRpdGxlPVwiXG4gICAgICAgICAgQWN0aW9ucyBwcm9kdWN0IG5vdGlmaWNhdGlvbnMgc2V0dGluZ3MgYXJlIG5vdCBsb2FkaW5nIHRpdGxlQEBhY3Rpb25zLXByb2R1Y3Qtc2V0dGluZ3MtcGFnZS5lcnJvci1zdGF0ZS50aXRsZVwiXG4gICAgICAgIHN1YnRpdGxlPVwiVHJ5IHRvIHJlbG9hZCB0aGUgcGFnZSBvciBjb250YWN0IHRoZSBzeXN0ZW0gYWRtaW5pc3RyYXRvci5cIlxuICAgICAgICBpMThuLXN1YnRpdGxlPVwiXG4gICAgICAgICAgQWN0aW9ucyBwcm9kdWN0IG5vdGlmaWNhdGlvbnMgc2V0dGluZ3MgYXJlIG5vdCBsb2FkaW5nXG4gICAgICAgICAgc3VidGl0bGVAQGFjdGlvbnMtcHJvZHVjdC1zZXR0aW5ncy1wYWdlLmVycm9yLXN0YXRlLnN1YnRpdGxlXCJcbiAgICAgID5cbiAgICAgIDwvYmItZW1wdHktc3RhdGUtdWk+XG4gICAgPC9kaXY+XG4gIDwvbmctdGVtcGxhdGU+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI2Vycm9yTm90aWZpY2F0aW9uSGVhZGVyPlxuICA8bmctY29udGFpbmVyIGJiQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VFcnJvck5vdGlmaWNhdGlvbkhlYWRlckN1c3RvbWl6YWJsZSBbYmJIb3N0UmVmXT1cInRoaXNcIj4gPC9uZy1jb250YWluZXI+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI2Vycm9yTm90aWZpY2F0aW9uTWVzc2FnZT5cbiAgPG5nLWNvbnRhaW5lciBiYkFjdGlvbnNQcm9kdWN0U2V0dGluZ3NQYWdlRXJyb3JOb3RpZmljYXRpb25NZXNzYWdlQ3VzdG9taXphYmxlIFtiYkhvc3RSZWZdPVwidGhpc1wiPiA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSBiYkFjdGlvbnNQcm9kdWN0U2V0dGluZ3NQYWdlRXJyb3JOb3RpZmljYXRpb25IZWFkZXJDdXN0b21pemFibGU+XG4gIDxzcGFuIGkxOG49XCJDb3VsZG4ndCBzYXZlIGNoYW5nZXNAQGFjdGlvbnMtcHJvZHVjdC1zZXR0aW5ncy1wYWdlLmVycm9yLW5vdGlmaWNhdGlvbi5oZWFkZXJcIlxuICAgID5Db3VsZG4ndCBtYWtlIGNoYW5nZXM8L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlIGJiQWN0aW9uc1Byb2R1Y3RTZXR0aW5nc1BhZ2VFcnJvck5vdGlmaWNhdGlvbk1lc3NhZ2VDdXN0b21pemFibGU+XG4gIDxkaXYgaTE4bj1cIlBsZWFzZSB0cnkgYWdhaW4gbGF0ZXJAQGFjdGlvbnMtcHJvZHVjdC1zZXR0aW5ncy1wYWdlLmVycm9yLW5vdGlmaWNhdGlvbi5tZXNzYWdlXCI+XG4gICAgUGxlYXNlIHRyeSBhZ2FpbiBsYXRlclxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=