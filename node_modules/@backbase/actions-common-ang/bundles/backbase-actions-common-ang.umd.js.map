{"version":3,"file":"backbase-actions-common-ang.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","../../../../libs/actions-common-ang/src/pipes/no-fraction-digits.pipe.ts","../../../../libs/actions-common-ang/src/helpers/time.helper.ts","../../../../libs/actions-common-ang/src/helpers/utils.ts","../../../../libs/actions-common-ang/src/helpers/mappers.ts","../../../../libs/actions-common-ang/src/services/actions-form-builder.service.ts","../../../../libs/actions-common-ang/src/constants/errors.ts","../../../../libs/actions-common-ang/src/services/actions-notifications-settings-data.service.ts","../../../../libs/actions-common-ang/src/components/actions-notification-channels/actions-notification-channels.component.ts","../../../../libs/actions-common-ang/src/components/actions-notification-channels/actions-notification-channels.component.html","../../../../libs/actions-common-ang/src/models/arrangement-based-recipe.model.ts","../../../../libs/actions-common-ang/src/components/switch-with-loading/switch-with-loading.component.ts","../../../../libs/actions-common-ang/src/components/switch-with-loading/switch-with-loading.component.html","../../../../libs/actions-common-ang/src/components/actions-account-balance-recipe-form/actions-account-balance-recipe-form.component.ts","../../../../libs/actions-common-ang/src/components/actions-account-balance-recipe-form/actions-account-balance-recipe-form.component.html","../../../../libs/actions-common-ang/src/components/actions-transactions-recipe-form/actions-transactions-recipe-form.component.ts","../../../../libs/actions-common-ang/src/components/actions-transactions-recipe-form/actions-transactions-recipe-form.component.html","../../../../libs/actions-common-ang/src/models/schedule-notifications.model.ts","../../../../libs/actions-common-ang/src/components/time-picker/time-picker.component.ts","../../../../libs/actions-common-ang/src/components/time-picker/time-picker.component.html","../../../../libs/actions-common-ang/src/components/actions-schedule-notifications/actions-schedule-notifications.component.ts","../../../../libs/actions-common-ang/src/components/actions-schedule-notifications/actions-schedule-notifications.component.html","../../../../libs/actions-common-ang/src/components/actions-toggle-recipe-form/actions-toggle-recipe-form.component.ts","../../../../libs/actions-common-ang/src/components/actions-toggle-recipe-form/actions-toggle-recipe-form.component.html","../../../../libs/actions-common-ang/src/components/time-picker/time-picker.module.ts","../../../../libs/actions-common-ang/src/models/notification-to-specification-id.model.ts","../../../../libs/actions-common-ang/src/services/actions-notifications-preferences-data.service.ts","../../../../libs/actions-common-ang/src/actions-common.module.ts","../../../../libs/actions-common-ang/src/services/notification-preferences-base-data.service.ts","../../../../libs/actions-common-ang/src/helpers/item-model-property.ts","../../../../libs/actions-common-ang/src/models/specification-ids.model.ts","../../../../libs/actions-common-ang/src/models/actions-base-properties-service.model.ts","../../../../libs/actions-common-ang/backbase-actions-common-ang.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'noFractionDigits',\n  pure: true,\n})\nexport class NoFractionDigitsPipe implements PipeTransform {\n  transform(val: string): string {\n    return val ? val.replace(/\\..*/, '') : '';\n  }\n}\n","import { DaysOfWeek, HoursOfDay } from '@backbase/actions-http-ang';\nimport { TimeOption } from '../models/schedule-notifications.model';\n\nconst AM_PM = ['AM', 'PM'];\n\nexport const DAYS_OF_WEEK: DaysOfWeek[] = ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'];\n\nexport function getTimeOptions(\n  startTime: number,\n  minutesStep: number,\n  excludedOptions: number[],\n  amPmFormat: boolean,\n): TimeOption[] {\n  const timeOptions: TimeOption[] = [];\n  let index = 0;\n  while (startTime < 24 * 60) {\n    const hh = Math.floor(startTime / 60);\n    const mm = startTime % 60;\n    if (!excludedOptions.includes(startTime)) {\n      timeOptions[index] = {\n        label: getOptionLabel(hh, mm, amPmFormat),\n        time: startTime,\n      };\n\n      index++;\n    }\n\n    startTime = startTime + minutesStep;\n  }\n\n  return timeOptions;\n}\n\nexport function getHoursOfDay(scheduleTime: number[] = []): HoursOfDay[] {\n  const list = scheduleTime.map(time => String(time / 60)) as HoursOfDay[];\n  if (!list.length) {\n    for (let i = 0; i < 24; i++) {\n      list.push(`${i}` as HoursOfDay);\n    }\n  }\n\n  return list;\n}\n\nexport function hoursToMinutesArray(hours: HoursOfDay[] | undefined): number[] {\n  return hours?.map(hour => Number(hour) * 60) || [];\n}\n\nfunction getOptionLabel(hh: number, mm: number, amPmFormat: boolean): string {\n  const getFormattedTime = (hours = hh, suffix = '') => ('0' + hours).slice(-2) + '.' + ('0' + mm).slice(-2) + suffix;\n\n  return amPmFormat ? getFormattedTime(hh % 12, AM_PM[Math.floor(hh / 12)]) : getFormattedTime();\n}\n","export const firstNonEmptyString: (...args: (string | undefined)[]) => string = (...args) =>\n  args.find(item => !!item) || '';\n\nexport const filterObjectByPropNames = <T>(obj: T, keysToExclude: string[]): T => {\n  const resultObj = { ...obj };\n  keysToExclude.forEach((id: string) => delete (resultObj as { [key: string]: any })[id]);\n\n  return resultObj as T;\n};\n\nexport const isEqualNumberArrays = (arr1: number[], arr2: number[]): boolean => {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  const sortedArr1 = sortNumberArray(arr1);\n  const sortedArr2 = sortNumberArray(arr2);\n\n  return sortedArr1.every((v: number, i: number) => v === sortedArr2[i]);\n};\n\nexport const sortNumberArray = (arr: number[], asc = true): number[] =>\n  arr.slice(0).sort((a, b) => (asc ? a - b : b - a));\n","import {\n  ActionParent,\n  ActionRecipeSpecification,\n  BatchRecipe,\n  Action,\n  Recurrence,\n  HoursOfDay,\n} from '@backbase/data-ang/actions';\nimport { SpecificationsWithAction } from '../models/specifications-with-action.model';\nimport {\n  ActionRecipeChannelsFormValue,\n  ActionRecipeFormItemValue,\n  ActionRecurrenceFormValue,\n} from '../models/action-recipes-form-value.model';\nimport { ActionRecipeItem } from '../models/action-recipe-item.model';\nimport { DAYS_OF_WEEK, getHoursOfDay, hoursToMinutesArray } from './time.helper';\nimport { isEqualNumberArrays } from './utils';\n\nexport const fromHttpResponse = <T>(body: T | null): T => {\n  if (body === null) {\n    throw new Error('Response body not set');\n  }\n\n  return body;\n};\n\nexport const secondsToMilliseconds = (seconds: number) => seconds * 1000;\n\nexport const actionRecipeFormItemToRequest = ({\n  id,\n  name,\n  amount,\n  actions,\n  recurrence,\n  ...restActionRecipe\n}: ActionRecipeFormItemValue): BatchRecipe => ({\n  ...restActionRecipe,\n  ...(id && { id }),\n  ...(name && { name }),\n  amount: amount?.amount || '0',\n  ...(Object.keys(notificationRecurrenceFormValueToRequest(recurrence)).length && {\n    recurrence: notificationRecurrenceFormValueToRequest(recurrence),\n  }),\n  actions: notificationChannelsFormValueToRequest(actions),\n});\n\nexport const parseActionRecipeFormItem = ({\n  id,\n  name,\n  amount,\n  actions,\n  recurrence,\n  ...restActionRecipe\n}: ActionRecipeFormItemValue): ActionRecipeItem => ({\n  ...restActionRecipe,\n  ...(id && { id }),\n  ...(name && { name }),\n  amount: amount.amount || '0',\n  actions: parseNotificationChannelsFormValue(actions),\n  ...(Object.keys(notificationRecurrenceFormValueToRequest(recurrence)).length && {\n    recurrence: notificationRecurrenceFormValueToRequest(recurrence),\n  }),\n});\n\nexport const arrangementActionRecipeToRequest =\n  (arrangementId: string) =>\n  (actionRecipeFormItemValue: ActionRecipeFormItemValue): BatchRecipe => ({\n    arrangementId,\n    ...actionRecipeFormItemToRequest(actionRecipeFormItemValue),\n  });\n\nexport const mergeNotificationChannels = (channels: ActionParent[], defaultChannels: ActionParent[]): Action[] =>\n  channels\n    ? channels.map(channel => ({\n        ...channel,\n        enabled: defaultChannels.some(({ type }) => type === channel.type),\n      }))\n    : [];\n\nexport const mergeSpecificationsWithActionRecipes = (\n  specs: ActionRecipeSpecification[],\n  recipes: ActionRecipeItem[],\n): SpecificationsWithAction =>\n  specs.reduce(\n    (prev, specification) => ({\n      ...prev,\n      [specification.id as string]: {\n        specification,\n        actionRecipe: recipes.find(({ specificationId }) => specificationId === specification.id),\n      },\n    }),\n    {} as SpecificationsWithAction,\n  );\n\nexport const getMappedRecurrenceResponse = (\n  responseRecurrence: Recurrence,\n  { recurrence: cachedRecurrence }: ActionRecipeFormItemValue,\n): Recurrence => ({\n  ...responseRecurrence,\n  hoursOfDay: getCachedHoursOfDay(responseRecurrence, cachedRecurrence),\n});\n\nconst notificationChannelsFormValueToRequest = (channels: ActionRecipeChannelsFormValue): ActionParent[] =>\n  Object.keys(channels)\n    .filter(key => channels[key])\n    .map(type => ({ type }));\n\nconst notificationRecurrenceFormValueToRequest = (rec?: ActionRecurrenceFormValue): Recurrence => ({\n  ...((rec?.scheduleTime.length || 0) !== 0 && { hoursOfDay: getHoursOfDay(rec?.scheduleTime) }),\n  ...((rec?.scheduleTime.length || 0) !== 0 && { daysOfWeek: rec?.daysOfWeek || DAYS_OF_WEEK }),\n});\n\nconst parseNotificationChannelsFormValue = (channels: ActionRecipeChannelsFormValue): Action[] =>\n  Object.keys(channels).map(type => ({\n    type,\n    enabled: channels[type],\n  }));\n\nconst getCachedHoursOfDay = (\n  responseRecurrence: Recurrence,\n  cachedRecurrence: ActionRecurrenceFormValue | undefined,\n): HoursOfDay[] | undefined => {\n  if (!cachedRecurrence?.scheduleTime) {\n    return responseRecurrence.hoursOfDay;\n  }\n  if (\n    !isEqualNumberArrays(cachedRecurrence.scheduleTime.slice(0), hoursToMinutesArray(responseRecurrence.hoursOfDay))\n  ) {\n    return responseRecurrence.hoursOfDay;\n  }\n\n  return cachedRecurrence.scheduleTime.map(minutes => String(minutes / 60)) as HoursOfDay[];\n};\n","import { Injectable } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup } from '@angular/forms';\nimport {\n  ActionParent,\n  Action,\n  ActionRecipeGetResponseBody,\n  ActionRecipeSpecification,\n  Recurrence,\n} from '@backbase/data-ang/actions';\nimport {\n  ActionRecipeChannelsFormValue,\n  ActionRecipeFormItemValue,\n  ActionRecurrenceFormValue,\n} from '../models/action-recipes-form-value.model';\nimport { mergeNotificationChannels } from '../helpers/mappers';\nimport { AccountArrangementItem } from '@backbase/data-ang/arrangements';\nimport { hoursToMinutesArray } from '../helpers/time.helper';\n\ninterface DefaultActionRecipe extends Pick<ActionRecipeGetResponseBody, 'actions' | 'active' | 'specificationId'> {\n  id: string | null;\n  name: string | null;\n  amount: string;\n  recurrence?: Recurrence;\n}\n\n@Injectable()\nexport class ActionsFormBuilderService {\n  constructor(private readonly fb: FormBuilder) {}\n\n  /**\n   * Method to build action recipe form group.\n   *\n   * @param specification - acton recipe specification\n   * @param actionRecipe - action recipe\n   * @param account - account data\n   * @returns prefilled form object\n   */\n  buildActionRecipeFormGroup(\n    specification: ActionRecipeSpecification,\n    actionRecipe?: ActionRecipeGetResponseBody,\n    account?: AccountArrangementItem,\n  ): FormGroup {\n    const actionRecipeFormValue = this.buildActionRecipeFormValue(specification, actionRecipe, account);\n\n    return this.fb.group({\n      ...actionRecipeFormValue,\n      actions: this.fb.group(actionRecipeFormValue.actions),\n      recurrence: this.buildScheduleNotificationsFormGroup(actionRecipe),\n    });\n  }\n\n  /**\n   * Method to build action recipe form value.\n   *\n   * @param specification - acton recipe specification\n   * @param actionRecipe - action recipe\n   * @param account - account data\n   * @returns action recipe form value object\n   */\n  buildActionRecipeFormValue(\n    specification: ActionRecipeSpecification,\n    actionRecipe?: ActionRecipeGetResponseBody,\n    account?: AccountArrangementItem,\n  ): ActionRecipeFormItemValue {\n    const { actions, amount, active, recurrence, id, specificationId, name } =\n      actionRecipe || this.getDefaultActionRecipe(specification);\n\n    return {\n      id,\n      // tslint:disable-next-line:no-null-keyword\n      name: name || null,\n      specificationId,\n      active,\n      recurrence: this.buildRecurrenceFormItem(recurrence),\n      amount: {\n        amount,\n        currency: account ? account.currency : {},\n      } as { amount: string; currency: string | object },\n      actions: this.buildChannelsFormValue(actions),\n      ...(specification.recipeDefaults?.additions && { additions: { ...specification.recipeDefaults?.additions } }),\n    };\n  }\n\n  /**\n   * Method to build schedule notificatons form group.\n   *\n   * @param actionRecipe - action recipe\n   * @returns prefilled form object\n   */\n  buildScheduleNotificationsFormGroup(actionRecipe?: ActionRecipeGetResponseBody): FormGroup {\n    return this.fb.group({\n      scheduleTime: this.getTimeOptions(actionRecipe),\n    });\n  }\n\n  private getDefaultActionRecipe(specification: ActionRecipeSpecification): DefaultActionRecipe {\n    return {\n      // tslint:disable-next-line:no-null-keyword\n      id: null,\n      // tslint:disable-next-line:no-null-keyword\n      name: specification.name || null,\n      specificationId: specification.id as string,\n      amount: (specification.recipeDefaults && specification.recipeDefaults.amount) || '0',\n      active: false,\n      actions: mergeNotificationChannels(\n        specification.actions as ActionParent[],\n        (specification.recipeDefaults && specification.recipeDefaults.actions) || [],\n      ),\n    };\n  }\n\n  private buildChannelsFormValue(channels: Action[]): ActionRecipeChannelsFormValue {\n    return channels.reduce(\n      (previous, current) => ({\n        ...previous,\n        [current.type]: current.enabled,\n      }),\n      {},\n    );\n  }\n\n  private buildRecurrenceFormItem(recurrence: Recurrence | undefined): ActionRecurrenceFormValue {\n    return {\n      scheduleTime: hoursToMinutesArray(recurrence?.hoursOfDay),\n      ...(recurrence?.daysOfWeek && { daysOfWeek: recurrence?.daysOfWeek }),\n    };\n  }\n\n  private getTimeOptions(recipe?: ActionRecipeGetResponseBody): FormArray {\n    const mappedHours = recipe?.recurrence?.hoursOfDay?.map(option => this.fb.control(Number(option) * 60)) || [];\n\n    return this.fb.array(mappedHours?.length !== 24 ? mappedHours : []);\n  }\n}\n","export const EMPTY_RESPONSE_ERROR = new Error('Response data is empty');\n","import { Injectable } from '@angular/core';\nimport {\n  ActionRecipe,\n  ActionRecipeSpecification,\n  ActionRecipeSpecificationsHttpService,\n  ActionRecipesHttpService,\n  BatchProcessingPutResponseBody,\n} from '@backbase/data-ang/actions';\nimport { Observable, of, throwError } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { EMPTY_RESPONSE_ERROR } from '../constants/errors';\nimport { actionRecipeFormItemToRequest, arrangementActionRecipeToRequest, fromHttpResponse } from '../helpers/mappers';\nimport { ActionRecipeFormItemValue } from '../models/action-recipes-form-value.model';\nimport { NotificationsPreferencesBaseDataService } from './notification-preferences-base-data.service';\n\nexport const ACTION_RECIPES_LIMIT = 999999;\n\n@Injectable()\nexport class ActionsNotificationsSettingsDataService implements NotificationsPreferencesBaseDataService {\n  constructor(\n    private readonly dataHttpService: ActionRecipesHttpService,\n    private readonly actionSpecificationsService: ActionRecipeSpecificationsHttpService,\n  ) {}\n\n  /**\n   * Method to get action recipes.\n   *\n   * @param params - params object\n   * @returns action recipe array\n   */\n  getActionRecipes(params = {}): Observable<ActionRecipe[]> {\n    const requestParams = {\n      limit: ACTION_RECIPES_LIMIT,\n      ...params,\n    };\n\n    return this.dataHttpService.getActionRecipes(requestParams).pipe(\n      map(fromHttpResponse),\n      map(response => response.actionRecipes),\n    );\n  }\n\n  /**\n   * Method to get action recipe specifications.\n   *\n   * @returns action recipe specifications\n   */\n  getSpecifications(): Observable<ActionRecipeSpecification[]> {\n    return this.actionSpecificationsService.getActionRecipeSpecifications({}).pipe(\n      map(fromHttpResponse),\n      map(response => response.actionRecipeSpecifications || []),\n    );\n  }\n\n  /**\n   * Method to save action recipe.\n   *\n   * @param action - recipe form value\n   * @param arrangementId - arrangement ID\n   * @returns batch processing response\n   */\n  saveActionRecipe(\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n    arrangementId?: string,\n  ): Observable<BatchProcessingPutResponseBody> {\n    const recipeToRequest = arrangementId\n      ? arrangementActionRecipeToRequest(arrangementId)\n      : actionRecipeFormItemToRequest;\n    const batchProcessingPutRequestBody = { actionRecipes: [recipeToRequest(actionRecipeFormItem)] };\n\n    return this.dataHttpService\n      .putBatchProcessing({ batchProcessingPutRequestBody })\n      .pipe(switchMap(body => (body ? of(body) : throwError(EMPTY_RESPONSE_ERROR))));\n  }\n}\n","import { AfterContentInit, ChangeDetectionStrategy, Component, Directive, Input } from '@angular/core';\nimport { ControlContainer, FormGroup } from '@angular/forms';\nimport { SpecificationAction } from '@backbase/data-ang/actions';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\n\n@Component({\n  selector: 'bb-actions-notification-channels',\n  templateUrl: './actions-notification-channels.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ActionsNotificationChannelsComponent implements AfterContentInit {\n  static idCounter = 0;\n\n  /**\n   * Action notification channels IDs.\n   */\n  readonly id = `bb-actions-notification-channels-${ActionsNotificationChannelsComponent.idCounter++}`;\n\n  /**\n   * Actions map setter.\n   */\n  @Input() set actions(value: SpecificationAction[]) {\n    this.actionsMap = new Map(value.map(action => [action.type, action]));\n  }\n\n  /**\n   * Actions map.\n   */\n  actionsMap: Map<SpecificationAction['type'], SpecificationAction> = new Map();\n\n  /**\n   * Notification channels settings form.\n   */\n  formGroup?: FormGroup;\n\n  constructor(private readonly controlContainer: ControlContainer) {}\n\n  ngAfterContentInit() {\n    this.formGroup = this.controlContainer.control as FormGroup;\n  }\n}\n\n@Directive({\n  selector: '[bbActionsNotificationChannelsCustomizableDirective]',\n})\nexport class ActionsNotificationChannelsCustomizableDirective extends BbTemplate<\n  ActionsNotificationChannelsComponent,\n  {\n    actionsMap: Map<SpecificationAction['type'], SpecificationAction>;\n  }\n> {}\n","<ng-container\n  bbActionsNotificationChannelsCustomizableDirective\n  [bbHostRef]=\"this\"\n  [bbTemplateContext]=\"{\n    actionsMap: actionsMap\n  }\"\n></ng-container>\n\n<ng-template bbActionsNotificationChannelsCustomizableDirective let-hostRef let-actionsMap=\"context.actionsMap\">\n  <label class=\"bb-label bb-stack\" *ngIf=\"actionsMap.has('sms') || actionsMap.has('email')\">\n    <span\n      class=\"bb-stack__item bb-stack__item--spacing-sm\"\n      i18n=\"Title for notification channels@@actions-common.notification-channels.title\"\n      data-role=\"channel-title\"\n      >Additional channels</span\n    >\n    <bb-icon-ui\n      class=\"bb-stack__item\"\n      tabindex=\"0\"\n      name=\"info\"\n      size=\"sm\"\n      data-role=\"channel-title-icon\"\n      triggers=\"hover focus\"\n      aria-label=\"Other channels that you would like to receive notifications through, additionally to the ones in-app\"\n      i18n-aria-label=\"\n        Channels that you would like to receive notifications through@@actions-common.notification-channels.others\"\n      bbTooltip=\"Other channels that you would like to receive notifications through, additionally to the ones in-app\"\n      i18n-bbTooltip=\"@@actions-common.notification-channels.others\"\n    ></bb-icon-ui>\n  </label>\n  <div [formGroup]=\"hostRef.formGroup\">\n    <div *ngIf=\"actionsMap.has('sms')\" class=\"bb-block bb-block--sm\">\n      <bb-input-checkbox-ui\n        label=\"SMS\"\n        i18n-label=\"Label for sms channel checkbox@@actions-common.notification-channels.sms.label\"\n        formControlName=\"sms\"\n        data-role=\"sms-checkbox\"\n      ></bb-input-checkbox-ui>\n    </div>\n\n    <div *ngIf=\"actionsMap.has('email')\" class=\"bb-block bb-block--sm\">\n      <bb-input-checkbox-ui\n        label=\"Email\"\n        i18n-label=\"Label for email channel checkbox@@actions-common.notification-channels.email.label\"\n        formControlName=\"email\"\n        data-role=\"email-checkbox\"\n      ></bb-input-checkbox-ui>\n    </div>\n  </div>\n</ng-template>\n","import { EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, Directive } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport {\n  ActionRecipeGetResponseBody,\n  ActionRecipeSpecification,\n  SpecificationAction,\n} from '@backbase/data-ang/actions';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ActionsFormBuilderService } from '../services/actions-form-builder.service';\nimport { AccountArrangementItem } from '@backbase/data-ang/arrangements';\nimport { ActionRecipeFormItemValue } from './action-recipes-form-value.model';\n\n@Directive()\n// tslint:disable-next-line:directive-class-suffix\nexport abstract class ArrangementBasedRecipeModel implements OnInit, OnChanges, OnDestroy {\n  /**\n   * Account data.\n   */\n  @Input() account?: AccountArrangementItem;\n\n  /**\n   * Action recipe data.\n   */\n  @Input() actionRecipe?: ActionRecipeGetResponseBody;\n\n  /**\n   * Specification setter.\n   */\n  @Input()\n  set specification(specification: ActionRecipeSpecification) {\n    this.specificationValue = specification;\n    this.specificationActions = specification.actions || [];\n  }\n\n  /**\n   * Specification getter.\n   */\n  get specification(): ActionRecipeSpecification {\n    return this.specificationValue as ActionRecipeSpecification;\n  }\n\n  /**\n   * Specification value.\n   */\n  specificationValue?: ActionRecipeSpecification;\n\n  /**\n   * On submit event emitter.\n   */\n  @Output() submit = new EventEmitter<ActionRecipeFormItemValue>();\n\n  /**\n   * Specifications with actions.\n   */\n  specificationActions: SpecificationAction[] = [];\n\n  /**\n   * Account data.\n   */\n  formGroup?: FormGroup;\n\n  /**\n   * Loading flag.\n   */\n  isLoading = false;\n\n  private readonly destroy$ = new Subject<void>();\n\n  /**\n   * Method to check if card form control is expanded.\n   *\n   * @returns boolean value\n   */\n  get isCardExpanded(): boolean {\n    const activeControl = this.formGroup && this.formGroup.get('active');\n\n    return activeControl && activeControl.value && !this.isLoading;\n  }\n\n  protected constructor(private readonly actionsFormBuilderService: ActionsFormBuilderService) {}\n\n  ngOnInit(): void {\n    this.formGroup = this.actionsFormBuilderService.buildActionRecipeFormGroup(\n      this.specification,\n      this.actionRecipe,\n      this.account,\n    );\n    this.formGroup.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {\n      this.onSubmit(value);\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { actionRecipe } = changes;\n    if (this.formGroup && actionRecipe && actionRecipe.previousValue !== actionRecipe.currentValue) {\n      this.formGroup.patchValue(\n        this.actionsFormBuilderService.buildActionRecipeFormValue(this.specification, this.actionRecipe, this.account),\n        {\n          emitEvent: false,\n        },\n      );\n      this.isLoading = false;\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  /**\n   * Method to submit action recipe form.\n   *\n   * @param formValue - action recipe form value\n   */\n  onSubmit(formValue: ActionRecipeFormItemValue) {\n    this.submit.emit(formValue);\n  }\n\n  /**\n   * Method to set loading flag to true.\n   */\n  onActiveLoadingChange() {\n    this.isLoading = true;\n  }\n}\n","import { Component, forwardRef, Input } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Component({\n  selector: 'bb-switch-with-loading',\n  templateUrl: './switch-with-loading.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => SwitchWithLoadingComponent),\n      multi: true,\n    },\n  ],\n})\nexport class SwitchWithLoadingComponent implements ControlValueAccessor {\n  /**\n   * Loading indicator presentation marker.\n   */\n  @Input() isLoading = false;\n\n  /**\n   * aria-label attribute text.\n   */\n  @Input('aria-label') ariaLabel?: string;\n\n  private _value!: boolean;\n\n  /**\n   * ControlValueAccessor on change handler.\n   */\n  onChange: Function = () => {};\n\n  /**\n   * ControlValueAccessor on touch handler.\n   */\n  onTouch: Function = () => {};\n\n  /**\n   * ControlValueAccessor value setter.\n   */\n  set value(val: boolean) {\n    this._value = val;\n    this.onChange(val);\n    this.onTouch(val);\n  }\n\n  /**\n   * ControlValueAccessor value getter.\n   */\n  get value(): boolean {\n    return this._value;\n  }\n\n  /**\n   * Method from ControlValueAccessor to write a new value to the element.\n   *\n   * @param value - new value\n   */\n  writeValue(value: boolean) {\n    this._value = value;\n  }\n\n  /**\n   * Method from ControlValueAccessor to register on change handler.\n   *\n   * @param fn - on change handler function\n   */\n  registerOnChange(fn: Function) {\n    this.onChange = fn;\n  }\n\n  /**\n   * Method from ControlValueAccessor to register on touched handler.\n   *\n   * @param fn - on touched handler function\n   */\n  registerOnTouched(fn: Function) {\n    this.onTouch = fn;\n  }\n}\n","<bb-switch-ui\n  [aria-label]=\"ariaLabel\"\n  [(ngModel)]=\"value\"\n  (blur)=\"onTouch()\"\n  *ngIf=\"!isLoading; else loadingIndicator\"\n></bb-switch-ui>\n<ng-template #loadingIndicator>\n  <div class=\"bb-loading-indicator bb-loading-indicator--sm\" data-role=\"loading-indicator\">\n    <svg aria-label=\"Loading indicator\" class=\"bb-loading-indicator__circle\" preserveAspectRatio=\"xMinYMin meet\">\n      <circle class=\"bb-loading-indicator__path\" cx=\"50%\" cy=\"50%\" fill=\"none\" r=\"40%\" stroke=\"currentColor\"></circle>\n    </svg>\n  </div>\n</ng-template>\n","import { ChangeDetectionStrategy, Component, Directive } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ActionsFormBuilderService } from '../../services/actions-form-builder.service';\nimport { ArrangementBasedRecipeModel } from '../../models/arrangement-based-recipe.model';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\n\n@Component({\n  selector: 'bb-actions-account-balance-recipe-form',\n  templateUrl: './actions-account-balance-recipe-form.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ActionsAccountBalanceRecipeFormComponent extends ArrangementBasedRecipeModel {\n  static idCounter = 0;\n\n  /**\n   * Account balance action recipe ID.\n   */\n  readonly id = `bb-actions-account-balance-recipe-form-${ActionsAccountBalanceRecipeFormComponent.idCounter++}`;\n\n  constructor(actionsFormBuilderService: ActionsFormBuilderService) {\n    super(actionsFormBuilderService);\n  }\n\n  /**\n   * Method to patch the form with the amount and currency.\n   *\n   * @param amount - amount input value\n   */\n  onInlineEditAccept(amount: string) {\n    if (this.formGroup) {\n      const amountControl = this.formGroup.get('amount');\n      if (amountControl) {\n        amountControl.patchValue({\n          amount: amount || '0',\n          currency: amountControl.value.currency,\n        });\n      }\n    }\n  }\n}\n\n@Directive({\n  selector: '[bbActionsAccountBalanceRecipeCustomizableDirective]',\n})\nexport class ActionsAccountBalanceRecipeCustomizableDirective extends BbTemplate<\n  ActionsAccountBalanceRecipeFormComponent,\n  {\n    formGroup: FormGroup;\n  }\n> {}\n","<ng-container\n  bbActionsAccountBalanceRecipeCustomizableDirective\n  [bbHostRef]=\"this\"\n  [bbTemplateContext]=\"{\n    formGroup: formGroup,\n    isLoading: isLoading\n  }\"\n></ng-container>\n\n<ng-template\n  bbActionsAccountBalanceRecipeCustomizableDirective\n  let-hostRef\n  let-formGroup=\"context.formGroup\"\n  let-isLoading=\"context.isLoading\"\n>\n  <form [formGroup]=\"formGroup\">\n    <bb-collapsible-ui class=\"card\" [isOpen]=\"hostRef.isCardExpanded\">\n      <ng-template bbCollapsibleHeader>\n        <div [ngClass]=\"hostRef.isCardExpanded ? 'card-header' : 'card-body'\">\n          <div class=\"bb-stack\">\n            <bb-header-ui\n              class=\"bb-stack__item\"\n              headingType=\"h5\"\n              heading=\"Balance\"\n              i18n-heading=\"Account balance recipe heading@@actions-common.account-balance-recipe.heading\"\n              data-role=\"balance-header\"\n            ></bb-header-ui>\n            <bb-switch-with-loading\n              [isLoading]=\"isLoading\"\n              (change)=\"hostRef.onActiveLoadingChange()\"\n              formControlName=\"active\"\n              class=\"bb-stack__item bb-stack__item--push-right\"\n              aria-label=\"Enable and expand account balance notifications\"\n              i18n-aria-label=\"\n                Account balance switcher aria label@@actions-common.account-balance-recipe.switcher.aria-label\"\n              data-role=\"balance-switcher\"\n            ></bb-switch-with-loading>\n          </div>\n          <div\n            class=\"bb-text-support\"\n            i18n=\"Account balance subheading@@actions-common.account-balance-recipe.subheading\"\n            data-role=\"balance-sub-header\"\n          >\n            Receive notifications when your balance is lower than a selected amount\n          </div>\n        </div>\n      </ng-template>\n      <ng-template bbCollapsibleBody>\n        <div class=\"card-body\">\n          <label\n            id=\"currency-input-label\"\n            class=\"bb-label\"\n            i18n=\"Lower than input label@@actions-common.account-balance-recipe.lower-than-input\"\n            >Lower than\n          </label>\n          <div class=\"row\">\n            <div class=\"col-sm-6 col-12 bb-block bb-block--md\">\n              <ng-template #amountTemplate>\n                <bb-amount-ui\n                  class=\"bb-highlight\"\n                  [amount]=\"formGroup.get('amount').value.amount\"\n                  [currency]=\"account?.currency\"\n                ></bb-amount-ui>\n              </ng-template>\n              <bb-input-inline-edit-ui\n                pattern=\"-?\\d{1,18}\"\n                (accept)=\"hostRef.onInlineEditAccept($event)\"\n                [inputText]=\"formGroup.get('amount').value.amount | noFractionDigits\"\n                [inputInlineTemplate]=\"amountTemplate\"\n                data-role=\"balance-input\"\n                i18n-ariaLabelEdit=\"\n                  Edit amount without\n                  fractions@@actions-common.account-balance-recipe.edit-amount-without-fractions-button\"\n                ariaLabelEdit=\"Edit amount without fractions\"\n              ></bb-input-inline-edit-ui>\n            </div>\n          </div>\n          <bb-actions-notification-channels\n            formGroupName=\"actions\"\n            [actions]=\"hostRef.specificationActions\"\n          ></bb-actions-notification-channels>\n        </div>\n      </ng-template>\n    </bb-collapsible-ui>\n  </form>\n</ng-template>\n","import { ChangeDetectionStrategy, Component, Directive } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\nimport { ActionsFormBuilderService } from '../../services/actions-form-builder.service';\nimport { ArrangementBasedRecipeModel } from '../../models/arrangement-based-recipe.model';\n\n@Component({\n  //TODO: remove first selector in 3.8.0\n  selector: 'bb-actions-transactions-recipe-form',\n  templateUrl: './actions-transactions-recipe-form.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ActionsTransactionsRecipeFormComponent extends ArrangementBasedRecipeModel {\n  constructor(actionsFormBuilderService: ActionsFormBuilderService) {\n    super(actionsFormBuilderService);\n  }\n}\n\n@Directive({\n  selector: '[bbActionsTransactionsRecipeCustomizableDirective]',\n})\nexport class ActionsTransactionsRecipeCustomizableDirective extends BbTemplate<\n  ActionsTransactionsRecipeFormComponent,\n  {\n    formGroup: FormGroup;\n  }\n> {}\n","<ng-container\n  bbActionsTransactionsRecipeCustomizableDirective\n  [bbHostRef]=\"this\"\n  [bbTemplateContext]=\"{\n    formGroup: formGroup,\n    isLoading: isLoading\n  }\"\n></ng-container>\n\n<ng-template\n  bbActionsTransactionsRecipeCustomizableDirective\n  let-hostRef\n  let-formGroup=\"context.formGroup\"\n  let-isLoading=\"context.isLoading\"\n>\n  <form [formGroup]=\"formGroup\">\n    <bb-collapsible-ui class=\"card\" [isOpen]=\"hostRef.isCardExpanded\">\n      <ng-template bbCollapsibleHeader>\n        <div [ngClass]=\"hostRef.isCardExpanded ? 'card-header' : 'card-body'\" data-role=\"collapsible-header\">\n          <div class=\"bb-stack\">\n            <bb-header-ui\n              class=\"bb-stack__item\"\n              headingType=\"h5\"\n              heading=\"Debits and credits\"\n              i18n-heading=\"Debits and credits recipe heading@@actions-common.transactions-recipe.heading\"\n              data-role=\"transactions-recipe-header\"\n            ></bb-header-ui>\n            <bb-switch-with-loading\n              [isLoading]=\"isLoading\"\n              (change)=\"hostRef.onActiveLoadingChange()\"\n              formControlName=\"active\"\n              class=\"bb-stack__item bb-stack__item--push-right\"\n              aria-label=\"Enable and expand debits and credits notifications\"\n              i18n-aria-label=\"\n                Debits and credits switcher aria label@@actions-common.transactions-recipe.switcher.aria-label\"\n              data-role=\"transactions-recipe-switcher\"\n            ></bb-switch-with-loading>\n          </div>\n          <div\n            class=\"bb-text-support\"\n            i18n=\"Debits and credits subheading@@actions-common.transactions-recipe.subheading\"\n            data-role=\"transactions-recipe-sub-header\"\n          >\n            Receive notification when an amount is debited or credited from your account\n          </div>\n        </div>\n      </ng-template>\n      <ng-template bbCollapsibleBody>\n        <div class=\"card-body\">\n          <bb-actions-notification-channels\n            formGroupName=\"actions\"\n            [actions]=\"hostRef.specificationActions\"\n          ></bb-actions-notification-channels>\n        </div>\n      </ng-template>\n    </bb-collapsible-ui>\n  </form>\n</ng-template>\n","export interface TimeOption {\n  label: string;\n  time: number;\n}\n\nexport type MinutesStep = 5 | 10 | 15 | 30 | 60;\nexport const MinutesInDay = 1440;\n\nexport enum ScheduleType {\n  RightAway = 'RightAway',\n  Custom = 'Custom',\n}\n\nexport const ScheduleDescriptionText: Record<ScheduleType, string> = {\n  // TODO: use in component template once localize pipe will be available\n  RightAway: 'Notifications will be sent immediately.',\n  Custom: 'Notifications will be grouped and sent at specified time.',\n};\n\nexport const DefaultTime = 480;\nexport const MaxOptionsQuantity = 4;\n","import { ChangeDetectionStrategy, Component, forwardRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ControlValueAccessor, FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { getTimeOptions } from '../../helpers/time.helper';\nimport { MinutesStep, TimeOption } from '../../models/schedule-notifications.model';\n\n@Component({\n  selector: 'bb-time-picker',\n  templateUrl: './time-picker.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TimePickerComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TimePickerComponent implements OnInit, OnDestroy, ControlValueAccessor {\n  timeOptions: TimeOption[] = [];\n  private readonly excludedOptions$$ = new BehaviorSubject<number[]>([]);\n  private readonly componentDestroyed$ = new Subject<boolean>();\n\n  /**\n   * Start time\n   */\n  @Input() startTime = 0;\n\n  /**\n   * Step on minutes for time options\n   */\n  @Input() minutesStep: MinutesStep = 60;\n\n  /**\n   * Time format\n   */\n  @Input() amPmFormat!: false;\n\n  /**\n   * Options to exclude\n   */\n  @Input() set excludedOptions(options: number[]) {\n    this.excludedOptions$$.next(options || []);\n  }\n\n  /**\n   * Form control reference\n   */\n  @Input() controlRef!: FormControl;\n\n  /**\n   * Input's label\n   */\n  @Input() label: string | undefined;\n\n  /**\n   * Time form control\n   */\n  readonly timeControl = new FormControl();\n\n  ngOnInit() {\n    this.onExcludedOptionsChange();\n    this.onFormValueChange();\n  }\n\n  private onExcludedOptionsChange() {\n    this.excludedOptions$$.pipe(takeUntil(this.componentDestroyed$)).subscribe(options => {\n      const timeControlValue = this.timeControl.value?.time || this.controlRef?.value;\n      const excludedOptions =\n        timeControlValue || timeControlValue === 0 ? options.filter(option => option !== timeControlValue) : [];\n      this.timeOptions = getTimeOptions(this.startTime, this.minutesStep, excludedOptions, this.amPmFormat);\n      const selection = this.timeOptions.find(option => option.time === timeControlValue);\n      this.timeControl.setValue(selection);\n    });\n  }\n\n  private onFormValueChange() {\n    this.timeControl.valueChanges.pipe(takeUntil(this.componentDestroyed$)).subscribe(value => {\n      if (value) {\n        this.onChange(value.time);\n      }\n    });\n  }\n\n  /**\n   * Change event handler\n   */\n  onChange = (_time: number) => {}; // NOSONAR\n\n  /**\n   * Touched event handler\n   */\n  onTouched = () => {}; // NOSONAR\n\n  /**\n   * Method to register change event handler\n   *\n   * @param fn\n   */\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n\n  /**\n   * Method to register touched event handler\n   *\n   * @param fn\n   */\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n\n  /**\n   * Method to write initial value to the input\n   *\n   * @param time\n   */\n  writeValue(time: number) {\n    this.timeControl.setValue(this.timeOptions.find(ts => ts.time === time));\n  }\n\n  markAsTouched(event: Event) {\n    const target = event.target as HTMLTextAreaElement;\n    target.blur();\n    this.onTouched();\n  }\n\n  ngOnDestroy() {\n    this.componentDestroyed$.next(true);\n  }\n}\n","<bb-dropdown-single-select-ui\n  iconName=\"caret-down\"\n  [options]=\"timeOptions\"\n  [label]=\"label\"\n  (change)=\"markAsTouched($event)\"\n  [formControl]=\"timeControl\"\n  displayAttributePath=\"label\"\n  data-role=\"time-picker-dropdown\"\n>\n</bb-dropdown-single-select-ui>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Directive,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup } from '@angular/forms';\nimport { ActionRecipeGetResponseBody } from '@backbase/actions-http-ang';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\nimport { Observable, of, Subject } from 'rxjs';\nimport { distinctUntilChanged, filter, takeUntil, tap } from 'rxjs/operators';\nimport {\n  DefaultTime,\n  MaxOptionsQuantity,\n  MinutesStep,\n  ScheduleType,\n  MinutesInDay,\n} from '../../models/schedule-notifications.model';\n\n@Component({\n  selector: 'bb-actions-schedule-notifications',\n  templateUrl: './actions-schedule-notifications.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ActionsScheduleNotificationsComponent implements OnInit, OnDestroy {\n  /**\n   * Selected schedule type\n   */\n  scheduleType!: ScheduleType;\n\n  /**\n   * Schedule type enum\n   */\n  readonly ScheduleType = ScheduleType;\n\n  /**\n   * Maximum options quantity\n   */\n  readonly MaxOptionsQuantity = MaxOptionsQuantity;\n\n  /**\n   * Stream of selected options\n   */\n  selectedTimeOptions$: Observable<number[]> = of([]);\n  selectedTimeOptions: number[] = [];\n  private readonly destroy$ = new Subject<void>();\n\n  /**\n   * Action recipe.\n   */\n  @Input() actionRecipe!: ActionRecipeGetResponseBody;\n\n  /**\n   * Schedule form group.\n   */\n  @Input() scheduleForm!: FormGroup;\n\n  /**\n   * Minutes step in time options list.\n   */\n  @Input() minutesStep: MinutesStep = 60;\n\n  /**\n   * Schedule form submit output.\n   */\n  @Output() readonly submit = new EventEmitter<FormGroup>();\n\n  constructor(private readonly fb: FormBuilder) {}\n\n  ngOnInit() {\n    this.scheduleType = this.getScheduleType(this.actionRecipe);\n    this.onScheduleFormChange();\n  }\n\n  onScheduleTypeChange(event: Event) {\n    const target = event.target as HTMLTextAreaElement;\n    if (this.scheduleType === this.ScheduleType.RightAway) {\n      this.resetScheduleForm();\n    } else if (this.scheduleType === this.ScheduleType.Custom) {\n      this.addTimeOption();\n    }\n    target.blur();\n  }\n\n  addTimeOption() {\n    this.scheduleTime.push(this.fb.control(this.defaultTime));\n    this.submitScheduleForm();\n  }\n\n  deleteTimeOption(index: number) {\n    this.scheduleTime.removeAt(index);\n    this.submitScheduleForm();\n  }\n\n  timeControlChange() {\n    this.submitScheduleForm();\n  }\n\n  private onScheduleFormChange() {\n    this.selectedTimeOptions$ = this.scheduleForm.controls.scheduleTime.valueChanges.pipe(\n      filter(val => val),\n      tap(val => (this.selectedTimeOptions = val)),\n      distinctUntilChanged(),\n      takeUntil(this.destroy$),\n    );\n  }\n\n  private submitScheduleForm() {\n    this.submit.emit(this.scheduleForm);\n  }\n\n  private getScheduleType(recipe: ActionRecipeGetResponseBody): ScheduleType {\n    const hoursOfDayQuantity = recipe.recurrence?.hoursOfDay?.length || 0;\n    const hoursScheduleApplied = hoursOfDayQuantity !== 0 && hoursOfDayQuantity !== 24;\n\n    if (!hoursScheduleApplied) {\n      return ScheduleType.RightAway;\n    }\n\n    return ScheduleType.Custom;\n  }\n\n  private resetScheduleForm() {\n    this.scheduleTime.clear();\n    this.submitScheduleForm();\n  }\n\n  /**\n   * Getter for repeat count control\n   */\n  get scheduleTime(): FormArray {\n    return this.scheduleForm.get('scheduleTime') as FormArray;\n  }\n\n  /**\n   * Getter for default time which returns 08:00 for the first option and +1 hour for subsequent\n   */\n  private get defaultTime(): number {\n    const lastSelectedTimeOption = this.lastSelectedTimeOption;\n    let defaultTime = lastSelectedTimeOption + this.minutesStep;\n    if (!lastSelectedTimeOption && lastSelectedTimeOption !== 0) {\n      return DefaultTime;\n    }\n    if (defaultTime === MinutesInDay) {\n      defaultTime = 0;\n    }\n    while (this.selectedTimeOptions.includes(defaultTime)) {\n      if (defaultTime === MinutesInDay) {\n        defaultTime = 0;\n      } else {\n        defaultTime = defaultTime + 60;\n      }\n    }\n\n    return defaultTime;\n  }\n\n  /**\n   * Getter for last added time option\n   */\n  private get lastSelectedTimeOption(): number {\n    return this.scheduleTime.controls[this.scheduleTime.controls.length - 1]?.value;\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n\n@Directive({\n  selector: '[bbActionsScheduleNotificationsComponentCustomizableDirective]',\n})\nexport class ActionsScheduleNotificationsComponentCustomizableDirective extends BbTemplate<\n  ActionsScheduleNotificationsComponent,\n  void\n> {}\n","<ng-container bbActionsScheduleNotificationsComponentCustomizableDirective [bbHostRef]=\"this\"> </ng-container>\n<ng-template bbActionsScheduleNotificationsComponentCustomizableDirective let-hostRef>\n  <div class=\"row bb-block bb-block--md bb-stack bb-stack--align-baseline\">\n    <div class=\"col-3\">\n      <span i18n=\"Notify me label@@actions-common.actions-schedule-notifications.title\"> Notify me </span>\n    </div>\n    <div class=\"col-3\">\n      <bb-dropdown-single-select-ui\n        iconName=\"caret-down\"\n        [required]=\"true\"\n        [(ngModel)]=\"hostRef.scheduleType\"\n        (change)=\"hostRef.onScheduleTypeChange($event)\"\n        aria-label=\"Schedule type\"\n        i18n-aria-label=\"\n          Schedule type dropdown@@actions-common.actions-schedule-notifications.schedule-type-dropdown.aria-label\"\n        data-role=\"notifications-schedule-type\"\n      >\n        <bb-dropdown-single-select-option-ui\n          i18n-label=\"\n            Schedule type dropdown right away\n            option@@actions-common.actions-schedule-notifications.schedule-type-right-away-option.label\"\n          label=\"Right away\"\n          [value]=\"hostRef.ScheduleType.RightAway\"\n        ></bb-dropdown-single-select-option-ui>\n        <bb-dropdown-single-select-option-ui\n          i18n-label=\"\n            Schedule type dropdown custom\n            option@@actions-common.actions-schedule-notifications.schedule-type-custom-option.label\"\n          label=\"Custom\"\n          [value]=\"hostRef.ScheduleType.Custom\"\n        ></bb-dropdown-single-select-option-ui>\n      </bb-dropdown-single-select-ui>\n    </div>\n    <div\n      class=\"col-6 row bb-stack bb-stack--align-baseline no-gutters\"\n      *ngIf=\"hostRef.scheduleType === hostRef.ScheduleType.Custom\"\n    >\n      <span\n        class=\"col-1\"\n        i18n=\"Schedule time picker title @@actions-common.actions-schedule-notifications.schedule-time-picker.title\"\n        >At</span\n      >\n      <form class=\"col-11\" [formGroup]=\"hostRef.scheduleForm\">\n        <div\n          class=\"row no-gutters bb-block bb-block--md\"\n          formArrayName=\"scheduleTime\"\n          *ngFor=\"let ref of hostRef.scheduleTime.controls; let i = index; let last = last\"\n        >\n          <bb-time-picker\n            class=\"col-6 actions-schedule-time-picker__dropdown\"\n            [formControlName]=\"i\"\n            [excludedOptions]=\"hostRef.selectedTimeOptions$ | async\"\n            [controlRef]=\"ref\"\n            [minutesStep]=\"hostRef.minutesStep\"\n            (change)=\"hostRef.timeControlChange()\"\n            data-role=\"schedule-time-picker\"\n            i18n-aria-label=\"\n              Schedule time picker label @@actions-common.actions-schedule-notifications.schedule-time-picker.aria-label\"\n            aria-label=\"actions-schedule-notifications-time-picker\"\n          ></bb-time-picker>\n          <button\n            bbButton\n            circle=\"true\"\n            *ngIf=\"last && i !== 0\"\n            (click)=\"hostRef.deleteTimeOption(i)\"\n            color=\"link\"\n            aria-label=\"Delete time option\"\n            i18n-aria-label=\"\n              Schedule delete time option\n              @@actions-common.actions-schedule-notifications.schedule-delete-time-option.aria-label\"\n            data-role=\"delete-time-option\"\n          >\n            <bb-icon-ui name=\"delete\" class=\"text-muted\"></bb-icon-ui>\n          </button>\n        </div>\n        <button\n          bbButton\n          class=\"bb-stack__item\"\n          color=\"primary\"\n          circle=\"true\"\n          buttonSize=\"sm\"\n          type=\"button\"\n          *ngIf=\"hostRef.scheduleTime.controls.length < hostRef.MaxOptionsQuantity\"\n          (click)=\"hostRef.addTimeOption()\"\n          aria-label=\"Add time option\"\n          i18n-aria-label=\"\n            Schedule add time option @@actions-common.actions-schedule-notifications.schedule-time-add-option.aria-label\"\n          data-role=\"add-time-option\"\n        >\n          <bb-icon-ui name=\"add\" size=\"sm\"></bb-icon-ui>\n        </button>\n      </form>\n    </div>\n  </div>\n  <div class=\"bb-block bb-block--md text-center bb-text-support\" data-role=\"schedule-description\">\n    <em i18n=\"Schedule description@@actions-common.actions-schedule-notifications.schedule-description\">\n      Notifications will be {hostRef.scheduleType, select, Custom {grouped and sent at specified time.} RightAway {sent\n      immediately.}}\n    </em>\n    <hr />\n  </div>\n</ng-template>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Directive,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  SimpleChanges,\n} from '@angular/core';\nimport { ActionRecipeGetResponseBody, ActionRecipeSpecification } from '@backbase/data-ang/actions';\nimport { BbTemplate } from '@backbase/foundation-ang/core';\nimport { ActionRecipeFormItemValue } from '../../models/action-recipes-form-value.model';\nimport { FormGroup } from '@angular/forms';\nimport { ActionsFormBuilderService } from '../../services/actions-form-builder.service';\n\n@Component({\n  selector: 'bb-actions-toggle-recipe-form',\n  templateUrl: './actions-toggle-recipe-form.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ActionsToggleRecipeFormComponent implements OnChanges, OnInit {\n  /**\n   * Action recipe.\n   */\n  @Input() actionRecipe?: ActionRecipeGetResponseBody;\n\n  /**\n   * Action recipe specification.\n   */\n  @Input() specification!: ActionRecipeSpecification;\n\n  /**\n   * Label text.\n   */\n  @Input() label!: string;\n\n  /**\n   * Flag to control if schedule notifications is enabled\n   */\n  @Input() scheduleEnabled = false;\n\n  /**\n   * On form submit output.\n   */\n  @Output() submit = new EventEmitter<ActionRecipeFormItemValue>();\n\n  /**\n   * Loading state flag.\n   */\n  isLoading = false;\n\n  /**\n   * Action recipe form.\n   */\n  formGroup?: FormGroup;\n\n  constructor(private readonly actionsFormBuilderService: ActionsFormBuilderService) {}\n\n  ngOnInit() {\n    this.formGroup = this.actionsFormBuilderService.buildActionRecipeFormGroup(this.specification, this.actionRecipe);\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { actionRecipe } = changes;\n    if (this.formGroup && actionRecipe && actionRecipe.previousValue !== actionRecipe.currentValue) {\n      this.isLoading = false;\n      this.formGroup.patchValue(\n        this.actionsFormBuilderService.buildActionRecipeFormValue(this.specification, this.actionRecipe),\n      );\n    }\n  }\n\n  /**\n   * Method to handle schedule form change and trigger submit action.\n   *\n   * @param value - action recipe form value\n   */\n  onScheduleChange(value: FormGroup) {\n    this.formGroup?.patchValue(value);\n    this.submit.emit(this.formGroup?.value);\n  }\n\n  /**\n   * Method to submit action recipe form.\n   *\n   * @param formValue - action recipe form value\n   */\n  onSubmit(formValue: ActionRecipeFormItemValue) {\n    this.isLoading = true;\n    this.submit.emit(formValue);\n  }\n}\n\n@Directive({\n  selector: '[bbActionsToggleRecipeFormCustomizableDirective]',\n})\nexport class ActionsToggleRecipeFormCustomizableDirective extends BbTemplate<ActionsToggleRecipeFormComponent, void> {}\n","<ng-container bbActionsToggleRecipeFormCustomizableDirective [bbHostRef]=\"this\"></ng-container>\n\n<ng-template bbActionsToggleRecipeFormCustomizableDirective let-hostRef>\n  <ng-container *ngIf=\"hostRef.formGroup\">\n    <form [formGroup]=\"hostRef.formGroup\">\n      <div class=\"bb-block bb-block--md bb-stack\">\n        <div\n          class=\"bb-stack__item bb-text-support bb-text-bold\"\n          [attr.data-role]=\"'toggle-recipe-label-' + hostRef.specification.id\"\n        >\n          {{ hostRef.label }}\n        </div>\n        <bb-switch-with-loading\n          [isLoading]=\"hostRef.isLoading\"\n          class=\"bb-stack__item bb-stack__item--push-right\"\n          formControlName=\"active\"\n          (change)=\"hostRef.onSubmit(hostRef.formGroup.value)\"\n          aria-label=\"{{ 'Switch on/off ' + hostRef.label }}\"\n          i18n-aria-label=\"Toggle recipe aria label@@actions-common.actions-toggle-recipe-form.switcher.aria-label\"\n          [attr.data-role]=\"'toggle-recipe-' + hostRef.specification.id\"\n        ></bb-switch-with-loading>\n      </div>\n      <bb-actions-schedule-notifications\n        class=\"bb-stack__item\"\n        *ngIf=\"hostRef.scheduleEnabled && hostRef.formGroup.value?.active && hostRef.actionRecipe\"\n        [scheduleForm]=\"hostRef.formGroup.get('recurrence')\"\n        [actionRecipe]=\"hostRef.actionRecipe\"\n        (submit)=\"hostRef.onScheduleChange($event)\"\n      ></bb-actions-schedule-notifications>\n    </form>\n  </ng-container>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DropdownSingleSelectModule } from '@backbase/ui-ang/dropdown-single-select';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TimePickerComponent } from './time-picker.component';\n\n@NgModule({\n  imports: [CommonModule, DropdownSingleSelectModule, ReactiveFormsModule],\n  declarations: [TimePickerComponent],\n  exports: [TimePickerComponent, DropdownSingleSelectModule, ReactiveFormsModule],\n})\nexport class TimePickerModule {}\n","export interface PreferenceInfo {\n  generalNotificationId: string;\n  preferenceName: string;\n  preferenceLabel: string;\n  specificationId: string;\n}\n\nexport const PreferenceDataMap: Record<string, PreferenceInfo> = {\n  '1': {\n    generalNotificationId: 'new-transaction-occurred',\n    preferenceName: 'Transactions',\n    preferenceLabel: 'Transactions',\n    specificationId: '1',\n  },\n  '4': {\n    generalNotificationId: 'account-balance-low',\n    preferenceName: 'AccountBalance',\n    preferenceLabel: 'Account Balance',\n    specificationId: '4',\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { map, switchMap, withLatestFrom } from 'rxjs/operators';\nimport {\n  ActionRecipe,\n  ActionRecipeSpecification,\n  BatchProcessingPutResponseBody,\n  ActionRecipeGetResponseBody,\n} from '@backbase/data-ang/actions';\nimport {\n  NotificationPreferenceService,\n  GetNotificationPreferencesRequestParams,\n  NotificationPreference,\n  NotificationPreferencePutRequest,\n  NotificationPreferencePostRequest,\n} from '@backbase/data-ang/engagement';\nimport { ActionRecipeFormItemValue } from '../models/action-recipes-form-value.model';\nimport { PreferenceDataMap } from '../models/notification-to-specification-id.model';\nimport { NotificationsPreferencesBaseDataService } from './notification-preferences-base-data.service';\nimport { fromHttpResponse } from '../helpers/mappers';\n\n@Injectable()\nexport class ActionsNotificationsPreferencesDataService implements NotificationsPreferencesBaseDataService {\n  private readonly cachedNotificationPreferences$$ = new BehaviorSubject<NotificationPreference[]>([]);\n\n  constructor(private readonly dataHttpService: NotificationPreferenceService) {}\n\n  /**\n   * Method to get action recipes.\n   *\n   * @param arrangementId\n   * @returns action recipe array\n   */\n  getActionRecipes(arrangementId: string): Observable<ActionRecipe[]> {\n    const requestParams = {\n      entityId: arrangementId,\n      entityType: 'arrangement',\n    } as GetNotificationPreferencesRequestParams;\n\n    return this.dataHttpService.getNotificationPreferences(requestParams).pipe(\n      map(fromHttpResponse),\n      map(({ notificationPreferences }) => {\n        this.cachedNotificationPreferences$$.next(notificationPreferences);\n\n        return notificationPreferences.map(pref => this.preferenceToRecipe(pref));\n      }),\n    );\n  }\n\n  /**\n   * Method to get action recipe specifications.\n   *\n   * @returns action recipe specifications\n   */\n  getSpecifications(): Observable<ActionRecipeSpecification[]> {\n    return this.cachedNotificationPreferences$$.pipe(\n      map(fromHttpResponse),\n      map(notificationPreferences => notificationPreferences.map(pref => this.preferenceToSpecification(pref))),\n    );\n  }\n\n  /**\n   * Method to save action recipe.\n   *\n   * @param action - recipe form value\n   * @param arrangementId - arrangement ID\n   * @returns batch processing response\n   */\n  saveActionRecipe(\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n    arrangementId: string,\n  ): Observable<BatchProcessingPutResponseBody> {\n    const notificationPreferences = this.cachedNotificationPreferences$$.getValue();\n    const preferenceToUpdate = notificationPreferences.find(\n      pref =>\n        pref.generalNotificationId === PreferenceDataMap[actionRecipeFormItem.specificationId].generalNotificationId,\n    ) as NotificationPreference;\n\n    if (preferenceToUpdate.id) {\n      return this.updateNotificationPreference(preferenceToUpdate, actionRecipeFormItem);\n    } else {\n      return this.createNotificationPreference(preferenceToUpdate, actionRecipeFormItem, arrangementId);\n    }\n  }\n\n  private updateNotificationPreference(\n    preferenceToUpdate: NotificationPreference,\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n  ): Observable<BatchProcessingPutResponseBody> {\n    const notificationPreferencePutRequest = this.getNotificationPreferencePutRequest(\n      preferenceToUpdate,\n      actionRecipeFormItem,\n    );\n\n    return this.dataHttpService\n      .updateNotificationPreference({ id: preferenceToUpdate.id || '', notificationPreferencePutRequest })\n      .pipe(this.mapSavePreferenceResponce());\n  }\n\n  private createNotificationPreference(\n    preferenceToUpdate: NotificationPreference,\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n    arrangementId: string,\n  ): Observable<BatchProcessingPutResponseBody> {\n    const notificationPreferencePostRequest = this.getNotificationPreferencePostRequest(\n      preferenceToUpdate,\n      actionRecipeFormItem,\n      arrangementId,\n    );\n\n    return this.dataHttpService\n      .createNotificationPreference({ notificationPreferencePostRequest })\n      .pipe(this.mapSavePreferenceResponce());\n  }\n\n  private mapSavePreferenceResponce = () => (preference: Observable<NotificationPreference>) =>\n    preference.pipe(\n      withLatestFrom(this.cachedNotificationPreferences$$),\n      switchMap(([pref, preferences]) => {\n        this.updatePreferencesCache(preferences, pref);\n\n        return of({\n          actionRecipes: [this.preferenceToRecipe(pref) as ActionRecipe],\n        } as BatchProcessingPutResponseBody);\n      }),\n    );\n\n  private getNotificationPreferencePutRequest(\n    preference: NotificationPreference,\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n  ): NotificationPreferencePutRequest {\n    return {\n      active: actionRecipeFormItem.active,\n      channels: preference.channels.map(channel => ({\n        ...channel,\n        enabled: !!actionRecipeFormItem.actions[channel.channel],\n      })),\n      conditions: {\n        ...(actionRecipeFormItem.amount.amount !== undefined && {\n          amount: `${actionRecipeFormItem.amount.amount}` as any,\n        }),\n      },\n    };\n  }\n\n  private getNotificationPreferencePostRequest(\n    preference: NotificationPreference,\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n    arrangementId: string,\n  ): NotificationPreferencePostRequest {\n    return {\n      generalNotificationId: preference.generalNotificationId,\n      active: actionRecipeFormItem.active,\n      eRef: arrangementId,\n      channels: preference.channels.map(channel => ({\n        ...channel,\n        enabled: !!actionRecipeFormItem.actions[channel.channel],\n      })),\n      conditions: { ...preference.userConditions?.conditions },\n    };\n  }\n\n  private preferenceToSpecification = ({\n    userConditions,\n    channels,\n    generalNotificationId,\n  }: NotificationPreference): ActionRecipeSpecification =>\n    ({\n      actions: channels.map(channel => ({ type: channel.channel })),\n      recipeDefaults: {\n        ...(userConditions?.conditions?.hasOwnProperty('amount') && {\n          amount: `${userConditions?.conditions?.amount}`,\n        }),\n      },\n      id: Object.values(PreferenceDataMap).find(pref => pref.generalNotificationId === generalNotificationId)\n        ?.specificationId,\n    } as ActionRecipeSpecification);\n\n  private preferenceToRecipe = ({\n    channels,\n    userConditions,\n    createdOn,\n    generalNotificationId,\n    active,\n    id,\n  }: NotificationPreference): ActionRecipeGetResponseBody =>\n    ({\n      specificationId: Object.values(PreferenceDataMap).find(\n        pref => pref.generalNotificationId === generalNotificationId,\n      )?.specificationId,\n      active,\n      actions: channels.map(channel => ({\n        type: channel.channel,\n        enabled: channel.enabled,\n      })),\n      createdOn,\n      ...(userConditions?.conditions?.hasOwnProperty('amount') && {\n        amount: `${userConditions?.conditions?.amount}`,\n      }),\n      id: id || '',\n    } as ActionRecipeGetResponseBody);\n\n  private updatePreferencesCache(preferences: NotificationPreference[], updatedPreference: NotificationPreference) {\n    const updatedPreferences = preferences.map(pref =>\n      pref.generalNotificationId === updatedPreference.generalNotificationId ? updatedPreference : pref,\n    );\n    this.cachedNotificationPreferences$$.next(updatedPreferences);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NoFractionDigitsPipe } from './pipes/no-fraction-digits.pipe';\nimport { ActionsFormBuilderService } from './services/actions-form-builder.service';\nimport { ActionsNotificationsSettingsDataService } from './services/actions-notifications-settings-data.service';\n\nimport { ButtonModule } from '@backbase/ui-ang/button';\nimport { CollapsibleModule } from '@backbase/ui-ang/collapsible';\nimport { HeaderModule } from '@backbase/ui-ang/header';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { InputCheckboxModule } from '@backbase/ui-ang/input-checkbox';\nimport { InputInlineEditModule } from '@backbase/ui-ang/input-inline-edit';\nimport { ModalModule } from '@backbase/ui-ang/modal';\nimport { SwitchModule } from '@backbase/ui-ang/switch';\nimport { TooltipModule } from '@backbase/ui-ang/tooltip-directive';\nimport { AmountModule } from '@backbase/ui-ang/amount';\n\nimport {\n  ActionsNotificationChannelsComponent,\n  ActionsNotificationChannelsCustomizableDirective,\n} from './components/actions-notification-channels/actions-notification-channels.component';\nimport {\n  ActionsAccountBalanceRecipeFormComponent,\n  ActionsAccountBalanceRecipeCustomizableDirective,\n} from './components/actions-account-balance-recipe-form/actions-account-balance-recipe-form.component';\nimport {\n  ActionsTransactionsRecipeFormComponent,\n  ActionsTransactionsRecipeCustomizableDirective,\n} from './components/actions-transactions-recipe-form/actions-transactions-recipe-form.component';\nimport {\n  ActionsToggleRecipeFormComponent,\n  ActionsToggleRecipeFormCustomizableDirective,\n} from './components/actions-toggle-recipe-form/actions-toggle-recipe-form.component';\nimport { SwitchWithLoadingComponent } from './components/switch-with-loading/switch-with-loading.component';\nimport {\n  ActionsScheduleNotificationsComponent,\n  ActionsScheduleNotificationsComponentCustomizableDirective,\n} from './components/actions-schedule-notifications/actions-schedule-notifications.component';\nimport { TimePickerModule } from './components/time-picker/time-picker.module';\nimport { ActionsNotificationsPreferencesDataService } from './services/actions-notifications-preferences-data.service';\n\nconst components = [\n  ActionsNotificationChannelsComponent,\n  ActionsAccountBalanceRecipeFormComponent,\n  ActionsTransactionsRecipeFormComponent,\n  ActionsToggleRecipeFormComponent,\n  SwitchWithLoadingComponent,\n  ActionsScheduleNotificationsComponent,\n];\n\nconst directives = [\n  ActionsNotificationChannelsCustomizableDirective,\n  ActionsAccountBalanceRecipeCustomizableDirective,\n  ActionsTransactionsRecipeCustomizableDirective,\n  ActionsToggleRecipeFormCustomizableDirective,\n  ActionsScheduleNotificationsComponentCustomizableDirective,\n];\n\nconst pipes = [NoFractionDigitsPipe];\n\nconst uiModules = [\n  AmountModule,\n  ModalModule,\n  ButtonModule,\n  InputCheckboxModule,\n  SwitchModule,\n  HeaderModule,\n  CollapsibleModule,\n  IconModule,\n  TooltipModule,\n  InputInlineEditModule,\n];\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, TimePickerModule, ...uiModules],\n  providers: [\n    ActionsFormBuilderService,\n    ActionsNotificationsSettingsDataService,\n    ActionsNotificationsPreferencesDataService,\n  ],\n  declarations: [...components, ...directives, ...pipes],\n  exports: [...components, ...uiModules, ...directives, ...pipes, TimePickerModule],\n})\nexport class ActionsCommonModule {}\n","import { ActionRecipe, ActionRecipeSpecification, BatchProcessingPutResponseBody } from '@backbase/actions-http-ang';\nimport { Observable } from 'rxjs';\nimport { ActionRecipeFormItemValue } from '../models/action-recipes-form-value.model';\n\nexport abstract class NotificationsPreferencesBaseDataService {\n  abstract getActionRecipes(arrangementId?: string): Observable<ActionRecipe[]>;\n  abstract getSpecifications(): Observable<ActionRecipeSpecification[]>;\n  abstract saveActionRecipe(\n    actionRecipeFormItem: ActionRecipeFormItemValue,\n    arrangementId?: string,\n  ): Observable<BatchProcessingPutResponseBody>;\n}\n","import { combineLatest, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport const getPropertyValue = <T>(input: Observable<T | undefined>, prop: Observable<T>): Observable<T> =>\n  combineLatest([input, prop]).pipe(map(([inputVal, propVal]) => (inputVal !== undefined ? inputVal : propVal)));\n","export enum SpecificationIds {\n  Transactions = '1',\n  AccountBalance = '4',\n  Payments = '5',\n  Contacts = '6',\n  PaymentsToApprove = '13',\n  ContactsToApprove = '14',\n}\n","import { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { secondsToMilliseconds } from '../helpers/mappers';\n\nexport const DEFAULT_NOTIFICATION_DISMISS_TIME = 5;\nexport const DEFAULT_SPECIFICATION_IDS = '5, 6, 13, 14';\nexport const DEFAULT_API_MODE = 'actions';\n\nexport type ApiMode = 'actions' | 'engagements';\n\nexport abstract class ActionsBasePropertiesService {\n  /**\n   * Method to get notification dismiss time preference value.\n   *\n   * @returns notification dismiss time in seconds\n   */\n  getNotificationDismissTimeProperty(): Observable<number> {\n    return of(DEFAULT_NOTIFICATION_DISMISS_TIME).pipe(map(secondsToMilliseconds));\n  }\n\n  /**\n   * Method to get specification IDs.\n   *\n   * @returns specification IDs array\n   */\n  getSpecificationIDs(): Observable<string[]> {\n    return of(DEFAULT_SPECIFICATION_IDS).pipe(map(data => data.replace(/\\s/g, '').split(',')));\n  }\n\n  getApiMode(): ApiMode {\n    return DEFAULT_API_MODE;\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["Pipe","Injectable","map","switchMap","of","throwError","Component","ChangeDetectionStrategy","Input","BbTemplate","Directive","EventEmitter","Subject","takeUntil","Output","NG_VALUE_ACCESSOR","forwardRef","ScheduleType","BehaviorSubject","FormControl","filter","tap","distinctUntilChanged","CommonModule","DropdownSingleSelectModule","ReactiveFormsModule","NgModule","withLatestFrom","AmountModule","ModalModule","ButtonModule","InputCheckboxModule","SwitchModule","HeaderModule","CollapsibleModule","IconModule","TooltipModule","InputInlineEditModule","FormsModule","combineLatest","SpecificationIds"],"mappings":"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"}