import { ChangeDetectionStrategy, Component, Directive, EventEmitter, Input, Output, } from '@angular/core';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { of, Subject } from 'rxjs';
import { distinctUntilChanged, filter, takeUntil, tap } from 'rxjs/operators';
import { DefaultTime, MaxOptionsQuantity, ScheduleType, MinutesInDay, } from '../../models/schedule-notifications.model';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@backbase/ui-ang/dropdown-single-select";
import * as i3 from "../time-picker/time-picker.component";
import * as i4 from "@backbase/ui-ang/icon";
import * as i5 from "@angular/common";
import * as i6 from "@backbase/ui-ang/button";
export class ActionsScheduleNotificationsComponent {
    constructor(fb) {
        this.fb = fb;
        /**
         * Schedule type enum
         */
        this.ScheduleType = ScheduleType;
        /**
         * Maximum options quantity
         */
        this.MaxOptionsQuantity = MaxOptionsQuantity;
        /**
         * Stream of selected options
         */
        this.selectedTimeOptions$ = of([]);
        this.selectedTimeOptions = [];
        this.destroy$ = new Subject();
        /**
         * Minutes step in time options list.
         */
        this.minutesStep = 60;
        /**
         * Schedule form submit output.
         */
        this.submit = new EventEmitter();
    }
    ngOnInit() {
        this.scheduleType = this.getScheduleType(this.actionRecipe);
        this.onScheduleFormChange();
    }
    onScheduleTypeChange(event) {
        const target = event.target;
        if (this.scheduleType === this.ScheduleType.RightAway) {
            this.resetScheduleForm();
        }
        else if (this.scheduleType === this.ScheduleType.Custom) {
            this.addTimeOption();
        }
        target.blur();
    }
    addTimeOption() {
        this.scheduleTime.push(this.fb.control(this.defaultTime));
        this.submitScheduleForm();
    }
    deleteTimeOption(index) {
        this.scheduleTime.removeAt(index);
        this.submitScheduleForm();
    }
    timeControlChange() {
        this.submitScheduleForm();
    }
    onScheduleFormChange() {
        this.selectedTimeOptions$ = this.scheduleForm.controls.scheduleTime.valueChanges.pipe(filter(val => val), tap(val => (this.selectedTimeOptions = val)), distinctUntilChanged(), takeUntil(this.destroy$));
    }
    submitScheduleForm() {
        this.submit.emit(this.scheduleForm);
    }
    getScheduleType(recipe) {
        var _a, _b;
        const hoursOfDayQuantity = ((_b = (_a = recipe.recurrence) === null || _a === void 0 ? void 0 : _a.hoursOfDay) === null || _b === void 0 ? void 0 : _b.length) || 0;
        const hoursScheduleApplied = hoursOfDayQuantity !== 0 && hoursOfDayQuantity !== 24;
        if (!hoursScheduleApplied) {
            return ScheduleType.RightAway;
        }
        return ScheduleType.Custom;
    }
    resetScheduleForm() {
        this.scheduleTime.clear();
        this.submitScheduleForm();
    }
    /**
     * Getter for repeat count control
     */
    get scheduleTime() {
        return this.scheduleForm.get('scheduleTime');
    }
    /**
     * Getter for default time which returns 08:00 for the first option and +1 hour for subsequent
     */
    get defaultTime() {
        const lastSelectedTimeOption = this.lastSelectedTimeOption;
        let defaultTime = lastSelectedTimeOption + this.minutesStep;
        if (!lastSelectedTimeOption && lastSelectedTimeOption !== 0) {
            return DefaultTime;
        }
        if (defaultTime === MinutesInDay) {
            defaultTime = 0;
        }
        while (this.selectedTimeOptions.includes(defaultTime)) {
            if (defaultTime === MinutesInDay) {
                defaultTime = 0;
            }
            else {
                defaultTime = defaultTime + 60;
            }
        }
        return defaultTime;
    }
    /**
     * Getter for last added time option
     */
    get lastSelectedTimeOption() {
        var _a;
        return (_a = this.scheduleTime.controls[this.scheduleTime.controls.length - 1]) === null || _a === void 0 ? void 0 : _a.value;
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
}
ActionsScheduleNotificationsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsScheduleNotificationsComponent, deps: [{ token: i1.FormBuilder }], target: i0.ɵɵFactoryTarget.Component });
ActionsScheduleNotificationsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.14", type: ActionsScheduleNotificationsComponent, selector: "bb-actions-schedule-notifications", inputs: { actionRecipe: "actionRecipe", scheduleForm: "scheduleForm", minutesStep: "minutesStep" }, outputs: { submit: "submit" }, ngImport: i0, template: "<ng-container bbActionsScheduleNotificationsComponentCustomizableDirective [bbHostRef]=\"this\"> </ng-container>\n<ng-template bbActionsScheduleNotificationsComponentCustomizableDirective let-hostRef>\n  <div class=\"row bb-block bb-block--md bb-stack bb-stack--align-baseline\">\n    <div class=\"col-3\">\n      <span i18n=\"Notify me label@@actions-common.actions-schedule-notifications.title\"> Notify me </span>\n    </div>\n    <div class=\"col-3\">\n      <bb-dropdown-single-select-ui\n        iconName=\"caret-down\"\n        [required]=\"true\"\n        [(ngModel)]=\"hostRef.scheduleType\"\n        (change)=\"hostRef.onScheduleTypeChange($event)\"\n        aria-label=\"Schedule type\"\n        i18n-aria-label=\"\n          Schedule type dropdown@@actions-common.actions-schedule-notifications.schedule-type-dropdown.aria-label\"\n        data-role=\"notifications-schedule-type\"\n      >\n        <bb-dropdown-single-select-option-ui\n          i18n-label=\"\n            Schedule type dropdown right away\n            option@@actions-common.actions-schedule-notifications.schedule-type-right-away-option.label\"\n          label=\"Right away\"\n          [value]=\"hostRef.ScheduleType.RightAway\"\n        ></bb-dropdown-single-select-option-ui>\n        <bb-dropdown-single-select-option-ui\n          i18n-label=\"\n            Schedule type dropdown custom\n            option@@actions-common.actions-schedule-notifications.schedule-type-custom-option.label\"\n          label=\"Custom\"\n          [value]=\"hostRef.ScheduleType.Custom\"\n        ></bb-dropdown-single-select-option-ui>\n      </bb-dropdown-single-select-ui>\n    </div>\n    <div\n      class=\"col-6 row bb-stack bb-stack--align-baseline no-gutters\"\n      *ngIf=\"hostRef.scheduleType === hostRef.ScheduleType.Custom\"\n    >\n      <span\n        class=\"col-1\"\n        i18n=\"Schedule time picker title @@actions-common.actions-schedule-notifications.schedule-time-picker.title\"\n        >At</span\n      >\n      <form class=\"col-11\" [formGroup]=\"hostRef.scheduleForm\">\n        <div\n          class=\"row no-gutters bb-block bb-block--md\"\n          formArrayName=\"scheduleTime\"\n          *ngFor=\"let ref of hostRef.scheduleTime.controls; let i = index; let last = last\"\n        >\n          <bb-time-picker\n            class=\"col-6 actions-schedule-time-picker__dropdown\"\n            [formControlName]=\"i\"\n            [excludedOptions]=\"hostRef.selectedTimeOptions$ | async\"\n            [controlRef]=\"ref\"\n            [minutesStep]=\"hostRef.minutesStep\"\n            (change)=\"hostRef.timeControlChange()\"\n            data-role=\"schedule-time-picker\"\n            i18n-aria-label=\"\n              Schedule time picker label @@actions-common.actions-schedule-notifications.schedule-time-picker.aria-label\"\n            aria-label=\"actions-schedule-notifications-time-picker\"\n          ></bb-time-picker>\n          <button\n            bbButton\n            circle=\"true\"\n            *ngIf=\"last && i !== 0\"\n            (click)=\"hostRef.deleteTimeOption(i)\"\n            color=\"link\"\n            aria-label=\"Delete time option\"\n            i18n-aria-label=\"\n              Schedule delete time option\n              @@actions-common.actions-schedule-notifications.schedule-delete-time-option.aria-label\"\n            data-role=\"delete-time-option\"\n          >\n            <bb-icon-ui name=\"delete\" class=\"text-muted\"></bb-icon-ui>\n          </button>\n        </div>\n        <button\n          bbButton\n          class=\"bb-stack__item\"\n          color=\"primary\"\n          circle=\"true\"\n          buttonSize=\"sm\"\n          type=\"button\"\n          *ngIf=\"hostRef.scheduleTime.controls.length < hostRef.MaxOptionsQuantity\"\n          (click)=\"hostRef.addTimeOption()\"\n          aria-label=\"Add time option\"\n          i18n-aria-label=\"\n            Schedule add time option @@actions-common.actions-schedule-notifications.schedule-time-add-option.aria-label\"\n          data-role=\"add-time-option\"\n        >\n          <bb-icon-ui name=\"add\" size=\"sm\"></bb-icon-ui>\n        </button>\n      </form>\n    </div>\n  </div>\n  <div class=\"bb-block bb-block--md text-center bb-text-support\" data-role=\"schedule-description\">\n    <em i18n=\"Schedule description@@actions-common.actions-schedule-notifications.schedule-description\">\n      Notifications will be {hostRef.scheduleType, select, Custom {grouped and sent at specified time.} RightAway {sent\n      immediately.}}\n    </em>\n    <hr />\n  </div>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i2.DropdownSingleSelectComponent; }), selector: "bb-dropdown-single-select-ui", inputs: ["placeholder", "defaultOptionAsPlaceholder", "options", "displayAttributePath", "iconName", "compareWithFn"] }, { type: i0.forwardRef(function () { return i2.DropdownSingleSelectOptionComponent; }), selector: "bb-dropdown-single-select-option-ui", inputs: ["value", "label"] }, { type: i0.forwardRef(function () { return i3.TimePickerComponent; }), selector: "bb-time-picker", inputs: ["startTime", "minutesStep", "amPmFormat", "excludedOptions", "controlRef", "label"] }, { type: i0.forwardRef(function () { return i4.IconComponent; }), selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }], directives: [{ type: i0.forwardRef(function () { return ActionsScheduleNotificationsComponentCustomizableDirective; }), selector: "[bbActionsScheduleNotificationsComponentCustomizableDirective]" }, { type: i0.forwardRef(function () { return i1.RequiredValidator; }), selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i0.forwardRef(function () { return i1.NgControlStatus; }), selector: "[formControlName],[ngModel],[formControl]" }, { type: i0.forwardRef(function () { return i1.NgModel; }), selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i0.forwardRef(function () { return i5.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i1.ɵNgNoValidate; }), selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i0.forwardRef(function () { return i1.NgControlStatusGroup; }), selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i0.forwardRef(function () { return i1.FormGroupDirective; }), selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i0.forwardRef(function () { return i5.NgForOf; }), selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i0.forwardRef(function () { return i1.FormArrayName; }), selector: "[formArrayName]", inputs: ["formArrayName"] }, { type: i0.forwardRef(function () { return i1.FormControlName; }), selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i0.forwardRef(function () { return i6.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], pipes: { "async": i0.forwardRef(function () { return i5.AsyncPipe; }) }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsScheduleNotificationsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-actions-schedule-notifications',
                    templateUrl: './actions-schedule-notifications.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.FormBuilder }]; }, propDecorators: { actionRecipe: [{
                type: Input
            }], scheduleForm: [{
                type: Input
            }], minutesStep: [{
                type: Input
            }], submit: [{
                type: Output
            }] } });
export class ActionsScheduleNotificationsComponentCustomizableDirective extends BbTemplate {
}
ActionsScheduleNotificationsComponentCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsScheduleNotificationsComponentCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ActionsScheduleNotificationsComponentCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: ActionsScheduleNotificationsComponentCustomizableDirective, selector: "[bbActionsScheduleNotificationsComponentCustomizableDirective]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: ActionsScheduleNotificationsComponentCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbActionsScheduleNotificationsComponentCustomizableDirective]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9ucy1zY2hlZHVsZS1ub3RpZmljYXRpb25zLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYWN0aW9ucy1jb21tb24tYW5nL3NyYy9jb21wb25lbnRzL2FjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy9hY3Rpb25zLXNjaGVkdWxlLW5vdGlmaWNhdGlvbnMuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9hY3Rpb25zLWNvbW1vbi1hbmcvc3JjL2NvbXBvbmVudHMvYWN0aW9ucy1zY2hlZHVsZS1ub3RpZmljYXRpb25zL2FjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEdBQ1AsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzNELE9BQU8sRUFBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQy9DLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlFLE9BQU8sRUFDTCxXQUFXLEVBQ1gsa0JBQWtCLEVBRWxCLFlBQVksRUFDWixZQUFZLEdBQ2IsTUFBTSwyQ0FBMkMsQ0FBQzs7Ozs7Ozs7QUFPbkQsTUFBTSxPQUFPLHFDQUFxQztJQTJDaEQsWUFBNkIsRUFBZTtRQUFmLE9BQUUsR0FBRixFQUFFLENBQWE7UUFyQzVDOztXQUVHO1FBQ00saUJBQVksR0FBRyxZQUFZLENBQUM7UUFFckM7O1dBRUc7UUFDTSx1QkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztRQUVqRDs7V0FFRztRQUNI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aEQ7a0dBMkJVLFlBQVk7c0JBQXBCLEtBQUs7Z0JBS0csWUFBWTtzQkFBcEIsS0FBSztnQkFLRyxXQUFXO3NCQUFuQixLQUFLO2dCQUthLE1BQU07c0JBQXhCLE1BQU07O0FBNEdULE1BQU0sT0FBTywwREFBMkQsU0FBUSxVQUcvRTs7d0pBSFksMERBQTBEOzRJQUExRCwwREFBMEQ7NEZBQTFELDBEQUEwRDtrQkFIdEUsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsZ0VBQWdFO2lCQUMzRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIERpcmVjdGl2ZSxcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtQXJyYXksIEZvcm1CdWlsZGVyLCBGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBBY3Rpb25SZWNpcGVHZXRSZXNwb25zZUJvZHkgfSBmcm9tICdAYmFja2Jhc2UvYWN0aW9ucy1odHRwLWFuZyc7XG5pbXBvcnQgeyBCYlRlbXBsYXRlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBmaWx0ZXIsIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFRpbWUsXG4gIE1heE9wdGlvbnNRdWFudGl0eSxcbiAgTWludXRlc1N0ZXAsXG4gIFNjaGVkdWxlVHlwZSxcbiAgTWludXRlc0luRGF5LFxufSBmcm9tICcuLi8uLi9tb2RlbHMvc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5tb2RlbCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLWFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucycsXG4gIHRlbXBsYXRlVXJsOiAnLi9hY3Rpb25zLXNjaGVkdWxlLW5vdGlmaWNhdGlvbnMuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgQWN0aW9uc1NjaGVkdWxlTm90aWZpY2F0aW9uc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgLyoqXG4gICAqIFNlbGVjdGVkIHNjaGVkdWxlIHR5cGVcbiAgICovXG4gIHNjaGVkdWxlVHlwZSE6IFNjaGVkdWxlVHlwZTtcblxuICAvKipcbiAgICogU2NoZWR1bGUgdHlwZSBlbnVtXG4gICAqL1xuICByZWFkb25seSBTY2hlZHVsZVR5cGUgPSBTY2hlZHVsZVR5cGU7XG5cbiAgLyoqXG4gICAqIE1heGltdW0gb3B0aW9ucyBxdWFudGl0eVxuICAgKi9cbiAgcmVhZG9ubHkgTWF4T3B0aW9uc1F1YW50aXR5ID0gTWF4T3B0aW9uc1F1YW50aXR5O1xuXG4gIC8qKlxuICAgKiBTdHJlYW0gb2Ygc2VsZWN0ZWQgb3B0aW9uc1xuICAgKi9cbiAgc2VsZWN0ZWRUaW1lT3B0aW9ucyQ6IE9ic2VydmFibGU8bnVtYmVyW10+ID0gb2YoW10pO1xuICBzZWxlY3RlZFRpbWVPcHRpb25zOiBudW1iZXJbXSA9IFtdO1xuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICAvKipcbiAgICogQWN0aW9uIHJlY2lwZS5cbiAgICovXG4gIEBJbnB1dCgpIGFjdGlvblJlY2lwZSE6IEFjdGlvblJlY2lwZUdldFJlc3BvbnNlQm9keTtcblxuICAvKipcbiAgICogU2NoZWR1bGUgZm9ybSBncm91cC5cbiAgICovXG4gIEBJbnB1dCgpIHNjaGVkdWxlRm9ybSE6IEZvcm1Hcm91cDtcblxuICAvKipcbiAgICogTWludXRlcyBzdGVwIGluIHRpbWUgb3B0aW9ucyBsaXN0LlxuICAgKi9cbiAgQElucHV0KCkgbWludXRlc1N0ZXA6IE1pbnV0ZXNTdGVwID0gNjA7XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGZvcm0gc3VibWl0IG91dHB1dC5cbiAgICovXG4gIEBPdXRwdXQoKSByZWFkb25seSBzdWJtaXQgPSBuZXcgRXZlbnRFbWl0dGVyPEZvcm1Hcm91cD4oKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGZiOiBGb3JtQnVpbGRlcikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnNjaGVkdWxlVHlwZSA9IHRoaXMuZ2V0U2NoZWR1bGVUeXBlKHRoaXMuYWN0aW9uUmVjaXBlKTtcbiAgICB0aGlzLm9uU2NoZWR1bGVGb3JtQ2hhbmdlKCk7XG4gIH1cblxuICBvblNjaGVkdWxlVHlwZUNoYW5nZShldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBpZiAodGhpcy5zY2hlZHVsZVR5cGUgPT09IHRoaXMuU2NoZWR1bGVUeXBlLlJpZ2h0QXdheSkge1xuICAgICAgdGhpcy5yZXNldFNjaGVkdWxlRm9ybSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zY2hlZHVsZVR5cGUgPT09IHRoaXMuU2NoZWR1bGVUeXBlLkN1c3RvbSkge1xuICAgICAgdGhpcy5hZGRUaW1lT3B0aW9uKCk7XG4gICAgfVxuICAgIHRhcmdldC5ibHVyKCk7XG4gIH1cblxuICBhZGRUaW1lT3B0aW9uKCkge1xuICAgIHRoaXMuc2NoZWR1bGVUaW1lLnB1c2godGhpcy5mYi5jb250cm9sKHRoaXMuZGVmYXVsdFRpbWUpKTtcbiAgICB0aGlzLnN1Ym1pdFNjaGVkdWxlRm9ybSgpO1xuICB9XG5cbiAgZGVsZXRlVGltZU9wdGlvbihpbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5zY2hlZHVsZVRpbWUucmVtb3ZlQXQoaW5kZXgpO1xuICAgIHRoaXMuc3VibWl0U2NoZWR1bGVGb3JtKCk7XG4gIH1cblxuICB0aW1lQ29udHJvbENoYW5nZSgpIHtcbiAgICB0aGlzLnN1Ym1pdFNjaGVkdWxlRm9ybSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBvblNjaGVkdWxlRm9ybUNoYW5nZSgpIHtcbiAgICB0aGlzLnNlbGVjdGVkVGltZU9wdGlvbnMkID0gdGhpcy5zY2hlZHVsZUZvcm0uY29udHJvbHMuc2NoZWR1bGVUaW1lLnZhbHVlQ2hhbmdlcy5waXBlKFxuICAgICAgZmlsdGVyKHZhbCA9PiB2YWwpLFxuICAgICAgdGFwKHZhbCA9PiAodGhpcy5zZWxlY3RlZFRpbWVPcHRpb25zID0gdmFsKSksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFNjaGVkdWxlRm9ybSgpIHtcbiAgICB0aGlzLnN1Ym1pdC5lbWl0KHRoaXMuc2NoZWR1bGVGb3JtKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2NoZWR1bGVUeXBlKHJlY2lwZTogQWN0aW9uUmVjaXBlR2V0UmVzcG9uc2VCb2R5KTogU2NoZWR1bGVUeXBlIHtcbiAgICBjb25zdCBob3Vyc09mRGF5UXVhbnRpdHkgPSByZWNpcGUucmVjdXJyZW5jZT8uaG91cnNPZkRheT8ubGVuZ3RoIHx8IDA7XG4gICAgY29uc3QgaG91cnNTY2hlZHVsZUFwcGxpZWQgPSBob3Vyc09mRGF5UXVhbnRpdHkgIT09IDAgJiYgaG91cnNPZkRheVF1YW50aXR5ICE9PSAyNDtcblxuICAgIGlmICghaG91cnNTY2hlZHVsZUFwcGxpZWQpIHtcbiAgICAgIHJldHVybiBTY2hlZHVsZVR5cGUuUmlnaHRBd2F5O1xuICAgIH1cblxuICAgIHJldHVybiBTY2hlZHVsZVR5cGUuQ3VzdG9tO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFNjaGVkdWxlRm9ybSgpIHtcbiAgICB0aGlzLnNjaGVkdWxlVGltZS5jbGVhcigpO1xuICAgIHRoaXMuc3VibWl0U2NoZWR1bGVGb3JtKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0dGVyIGZvciByZXBlYXQgY291bnQgY29udHJvbFxuICAgKi9cbiAgZ2V0IHNjaGVkdWxlVGltZSgpOiBGb3JtQXJyYXkge1xuICAgIHJldHVybiB0aGlzLnNjaGVkdWxlRm9ybS5nZXQoJ3NjaGVkdWxlVGltZScpIGFzIEZvcm1BcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXR0ZXIgZm9yIGRlZmF1bHQgdGltZSB3aGljaCByZXR1cm5zIDA4OjAwIGZvciB0aGUgZmlyc3Qgb3B0aW9uIGFuZCArMSBob3VyIGZvciBzdWJzZXF1ZW50XG4gICAqL1xuICBwcml2YXRlIGdldCBkZWZhdWx0VGltZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IGxhc3RTZWxlY3RlZFRpbWVPcHRpb24gPSB0aGlzLmxhc3RTZWxlY3RlZFRpbWVPcHRpb247XG4gICAgbGV0IGRlZmF1bHRUaW1lID0gbGFzdFNlbGVjdGVkVGltZU9wdGlvbiArIHRoaXMubWludXRlc1N0ZXA7XG4gICAgaWYgKCFsYXN0U2VsZWN0ZWRUaW1lT3B0aW9uICYmIGxhc3RTZWxlY3RlZFRpbWVPcHRpb24gIT09IDApIHtcbiAgICAgIHJldHVybiBEZWZhdWx0VGltZTtcbiAgICB9XG4gICAgaWYgKGRlZmF1bHRUaW1lID09PSBNaW51dGVzSW5EYXkpIHtcbiAgICAgIGRlZmF1bHRUaW1lID0gMDtcbiAgICB9XG4gICAgd2hpbGUgKHRoaXMuc2VsZWN0ZWRUaW1lT3B0aW9ucy5pbmNsdWRlcyhkZWZhdWx0VGltZSkpIHtcbiAgICAgIGlmIChkZWZhdWx0VGltZSA9PT0gTWludXRlc0luRGF5KSB7XG4gICAgICAgIGRlZmF1bHRUaW1lID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmF1bHRUaW1lID0gZGVmYXVsdFRpbWUgKyA2MDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVmYXVsdFRpbWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0dGVyIGZvciBsYXN0IGFkZGVkIHRpbWUgb3B0aW9uXG4gICAqL1xuICBwcml2YXRlIGdldCBsYXN0U2VsZWN0ZWRUaW1lT3B0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUaW1lLmNvbnRyb2xzW3RoaXMuc2NoZWR1bGVUaW1lLmNvbnRyb2xzLmxlbmd0aCAtIDFdPy52YWx1ZTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJBY3Rpb25zU2NoZWR1bGVOb3RpZmljYXRpb25zQ29tcG9uZW50Q3VzdG9taXphYmxlRGlyZWN0aXZlXScsXG59KVxuZXhwb3J0IGNsYXNzIEFjdGlvbnNTY2hlZHVsZU5vdGlmaWNhdGlvbnNDb21wb25lbnRDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBBY3Rpb25zU2NoZWR1bGVOb3RpZmljYXRpb25zQ29tcG9uZW50LFxuICB2b2lkXG4+IHt9XG4iLCI8bmctY29udGFpbmVyIGJiQWN0aW9uc1NjaGVkdWxlTm90aWZpY2F0aW9uc0NvbXBvbmVudEN1c3RvbWl6YWJsZURpcmVjdGl2ZSBbYmJIb3N0UmVmXT1cInRoaXNcIj4gPC9uZy1jb250YWluZXI+XG48bmctdGVtcGxhdGUgYmJBY3Rpb25zU2NoZWR1bGVOb3RpZmljYXRpb25zQ29tcG9uZW50Q3VzdG9taXphYmxlRGlyZWN0aXZlIGxldC1ob3N0UmVmPlxuICA8ZGl2IGNsYXNzPVwicm93IGJiLWJsb2NrIGJiLWJsb2NrLS1tZCBiYi1zdGFjayBiYi1zdGFjay0tYWxpZ24tYmFzZWxpbmVcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cbiAgICAgIDxzcGFuIGkxOG49XCJOb3RpZnkgbWUgbGFiZWxAQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy50aXRsZVwiPiBOb3RpZnkgbWUgPC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjb2wtM1wiPlxuICAgICAgPGJiLWRyb3Bkb3duLXNpbmdsZS1zZWxlY3QtdWlcbiAgICAgICAgaWNvbk5hbWU9XCJjYXJldC1kb3duXCJcbiAgICAgICAgW3JlcXVpcmVkXT1cInRydWVcIlxuICAgICAgICBbKG5nTW9kZWwpXT1cImhvc3RSZWYuc2NoZWR1bGVUeXBlXCJcbiAgICAgICAgKGNoYW5nZSk9XCJob3N0UmVmLm9uU2NoZWR1bGVUeXBlQ2hhbmdlKCRldmVudClcIlxuICAgICAgICBhcmlhLWxhYmVsPVwiU2NoZWR1bGUgdHlwZVwiXG4gICAgICAgIGkxOG4tYXJpYS1sYWJlbD1cIlxuICAgICAgICAgIFNjaGVkdWxlIHR5cGUgZHJvcGRvd25AQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5zY2hlZHVsZS10eXBlLWRyb3Bkb3duLmFyaWEtbGFiZWxcIlxuICAgICAgICBkYXRhLXJvbGU9XCJub3RpZmljYXRpb25zLXNjaGVkdWxlLXR5cGVcIlxuICAgICAgPlxuICAgICAgICA8YmItZHJvcGRvd24tc2luZ2xlLXNlbGVjdC1vcHRpb24tdWlcbiAgICAgICAgICBpMThuLWxhYmVsPVwiXG4gICAgICAgICAgICBTY2hlZHVsZSB0eXBlIGRyb3Bkb3duIHJpZ2h0IGF3YXlcbiAgICAgICAgICAgIG9wdGlvbkBAYWN0aW9ucy1jb21tb24uYWN0aW9ucy1zY2hlZHVsZS1ub3RpZmljYXRpb25zLnNjaGVkdWxlLXR5cGUtcmlnaHQtYXdheS1vcHRpb24ubGFiZWxcIlxuICAgICAgICAgIGxhYmVsPVwiUmlnaHQgYXdheVwiXG4gICAgICAgICAgW3ZhbHVlXT1cImhvc3RSZWYuU2NoZWR1bGVUeXBlLlJpZ2h0QXdheVwiXG4gICAgICAgID48L2JiLWRyb3Bkb3duLXNpbmdsZS1zZWxlY3Qtb3B0aW9uLXVpPlxuICAgICAgICA8YmItZHJvcGRvd24tc2luZ2xlLXNlbGVjdC1vcHRpb24tdWlcbiAgICAgICAgICBpMThuLWxhYmVsPVwiXG4gICAgICAgICAgICBTY2hlZHVsZSB0eXBlIGRyb3Bkb3duIGN1c3RvbVxuICAgICAgICAgICAgb3B0aW9uQEBhY3Rpb25zLWNvbW1vbi5hY3Rpb25zLXNjaGVkdWxlLW5vdGlmaWNhdGlvbnMuc2NoZWR1bGUtdHlwZS1jdXN0b20tb3B0aW9uLmxhYmVsXCJcbiAgICAgICAgICBsYWJlbD1cIkN1c3RvbVwiXG4gICAgICAgICAgW3ZhbHVlXT1cImhvc3RSZWYuU2NoZWR1bGVUeXBlLkN1c3RvbVwiXG4gICAgICAgID48L2JiLWRyb3Bkb3duLXNpbmdsZS1zZWxlY3Qtb3B0aW9uLXVpPlxuICAgICAgPC9iYi1kcm9wZG93bi1zaW5nbGUtc2VsZWN0LXVpPlxuICAgIDwvZGl2PlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwiY29sLTYgcm93IGJiLXN0YWNrIGJiLXN0YWNrLS1hbGlnbi1iYXNlbGluZSBuby1ndXR0ZXJzXCJcbiAgICAgICpuZ0lmPVwiaG9zdFJlZi5zY2hlZHVsZVR5cGUgPT09IGhvc3RSZWYuU2NoZWR1bGVUeXBlLkN1c3RvbVwiXG4gICAgPlxuICAgICAgPHNwYW5cbiAgICAgICAgY2xhc3M9XCJjb2wtMVwiXG4gICAgICAgIGkxOG49XCJTY2hlZHVsZSB0aW1lIHBpY2tlciB0aXRsZSBAQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5zY2hlZHVsZS10aW1lLXBpY2tlci50aXRsZVwiXG4gICAgICAgID5BdDwvc3BhblxuICAgICAgPlxuICAgICAgPGZvcm0gY2xhc3M9XCJjb2wtMTFcIiBbZm9ybUdyb3VwXT1cImhvc3RSZWYuc2NoZWR1bGVGb3JtXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInJvdyBuby1ndXR0ZXJzIGJiLWJsb2NrIGJiLWJsb2NrLS1tZFwiXG4gICAgICAgICAgZm9ybUFycmF5TmFtZT1cInNjaGVkdWxlVGltZVwiXG4gICAgICAgICAgKm5nRm9yPVwibGV0IHJlZiBvZiBob3N0UmVmLnNjaGVkdWxlVGltZS5jb250cm9sczsgbGV0IGkgPSBpbmRleDsgbGV0IGxhc3QgPSBsYXN0XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxiYi10aW1lLXBpY2tlclxuICAgICAgICAgICAgY2xhc3M9XCJjb2wtNiBhY3Rpb25zLXNjaGVkdWxlLXRpbWUtcGlja2VyX19kcm9wZG93blwiXG4gICAgICAgICAgICBbZm9ybUNvbnRyb2xOYW1lXT1cImlcIlxuICAgICAgICAgICAgW2V4Y2x1ZGVkT3B0aW9uc109XCJob3N0UmVmLnNlbGVjdGVkVGltZU9wdGlvbnMkIHwgYXN5bmNcIlxuICAgICAgICAgICAgW2NvbnRyb2xSZWZdPVwicmVmXCJcbiAgICAgICAgICAgIFttaW51dGVzU3RlcF09XCJob3N0UmVmLm1pbnV0ZXNTdGVwXCJcbiAgICAgICAgICAgIChjaGFuZ2UpPVwiaG9zdFJlZi50aW1lQ29udHJvbENoYW5nZSgpXCJcbiAgICAgICAgICAgIGRhdGEtcm9sZT1cInNjaGVkdWxlLXRpbWUtcGlja2VyXCJcbiAgICAgICAgICAgIGkxOG4tYXJpYS1sYWJlbD1cIlxuICAgICAgICAgICAgICBTY2hlZHVsZSB0aW1lIHBpY2tlciBsYWJlbCBAQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5zY2hlZHVsZS10aW1lLXBpY2tlci5hcmlhLWxhYmVsXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJhY3Rpb25zLXNjaGVkdWxlLW5vdGlmaWNhdGlvbnMtdGltZS1waWNrZXJcIlxuICAgICAgICAgID48L2JiLXRpbWUtcGlja2VyPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgICBjaXJjbGU9XCJ0cnVlXCJcbiAgICAgICAgICAgICpuZ0lmPVwibGFzdCAmJiBpICE9PSAwXCJcbiAgICAgICAgICAgIChjbGljayk9XCJob3N0UmVmLmRlbGV0ZVRpbWVPcHRpb24oaSlcIlxuICAgICAgICAgICAgY29sb3I9XCJsaW5rXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJEZWxldGUgdGltZSBvcHRpb25cIlxuICAgICAgICAgICAgaTE4bi1hcmlhLWxhYmVsPVwiXG4gICAgICAgICAgICAgIFNjaGVkdWxlIGRlbGV0ZSB0aW1lIG9wdGlvblxuICAgICAgICAgICAgICBAQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5zY2hlZHVsZS1kZWxldGUtdGltZS1vcHRpb24uYXJpYS1sYWJlbFwiXG4gICAgICAgICAgICBkYXRhLXJvbGU9XCJkZWxldGUtdGltZS1vcHRpb25cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxiYi1pY29uLXVpIG5hbWU9XCJkZWxldGVcIiBjbGFzcz1cInRleHQtbXV0ZWRcIj48L2JiLWljb24tdWk+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgYmJCdXR0b25cbiAgICAgICAgICBjbGFzcz1cImJiLXN0YWNrX19pdGVtXCJcbiAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgIGNpcmNsZT1cInRydWVcIlxuICAgICAgICAgIGJ1dHRvblNpemU9XCJzbVwiXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgKm5nSWY9XCJob3N0UmVmLnNjaGVkdWxlVGltZS5jb250cm9scy5sZW5ndGggPCBob3N0UmVmLk1heE9wdGlvbnNRdWFudGl0eVwiXG4gICAgICAgICAgKGNsaWNrKT1cImhvc3RSZWYuYWRkVGltZU9wdGlvbigpXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiQWRkIHRpbWUgb3B0aW9uXCJcbiAgICAgICAgICBpMThuLWFyaWEtbGFiZWw9XCJcbiAgICAgICAgICAgIFNjaGVkdWxlIGFkZCB0aW1lIG9wdGlvbiBAQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5zY2hlZHVsZS10aW1lLWFkZC1vcHRpb24uYXJpYS1sYWJlbFwiXG4gICAgICAgICAgZGF0YS1yb2xlPVwiYWRkLXRpbWUtb3B0aW9uXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxiYi1pY29uLXVpIG5hbWU9XCJhZGRcIiBzaXplPVwic21cIj48L2JiLWljb24tdWk+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImJiLWJsb2NrIGJiLWJsb2NrLS1tZCB0ZXh0LWNlbnRlciBiYi10ZXh0LXN1cHBvcnRcIiBkYXRhLXJvbGU9XCJzY2hlZHVsZS1kZXNjcmlwdGlvblwiPlxuICAgIDxlbSBpMThuPVwiU2NoZWR1bGUgZGVzY3JpcHRpb25AQGFjdGlvbnMtY29tbW9uLmFjdGlvbnMtc2NoZWR1bGUtbm90aWZpY2F0aW9ucy5zY2hlZHVsZS1kZXNjcmlwdGlvblwiPlxuICAgICAgTm90aWZpY2F0aW9ucyB3aWxsIGJlIHtob3N0UmVmLnNjaGVkdWxlVHlwZSwgc2VsZWN0LCBDdXN0b20ge2dyb3VwZWQgYW5kIHNlbnQgYXQgc3BlY2lmaWVkIHRpbWUufSBSaWdodEF3YXkge3NlbnRcbiAgICAgIGltbWVkaWF0ZWx5Ln19XG4gICAgPC9lbT5cbiAgICA8aHIgLz5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuIl19