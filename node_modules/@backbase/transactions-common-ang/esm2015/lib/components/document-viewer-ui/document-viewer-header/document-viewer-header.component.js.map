{"version":3,"file":"document-viewer-header.component.js","sourceRoot":"","sources":["../../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/document-viewer-ui/document-viewer-header/document-viewer-header.component.ts","../../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/document-viewer-ui/document-viewer-header/document-viewer-header.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAa,MAAM,eAAe,CAAC;AACnH,OAAO,EAAE,kBAAkB,EAAE,YAAY,EAAE,MAAM,2CAA2C,CAAC;;;;;AAO7F,MAAM,OAAO,6BAA6B;IAcxC,YAA6B,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;QALlC,cAAS,GAAG,KAAK,CAAC;QAC3B,2DAA2D;QACjD,UAAK,GAAG,IAAI,YAAY,EAAQ,CAAC;IAGG,CAAC;IAX/C,IAAa,MAAM,CAAC,GAAuB;QACzC,IAAI,GAAG,EAAE;YACP,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;SAC9B;IACH,CAAC;IAQD,WAAW;QACT,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAO;SACR;QAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACzC,CAAC;IAED,eAAe;QACb,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAO;SACR;QAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAC3D,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAO;SACR;QAED,YAAY,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACtD,CAAC;IAEO,SAAS,CAAC,iBAAyB;QACzC,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QAC1B,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAW,CAAC;QAC/D,KAAK,CAAC,GAAG,GAAG,iBAAiB,CAAC;QAC9B,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAE1C,OAAO,SAAS,CAAC;IACnB,CAAC;IAEO,WAAW,CAAC,MAAc;QAChC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;YACjC,UAAU,CAAC,GAAG,EAAE;gBACd,MAAM,CAAC,KAAK,EAAE,CAAC;gBACf,MAAM,CAAC,KAAK,EAAE,CAAC;YACjB,CAAC,EAAE,CAAC,CAAC,CAAC;QACR,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,eAAe;QACrB,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;SACpD;IACH,CAAC;;2HAlEU,6BAA6B;+GAA7B,6BAA6B,gMCR1C,skLA8IA;4FDtIa,6BAA6B;kBALzC,SAAS;mBAAC;oBACT,QAAQ,EAAE,2BAA2B;oBACrC,WAAW,EAAE,yCAAyC;oBACtD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;6FAEU,QAAQ;sBAAhB,KAAK;gBACG,QAAQ;sBAAhB,KAAK;gBACO,MAAM;sBAAlB,KAAK;gBAMG,SAAS;sBAAjB,KAAK;gBAEI,KAAK;sBAAd,MAAM","sourcesContent":["import { ChangeDetectionStrategy, Component, Input, Output, EventEmitter, NgZone, OnDestroy } from '@angular/core';\nimport { DocumentViewerType, downloadFile } from '../../../model/UI/document-viewer-commons';\n\n@Component({\n  selector: 'bb-document-viewer-header',\n  templateUrl: './document-viewer-header.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DocumentViewerHeaderComponent implements OnDestroy {\n  @Input() filename!: string;\n  @Input() filetype?: DocumentViewerType;\n  @Input() set source(src: string | undefined) {\n    if (src) {\n      this.revokeObjectURL();\n      this.documentObjectURL = src;\n    }\n  }\n  @Input() isLoading = false;\n  //eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() close = new EventEmitter<void>();\n  private documentObjectURL?: string;\n\n  constructor(private readonly ngZone: NgZone) {}\n\n  ngOnDestroy() {\n    this.revokeObjectURL();\n  }\n\n  onOpenDocument(): void {\n    if (!this.documentObjectURL) {\n      return;\n    }\n\n    this.openImage(this.documentObjectURL);\n  }\n\n  onPrintDocument(): void {\n    if (!this.documentObjectURL) {\n      return;\n    }\n\n    this.printWindow(this.openImage(this.documentObjectURL));\n  }\n\n  onDownloadDocument(): void {\n    if (!this.documentObjectURL) {\n      return;\n    }\n\n    downloadFile(this.documentObjectURL, this.filename);\n  }\n\n  private openImage(documentObjectURL: string): Window {\n    const image = new Image();\n    const newWindow = window.open('about:blank', '_new') as Window;\n    image.src = documentObjectURL;\n    newWindow.document.write(image.outerHTML);\n\n    return newWindow;\n  }\n\n  private printWindow(window: Window): void {\n    this.ngZone.runOutsideAngular(() => {\n      setTimeout(() => {\n        window.focus();\n        window.print();\n      }, 0);\n    });\n  }\n\n  private revokeObjectURL(): void {\n    if (this.documentObjectURL) {\n      window.URL.revokeObjectURL(this.documentObjectURL);\n    }\n  }\n}\n","<div class=\"bb-document-viewer-header\">\n  <span class=\"bb-document-viewer-header__title bb-stack\">\n    <bb-icon-ui\n      class=\"bb-stack__item bb-stack__item--spacing-sm\"\n      data-role=\"document-viewer-header-icon\"\n      name=\"description\"\n      size=\"md\"\n    ></bb-icon-ui>\n    <span class=\"bb-stack__item\" data-role=\"document-viewer-header-filename\">{{ filename }}</span>\n  </span>\n  <div class=\"bb-stack\">\n    <!-- web view -->\n    <div\n      class=\"\n        bb-stack__item bb-stack__item--spacing-none bb-stack__item--push-right\n        bb-document-viewer-header-controls__web-view\n      \"\n    >\n      <button\n        bbButton\n        data-role=\"print-document-btn\"\n        class=\"bb-document-viewer-interactor-controls__button bb-document-viewer-header__spacer\"\n        aria-label=\"print\"\n        i18n-aria-label=\"Print document button@@document-viewer-header.aria-label.print-document-btn\"\n        buttonSize=\"sm\"\n        (click)=\"!isLoading && onPrintDocument()\"\n      >\n        <bb-icon-ui name=\"local-printshop\" size=\"md\" color=\"light\"></bb-icon-ui>\n      </button>\n\n      <button\n        bbButton\n        data-role=\"download-document-btn\"\n        class=\"bb-document-viewer-interactor-controls__button bb-document-viewer-header__spacer\"\n        aria-label=\"download\"\n        i18n-aria-label=\"Download document button@document-viewer-header.aria-label.download-document-btn\"\n        buttonSize=\"sm\"\n        (click)=\"!isLoading && onDownloadDocument()\"\n      >\n        <bb-icon-ui name=\"save-alt\" size=\"md\" color=\"light\"></bb-icon-ui>\n      </button>\n\n      <button\n        bbButton\n        data-role=\"open-document-btn\"\n        class=\"bb-document-viewer-interactor-controls__button bb-document-viewer-header__spacer\"\n        aria-label=\"new tab\"\n        i18n-aria-label=\"Open document in new tab button@@document-viewer-header.aria-label.open-document-new-tab-btn\"\n        buttonSize=\"sm\"\n        (click)=\"!isLoading && onOpenDocument()\"\n      >\n        <bb-icon-ui name=\"open-in-new\" size=\"md\" color=\"light\"></bb-icon-ui>\n      </button>\n\n      <button\n        bbButton\n        data-role=\"close-document-btn\"\n        class=\"bb-document-viewer-interactor-controls__button bb-document-viewer-header__spacer\"\n        aria-label=\"close\"\n        i18n-aria-label=\"Close document button@@document-viewer-header.aria-label.close-btn\"\n        buttonSize=\"sm\"\n        (click)=\"close.emit()\"\n      >\n        <bb-icon-ui name=\"times\" size=\"md\" color=\"light\"></bb-icon-ui>\n      </button>\n    </div>\n\n    <!-- mobile view -->\n    <div\n      class=\"\n        bb-stack__item bb-stack__item--spacing-none bb-stack__item--push-right\n        bb-document-viewer-header-controls__mobile-view\n      \"\n    >\n      <div class=\"bb-stack\">\n        <bb-dropdown-menu-ui\n          container=\"body\"\n          data-role=\"options-menu-dropdown\"\n          class=\"bb-stack__item\"\n          icon=\"ellipsis-h\"\n          btnColor=\"muted\"\n          buttonSize=\"sm\"\n          [btnCircle]=\"true\"\n          iconSize=\"md\"\n          iconColor=\"light\"\n          ariaLabel=\"Check image export dropdown menu\"\n          i18n-ariaLabel=\"Check image export dropdown menu@@document-viewer-header.export-dropdown-menu.ariaLabel\"\n        >\n          <ng-template bbDropdownMenuItem>\n            <a\n              role=\"menuitem\"\n              class=\"dropdown-item\"\n              data-role=\"open-document-item\"\n              (click)=\"!isLoading && onOpenDocument()\"\n              href=\"javaScript:void(0);\"\n            >\n              <bb-icon-ui class=\"bb-document-viewer-header__dropdown-icon\" name=\"open-in-new\" size=\"md\"></bb-icon-ui>\n              <span i18n=\"Open image in new tab@@document-viewer-header.controlsList.open-in-new-tab\"\n                >Open in new tab</span\n              >\n            </a>\n            <a\n              role=\"menuitem\"\n              class=\"dropdown-item\"\n              data-role=\"download-document-item\"\n              (click)=\"!isLoading && onDownloadDocument()\"\n              href=\"javaScript:void(0);\"\n            >\n              <bb-icon-ui class=\"bb-document-viewer-header__dropdown-icon\" name=\"save-alt\" size=\"md\"></bb-icon-ui>\n              <span i18n=\"Download image@@document-viewer-header.controlsList.download-image\">Download</span>\n            </a>\n            <a\n              role=\"menuitem\"\n              class=\"dropdown-item\"\n              data-role=\"print-document-item\"\n              (click)=\"!isLoading && onPrintDocument()\"\n              href=\"javaScript:void(0);\"\n            >\n              <bb-icon-ui\n                class=\"bb-document-viewer-header__dropdown-icon\"\n                name=\"local-printshop\"\n                size=\"md\"\n              ></bb-icon-ui>\n              <span i18n=\"Print image@@document-viewer-header.controlsList.print-image\">Print</span>\n            </a>\n          </ng-template>\n        </bb-dropdown-menu-ui>\n        <button\n          bbButton\n          data-role=\"close-document-btn\"\n          class=\"bb-stack__item bb-document-viewer-interactor-controls__button bb-document-viewer-header__spacer\"\n          aria-label=\"close\"\n          i18n-aria-label=\"Close document button@@document-viewer-header.aria-label.close-btn\"\n          buttonSize=\"sm\"\n          (click)=\"close.emit()\"\n        >\n          <bb-icon-ui name=\"times\" size=\"md\" color=\"light\"></bb-icon-ui>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n"]}