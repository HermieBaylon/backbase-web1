{"version":3,"file":"transaction-category-icon.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transaction-category-icon.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transaction-category-icon.component.html"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EAET,KAAK,EAEL,SAAS,EAET,iBAAiB,EACjB,uBAAuB,GACxB,MAAM,eAAe,CAAC;AAGvB,OAAO,EAAE,wCAAwC,EAAE,MAAM,6DAA6D,CAAC;;;;AAOvH,MAAM,OAAO,gCAAgC;IA6C3C,YACU,iCAA2E,EAClE,EAAqB;QAD9B,sCAAiC,GAAjC,iCAAiC,CAA0C;QAClE,OAAE,GAAF,EAAE,CAAmB;QA1CxC;;WAEG;QACM,WAAM,GAAG,KAAK,CAAC;QAOxB,mBAAmB;QAEnB;;WAEG;QACH,mBAAc,GAAG,KAAK,CAAC;IA4BpB,CAAC;IApBJ,QAAQ;QACN,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;YAClC,MAAM,IAAI,KAAK,CAAC,uCAAuC,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,CAAC;SAClF;QAED,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,iCAAiC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IACzF,CAAC;IAED,eAAe;QACb,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,MAAM,GAAG,GAAG,EAAE;gBAC7C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC;YACzB,CAAC,CAAC;SACH;IACH,CAAC;;8HA3CU,gCAAgC;kHAAhC,gCAAgC,4PCnB7C,4pBAkBA;4FDCa,gCAAgC;kBAL5C,SAAS;mBAAC;oBACT,QAAQ,EAAE,8BAA8B;oBACxC,WAAW,EAAE,4CAA4C;oBACzD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;+JAKU,WAAW;sBAAnB,KAAK;gBAIG,MAAM;sBAAd,KAAK;gBAIG,IAAI;sBAAZ,KAAK;gBAEsB,aAAa;sBAAxC,SAAS;uBAAC,eAAe","sourcesContent":["import {\n  Component,\n  OnInit,\n  Input,\n  ElementRef,\n  ViewChild,\n  AfterViewInit,\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n} from '@angular/core';\nimport { Transaction } from '../../model/transaction.model';\nimport { BaseTransactionIcon } from '../../model/transaction-category.model';\nimport { TransactionsIconCategoriesFactoryService } from '../../services/transactions-icon-categories-factory.service';\n\n@Component({\n  selector: 'bb-transaction-category-icon',\n  templateUrl: './transaction-category-icon.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionCategoryIconComponent implements OnInit, AfterViewInit {\n  /**\n   * The transaction this component shows the category icon of.\n   */\n  @Input() transaction: Transaction | undefined;\n  /**\n   * Whether to show the icon in a circle.\n   */\n  @Input() circle = false;\n  /**\n   * Whether to show different sizes of icons.\n   */\n  @Input() size: 'small' | 'large' | undefined;\n  /* eslint-disable */\n  @ViewChild('categoryImage') categoryImage: ElementRef | undefined;\n  /* eslint-enable */\n\n  /**\n   * Determines if the image is done loading.\n   */\n  hasImageLoaded = false;\n\n  /**\n   * Contains the transaction class name that has to be used together\n   * with the title of the icon\n   */\n  transactionIcon: BaseTransactionIcon | undefined;\n\n  ngOnInit() {\n    if (this.transaction === undefined) {\n      throw new Error(`\"transaction\" input is required in \"${this.constructor.name}\"`);\n    }\n\n    this.transactionIcon = this.transactionsIconCategoriesFactory.create(this.transaction);\n  }\n\n  ngAfterViewInit() {\n    if (this.categoryImage) {\n      this.categoryImage.nativeElement.onload = () => {\n        this.hasImageLoaded = true;\n        this.cd.markForCheck();\n      };\n    }\n  }\n\n  constructor(\n    private transactionsIconCategoriesFactory: TransactionsIconCategoriesFactoryService,\n    private readonly cd: ChangeDetectorRef,\n  ) {}\n}\n","<div\n  aria-hidden=\"true\"\n  class=\"bb-transaction-category bb-transaction-category--enriched\"\n  title=\"{{ transaction?.merchant ? transaction?.merchant?.name : transactionIcon?.title }}\"\n  [ngClass]=\"[\n    circle ? 'bb-transaction-category-icon-circle' : 'bb-transaction-category-icon',\n    size ? 'bb-transaction-category--' + size : '',\n    !transaction?.merchant?.logo || !hasImageLoaded ? transactionIcon?.formatClassName() : ''\n  ]\"\n>\n  <img\n    class=\"bb-transaction-category__image\"\n    *ngIf=\"transaction?.merchant?.logo\"\n    [hidden]=\"!hasImageLoaded\"\n    [src]=\"transaction?.merchant?.logo\"\n    #categoryImage\n  />\n</div>\n"]}