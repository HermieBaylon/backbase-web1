{"version":3,"file":"transaction-check-image.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transaction-check-image.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transaction-check-image.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAC1E,OAAO,EAEL,0BAA0B,GAE3B,MAAM,6CAA6C,CAAC;AAErD,OAAO,EAA8B,+BAA+B,EAAE,MAAM,wCAAwC,CAAC;;;;;;AAOrH,MAAM,OAAO,8BAA8B;IAL3C;QAuBW,qBAAgB,GAAG,+BAA+B,CAAC;QAQ5D;;;;WAIG;QACH,UAAK,GAAG,CAAC,CAAC;KAwBX;IAlDC;;OAEG;IACH,2BAA2B;IAC3B,IACI,eAAe,CAAC,KAAoC;QACtD,IAAI,CAAC,UAAU,GAAG,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,0BAA0B,CAAC,KAAK,CAAC,CAAC;QACvG,IAAI,CAAC,SAAS,GAAG,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,0BAA0B,CAAC,IAAI,CAAC,CAAC;IACvG,CAAC;IAoBD,IAAI,SAAS;QACX,OAAO,CACL,IAAI,CAAC,+BAA+B;YACpC,IAAI,CAAC,+BAA+B,CAAC,WAAW;YAChD,IAAI,CAAC,+BAA+B,CAAC,WAAW,GAAG,CAAC,CACrD,CAAC;IACJ,CAAC;IAED,IAAI,MAAM;QACR,OAAO,CACL,IAAI,CAAC,+BAA+B;YACpC,IAAI,CAAC,+BAA+B,CAAC,WAAW,KAAK,+BAA+B,CAAC,IAAI,CAC1F,CAAC;IACJ,CAAC;IAED,OAAO;QACL,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;IACjB,CAAC;IAED,WAAW,CAAC,KAAa;QACvB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;;4HAtDU,8BAA8B;gHAA9B,8BAA8B,kNCd3C,+mGA0EA;4FD5Da,8BAA8B;kBAL1C,SAAS;mBAAC;oBACT,QAAQ,EAAE,4BAA4B;oBACtC,WAAW,EAAE,0CAA0C;oBACvD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAKU,WAAW;sBAAnB,KAAK;gBAMF,eAAe;sBADlB,KAAK;gBAQG,+BAA+B;sBAAvC,KAAK","sourcesContent":["import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport {\n  TransactionCheckImageResponse,\n  TransactionsCheckImageSide,\n  TransactionsCheckImage,\n} from '../../model/transactions-check-images.model';\nimport { Transaction } from '../../model/transaction.model';\nimport { TransactionsDetailsLoading, TransactionsDetailsLoadingState } from '../../model/transactions-details.model';\n\n@Component({\n  selector: 'bb-transaction-check-image',\n  templateUrl: './transaction-check-image.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionCheckImageComponent {\n  /**\n   * The transaction object\n   */\n  @Input() transaction: Transaction | undefined;\n  /**\n   * The check image object.\n   */\n  // eslint-disable-next-line\n  @Input()\n  set checkImagesList(value: TransactionCheckImageResponse) {\n    this.imageFront = value && value.images.find((data) => data.side === TransactionsCheckImageSide.FRONT);\n    this.imageBack = value && value.images.find((data) => data.side === TransactionsCheckImageSide.BACK);\n  }\n  /**\n   * The transaction details loading status.\n   */\n  @Input() transactionDetailsLoadingStatus: TransactionsDetailsLoading | undefined;\n  readonly loadingStateEnum = TransactionsDetailsLoadingState;\n\n  /**\n   * Sides of the check after being proccesed by formatter class\n   */\n  imageFront: TransactionsCheckImage | undefined;\n  imageBack: TransactionsCheckImage | undefined;\n\n  /**\n   * Index to display in the document viewer. For the purpose of hidding and showing\n   * the viewer this will be base 1\n   * when the value is 0 the document viewer will not be visible\n   */\n  index = 0;\n\n  get hasErrors() {\n    return (\n      this.transactionDetailsLoadingStatus &&\n      this.transactionDetailsLoadingStatus.checkImages &&\n      this.transactionDetailsLoadingStatus.checkImages < 0\n    );\n  }\n\n  get isDone() {\n    return (\n      this.transactionDetailsLoadingStatus &&\n      this.transactionDetailsLoadingStatus.checkImages === TransactionsDetailsLoadingState.done\n    );\n  }\n\n  onClose() {\n    this.index = 0;\n  }\n\n  selectImage(index: number) {\n    this.index = index;\n  }\n}\n","<ng-container *ngIf=\"isDone || hasErrors; else loadingState\">\n  <div class=\"bb-stack bb-stack--wrap\">\n    <div class=\"bb-stack__item\">\n      <bb-transaction-check-image-item\n        *ngIf=\"!!imageFront || hasErrors\"\n        [image]=\"imageFront\"\n        data-role=\"check-image-item-front\"\n        (selectImage)=\"selectImage(1)\"\n        [transaction]=\"transaction\"\n        sideText=\"Front\"\n        imageAlt=\"Front check image\"\n        i18n-sideText=\"Front side title of check image@@transactions.detail.check-image.front.title\"\n        i18n-imageAlt=\"Front side alt of check image@@transactions.detail.check-image.front.alt-image\"\n      ></bb-transaction-check-image-item>\n    </div>\n\n    <div class=\"bb-stack__item\">\n      <bb-transaction-check-image-item\n        *ngIf=\"!!imageBack || hasErrors\"\n        data-role=\"check-image-item-back\"\n        (selectImage)=\"selectImage(imageFront ? 2 : 1)\"\n        [image]=\"imageBack\"\n        [transaction]=\"transaction\"\n        sideText=\"Back\"\n        imageAlt=\"Back check image\"\n        i18n-sideText=\"Back side title of check image@@transactions.detail.check-image.back.title\"\n        i18n-imageAlt=\"Back side alt of check image@@transactions.detail.check-image.back.alt-image\"\n      ></bb-transaction-check-image-item>\n    </div>\n  </div>\n\n  <bb-transaction-check-image-document-viewer\n    *ngIf=\"index > 0\"\n    data-role=\"check-image-document-viewer\"\n    [imageCheckNumber]=\"transaction?.checkSerialNumber\"\n    [imageFront]=\"imageFront\"\n    [imageBack]=\"imageBack\"\n    [position]=\"index - 1\"\n    (closeViewer)=\"onClose()\"\n  ></bb-transaction-check-image-document-viewer>\n\n  <ng-container *ngIf=\"hasErrors\">\n    <span\n      i18n=\"Something went wrong@@transactions.detail.check-image.server-error\"\n      class=\"bb-input-validation-message\"\n      data-role=\"check-image-server-error-state\"\n      *ngIf=\"transactionDetailsLoadingStatus?.checkImages === loadingStateEnum?.serverError\"\n    >\n      Something went wrong. Please try again later.\n    </span>\n\n    <span\n      i18n=\"Check images cannot be viewed at the moment@@transactions.detail.check-image.bad-request-error\"\n      class=\"bb-input-validation-message\"\n      data-role=\"check-image-bad-request-error-state\"\n      *ngIf=\"transactionDetailsLoadingStatus?.checkImages === loadingStateEnum?.badRequestError\"\n    >\n      Check images cannot be viewed at the moment, please try again later or contact your financial institution.\n    </span>\n\n    <span\n      i18n=\"Check images cannot be viewed at the moment@@transactions.detail.check-image.not-found-error\"\n      class=\"bb-input-validation-message\"\n      data-role=\"check-image-not-found-error-state\"\n      *ngIf=\"transactionDetailsLoadingStatus?.checkImages === loadingStateEnum?.notFoundError\"\n    >\n      Check images cannot be viewed at the moment, please try again later or contact your financial institution.\n    </span>\n  </ng-container>\n</ng-container>\n\n<ng-template #loadingState>\n  <bb-loading-indicator-ui loaderSize=\"lg\"></bb-loading-indicator-ui>\n</ng-template>\n"]}