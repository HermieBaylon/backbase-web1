{"version":3,"file":"transactions-map-ui.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transactions-map-ui.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transactions-map-ui.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,SAAS,EAAiB,KAAK,EAAc,uBAAuB,EAAE,MAAM,eAAe,CAAC;;AAQhH,MAAM,OAAO,0BAA0B;IAM7B,eAAe,CAAC,QAA6B;QACnD,IAAI,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,SAAS,EAAE;YAC3C,OAAO;gBACL,MAAM,EAAE;oBACN,GAAG,EAAE,QAAQ,CAAC,QAAQ;oBACtB,GAAG,EAAE,QAAQ,CAAC,SAAS;iBACxB;gBACD,IAAI,EAAE,EAAE;gBACR,gBAAgB,EAAE,IAAI;gBACtB,WAAW,EAAE,KAAK;gBAClB,MAAM,EAAE;oBACN;wBACE,WAAW,EAAE,KAAK;wBAClB,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC;qBACjC;iBACF;aACF,CAAC;SACH;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,cAAc,CAAC,QAA6B;QAC1C,OAAO,SAAS,CAAC,GAAG,QAAQ,CAAC,QAAQ,KAAK,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC;IAClE,CAAC;IAED,eAAe;QACb,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,EAAE;YACtC,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpD,MAAM,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;YAC1E,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;gBACtE,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAClD,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;oBACpC,QAAQ,EAAE;wBACR,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ;wBAC3B,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS;qBAC7B;oBACD,GAAG;iBACJ,CAAC,CAAC;gBACH,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE;oBAC/B,MAAM,CAAC,IAAI,CAAC,mCAAmC,GAAG,MAAM,EAAE,QAAQ,CAAC,CAAC;gBACtE,CAAC,CAAC,CAAC;aACJ;SACF;IACH,CAAC;;wHAlDU,0BAA0B;4GAA1B,0BAA0B,gNCRvC,yEACA;4FDOa,0BAA0B;kBALtC,SAAS;mBAAC;oBACT,QAAQ,EAAE,wBAAwB;oBAClC,WAAW,EAAE,oCAAoC;oBACjD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAG8B,YAAY;sBAAxC,SAAS;uBAAC,gBAAgB;gBAElB,QAAQ;sBAAhB,KAAK","sourcesContent":["import { Component, ViewChild, AfterViewInit, Input, ElementRef, ChangeDetectionStrategy } from '@angular/core';\nimport { TransactionLocation } from '@backbase/data-ang/transactions';\n\n@Component({\n  selector: 'bb-transactions-map-ui',\n  templateUrl: 'transactions-map-ui.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionsMapUiComponent implements AfterViewInit {\n  /* eslint-disable */\n  @ViewChild('bbMapContainer') mapContainer: ElementRef<HTMLElement> | undefined;\n  /* eslint-enable */\n  @Input() location: TransactionLocation | undefined;\n\n  private buildMapOptions(location: TransactionLocation): google.maps.MapOptions | undefined {\n    if (location.latitude && location.longitude) {\n      return {\n        center: {\n          lat: location.latitude,\n          lng: location.longitude,\n        },\n        zoom: 10,\n        disableDefaultUI: true,\n        zoomControl: false,\n        styles: [\n          {\n            featureType: 'poi',\n            stylers: [{ visibility: 'off' }],\n          },\n        ],\n      };\n    }\n\n    return undefined;\n  }\n\n  getFullAddress(location: TransactionLocation): string {\n    return encodeURI(`${location.latitude}, ${location.longitude}`);\n  }\n\n  ngAfterViewInit() {\n    if (this.location && this.mapContainer) {\n      const options = this.buildMapOptions(this.location);\n      const map = new google.maps.Map(this.mapContainer.nativeElement, options);\n      if (this.location && this.location.latitude && this.location.longitude) {\n        const mapUrl = this.getFullAddress(this.location);\n        const marker = new google.maps.Marker({\n          position: {\n            lat: this.location.latitude,\n            lng: this.location.longitude,\n          },\n          map,\n        });\n        marker.addListener('click', () => {\n          window.open('https://www.google.com/maps/dir//' + mapUrl, '_blank');\n        });\n      }\n    }\n  }\n}\n","<div class=\"bb-transcations-geolocation-map\" #bbMapContainer></div>\n"]}