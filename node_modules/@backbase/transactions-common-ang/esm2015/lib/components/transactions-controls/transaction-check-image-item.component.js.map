{"version":3,"file":"transaction-check-image-item.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transaction-check-image-item.component.ts","../../../../../../../../../libs/widgets/transactions/transactions-common-ang/src/lib/components/transactions-controls/transaction-check-image-item.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAGhG,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;;;;;;AAOzD,MAAM,OAAO,kCAAkC;IAkC7C,YAA6B,SAAuB;QAAvB,cAAS,GAAT,SAAS,CAAc;QA/B3C,aAAQ,GAAG,EAAE,CAAC;QACd,aAAQ,GAAG,EAAE,CAAC;QAEb,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;IA4BM,CAAC;IA1BxD,IAAI,aAAa;QACf,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7E,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;QAE/C,OAAO,GAAG,IAAI,CAAC,gBAAgB,IAAI,IAAI,IAAI,QAAQ,EAAE,CAAC;IACxD,CAAC;IAED,IAAI,mBAAmB;QACrB,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;QACvD,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QAErD,OAAO,QAAQ,QAAQ,WAAW,OAAO,EAAE,CAAC;IAC9C,CAAC;IAED,IAAY,gBAAgB;QAC1B,OAAO,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC;IAChE,CAAC;IAED,iBAAiB;QACf,OAAO,IAAI,CAAC,SAAS,CAAC,8BAA8B,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACjF,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;IAC1B,CAAC;;gIAhCU,kCAAkC;oHAAlC,kCAAkC,oNCV/C,44CAyCA;4FD/Ba,kCAAkC;kBAL9C,SAAS;mBAAC;oBACT,QAAQ,EAAE,iCAAiC;oBAC3C,WAAW,EAAE,6CAA6C;oBAC1D,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;mGAEU,KAAK;sBAAb,KAAK;gBACG,WAAW;sBAAnB,KAAK;gBACG,QAAQ;sBAAhB,KAAK;gBACG,QAAQ;sBAAhB,KAAK;gBAEI,WAAW;sBAApB,MAAM","sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Transaction } from '../../model/transaction.model';\nimport { TransactionsCheckImage } from '../../model/transactions-check-images.model';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'bb-transaction-check-image-item',\n  templateUrl: 'transaction-check-image-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TransactionCheckImageItemComponent {\n  @Input() image: TransactionsCheckImage | undefined;\n  @Input() transaction: Transaction | undefined;\n  @Input() sideText = '';\n  @Input() imageAlt = '';\n\n  @Output() selectImage = new EventEmitter<void>();\n\n  get imageFileName() {\n    const fileType = this.image ? this.image.mimeType.replace('image/', '') : '';\n    const side = this.image ? this.image.side : '';\n\n    return `${this.imageCheckNumber}-${side}.${fileType}`;\n  }\n\n  get formatedImageSource() {\n    const mimeType = this.image ? this.image.mimeType : '';\n    const content = this.image ? this.image.content : '';\n\n    return `data:${mimeType};base64,${content}`;\n  }\n\n  private get imageCheckNumber() {\n    return this.transaction && this.transaction.checkSerialNumber;\n  }\n\n  createImageSource() {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(this.formatedImageSource);\n  }\n\n  toggleDocumentViewer() {\n    this.selectImage.emit();\n  }\n\n  constructor(private readonly sanitizer: DomSanitizer) {}\n}\n","<ng-container>\n  <span>{{ sideText }}</span>\n  <div\n    role=\"img\"\n    data-role=\"check-image-item\"\n    class=\"bb-check-img-container\"\n    (click)=\"!!image && toggleDocumentViewer()\"\n    attr.aria-label=\"{{ sideText }} image container\"\n    i18n-aria-label=\"\n      Image container for front or back check image@@transaction-check-image-item.aria-label.image-container\"\n    bbAccessibilityKeyboard\n  >\n    <ng-container *ngIf=\"!!image; else noImage\">\n      <div class=\"bb-check-img-container-state\">\n        <div class=\"bb-check-img-container-state__container\">\n          <bb-icon-ui\n            name=\"remove-red-eye\"\n            size=\"lg\"\n            color=\"white\"\n            aria-label=\"Expand Image\"\n            i18n-aria-label=\"Expand image@@transaction-check-image-item.aria-label.expand-icon\"\n          ></bb-icon-ui>\n        </div>\n      </div>\n      <img class=\"bb-check-img-container__img\" alt=\"{{ imageAlt }}\" [src]=\"createImageSource()\" />\n    </ng-container>\n  </div>\n</ng-container>\n\n<ng-template #noImage>\n  <div class=\"bb-check-no-img\">\n    <div class=\"bb-check-no-img__icon\">\n      <bb-icon-ui\n        name=\"broken-image\"\n        size=\"lg\"\n        aria-label=\"No image\"\n        i18n-aria-label=\"No image@@transaction-check-image-item.aria-label.no-image-icon\"\n      ></bb-icon-ui>\n    </div>\n  </div>\n</ng-template>\n"]}