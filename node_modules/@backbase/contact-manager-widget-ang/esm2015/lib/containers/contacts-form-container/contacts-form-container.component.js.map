{"version":3,"file":"contacts-form-container.component.js","sourceRoot":"","sources":["../../../../../../../libs/contact-manager-widget-ang/src/lib/containers/contacts-form-container/contacts-form-container.component.ts","../../../../../../../libs/contact-manager-widget-ang/src/lib/containers/contacts-form-container/contacts-form-container.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnInit,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { Observable, of, Subject } from 'rxjs';\nimport { catchError, map, mergeMap, take, withLatestFrom } from 'rxjs/operators';\n\nimport { ContactsService } from '../../services/contacts.service';\nimport { ContactItem } from '@backbase/contact-common-ang';\nimport { ContactsFormComponent } from '../../components/contacts-form/contacts-form.component';\nimport { ContactsNavigationService, View } from '../../services/contacts-navigation.service';\nimport { ContactsFormItem } from '../../models/types';\nimport { ContactManagerPreferencesService } from '../../services/contacts-preferences.service';\nimport { NotificationService } from '@backbase/ui-ang/notification';\n\n/**\n * Container component for showing contact details.\n *\n * @usageNotes\n *\n * ### Display create/ edit form for contacts\n *\n * ```html\n * <bb-contacts-form-container></bb-contacts-form-container>\n * ```\n *\n * ### Additionally use the container component in routing.\n *\n * ```typescript\n * const routes: [\n *   {\n *   path: 'edit/:id/:type',\n *   canDeactivate: [CanDeactivateGuard],\n *   component: ContactsFormContainerComponent,\n * }]\n *\n * ```\n * @ngModule ContactManagerWidgetModule\n */\n@Component({\n  selector: 'bb-contacts-form-container',\n  templateUrl: './contacts-form-container.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ContactsFormContainerComponent implements OnInit {\n  readonly hostRef = this;\n  readonly itemId = this.route.paramMap.pipe(map((params: ParamMap) => params.get('id')));\n\n  readonly itemType$ = this.route.paramMap.pipe(map((params: ParamMap) => params.get('type')));\n\n  readonly item: Observable<ContactsFormItem | undefined> = this.service.item.pipe(\n    map((item: ContactItem | undefined): ContactsFormItem => this.fromService(item)),\n  );\n\n  readonly notificationTimeout$: Observable<number> = this.propertiesService.notificationDismissTime$;\n\n  @ViewChild(ContactsFormComponent)\n  formComponent!: ContactsFormComponent;\n\n  @ViewChild('notificationCreateSuccess')\n  notificationCreateSuccessTemplate?: TemplateRef<any>;\n\n  @ViewChild('notificationCreateError')\n  notificationCreateErrorTemplate?: TemplateRef<any>;\n\n  @ViewChild('notificationEditSuccess')\n  notificationEditSuccessTemplate?: TemplateRef<any>;\n\n  @ViewChild('notificationEditError')\n  notificationEditErrorTemplate?: TemplateRef<any>;\n\n  @ViewChild('discardChangesModalContent')\n  discardChangesModalContent!: ViewContainerRef;\n\n  isDiscardConfirmOpened = false;\n  discard$ = new Subject<boolean>();\n  isPendingRequest = false;\n\n  constructor(\n    private readonly service: ContactsService,\n    private readonly route: ActivatedRoute,\n    private readonly navigation: ContactsNavigationService,\n    private readonly notificationService: NotificationService,\n    private readonly propertiesService: ContactManagerPreferencesService,\n    private readonly cdr: ChangeDetectorRef,\n  ) {\n    service.getItemFrom(this.itemId);\n  }\n\n  /**\n   * onInit - lifecycle hook for setting current view.\n   */\n  ngOnInit(): void {\n    this.navigation.currentView = View.Edit;\n    this.isPendingRequest = false;\n  }\n\n  /**\n   * Calling the save api and showing the notification.\n   *\n   * @param {ContactsFormItem} item - Contact Object while save\n   */\n  save(item: ContactsFormItem): void {\n    this.isPendingRequest = true;\n    this.itemId\n      .pipe(\n        mergeMap(() => this.service.save(this.toService(item))),\n        catchError(() => of(undefined)),\n        withLatestFrom(this.notificationTimeout$),\n        map(([id, timeout]): { id: string | undefined; timeout: number } => ({ id, timeout })),\n        take(1),\n      )\n      .subscribe(({ id, timeout }) => {\n        this.isPendingRequest = false;\n        this.formComponent.contactsForm.markAsPristine();\n        if (id) {\n          this.navigation.select(id);\n          this.notificationService.showNotification({\n            header: (item.id\n              ? this.notificationEditSuccessTemplate\n              : this.notificationCreateSuccessTemplate) as TemplateRef<any>,\n            message: '',\n            modifier: 'success',\n            ttl: timeout,\n          });\n        } else {\n          this.notificationService.showNotification({\n            header: (item.id\n              ? this.notificationEditErrorTemplate\n              : this.notificationCreateErrorTemplate) as TemplateRef<any>,\n            message: '',\n            modifier: 'error',\n            ttl: timeout,\n          });\n        }\n        this.navigation.currentView = View.List;\n        this.navigation.list();\n      });\n  }\n\n  /**\n   * showing the confirmation modal, when moving away from route.\n   *\n   * @returns {Promise<boolean> | boolean} whether route can be deactivated\n   */\n  canDeactivate(): Observable<boolean> | boolean {\n    if (this.formComponent?.contactsForm?.dirty) {\n      this.isDiscardConfirmOpened = true;\n      this.discard$.complete();\n      this.discard$ = new Subject();\n      this.cdr.markForCheck();\n\n      return this.discard$;\n    }\n\n    return true;\n  }\n\n  /**\n   *  When the Edit is cancelled. It determines if it should show the selected contact or list\n   *\n   * @param {string} id - Contact Id.\n   */\n  cancelEdit(id: string): void {\n    if (id) {\n      this.navigation.select(id);\n      this.navigation.currentView = View.Detail;\n    } else {\n      this.navigation.list();\n      this.navigation.currentView = View.List;\n    }\n  }\n\n  /**\n   * Method to go to previous screen based on id\n   *\n   * @param {string | undefined} id - Contact Id\n   */\n  back(id: string | undefined): void {\n    if (id) {\n      this.navigation.list();\n      this.navigation.currentView = View.List;\n    } else {\n      this.navigation.newContact();\n      this.navigation.currentView = View.Select;\n    }\n  }\n\n  /**\n   *\n   * @param {ContactItem | undefined} item Contact object.\n   * @returns {ContactsFormItem} The transformed contact Object when returned from API.\n   */\n  // eslint-disable-next-line complexity\n  fromService(item: ContactItem | undefined): ContactsFormItem {\n    if (item) {\n      return {\n        id: item.id,\n        name: item.name,\n        IBAN: item.accounts && item.accounts[0] && item.accounts[0].IBAN ? item.accounts[0].IBAN : undefined,\n        accountNumber:\n          item.accounts && item.accounts[0] && item.accounts[0].accountNumber\n            ? item.accounts[0].accountNumber\n            : undefined,\n        email: item.accounts && item.accounts[0] && item.accounts[0].email ? item.accounts[0].email : undefined,\n        phoneNumber:\n          item.accounts && item.accounts[0] && item.accounts[0].phoneNumber ? item.accounts[0].phoneNumber : undefined,\n        accounts: item.accounts || [],\n        additions: item.additions || {},\n      };\n    } else {\n      return { id: '', name: '', surname: '', initials: '', accounts: [], additions: {} };\n    }\n  }\n\n  /**\n   *\n   * @param {ContactsFormItem} item Contact Object\n   * @returns {ContactItem} The trandformed contact object when submitting to API.\n   */\n  toService(item: ContactsFormItem): ContactItem {\n    return {\n      id: item.id,\n      name: item.name,\n      accounts: [\n        {\n          ...(item.accounts && item.accounts[0] ? item.accounts[0] : {}),\n          ...(item.IBAN ? { IBAN: item.IBAN } : {}),\n          ...(item.accountNumber ? { accountNumber: item.accountNumber } : {}),\n          ...(item.phoneNumber ? { phoneNumber: item.phoneNumber } : {}),\n          ...(item.email ? { email: item.email } : {}),\n        },\n      ],\n      ...(item.additions ? { additions: item.additions } : {}),\n    };\n  }\n\n  /**\n   * Method that calls the delete api and returns to the list.\n   *\n   * @param {string} id Contact Id to be deleted\n   */\n  deleteContactsItem(id: string) {\n    this.service.delete(id);\n    this.navigation.list();\n    this.navigation.currentView = View.List;\n  }\n\n  /**\n   * event handler for confirming discard\n   */\n  onConfirmDiscard() {\n    this.discard$.next(true);\n    this.discard$.complete();\n    this.isDiscardConfirmOpened = false;\n  }\n\n  /**\n   * event handler for canceling discard\n   */\n  onCancelDiscard() {\n    this.discard$.next(false);\n    this.discard$.complete();\n    this.isDiscardConfirmOpened = false;\n  }\n}\n","<ng-container *ngIf=\"item | async as item; else loadingTemplate\">\n  <bb-contacts-form\n    [item]=\"item\"\n    [type]=\"itemType$ | async\"\n    [disabledSubmit]=\"isPendingRequest\"\n    (save)=\"save($event)\"\n    (cancelEdit)=\"cancelEdit($event)\"\n    (backEvent)=\"back($event)\"\n    (deleteContactsItem)=\"deleteContactsItem($event)\"\n  ></bb-contacts-form>\n</ng-container>\n\n<ng-template #notificationCreateSuccess>\n  <ng-container bbContactsCreateSuccessNotificationCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n  <ng-template bbContactsCreateSuccessNotificationCustomizable>\n    <span\n      i18n=\"@@contact-manager-form-container.notification-create.success\"\n      data-role=\"successfully-saved-contact\"\n      role=\"alert\"\n      aria-atomic=\"true\"\n    >\n      Successfully saved Contact\n    </span>\n  </ng-template>\n</ng-template>\n\n<ng-template #notificationCreateError>\n  <ng-container bbContactsCreateErrorNotificationCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n  <ng-template bbContactsCreateErrorNotificationCustomizable>\n    <span\n      i18n=\"@@contact-manager-form-container.notification-create.error\"\n      data-role=\"failed-to-save-contact\"\n      role=\"alert\"\n      aria-atomic=\"true\"\n    >\n      Error saving Contact\n    </span>\n  </ng-template>\n</ng-template>\n\n<ng-template #notificationEditSuccess>\n  <ng-container bbContactsEditSuccessNotificationCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n  <ng-template bbContactsEditSuccessNotificationCustomizable>\n    <span\n      i18n=\"@@contact-manager-form-container.notification-edit.success\"\n      data-role=\"successfully-saved-contact\"\n      role=\"alert\"\n      aria-atomic=\"true\"\n    >\n      Successfully saved Contact\n    </span>\n  </ng-template>\n</ng-template>\n\n<ng-template #notificationEditError>\n  <ng-container bbContactsEditErrorNotificationCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n  <ng-template bbContactsEditErrorNotificationCustomizable>\n    <span\n      i18n=\"@@contact-manager-form-container.notification-edit.error\"\n      data-role=\"failed-to-save-contact\"\n      role=\"alert\"\n      aria-atomic=\"true\"\n    >\n      Error saving Contact\n    </span>\n  </ng-template>\n</ng-template>\n\n<ng-template #loadingTemplate>\n  <div class=\"bb-state-container\">\n    <bb-loading-indicator-ui\n      i18n-text=\"@@contact-manager-form-container.loading.label\"\n      text=\"Loading...\"\n    ></bb-loading-indicator-ui>\n  </div>\n</ng-template>\n\n<ng-container bbContactsEditDiscardConfirmationCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n<ng-template bbContactsEditDiscardConfirmationCustomizable let-hostRef>\n  <bb-confirm-action-dialog\n    [isOpen]=\"hostRef.isDiscardConfirmOpened\"\n    [confirmButtonColor]=\"'danger'\"\n    (confirm)=\"hostRef.onConfirmDiscard()\"\n    (cancel)=\"hostRef.onCancelDiscard()\"\n  >\n    <span title i18n=\"@contact-manager-form-container.header.discardChanges\">Discard Changes</span>\n    <span body i18n=\"@@contact-manager-form-container.discardChangesConfirmation\">\n      Are you sure you want to discard your changes? This action cannot be undone.\n    </span>\n    <span cancelButtonLabel i18n=\"@@contact-manager-form-container.button.cancel\">Not now</span>\n    <span confirmButtonLabel i18n=\"@@contact-manager-form-container.button.discard\">Discard</span>\n  </bb-confirm-action-dialog>\n</ng-template>\n"]}