{"version":3,"file":"upcoming-payments-item.component.js","sourceRoot":"","sources":["../../../../../../../libs/manage-upcoming-and-historical-payments-journey/src/lib/components/item/upcoming-payments-item.component.ts","../../../../../../../libs/manage-upcoming-and-historical-payments-journey/src/lib/components/item/upcoming-payments-item.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAK1G,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AACnE,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,MAAM,yBAAyB,CAAC;AAC7E,OAAO,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAC;AACtD,OAAO,EAAE,uDAAuD,IAAI,aAAa,EAAE,MAAM,+BAA+B,CAAC;;;;;;;;;;;AAOzH,MAAM,OAAO,6BAA6B;IAYxC,YAAyC,mBAAyC,EAAW,MAAqB;QAAzE,wBAAmB,GAAnB,mBAAmB,CAAsB;QAAW,WAAM,GAAN,MAAM,CAAe;QAXzG,mBAAc,GAAG,gBAAgB,CAAC;QAClC,mBAAc,GAAG,gBAAgB,CAAC;QAK3C;;WAEG;QACO,kBAAa,GAAG,IAAI,YAAY,EAAE,CAAC;IAEwE,CAAC;IAEtH,IAAW,sBAAsB;;QAC/B,OAAO,MAAA,IAAI,CAAC,OAAO,0CAAE,8BAA8B,CAAC;IACtD,CAAC;IAED,IAAW,QAAQ;;QACjB,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,QAAQ,0CAAE,iBAAiB,CAAC;IACnD,CAAC;IACD,IAAW,WAAW;;QACpB,OAAO,CAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,WAAW,MAAK,WAAW,CAAC;IACnD,CAAC;IAED,IAAW,UAAU;QACnB,MAAM,UAAU,GAAG,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/C,OAAO,CACL,UAAU,IAAI;YACZ,IAAI,EAAE,SAAS,CAAA,wCAAwC,UAAU,CAAC,IAAI,EAAE;YACxE,KAAK,EAAE,UAAU,CAAC,KAAK;SACxB,CACF,CAAC;IACJ,CAAC;IAED,aAAa,CAAC,KAAY;QACxB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;IAC5B,CAAC;IAED,WAAW,CAAC,KAAY;;QACtB,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,MAAA,IAAI,CAAC,mBAAmB,0CAAE,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC/D;IACH,CAAC;;8IA7CU,6BAA6B;kIAA7B,6BAA6B,8ICf1C,8rJA4GA;4FD7Fa,6BAA6B;kBALzC,SAAS;mBAAC;oBACT,QAAQ,EAAE,2BAA2B;oBACrC,WAAW,EAAE,uCAAuC;oBACpD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAac,QAAQ;kHANZ,OAAO;sBAAf,KAAK;gBAII,aAAa;sBAAtB,MAAM","sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Input, Optional, Output } from '@angular/core';\nimport {\n  IdentifiedPaymentOrder,\n  IdentifiedTransaction as IdentifiedCreditTransaction,\n} from '@backbase/data-ang/payment-order';\nimport { CommunicationService } from '../../communication.service';\nimport { P2P_PAYMENT_TYPE, P2P_REASON_CODES } from '../../helpers/constants';\nimport { mapStatusText } from '../../helpers/mappers';\nimport { ManageUpcomingAndHistoricalPaymentsJourneyConfigService as ConfigService } from '../../services/config.service';\n\n@Component({\n  selector: 'bb-upcoming-payments-item',\n  templateUrl: 'upcoming-payments-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class UpcomingPaymentsItemComponent {\n  readonly p2pReasonCodes = P2P_REASON_CODES;\n  readonly p2pPaymentType = P2P_PAYMENT_TYPE;\n  /**\n   * the upcoming payment Item.\n   */\n  @Input() payment?: IdentifiedPaymentOrder;\n  /**\n   * Changes will be triggered on cancelPayment event emit.\n   */\n  @Output() cancelPayment = new EventEmitter();\n\n  constructor(@Optional() private readonly communicatonService: CommunicationService, readonly config: ConfigService) {}\n\n  public get transactionInformation(): IdentifiedCreditTransaction | undefined {\n    return this.payment?.transferTransactionInformation;\n  }\n\n  public get schedule() {\n    return this.payment?.schedule?.transferFrequency;\n  }\n  public get isRecurring() {\n    return this.payment?.paymentMode === 'RECURRING';\n  }\n\n  public get statusText(): { text: string; color: string } | undefined {\n    const statusText = mapStatusText(this.payment);\n    return (\n      statusText && {\n        text: $localize`:@@upcoming-payments-list-item-badge:${statusText.text}`,\n        color: statusText.color,\n      }\n    );\n  }\n\n  onCancelClick(event: Event) {\n    event.stopPropagation();\n    this.cancelPayment.emit();\n  }\n\n  onEditClick(event: Event) {\n    if (this.payment) {\n      event.stopPropagation();\n      this.communicatonService?.navigateToEditPayment(this.payment);\n    }\n  }\n}\n","<div class=\"bb-stack\" data-role=\"upcoming-payment-item\">\n  <bb-icon-ui\n    name=\"{{ isRecurring ? 'repeat' : 'call-made' }}\"\n    class=\"bb-stack__item bb-stack__item--spacing-md\"\n    backgroundType=\"square\"\n    size=\"lg\"\n    color=\"{{ isRecurring ? 'secondary' : 'inactive' }}\"\n  ></bb-icon-ui>\n  <ng-container *ngIf=\"transactionInformation\">\n    <div class=\"bb-stack__item bb-stack__item--fill bb-ellipsis bb-ellipsis--single-line\">\n      <div class=\"bb-stack bb-block bb-block--xs\">\n        <span class=\"sr-only\" i18n=\"screenReader@@upcoming-payments.group.item.counterparty\">\n          Counter party name:\n        </span>\n        <div\n          class=\"bb-text-bold bb-stack__item bb-stack__item--spacing-md bb-ellipsis bb-ellipsis--single-line\"\n          data-role=\"upcoming-payment-item-counterparty-name\"\n        >\n          {{\n            transactionInformation?.counterparty?.role === 'DEBTOR'\n              ? payment?.originator?.name\n              : transactionInformation?.counterparty?.name\n          }}\n        </div>\n        <bb-badge-ui\n          *ngIf=\"statusText?.text && statusText?.color\"\n          class=\"bb-stack__item\"\n          color=\"{{ statusText?.color }}\"\n          text=\"{{ statusText?.text }}\"\n        ></bb-badge-ui>\n      </div>\n      <div class=\"bb-inline-stack text-muted bb-subtitle\">\n        <span i18n=\"@@upcoming-payments.group.item.from-label\">From&nbsp;</span>\n        <div class=\"bb-inline-stack__item bb-inline-stack__item--spacing-none bb-block bb-block--full-width\">\n          <bb-ellipsis-ui\n            [text]=\"\n              transactionInformation?.counterparty?.role === 'DEBTOR'\n                ? transactionInformation?.counterparty?.name\n                : payment?.originator?.name\n            \"\n          ></bb-ellipsis-ui>\n        </div>\n        <div *ngIf=\"payment?.paymentMode === 'RECURRING'\" class=\"bb-inline-stack__item\">\n          <span class=\"sr-only\" i18n=\"screenReader@@upcoming-payments.group.item.paymentMode\"> Payment Mode: </span>\n          <span> - {{ schedule | titlecase }} </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"bb-stack__item bb-text-align-right\">\n      <div class=\"bb-block bb-block--xs bb-text-align-right bb-text-bold\">\n        <span class=\"sr-only\" i18n=\"screenReader@@upcoming-payments.group.item.amount\"> Amount: </span>\n        <bb-amount-ui\n          data-role=\"upcoming-payment-item-amount\"\n          [currency]=\"transactionInformation?.instructedAmount?.currencyCode\"\n          [amount]=\"transactionInformation?.instructedAmount?.amount\"\n          [mapCurrency]=\"config.uiComponentProps?.mapCurrency\"\n        ></bb-amount-ui>\n      </div>\n\n      <ng-container *ngIf=\"this.payment?.status === 'ACCEPTED'\">\n        <button\n          bbButton\n          *ngIf=\"!(payment?.paymentType === p2pPaymentType)\"\n          color=\"link-text\"\n          buttonSize=\"sm\"\n          class=\"bb-stack__item bb-stack__item--spacing-lg\"\n          (click)=\"onEditClick($event)\"\n          (keydown.enter)=\"onEditClick($event)\"\n          (keydown.space)=\"onEditClick($event)\"\n          i18n=\"@@upcoming-payments.group.item.button.edit\"\n        >\n          Edit\n        </button>\n        <button\n          bbButton\n          *ngIf=\"!(payment?.reasonCode === p2pReasonCodes.inProcess)\"\n          color=\"link-text\"\n          buttonSize=\"sm\"\n          class=\"bb-stack__item bb-text-warning bb-text-danger\"\n          (click)=\"onCancelClick($event)\"\n          (keydown.enter)=\"onCancelClick($event)\"\n          (keydown.space)=\"onCancelClick($event)\"\n          i18n=\"@@upcoming-payments.group.item.button.cancel\"\n          data-role=\"upcoming-payment-item-cancel-button\"\n        >\n          Cancel\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"payment?.reasonCode === p2pReasonCodes.inProcess && payment?.status === 'ACCEPTED'\">\n        <div class=\"bb-inline-stack\">\n          <span\n            class=\"text-muted bb-subtitle bb-stack__item bb-stack__item--spacing-xs\"\n            i18n=\"@@upcoming-payments-journey.payment-item.ready-status.text\"\n            >Accepted</span\n          >\n          <span\n            bbTooltip=\"This payment canâ€™t be cancelled or edited because it has already been accepted by the recipient.\"\n            i18n-bbTooltip=\"@@upcoming-payments-journey.payment-item.ready-status.tooltip\"\n            placement=\"bottom\"\n            triggers=\"hover\"\n          >\n            <bb-icon-ui name=\"info\" class=\"text-muted bb-stack\" size=\"sm\"></bb-icon-ui>\n          </span>\n        </div>\n      </ng-container>\n    </div>\n  </ng-container>\n</div>\n"]}