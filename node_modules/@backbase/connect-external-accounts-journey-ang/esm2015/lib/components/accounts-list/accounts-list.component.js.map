{"version":3,"file":"accounts-list.component.js","sourceRoot":"","sources":["../../../../../../../libs/connect-external-accounts-journey/src/lib/components/accounts-list/accounts-list.component.ts","../../../../../../../libs/connect-external-accounts-journey/src/lib/components/accounts-list/accounts-list.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAEvE,OAAO,EAAE,gBAAgB,EAAE,MAAM,yBAAyB,CAAC;;;;;;;;;AAO3D,MAAM,OAAO,qBAAqB;IAJlC;QAKE,WAAM,GAAG,KAAK,CAAC;QACf,wBAAmB,GAAG,KAAK,CAAC;QAC5B,aAAQ,GAAG,gBAAgB,CAAC;QAC5B;;WAEG;QACO,cAAS,GAAG,IAAI,YAAY,EAAE,CAAC;QASzC;;;WAGG;QACM,cAAS,GAAG,KAAK,CAAC;QAC3B;;WAEG;QACO,0BAAqB,GAAG,IAAI,YAAY,EAAE,CAAC;QACrD;;WAEG;QACO,kBAAa,GAAG,IAAI,YAAY,EAAU,CAAC;QAErD;;WAEG;QACO,iBAAY,GAAG,IAAI,YAAY,EAAU,CAAC;QAEpD,0BAAqB,GAAG,KAAK,CAAC;KAqC/B;IAlCC,iBAAiB;QACf,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IACxB,CAAC;IAED,eAAe,CAAC,OAAgC;QAC9C,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC3C,CAAC;IAED,SAAS,CAAC,KAA0B,EAAE,OAAiC;QACrE,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;YACnD,IAAI,OAAO,EAAE;gBACX,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;aAC/B;iBAAM;gBACL,IAAI,CAAC,iBAAiB,EAAE,CAAC;aAC1B;SACF;IACH,CAAC;IAED,eAAe,CAAC,KAAY;QAC1B,KAAK,CAAC,eAAe,EAAE,CAAC;IAC1B,CAAC;IAED,uBAAuB,CAAC,OAAgC;QACtD,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;QAC3B,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;IACpC,CAAC;IAED,eAAe,CAAC,EAAU;QACxB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC9B,CAAC;IAED,cAAc,CAAC,OAAgC;QAC7C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;IACpD,CAAC;;sIAvEU,qBAAqB;0HAArB,qBAAqB,uSCTlC,4vMAwJA;4FD/Ia,qBAAqB;kBAJjC,SAAS;mBAAC;oBACT,QAAQ,EAAE,sBAAsB;oBAChC,WAAW,EAAE,gCAAgC;iBAC9C;8BAQW,SAAS;sBAAlB,MAAM;gBAIE,QAAQ;sBAAhB,KAAK;gBAIG,YAAY;sBAApB,KAAK;gBAKG,SAAS;sBAAjB,KAAK;gBAII,qBAAqB;sBAA9B,MAAM;gBAIG,aAAa;sBAAtB,MAAM;gBAKG,YAAY;sBAArB,MAAM","sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { DetailedExternalAccount } from '@backbase/data-ang/payment-order-a2a';\nimport { payverisStatuses } from '../../helpers/constants';\nimport { EventTypes } from '../../models/types';\n\n@Component({\n  selector: 'bb-a2a-accounts-list',\n  templateUrl: './accounts-list.component.html',\n})\nexport class AccountsListComponent {\n  isOpen = false;\n  isPendigAccountOpen = false;\n  statuses = payverisStatuses;\n  /**\n   * Open link account modal event emitter\n   */\n  @Output() openModal = new EventEmitter();\n  /**\n   * Accounts list array\n   */\n  @Input() accounts?: DetailedExternalAccount[];\n  /**\n   * Activate account form\n   */\n  @Input() activateForm?: any;\n  /**\n   * Loading activate account flag\n   * Default value is false\n   */\n  @Input() isLoading = false;\n  /**\n   * Open account details modal event emitter\n   */\n  @Output() selectExternalAccount = new EventEmitter();\n  /**\n   * Delete account event emitter\n   */\n  @Output() deleteAccount = new EventEmitter<string>();\n\n  /**\n   * Make transfer event emitter\n   */\n  @Output() makeTransfer = new EventEmitter<string>();\n\n  confirmationModalOpen = false;\n  accountInfo?: DetailedExternalAccount;\n\n  onClickNewAccount() {\n    this.openModal.emit();\n  }\n\n  populateAccount(account: DetailedExternalAccount) {\n    this.selectExternalAccount.emit(account);\n  }\n\n  onKeydown(event: Partial<EventTypes>, account?: DetailedExternalAccount) {\n    if (event.code === 'Space' || event.key === 'Enter') {\n      if (account) {\n        this.populateAccount(account);\n      } else {\n        this.onClickNewAccount();\n      }\n    }\n  }\n\n  stopPropagation(event: Event) {\n    event.stopPropagation();\n  }\n\n  manageConfirmationModal(account: DetailedExternalAccount) {\n    this.accountInfo = account;\n    this.confirmationModalOpen = true;\n  }\n\n  onDeleteAccount(id: string) {\n    this.deleteAccount.emit(id);\n  }\n\n  onMakeTransfer(account: DetailedExternalAccount) {\n    this.makeTransfer.emit(account.externalAccountId);\n  }\n}\n","<div class=\"card\">\n  <div class=\"card-body\">\n    <div class=\"bb-list\">\n      <div\n        tabindex=\"0\"\n        role=\"button\"\n        class=\"bb-list__item\"\n        (keydown)=\"onKeydown($event, acc)\"\n        *ngFor=\"let acc of accounts; let odd = odd\"\n        (click)=\"populateAccount(acc)\"\n      >\n        <div class=\"bb-stack\">\n          <div class=\"bb-stack__item\">\n            <div\n              class=\"bb-block--sm\"\n              [class.d-none]=\"acc.status === 'Active'\"\n              data-role=\"payord-a2a-accounts-list-status-badge\"\n            >\n              <span class=\"d-none\" aria-hidden=\"true\" i18n=\"@@payord-a2a-account-list-status-badge.label\" #label>\n                {acc.status, select, InProcess {IN PROCESS} PendingActivation {PENDING ACTIVATION} FailedVerification\n                {FAILED ACTIVATION} RejectedByExternalBank {FAILED ACTIVATION} DisabledForExcessiveReturns {DISABLED}\n                DisabledForFraud {DISABLED} }\n              </span>\n              <bb-badge-ui\n                *ngIf=\"acc.status !== 'Active'\"\n                [color]=\"$any(statuses)[acc.status]\"\n                [text]=\"label.textContent\"\n              >\n              </bb-badge-ui>\n            </div>\n            <div class=\"bb-text-bold bb-block--sm\">\n              <span data-role=\"payord-a2a-accounts-list-name\">\n                {{ acc?.accountNickName || acc?.bankName }}\n              </span>\n            </div>\n            <div class=\"bb-text-support\">\n              <span data-role=\"payord-a2a-accounts-list-account-number\">\n                {{ acc.accountNumber }}\n              </span>\n            </div>\n          </div>\n          <div class=\"bb-stack__item--push-right btn-group-toggle\">\n            <div class=\"bb-button-bar\" (click)=\"populateAccount(acc)\">\n              <bb-dropdown-menu-ui\n                class=\"bb-button-bar__button\"\n                btnColor=\"link\"\n                (click)=\"stopPropagation($event)\"\n                (keydown)=\"stopPropagation($event)\"\n                btnCircle=\"true\"\n                container=\"body\"\n                data-role=\"a2a-more-options\"\n              >\n                <ng-template bbDropdownLabel>\n                  <span class=\"sr-only\" i18n=\"@@a2a-account-list.item.actions-dropdown-button\"\n                    >Actions dropdown button</span\n                  >\n                  <bb-icon-ui name=\"ellipsis-h\"></bb-icon-ui>\n                </ng-template>\n                <ng-template bbDropdownMenuItem>\n                  <button\n                    *ngIf=\"acc.status === 'PendingActivation'\"\n                    role=\"menuitem\"\n                    type=\"button\"\n                    class=\"d-block d-sm-none dropdown-item\"\n                    placement=\"left\"\n                    i18n=\"@@payord-a2a-accounts-list.activate.account\"\n                    data-role=\"transfer-a2a-dropdown\"\n                    (click)=\"populateAccount(acc)\"\n                    (keydown)=\"onKeydown($event, acc)\"\n                  >\n                    Activate\n                  </button>\n                  <button\n                    role=\"menuitem\"\n                    type=\"button\"\n                    class=\"dropdown-item\"\n                    placement=\"left\"\n                    i18n=\"@@payord-a2a-accounts-list.make.transfer\"\n                    data-role=\"transfer-a2a-dropdown\"\n                    [hidden]=\"acc.status !== 'Active'\"\n                    (bbKeyboardClick)=\"onMakeTransfer(acc)\"\n                  >\n                    Make transfer\n                  </button>\n                  <button\n                    role=\"menuitem\"\n                    type=\"button\"\n                    class=\"dropdown-item\"\n                    placement=\"left\"\n                    (click)=\"populateAccount(acc)\"\n                    (keydown)=\"onKeydown($event, acc)\"\n                    i18n=\"@@payord-a2a-accounts-list.see.details\"\n                    data-role=\"details-a2a-dropdown\"\n                  >\n                    See details\n                  </button>\n                  <button\n                    role=\"menuitem\"\n                    type=\"button\"\n                    class=\"dropdown-item text-danger\"\n                    placement=\"left\"\n                    (click)=\"manageConfirmationModal(acc)\"\n                    (keydown.enter)=\"manageConfirmationModal(acc)\"\n                    i18n=\"@@payord-a2a-accounts-list.remove.account\"\n                    data-role=\"remove-a2a-dropdown\"\n                  >\n                    Remove\n                  </button>\n                </ng-template>\n              </bb-dropdown-menu-ui>\n\n              <button\n                class=\"d-none d-sm-block bb-button-bar__button\"\n                bbButton\n                *ngIf=\"acc.status === 'PendingActivation'\"\n                color=\"primary\"\n                type=\"submit\"\n                data-role=\"payord-a2a-activate-account.modal-activate-btn-text\"\n              >\n                <span i18n=\"@@payord-a2a-link.accounts.list.activate-btn.span\"> Activate </span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<bb-confirmation-dialog\n  [isOpen]=\"confirmationModalOpen\"\n  [confirmButtonColor]=\"'danger'\"\n  (cancel)=\"confirmationModalOpen = false\"\n  (confirm)=\"confirmationModalOpen = false; onDeleteAccount(accountInfo?.externalAccountId)\"\n>\n  <span\n    title\n    data-role=\"payord-a2a-remove-modal-title\"\n    i18n=\"@@payord-a2a-accounts-list.confirmation-dialog.discard.title\"\n  >\n    Remove \"{{ accountInfo?.accountNickName || accountInfo?.bankName }}\" account?\n  </span>\n  <span\n    body\n    data-role=\"payord-a2a-remove-modal-message\"\n    i18n=\"@@payord-a2a-accounts-list.confirmation-dialog.discard.body\"\n  >\n    Removing this account will permanently erase the data entered.\n  </span>\n  <span confirmActionName i18n=\"@@payord-a2a-accounts-list.confirmation-dialog.discard.action.confirm\"> Remove </span>\n  <span cancelActionName i18n=\"@@payord-a2a-accounts-list.confirmation-dialog.discard.action.cancel\"> Cancel </span>\n</bb-confirmation-dialog>\n"]}