{"version":3,"file":"pending-activation-account-details.component.js","sourceRoot":"","sources":["../../../../../../../libs/connect-external-accounts-journey/src/lib/components/pending-activation-account-details/pending-activation-account-details.component.ts","../../../../../../../libs/connect-external-accounts-journey/src/lib/components/pending-activation-account-details/pending-activation-account-details.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { DetailedExternalAccount } from '@backbase/data-ang/payment-order-a2a';\n\n@Component({\n  selector: 'bb-pending-activation-account-details',\n  templateUrl: 'pending-activation-account-details.component.html',\n})\nexport class PendingActivationAccountDetailsComponent {\n  readonly modalOptions = {\n    backdrop: 'static',\n    keyboard: false,\n  };\n\n  /**\n   * Open account details modal flag\n   * Default value is false\n   */\n  @Input() isOpen = false;\n\n  /**\n   * External account details\n   */\n  @Input() externalAccount!: DetailedExternalAccount | null;\n\n  /**\n   * Activate account form\n   */\n  @Input() activateAccountForm!: FormGroup;\n\n  /**\n   * Loading flag\n   * Default value is false\n   */\n  @Input() loading = false;\n\n  /**\n   * Submitted form flag\n   * Default value is false\n   */\n  @Input() submitted = false;\n\n  /**\n   * Activate account failure flag\n   * Default value is false\n   */\n  @Input() activationFailed = false;\n\n  /**\n   * Activate account attempts\n   * Default value is false\n   */\n  @Input() attemptsExceeded = false;\n\n  /**\n   * Ivalid activation amount\n   * Default value is false\n   */\n  @Input() invalidAmount = false;\n\n  /**\n   * List of currencies\n   */\n  @Input() currencies: Array<string> = [];\n\n  /**\n   * Open account details modal event emitter\n   */\n  @Output() openDetailsModal = new EventEmitter();\n\n  /**\n   * Close account details modal event emitter\n   */\n  @Output() closeModal = new EventEmitter<void>();\n\n  /**\n   * Refresh account list event emitter\n   */\n  @Output() refreshList = new EventEmitter<void>();\n\n  /**\n   * Submit form event emitter\n   */\n  @Output() submitForm = new EventEmitter<void>();\n\n  /**\n   * Account status event emitter\n   */\n  @Output() setAccountStatus = new EventEmitter<void>();\n\n  /**\n   * Account activation attempts exceeded event emitter\n   */\n  @Output() setAttemptsExceeded = new EventEmitter<void>();\n\n  /**\n   * Invalid amount on account activation event emitter\n   */\n  @Output() setInvalidAmount = new EventEmitter<void>();\n\n  isAccountOpen = true;\n  confirmationModalOpen = false;\n  areDetailsOpen = false;\n  mequieromorir = true;\n\n  onClose() {\n    const formControls = this.activateAccountForm.controls;\n    if (\n      (formControls.firstAmount.value['amount'] || formControls.secondAmount.value['amount']) &&\n      !this.attemptsExceeded\n    ) {\n      this.confirmationModalOpen = true;\n    } else {\n      this.closeModal.emit();\n      this.setAccountStatus.emit();\n      this.areDetailsOpen = false;\n      this.refreshAccountsList();\n    }\n  }\n\n  setOpenValue() {\n    this.isAccountOpen = !this.isAccountOpen;\n  }\n\n  onSubmit() {\n    this.submitForm.emit();\n  }\n\n  refreshAccountsList() {\n    if (this.attemptsExceeded) {\n      this.refreshList.emit();\n      this.setAttemptsExceeded.emit();\n    } else if (this.invalidAmount) {\n      this.setInvalidAmount.emit();\n    }\n  }\n\n  toggleDisplayDetails() {\n    this.areDetailsOpen = !this.areDetailsOpen;\n  }\n\n  onCloseConfirmationModal() {\n    this.setAccountStatus.emit();\n    this.areDetailsOpen = false;\n    this.confirmationModalOpen = false;\n  }\n}\n","<bb-modal-ui *ngIf=\"externalAccount as account\" [isOpen]=\"isOpen\" [modalOptions]=\"modalOptions\">\n  <bb-a2a-details-header\n    [account]=\"account\"\n    (closeModal)=\"onClose()\"\n    [attemptsExceeded]=\"attemptsExceeded\"\n  ></bb-a2a-details-header>\n  <bb-modal-body-ui>\n    <ng-template bbCustomModalBody>\n      <div *ngIf=\"activationFailed && !attemptsExceeded\">\n        <bb-alert-ui\n          title=\"The entered deposit amounts are incorrect. Please try again.\"\n          [dismissible]=\"false\"\n          data-role=\"payord-a2a-account-details-modal-excessive-returns-error\"\n          i18n-title=\"@@payord-a2a.pending.activation.incorrect-amounts.title\"\n        >\n        </bb-alert-ui>\n      </div>\n      <div *ngIf=\"attemptsExceeded\">\n        <bb-alert-ui\n          title=\"The activation of your account has failed\"\n          message=\"You have exceeded the number of attempts to activate your account. To continue, please raise a new request.\"\n          [dismissible]=\"false\"\n          data-role=\"payord-a2a-pending-activation-failed-verification-error\"\n          i18n-title=\"@@payord-a2a.pending.activation.failed-verification.title\"\n          i18n-message=\"@@payord-a2a.pending.activation.failed-verification.message\"\n        >\n        </bb-alert-ui>\n      </div>\n      <div *ngIf=\"invalidAmount\">\n        <bb-alert-ui\n          title=\"The activation of your account has failed\"\n          message=\"Value must be between 0 and 51 cents.\"\n          [dismissible]=\"false\"\n          data-role=\"payord-a2a-pending-activation-invalid-amount-error\"\n          i18n-title=\"@@payord-a2a.pending.activation.invalid-amount.title\"\n          i18n-message=\"@@payord-a2a.pending.activation.invalid-amount.message\"\n        >\n        </bb-alert-ui>\n      </div>\n      <ng-container>\n        <div class=\"bb-block bb-block--lg\">\n          <span\n            data-role=\"payord-a2a-pending-activation-activate-account.information.message\"\n            i18n-message=\"@@payord-a2a.pending.activation.activate-account-information.message\"\n          >\n            Insert below the two amounts under 50 cents that were credited to your connected account.<br />\n            The order of the payments does not influence the activation.\n          </span>\n        </div>\n        <bb-activate-a2a-account\n          *ngIf=\"isOpen\"\n          [activateAccountForm]=\"activateAccountForm\"\n          [submitted]=\"submitted\"\n          [isDisabled]=\"attemptsExceeded\"\n          [currencies]=\"currencies\"\n        ></bb-activate-a2a-account>\n      </ng-container>\n      <bb-collapsible-ui [isOpen]=\"areDetailsOpen\" #collapse>\n        <ng-template bbCollapsibleHeader let-toggle=\"toggle\" let-isOpen=\"isOpen\">\n          <div class=\"bb-block bb-block--lg bb-stack\">\n            <button\n              class=\"text-primary bb-text-bold\"\n              bbButton\n              [color]=\"'link-text'\"\n              buttonSize=\"md\"\n              (click)=\"toggleDisplayDetails()\"\n              data-role=\"toggle-details-button\"\n            >\n              <bb-icon-ui\n                class=\"bb-stack__item bb-stack__item--spacing-sm\"\n                size=\"md\"\n                [name]=\"isOpen ? 'toggle-up' : 'toggle-down'\"\n              ></bb-icon-ui>\n              <p\n                class=\"bb-stack__item bb-block bb-block--no-margin\"\n                *ngIf=\"isOpen\"\n                data-role=\"payord-a2a-account-details-modal-hide-info-text\"\n                i18n=\"@@payord-a2a.pending.activation.hide.details\"\n              >\n                Hide account details\n              </p>\n              <p\n                class=\"bb-stack__item bb-block bb-block--no-margin\"\n                *ngIf=\"!isOpen\"\n                data-role=\"payord-a2a-account-details-modal-show-info-text\"\n                i18n=\"@@payord-a2a.pending.activation.show.details\"\n              >\n                Show account details\n              </p>\n            </button>\n          </div>\n        </ng-template>\n        <ng-template bbCollapsibleBody>\n          <bb-a2a-account-information [account]=\"account\"></bb-a2a-account-information>\n        </ng-template>\n      </bb-collapsible-ui>\n    </ng-template>\n  </bb-modal-body-ui>\n\n  <bb-modal-footer-ui *ngIf=\"!attemptsExceeded\">\n    <ng-template bbCustomModalFooter>\n      <div class=\"bb-button-bar\">\n        <bb-load-button-ui\n          color=\"primary\"\n          class=\"bb-button-bar__button\"\n          [isLoading]=\"loading\"\n          (click)=\"onSubmit()\"\n          data-role=\"payord-a2a-activate-account-modal\"\n          i18n=\"@@payord-a2a-pending.activation.activate-account-btn.span\"\n        >\n          Activate\n        </bb-load-button-ui>\n        <button\n          bbButton\n          color=\"link\"\n          class=\"bb-button-bar__button\"\n          data-role=\"payord-a2a-activate-account-modal-cancel\"\n          i18n=\"@@payord-a2a-pending.activation.cancel-btn.span\"\n          (click)=\"onClose()\"\n        >\n          Cancel\n        </button>\n      </div>\n    </ng-template>\n  </bb-modal-footer-ui>\n</bb-modal-ui>\n\n<bb-confirmation-dialog\n  [isOpen]=\"confirmationModalOpen\"\n  [confirmButtonColor]=\"'danger'\"\n  (cancel)=\"confirmationModalOpen = false\"\n  (confirm)=\"closeModal.emit(); refreshAccountsList(); onCloseConfirmationModal()\"\n>\n  <span\n    title\n    class=\"modal-title\"\n    data-role=\"payord-a2a-activate-account.confirmation-dialog-content\"\n    i18n=\"@@payord-activate-account.confirmation-dialog.discard.title\"\n  >\n    Discard amount(s)\n  </span>\n  <span\n    body\n    data-role=\"payord-a2a-activate-account.confirmation-dialog.discard.body\"\n    i18n=\"@@payord-a2a-activate-account.confirmation-dialog.discard.body\"\n  >\n    Are you sure you want to discard the amount(s)? The data you have entered will be lost.\n  </span>\n  <span\n    confirmActionName\n    data-role=\"payord-a2a-activate-account-confirmation-dialog-cancel\"\n    i18n=\"@@payord-a2a-activate-account.confirmation-dialog.discard.action.confirm\"\n  >\n    Yes, Discard\n  </span>\n  <span\n    cancelActionName\n    data-role=\"payord-a2a-activate-account-confirmation-dialog-keep\"\n    i18n=\"@@payord-a2a-activate-account.confirmation-dialog.discard.action.cancel\"\n  >\n    Keep data\n  </span>\n</bb-confirmation-dialog>\n"]}