{"version":3,"file":"helpers.js","sourceRoot":"","sources":["../../../../../../libs/connect-external-accounts-journey/src/lib/helpers/helpers.ts"],"names":[],"mappings":"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","sourcesContent":["import { AbstractControl, ValidationErrors } from '@angular/forms';\nimport { EventTypes } from '../models/types';\n\nexport const formatAccountNumber = (n: string | undefined): string => (n && n.replace(/\\s+/g, '')) || '';\n\nexport const validateNumber = (event: EventTypes) => {\n  const { metaKey, ctrlKey, keyCode, key } = event;\n  const pattern = /^\\d+$/;\n  const excludedKeys = [8, 16, 37, 38, 93, 39, 9];\n\n  const ctrlKeys = metaKey || ctrlKey;\n  const keyCodes = [65, 67, 86, 88];\n  const allowedCommands = ctrlKeys && keyCodes.includes(keyCode);\n\n  if (!pattern.test(key) && !excludedKeys.includes(keyCode) && !allowedCommands) {\n    event.preventDefault();\n  }\n};\n\nexport function amountValidator(control: AbstractControl) {\n  return control.value && control.value.amount > 0 && control.value.currency.length > 0\n    ? undefined\n    : { invalidAmount: { value: control.value } };\n}\n\nexport function routingTransitNumberValidator(control: AbstractControl): ValidationErrors | null {\n  let { value } = control;\n  const errors: ValidationErrors = {\n    pattern: false,\n    size: false,\n  };\n\n  if (value) {\n    value = value.toString(10);\n    const p = (str: string) => parseInt(str, 10);\n\n    if (value.length !== 9) errors.size = true;\n\n    const left = 3 * (p(value[0]) + p(value[3]) + p(value[6]));\n    const mid = 7 * (p(value[1]) + p(value[4]) + p(value[7]));\n    const right = p(value[2]) + p(value[5]) + p(value[8]);\n\n    if ((left + mid + right) % 10 !== 0 && value.length >= 9) errors.pattern = true;\n  }\n\n  return errors.size || errors.pattern ? errors : null;\n}\n"]}