import { Component, Directive, Input } from '@angular/core';
import { ACCOUNTS_REQUEST_ALL_SIZE, AccountStatementBaseWidgetComponent, convertDateObjToDateStruct, convertDateStructToDateObj, getDateFilterLimit, LoadingState, PaginationType, simpleArrayCompare, smartLoadingState, today, } from '@backbase/account-statement-common-ang';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { BehaviorSubject, combineLatest, of, Subject } from 'rxjs';
import { catchError, distinctUntilChanged, filter, map, pairwise, scan, shareReplay, startWith, switchMap, takeUntil, tap, } from 'rxjs/operators';
import { AccountStatementListWidgetPropertiesService } from './services/account-statements-list-widget-properties.service';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/account-statement-common-ang";
import * as i2 from "./services/account-statements-list-widget-properties.service";
import * as i3 from "./components/account-statement-filter-form/account-statement-filter-form.component";
import * as i4 from "./components/account-statement-table/account-statement-table.component";
import * as i5 from "@backbase/ui-ang/loading-indicator";
import * as i6 from "@backbase/ui-ang/empty-state";
import * as i7 from "@angular/common";
const STORAGE_ACCOUNT_SELECTED_KEY = 'bb.product.selected';
export const DEFAULT_FROM_VALUE = 0;
export class AccountStatementListWidgetComponent extends AccountStatementBaseWidgetComponent {
    constructor(service, propertiesService) {
        super(propertiesService);
        this.service = service;
        this.hostRef = this;
        this.loadingStates = LoadingState;
        this.accounts = {
            data: undefined,
            error: false,
        };
        this.categories = {
            data: undefined,
            error: false,
        };
        this.accountStatements = {
            data: undefined,
            error: false,
            totalCount: undefined,
            isLoading: LoadingState.IDLE,
            areFiltersApplied: false,
        };
        this.destroy$ = new Subject();
        /* eslint-disable @typescript-eslint/member-ordering */
        /**
         * Minimal date for "Date range" filter. Default value is "1970-01-01".
         */
        this.minimalDate = this.initializeMinimalDateFilterLimit;
        /**
         * Maximum date for "Date range" filter. Default value is current date.
         */
        this.maximumDate = convertDateObjToDateStruct(today());
        this.selectedAccount = new Subject();
        // eslint-disable-next-line @typescript-eslint/ban-types
        this.sortingParamsNew = new BehaviorSubject({});
        this.sortingParams = combineLatest([
            this.propertiesService.sortingOrder$,
            this.propertiesService.sortingDirection$,
            this.sortingParamsNew,
        ]).pipe(map(([orderBy, direction, newParams]) => (Object.assign({ orderBy,
            direction }, newParams))));
        this.filterParams = new BehaviorSubject({});
        this.loadingParamsNew = new BehaviorSubject({
            from: DEFAULT_FROM_VALUE,
        });
        this.loadingParams = combineLatest([
            this.propertiesService.pageSize$,
            this.loadingParamsNew,
            this.minimalDate,
        ]).pipe(map(([size, newParams, minimalDate]) => (Object.assign({ size, from: DEFAULT_FROM_VALUE, dateFrom: convertDateStructToDateObj(minimalDate), dateTo: convertDateStructToDateObj(this.maximumDate) }, newParams))), takeUntil(this.destroy$));
        this.accountsError = undefined;
        this.accountsData = this.service
            .getAccounts({
            size: ACCOUNTS_REQUEST_ALL_SIZE,
        })
            .pipe(map(response => response.body), tap(accounts => {
            this.selectAccount(accounts[0]);
        }), catchError(error => {
            this.accountsError = error;
            return of([]);
        }));
        this.widgetProperties = {};
        this.getInitialSelectedAccount = (accounts) => {
            const accountId = window.localStorage.getItem(STORAGE_ACCOUNT_SELECTED_KEY);
            return accounts.find(item => item.id === accountId) || accounts[0];
        };
        this.accounts.data = this.service.loadAccounts().pipe(tap((accounts) => {
            if (accounts && accounts.length) {
                const initialAccount = this.getInitialSelectedAccount(accounts);
                this.selectAccount(initialAccount);
            }
        }), catchError(() => {
            this.accounts.error = true;
            return of([]);
        }), shareReplay(1));
        const params = combineLatest([
            this.selectedAccount.pipe(map(({ id }) => id), distinctUntilChanged()),
            this.loadingParams,
            this.sortingParams,
            this.filterParams.pipe(distinctUntilChanged((prev, cur) => simpleArrayCompare(prev.category, cur.category) &&
                prev.dateFrom === cur.dateFrom &&
                prev.dateTo === cur.dateTo), tap(filterParams => (this.accountStatements.areFiltersApplied = this.areFiltersApplied(filterParams)))),
        ]).pipe(map(([accountId, loadingParams, sortingParams, filterParams]) => (Object.assign(Object.assign(Object.assign({ accountId }, loadingParams), (sortingParams.direction && Object.assign({}, sortingParams))), filterParams))), distinctUntilChanged((prev, cur) => {
            if (cur.from === prev.from && cur.from !== DEFAULT_FROM_VALUE) {
                this.setLoadingParams({ from: DEFAULT_FROM_VALUE });
                return true;
            }
            return false;
        }));
        this.accountStatements.data = params.pipe(startWith({}), pairwise(), tap(([oldParams, newParams]) => {
            this.accountStatements.isLoading = smartLoadingState(oldParams, Object.assign(Object.assign({}, newParams), { paginationType: this.widgetProperties.paginationType }));
            this.accountStatements.error = false;
        }), switchMap(([, newParams]) => this.getAccountStatements(newParams).pipe(tap((response) => (this.accountStatements.totalCount = response && response.totalCount)), map((response) => [newParams, response && response.data]))), scan((acc, [reqParams, cur]) => {
            if (this.widgetProperties.paginationType === PaginationType.LoadMore &&
                reqParams.from !== DEFAULT_FROM_VALUE) {
                return [...acc, ...(cur || [])];
            }
            else {
                return [...(cur || [])];
            }
        }, []), tap(() => (this.accountStatements.isLoading = LoadingState.IDLE)));
        this.categories.data = this.showCategory.pipe(filter(Boolean), switchMap(() => this.service.loadCategories().pipe(catchError(() => {
            this.categories.error = true;
            return of([]);
        }))));
    }
    /**
     * Flag to show/hide description
     */
    // eslint-disable-next-line @angular-eslint/no-input-rename
    set showDescriptionValue(value) {
        this.propertiesService.setShowDescription(value);
    }
    ngOnInit() {
        this.propertiesService.widgetProperties$
            .pipe(takeUntil(this.destroy$))
            .subscribe(properties => (this.widgetProperties = properties));
    }
    // TODO: Merge these getters into one observable subscription that would produce object with all widget properties
    get pageSize() {
        return this.propertiesService.pageSize$;
    }
    get sortingOrder() {
        return this.propertiesService.sortingOrder$;
    }
    get sortingDirection() {
        return this.propertiesService.sortingDirection$;
    }
    get showDescription() {
        return this.propertiesService.showDescription$;
    }
    get showCategory() {
        return this.propertiesService.showCategory$;
    }
    get notificationDismissTimeProperty() {
        return this.propertiesService.notificationDismissTime$;
    }
    setFilterParams(params) {
        this.filterParams.next(params);
    }
    setSortingParams(params) {
        this.sortingParamsNew.next(params);
    }
    setLoadingParams(params) {
        this.loadingParamsNew.next(Object.assign({}, params));
    }
    setPageNumber(page) {
        this.loadingParamsNew.next(Object.assign(Object.assign({}, this.loadingParamsNew.getValue()), { from: page }));
    }
    selectAccount(account) {
        this.selectedAccount.next(account);
    }
    getAccountStatements(params = {}) {
        return this.service.loadAccountStatements(params).pipe(catchError(() => {
            this.accountStatements.error = true;
            return of({ data: [], totalCount: 0 });
        }));
    }
    areFiltersApplied(filterParams) {
        const areCategoriesApplied = !!filterParams.category && filterParams.category.length !== 0;
        const isBookDateApplied = !!filterParams.dateFrom && !!filterParams.dateTo;
        return areCategoriesApplied || isBookDateApplied;
    }
    get initializeMinimalDateFilterLimit() {
        return combineLatest([
            this.propertiesService.absoluteDateLimit$.pipe(takeUntil(this.destroy$)),
            this.propertiesService.relativeDateLimit$.pipe(takeUntil(this.destroy$)),
        ]).pipe(map(([absoluteDateLimit, relativeMonthLimit]) => {
            // this sets default value to the first millisecond of Unix date
            const limitDate = getDateFilterLimit(absoluteDateLimit, relativeMonthLimit);
            return convertDateObjToDateStruct(limitDate);
        }));
    }
    ngOnDestroy() {
        this.destroy$.next();
    }
}
AccountStatementListWidgetComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementListWidgetComponent, deps: [{ token: i1.AccountStatementDataService }, { token: i2.AccountStatementListWidgetPropertiesService }], target: i0.ɵɵFactoryTarget.Component });
AccountStatementListWidgetComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.15", type: AccountStatementListWidgetComponent, selector: "bb-account-statement-list-widget", inputs: { showDescriptionValue: ["showDescription", "showDescriptionValue"] }, providers: [AccountStatementListWidgetPropertiesService], usesInheritance: true, ngImport: i0, template: "<ng-container\n  bbAccountStatementListCustomizable\n  [bbHostRef]=\"hostRef\"\n  [bbTemplateContext]=\"{\n    accounts: (accountsData | async)!,\n    accountsError: accountsError,\n    categories: (categories.data | async)!,\n    accountStatements: (accountStatements.data | async)!,\n    selectedAccount: (selectedAccount | async)!\n  }\"\n></ng-container>\n\n<ng-template\n  bbAccountStatementListCustomizable\n  let-host\n  let-accounts=\"context.accounts\"\n  let-accountsError=\"context.accountsError\"\n  let-categories=\"context.categories\"\n  let-selectedAccount=\"context.selectedAccount\"\n  let-accountStatements=\"context.accountStatements\"\n>\n  <div aria-live=\"polite\">\n    <ng-container *ngIf=\"accounts; else loadingState\">\n      <ng-container *ngIf=\"!accountsError; else errorStateAccounts\">\n        <ng-container *ngIf=\"accounts.length; else emptyStateAccounts\">\n          <div class=\"bb-block bb-block--xl\">\n            <bb-account-statement-account-selector\n              [accounts]=\"accounts\"\n              (accountSelect)=\"host.selectAccount($event)\"\n            ></bb-account-statement-account-selector>\n          </div>\n\n          <div class=\"card\">\n            <ng-container\n              *ngIf=\"\n                accountStatements && host.accountStatements.isLoading !== host.loadingStates.LOADING;\n                else loadingState\n              \"\n            >\n              <ng-container *ngIf=\"!host.accountStatements.error; else errorStateAccountStatements\">\n                <ng-container\n                  *ngIf=\"\n                    accountStatements.length ||\n                      host.accountStatements.areFiltersApplied ||\n                      host.accountStatements.isLoading === host.loadingStates.LOADING_FILTERED;\n                    else emptyStateAccountStatements\n                  \"\n                >\n                  <bb-account-statement-filter-form\n                    [categories]=\"categories\"\n                    [filtersApplied]=\"host.accountStatements.areFiltersApplied\"\n                    [filterParams]=\"(host.filterParams | async)!\"\n                    (filtersChange)=\"host.setFilterParams($event)\"\n                    [showCategory]=\"host.showCategory | async\"\n                    [minDate]=\"(host.minimalDate | async)!\"\n                    [maxDate]=\"host.maximumDate\"\n                  ></bb-account-statement-filter-form>\n\n                  <ng-container\n                    *ngIf=\"host.accountStatements.isLoading !== host.loadingStates.LOADING_FILTERED; else loadingState\"\n                  >\n                    <ng-container *ngIf=\"accountStatements.length; else emptyStateAccountStatementsFiltered\">\n                      <bb-account-statement-table\n                        class=\"bb-block card-section\"\n                        [accountStatements]=\"accountStatements\"\n                        [showCategory]=\"(host.showCategory | async)!\"\n                        [showDescription]=\"(host.showDescription | async)!\"\n                        [sortingParams]=\"host.sortingParams | async\"\n                        [notificationDismissTimeProperty]=\"(host.notificationDismissTimeProperty | async)!\"\n                        [loading]=\"host.accountStatements.isLoading === host.loadingStates.LOADING_TABLE\"\n                        (sortingParamsChange)=\"host.setSortingParams($event)\"\n                      ></bb-account-statement-table>\n                      <!--Temporary add $any. Remove it once we remove the extension slots-->\n                      <bb-account-statement-pagination\n                        [paginationType]=\"host.widgetProperties.paginationType\"\n                        [loading]=\"host.accountStatements.isLoading === host.loadingStates.LOADING_MORE\"\n                        [itemsPerPage]=\"host.widgetProperties.pageSize\"\n                        [page]=\"$any(host.loadingParams | async).from\"\n                        [count]=\"host.accountStatements?.totalCount\"\n                        [hasMore]=\"accountStatements.length !== host.accountStatements?.totalCount\"\n                        (loadMore)=\"host.setPageNumber($event)\"\n                        (pageChange)=\"host.setPageNumber($event)\"\n                      >\n                      </bb-account-statement-pagination>\n                    </ng-container>\n                  </ng-container>\n                </ng-container>\n              </ng-container>\n            </ng-container>\n          </div>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n  </div>\n\n  <ng-template #loadingState>\n    <bb-loading-indicator-ui\n      loaderSize=\"md\"\n      i18n-text=\"Loading data...|Loading title@@accountStatement.loading.title\"\n      text=\"Loading data...\"\n    ></bb-loading-indicator-ui>\n  </ng-template>\n\n  <ng-template #emptyStateAccounts>\n    <div class=\"card\">\n      <bb-empty-state-ui\n        class=\"bb-state-container\"\n        iconSize=\"xxl\"\n        iconModifier=\"current-accounts\"\n        i18n-title=\"No Account selected|Accounts state title theme two@@accountStatement.accounts.state.title.theme.two\"\n        title=\"No account selected\"\n        i18n-subtitle=\"\n          You need to select account in order to view account statements|Accounts state subtitle theme\n          two@@accountStatement.accounts.state.subtitle.theme.two\"\n        subtitle=\"You need to select account in order to view account statements\"\n      ></bb-empty-state-ui>\n    </div>\n  </ng-template>\n\n  <ng-template #errorStateAccounts>\n    <div class=\"card\">\n      <bb-empty-state-ui\n        class=\"bb-state-container\"\n        data-role=\"accounts-error-state\"\n        iconSize=\"xxl\"\n        iconModifier=\"error\"\n        subtitle=\"Try to reload the page or contact the system administrator.\"\n        i18n-subtitle=\"Account list error state subtitle@@accountStatement.account-list.error-state.subtitle\"\n        title=\"Account list is not loading\"\n        i18n-title=\"Account list is not loading error state title@@accountStatement.account-list.error-state.title\"\n      >\n      </bb-empty-state-ui>\n    </div>\n  </ng-template>\n\n  <ng-template #emptyStateAccountStatements>\n    <bb-empty-state-ui\n      class=\"bb-state-container\"\n      iconSize=\"xxl\"\n      iconModifier=\"description\"\n      i18n-title=\"\n        No Account Statements found|Account statements state title theme\n        two@@accountStatement.statements.state.title.theme2\"\n      title=\"No Account Statements for selected account\"\n      i18n-subtitle=\"\n        You don't have any account statements to be displayed for this account|Account statements state subtitle theme\n        two@@accountStatement.statements.state.subtitle.theme2\"\n      subtitle=\"You don't have any account statements to be displayed for this account\"\n    ></bb-empty-state-ui>\n  </ng-template>\n\n  <ng-template #emptyStateAccountStatementsFiltered>\n    <bb-empty-state-ui\n      class=\"bb-state-container\"\n      iconSize=\"xxl\"\n      iconModifier=\"search\"\n      i18n-title=\"\n        No Results Found|Account statements filtered state title@@accountStatement.statements.filtered.state.title\"\n      title=\"No Results Found\"\n      i18n-subtitle=\"\n        We can\u2019t find what you\u2019re looking for. Please try a different criteria.|Account statements filtered state\n        subtitle@@accountStatement.statements.filtered.state.subtitle\"\n      subtitle=\"We can\u2019t find what you\u2019re looking for. Please try a different criteria.\"\n    ></bb-empty-state-ui>\n  </ng-template>\n\n  <ng-template #errorStateAccountStatements>\n    <bb-empty-state-ui\n      class=\"bb-state-container\"\n      data-role=\"account-statements-error-state\"\n      iconSize=\"xxl\"\n      iconModifier=\"error\"\n      subtitle=\"Try to reload the page or contact the system administrator.\"\n      i18n-subtitle=\"Account statements list error state subtitle@@accountStatement.statement-list.error-state.subtitle\"\n      title=\"Account statement list is not loading\"\n      i18n-title=\"\n        Account statement list is not loading error state title@@accountStatement.statement-list.error-state.title\"\n    >\n    </bb-empty-state-ui>\n  </ng-template>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i1.ӨAccountStatementAccountSelectorComponent; }), selector: "bb-account-statement-account-selector", inputs: ["accounts"], outputs: ["accountSelect"] }, { type: i0.forwardRef(function () { return i3.AccountStatementFilterFormComponent; }), selector: "bb-account-statement-filter-form", inputs: ["categories", "showCategory", "filtersApplied", "filterParams", "minDate", "maxDate"], outputs: ["filtersChange"] }, { type: i0.forwardRef(function () { return i4.AccountStatementTableComponent; }), selector: "bb-account-statement-table", inputs: ["accountStatements", "showDescription", "showCategory", "sortingParams", "loading", "notificationDismissTimeProperty"], outputs: ["sortingParamsChange"] }, { type: i0.forwardRef(function () { return i1.ӨAccountStatementPaginationComponent; }), selector: "bb-account-statement-pagination", inputs: ["page", "from", "count", "itemsPerPage", "paginationType", "hasMore", "loading"], outputs: ["pageChange", "loadMore"] }, { type: i0.forwardRef(function () { return i5.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i0.forwardRef(function () { return i6.EmptyStateComponent; }), selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }], directives: [{ type: i0.forwardRef(function () { return AccountStatementListCustomizableDirective; }), selector: "[bbAccountStatementListCustomizable]" }, { type: i0.forwardRef(function () { return i7.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], pipes: { "async": i0.forwardRef(function () { return i7.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementListWidgetComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-account-statement-list-widget',
                    templateUrl: './account-statement-list-widget.component.html',
                    providers: [AccountStatementListWidgetPropertiesService],
                }]
        }], ctorParameters: function () { return [{ type: i1.AccountStatementDataService }, { type: i2.AccountStatementListWidgetPropertiesService }]; }, propDecorators: { showDescriptionValue: [{
                type: Input,
                args: ['showDescription']
            }] } });
export class AccountStatementListCustomizableDirective extends BbTemplate {
}
AccountStatementListCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementListCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
AccountStatementListCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.15", type: AccountStatementListCustomizableDirective, selector: "[bbAccountStatementListCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementListCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbAccountStatementListCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC1zdGF0ZW1lbnQtbGlzdC13aWRnZXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9hY2NvdW50LXN0YXRlbWVudC1saXN0LXdpZGdldC1hbmcvc3JjL2FjY291bnQtc3RhdGVtZW50LWxpc3Qtd2lkZ2V0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2xpYnMvYWNjb3VudC1zdGF0ZW1lbnQtbGlzdC13aWRnZXQtYW5nL3NyYy9hY2NvdW50LXN0YXRlbWVudC1saXN0LXdpZGdldC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQXFCLE1BQU0sZUFBZSxDQUFDO0FBRS9FLE9BQU8sRUFHTCx5QkFBeUIsRUFDekIsbUNBQW1DLEVBR25DLDBCQUEwQixFQUMxQiwwQkFBMEIsRUFFMUIsa0JBQWtCLEVBRWxCLFlBQVksRUFDWixjQUFjLEVBRWQsa0JBQWtCLEVBQ2xCLGlCQUFpQixFQUtqQixLQUFLLEdBQ04sTUFBTSx3Q0FBd0MsQ0FBQztBQUloRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDM0QsT0FBTyxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQWMsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvRSxPQUFPLEVBQ0wsVUFBVSxFQUNWLG9CQUFvQixFQUNwQixNQUFNLEVBQ04sR0FBRyxFQUNILFFBQVEsRUFDUixJQUFJLEVBQ0osV0FBVyxFQUNYLFNBQVMsRUFDVCxTQUFTLEVBQ1QsU0FBUyxFQUNULEdBQUcsR0FDSixNQUFNLGdCQUFnQixDQUFDO0FBRXhCLE9BQU8sRUFBRSwyQ0FBMkMsRUFBRSxNQUFNLDhEQUE4RCxDQUFDOzs7Ozs7Ozs7QUFJM0gsTUFBTSw0QkFBNEIsR0FBRyxxQkFBcUIsQ0FBQztBQUMzRCxNQUFNLENB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QUNULElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdkIsQ0FBQzs7aUlBcFNVLG1DQUFtQztxSEFBbkMsbUNBQW1DLDBJQUZuQyxDQUFDLDJDQUEyQyxDQUFDLGlEQ3ZEMUQsMHNRQXFMQSw0N0NEOEthLHlDQUF5Qzs0RkExU3pDLG1DQUFtQztrQkFML0MsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsa0NBQWtDO29CQUM1QyxXQUFXLEVBQUUsZ0RBQWdEO29CQUM3RCxTQUFTLEVBQUUsQ0FBQywyQ0FBMkMsQ0FBQztpQkFDekQ7NEtBUytCLG9CQUFvQjtzQkFBakQsS0FBSzt1QkFBQyxpQkFBaUI7O0FBa1MxQixNQUFNLE9BQU8seUNBQTBDLFNBQVEsVUFTOUQ7O3VJQVRZLHlDQUF5QzsySEFBekMseUNBQXlDOzRGQUF6Qyx5Q0FBeUM7a0JBSHJELFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHNDQUFzQztpQkFDakQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIERpcmVjdGl2ZSwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7XG4gIEFjY291bnRJdGVtLFxuICBBY2NvdW50cyxcbiAgQUNDT1VOVFNfUkVRVUVTVF9BTExfU0laRSxcbiAgQWNjb3VudFN0YXRlbWVudEJhc2VXaWRnZXRDb21wb25lbnQsXG4gIEFjY291bnRTdGF0ZW1lbnREYXRhU2VydmljZSxcbiAgQWNjb3VudFN0YXRlbWVudEdldFJlcVBhcmFtcyxcbiAgY29udmVydERhdGVPYmpUb0RhdGVTdHJ1Y3QsXG4gIGNvbnZlcnREYXRlU3RydWN0VG9EYXRlT2JqLFxuICBGaWx0ZXJQYXJhbXMsXG4gIGdldERhdGVGaWx0ZXJMaW1pdCxcbiAgTG9hZGluZ1BhcmFtcyxcbiAgTG9hZGluZ1N0YXRlLFxuICBQYWdpbmF0aW9uVHlwZSxcbiAgUHJvY2Nlc3NlZEFjY291bnRTdGF0ZW1lbnRzUmF3RGF0YSxcbiAgc2ltcGxlQXJyYXlDb21wYXJlLFxuICBzbWFydExvYWRpbmdTdGF0ZSxcbiAgU29ydGluZ1BhcmFtcyxcbiAgU3RhdGVBY2NvdW50cyxcbiAgU3RhdGVBY2NvdW50U3RhdGVtZW50cyxcbiAgU3RhdGVDYXRlZ29yaWVzLFxuICB0b2RheSxcbn0gZnJvbSAnQGJhY2tiYXNlL2FjY291bnQtc3RhdGVtZW50LWNvbW1vbi1hbmcnO1xuaW1wb3J0IHsgQWNjb3VudFN0YXRlbWVudCB9IGZyb20gJ0BiYWNrYmFzZS9kYXRhLWFuZy9hY2NvdW50LXN0YXRlbWVudHMnO1xuaW1wb3J0IHsgUHJvZHVjdFN1bW1hcnlJdGVtIH0gZnJvbSAnQGJhY2tiYXNlL2RhdGEtYW5nL2FycmFuZ2VtZW50cyc7XG5cbmltcG9ydCB7IEJiVGVtcGxhdGUgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvY29yZSc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUsIG9mLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7XG4gIGNhdGNoRXJyb3IsXG4gIGRpc3RpbmN0VW50aWxDaGFuZ2VkLFxuICBmaWx0ZXIsXG4gIG1hcCxcbiAgcGFpcndpc2UsXG4gIHNjYW4sXG4gIHNoYXJlUmVwbGF5LFxuICBzdGFydFdpdGgsXG4gIHN3aXRjaE1hcCxcbiAgdGFrZVVudGlsLFxuICB0YXAsXG59IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgQWNjb3VudFN0YXRlbWVudExpc3RXaWRnZXRQcm9wZXJ0aWVzU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvYWNjb3VudC1zdGF0ZW1lbnRzLWxpc3Qtd2lkZ2V0LXByb3BlcnRpZXMuc2VydmljZSc7XG5pbXBvcnQgeyBOZ2JEYXRlU3RydWN0IH0gZnJvbSAnQG5nLWJvb3RzdHJhcC9uZy1ib290c3RyYXAnO1xuaW1wb3J0IHsgQWNjb3VudFN0YXRlbWVudExpc3RXaWRnZXRQcm9wZXJ0aWVzIH0gZnJvbSAnLi90eXBlcy9hY2NvdW50LXN0YXRlbWVudC1saXN0LXdpZGdldC1wcm9wZXJ0aWVzJztcblxuY29uc3QgU1RPUkFHRV9BQ0NPVU5UX1NFTEVDVEVEX0tFWSA9ICdiYi5wcm9kdWN0LnNlbGVjdGVkJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX0ZST01fVkFMVUUgPSAwO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1hY2NvdW50LXN0YXRlbWVudC1saXN0LXdpZGdldCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9hY2NvdW50LXN0YXRlbWVudC1saXN0LXdpZGdldC5jb21wb25lbnQuaHRtbCcsXG4gIHByb3ZpZGVyczogW0FjY291bnRTdGF0ZW1lbnRMaXN0V2lkZ2V0UHJvcGVydGllc1NlcnZpY2VdLFxufSlcbmV4cG9ydCBjbGFzcyBBY2NvdW50U3RhdGVtZW50TGlzdFdpZGdldENvbXBvbmVudFxuICBleHRlbmRzIEFjY291bnRTdGF0ZW1lbnRCYXNlV2lkZ2V0Q29tcG9uZW50PEFjY291bnRTdGF0ZW1lbnRMaXN0V2lkZ2V0UHJvcGVydGllc1NlcnZpY2U+XG4gIGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3lcbntcbiAgLyoqXG4gICAqIEZsYWcgdG8gc2hvdy9oaWRlIGRlc2NyaXB0aW9uXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L25vLWlucHV0LXJlbmFtZVxuICBASW5wdXQoJ3Nob3dEZXNjcmlwdGlvbicpIHNldCBzaG93RGVzY3JpcHRpb25WYWx1ZSh2YWx1ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMucHJvcGVydGllc1NlcnZpY2Uuc2V0U2hvd0Rlc2NyaXB0aW9uKHZhbHVlKTtcbiAgfVxuXG4gIHJlYWRvbmx5IGhvc3RSZWYgPSB0aGlzO1xuICByZWFkb25seSBsb2FkaW5nU3RhdGVzID0gTG9hZGluZ1N0YXRlO1xuXG4gIGFjY291bnRzOiBTdGF0ZUFjY291bnRzID0ge1xuICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogZmFsc2UsXG4gIH07XG4gIGNhdGVnb3JpZXM6IFN0YXRlQ2F0ZWdvcmllcyA9IHtcbiAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgZXJyb3I6IGZhbHNlLFxuICB9O1xuICBhY2NvdW50U3RhdGVtZW50czogU3RhdGVBY2NvdW50U3RhdGVtZW50cyA9IHtcbiAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgZXJyb3I6IGZhbHNlLFxuICAgIHRvdGFsQ291bnQ6IHVuZGVmaW5lZCxcbiAgICBpc0xvYWRpbmc6IExvYWRpbmdTdGF0ZS5JRExFLFxuICAgIGFyZUZpbHRlcnNBcHBsaWVkOiBmYWxzZSxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbWVtYmVyLW9yZGVyaW5nICovXG4gIC8qKlxuICAgKiBNaW5pbWFsIGRhdGUgZm9yIFwiRGF0ZSByYW5nZVwiIGZpbHRlci4gRGVmYXVsdCB2YWx1ZSBpcyBcIjE5NzAtMDEtMDFcIi5cbiAgICovXG4gIG1pbmltYWxEYXRlOiBPYnNlcnZhYmxlPE5nYkRhdGVTdHJ1Y3Q+ID0gdGhpcy5pbml0aWFsaXplTWluaW1hbERhdGVGaWx0ZXJMaW1pdDtcblxuICAvKipcbiAgICogTWF4aW11bSBkYXRlIGZvciBcIkRhdGUgcmFuZ2VcIiBmaWx0ZXIuIERlZmF1bHQgdmFsdWUgaXMgY3VycmVudCBkYXRlLlxuICAgKi9cbiAgbWF4aW11bURhdGU6IE5nYkRhdGVTdHJ1Y3QgPSBjb252ZXJ0RGF0ZU9ialRvRGF0ZVN0cnVjdCh0b2RheSgpKTtcblxuICByZWFkb25seSBzZWxlY3RlZEFjY291bnQgPSBuZXcgU3ViamVjdDxBY2NvdW50SXRlbSB8IFByb2R1Y3RTdW1tYXJ5SXRlbT4oKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbiAgcmVhZG9ubHkgc29ydGluZ1BhcmFtc05ldyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U29ydGluZ1BhcmFtcyB8IHt9Pih7fSk7XG4gIHJlYWRvbmx5IHNvcnRpbmdQYXJhbXM6IE9ic2VydmFibGU8U29ydGluZ1BhcmFtcz4gPSBjb21iaW5lTGF0ZXN0KFtcbiAgICB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLnNvcnRpbmdPcmRlciQsXG4gICAgdGhpcy5wcm9wZXJ0aWVzU2VydmljZS5zb3J0aW5nRGlyZWN0aW9uJCxcbiAgICB0aGlzLnNvcnRpbmdQYXJhbXNOZXcsXG4gIF0pLnBpcGUoXG4gICAgbWFwKChbb3JkZXJCeSwgZGlyZWN0aW9uLCBuZXdQYXJhbXNdKSA9PiAoe1xuICAgICAgb3JkZXJCeSxcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIC4uLm5ld1BhcmFtcyxcbiAgICB9KSksXG4gICk7XG4gIHJlYWRvbmx5IGZpbHRlclBhcmFtcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8RmlsdGVyUGFyYW1zPih7fSk7XG4gIHJlYWRvbmx5IGxvYWRpbmdQYXJhbXNOZXcgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PExvYWRpbmdQYXJhbXM+KHtcbiAgICBmcm9tOiBERUZBVUxUX0ZST01fVkFMVUUsXG4gIH0pO1xuICByZWFkb25seSBsb2FkaW5nUGFyYW1zID0gY29tYmluZUxhdGVzdChbXG4gICAgdGhpcy5wcm9wZXJ0aWVzU2VydmljZS5wYWdlU2l6ZSQsXG4gICAgdGhpcy5sb2FkaW5nUGFyYW1zTmV3LFxuICAgIHRoaXMubWluaW1hbERhdGUsXG4gIF0pLnBpcGUoXG4gICAgbWFwKChbc2l6ZSwgbmV3UGFyYW1zLCBtaW5pbWFsRGF0ZV0pID0+ICh7XG4gICAgICBzaXplLFxuICAgICAgZnJvbTogREVGQVVMVF9GUk9NX1ZBTFVFLFxuICAgICAgZGF0ZUZyb206IGNvbnZlcnREYXRlU3RydWN0VG9EYXRlT2JqKG1pbmltYWxEYXRlKSxcbiAgICAgIGRhdGVUbzogY29udmVydERhdGVTdHJ1Y3RUb0RhdGVPYmoodGhpcy5tYXhpbXVtRGF0ZSksXG4gICAgICAuLi5uZXdQYXJhbXMsXG4gICAgfSkpLFxuICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSxcbiAgKTtcblxuICBhY2NvdW50c0Vycm9yPzogRXJyb3IgPSB1bmRlZmluZWQ7XG4gIGFjY291bnRzRGF0YSA9IHRoaXMuc2VydmljZVxuICAgIC5nZXRBY2NvdW50cyh7XG4gICAgICBzaXplOiBBQ0NPVU5UU19SRVFVRVNUX0FMTF9TSVpFLFxuICAgIH0pXG4gICAgLnBpcGUoXG4gICAgICBtYXAocmVzcG9uc2UgPT4gcmVzcG9uc2UuYm9keSksXG4gICAgICB0YXAoYWNjb3VudHMgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdEFjY291bnQoYWNjb3VudHNbMF0pO1xuICAgICAgfSksXG4gICAgICBjYXRjaEVycm9yKGVycm9yID0+IHtcbiAgICAgICAgdGhpcy5hY2NvdW50c0Vycm9yID0gZXJyb3I7XG4gICAgICAgIHJldHVybiBvZihbXSk7XG4gICAgICB9KSxcbiAgICApO1xuXG4gIHdpZGdldFByb3BlcnRpZXM6IEFjY291bnRTdGF0ZW1lbnRMaXN0V2lkZ2V0UHJvcGVydGllcyA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2VydmljZTogQWNjb3VudFN0YXRlbWVudERhdGFTZXJ2aWNlLFxuICAgIHByb3BlcnRpZXNTZXJ2aWNlOiBBY2NvdW50U3RhdGVtZW50TGlzdFdpZGdldFByb3BlcnRpZXNTZXJ2aWNlLFxuICApIHtcbiAgICBzdXBlcihwcm9wZXJ0aWVzU2VydmljZSk7XG5cbiAgICB0aGlzLmFjY291bnRzLmRhdGEgPSB0aGlzLnNlcnZpY2UubG9hZEFjY291bnRzKCkucGlwZShcbiAgICAgIHRhcCgoYWNjb3VudHM6IEFjY291bnRzIHwgbnVsbCkgPT4ge1xuICAgICAgICBpZiAoYWNjb3VudHMgJiYgYWNjb3VudHMubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgaW5pdGlhbEFjY291bnQgPSB0aGlzLmdldEluaXRpYWxTZWxlY3RlZEFjY291bnQoYWNjb3VudHMpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0QWNjb3VudChpbml0aWFsQWNjb3VudCk7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgY2F0Y2hFcnJvcigoKSA9PiB7XG4gICAgICAgIHRoaXMuYWNjb3VudHMuZXJyb3IgPSB0cnVlO1xuICAgICAgICByZXR1cm4gb2YoW10pO1xuICAgICAgfSksXG4gICAgICBzaGFyZVJlcGxheSgxKSxcbiAgICApO1xuXG4gICAgY29uc3QgcGFyYW1zOiBPYnNlcnZhYmxlPEFjY291bnRTdGF0ZW1lbnRHZXRSZXFQYXJhbXM+ID0gY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLnNlbGVjdGVkQWNjb3VudC5waXBlKFxuICAgICAgICBtYXAoKHsgaWQgfSkgPT4gaWQpLFxuICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgKSxcbiAgICAgIHRoaXMubG9hZGluZ1BhcmFtcyxcbiAgICAgIHRoaXMuc29ydGluZ1BhcmFtcyxcbiAgICAgIHRoaXMuZmlsdGVyUGFyYW1zLnBpcGUoXG4gICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKFxuICAgICAgICAgIChwcmV2LCBjdXIpID0+XG4gICAgICAgICAgICBzaW1wbGVBcnJheUNvbXBhcmUocHJldi5jYXRlZ29yeSwgY3VyLmNhdGVnb3J5KSAmJlxuICAgICAgICAgICAgcHJldi5kYXRlRnJvbSA9PT0gY3VyLmRhdGVGcm9tICYmXG4gICAgICAgICAgICBwcmV2LmRhdGVUbyA9PT0gY3VyLmRhdGVUbyxcbiAgICAgICAgKSxcbiAgICAgICAgdGFwKGZpbHRlclBhcmFtcyA9PiAodGhpcy5hY2NvdW50U3RhdGVtZW50cy5hcmVGaWx0ZXJzQXBwbGllZCA9IHRoaXMuYXJlRmlsdGVyc0FwcGxpZWQoZmlsdGVyUGFyYW1zKSkpLFxuICAgICAgKSxcbiAgICBdKS5waXBlKFxuICAgICAgbWFwKFxuICAgICAgICAoW2FjY291bnRJZCwgbG9hZGluZ1BhcmFtcywgc29ydGluZ1BhcmFtcywgZmlsdGVyUGFyYW1zXSkgPT5cbiAgICAgICAgICAoe1xuICAgICAgICAgICAgYWNjb3VudElkLFxuICAgICAgICAgICAgLi4ubG9hZGluZ1BhcmFtcyxcbiAgICAgICAgICAgIC4uLihzb3J0aW5nUGFyYW1zLmRpcmVjdGlvbiAmJiB7IC4uLnNvcnRpbmdQYXJhbXMgfSksXG4gICAgICAgICAgICAuLi5maWx0ZXJQYXJhbXMsXG4gICAgICAgICAgfSBhcyBBY2NvdW50U3RhdGVtZW50R2V0UmVxUGFyYW1zKSxcbiAgICAgICksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgocHJldiwgY3VyKSA9PiB7XG4gICAgICAgIGlmIChjdXIuZnJvbSA9PT0gcHJldi5mcm9tICYmIGN1ci5mcm9tICE9PSBERUZBVUxUX0ZST01fVkFMVUUpIHtcbiAgICAgICAgICB0aGlzLnNldExvYWRpbmdQYXJhbXMoeyBmcm9tOiBERUZBVUxUX0ZST01fVkFMVUUgfSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5hY2NvdW50U3RhdGVtZW50cy5kYXRhID0gcGFyYW1zLnBpcGUoXG4gICAgICBzdGFydFdpdGgoe30gYXMgQWNjb3VudFN0YXRlbWVudEdldFJlcVBhcmFtcyksXG4gICAgICBwYWlyd2lzZSgpLFxuICAgICAgdGFwKChbb2xkUGFyYW1zLCBuZXdQYXJhbXNdKSA9PiB7XG4gICAgICAgIHRoaXMuYWNjb3VudFN0YXRlbWVudHMuaXNMb2FkaW5nID0gc21hcnRMb2FkaW5nU3RhdGUob2xkUGFyYW1zLCB7XG4gICAgICAgICAgLi4ubmV3UGFyYW1zLFxuICAgICAgICAgIHBhZ2luYXRpb25UeXBlOiB0aGlzLndpZGdldFByb3BlcnRpZXMucGFnaW5hdGlvblR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFjY291bnRTdGF0ZW1lbnRzLmVycm9yID0gZmFsc2U7XG4gICAgICB9KSxcbiAgICAgIHN3aXRjaE1hcChcbiAgICAgICAgKFssIG5ld1BhcmFtc10pOiBPYnNlcnZhYmxlPFtBY2NvdW50U3RhdGVtZW50R2V0UmVxUGFyYW1zLCBBY2NvdW50U3RhdGVtZW50W10gfCBudWxsXT4gPT5cbiAgICAgICAgICB0aGlzLmdldEFjY291bnRTdGF0ZW1lbnRzKG5ld1BhcmFtcykucGlwZShcbiAgICAgICAgICAgIHRhcChcbiAgICAgICAgICAgICAgKHJlc3BvbnNlOiBQcm9jY2Vzc2VkQWNjb3VudFN0YXRlbWVudHNSYXdEYXRhKSA9PlxuICAgICAgICAgICAgICAgICh0aGlzLmFjY291bnRTdGF0ZW1lbnRzLnRvdGFsQ291bnQgPSByZXNwb25zZSAmJiByZXNwb25zZS50b3RhbENvdW50KSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBtYXAoKHJlc3BvbnNlOiBQcm9jY2Vzc2VkQWNjb3VudFN0YXRlbWVudHNSYXdEYXRhKSA9PiBbbmV3UGFyYW1zLCByZXNwb25zZSAmJiByZXNwb25zZS5kYXRhXSksXG4gICAgICAgICAgKSxcbiAgICAgICksXG4gICAgICBzY2FuKFxuICAgICAgICAoXG4gICAgICAgICAgYWNjOiBBY2NvdW50U3RhdGVtZW50W10sXG4gICAgICAgICAgW3JlcVBhcmFtcywgY3VyXTogW0FjY291bnRTdGF0ZW1lbnRHZXRSZXFQYXJhbXMsIEFjY291bnRTdGF0ZW1lbnRbXSB8IG51bGxdLFxuICAgICAgICApOiBBY2NvdW50U3RhdGVtZW50W10gPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0UHJvcGVydGllcy5wYWdpbmF0aW9uVHlwZSA9PT0gUGFnaW5hdGlvblR5cGUuTG9hZE1vcmUgJiZcbiAgICAgICAgICAgIHJlcVBhcmFtcy5mcm9tICE9PSBERUZBVUxUX0ZST01fVkFMVUVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCAuLi4oY3VyIHx8IFtdKV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uKGN1ciB8fCBbXSldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW10sXG4gICAgICApLFxuICAgICAgdGFwKCgpID0+ICh0aGlzLmFjY291bnRTdGF0ZW1lbnRzLmlzTG9hZGluZyA9IExvYWRpbmdTdGF0ZS5JRExFKSksXG4gICAgKTtcblxuICAgIHRoaXMuY2F0ZWdvcmllcy5kYXRhID0gdGhpcy5zaG93Q2F0ZWdvcnkucGlwZShcbiAgICAgIGZpbHRlcihCb29sZWFuKSxcbiAgICAgIHN3aXRjaE1hcCgoKSA9PlxuICAgICAgICB0aGlzLnNlcnZpY2UubG9hZENhdGVnb3JpZXMoKS5waXBlKFxuICAgICAgICAgIGNhdGNoRXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yaWVzLmVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBvZihbXSk7XG4gICAgICAgICAgfSksXG4gICAgICAgICksXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLndpZGdldFByb3BlcnRpZXMkXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKHByb3BlcnRpZXMgPT4gKHRoaXMud2lkZ2V0UHJvcGVydGllcyA9IHByb3BlcnRpZXMpKTtcbiAgfVxuXG4gIC8vIFRPRE86IE1lcmdlIHRoZXNlIGdldHRlcnMgaW50byBvbmUgb2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gdGhhdCB3b3VsZCBwcm9kdWNlIG9iamVjdCB3aXRoIGFsbCB3aWRnZXQgcHJvcGVydGllc1xuICBnZXQgcGFnZVNpemUoKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzU2VydmljZS5wYWdlU2l6ZSQ7XG4gIH1cblxuICBnZXQgc29ydGluZ09yZGVyKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1NlcnZpY2Uuc29ydGluZ09yZGVyJDtcbiAgfVxuXG4gIGdldCBzb3J0aW5nRGlyZWN0aW9uKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1NlcnZpY2Uuc29ydGluZ0RpcmVjdGlvbiQ7XG4gIH1cblxuICBnZXQgc2hvd0Rlc2NyaXB0aW9uKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLnNob3dEZXNjcmlwdGlvbiQ7XG4gIH1cblxuICBnZXQgc2hvd0NhdGVnb3J5KCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLnNob3dDYXRlZ29yeSQ7XG4gIH1cblxuICBnZXQgbm90aWZpY2F0aW9uRGlzbWlzc1RpbWVQcm9wZXJ0eSgpOiBPYnNlcnZhYmxlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLm5vdGlmaWNhdGlvbkRpc21pc3NUaW1lJDtcbiAgfVxuXG4gIHNldEZpbHRlclBhcmFtcyhwYXJhbXM6IEZpbHRlclBhcmFtcykge1xuICAgIHRoaXMuZmlsdGVyUGFyYW1zLm5leHQocGFyYW1zKTtcbiAgfVxuXG4gIHNldFNvcnRpbmdQYXJhbXMocGFyYW1zOiBTb3J0aW5nUGFyYW1zKSB7XG4gICAgdGhpcy5zb3J0aW5nUGFyYW1zTmV3Lm5leHQocGFyYW1zKTtcbiAgfVxuXG4gIHNldExvYWRpbmdQYXJhbXMocGFyYW1zOiBMb2FkaW5nUGFyYW1zKSB7XG4gICAgdGhpcy5sb2FkaW5nUGFyYW1zTmV3Lm5leHQoeyAuLi5wYXJhbXMgfSk7XG4gIH1cblxuICBzZXRQYWdlTnVtYmVyKHBhZ2U6IG51bWJlcikge1xuICAgIHRoaXMubG9hZGluZ1BhcmFtc05ldy5uZXh0KHtcbiAgICAgIC4uLnRoaXMubG9hZGluZ1BhcmFtc05ldy5nZXRWYWx1ZSgpLFxuICAgICAgZnJvbTogcGFnZSxcbiAgICB9KTtcbiAgfVxuXG4gIHNlbGVjdEFjY291bnQoYWNjb3VudDogQWNjb3VudEl0ZW0gfCBQcm9kdWN0U3VtbWFyeUl0ZW0gfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkQWNjb3VudC5uZXh0KGFjY291bnQpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbFNlbGVjdGVkQWNjb3VudCA9IChhY2NvdW50czogQWNjb3VudHMpOiBBY2NvdW50SXRlbSA9PiB7XG4gICAgY29uc3QgYWNjb3VudElkOiBzdHJpbmcgfCBudWxsID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfQUNDT1VOVF9TRUxFQ1RFRF9LRVkpO1xuICAgIHJldHVybiBhY2NvdW50cy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gYWNjb3VudElkKSB8fCBhY2NvdW50c1swXTtcbiAgfTtcblxuICBnZXRBY2NvdW50U3RhdGVtZW50cyhwYXJhbXM6IEFjY291bnRTdGF0ZW1lbnRHZXRSZXFQYXJhbXMgPSB7fSk6IE9ic2VydmFibGU8UHJvY2Nlc3NlZEFjY291bnRTdGF0ZW1lbnRzUmF3RGF0YT4ge1xuICAgIHJldHVybiB0aGlzLnNlcnZpY2UubG9hZEFjY291bnRTdGF0ZW1lbnRzKHBhcmFtcykucGlwZShcbiAgICAgIGNhdGNoRXJyb3IoKCkgPT4ge1xuICAgICAgICB0aGlzLmFjY291bnRTdGF0ZW1lbnRzLmVycm9yID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG9mKHsgZGF0YTogW10sIHRvdGFsQ291bnQ6IDAgfSk7XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBhcmVGaWx0ZXJzQXBwbGllZChmaWx0ZXJQYXJhbXM6IEZpbHRlclBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFyZUNhdGVnb3JpZXNBcHBsaWVkID0gISFmaWx0ZXJQYXJhbXMuY2F0ZWdvcnkgJiYgZmlsdGVyUGFyYW1zLmNhdGVnb3J5Lmxlbmd0aCAhPT0gMDtcbiAgICBjb25zdCBpc0Jvb2tEYXRlQXBwbGllZCA9ICEhZmlsdGVyUGFyYW1zLmRhdGVGcm9tICYmICEhZmlsdGVyUGFyYW1zLmRhdGVUbztcbiAgICByZXR1cm4gYXJlQ2F0ZWdvcmllc0FwcGxpZWQgfHwgaXNCb29rRGF0ZUFwcGxpZWQ7XG4gIH1cblxuICBwcml2YXRlIGdldCBpbml0aWFsaXplTWluaW1hbERhdGVGaWx0ZXJMaW1pdCgpIHtcbiAgICByZXR1cm4gY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLmFic29sdXRlRGF0ZUxpbWl0JC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSksXG4gICAgICB0aGlzLnByb3BlcnRpZXNTZXJ2aWNlLnJlbGF0aXZlRGF0ZUxpbWl0JC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSksXG4gICAgXSkucGlwZShcbiAgICAgIG1hcCgoW2Fic29sdXRlRGF0ZUxpbWl0LCByZWxhdGl2ZU1vbnRoTGltaXRdKSA9PiB7XG4gICAgICAgIC8vIHRoaXMgc2V0cyBkZWZhdWx0IHZhbHVlIHRvIHRoZSBmaXJzdCBtaWxsaXNlY29uZCBvZiBVbml4IGRhdGVcbiAgICAgICAgY29uc3QgbGltaXREYXRlID0gZ2V0RGF0ZUZpbHRlckxpbWl0KGFic29sdXRlRGF0ZUxpbWl0LCByZWxhdGl2ZU1vbnRoTGltaXQpO1xuICAgICAgICByZXR1cm4gY29udmVydERhdGVPYmpUb0RhdGVTdHJ1Y3QobGltaXREYXRlKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJBY2NvdW50U3RhdGVtZW50TGlzdEN1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBBY2NvdW50U3RhdGVtZW50TGlzdEN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8XG4gIEFjY291bnRTdGF0ZW1lbnRMaXN0V2lkZ2V0Q29tcG9uZW50LFxuICB7XG4gICAgYWNjb3VudHM6IFByb2R1Y3RTdW1tYXJ5SXRlbVtdO1xuICAgIGFjY291bnRzRXJyb3I/OiBFcnJvcjtcbiAgICBjYXRlZ29yaWVzPzogc3RyaW5nW107XG4gICAgYWNjb3VudFN0YXRlbWVudHM6IEFjY291bnRTdGF0ZW1lbnRbXTtcbiAgICBzZWxlY3RlZEFjY291bnQ6IEFjY291bnRJdGVtIHwgUHJvZHVjdFN1bW1hcnlJdGVtO1xuICB9XG4+IHt9XG4iLCI8bmctY29udGFpbmVyXG4gIGJiQWNjb3VudFN0YXRlbWVudExpc3RDdXN0b21pemFibGVcbiAgW2JiSG9zdFJlZl09XCJob3N0UmVmXCJcbiAgW2JiVGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICBhY2NvdW50czogKGFjY291bnRzRGF0YSB8IGFzeW5jKSEsXG4gICAgYWNjb3VudHNFcnJvcjogYWNjb3VudHNFcnJvcixcbiAgICBjYXRlZ29yaWVzOiAoY2F0ZWdvcmllcy5kYXRhIHwgYXN5bmMpISxcbiAgICBhY2NvdW50U3RhdGVtZW50czogKGFjY291bnRTdGF0ZW1lbnRzLmRhdGEgfCBhc3luYykhLFxuICAgIHNlbGVjdGVkQWNjb3VudDogKHNlbGVjdGVkQWNjb3VudCB8IGFzeW5jKSFcbiAgfVwiXG4+PC9uZy1jb250YWluZXI+XG5cbjxuZy10ZW1wbGF0ZVxuICBiYkFjY291bnRTdGF0ZW1lbnRMaXN0Q3VzdG9taXphYmxlXG4gIGxldC1ob3N0XG4gIGxldC1hY2NvdW50cz1cImNvbnRleHQuYWNjb3VudHNcIlxuICBsZXQtYWNjb3VudHNFcnJvcj1cImNvbnRleHQuYWNjb3VudHNFcnJvclwiXG4gIGxldC1jYXRlZ29yaWVzPVwiY29udGV4dC5jYXRlZ29yaWVzXCJcbiAgbGV0LXNlbGVjdGVkQWNjb3VudD1cImNvbnRleHQuc2VsZWN0ZWRBY2NvdW50XCJcbiAgbGV0LWFjY291bnRTdGF0ZW1lbnRzPVwiY29udGV4dC5hY2NvdW50U3RhdGVtZW50c1wiXG4+XG4gIDxkaXYgYXJpYS1saXZlPVwicG9saXRlXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImFjY291bnRzOyBlbHNlIGxvYWRpbmdTdGF0ZVwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFhY2NvdW50c0Vycm9yOyBlbHNlIGVycm9yU3RhdGVBY2NvdW50c1wiPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiYWNjb3VudHMubGVuZ3RoOyBlbHNlIGVtcHR5U3RhdGVBY2NvdW50c1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1ibG9jayBiYi1ibG9jay0teGxcIj5cbiAgICAgICAgICAgIDxiYi1hY2NvdW50LXN0YXRlbWVudC1hY2NvdW50LXNlbGVjdG9yXG4gICAgICAgICAgICAgIFthY2NvdW50c109XCJhY2NvdW50c1wiXG4gICAgICAgICAgICAgIChhY2NvdW50U2VsZWN0KT1cImhvc3Quc2VsZWN0QWNjb3VudCgkZXZlbnQpXCJcbiAgICAgICAgICAgID48L2JiLWFjY291bnQtc3RhdGVtZW50LWFjY291bnQtc2VsZWN0b3I+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAqbmdJZj1cIlxuICAgICAgICAgICAgICAgIGFjY291bnRTdGF0ZW1lbnRzICYmIGhvc3QuYWNjb3VudFN0YXRlbWVudHMuaXNMb2FkaW5nICE9PSBob3N0LmxvYWRpbmdTdGF0ZXMuTE9BRElORztcbiAgICAgICAgICAgICAgICBlbHNlIGxvYWRpbmdTdGF0ZVxuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWhvc3QuYWNjb3VudFN0YXRlbWVudHMuZXJyb3I7IGVsc2UgZXJyb3JTdGF0ZUFjY291bnRTdGF0ZW1lbnRzXCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgKm5nSWY9XCJcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFN0YXRlbWVudHMubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgICAgaG9zdC5hY2NvdW50U3RhdGVtZW50cy5hcmVGaWx0ZXJzQXBwbGllZCB8fFxuICAgICAgICAgICAgICAgICAgICAgIGhvc3QuYWNjb3VudFN0YXRlbWVudHMuaXNMb2FkaW5nID09PSBob3N0LmxvYWRpbmdTdGF0ZXMuTE9BRElOR19GSUxURVJFRDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbXB0eVN0YXRlQWNjb3VudFN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGJiLWFjY291bnQtc3RhdGVtZW50LWZpbHRlci1mb3JtXG4gICAgICAgICAgICAgICAgICAgIFtjYXRlZ29yaWVzXT1cImNhdGVnb3JpZXNcIlxuICAgICAgICAgICAgICAgICAgICBbZmlsdGVyc0FwcGxpZWRdPVwiaG9zdC5hY2NvdW50U3RhdGVtZW50cy5hcmVGaWx0ZXJzQXBwbGllZFwiXG4gICAgICAgICAgICAgICAgICAgIFtmaWx0ZXJQYXJhbXNdPVwiKGhvc3QuZmlsdGVyUGFyYW1zIHwgYXN5bmMpIVwiXG4gICAgICAgICAgICAgICAgICAgIChmaWx0ZXJzQ2hhbmdlKT1cImhvc3Quc2V0RmlsdGVyUGFyYW1zKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICBbc2hvd0NhdGVnb3J5XT1cImhvc3Quc2hvd0NhdGVnb3J5IHwgYXN5bmNcIlxuICAgICAgICAgICAgICAgICAgICBbbWluRGF0ZV09XCIoaG9zdC5taW5pbWFsRGF0ZSB8IGFzeW5jKSFcIlxuICAgICAgICAgICAgICAgICAgICBbbWF4RGF0ZV09XCJob3N0Lm1heGltdW1EYXRlXCJcbiAgICAgICAgICAgICAgICAgID48L2JiLWFjY291bnQtc3RhdGVtZW50LWZpbHRlci1mb3JtPlxuXG4gICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiaG9zdC5hY2NvdW50U3RhdGVtZW50cy5pc0xvYWRpbmcgIT09IGhvc3QubG9hZGluZ1N0YXRlcy5MT0FESU5HX0ZJTFRFUkVEOyBlbHNlIGxvYWRpbmdTdGF0ZVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJhY2NvdW50U3RhdGVtZW50cy5sZW5ndGg7IGVsc2UgZW1wdHlTdGF0ZUFjY291bnRTdGF0ZW1lbnRzRmlsdGVyZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8YmItYWNjb3VudC1zdGF0ZW1lbnQtdGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYmItYmxvY2sgY2FyZC1zZWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFthY2NvdW50U3RhdGVtZW50c109XCJhY2NvdW50U3RhdGVtZW50c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBbc2hvd0NhdGVnb3J5XT1cIihob3N0LnNob3dDYXRlZ29yeSB8IGFzeW5jKSFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW3Nob3dEZXNjcmlwdGlvbl09XCIoaG9zdC5zaG93RGVzY3JpcHRpb24gfCBhc3luYykhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzb3J0aW5nUGFyYW1zXT1cImhvc3Quc29ydGluZ1BhcmFtcyB8IGFzeW5jXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtub3RpZmljYXRpb25EaXNtaXNzVGltZVByb3BlcnR5XT1cIihob3N0Lm5vdGlmaWNhdGlvbkRpc21pc3NUaW1lUHJvcGVydHkgfCBhc3luYykhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsb2FkaW5nXT1cImhvc3QuYWNjb3VudFN0YXRlbWVudHMuaXNMb2FkaW5nID09PSBob3N0LmxvYWRpbmdTdGF0ZXMuTE9BRElOR19UQUJMRVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAoc29ydGluZ1BhcmFtc0NoYW5nZSk9XCJob3N0LnNldFNvcnRpbmdQYXJhbXMoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgICAgICAgPjwvYmItYWNjb3VudC1zdGF0ZW1lbnQtdGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgPCEtLVRlbXBvcmFyeSBhZGQgJGFueS4gUmVtb3ZlIGl0IG9uY2Ugd2UgcmVtb3ZlIHRoZSBleHRlbnNpb24gc2xvdHMtLT5cbiAgICAgICAgICAgICAgICAgICAgICA8YmItYWNjb3VudC1zdGF0ZW1lbnQtcGFnaW5hdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgW3BhZ2luYXRpb25UeXBlXT1cImhvc3Qud2lkZ2V0UHJvcGVydGllcy5wYWdpbmF0aW9uVHlwZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbbG9hZGluZ109XCJob3N0LmFjY291bnRTdGF0ZW1lbnRzLmlzTG9hZGluZyA9PT0gaG9zdC5sb2FkaW5nU3RhdGVzLkxPQURJTkdfTU9SRVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbaXRlbXNQZXJQYWdlXT1cImhvc3Qud2lkZ2V0UHJvcGVydGllcy5wYWdlU2l6ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbcGFnZV09XCIkYW55KGhvc3QubG9hZGluZ1BhcmFtcyB8IGFzeW5jKS5mcm9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtjb3VudF09XCJob3N0LmFjY291bnRTdGF0ZW1lbnRzPy50b3RhbENvdW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtoYXNNb3JlXT1cImFjY291bnRTdGF0ZW1lbnRzLmxlbmd0aCAhPT0gaG9zdC5hY2NvdW50U3RhdGVtZW50cz8udG90YWxDb3VudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAobG9hZE1vcmUpPVwiaG9zdC5zZXRQYWdlTnVtYmVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKHBhZ2VDaGFuZ2UpPVwiaG9zdC5zZXRQYWdlTnVtYmVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8L2JiLWFjY291bnQtc3RhdGVtZW50LXBhZ2luYXRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvZGl2PlxuXG4gIDxuZy10ZW1wbGF0ZSAjbG9hZGluZ1N0YXRlPlxuICAgIDxiYi1sb2FkaW5nLWluZGljYXRvci11aVxuICAgICAgbG9hZGVyU2l6ZT1cIm1kXCJcbiAgICAgIGkxOG4tdGV4dD1cIkxvYWRpbmcgZGF0YS4uLnxMb2FkaW5nIHRpdGxlQEBhY2NvdW50U3RhdGVtZW50LmxvYWRpbmcudGl0bGVcIlxuICAgICAgdGV4dD1cIkxvYWRpbmcgZGF0YS4uLlwiXG4gICAgPjwvYmItbG9hZGluZy1pbmRpY2F0b3ItdWk+XG4gIDwvbmctdGVtcGxhdGU+XG5cbiAgPG5nLXRlbXBsYXRlICNlbXB0eVN0YXRlQWNjb3VudHM+XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxiYi1lbXB0eS1zdGF0ZS11aVxuICAgICAgICBjbGFzcz1cImJiLXN0YXRlLWNvbnRhaW5lclwiXG4gICAgICAgIGljb25TaXplPVwieHhsXCJcbiAgICAgICAgaWNvbk1vZGlmaWVyPVwiY3VycmVudC1hY2NvdW50c1wiXG4gICAgICAgIGkxOG4tdGl0bGU9XCJObyBBY2NvdW50IHNlbGVjdGVkfEFjY291bnRzIHN0YXRlIHRpdGxlIHRoZW1lIHR3b0BAYWNjb3VudFN0YXRlbWVudC5hY2NvdW50cy5zdGF0ZS50aXRsZS50aGVtZS50d29cIlxuICAgICAgICB0aXRsZT1cIk5vIGFjY291bnQgc2VsZWN0ZWRcIlxuICAgICAgICBpMThuLXN1YnRpdGxlPVwiXG4gICAgICAgICAgWW91IG5lZWQgdG8gc2VsZWN0IGFjY291bnQgaW4gb3JkZXIgdG8gdmlldyBhY2NvdW50IHN0YXRlbWVudHN8QWNjb3VudHMgc3RhdGUgc3VidGl0bGUgdGhlbWVcbiAgICAgICAgICB0d29AQGFjY291bnRTdGF0ZW1lbnQuYWNjb3VudHMuc3RhdGUuc3VidGl0bGUudGhlbWUudHdvXCJcbiAgICAgICAgc3VidGl0bGU9XCJZb3UgbmVlZCB0byBzZWxlY3QgYWNjb3VudCBpbiBvcmRlciB0byB2aWV3IGFjY291bnQgc3RhdGVtZW50c1wiXG4gICAgICA+PC9iYi1lbXB0eS1zdGF0ZS11aT5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2Vycm9yU3RhdGVBY2NvdW50cz5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICAgIGNsYXNzPVwiYmItc3RhdGUtY29udGFpbmVyXCJcbiAgICAgICAgZGF0YS1yb2xlPVwiYWNjb3VudHMtZXJyb3Itc3RhdGVcIlxuICAgICAgICBpY29uU2l6ZT1cInh4bFwiXG4gICAgICAgIGljb25Nb2RpZmllcj1cImVycm9yXCJcbiAgICAgICAgc3VidGl0bGU9XCJUcnkgdG8gcmVsb2FkIHRoZSBwYWdlIG9yIGNvbnRhY3QgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yLlwiXG4gICAgICAgIGkxOG4tc3VidGl0bGU9XCJBY2NvdW50IGxpc3QgZXJyb3Igc3RhdGUgc3VidGl0bGVAQGFjY291bnRTdGF0ZW1lbnQuYWNjb3VudC1saXN0LmVycm9yLXN0YXRlLnN1YnRpdGxlXCJcbiAgICAgICAgdGl0bGU9XCJBY2NvdW50IGxpc3QgaXMgbm90IGxvYWRpbmdcIlxuICAgICAgICBpMThuLXRpdGxlPVwiQWNjb3VudCBsaXN0IGlzIG5vdCBsb2FkaW5nIGVycm9yIHN0YXRlIHRpdGxlQEBhY2NvdW50U3RhdGVtZW50LmFjY291bnQtbGlzdC5lcnJvci1zdGF0ZS50aXRsZVwiXG4gICAgICA+XG4gICAgICA8L2JiLWVtcHR5LXN0YXRlLXVpPlxuICAgIDwvZGl2PlxuICA8L25nLXRlbXBsYXRlPlxuXG4gIDxuZy10ZW1wbGF0ZSAjZW1wdHlTdGF0ZUFjY291bnRTdGF0ZW1lbnRzPlxuICAgIDxiYi1lbXB0eS1zdGF0ZS11aVxuICAgICAgY2xhc3M9XCJiYi1zdGF0ZS1jb250YWluZXJcIlxuICAgICAgaWNvblNpemU9XCJ4eGxcIlxuICAgICAgaWNvbk1vZGlmaWVyPVwiZGVzY3JpcHRpb25cIlxuICAgICAgaTE4bi10aXRsZT1cIlxuICAgICAgICBObyBBY2NvdW50IFN0YXRlbWVudHMgZm91bmR8QWNjb3VudCBzdGF0ZW1lbnRzIHN0YXRlIHRpdGxlIHRoZW1lXG4gICAgICAgIHR3b0BAYWNjb3VudFN0YXRlbWVudC5zdGF0ZW1lbnRzLnN0YXRlLnRpdGxlLnRoZW1lMlwiXG4gICAgICB0aXRsZT1cIk5vIEFjY291bnQgU3RhdGVtZW50cyBmb3Igc2VsZWN0ZWQgYWNjb3VudFwiXG4gICAgICBpMThuLXN1YnRpdGxlPVwiXG4gICAgICAgIFlvdSBkb24ndCBoYXZlIGFueSBhY2NvdW50IHN0YXRlbWVudHMgdG8gYmUgZGlzcGxheWVkIGZvciB0aGlzIGFjY291bnR8QWNjb3VudCBzdGF0ZW1lbnRzIHN0YXRlIHN1YnRpdGxlIHRoZW1lXG4gICAgICAgIHR3b0BAYWNjb3VudFN0YXRlbWVudC5zdGF0ZW1lbnRzLnN0YXRlLnN1YnRpdGxlLnRoZW1lMlwiXG4gICAgICBzdWJ0aXRsZT1cIllvdSBkb24ndCBoYXZlIGFueSBhY2NvdW50IHN0YXRlbWVudHMgdG8gYmUgZGlzcGxheWVkIGZvciB0aGlzIGFjY291bnRcIlxuICAgID48L2JiLWVtcHR5LXN0YXRlLXVpPlxuICA8L25nLXRlbXBsYXRlPlxuXG4gIDxuZy10ZW1wbGF0ZSAjZW1wdHlTdGF0ZUFjY291bnRTdGF0ZW1lbnRzRmlsdGVyZWQ+XG4gICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICBjbGFzcz1cImJiLXN0YXRlLWNvbnRhaW5lclwiXG4gICAgICBpY29uU2l6ZT1cInh4bFwiXG4gICAgICBpY29uTW9kaWZpZXI9XCJzZWFyY2hcIlxuICAgICAgaTE4bi10aXRsZT1cIlxuICAgICAgICBObyBSZXN1bHRzIEZvdW5kfEFjY291bnQgc3RhdGVtZW50cyBmaWx0ZXJlZCBzdGF0ZSB0aXRsZUBAYWNjb3VudFN0YXRlbWVudC5zdGF0ZW1lbnRzLmZpbHRlcmVkLnN0YXRlLnRpdGxlXCJcbiAgICAgIHRpdGxlPVwiTm8gUmVzdWx0cyBGb3VuZFwiXG4gICAgICBpMThuLXN1YnRpdGxlPVwiXG4gICAgICAgIFdlIGNhbuKAmXQgZmluZCB3aGF0IHlvdeKAmXJlIGxvb2tpbmcgZm9yLiBQbGVhc2UgdHJ5IGEgZGlmZmVyZW50IGNyaXRlcmlhLnxBY2NvdW50IHN0YXRlbWVudHMgZmlsdGVyZWQgc3RhdGVcbiAgICAgICAgc3VidGl0bGVAQGFjY291bnRTdGF0ZW1lbnQuc3RhdGVtZW50cy5maWx0ZXJlZC5zdGF0ZS5zdWJ0aXRsZVwiXG4gICAgICBzdWJ0aXRsZT1cIldlIGNhbuKAmXQgZmluZCB3aGF0IHlvdeKAmXJlIGxvb2tpbmcgZm9yLiBQbGVhc2UgdHJ5IGEgZGlmZmVyZW50IGNyaXRlcmlhLlwiXG4gICAgPjwvYmItZW1wdHktc3RhdGUtdWk+XG4gIDwvbmctdGVtcGxhdGU+XG5cbiAgPG5nLXRlbXBsYXRlICNlcnJvclN0YXRlQWNjb3VudFN0YXRlbWVudHM+XG4gICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICBjbGFzcz1cImJiLXN0YXRlLWNvbnRhaW5lclwiXG4gICAgICBkYXRhLXJvbGU9XCJhY2NvdW50LXN0YXRlbWVudHMtZXJyb3Itc3RhdGVcIlxuICAgICAgaWNvblNpemU9XCJ4eGxcIlxuICAgICAgaWNvbk1vZGlmaWVyPVwiZXJyb3JcIlxuICAgICAgc3VidGl0bGU9XCJUcnkgdG8gcmVsb2FkIHRoZSBwYWdlIG9yIGNvbnRhY3QgdGhlIHN5c3RlbSBhZG1pbmlzdHJhdG9yLlwiXG4gICAgICBpMThuLXN1YnRpdGxlPVwiQWNjb3VudCBzdGF0ZW1lbnRzIGxpc3QgZXJyb3Igc3RhdGUgc3VidGl0bGVAQGFjY291bnRTdGF0ZW1lbnQuc3RhdGVtZW50LWxpc3QuZXJyb3Itc3RhdGUuc3VidGl0bGVcIlxuICAgICAgdGl0bGU9XCJBY2NvdW50IHN0YXRlbWVudCBsaXN0IGlzIG5vdCBsb2FkaW5nXCJcbiAgICAgIGkxOG4tdGl0bGU9XCJcbiAgICAgICAgQWNjb3VudCBzdGF0ZW1lbnQgbGlzdCBpcyBub3QgbG9hZGluZyBlcnJvciBzdGF0ZSB0aXRsZUBAYWNjb3VudFN0YXRlbWVudC5zdGF0ZW1lbnQtbGlzdC5lcnJvci1zdGF0ZS50aXRsZVwiXG4gICAgPlxuICAgIDwvYmItZW1wdHktc3RhdGUtdWk+XG4gIDwvbmctdGVtcGxhdGU+XG48L25nLXRlbXBsYXRlPlxuIl19