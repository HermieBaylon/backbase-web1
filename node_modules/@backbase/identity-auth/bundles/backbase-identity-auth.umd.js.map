{"version":3,"file":"backbase-identity-auth.umd.js","sources":["../../../../libs/identity-auth/src/lib/activity-monitor/activity-monitor.model.ts","../../../../libs/identity-auth/src/lib/auth/auth.model.ts","../../../../libs/identity-auth/src/lib/activity-monitor/activity-monitor.service.ts","../../../../libs/identity-auth/src/lib/oidc-auth/oidc-auth.service.ts","../../../../libs/identity-auth/src/lib/auth/auth.service.ts","../../../../libs/identity-auth/src/lib/auth.module.ts","../../../../libs/identity-auth/src/backbase-identity-auth.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const ACTIVITY_MONITOR_CONFIG = new InjectionToken<Partial<ActivityMonitorConfig>>('activity-monitor-config');\n\nexport interface ActivityMonitorConfig {\n  /**\n   * Duration of user inactivity that ends the countdown.\n   * Default value is 180 seconds.\n   */\n  maxInactivityDuration: number;\n  /**\n   * Duration of countdown.\n   * Default value is 30 seconds.\n   */\n  countdownDuration: number;\n}\n\nexport type ActivityEvent = { type: 'start' | 'end' | 'reset' } | { type: 'tick'; remaining: number };\n","import { InjectionToken } from '@angular/core';\n\nexport const WINDOW = new InjectionToken('Window');\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { WINDOW } from '../auth/auth.model';\nimport { ActivityEvent, ActivityMonitorConfig, ACTIVITY_MONITOR_CONFIG } from './activity-monitor.model';\n\n/**\n * Service for monitoring user activity\n */\n@Injectable()\nexport class ActivityMonitorService {\n  private events$ = new Subject<ActivityEvent>();\n  private isActive = false;\n  private lastActiveEpoch = 0;\n  private config: ActivityMonitorConfig = {\n    maxInactivityDuration: 180,\n    countdownDuration: 30,\n  };\n  private listenerCallback = this.setLastActiveEpoch.bind(this);\n  private intervalId?: number;\n  private countdownActive = false;\n  private window: Window;\n\n  readonly events = this.events$.asObservable();\n\n  // https://angular.io/guide/aot-metadata-errors#could-not-resolve-type\n  constructor(\n    @Inject(WINDOW) _window: any,\n    @Optional() @Inject(ACTIVITY_MONITOR_CONFIG) _config?: Partial<ActivityMonitorConfig>,\n  ) {\n    this.window = _window as Window;\n    Object.assign(this.config, _config || {});\n  }\n\n  /**\n   * Starts activity monitoring.\n   */\n  start(_config: Partial<ActivityMonitorConfig> = {}) {\n    Object.assign(this.config, _config);\n    if (this.isActive) {\n      this.stop();\n    }\n    this.listen(true, { passive: true, capture: true });\n  }\n\n  // Stops activity monitoring.\n  stop() {\n    if (this.isActive) {\n      this.listen(false, true);\n    }\n  }\n\n  private getInactivityDuration(): number {\n    const now: number = Math.floor(Date.now() / 1000);\n    const last: number = Math.floor(this.lastActiveEpoch / 1000);\n    return Math.floor(now - last);\n  }\n\n  private setLastActiveEpoch() {\n    this.lastActiveEpoch = Date.now();\n  }\n\n  private listen(activate: boolean, options: AddEventListenerOptions | boolean) {\n    this.isActive = activate;\n    const func = activate ? this.window.document.addEventListener : this.window.document.removeEventListener;\n    this.setLastActiveEpoch();\n    func('mousemove', this.listenerCallback, options);\n    func('mousedown', this.listenerCallback, options);\n    func('keydown', this.listenerCallback, options);\n    func('mousewheel', this.listenerCallback, options);\n    func('touchmove', this.listenerCallback, options);\n    if (activate) {\n      this.intervalId = this.window.setInterval(this.onEverySecond.bind(this), 1000);\n    } else {\n      this.window.clearInterval(this.intervalId);\n      if (this.countdownActive) {\n        this.countdownActive = false;\n        this.events$.next({ type: 'reset' });\n      }\n    }\n  }\n\n  private onEverySecond() {\n    const ttl = this.config.maxInactivityDuration - this.getInactivityDuration();\n    if (ttl > -1 && ttl <= this.config.countdownDuration) {\n      if (!this.countdownActive) {\n        this.countdownActive = true;\n        this.events$.next({ type: 'start' });\n        this.events$.next({ type: 'tick', remaining: ttl });\n        return;\n      }\n      if (ttl > 0) {\n        this.events$.next({ type: 'tick', remaining: ttl });\n      } else {\n        this.countdownActive = false;\n        this.events$.next({ type: 'end' });\n        this.stop();\n      }\n    } else if (this.countdownActive) {\n      this.countdownActive = false;\n      this.events$.next({ type: 'reset' });\n    }\n  }\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport { AuthConfig, OAuthEvent, OAuthService, OAuthStorage, OAuthSuccessEvent } from 'angular-oauth2-oidc';\nimport { from, Observable, ReplaySubject } from 'rxjs';\nimport { filter, map, mapTo, take } from 'rxjs/operators';\nimport { WINDOW } from '../auth/auth.model';\nimport { AccessToken } from './oidc-auth.model';\n\n/** @internal */\n@Injectable()\nexport class ɵɵOidcAuthService {\n  private readonly window: Window;\n  private readonly authenticated$$ = new ReplaySubject<void>();\n\n  readonly storage = this.oAuthStorage;\n  readonly authConfig = this.oAuthConfig;\n  readonly events$ = this.oAuthService?.events;\n  readonly isAuthenticated$: Observable<boolean> = this.authenticated$$.pipe(\n    map(() => this.oAuthService.hasValidAccessToken()),\n  );\n  readonly accessToken$: Observable<AccessToken | undefined> = this.isAuthenticated$.pipe(\n    filter((loaded) => loaded),\n    map(() => {\n      const raw = this.oAuthService.getAccessToken();\n      return {\n        raw,\n        parsed: this.parseJwt(raw),\n      };\n    }),\n  );\n\n  // https://angular.io/guide/aot-metadata-errors#could-not-resolve-type\n  constructor(\n    @Optional() private readonly oAuthService: OAuthService,\n    @Inject(OAuthStorage) private readonly oAuthStorage: OAuthStorage,\n    @Inject(AuthConfig) private readonly oAuthConfig: AuthConfig,\n    @Inject(WINDOW) private readonly _window: any,\n  ) {\n    if (!oAuthService) {\n      throw new Error(\n        `In order to use ɵɵOidcAuthService, please include OAuthModule.forRoot() to your application module`,\n      );\n    }\n    this.window = this._window as Window;\n    this.oAuthService.events.subscribe((event: OAuthEvent) => {\n      switch (event.type) {\n        case 'discovery_document_loaded':\n        case 'token_received':\n        case 'logout':\n          this.authenticated$$.next();\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  logout(redirectUri?: string): Promise<void> {\n    if (redirectUri) {\n      this.oAuthService.postLogoutRedirectUri = redirectUri;\n    }\n    this.oAuthService.logOut();\n\n    return this.oAuthService.events\n      .pipe(\n        filter((event) => event.type === 'logout'),\n        mapTo(undefined),\n        take(1),\n      )\n      .toPromise();\n  }\n\n  timeToLive(): number {\n    const expiration = this.oAuthService.getAccessTokenExpiration();\n\n    if (expiration) {\n      return expiration - Math.ceil(new Date().getTime() / 1000) + (this.oAuthService.clockSkewInSec || 0);\n    }\n\n    return -1;\n  }\n\n  refresh(): Promise<void> {\n    this.oAuthService.refreshToken();\n\n    return this.oAuthService.events\n      .pipe(\n        filter((event) => event.type === 'token_refreshed'),\n        mapTo(undefined),\n        take(1),\n      )\n      .toPromise();\n  }\n\n  loadDiscoveryDocument(): Promise<OAuthSuccessEvent> {\n    return this.oAuthService.loadDiscoveryDocument();\n  }\n\n  authorizationHeader(): string {\n    return this.oAuthService.authorizationHeader();\n  }\n\n  createReauthLoginUrl(scope: string, acr_values: string): Observable<string> {\n    return from(\n      (this.oAuthService as any).createLoginUrl(\n        '', // state\n        '', // login hint\n        location.href, // custom redirect uri\n        false, // no prompt\n        {\n          acr_values,\n          response_mode: 'fragment',\n        }, // params\n      ) as string,\n    ).pipe(\n      map((preUrl) => {\n        const urlParsed = new URL(preUrl);\n        urlParsed.searchParams.set('scope', `${urlParsed.searchParams.get('scope')} ${scope}`);\n        return urlParsed.href;\n      }),\n    );\n  }\n\n  private parseJwt(token: string): any {\n    try {\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      return JSON.parse(this.window.atob(base64));\n    } catch (e) {\n      return undefined;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ɵɵOidcAuthService } from '../oidc-auth/oidc-auth.service';\n\n@Injectable()\nexport class AuthService {\n  readonly isAuthenticated$: Observable<boolean> = this.oidcAuthService.isAuthenticated$;\n\n  constructor(private readonly oidcAuthService: ɵɵOidcAuthService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ActivityMonitorService } from './activity-monitor';\nimport { AuthService, WINDOW } from './auth';\nimport { ɵɵOidcAuthService } from './oidc-auth';\n\nexport function _window() {\n  return window;\n}\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    {\n      provide: WINDOW,\n      useValue: _window,\n    },\n    AuthService,\n    ɵɵOidcAuthService,\n    ActivityMonitorService,\n  ],\n})\nexport class IdentityAuthModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["InjectionToken","Subject","Injectable","Inject","Optional","ReplaySubject","map","filter","mapTo","take","from","OAuthStorage","AuthConfig","CommonModule","NgModule"],"mappings":"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"}