import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpParameterCodec } from '../encoder';
import { ACCOUNT_STATEMENT_BASE_PATH } from '../variables';
import { AccountStatementConfiguration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
export class AccountStatementHttpService {
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = '';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new AccountStatementConfiguration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                value.forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, value.toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    downloadAccountStatements(requestParameters, observe = 'body', reportProgress = false, options) {
        const _uid = requestParameters["uid"];
        if (_uid === null || _uid === undefined) {
            throw new Error('Required parameter uid was null or undefined when calling downloadAccountStatements.');
        }
        const _inline = requestParameters["inline"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_inline !== undefined && _inline !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _inline, 'inline');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'binary/octet-stream',
                'application/pdf',
                'text/plain',
                'text/csv',
                'application/rtf',
                'application/msword',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                'application/vnd.ms-excel',
                'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                'application/xml',
                'image/png',
                'image/jpeg',
                'image/gif',
                'image/tiff',
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/account/statements/download/${encodeURIComponent(String(_uid))}`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    downloadAccountStatementsUrl(requestParameters) {
        const _uid = requestParameters["uid"];
        if (_uid === null || _uid === undefined) {
            throw new Error('Required parameter uid was null or undefined when calling downloadAccountStatements.');
        }
        const _inline = requestParameters["inline"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_inline !== undefined && _inline !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _inline, 'inline');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/account/statements/download/${encodeURIComponent(String(_uid))}${queryString ? `?${queryString}` : ''}`;
    }
    getAccountStatements(requestParameters, observe = 'body', reportProgress = false, options) {
        const _accountId = requestParameters["accountId"];
        const _dateFrom = requestParameters["dateFrom"];
        const _dateTo = requestParameters["dateTo"];
        const _category = requestParameters["category"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_accountId !== undefined && _accountId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _accountId, 'accountId');
        }
        if (_dateFrom !== undefined && _dateFrom !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dateFrom, 'dateFrom');
        }
        if (_dateTo !== undefined && _dateTo !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dateTo, 'dateTo');
        }
        if (_category) {
            _category.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'category');
            });
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_orderBy !== undefined && _orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _orderBy, 'orderBy');
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/account/statements`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getAccountStatementsUrl(requestParameters) {
        const _accountId = requestParameters["accountId"];
        const _dateFrom = requestParameters["dateFrom"];
        const _dateTo = requestParameters["dateTo"];
        const _category = requestParameters["category"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        const _orderBy = requestParameters["orderBy"];
        const _direction = requestParameters["direction"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_accountId !== undefined && _accountId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _accountId, 'accountId');
        }
        if (_dateFrom !== undefined && _dateFrom !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dateFrom, 'dateFrom');
        }
        if (_dateTo !== undefined && _dateTo !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dateTo, 'dateTo');
        }
        if (_category) {
            _category.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'category');
            });
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_orderBy !== undefined && _orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _orderBy, 'orderBy');
        }
        if (_direction !== undefined && _direction !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _direction, 'direction');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/account/statements${queryString ? `?${queryString}` : ''}`;
    }
    getCategories(observe = 'body', reportProgress = false, options) {
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/account/statements/categories`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getCategoriesUrl() {
        return `${this.configuration.basePath}/client-api/v2/account/statements/categories`;
    }
    postAccountStatements(requestParameters, observe = 'body', reportProgress = false, options) {
        const _accountStatementsPostRequest = requestParameters["accountStatementsPostRequest"];
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/account/statements`, _accountStatementsPostRequest, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postAccountStatementsUrl(requestParameters) {
        const _accountStatementsPostRequest = requestParameters["accountStatementsPostRequest"];
        return `${this.configuration.basePath}/client-api/v2/account/statements`;
    }
}
AccountStatementHttpService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementHttpService, deps: [{ token: i1.HttpClient }, { token: ACCOUNT_STATEMENT_BASE_PATH, optional: true }, { token: i2.AccountStatementConfiguration, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
AccountStatementHttpService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementHttpService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: AccountStatementHttpService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [ACCOUNT_STATEMENT_BASE_PATH]
                }] }, { type: i2.AccountStatementConfiguration, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudFN0YXRlbWVudC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYXBpL2FjY291bnRTdGF0ZW1lbnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFjQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBMkIsZUFBZSxDQUFDO0FBQ2xGLE9BQU8sRUFBYyxXQUFXLEVBQUUsVUFBVSxFQUNVLE1BQVksc0JBQXNCLENBQUM7QUFDekYsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQStCLFlBQVksQ0FBQztBQVkvRSxPQUFPLEVBQUUsMkJBQTJCLEVBQXNCLE1BQTBCLGNBQWMsQ0FBQztBQUNuRyxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBMEMsa0JBQWtCLENBQUM7Ozs7QUF3Q3JHLE1BQU0sT0FBTywyQkFBMkI7SUFPcEMsWUFBc0IsVUFBc0IsRUFBbUQsUUFBZ0IsRUFBYyxhQUE0QztRQUFuSixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBTGxDLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDakIsbUJBQWMsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO1FBQ25DLGtCQUFhLEdBQUcsSUFBSSw2QkFBNkIsRUFBRSxDQUFDO1FBSXZELElBQUksYUFBYSxFQUFFO1lBQ2YsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7U0FDdEM7UUFDRCxJQUFJLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEtBQUssUUFBUSxFQUFFO1lBQ2pELElBQUksT0FBTyxRQUFRLEtBQUssUUFBUSxFQUFFO2dCQUM5QixRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQzthQUM1QjtZQUNELElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztTQUMxQztRQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLElBQUksSUFBSSx3QkFB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QUksTUFBTTsyQkFBQywyQkFBMkI7OzBCQUFxQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBY2NvdW50IFN0YXRlbWVudCBDbGllbnRcbiAqIFJldHJpZXZlcyBhIHBhZ2luYXRlZCBsaXN0IG9mIGF2YWlsYWJsZSBhY2NvdW50IHN0YXRlbWVudHMsIGNhdGVnb3JpZXMsIHNvcnRpbmcsIGZpbHRlcmluZyAmIGRvd25sb2FkaW5nIHRoZSBzdGF0ZW1lbnQgYmFzZWQgb24gSUQuIFxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAyLjAuNVxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9naXRodWIuY29tL0JhY2tiYXNlL2JhY2tiYXNlLW9wZW5hcGktdG9vbHMpLlxuICogaHR0cHM6Ly9naXRodWIuY29tL0JhY2tiYXNlL2JhY2tiYXNlLW9wZW5hcGktdG9vbHNcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cbmltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSAgICAgICAgICAgICAgICAgICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBIZWFkZXJzLCBIdHRwUGFyYW1zLFxuICAgICAgICAgSHR0cFJlc3BvbnNlLCBIdHRwRXZlbnQsIEh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyB9ICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9lbmNvZGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgQWNjb3VudFN0YXRlbWVudCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBBY2NvdW50U3RhdGVtZW50c0NhdGVnb3JpZXNSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBBY2NvdW50U3RhdGVtZW50c1Bvc3RSZXF1ZXN0IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbnRlcm5hbFNlcnZlckVycm9yIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IE5vdEZvdW5kRXJyb3IgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgVW5hdXRob3JpemVkRXJyb3IgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuXG5pbXBvcnQgeyBBQ0NPVU5UX1NUQVRFTUVOVF9CQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IEFjY291bnRTdGF0ZW1lbnRDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFVJRCBvZiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIHRvIGJlIGRvd25sb2FkZWQgKi9cbiAgICBbXCJ1aWRcIl06IHN0cmluZztcbiAgICAvKiogQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIgd2lsbCBpbmNsdWRlIFxcJnF1b3Q7YXR0YWNobWVudFxcJnF1b3Q7IHdoZW4gdGhpcyBwYXJhbWV0ZXIgaXMgZmFsc2UuIEVsc2UgXFwmcXVvdDtpbmxpbmVcXCZxdW90Oy4gKi9cbiAgICBbXCJpbmxpbmVcIl0/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIElkIG9mIGFuIGFjY291bnQgKi9cbiAgICBbXCJhY2NvdW50SWRcIl0/OiBzdHJpbmc7XG4gICAgLyoqIERhdGUgZnJvbSB3aGljaCB0aGUgc3RhdGVtZW50cyBzaG91bGQgYmUgcmV0cmlldmVkICovXG4gICAgW1wiZGF0ZUZyb21cIl0/OiBzdHJpbmc7XG4gICAgLyoqIERhdGUgdG8gd2hpY2ggdGhlIHN0YXRlbWVudHMgc2hvdWxkIGJlIHJldHJpZXZlZCAqL1xuICAgIFtcImRhdGVUb1wiXT86IHN0cmluZztcbiAgICAvKiogQ2F0ZWdvcmllcyB0byBmaWx0ZXIgb24gKi9cbiAgICBbXCJjYXRlZ29yeVwiXT86IEFycmF5PHN0cmluZz47XG4gICAgLyoqIFNraXAgb3ZlciBhIHBhZ2Ugb2YgZWxlbWVudHMgYnkgc3BlY2lmeWluZyBhIHN0YXJ0IHZhbHVlIGZvciB0aGUgcXVlcnkgKi9cbiAgICBbXCJmcm9tXCJdPzogbnVtYmVyO1xuICAgIC8qKiBBcyBhbiBhbHRlcm5hdGl2ZSBmb3Igc3BlY2lmeWluZyBcXCYjMzk7ZnJvbVxcJiMzOTsgdGhpcyBhbGxvd3MgdG8gcG9pbnQgdG8gdGhlIHJlY29yZCB0byBzdGFydCB0aGUgc2VsZWN0aW9uIGZyb20uICAqL1xuICAgIFtcImN1cnNvclwiXT86IHN0cmluZztcbiAgICAvKiogTGltaXQgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvbiB0aGUgcmVzcG9uc2UuIFdoZW4gdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIGN1cnNvciwgdGhlIHZhbHVlIGlzIGFsbG93ZWQgdG8gYmUgYSBuZWdhdGl2ZSBudW1iZXIgdG8gaW5kaWNhdGUgcmVxdWVzdGluZyByZWNvcmRzIHVwd2FyZHMgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQgaW5kaWNhdGVkIGJ5IHRoZSBjdXJzb3IuICAqL1xuICAgIFtcInNpemVcIl0/OiBudW1iZXI7XG4gICAgLyoqIE9yZGVyIGJ5IGZpZWxkICovXG4gICAgW1wib3JkZXJCeVwiXT86IHN0cmluZztcbiAgICAvKiogRGlyZWN0aW9uICovXG4gICAgW1wiZGlyZWN0aW9uXCJdPzogJ0FTQycgfCAnREVTQyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFJlcXVlc3QgYm9keSB0aGF0IGNvbnRhaW5zIHF1ZXJ5IHBhcmFtZXRlcnMgKi9cbiAgICBbXCJhY2NvdW50U3RhdGVtZW50c1Bvc3RSZXF1ZXN0XCJdPzogQWNjb3VudFN0YXRlbWVudHNQb3N0UmVxdWVzdDtcbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBBY2NvdW50U3RhdGVtZW50SHR0cFNlcnZpY2Uge1xuXG4gICAgcHJvdGVjdGVkIGJhc2VQYXRoID0gJyc7XG4gICAgcHVibGljIGRlZmF1bHRIZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCk7XG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgQWNjb3VudFN0YXRlbWVudENvbmZpZ3VyYXRpb24oKTtcbiAgICBwdWJsaWMgZW5jb2RlcjogSHR0cFBhcmFtZXRlckNvZGVjO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQsIEBPcHRpb25hbCgpIEBJbmplY3QoQUNDT1VOVF9TVEFURU1FTlRfQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uOiBBY2NvdW50U3RhdGVtZW50Q29uZmlndXJhdGlvbikge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPSB0aGlzLmJhc2VQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmNvZGVyID0gdGhpcy5jb25maWd1cmF0aW9uLmVuY29kZXIgfHwgbmV3IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYygpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBhZGRUb0h0dHBQYXJhbXMoaHR0cFBhcmFtczogSHR0cFBhcmFtcywgdmFsdWU6IGFueSwga2V5Pzogc3RyaW5nKTogSHR0cFBhcmFtcyB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBEYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zOiBIdHRwUGFyYW1zLCB2YWx1ZT86IGFueSwga2V5Pzogc3RyaW5nKTogSHR0cFBhcmFtcyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICh2YWx1ZSBhcyBhbnlbXSkuZm9yRWFjaCggZWxlbSA9PiBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgZWxlbSwga2V5KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZhbHVlIGFzIERhdGUpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcImtleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgRGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKCBrID0+IGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICAgICAgICAgICAgICAgICAgaHR0cFBhcmFtcywgdmFsdWVba10sIGtleSAhPSBudWxsID8gYCR7a2V5fS4ke2t9YCA6IGspKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IGh0dHBQYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIG5vdCBvYmplY3Qgb3IgYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2JpbmFyeS9vY3RldC1zdHJlYW0nfSk6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2JpbmFyeS9vY3RldC1zdHJlYW0nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2JpbmFyeS9vY3RldC1zdHJlYW0nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9wZGYnfSk6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL3BkZid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vcGRmJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAndGV4dC9wbGFpbid9KTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAndGV4dC9wbGFpbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAndGV4dC9wbGFpbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ3RleHQvY3N2J30pOiBPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICd0ZXh0L2Nzdid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAndGV4dC9jc3YnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9ydGYnfSk6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL3J0Zid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vcnRmJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vbXN3b3JkJ30pOiBPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9tc3dvcmQnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL21zd29yZCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50J30pOiBPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnfSk6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnfSk6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0J30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdpbWFnZS9wbmcnfSk6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2ltYWdlL3BuZyd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnaW1hZ2UvcG5nJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnaW1hZ2UvanBlZyd9KTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnaW1hZ2UvanBlZyd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnaW1hZ2UvanBlZyd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2ltYWdlL2dpZid9KTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnaW1hZ2UvZ2lmJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdpbWFnZS9naWYnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PHN0cmluZz4+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdpbWFnZS90aWZmJ30pOiBPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdpbWFnZS90aWZmJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdpbWFnZS90aWZmJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxzdHJpbmc+PjtcbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhY2NvdW50LXN0YXRlbWVudC5cbiAgICAgKiBEb3dubG9hZHMgYW4gYWNjb3VudCBzdGF0ZW1lbnQgZmlsZSBmb3IgdGhlIGdpdmVuIGZpbGUgVUlELiBTdXBwb3J0ZWQgc3RhdGVtZW50IHR5cGVzOiAgICogYmluYXJ5L29jdGV0LXN0cmVhbSAgICogYXBwbGljYXRpb24vcGRmICAgKiB0ZXh0L3BsYWluICAgKiB0ZXh0L2NzdiAgICogYXBwbGljYXRpb24vcnRmICAgKiBhcHBsaWNhdGlvbi9tc3dvcmQgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50ICAgKiBhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwgICAqIGFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0ICAgKiBhcHBsaWNhdGlvbi94bWwgICAqIGltYWdlL3BuZyAgICogaW1hZ2UvanBlZyAgICogaW1hZ2UvZ2lmICAgKiBpbWFnZS90aWZmIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBEb3dubG9hZEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGFjY291bnQtc3RhdGVtZW50LlxuICAgICAqIERvd25sb2FkcyBhbiBhY2NvdW50IHN0YXRlbWVudCBmaWxlIGZvciB0aGUgZ2l2ZW4gZmlsZSBVSUQuIFN1cHBvcnRlZCBzdGF0ZW1lbnQgdHlwZXM6ICAgKiBiaW5hcnkvb2N0ZXQtc3RyZWFtICAgKiBhcHBsaWNhdGlvbi9wZGYgICAqIHRleHQvcGxhaW4gICAqIHRleHQvY3N2ICAgKiBhcHBsaWNhdGlvbi9ydGYgICAqIGFwcGxpY2F0aW9uL21zd29yZCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQgICAqIGFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCAgICogYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgICAqIGFwcGxpY2F0aW9uL3htbCAgICogaW1hZ2UvcG5nICAgKiBpbWFnZS9qcGVnICAgKiBpbWFnZS9naWYgICAqIGltYWdlL3RpZmYgXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8c3RyaW5nPj47XG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYWNjb3VudC1zdGF0ZW1lbnQuXG4gICAgICogRG93bmxvYWRzIGFuIGFjY291bnQgc3RhdGVtZW50IGZpbGUgZm9yIHRoZSBnaXZlbiBmaWxlIFVJRC4gU3VwcG9ydGVkIHN0YXRlbWVudCB0eXBlczogICAqIGJpbmFyeS9vY3RldC1zdHJlYW0gICAqIGFwcGxpY2F0aW9uL3BkZiAgICogdGV4dC9wbGFpbiAgICogdGV4dC9jc3YgICAqIGFwcGxpY2F0aW9uL3J0ZiAgICogYXBwbGljYXRpb24vbXN3b3JkICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCAgICogYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsICAgKiBhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCAgICogYXBwbGljYXRpb24veG1sICAgKiBpbWFnZS9wbmcgICAqIGltYWdlL2pwZWcgICAqIGltYWdlL2dpZiAgICogaW1hZ2UvdGlmZiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG93bmxvYWRBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogRG93bmxvYWRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2JpbmFyeS9vY3RldC1zdHJlYW0nIHwgJ2FwcGxpY2F0aW9uL3BkZicgfCAndGV4dC9wbGFpbicgfCAndGV4dC9jc3YnIHwgJ2FwcGxpY2F0aW9uL3J0ZicgfCAnYXBwbGljYXRpb24vbXN3b3JkJyB8ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCcgfCAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJyB8ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcgfCAnYXBwbGljYXRpb24veG1sJyB8ICdpbWFnZS9wbmcnIHwgJ2ltYWdlL2pwZWcnIHwgJ2ltYWdlL2dpZicgfCAnaW1hZ2UvdGlmZicgfCAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX3VpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widWlkXCJdO1xuICAgICAgICBpZiAoX3VpZCA9PT0gbnVsbCB8fCBfdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2lubGluZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW5saW5lXCJdO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfaW5saW5lICE9PSB1bmRlZmluZWQgJiYgX2lubGluZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2lubGluZSwgJ2lubGluZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdiaW5hcnkvb2N0ZXQtc3RyZWFtJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICAgICAgICAgICAndGV4dC9wbGFpbicsXG4gICAgICAgICAgICAgICAgJ3RleHQvY3N2JyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vcnRmJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vbXN3b3JkJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCcsXG4gICAgICAgICAgICAgICAgJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICAgICAgJ2ltYWdlL2pwZWcnLFxuICAgICAgICAgICAgICAgICdpbWFnZS9naWYnLFxuICAgICAgICAgICAgICAgICdpbWFnZS90aWZmJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8c3RyaW5nPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjb3VudC9zdGF0ZW1lbnRzL2Rvd25sb2FkLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IERvd25sb2FkQWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX3VpZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1widWlkXCJdO1xuICAgICAgICBpZiAoX3VpZCA9PT0gbnVsbCB8fCBfdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHVpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRvd25sb2FkQWNjb3VudFN0YXRlbWVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2lubGluZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW5saW5lXCJdO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2lubGluZSAhPT0gdW5kZWZpbmVkICYmIF9pbmxpbmUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9pbmxpbmUsICdpbmxpbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1ldGVycy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY291bnQvc3RhdGVtZW50cy9kb3dubG9hZC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX3VpZCkpfSR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHMuXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBcnJheTxBY2NvdW50U3RhdGVtZW50Pj47XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHMuXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEFycmF5PEFjY291bnRTdGF0ZW1lbnQ+Pj47XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHMuXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBcnJheTxBY2NvdW50U3RhdGVtZW50Pj4+O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBzdGF0ZW1lbnRzLlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBzdGF0ZW1lbnRzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIGdldEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9hY2NvdW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImFjY291bnRJZFwiXTtcbiAgICAgICAgY29uc3QgX2RhdGVGcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkYXRlRnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2RhdGVUbyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZGF0ZVRvXCJdO1xuICAgICAgICBjb25zdCBfY2F0ZWdvcnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImNhdGVnb3J5XCJdO1xuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcbiAgICAgICAgY29uc3QgX29yZGVyQnkgPSByZXF1ZXN0UGFyYW1ldGVyc1tcIm9yZGVyQnlcIl07XG4gICAgICAgIGNvbnN0IF9kaXJlY3Rpb24gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImRpcmVjdGlvblwiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2FjY291bnRJZCAhPT0gdW5kZWZpbmVkICYmIF9hY2NvdW50SWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9hY2NvdW50SWQsICdhY2NvdW50SWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2RhdGVGcm9tICE9PSB1bmRlZmluZWQgJiYgX2RhdGVGcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGF0ZUZyb20sICdkYXRlRnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZGF0ZVRvICE9PSB1bmRlZmluZWQgJiYgX2RhdGVUbyAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2RhdGVUbywgJ2RhdGVUbycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIF9jYXRlZ29yeS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnY2F0ZWdvcnknKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX29yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBfb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X29yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBfZGlyZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGlyZWN0aW9uLCAnZGlyZWN0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFycmF5PEFjY291bnRTdGF0ZW1lbnQ+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjb3VudC9zdGF0ZW1lbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFjY291bnRTdGF0ZW1lbnRzVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfYWNjb3VudElkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhY2NvdW50SWRcIl07XG4gICAgICAgIGNvbnN0IF9kYXRlRnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZGF0ZUZyb21cIl07XG4gICAgICAgIGNvbnN0IF9kYXRlVG8gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImRhdGVUb1wiXTtcbiAgICAgICAgY29uc3QgX2NhdGVnb3J5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjYXRlZ29yeVwiXTtcbiAgICAgICAgY29uc3QgX2Zyb20gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImZyb21cIl07XG4gICAgICAgIGNvbnN0IF9jdXJzb3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImN1cnNvclwiXTtcbiAgICAgICAgY29uc3QgX3NpemUgPSByZXF1ZXN0UGFyYW1ldGVyc1tcInNpemVcIl07XG4gICAgICAgIGNvbnN0IF9vcmRlckJ5ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJvcmRlckJ5XCJdO1xuICAgICAgICBjb25zdCBfZGlyZWN0aW9uID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJkaXJlY3Rpb25cIl07XG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfYWNjb3VudElkICE9PSB1bmRlZmluZWQgJiYgX2FjY291bnRJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2FjY291bnRJZCwgJ2FjY291bnRJZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZGF0ZUZyb20gIT09IHVuZGVmaW5lZCAmJiBfZGF0ZUZyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9kYXRlRnJvbSwgJ2RhdGVGcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9kYXRlVG8gIT09IHVuZGVmaW5lZCAmJiBfZGF0ZVRvICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZGF0ZVRvLCAnZGF0ZVRvJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jYXRlZ29yeSkge1xuICAgICAgICAgICAgX2NhdGVnb3J5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdjYXRlZ29yeScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIF9vcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fb3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2RpcmVjdGlvbiAhPT0gdW5kZWZpbmVkICYmIF9kaXJlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9kaXJlY3Rpb24sICdkaXJlY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1ldGVycy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY291bnQvc3RhdGVtZW50cyR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IGNhdGVnb3JpZXMuXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IGNhdGVnb3JpZXNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q2F0ZWdvcmllcyhvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEFjY291bnRTdGF0ZW1lbnRzQ2F0ZWdvcmllc1Jlc3BvbnNlPjtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgXFwmIzM5O2F2YWlsYWJsZVxcJiMzOTsgY2F0ZWdvcmllcy5cbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgXFwmIzM5O2F2YWlsYWJsZVxcJiMzOTsgY2F0ZWdvcmllc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDYXRlZ29yaWVzKG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBY2NvdW50U3RhdGVtZW50c0NhdGVnb3JpZXNSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBjYXRlZ29yaWVzLlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBjYXRlZ29yaWVzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENhdGVnb3JpZXMob2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBY2NvdW50U3RhdGVtZW50c0NhdGVnb3JpZXNSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBjYXRlZ29yaWVzLlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBjYXRlZ29yaWVzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENhdGVnb3JpZXMob2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEFjY291bnRTdGF0ZW1lbnRzQ2F0ZWdvcmllc1Jlc3BvbnNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjb3VudC9zdGF0ZW1lbnRzL2NhdGVnb3JpZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2F0ZWdvcmllc1VybCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2FjY291bnQvc3RhdGVtZW50cy9jYXRlZ29yaWVzYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgXFwmIzM5O2F2YWlsYWJsZVxcJiMzOTsgc3RhdGVtZW50cyBmb3IgbXVsdGlwbGUgYWNjb3VudHMuXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHMgZm9yIG11bHRpcGxlIGFjY291bnRzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RBY2NvdW50U3RhdGVtZW50cyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEFjY291bnRTdGF0ZW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxBcnJheTxBY2NvdW50U3RhdGVtZW50Pj47XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHMgZm9yIG11bHRpcGxlIGFjY291bnRzLlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBzdGF0ZW1lbnRzIGZvciBtdWx0aXBsZSBhY2NvdW50c1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBcnJheTxBY2NvdW50U3RhdGVtZW50Pj4+O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBzdGF0ZW1lbnRzIGZvciBtdWx0aXBsZSBhY2NvdW50cy5cbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgXFwmIzM5O2F2YWlsYWJsZVxcJiMzOTsgc3RhdGVtZW50cyBmb3IgbXVsdGlwbGUgYWNjb3VudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEFjY291bnRTdGF0ZW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0QWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEFycmF5PEFjY291bnRTdGF0ZW1lbnQ+Pj47XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIFxcJiMzOTthdmFpbGFibGVcXCYjMzk7IHN0YXRlbWVudHMgZm9yIG11bHRpcGxlIGFjY291bnRzLlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBcXCYjMzk7YXZhaWxhYmxlXFwmIzM5OyBzdGF0ZW1lbnRzIGZvciBtdWx0aXBsZSBhY2NvdW50c1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QWNjb3VudFN0YXRlbWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RBY2NvdW50U3RhdGVtZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9hY2NvdW50U3RhdGVtZW50c1Bvc3RSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhY2NvdW50U3RhdGVtZW50c1Bvc3RSZXF1ZXN0XCJdO1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEFycmF5PEFjY291bnRTdGF0ZW1lbnQ+PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjb3VudC9zdGF0ZW1lbnRzYCxcbiAgICAgICAgICAgIF9hY2NvdW50U3RhdGVtZW50c1Bvc3RSZXF1ZXN0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdEFjY291bnRTdGF0ZW1lbnRzVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0QWNjb3VudFN0YXRlbWVudHNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2FjY291bnRTdGF0ZW1lbnRzUG9zdFJlcXVlc3QgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImFjY291bnRTdGF0ZW1lbnRzUG9zdFJlcXVlc3RcIl07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYWNjb3VudC9zdGF0ZW1lbnRzYDtcbiAgICB9XG5cbn1cbiJdfQ==