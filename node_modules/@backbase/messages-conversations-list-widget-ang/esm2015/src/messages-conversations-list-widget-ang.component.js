import { Component, Directive, Input, ViewChild } from '@angular/core';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { catchError, filter, first, map, observeOn, pairwise, scan, switchMap, takeUntil, tap, withLatestFrom, } from 'rxjs/operators';
import { asyncScheduler, BehaviorSubject, combineLatest, merge, of, Subject } from 'rxjs';
import { MailboxTypeEnum, ReadUnreadStatusType, } from './model';
import { BaseConversationsListPropertiesService, BaseConversationsListWidgetComponent, getPropertyValue, shareReplayOnce, } from '@backbase/messages-common';
import * as i0 from "@angular/core";
import * as i1 from "./messages-conversations-list-widget-ang.service";
import * as i2 from "@backbase/messages-common";
import * as i3 from "@angular/router";
import * as i4 from "./components/conversations-list-table/conversations-list-table.component";
import * as i5 from "@backbase/ui-ang/load-button";
import * as i6 from "@backbase/ui-ang/empty-state";
import * as i7 from "@backbase/ui-ang/loading-indicator";
import * as i8 from "@angular/common";
const FirstPage = {
    from: 0,
};
export class MessagesConversationsListWidgetComponent extends BaseConversationsListWidgetComponent {
    constructor(messagesService, properties, shared, activatedRoute, element) {
        var _a;
        super(shared, activatedRoute, properties);
        this.messagesService = messagesService;
        this.properties = properties;
        this.shared = shared;
        this.activatedRoute = activatedRoute;
        this.element = element;
        this.hostRef = this;
        /**
         * The loading parameter indicating the starting page for the data to be loaded from.
         */
        this.from = new BehaviorSubject(FirstPage);
        /**
         * The loading flag.
         */
        this.isLoading = false;
        this.itemsPerPage$$ = new BehaviorSubject(undefined);
        this.mailboxType$$ = new BehaviorSubject(undefined);
        this.createMessageClosedEventName$$ = new BehaviorSubject(undefined);
        this.customerServiceTitle$$ = new BehaviorSubject(undefined);
        /**
         * The mailbox type enum (`inbox`, `outbox`, `drafts`).
         */
        this.mailboxTypeEnum = MailboxTypeEnum;
        /**
         * Quantity of items to show per page/to add per request.
         */
        this.itemsPerPage = getPropertyValue(this.itemsPerPage$$, this.properties.itemsPerPage);
        /**
         * Mailbox type property, used for Client widget
         */
        this.mailboxType = getPropertyValue(this.mailboxType$$, this.properties.mailboxType);
        /**
         * Customer service title to be displayed as a sender
         */
        this.customerServiceTitle = getPropertyValue(this.customerServiceTitle$$, this.properties.customerServiceTitle);
        /**
         * Event published when Create message modal widget was closed,
         * used for Client and Employee widget to update list of conversations
         */
        this.createMessageClosedEventName = getPropertyValue(this.createMessageClosedEventName$$.asObservable(), this.properties.createMessageClosedEventName);
        this.conversationsStream = this.from.pipe(withLatestFrom(this.itemsPerPage, this.mailboxType), tap(() => (this.isLoading = true)), switchMap(([from, size, mailboxType]) => this.getData(from, size, mailboxType)), scan((acc, items) => this.mergeConversationsData(acc, items)), tap(() => (this.isLoading = false)));
        this.destroyed$ = new Subject();
        this.resetSelection = new Subject();
        this.markAsReadUnreadSubject = new Subject();
        this.markAsReadUnreadStream = this.markAsReadUnreadSubject.pipe(switchMap(params => this.messagesService.markConversationsAsReadUnread(params).pipe(map(response => ({
            changedItems: response && response.changedItems,
            status: params.status,
        })), catchError(error => this.showErrorNotification(error)))));
        /**
         * The stream with the conversations data.
         */
        this.conversations = combineLatest([
            this.conversationsStream,
            merge(this.markAsReadUnreadStream, of(undefined)).pipe(scan((acc, value) => value && (acc ? Object.assign(Object.assign({}, acc), value) : Object.assign({}, value)))),
        ]).pipe(map(([conversations, mark]) => {
            /* istanbul ignore next */
            if (mark) {
                const flag = mark.status === ReadUnreadStatusType.READ;
                const data = conversations.data.map(conversation => {
                    if (mark.changedItems && mark.changedItems.includes(conversation.id)) {
                        conversation.read = flag;
                    }
                    return conversation;
                });
                return {
                    data: data,
                    params: conversations.params,
                    totalCount: conversations.totalCount,
                };
            }
            return conversations;
        }), shareReplayOnce());
        this.firstNewConversationId$ = (_a = this.conversations) === null || _a === void 0 ? void 0 : _a.pipe(pairwise(), map(([prevConversations, newConversations]) => {
            let firstNewConversation = newConversations.data[prevConversations.data.length];
            if (prevConversations.data.length >= newConversations.data.length) {
                firstNewConversation = newConversations.data[0];
            }
            return firstNewConversation && firstNewConversation.id;
        }));
        this.createMessageClosedEventName
            .pipe(first(), switchMap(eventName => this.shared.eventBusFactory(eventName)), takeUntil(this.unsubscribe$), tap(() => this.updateConversations()))
            .subscribe();
    }
    /**
     * Mailbox type property, used for Client widget
     */
    set mailboxTypeValue(value) {
        this.mailboxType$$.next(value);
    }
    /**
     * Quantity of items to show per page/to add per request, used for Client and Employee widget
     */
    set itemsPerPageValue(value) {
        this.itemsPerPage$$.next(Number(value));
    }
    /**
     * Event published when Create message modal widget was closed,
     * used for Client and Employee widget to update list of conversations
     */
    set createMessageClosedEventNameValue(value) {
        this.createMessageClosedEventName$$.next(value);
    }
    /**
     * Customer service title which should be replaced the name of the sender
     */
    set customerServiceTitleValue(value) {
        this.customerServiceTitle$$.next(value);
    }
    ngOnInit() {
        var _a;
        (_a = this.firstNewConversationId$) === null || _a === void 0 ? void 0 : _a.pipe(filter(Boolean), map(id => `#bb-cs-${id}`), observeOn(asyncScheduler), map(elemId => this.element.nativeElement.querySelector(`${elemId}`)), filter(Boolean), takeUntil(this.destroyed$)).subscribe((elemScrollTo) => {
            elemScrollTo === null || elemScrollTo === void 0 ? void 0 : elemScrollTo.focus();
            elemScrollTo === null || elemScrollTo === void 0 ? void 0 : elemScrollTo.scrollIntoView(false);
        });
    }
    ngOnDestroy() {
        this.destroyed$.next();
        this.destroyed$.complete();
    }
    /**
     * Delete conversations
     *
     * @param ids Conversations id list
     */
    removeConversations(ids) {
        merge(this.deleteConversationsStream(ids), this.deleteDraftsStream(ids))
            .pipe(takeUntil(this.unsubscribe$))
            .subscribe(() => {
            this.resetSelection.next();
            this.updateConversations();
        }, error => this.showErrorNotification(error));
    }
    /**
     * Get conversations data.
     *
     * @param params Get conversation thread request params
     * @returns Conversations stream
     */
    getConversations(params) {
        return this.messagesService.getConversations(params).pipe(catchError((error) => {
            this.errorResponse = error;
            return of({ params: FirstPage, data: [], totalCount: 0 });
        }));
    }
    /**
     * Get drafts data.
     *
     * @param draftData Draft size and position
     * @returns Draft stream
     */
    getDrafts({ size, from }) {
        return this.messagesService.getDrafts({ size, from }).pipe(catchError((error) => {
            this.errorResponse = error;
            return of({ params: FirstPage, data: [], totalCount: 0 });
        }));
    }
    /**
     * Mark a message as read or unread.
     *
     * @param params Conversation read request
     */
    markAsReadUnread(params) {
        this.markAsReadUnreadSubject.next(params);
    }
    /**
     * Change the starting page for the conversations loading.
     *
     * @param event Starting page params
     */
    setLoadingParams(event) {
        this.from.next(event);
        this.onPageChange(event.from);
    }
    /**
     * The method to change the starting page to the first one.
     */
    updateConversations() {
        this.from.next(FirstPage);
    }
    /**
     * Open the `Compose Message` modal.
     *
     * @param draftId Draft id
     */
    compose(draftId) {
        this.shared.eventBusPublish('bb.event.messages.create.message.open', { draftId });
    }
    deleteConversationsStream(ids) {
        return this.mailboxType.pipe(filter(mailboxType => mailboxType !== MailboxTypeEnum.drafts), switchMap(() => this.messagesService.deleteConversations(ids)), tap(response => {
            if (response) {
                const messageDeletion = response.deletedItems.length > 1 ? this.messageDeleteSuccessMultipleTpl : this.messageDeleteSuccessTpl;
                this.shared.openNotification(messageDeletion);
            }
        }));
    }
    deleteDraftsStream(ids) {
        return this.mailboxType.pipe(filter(mailboxType => mailboxType === MailboxTypeEnum.drafts), switchMap(() => this.messagesService.deleteDrafts(ids)), tap(response => {
            if (response) {
                const draftDeletion = response.deleted.length > 1 ? this.draftDeleteSuccessMultipleTpl : this.draftDeleteSuccessTpl;
                this.shared.openNotification(draftDeletion);
            }
        }));
    }
    getData(from, size, mailboxType) {
        const result = new Subject();
        if (mailboxType === MailboxTypeEnum.drafts) {
            this.getDrafts(Object.assign(Object.assign({}, from), { size })).subscribe(res => result.next(res));
        }
        else
            this.getConversations(Object.assign(Object.assign({}, from), { size, mailboxType })).subscribe(res => result.next(res));
        return result.pipe(map((response) => (Object.assign({ params: Object.assign(Object.assign({}, from), { size, mailboxType }) }, response))));
    }
    mergeConversationsData(acc, items) {
        return {
            params: acc.params,
            data: items.params.from ? [...acc.data, ...items.data] : items.data,
            totalCount: items.totalCount,
        };
    }
}
MessagesConversationsListWidgetComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationsListWidgetComponent, deps: [{ token: i1.MessagesConversationsListWidgetService }, { token: i2.BaseConversationsListPropertiesService }, { token: i2.SharedMethodsService }, { token: i3.ActivatedRoute }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });
MessagesConversationsListWidgetComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.14", type: MessagesConversationsListWidgetComponent, selector: "bb-messages-conversations-list-widget-ang", inputs: { mailboxTypeValue: ["mailboxType", "mailboxTypeValue"], itemsPerPageValue: ["itemsPerPage", "itemsPerPageValue"], createMessageClosedEventNameValue: ["createMessageClosedEventName", "createMessageClosedEventNameValue"], customerServiceTitleValue: ["customerServiceTitle", "customerServiceTitleValue"] }, providers: [BaseConversationsListPropertiesService], viewQueries: [{ propertyName: "messageDeleteSuccessTpl", first: true, predicate: ["messageDeleteSuccess"], descendants: true }, { propertyName: "messageDeleteSuccessMultipleTpl", first: true, predicate: ["messageDeleteSuccessMultiple"], descendants: true }, { propertyName: "draftDeleteSuccessTpl", first: true, predicate: ["draftDeleteSuccess"], descendants: true }, { propertyName: "draftDeleteSuccessMultipleTpl", first: true, predicate: ["draftDeleteSuccessMultiple"], descendants: true }], usesInheritance: true, ngImport: i0, template: "<ng-container\n  bbMessagesConversationsListCustomizable\n  [bbHostRef]=\"hostRef\"\n  [bbTemplateContext]=\"{\n    conversations: conversations | async,\n    mailboxType: mailboxType | async,\n    itemsPerPage: itemsPerPage | async\n  }\"\n></ng-container>\n\n<ng-template\n  bbMessagesConversationsListCustomizable\n  let-host\n  let-conversations=\"context.conversations\"\n  let-mailboxType=\"context.mailboxType\"\n  let-itemsPerPage=\"context.itemsPerPage\"\n>\n  <div class=\"bb-messages-conversations-list__container card card-lg\">\n    <ng-container *ngIf=\"conversations?.data; else loadingState\">\n      <ng-container *ngIf=\"!host.errorResponse; else errorState\">\n        <ng-container *ngIf=\"conversations.data.length; else emptyState\">\n          <bb-conversations-list-table-ui\n            [conversations]=\"conversations.data\"\n            [reset]=\"host.resetSelection\"\n            [mailboxType]=\"host.mailboxType | async\"\n            [customerServiceTitle$]=\"host.customerServiceTitle\"\n            (remove)=\"host.removeConversations($event)\"\n            (read)=\"host.markAsReadUnread($event)\"\n            (select)=\"\n              mailboxType === host.mailboxTypeEnum.drafts ? host.openDraft($event) : host.openConversation($event)\n            \"\n            (update)=\"host.updateConversations()\"\n          ></bb-conversations-list-table-ui>\n          <div class=\"p-3 text-center\">\n            <bb-load-button-ui\n              [from]=\"host.from.value.from\"\n              [isLoading]=\"host.isLoading\"\n              [size]=\"itemsPerPage\"\n              [totalCount]=\"conversations.totalCount\"\n              (paramChange)=\"host.setLoadingParams($event)\"\n              data-role=\"load-more-button\"\n              i18n=\"Load more button name@@messages.messagesConversationsList.loadMoreButton\"\n              >Load more</bb-load-button-ui\n            >\n          </div>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n  </div>\n\n  <ng-template #emptyState>\n    <div class=\"bb-state-container\">\n      <ng-container [ngSwitch]=\"mailboxType\">\n        <ng-container *ngSwitchCase=\"host.mailboxTypeEnum.drafts\">\n          <bb-empty-state-ui\n            i18n-title=\"Empty state title@@messages.messagesConversationsList.draftsEmptyStateTitle\"\n            title=\"No Drafts\"\n            i18n-subtitle=\"Empty state subtitle@@messages.messagesConversationsList.draftsEmptyStateSubTitle\"\n            subtitle=\"You don't have any drafts to be displayed.\"\n            iconModifier=\"email\"\n            iconColor=\"muted\"\n          ></bb-empty-state-ui>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"host.mailboxTypeEnum.outbox\">\n          <bb-empty-state-ui\n            i18n-title=\"Empty state title@@messages.messagesConversationsList.emptyStateTitle\"\n            title=\"No Sent Messages\"\n            i18n-subtitle=\"Empty state subtitle@@messages.messagesConversationsList.emptyStateSubtitle\"\n            subtitle=\"You don't have any sent messages to be displayed.\"\n            iconModifier=\"email\"\n            iconColor=\"muted\"\n          ></bb-empty-state-ui>\n        </ng-container>\n        <ng-container *ngSwitchDefault>\n          <bb-empty-state-ui\n            i18n-title=\"Empty state title@@messages.messagesConversationsList.simpleEmptyStateTitle\"\n            title=\"No Conversations\"\n            i18n-subtitle=\"Empty state subtitle@@messages.messagesConversationsList.simpleEmptyStateSubTitle\"\n            subtitle=\"You don't have any conversations to be displayed.\"\n            iconModifier=\"email\"\n            iconColor=\"muted\"\n          ></bb-empty-state-ui>\n        </ng-container>\n      </ng-container>\n    </div>\n  </ng-template>\n\n  <ng-template #errorState>\n    <bb-messages-request-error [error]=\"host.errorResponse\"></bb-messages-request-error>\n  </ng-template>\n\n  <ng-template #loadingState>\n    <bb-loading-indicator-ui class=\"py-4\" loaderSize=\"md\"></bb-loading-indicator-ui>\n  </ng-template>\n</ng-template>\n\n<ng-template #messageDeleteSuccess>\n  <span\n    i18n=\"\n      Your conversation has been deleted successfully.|Text of successful conversation\n      deletion@@messages.messagesConversationList.messageSuccessDelete\"\n    >Your conversation has been deleted successfully.</span\n  >\n</ng-template>\n\n<ng-template #messageDeleteSuccessMultiple>\n  <span\n    i18n=\"\n      Your conversations have been deleted successfully.|Text of successful conversations\n      deletion@@messages.messagesConversationList.messageDeleteSuccessMultipleDelete\"\n    >Your conversations have been deleted successfully.</span\n  >\n</ng-template>\n\n<ng-template #draftDeleteSuccess>\n  <span\n    i18n=\"\n      Your draft has been deleted successfully.|Text of successful draft\n      deletion@@messages.messagesConversationList.draftSuccessDelete\"\n    >Your draft has been deleted successfully.</span\n  >\n</ng-template>\n\n<ng-template #draftDeleteSuccessMultiple>\n  <span\n    i18n=\"\n      Your draft have been deleted successfully.|Text of successful draft\n      deletion@@messages.messagesConversationList.draftDeleteSuccessMultipleDelete\"\n    >Your drafts have been deleted successfully.</span\n  >\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i4.ConversationsListTableComponent; }), selector: "bb-conversations-list-table-ui", inputs: ["conversations", "reset", "mailboxType", "customerServiceTitle$"], outputs: ["select", "read", "remove", "update"] }, { type: i0.forwardRef(function () { return i5.LoadButtonComponent; }), selector: "bb-load-button-ui", inputs: ["isLoading", "from", "size", "circle", "totalCount"], outputs: ["paramChange"] }, { type: i0.forwardRef(function () { return i6.EmptyStateComponent; }), selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }, { type: i0.forwardRef(function () { return i2.MessagesRequestErrorComponent; }), selector: "bb-messages-request-error, bb-messages-request-error-ui", inputs: ["error"] }, { type: i0.forwardRef(function () { return i7.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }], directives: [{ type: i0.forwardRef(function () { return MessagesConversationsListCustomizableDirective; }), selector: "[bbMessagesConversationsListCustomizable]" }, { type: i0.forwardRef(function () { return i8.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return i8.NgSwitch; }), selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i0.forwardRef(function () { return i8.NgSwitchCase; }), selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { type: i0.forwardRef(function () { return i8.NgSwitchDefault; }), selector: "[ngSwitchDefault]" }], pipes: { "async": i0.forwardRef(function () { return i8.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationsListWidgetComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-messages-conversations-list-widget-ang',
                    providers: [BaseConversationsListPropertiesService],
                    templateUrl: './messages-conversations-list-widget-ang.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.MessagesConversationsListWidgetService }, { type: i2.BaseConversationsListPropertiesService }, { type: i2.SharedMethodsService }, { type: i3.ActivatedRoute }, { type: i0.ElementRef }]; }, propDecorators: { mailboxTypeValue: [{
                type: Input,
                args: ['mailboxType']
            }], itemsPerPageValue: [{
                type: Input,
                args: ['itemsPerPage']
            }], createMessageClosedEventNameValue: [{
                type: Input,
                args: ['createMessageClosedEventName']
            }], customerServiceTitleValue: [{
                type: Input,
                args: ['customerServiceTitle']
            }], messageDeleteSuccessTpl: [{
                type: ViewChild,
                args: ['messageDeleteSuccess']
            }], messageDeleteSuccessMultipleTpl: [{
                type: ViewChild,
                args: ['messageDeleteSuccessMultiple']
            }], draftDeleteSuccessTpl: [{
                type: ViewChild,
                args: ['draftDeleteSuccess']
            }], draftDeleteSuccessMultipleTpl: [{
                type: ViewChild,
                args: ['draftDeleteSuccessMultiple']
            }] } });
export class MessagesConversationsListCustomizableDirective extends BbTemplate {
}
MessagesConversationsListCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationsListCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
MessagesConversationsListCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.14", type: MessagesConversationsListCustomizableDirective, selector: "[bbMessagesConversationsListCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.14", ngImport: i0, type: MessagesConversationsListCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbMessagesConversationsListCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZXMtY29udmVyc2F0aW9ucy1saXN0LXdpZGdldC1hbmcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9tZXNzYWdlcy1jb252ZXJzYXRpb25zLWxpc3Qtd2lkZ2V0LWFuZy9zcmMvbWVzc2FnZXMtY29udmVyc2F0aW9ucy1saXN0LXdpZGdldC1hbmcuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy9tZXNzYWdlcy1jb252ZXJzYXRpb25zLWxpc3Qtd2lkZ2V0LWFuZy9zcmMvbWVzc2FnZXMtY29udmVyc2F0aW9ucy1saXN0LXdpZGdldC1hbmcuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQWMsS0FBSyxFQUFrQyxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHbkgsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzNELE9BQU8sRUFDTCxVQUFVLEVBQ1YsTUFBTSxFQUNOLEtBQUssRUFDTCxHQUFHLEVBQ0gsU0FBUyxFQUNULFFBQVEsRUFDUixJQUFJLEVBQ0osU0FBUyxFQUNULFNBQVMsRUFDVCxHQUFHLEVBQ0gsY0FBYyxHQUNmLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLGNBQWMsRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBYyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRXRHLE9BQU8sRUFNTCxlQUFlLEVBRWYsb0JBQW9CLEdBQ3JCLE1BQU0sU0FBUyxDQUFDO0FBQ2pCLE9BQU8sRUFDTCxzQ0FBc0MsRUFDdEMsb0NBQW9DLEVBQ3BDLGdCQUFnQixFQUVoQixlQUFlLEdBQ2hCLE1BQU0sMkJBQTJCLENBQUM7Ozs7Ozs7Ozs7QUFZbkMsTUFBTSxTQUFTLEdBQWM7SUFDM0IsSUFBSSxFQUFFLENBQUM7Q0FD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QkFBOEI7Z0JBT0YseUJBQXlCO3NCQUEzRCxLQUFLO3VCQUFDLHNCQUFzQjtnQkFPTSx1QkFBdUI7c0JBQXpELFNBQVM7dUJBQUMsc0JBQXNCO2dCQUtVLCtCQUErQjtzQkFBekUsU0FBUzt1QkFBQyw4QkFBOEI7Z0JBS1IscUJBQXFCO3NCQUFyRCxTQUFTO3VCQUFDLG9CQUFvQjtnQkFLVSw2QkFBNkI7c0JBQXJFLFNBQVM7dUJBQUMsNEJBQTRCOztBQTRTekMsTUFBTSxPQUFPLDhDQUErQyxTQUFRLFVBR25FOzs0SUFIWSw4Q0FBOEM7Z0lBQTlDLDhDQUE4Qzs0RkFBOUMsOENBQThDO2tCQUgxRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSwyQ0FBMkM7aUJBQ3REIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIElucHV0LCBPbkRlc3Ryb3ksIE9uSW5pdCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cEVycm9yUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBCYlRlbXBsYXRlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2NvcmUnO1xuaW1wb3J0IHtcbiAgY2F0Y2hFcnJvcixcbiAgZmlsdGVyLFxuICBmaXJzdCxcbiAgbWFwLFxuICBvYnNlcnZlT24sXG4gIHBhaXJ3aXNlLFxuICBzY2FuLFxuICBzd2l0Y2hNYXAsXG4gIHRha2VVbnRpbCxcbiAgdGFwLFxuICB3aXRoTGF0ZXN0RnJvbSxcbn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgYXN5bmNTY2hlZHVsZXIsIEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgbWVyZ2UsIE9ic2VydmFibGUsIG9mLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBNZXNzYWdlc0NvbnZlcnNhdGlvbnNMaXN0V2lkZ2V0U2VydmljZSB9IGZyb20gJy4vbWVzc2FnZXMtY29udmVyc2F0aW9ucy1saXN0LXdpZGdldC1hbmcuc2VydmljZSc7XG5pbXBvcnQge1xuICBDb252ZXJzYXRpb25zRGF0YSxcbiAgQ29udmVyc2F0aW9uc0RhdGFFeHBhbmRlZCxcbiAgQ29udmVyc2F0aW9uc1JlYWRSZXF1ZXN0LFxuICBEcmFmdHNEYXRhLFxuICBGcm9tUGFyYW0sXG4gIE1haWxib3hUeXBlRW51bSxcbiAgTWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdFdpZGdldENvbnRleHQsXG4gIFJlYWRVbnJlYWRTdGF0dXNUeXBlLFxufSBmcm9tICcuL21vZGVsJztcbmltcG9ydCB7XG4gIEJhc2VDb252ZXJzYXRpb25zTGlzdFByb3BlcnRpZXNTZXJ2aWNlLFxuICBCYXNlQ29udmVyc2F0aW9uc0xpc3RXaWRnZXRDb21wb25lbnQsXG4gIGdldFByb3BlcnR5VmFsdWUsXG4gIFNoYXJlZE1ldGhvZHNTZXJ2aWNlLFxuICBzaGFyZVJlcGxheU9uY2UsXG59IGZyb20gJ0BiYWNrYmFzZS9tZXNzYWdlcy1jb21tb24nO1xuaW1wb3J0IHtcbiAgQ29udmVyc2F0aW9uVGhyZWFkc0RlbGV0ZVJlc3BvbnNlQm9keSxcbiAgRGVsZXRlRHJhZnRzUmVzcG9uc2VCb2R5LFxuICBHZXRDb252ZXJzYXRpb25UaHJlYWRzUmVxdWVzdFBhcmFtcyxcbn0gZnJvbSAnQGJhY2tiYXNlL21lc3NhZ2VzLXY1LWh0dHAtYW5nJztcblxuZXhwb3J0IGludGVyZmFjZSBNYXJrUmVhZFVucmVhZFN0cmVhbSB7XG4gIHN0YXR1czogUmVhZFVucmVhZFN0YXR1c1R5cGU7XG4gIGNoYW5nZWRJdGVtczogc3RyaW5nW10gfCBudWxsIHwgdW5kZWZpbmVkO1xufVxuXG5jb25zdCBGaXJzdFBhZ2U6IEZyb21QYXJhbSA9IHtcbiAgZnJvbTogMCxcbn07XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JiLW1lc3NhZ2VzLWNvbnZlcnNhdGlvbnMtbGlzdC13aWRnZXQtYW5nJyxcbiAgcHJvdmlkZXJzOiBbQmFzZUNvbnZlcnNhdGlvbnNMaXN0UHJvcGVydGllc1NlcnZpY2VdLFxuICB0ZW1wbGF0ZVVybDogJy4vbWVzc2FnZXMtY29udmVyc2F0aW9ucy1saXN0LXdpZGdldC1hbmcuY29tcG9uZW50Lmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBNZXNzYWdlc0NvbnZlcnNhdGlvbnNMaXN0V2lkZ2V0Q29tcG9uZW50XG4gIGV4dGVuZHMgQmFzZUNvbnZlcnNhdGlvbnNMaXN0V2lkZ2V0Q29tcG9uZW50XG4gIGltcGxlbWVudHMgT25EZXN0cm95LCBPbkluaXRcbntcbiAgcmVhZG9ubHkgaG9zdFJlZiA9IHRoaXM7XG5cbiAgLyoqXG4gICAqIE1haWxib3ggdHlwZSBwcm9wZXJ0eSwgdXNlZCBmb3IgQ2xpZW50IHdpZGdldFxuICAgKi9cbiAgQElucHV0KCdtYWlsYm94VHlwZScpIHNldCBtYWlsYm94VHlwZVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLm1haWxib3hUeXBlJCQubmV4dCh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUXVhbnRpdHkgb2YgaXRlbXMgdG8gc2hvdyBwZXIgcGFnZS90byBhZGQgcGVyIHJlcXVlc3QsIHVzZWQgZm9yIENsaWVudCBhbmQgRW1wbG95ZWUgd2lkZ2V0XG4gICAqL1xuICBASW5wdXQoJ2l0ZW1zUGVyUGFnZScpIHNldCBpdGVtc1BlclBhZ2VWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgdGhpcy5pdGVtc1BlclBhZ2UkJC5uZXh0KE51bWJlcih2YWx1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHB1Ymxpc2hlZCB3aGVuIENyZWF0ZSBtZXNzYWdlIG1vZGFsIHdpZGdldCB3YXMgY2xvc2VkLFxuICAgKiB1c2VkIGZvciBDbGllbnQgYW5kIEVtcGxveWVlIHdpZGdldCB0byB1cGRhdGUgbGlzdCBvZiBjb252ZXJzYXRpb25zXG4gICAqL1xuICBASW5wdXQoJ2NyZWF0ZU1lc3NhZ2VDbG9zZWRFdmVudE5hbWUnKSBzZXQgY3JlYXRlTWVzc2FnZUNsb3NlZEV2ZW50TmFtZVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNyZWF0ZU1lc3NhZ2VDbG9zZWRFdmVudE5hbWUkJC5uZXh0KHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDdXN0b21lciBzZXJ2aWNlIHRpdGxlIHdoaWNoIHNob3VsZCBiZSByZXBsYWNlZCB0aGUgbmFtZSBvZiB0aGUgc2VuZGVyXG4gICAqL1xuICBASW5wdXQoJ2N1c3RvbWVyU2VydmljZVRpdGxlJykgc2V0IGN1c3RvbWVyU2VydmljZVRpdGxlVmFsdWUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlVGl0bGUkJC5uZXh0KHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbm90aWZpY2F0aW9uIGZvciB0aGUgc3VjY2Vzc2Z1bCBtZXNzYWdlIGRlbGV0aW9uIG9wZXJhdGlvbi5cbiAgICovXG4gIEBWaWV3Q2hpbGQoJ21lc3NhZ2VEZWxldGVTdWNjZXNzJykgbWVzc2FnZURlbGV0ZVN1Y2Nlc3NUcGw6IFRlbXBsYXRlUmVmPGFueT4gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBub3RpZmljYXRpb24gZm9yIHRoZSBzdWNjZXNzZnVsIGRlbGV0ZSBvcGVyYXRpb24gb2YgbXVsdGlwbGUgbWVzc2FnZXMuXG4gICAqL1xuICBAVmlld0NoaWxkKCdtZXNzYWdlRGVsZXRlU3VjY2Vzc011bHRpcGxlJykgbWVzc2FnZURlbGV0ZVN1Y2Nlc3NNdWx0aXBsZVRwbDogVGVtcGxhdGVSZWY8YW55PiB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG5vdGlmaWNhdGlvbiBmb3IgdGhlIHN1Y2Nlc3NmdWwgZGVsZXRpb24gb2YgYSBkcmFmdC5cbiAgICovXG4gIEBWaWV3Q2hpbGQoJ2RyYWZ0RGVsZXRlU3VjY2VzcycpIGRyYWZ0RGVsZXRlU3VjY2Vzc1RwbDogVGVtcGxhdGVSZWY8YW55PiB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG5vdGlmaWNhdGlvbiBmb3Igc3VjY3NzZnVsIGRlbGV0aW9uIG9mIG11bHRpcGxlIGRyYWZ0cy5cbiAgICovXG4gIEBWaWV3Q2hpbGQoJ2RyYWZ0RGVsZXRlU3VjY2Vzc011bHRpcGxlJykgZHJhZnREZWxldGVTdWNjZXNzTXVsdGlwbGVUcGw6IFRlbXBsYXRlUmVmPGFueT4gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBsb2FkaW5nIHBhcmFtZXRlciBpbmRpY2F0aW5nIHRoZSBzdGFydGluZyBwYWdlIGZvciB0aGUgZGF0YSB0byBiZSBsb2FkZWQgZnJvbS5cbiAgICovXG4gIHJlYWRvbmx5IGZyb20gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PEZyb21QYXJhbT4oRmlyc3RQYWdlKTtcblxuICAvKipcbiAgICogVGhlIGxvYWRpbmcgZmxhZy5cbiAgICovXG4gIGlzTG9hZGluZyA9IGZhbHNlO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaXRlbXNQZXJQYWdlJCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlciB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYWlsYm94VHlwZSQkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmcgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgY3JlYXRlTWVzc2FnZUNsb3NlZEV2ZW50TmFtZSQkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmcgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgY3VzdG9tZXJTZXJ2aWNlVGl0bGUkJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4gIC8qKlxuICAgKiBUaGUgbWFpbGJveCB0eXBlIGVudW0gKGBpbmJveGAsIGBvdXRib3hgLCBgZHJhZnRzYCkuXG4gICAqL1xuICByZWFkb25seSBtYWlsYm94VHlwZUVudW0gPSBNYWlsYm94VHlwZUVudW07XG5cbiAgLyoqXG4gICAqIFF1YW50aXR5IG9mIGl0ZW1zIHRvIHNob3cgcGVyIHBhZ2UvdG8gYWRkIHBlciByZXF1ZXN0LlxuICAgKi9cbiAgcmVhZG9ubHkgaXRlbXNQZXJQYWdlOiBPYnNlcnZhYmxlPG51bWJlcj4gPSBnZXRQcm9wZXJ0eVZhbHVlKHRoaXMuaXRlbXNQZXJQYWdlJCQsIHRoaXMucHJvcGVydGllcy5pdGVtc1BlclBhZ2UpO1xuXG4gIC8qKlxuICAgKiBNYWlsYm94IHR5cGUgcHJvcGVydHksIHVzZWQgZm9yIENsaWVudCB3aWRnZXRcbiAgICovXG4gIHJlYWRvbmx5IG1haWxib3hUeXBlOiBPYnNlcnZhYmxlPHN0cmluZz4gPSBnZXRQcm9wZXJ0eVZhbHVlKHRoaXMubWFpbGJveFR5cGUkJCwgdGhpcy5wcm9wZXJ0aWVzLm1haWxib3hUeXBlKTtcblxuICAvKipcbiAgICogQ3VzdG9tZXIgc2VydmljZSB0aXRsZSB0byBiZSBkaXNwbGF5ZWQgYXMgYSBzZW5kZXJcbiAgICovXG4gIHJlYWRvbmx5IGN1c3RvbWVyU2VydmljZVRpdGxlOiBPYnNlcnZhYmxlPHN0cmluZz4gPSBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlVGl0bGUkJCxcbiAgICB0aGlzLnByb3BlcnRpZXMuY3VzdG9tZXJTZXJ2aWNlVGl0bGUsXG4gICk7XG5cbiAgLyoqXG4gICAqIEV2ZW50IHB1Ymxpc2hlZCB3aGVuIENyZWF0ZSBtZXNzYWdlIG1vZGFsIHdpZGdldCB3YXMgY2xvc2VkLFxuICAgKiB1c2VkIGZvciBDbGllbnQgYW5kIEVtcGxveWVlIHdpZGdldCB0byB1cGRhdGUgbGlzdCBvZiBjb252ZXJzYXRpb25zXG4gICAqL1xuICByZWFkb25seSBjcmVhdGVNZXNzYWdlQ2xvc2VkRXZlbnROYW1lOiBPYnNlcnZhYmxlPHN0cmluZz4gPSBnZXRQcm9wZXJ0eVZhbHVlKFxuICAgIHRoaXMuY3JlYXRlTWVzc2FnZUNsb3NlZEV2ZW50TmFtZSQkLmFzT2JzZXJ2YWJsZSgpLFxuICAgIHRoaXMucHJvcGVydGllcy5jcmVhdGVNZXNzYWdlQ2xvc2VkRXZlbnROYW1lLFxuICApO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgY29udmVyc2F0aW9uc1N0cmVhbTogT2JzZXJ2YWJsZTxDb252ZXJzYXRpb25zRGF0YUV4cGFuZGVkPiA9IHRoaXMuZnJvbS5waXBlKFxuICAgIHdpdGhMYXRlc3RGcm9tKHRoaXMuaXRlbXNQZXJQYWdlLCB0aGlzLm1haWxib3hUeXBlKSxcbiAgICB0YXAoKCkgPT4gKHRoaXMuaXNMb2FkaW5nID0gdHJ1ZSkpLFxuICAgIHN3aXRjaE1hcCgoW2Zyb20sIHNpemUsIG1haWxib3hUeXBlXSkgPT4gdGhpcy5nZXREYXRhKGZyb20sIHNpemUsIG1haWxib3hUeXBlKSksXG4gICAgc2NhbigoYWNjLCBpdGVtcyk6IENvbnZlcnNhdGlvbnNEYXRhRXhwYW5kZWQgPT4gdGhpcy5tZXJnZUNvbnZlcnNhdGlvbnNEYXRhKGFjYywgaXRlbXMpKSxcbiAgICB0YXAoKCkgPT4gKHRoaXMuaXNMb2FkaW5nID0gZmFsc2UpKSxcbiAgKTtcblxuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3llZCQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVzZXRTZWxlY3Rpb24gPSBuZXcgU3ViamVjdCgpO1xuICBwcml2YXRlIHJlYWRvbmx5IG1hcmtBc1JlYWRVbnJlYWRTdWJqZWN0ID0gbmV3IFN1YmplY3Q8Q29udmVyc2F0aW9uc1JlYWRSZXF1ZXN0PigpO1xuICBwcml2YXRlIHJlYWRvbmx5IG1hcmtBc1JlYWRVbnJlYWRTdHJlYW06IE9ic2VydmFibGU8TWFya1JlYWRVbnJlYWRTdHJlYW0gfCBudWxsIHwgdW5kZWZpbmVkPiA9XG4gICAgdGhpcy5tYXJrQXNSZWFkVW5yZWFkU3ViamVjdC5waXBlKFxuICAgICAgc3dpdGNoTWFwKHBhcmFtcyA9PlxuICAgICAgICB0aGlzLm1lc3NhZ2VzU2VydmljZS5tYXJrQ29udmVyc2F0aW9uc0FzUmVhZFVucmVhZChwYXJhbXMpLnBpcGUoXG4gICAgICAgICAgbWFwKHJlc3BvbnNlID0+ICh7XG4gICAgICAgICAgICBjaGFuZ2VkSXRlbXM6IHJlc3BvbnNlICYmIHJlc3BvbnNlLmNoYW5nZWRJdGVtcyxcbiAgICAgICAgICAgIHN0YXR1czogcGFyYW1zLnN0YXR1cyxcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgY2F0Y2hFcnJvcihlcnJvciA9PiB0aGlzLnNob3dFcnJvck5vdGlmaWNhdGlvbihlcnJvcikpLFxuICAgICAgICApLFxuICAgICAgKSxcbiAgICApO1xuXG4gIC8qKlxuICAgKiBUaGUgc3RyZWFtIHdpdGggdGhlIGNvbnZlcnNhdGlvbnMgZGF0YS5cbiAgICovXG4gIGNvbnZlcnNhdGlvbnM6IE9ic2VydmFibGU8Q29udmVyc2F0aW9uc0RhdGFFeHBhbmRlZD4gPSBjb21iaW5lTGF0ZXN0KFtcbiAgICB0aGlzLmNvbnZlcnNhdGlvbnNTdHJlYW0sXG4gICAgbWVyZ2UodGhpcy5tYXJrQXNSZWFkVW5yZWFkU3RyZWFtLCBvZih1bmRlZmluZWQpKS5waXBlKFxuICAgICAgc2NhbigoYWNjLCB2YWx1ZSkgPT4gdmFsdWUgJiYgKGFjYyA/IHsgLi4uYWNjLCAuLi52YWx1ZSB9IDogeyAuLi52YWx1ZSB9KSksXG4gICAgKSxcbiAgXSkucGlwZShcbiAgICBtYXAoKFtjb252ZXJzYXRpb25zLCBtYXJrXSkgPT4ge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGlmIChtYXJrKSB7XG4gICAgICAgIGNvbnN0IGZsYWcgPSBtYXJrLnN0YXR1cyA9PT0gUmVhZFVucmVhZFN0YXR1c1R5cGUuUkVBRDtcbiAgICAgICAgY29uc3QgZGF0YSA9IGNvbnZlcnNhdGlvbnMuZGF0YS5tYXAoY29udmVyc2F0aW9uID0+IHtcbiAgICAgICAgICBpZiAobWFyay5jaGFuZ2VkSXRlbXMgJiYgbWFyay5jaGFuZ2VkSXRlbXMuaW5jbHVkZXMoY29udmVyc2F0aW9uLmlkKSkge1xuICAgICAgICAgICAgY29udmVyc2F0aW9uLnJlYWQgPSBmbGFnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBjb252ZXJzYXRpb247XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBwYXJhbXM6IGNvbnZlcnNhdGlvbnMucGFyYW1zLFxuICAgICAgICAgIHRvdGFsQ291bnQ6IGNvbnZlcnNhdGlvbnMudG90YWxDb3VudCxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnZlcnNhdGlvbnM7XG4gICAgfSksXG4gICAgc2hhcmVSZXBsYXlPbmNlKCksXG4gICk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBmaXJzdE5ld0NvbnZlcnNhdGlvbklkJCA9IHRoaXMuY29udmVyc2F0aW9ucz8ucGlwZShcbiAgICBwYWlyd2lzZSgpLFxuICAgIG1hcCgoW3ByZXZDb252ZXJzYXRpb25zLCBuZXdDb252ZXJzYXRpb25zXSkgPT4ge1xuICAgICAgbGV0IGZpcnN0TmV3Q29udmVyc2F0aW9uID0gbmV3Q29udmVyc2F0aW9ucy5kYXRhW3ByZXZDb252ZXJzYXRpb25zLmRhdGEubGVuZ3RoXTtcblxuICAgICAgaWYgKHByZXZDb252ZXJzYXRpb25zLmRhdGEubGVuZ3RoID49IG5ld0NvbnZlcnNhdGlvbnMuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgZmlyc3ROZXdDb252ZXJzYXRpb24gPSBuZXdDb252ZXJzYXRpb25zLmRhdGFbMF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaXJzdE5ld0NvbnZlcnNhdGlvbiAmJiBmaXJzdE5ld0NvbnZlcnNhdGlvbi5pZDtcbiAgICB9KSxcbiAgKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1lc3NhZ2VzU2VydmljZTogTWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdFdpZGdldFNlcnZpY2UsXG4gICAgcmVhZG9ubHkgcHJvcGVydGllczogQmFzZUNvbnZlcnNhdGlvbnNMaXN0UHJvcGVydGllc1NlcnZpY2UsXG4gICAgcmVhZG9ubHkgc2hhcmVkOiBTaGFyZWRNZXRob2RzU2VydmljZSxcbiAgICByZWFkb25seSBhY3RpdmF0ZWRSb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50OiBFbGVtZW50UmVmLFxuICApIHtcbiAgICBzdXBlcihzaGFyZWQsIGFjdGl2YXRlZFJvdXRlLCBwcm9wZXJ0aWVzKTtcblxuICAgIHRoaXMuY3JlYXRlTWVzc2FnZUNsb3NlZEV2ZW50TmFtZVxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpcnN0KCksXG4gICAgICAgIHN3aXRjaE1hcChldmVudE5hbWUgPT4gdGhpcy5zaGFyZWQuZXZlbnRCdXNGYWN0b3J5KGV2ZW50TmFtZSkpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpLFxuICAgICAgICB0YXAoKCkgPT4gdGhpcy51cGRhdGVDb252ZXJzYXRpb25zKCkpLFxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5maXJzdE5ld0NvbnZlcnNhdGlvbklkJFxuICAgICAgPy5waXBlKFxuICAgICAgICBmaWx0ZXIoQm9vbGVhbiksXG4gICAgICAgIG1hcChpZCA9PiBgI2JiLWNzLSR7aWR9YCksXG4gICAgICAgIG9ic2VydmVPbihhc3luY1NjaGVkdWxlciksXG4gICAgICAgIG1hcChlbGVtSWQgPT4gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgJHtlbGVtSWR9YCkgYXMgSFRNTEVsZW1lbnQpLFxuICAgICAgICBmaWx0ZXI8SFRNTEVsZW1lbnQ+KEJvb2xlYW4pLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQkKSxcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKGVsZW1TY3JvbGxUbzogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgZWxlbVNjcm9sbFRvPy5mb2N1cygpO1xuICAgICAgICBlbGVtU2Nyb2xsVG8/LnNjcm9sbEludG9WaWV3KGZhbHNlKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQkLm5leHQoKTtcbiAgICB0aGlzLmRlc3Ryb3llZCQuY29tcGxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgY29udmVyc2F0aW9uc1xuICAgKlxuICAgKiBAcGFyYW0gaWRzIENvbnZlcnNhdGlvbnMgaWQgbGlzdFxuICAgKi9cbiAgcmVtb3ZlQ29udmVyc2F0aW9ucyhpZHM6IHN0cmluZ1tdKSB7XG4gICAgbWVyZ2UodGhpcy5kZWxldGVDb252ZXJzYXRpb25zU3RyZWFtKGlkcyksIHRoaXMuZGVsZXRlRHJhZnRzU3RyZWFtKGlkcykpXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpKVxuICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVzZXRTZWxlY3Rpb24ubmV4dCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlQ29udmVyc2F0aW9ucygpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB0aGlzLnNob3dFcnJvck5vdGlmaWNhdGlvbihlcnJvciksXG4gICAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb252ZXJzYXRpb25zIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgR2V0IGNvbnZlcnNhdGlvbiB0aHJlYWQgcmVxdWVzdCBwYXJhbXNcbiAgICogQHJldHVybnMgQ29udmVyc2F0aW9ucyBzdHJlYW1cbiAgICovXG4gIGdldENvbnZlcnNhdGlvbnMocGFyYW1zOiBHZXRDb252ZXJzYXRpb25UaHJlYWRzUmVxdWVzdFBhcmFtcyk6IE9ic2VydmFibGU8Q29udmVyc2F0aW9uc0RhdGE+IHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlc1NlcnZpY2UuZ2V0Q29udmVyc2F0aW9ucyhwYXJhbXMpLnBpcGUoXG4gICAgICBjYXRjaEVycm9yKChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpID0+IHtcbiAgICAgICAgdGhpcy5lcnJvclJlc3BvbnNlID0gZXJyb3I7XG5cbiAgICAgICAgcmV0dXJuIG9mKHsgcGFyYW1zOiBGaXJzdFBhZ2UsIGRhdGE6IFtdLCB0b3RhbENvdW50OiAwIH0pO1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZHJhZnRzIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSBkcmFmdERhdGEgRHJhZnQgc2l6ZSBhbmQgcG9zaXRpb25cbiAgICogQHJldHVybnMgRHJhZnQgc3RyZWFtXG4gICAqL1xuICBnZXREcmFmdHMoeyBzaXplLCBmcm9tIH06IHsgc2l6ZTogbnVtYmVyOyBmcm9tOiBudW1iZXIgfSk6IE9ic2VydmFibGU8RHJhZnRzRGF0YT4ge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzU2VydmljZS5nZXREcmFmdHMoeyBzaXplLCBmcm9tIH0pLnBpcGUoXG4gICAgICBjYXRjaEVycm9yKChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpID0+IHtcbiAgICAgICAgdGhpcy5lcnJvclJlc3BvbnNlID0gZXJyb3I7XG5cbiAgICAgICAgcmV0dXJuIG9mKHsgcGFyYW1zOiBGaXJzdFBhZ2UsIGRhdGE6IFtdLCB0b3RhbENvdW50OiAwIH0pO1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrIGEgbWVzc2FnZSBhcyByZWFkIG9yIHVucmVhZC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBDb252ZXJzYXRpb24gcmVhZCByZXF1ZXN0XG4gICAqL1xuICBtYXJrQXNSZWFkVW5yZWFkKHBhcmFtczogQ29udmVyc2F0aW9uc1JlYWRSZXF1ZXN0KSB7XG4gICAgdGhpcy5tYXJrQXNSZWFkVW5yZWFkU3ViamVjdC5uZXh0KHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBzdGFydGluZyBwYWdlIGZvciB0aGUgY29udmVyc2F0aW9ucyBsb2FkaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgU3RhcnRpbmcgcGFnZSBwYXJhbXNcbiAgICovXG4gIHNldExvYWRpbmdQYXJhbXMoZXZlbnQ6IEZyb21QYXJhbSkge1xuICAgIHRoaXMuZnJvbS5uZXh0KGV2ZW50KTtcblxuICAgIHRoaXMub25QYWdlQ2hhbmdlKGV2ZW50LmZyb20pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBtZXRob2QgdG8gY2hhbmdlIHRoZSBzdGFydGluZyBwYWdlIHRvIHRoZSBmaXJzdCBvbmUuXG4gICAqL1xuICB1cGRhdGVDb252ZXJzYXRpb25zKCkge1xuICAgIHRoaXMuZnJvbS5uZXh0KEZpcnN0UGFnZSk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbiB0aGUgYENvbXBvc2UgTWVzc2FnZWAgbW9kYWwuXG4gICAqXG4gICAqIEBwYXJhbSBkcmFmdElkIERyYWZ0IGlkXG4gICAqL1xuICBjb21wb3NlKGRyYWZ0SWQ6IHN0cmluZykge1xuICAgIHRoaXMuc2hhcmVkLmV2ZW50QnVzUHVibGlzaCgnYmIuZXZlbnQubWVzc2FnZXMuY3JlYXRlLm1lc3NhZ2Uub3BlbicsIHsgZHJhZnRJZCB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsZXRlQ29udmVyc2F0aW9uc1N0cmVhbShpZHM6IHN0cmluZ1tdKTogT2JzZXJ2YWJsZTxDb252ZXJzYXRpb25UaHJlYWRzRGVsZXRlUmVzcG9uc2VCb2R5IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLm1haWxib3hUeXBlLnBpcGUoXG4gICAgICBmaWx0ZXIobWFpbGJveFR5cGUgPT4gbWFpbGJveFR5cGUgIT09IE1haWxib3hUeXBlRW51bS5kcmFmdHMpLFxuICAgICAgc3dpdGNoTWFwKCgpID0+IHRoaXMubWVzc2FnZXNTZXJ2aWNlLmRlbGV0ZUNvbnZlcnNhdGlvbnMoaWRzKSksXG4gICAgICB0YXAocmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlRGVsZXRpb24gPVxuICAgICAgICAgICAgcmVzcG9uc2UuZGVsZXRlZEl0ZW1zLmxlbmd0aCA+IDEgPyB0aGlzLm1lc3NhZ2VEZWxldGVTdWNjZXNzTXVsdGlwbGVUcGwgOiB0aGlzLm1lc3NhZ2VEZWxldGVTdWNjZXNzVHBsO1xuXG4gICAgICAgICAgdGhpcy5zaGFyZWQub3Blbk5vdGlmaWNhdGlvbihtZXNzYWdlRGVsZXRpb24pO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxldGVEcmFmdHNTdHJlYW0oaWRzOiBzdHJpbmdbXSk6IE9ic2VydmFibGU8RGVsZXRlRHJhZnRzUmVzcG9uc2VCb2R5IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLm1haWxib3hUeXBlLnBpcGUoXG4gICAgICBmaWx0ZXIobWFpbGJveFR5cGUgPT4gbWFpbGJveFR5cGUgPT09IE1haWxib3hUeXBlRW51bS5kcmFmdHMpLFxuICAgICAgc3dpdGNoTWFwKCgpID0+IHRoaXMubWVzc2FnZXNTZXJ2aWNlLmRlbGV0ZURyYWZ0cyhpZHMpKSxcbiAgICAgIHRhcChyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICAgIGNvbnN0IGRyYWZ0RGVsZXRpb24gPVxuICAgICAgICAgICAgcmVzcG9uc2UuZGVsZXRlZC5sZW5ndGggPiAxID8gdGhpcy5kcmFmdERlbGV0ZVN1Y2Nlc3NNdWx0aXBsZVRwbCA6IHRoaXMuZHJhZnREZWxldGVTdWNjZXNzVHBsO1xuXG4gICAgICAgICAgdGhpcy5zaGFyZWQub3Blbk5vdGlmaWNhdGlvbihkcmFmdERlbGV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGF0YShmcm9tOiBGcm9tUGFyYW0sIHNpemU6IG51bWJlciwgbWFpbGJveFR5cGU6IHN0cmluZyk6IE9ic2VydmFibGU8Q29udmVyc2F0aW9uc0RhdGFFeHBhbmRlZD4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdWJqZWN0PENvbnZlcnNhdGlvbnNEYXRhPigpO1xuXG4gICAgaWYgKG1haWxib3hUeXBlID09PSBNYWlsYm94VHlwZUVudW0uZHJhZnRzKSB7XG4gICAgICB0aGlzLmdldERyYWZ0cyh7IC4uLmZyb20sIHNpemUgfSkuc3Vic2NyaWJlKHJlcyA9PiByZXN1bHQubmV4dChyZXMgYXMgQ29udmVyc2F0aW9uc0RhdGEpKTtcbiAgICB9IGVsc2UgdGhpcy5nZXRDb252ZXJzYXRpb25zKHsgLi4uZnJvbSwgc2l6ZSwgbWFpbGJveFR5cGUgfSkuc3Vic2NyaWJlKHJlcyA9PiByZXN1bHQubmV4dChyZXMpKTtcblxuICAgIHJldHVybiByZXN1bHQucGlwZShtYXAoKHJlc3BvbnNlOiBDb252ZXJzYXRpb25zRGF0YSkgPT4gKHsgcGFyYW1zOiB7IC4uLmZyb20sIHNpemUsIG1haWxib3hUeXBlIH0sIC4uLnJlc3BvbnNlIH0pKSk7XG4gIH1cblxuICBwcml2YXRlIG1lcmdlQ29udmVyc2F0aW9uc0RhdGEoXG4gICAgYWNjOiBDb252ZXJzYXRpb25zRGF0YUV4cGFuZGVkLFxuICAgIGl0ZW1zOiBDb252ZXJzYXRpb25zRGF0YUV4cGFuZGVkLFxuICApOiBDb252ZXJzYXRpb25zRGF0YUV4cGFuZGVkIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGFyYW1zOiBhY2MucGFyYW1zLFxuICAgICAgZGF0YTogaXRlbXMucGFyYW1zLmZyb20gPyBbLi4uYWNjLmRhdGEsIC4uLml0ZW1zLmRhdGFdIDogaXRlbXMuZGF0YSxcbiAgICAgIHRvdGFsQ291bnQ6IGl0ZW1zLnRvdGFsQ291bnQsXG4gICAgfTtcbiAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJNZXNzYWdlc0NvbnZlcnNhdGlvbnNMaXN0Q3VzdG9taXphYmxlXScsXG59KVxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VzQ29udmVyc2F0aW9uc0xpc3RDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFxuICBNZXNzYWdlc0NvbnZlcnNhdGlvbnNMaXN0V2lkZ2V0Q29tcG9uZW50LFxuICBNZXNzYWdlc0NvbnZlcnNhdGlvbnNMaXN0V2lkZ2V0Q29udGV4dFxuPiB7fVxuIiwiPG5nLWNvbnRhaW5lclxuICBiYk1lc3NhZ2VzQ29udmVyc2F0aW9uc0xpc3RDdXN0b21pemFibGVcbiAgW2JiSG9zdFJlZl09XCJob3N0UmVmXCJcbiAgW2JiVGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICBjb252ZXJzYXRpb25zOiBjb252ZXJzYXRpb25zIHwgYXN5bmMsXG4gICAgbWFpbGJveFR5cGU6IG1haWxib3hUeXBlIHwgYXN5bmMsXG4gICAgaXRlbXNQZXJQYWdlOiBpdGVtc1BlclBhZ2UgfCBhc3luY1xuICB9XCJcbj48L25nLWNvbnRhaW5lcj5cblxuPG5nLXRlbXBsYXRlXG4gIGJiTWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdEN1c3RvbWl6YWJsZVxuICBsZXQtaG9zdFxuICBsZXQtY29udmVyc2F0aW9ucz1cImNvbnRleHQuY29udmVyc2F0aW9uc1wiXG4gIGxldC1tYWlsYm94VHlwZT1cImNvbnRleHQubWFpbGJveFR5cGVcIlxuICBsZXQtaXRlbXNQZXJQYWdlPVwiY29udGV4dC5pdGVtc1BlclBhZ2VcIlxuPlxuICA8ZGl2IGNsYXNzPVwiYmItbWVzc2FnZXMtY29udmVyc2F0aW9ucy1saXN0X19jb250YWluZXIgY2FyZCBjYXJkLWxnXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbnZlcnNhdGlvbnM/LmRhdGE7IGVsc2UgbG9hZGluZ1N0YXRlXCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWhvc3QuZXJyb3JSZXNwb25zZTsgZWxzZSBlcnJvclN0YXRlXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb252ZXJzYXRpb25zLmRhdGEubGVuZ3RoOyBlbHNlIGVtcHR5U3RhdGVcIj5cbiAgICAgICAgICA8YmItY29udmVyc2F0aW9ucy1saXN0LXRhYmxlLXVpXG4gICAgICAgICAgICBbY29udmVyc2F0aW9uc109XCJjb252ZXJzYXRpb25zLmRhdGFcIlxuICAgICAgICAgICAgW3Jlc2V0XT1cImhvc3QucmVzZXRTZWxlY3Rpb25cIlxuICAgICAgICAgICAgW21haWxib3hUeXBlXT1cImhvc3QubWFpbGJveFR5cGUgfCBhc3luY1wiXG4gICAgICAgICAgICBbY3VzdG9tZXJTZXJ2aWNlVGl0bGUkXT1cImhvc3QuY3VzdG9tZXJTZXJ2aWNlVGl0bGVcIlxuICAgICAgICAgICAgKHJlbW92ZSk9XCJob3N0LnJlbW92ZUNvbnZlcnNhdGlvbnMoJGV2ZW50KVwiXG4gICAgICAgICAgICAocmVhZCk9XCJob3N0Lm1hcmtBc1JlYWRVbnJlYWQoJGV2ZW50KVwiXG4gICAgICAgICAgICAoc2VsZWN0KT1cIlxuICAgICAgICAgICAgICBtYWlsYm94VHlwZSA9PT0gaG9zdC5tYWlsYm94VHlwZUVudW0uZHJhZnRzID8gaG9zdC5vcGVuRHJhZnQoJGV2ZW50KSA6IGhvc3Qub3BlbkNvbnZlcnNhdGlvbigkZXZlbnQpXG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgKHVwZGF0ZSk9XCJob3N0LnVwZGF0ZUNvbnZlcnNhdGlvbnMoKVwiXG4gICAgICAgICAgPjwvYmItY29udmVyc2F0aW9ucy1saXN0LXRhYmxlLXVpPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLTMgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxiYi1sb2FkLWJ1dHRvbi11aVxuICAgICAgICAgICAgICBbZnJvbV09XCJob3N0LmZyb20udmFsdWUuZnJvbVwiXG4gICAgICAgICAgICAgIFtpc0xvYWRpbmddPVwiaG9zdC5pc0xvYWRpbmdcIlxuICAgICAgICAgICAgICBbc2l6ZV09XCJpdGVtc1BlclBhZ2VcIlxuICAgICAgICAgICAgICBbdG90YWxDb3VudF09XCJjb252ZXJzYXRpb25zLnRvdGFsQ291bnRcIlxuICAgICAgICAgICAgICAocGFyYW1DaGFuZ2UpPVwiaG9zdC5zZXRMb2FkaW5nUGFyYW1zKCRldmVudClcIlxuICAgICAgICAgICAgICBkYXRhLXJvbGU9XCJsb2FkLW1vcmUtYnV0dG9uXCJcbiAgICAgICAgICAgICAgaTE4bj1cIkxvYWQgbW9yZSBidXR0b24gbmFtZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdC5sb2FkTW9yZUJ1dHRvblwiXG4gICAgICAgICAgICAgID5Mb2FkIG1vcmU8L2JiLWxvYWQtYnV0dG9uLXVpXG4gICAgICAgICAgICA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvZGl2PlxuXG4gIDxuZy10ZW1wbGF0ZSAjZW1wdHlTdGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiYmItc3RhdGUtY29udGFpbmVyXCI+XG4gICAgICA8bmctY29udGFpbmVyIFtuZ1N3aXRjaF09XCJtYWlsYm94VHlwZVwiPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCJob3N0Lm1haWxib3hUeXBlRW51bS5kcmFmdHNcIj5cbiAgICAgICAgICA8YmItZW1wdHktc3RhdGUtdWlcbiAgICAgICAgICAgIGkxOG4tdGl0bGU9XCJFbXB0eSBzdGF0ZSB0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdC5kcmFmdHNFbXB0eVN0YXRlVGl0bGVcIlxuICAgICAgICAgICAgdGl0bGU9XCJObyBEcmFmdHNcIlxuICAgICAgICAgICAgaTE4bi1zdWJ0aXRsZT1cIkVtcHR5IHN0YXRlIHN1YnRpdGxlQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvbnNMaXN0LmRyYWZ0c0VtcHR5U3RhdGVTdWJUaXRsZVwiXG4gICAgICAgICAgICBzdWJ0aXRsZT1cIllvdSBkb24ndCBoYXZlIGFueSBkcmFmdHMgdG8gYmUgZGlzcGxheWVkLlwiXG4gICAgICAgICAgICBpY29uTW9kaWZpZXI9XCJlbWFpbFwiXG4gICAgICAgICAgICBpY29uQ29sb3I9XCJtdXRlZFwiXG4gICAgICAgICAgPjwvYmItZW1wdHktc3RhdGUtdWk+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCJob3N0Lm1haWxib3hUeXBlRW51bS5vdXRib3hcIj5cbiAgICAgICAgICA8YmItZW1wdHktc3RhdGUtdWlcbiAgICAgICAgICAgIGkxOG4tdGl0bGU9XCJFbXB0eSBzdGF0ZSB0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdC5lbXB0eVN0YXRlVGl0bGVcIlxuICAgICAgICAgICAgdGl0bGU9XCJObyBTZW50IE1lc3NhZ2VzXCJcbiAgICAgICAgICAgIGkxOG4tc3VidGl0bGU9XCJFbXB0eSBzdGF0ZSBzdWJ0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdC5lbXB0eVN0YXRlU3VidGl0bGVcIlxuICAgICAgICAgICAgc3VidGl0bGU9XCJZb3UgZG9uJ3QgaGF2ZSBhbnkgc2VudCBtZXNzYWdlcyB0byBiZSBkaXNwbGF5ZWQuXCJcbiAgICAgICAgICAgIGljb25Nb2RpZmllcj1cImVtYWlsXCJcbiAgICAgICAgICAgIGljb25Db2xvcj1cIm11dGVkXCJcbiAgICAgICAgICA+PC9iYi1lbXB0eS1zdGF0ZS11aT5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoRGVmYXVsdD5cbiAgICAgICAgICA8YmItZW1wdHktc3RhdGUtdWlcbiAgICAgICAgICAgIGkxOG4tdGl0bGU9XCJFbXB0eSBzdGF0ZSB0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdC5zaW1wbGVFbXB0eVN0YXRlVGl0bGVcIlxuICAgICAgICAgICAgdGl0bGU9XCJObyBDb252ZXJzYXRpb25zXCJcbiAgICAgICAgICAgIGkxOG4tc3VidGl0bGU9XCJFbXB0eSBzdGF0ZSBzdWJ0aXRsZUBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25zTGlzdC5zaW1wbGVFbXB0eVN0YXRlU3ViVGl0bGVcIlxuICAgICAgICAgICAgc3VidGl0bGU9XCJZb3UgZG9uJ3QgaGF2ZSBhbnkgY29udmVyc2F0aW9ucyB0byBiZSBkaXNwbGF5ZWQuXCJcbiAgICAgICAgICAgIGljb25Nb2RpZmllcj1cImVtYWlsXCJcbiAgICAgICAgICAgIGljb25Db2xvcj1cIm11dGVkXCJcbiAgICAgICAgICA+PC9iYi1lbXB0eS1zdGF0ZS11aT5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2Vycm9yU3RhdGU+XG4gICAgPGJiLW1lc3NhZ2VzLXJlcXVlc3QtZXJyb3IgW2Vycm9yXT1cImhvc3QuZXJyb3JSZXNwb25zZVwiPjwvYmItbWVzc2FnZXMtcmVxdWVzdC1lcnJvcj5cbiAgPC9uZy10ZW1wbGF0ZT5cblxuICA8bmctdGVtcGxhdGUgI2xvYWRpbmdTdGF0ZT5cbiAgICA8YmItbG9hZGluZy1pbmRpY2F0b3ItdWkgY2xhc3M9XCJweS00XCIgbG9hZGVyU2l6ZT1cIm1kXCI+PC9iYi1sb2FkaW5nLWluZGljYXRvci11aT5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjbWVzc2FnZURlbGV0ZVN1Y2Nlc3M+XG4gIDxzcGFuXG4gICAgaTE4bj1cIlxuICAgICAgWW91ciBjb252ZXJzYXRpb24gaGFzIGJlZW4gZGVsZXRlZCBzdWNjZXNzZnVsbHkufFRleHQgb2Ygc3VjY2Vzc2Z1bCBjb252ZXJzYXRpb25cbiAgICAgIGRlbGV0aW9uQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvbkxpc3QubWVzc2FnZVN1Y2Nlc3NEZWxldGVcIlxuICAgID5Zb3VyIGNvbnZlcnNhdGlvbiBoYXMgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseS48L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNtZXNzYWdlRGVsZXRlU3VjY2Vzc011bHRpcGxlPlxuICA8c3BhblxuICAgIGkxOG49XCJcbiAgICAgIFlvdXIgY29udmVyc2F0aW9ucyBoYXZlIGJlZW4gZGVsZXRlZCBzdWNjZXNzZnVsbHkufFRleHQgb2Ygc3VjY2Vzc2Z1bCBjb252ZXJzYXRpb25zXG4gICAgICBkZWxldGlvbkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25MaXN0Lm1lc3NhZ2VEZWxldGVTdWNjZXNzTXVsdGlwbGVEZWxldGVcIlxuICAgID5Zb3VyIGNvbnZlcnNhdGlvbnMgaGF2ZSBiZWVuIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Ljwvc3BhblxuICA+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI2RyYWZ0RGVsZXRlU3VjY2Vzcz5cbiAgPHNwYW5cbiAgICBpMThuPVwiXG4gICAgICBZb3VyIGRyYWZ0IGhhcyBiZWVuIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5LnxUZXh0IG9mIHN1Y2Nlc3NmdWwgZHJhZnRcbiAgICAgIGRlbGV0aW9uQEBtZXNzYWdlcy5tZXNzYWdlc0NvbnZlcnNhdGlvbkxpc3QuZHJhZnRTdWNjZXNzRGVsZXRlXCJcbiAgICA+WW91ciBkcmFmdCBoYXMgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseS48L3NwYW5cbiAgPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNkcmFmdERlbGV0ZVN1Y2Nlc3NNdWx0aXBsZT5cbiAgPHNwYW5cbiAgICBpMThuPVwiXG4gICAgICBZb3VyIGRyYWZ0IGhhdmUgYmVlbiBkZWxldGVkIHN1Y2Nlc3NmdWxseS58VGV4dCBvZiBzdWNjZXNzZnVsIGRyYWZ0XG4gICAgICBkZWxldGlvbkBAbWVzc2FnZXMubWVzc2FnZXNDb252ZXJzYXRpb25MaXN0LmRyYWZ0RGVsZXRlU3VjY2Vzc011bHRpcGxlRGVsZXRlXCJcbiAgICA+WW91ciBkcmFmdHMgaGF2ZSBiZWVuIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Ljwvc3BhblxuICA+XG48L25nLXRlbXBsYXRlPlxuIl19