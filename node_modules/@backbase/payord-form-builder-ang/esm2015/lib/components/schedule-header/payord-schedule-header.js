import { Component } from '@angular/core';
import { Frequencies, PaymentFormFieldHooks, getRelativeDate, getDateOnly, ScheduleEndType, } from '@backbase/payment-orders-ang';
import { triggerHook } from '../../helpers/hooks-helpers';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class PayordScheduleHeaderComponent {
    constructor() {
        this.minOccurrences = 2;
        this.endType = ScheduleEndType;
        this.frequencies = Frequencies;
    }
    isToday(startDate) {
        const today = getRelativeDate();
        const date = getDateOnly(new Date(startDate));
        return date === today;
    }
    ngOnInit() {
        var _a;
        this.dateFormat = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.dateFormat) || 'd MMM y';
        triggerHook(PaymentFormFieldHooks.onInit, this);
    }
    ngOnDestroy() {
        triggerHook(PaymentFormFieldHooks.onDestroy, this);
    }
}
/** @nocollapse */ PayordScheduleHeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: PayordScheduleHeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
/** @nocollapse */ PayordScheduleHeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: PayordScheduleHeaderComponent, selector: "bb-payord-schedule-header", ngImport: i0, template: "<div\n  class=\"bb-dynamic-input bb-schedule-header bb-fieldset__heading\"\n  *ngIf=\"!config?.hidden\"\n  [ngClass]=\"options?.cssClasses\"\n>\n  <ng-container\n    *ngIf=\"(group?.value?.frequency?.value || group?.value?.frequency) as freq\"\n  >\n    <span>\n      <ng-container *ngIf=\"options?.label\">{{options?.label}}</ng-container>\n      <ng-container\n        *ngIf=\"!options?.label\"\n        i18n=\"@@dynamic-form-field-schedule-header.default-title\"\n        >Schedule</ng-container\n      >\n    </span>\n    <span class=\"bb-schedule-header__text\">\n      <span> - </span>\n      <span i18n=\"@@dynamic-form-field-schedule-header.frequency\"\n        >{ freq, select, DAILY {Daily} WEEKLY {Weekly} BIWEEKLY {Bi-Weekly}\n        MONTHLY {Monthly} QUARTERLY {Quarterly} YEARLY {Annually} }</span\n      >\n      <ng-container *ngIf=\"freq === frequencies.ONCE\">\n        <span>\n          {{ group?.value?.startDate | date: dateFormat }}\n          <span\n            class=\"bb-schedule-header__relative-text\"\n            *ngIf=\"isToday(group?.value?.startDate)\"\n            i18n=\"@@dynamic-form-field-schedule-header.today\"\n          >\n            (Today)\n          </span>\n        </span>\n      </ng-container>\n\n      <ng-container *ngIf=\"freq !== frequencies.ONCE\">\n        <span class=\"bb-schedule-header__sepatator\">,</span>\n        <span i18n=\"@@dynamic-form-field-schedule-header-from.label\">\n          from\n        </span>\n        <span>{{group?.value?.startDate | date: dateFormat}}</span>\n        <ng-container\n          *ngIf=\"group?.value?.endType === endType.ON && group?.value?.endDate\"\n        >\n          <span> - </span>\n          <span> {{group?.value?.endDate | date: dateFormat}}</span>\n        </ng-container>\n        <ng-container\n          *ngIf=\"group?.value?.endType === endType.AFTER && group?.value?.repeat\"\n        >\n          <span>, </span> <span> {{ group?.value?.repeat }} </span>\n          <span i18n=\"@@dynamic-form-field-schedule-header-occurances.label\">\n            times</span\n          >\n        </ng-container>\n      </ng-container>\n    </span>\n  </ng-container>\n  <hr class=\"bb-schedule-header__sepatator\" />\n</div>\n", directives: [{ type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], pipes: { "date": i1.DatePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: PayordScheduleHeaderComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-payord-schedule-header',
                    templateUrl: './payord-schedule-header.html',
                }]
        }] });
//# sourceMappingURL=payord-schedule-header.js.map