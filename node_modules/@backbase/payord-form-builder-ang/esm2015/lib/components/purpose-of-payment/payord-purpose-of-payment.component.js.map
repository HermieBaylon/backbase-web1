{"version":3,"file":"payord-purpose-of-payment.component.js","sourceRoot":"","sources":["../../../../../../../libs/payord-form-builder-ang/src/lib/components/purpose-of-payment/payord-purpose-of-payment.component.ts","../../../../../../../libs/payord-form-builder-ang/src/lib/components/purpose-of-payment/payord-purpose-of-payment.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,SAAS,EAAqB,MAAM,eAAe,CAAC;AAE7D,OAAO,EAIL,qBAAqB,EACrB,oBAAoB,EACpB,iBAAiB,GAClB,MAAM,8BAA8B,CAAC;AACtC,OAAO,EAAE,mBAAmB,EAAE,MAAM,4BAA4B,CAAC;AACjE,OAAO,EAAE,WAAW,EAAE,MAAM,6BAA6B,CAAC;;;;;;;;;AAM1D,MAAM,OAAO,+BAA+B;IAQ1C,YAA6B,KAA8B;QAA9B,UAAK,GAAL,KAAK,CAAyB;IAAG,CAAC;IAE/D,QAAQ;QACN,IAAI,CAAC,OAAO;YACV,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,oBAAoB,CAAC,gBAAgB,CAAC;gBACrD,mBAAmB,CACjB,IAAI,CAAC,KAAK,EACV,IAAI,CAAC,MAAM,CAAC,IAAI,EAChB,IAAI,CAAC,OAAO,CAAC,UAAU,EACvB,IAAI,CAAC,OAAO,CAAC,eAAe,EAC5B,IAAI,CAAC,OAAO,CAAC,YAAY,EACzB,IAAI,CAAC,MAAM,CACZ,CAAC;QAEJ,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK;YAC3C,CAAC,CAAC,KAAK;YACP,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,KAAK,SAAS;gBACxC,CAAC,CAAC,IAAI;gBACN,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;QAE7B,WAAW,CAAC,qBAAqB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IAClD,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;QACjC,iBAAiB,CAAC,eAAe,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;IAC/D,CAAC;IAED,aAAa,CAAC,OAAe;QAC3B,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC;IAED,WAAW;QACT,WAAW,CAAC,qBAAqB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACrD,CAAC;;gJA1CU,+BAA+B;oIAA/B,+BAA+B,oEClB5C,q/HA6GA;4FD3Fa,+BAA+B;kBAJ3C,SAAS;mBAAC;oBACT,QAAQ,EAAE,8BAA8B;oBACxC,WAAW,EAAE,4CAA4C;iBAC1D","sourcesContent":["import { ElementRef } from '@angular/core';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormGroup, AbstractControl } from '@angular/forms';\nimport {\n  PaymentFormField,\n  PaymentFormFieldConfig,\n  PaymentFormFieldOptions,\n  PaymentFormFieldHooks,\n  RemittanceInfoFields,\n  focusChildElement,\n} from '@backbase/payment-orders-ang';\nimport { registerFormControl } from '../../helpers/form-helpers';\nimport { triggerHook } from '../../helpers/hooks-helpers';\n\n@Component({\n  selector: 'bb-payord-purpose-of-payment',\n  templateUrl: './payord-purpose-of-payment.component.html',\n})\nexport class PayordPurposeOfPaymentComponent\n  implements PaymentFormField, OnInit, OnDestroy\n{\n  config!: PaymentFormFieldConfig;\n  group!: FormGroup;\n  options!: PaymentFormFieldOptions;\n  control!: AbstractControl;\n\n  constructor(private readonly elRef: ElementRef<HTMLElement>) {}\n\n  ngOnInit() {\n    this.control =\n      this.group.get(RemittanceInfoFields.purposeOfPayment) ||\n      registerFormControl(\n        this.group,\n        this.config.name,\n        this.options.validators,\n        this.options.asyncValidators,\n        this.options.defaultValue,\n        this.config\n      );\n\n    this.options.isCollapsed = this.control.value\n      ? false\n      : this.options.isCollapsed === undefined\n      ? true\n      : this.options.isCollapsed;\n\n    triggerHook(PaymentFormFieldHooks.onInit, this);\n  }\n\n  expand() {\n    this.options.isCollapsed = false;\n    focusChildElement('.form-control', this.elRef.nativeElement);\n  }\n\n  selectPurpose(purpose: string) {\n    this.control.setValue(purpose);\n  }\n\n  ngOnDestroy() {\n    triggerHook(PaymentFormFieldHooks.onDestroy, this);\n  }\n}\n","<ng-container\n  *ngIf=\"control?.value || !options?.isCollapsed; else collapsedTmpl\"\n>\n  <div\n    class=\"bb-dynamic-input form-group\"\n    [formGroup]=\"group\"\n    [ngClass]=\"options?.cssClasses\"\n  >\n    <div [hidden]=\"config?.hidden\" [attr.aria-hidden]=\"config?.hidden\">\n      <ng-container *ngIf=\"!options?.purposes || !options?.purposes.length\">\n        <label\n          class=\"bb-dynamic-input__label\"\n          data-role=\"purpose-of-payment-label\"\n          [id]=\"inputEl?.id + '__label'\"\n          [for]=\"inputEl?.id\"\n          [textContent]=\"options?.label || ''\"\n        ></label>\n        <span\n          class=\"bb-dynamic-input__helper-text bb-text-support\"\n          data-role=\"purpose-of-payment-optional-label\"\n          *ngIf=\"options?.isOptional && options?.helperText\"\n          [id]=\"inputEl?.id + '__desc'\"\n          [textContent]=\"options?.helperText\"\n        >\n        </span>\n\n        <bb-input-text-ui\n          #inputEl\n          [formControlName]=\"config.name\"\n          [attr.disabled]=\"options?.disabled\"\n          [minLength]=\"options?.minLength\"\n          [maxLength]=\"options?.maxLength\"\n          [showCharCounter]=\"options?.showCharCounter\"\n          [attr.id]=\"options?.id\"\n          [placeholder]=\"options?.placeholder || ''\"\n          [autocomplete]=\"options?.autoComplete\"\n          [attr.autofocus]=\"options?.autofocus\"\n          [attr.readonly]=\"options?.readonly\"\n          [aria-describedby]=\"descElem?.id\"\n          data-role=\"purpose-of-payment-selector\"\n        ></bb-input-text-ui>\n\n        <div\n          #descElem\n          class=\"bb-dynamic-input__desc bb-text-support bb-subtitle\"\n          [attr.aria-hidden]=\"!options?.description\"\n          [hidden]=\"!options?.description\"\n          [id]=\"inputEl?.id + '__desc'\"\n          [textContent]=\"options?.description || ''\"\n        ></div>\n      </ng-container>\n\n      <ng-container *ngIf=\"options?.purposes?.length\">\n        <bb-select-purpose-dropdown\n          [formControlName]=\"config?.name\"\n          [label]=\"options?.label\"\n          [purposes]=\"options?.purposes\"\n          [isOptional]=\"options?.isOptional\"\n          [helperText]=\"options?.helperText\"\n          [placeholder]=\"options?.placeholder\"\n          [searchPlaceholder]=\"options?.searchPlaceholder\"\n          [dropdownIcon]=\"options?.dropdownIcon\"\n          [selectedPurpose]=\"control.value\"\n          (selectPurpose)=\"selectPurpose($event)\"\n          data-role=\"purpose-of-payment-selector-dropdown\"\n        ></bb-select-purpose-dropdown>\n      </ng-container>\n\n      <bb-payord-validation-message\n        [control]=\"group?.controls[config.name]\"\n        [validationMessages]=\"options?.validationMessages\"\n        [label]=\"options?.label\"\n      ></bb-payord-validation-message>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #collapsedTmpl>\n  <span\n    class=\"bb-dynamic-input__collapse-btn-container\"\n    [hidden]=\"config?.hidden\"\n    [attr.aria-hidden]=\"config?.hidden\"\n  >\n    <button\n      class=\"bb-dynamic-input__collapse-btn\"\n      data-role=\"purpose-of-payment-btn\"\n      bbButton\n      [color]=\"options?.collapseOptions?.btnColor || 'link'\"\n      [buttonSize]=\"options?.collapseOptions?.btnSize\"\n      (click)=\"expand()\"\n    >\n      <bb-icon-ui\n        class=\"bb-dynamic-input__collapse-btn-icon mr-2\"\n        *ngIf=\"!options?.collapseOptions?.hideIcon\"\n        [name]=\"options?.collapseOptions?.icon || 'add'\"\n        [size]=\"options?.collapseOptions?.iconSize\"\n      >\n      </bb-icon-ui>\n      <span class=\"bb-dynamic-input__collapse-btn-label\">\n        {{ options?.collapseOptions?.label || options?.label }}\n      </span>\n    </button>\n    <bb-payord-validation-message\n      [control]=\"group?.controls[config.name]\"\n      [validationMessages]=\"options?.validationMessages\"\n      [label]=\"options?.label\"\n    ></bb-payord-validation-message>\n  </span>\n</ng-template>\n"]}