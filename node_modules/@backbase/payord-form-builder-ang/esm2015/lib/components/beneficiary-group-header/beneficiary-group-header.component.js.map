{"version":3,"file":"beneficiary-group-header.component.js","sourceRoot":"","sources":["../../../../../../../libs/payord-form-builder-ang/src/lib/components/beneficiary-group-header/beneficiary-group-header.component.ts","../../../../../../../libs/payord-form-builder-ang/src/lib/components/beneficiary-group-header/payord-beneficiary-group-header.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup } from '@angular/forms';\nimport {\n  PaymentFormFieldConfig,\n  PaymentFormField,\n  PaymentFormFieldOptions,\n  Hideable,\n  PaymentFormFieldHooks,\n  resetBeneficiaryDetails,\n  CounterPartyFields,\n  PaymentBaseFields,\n  InitiatorFields,\n  HiddenFields,\n} from '@backbase/payment-orders-ang';\nimport { triggerHook } from '../../helpers/hooks-helpers';\nimport { registerFormControl } from '../../helpers/form-helpers';\n\n@Component({\n  selector: 'bb-payord-beneficiary-header',\n  templateUrl: './payord-beneficiary-group-header.component.html',\n})\nexport class PayordBeneficiaryGroupHeaderComponent\n  implements PaymentFormField, OnInit, OnDestroy\n{\n  options!: PaymentFormFieldOptions;\n  config!: PaymentFormFieldConfig & Hideable;\n  group!: FormGroup;\n  iconName = 'clear';\n  hideBeneficiaryFieldsControl!: AbstractControl;\n  private initiatorIdControl!: AbstractControl;\n\n  ngOnInit() {\n    this.hideBeneficiaryFieldsControl = registerFormControl(\n      this.group,\n      HiddenFields.hideBeneficiaryFields\n    );\n    this.initiatorIdControl = <FormControl>(\n      this.group.parent?.get([PaymentBaseFields.initiator, InitiatorFields.id])\n    );\n    triggerHook(PaymentFormFieldHooks.onInit, this);\n  }\n\n  onClearValues() {\n    const parentGroup = this.group.parent as FormGroup;\n    const nameControl = <FormControl>(\n      parentGroup.get([PaymentBaseFields.initiator, InitiatorFields.name])\n    );\n    if (nameControl.value) {\n      nameControl.setErrors(null);\n    }\n    if (typeof this.options?.clearOptions?.onClear === 'function') {\n      this.options.clearOptions.onClear(this.group);\n    } else {\n      resetBeneficiaryDetails(this.group);\n    }\n\n    this.hideBeneficiaryFieldsControl?.setValue(true);\n    this.initiatorIdControl?.updateValueAndValidity();\n  }\n\n  showClearBtn() {\n    const accountName = this.group.get(CounterPartyFields.name);\n    const accountNumber = this.group.get(CounterPartyFields.accountNumber);\n    const bankBranchCode = this.group.get([\n      CounterPartyFields.creditorBank,\n      CounterPartyFields.bankBranchCode,\n    ]);\n    const bic = this.group.get([\n      CounterPartyFields.creditorBank,\n      CounterPartyFields.bic,\n    ]);\n    return (\n      accountName?.value ||\n      accountNumber?.value ||\n      bankBranchCode?.value ||\n      bic?.value\n    );\n  }\n\n  ngOnDestroy() {\n    triggerHook(PaymentFormFieldHooks.onDestroy, this);\n  }\n}\n","<div\n  *ngIf=\"config?.options?.label\"\n  class=\"bb-stack\"\n  [ngClass]=\"options?.cssClasses\"\n>\n  <legend class=\"bb-inline-stack__item bb-fieldset__heading break-word\">\n    <ng-container *ngIf=\"!group?.value?.name\">{{\n      options?.label\n    }}</ng-container>\n    <ng-container *ngIf=\"group?.value?.name && options?.hasDynamicTitle\">\n      <span>{{ options?.label }}: {{ group?.value?.name }}</span>\n      <span\n        *ngIf=\"\n          group?.value?.selectedContact?.contactId &&\n          group?.value?.beneficiaryAccountName\n        \"\n      >\n        - {{ group?.value?.beneficiaryAccountName }}\n      </span>\n    </ng-container>\n  </legend>\n  <button\n    *ngIf=\"showClearBtn()\"\n    class=\"bb-stack__item--push-right\"\n    bbButton\n    color=\"link\"\n    (click)=\"onClearValues()\"\n    data-role=\"clear-beneficiary-button\"\n  >\n    <bb-icon-ui [name]=\"options?.clearOptions?.icon || iconName\"></bb-icon-ui>\n    <span *ngIf=\"options?.clearOptions?.label\">{{\n      options?.clearOptions?.label\n    }}</span>\n    <span\n      *ngIf=\"!options?.clearOptions?.label\"\n      i18n=\"@@dynamic-form-field-beneficiary-header.label\"\n      >Clear</span\n    >\n  </button>\n</div>\n"]}