# Changelog

All notable changes to this project will be documented in this file.

This project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

## 10.0.2

### Fixed 

- Return only active cards for travel notice from cards service get travel notice method [NVCTS-825]

## 10.0.1

### Added

- Exported missing interfaces [NVCTS-826]

## 10.0.0

### Added

- Updated to Angular 12 [NVCTS-707]
- Removed `viewChild` deprecations from notifications logic [NVCTS-768] 

## 9.3.0

### Added

- Display loading indicator on card limits when API call is being processed [NVCTS-598]
- Reworked limit value display so it doesn't remember failed inputs [NVCTS-598]

## 9.2.2

### Fixed

- Added a `minLength` of `3` to activation card modal [NVCTS-606]
- Added a `minLength` of `3` to request new pin modal [NVCTS-606]
- Added a `minLength` of `3` to reset pin modal [NVCTS-606]

## 9.2.1

### Modified

- Replaced "Deactivated" keyword to "Cancelled" and ui logic updated [NVCTS-554]

## 9.2.0

### Modified

- Limit update now only sends the the updated limit and not all of them [NVCTS-597]

### Added

- New model for the limit update emitter [NVCTS-597]

## 9.1.1

### Added

- Added data-role identificators to facilitate e2e testing [NVCTS-494]

## 9.1.0

### Modified

- Replaced notifications logic to use `$localize` instead of `viewChild` to the template [NVCTS-307]

### Deprecation Warning

- All `viewchild` properties in `payment-card` to be removed in favor of `localization` object [NVCTS-307]


## 9.0.1

### Modified

- Updated dependencies [NOJIRA]

## 9.0.0

### Added

- Updated to Angular 11 [NVCTS-37]

### Modified

- Removed deprecated `bb-error-state-ui` component in favor of `bb-empty-state-ui` [NVCTS-37]
- Replaced `hideDecimals` input used by `bb-amount-ui` in `bb-payment-card-limit` in favor of `decimalPlaces = 0` [NVCTS-37]
- Updated `PaymentCard` model so `cardName` and `expirationDate` are required as intended [NVCTS-37]
- Updated Card Backed Service `itemToModel` to have fallback values according to previous point [NVCTS-37]
- `errors` input from `bb-payment-card-multiple-error-state` now has the intended `CardsBackendError[]` type instead of `Error[]` [NVCTS-37]

## 8.2.0

### Added

- Created `bb-payment-card-multiple-error-state` component [NVCTS-45]

## 8.1.0

### Added

- Prepared widget for journeys [NVCTS-43]

## 8.0.3

### Fixed

- Add support for multiple http response errors [MAINT-10443]

## [8.0.2]

### Fixed

- Use more descriptive messages for HTTP errors

## [8.0.1]

### Fixed

- Remove unused imports and fix unit tests

## [8.0.0]

### Changed

- Update data modules to use a new prefix

## [7.0.0]

### Changed

- Remove excluded fields from reset pin functionality

## [6.0.0]

### Changed

- Use new data module for Http requests

### Fixed

- Removed unnecessary parameters from reset pin.

## 5.0.0

### Updated

- Updated to angular 10 and foundation-ang 6

## 4.1.1

### Fix

- Set specific types to services

## 4.1.0

### Added

- Added dynamic Card Types given the `groupByPaymentCardTypes` preference

## 4.0.0

### Updated

- Updated foundation-ang peer dependency to v5.0.0

## 3.2.0

### Added

- Added CXP property `notificationTtl` to configure notifications timeout

## 3.1.0

### Added

- `ui-ang` added as peerDependency on widgets

### Changed 

- `ui-ang` imports are now made directly instead of using `foundation-ang` [TRANS-4669]

## 3.0.6

### Fixed 

- added more descriptive aria-label and FocusModule [TRANS-3753]
- changed bb-button-ui to new bbButton directive [TRANS-3753]

## 3.0.5

### Fixed 

- updated destinations list [TRANS-3881]

### 3.0.4

## Fixed

- Modal Description will be displayed conditionally only on the first step [TRANS-3841]

## 3.0.3

### Fixed 

- Added accessibility roles for `bb-payment-card-initiate-replacement` [TRANS-3752]

### 3.0.2

## Fixed

- Fixed texts in Reset PIN flow [TRANS-3656]
- Reworked text disposition on replacement modal [TRANS-3656]

## 3.0.1

## Fix

- Increase code coverage `[TRANS-3681]`

## 3.0.0

## Added 

- Added Bem classes for `payment-card-state-wrapper` [TRANS-3468]
- Migrated `cards-common-ang` to `Theme V2` [TRANS-2928]
- Reverted modal migration as it was expected on [TRANS-2720]
- Migrated `bb-payment-card-reset-pin`, `bb-payment-card-initiate-activation`, and `bb-payment-card-initiate-replacement` [TRANS-2720]

## Fixed

- Warnings on unit test for missing labels and deprecated background use
- Proper small text on card limit [TRANS-3656]
- Card State Wrapper no longer uses `bb-block--sm` but instead a proper BEM class [TRANS-3656]
- Removed subtitle color from `delivery tracker` dates [TRANS-3656]

## Changed

- Delivery tracker which will now use the Checked icon when the status is COMPLETED. To be improved [TRANS-3656]

## 2.14.0

## Added

- Added all the missing descriptions to `i18n` tags [TRANS-1796]

## 2.13.0

## Added

- Add `deleteTravelNotice` service and `travelNoticeDeleteHook` [TRANS-2605]
- Added configurations for the new Jenkins Pipeline.

## 2.12.2

## Fixed 

- Add string type to travel notice date properties [TRANS-3097]

## 2.12.1

### Added

- Remove invalid countries from default destionations service [TRANS-2980]

## 2.12.0

### Added

- Adjust country list to include only one element of each country code [TRANS-2648]

## 2.11.1

## Fixed 

- updated `destinations.ts`

## 2.11.0

## Added 

- Added `Travel notice post` logic [TRANS-2602]

## 2.10.1

## Fixed

- updated `destinations.ts` with compliant data [TRANS-2827]

## 2.10.0

## Added

- Travel notice countries implementation [TRANS-2770]

## 2.7.0

## Added 

- Added `/travel-notice` endpoint and mocks [TRANS-2603]

## 2.6.0

### Fixed

- activation button now changed to be primary to be more compliant with the design [TRANS-2581]

## 2.5.0

### Added

- Added `PaymentCardLimitChannelToken` for overriding the limit channels mapping configs [TRANS-2463]

## 2.4.0

- Accessibility compliance [TRANS-2568]

## 2.3.0

### Added 

- added `bbAccessibilityKeyboard` [TRANS-2562]

## 2.2.2

### Fix

- Remove i18n from interpolation

## 2.2.1

### Fix

- Format amounts and adding spacing to words for limits

## 2.2.0

### Added

- Implemented `bb-input-inline-edit-ui` and templates

## 2.1.3

- Fix i18n in cards controls

## 2.1.2

### Fixed

- Fix i18n in reset PIN

## 2.1.1

### Fixed

- Fixed reset PIN issue when a server error happens and the loader gets stuck [TRANS-2280]

## 2.1.0

### Added

- Added reset PIN [TRANS-2280]

## 2.0.0

### Dependency updates 

- Migrate to `angular@8.0.0` [TRANS-2306]

## 2.0.0-beta.2 (18-06-2019)

### Fixed
- Fix i18n issues
- Fixes for `payment-card-initiate-activation` [TRANS-2225] 

## 2.0.0-beta.1 (11-06-2019)

### Dependency updates 

- Migrate to `angular@8.0.0` [TRANS-2255]

## 2.0.0-beta.0 (07-05-2019)

### Dependency updates

- Migrate to `angular@8.0.0` [TRANS-2024]
- Migrate to `@backbase/foundation-ang@4.0.0` [TRANS-2024]

## 1.16.0 (03-06-2019)

### Added 

- Added `PaymentCardLimitsComponent` and `PaymentCardLimitComponent` for card limits [TRANS-2081]

## 1.15.0 (21-05-2019)

### Added

- Added icon mapping for delivery tracker

## 1.14.0 (18-05-2019)

### Added

- Added delivery tracking for card details

## 1.13.0 (17-05-2019)

### Added 

- Export components exposed in customization templates in public_api.ts [TRANS-2182]

## 1.12.1 (14-05-2019)

### Added

- Reorganized E2E tests (performance and stability improvements) [TRANS-2139]

## 1.12.0 (09-05-2019)

### Added

- Added translation for payment cards notification messages
- Added delivery status to `PaymentCard` model [TRANS-2057]

## 1.11.0 (09-05-2019)

### Added

- Updated mocks to include an example for delivery status tracking [TRANS-2057]

## 1.10.3 (07-05-2019)

### Fixed

- Add `Inactive` state status

## 1.10.2 (07-05-2019)

### Fixed

- Run formatter against `prettier@1.17.0`

## 1.10.1 (02-05-2019)

### Fixed

- Module now imports individual UI modules instead of entire `BackbaseUiModule` [TRANS-2129]
- Used UI modules are now exported by widget module, so app using widget module does not have to
  import them separately [TRANS-2129]

## 1.10.0 (01-05-2019)

### Added

- Added `bbCardsInitiateReplacementCustomizable` customizable template
- Added `bbCardsInitiateReplacementFormCustomizable` customizable template
- Added `bbCardsInitiateActivationCustomizable` customizable template [TRANS-2080]
- Added `bbCardsInitiateActivationFormCustomizable` customizable template [TRANS-2080]

### Changed

- Now that they are public, and since they are local, field names in replacement and activation
  components were simplified (so `isReplacementModalOpen` is renamed to `isModalOpen`, etc.)

## 1.9.0 (26-04-2019)

### Added

- Added `PaymentCardInitiateActivationComponent` [TRANS-2080]
- Added mocks for a POST request to the `/activation` endpoint [TRANS-2080]

### Changed

- Mock data changed to include an inactive card [TRANS-2080]

## 1.8.0 (26-04-2019)

### Dependency updates

- Upgrade to `@backbase/data-ang@3.2.1`

### Added

- Added `PaymentCardContainerBase#onInitiateActivation` function to activate a card using a token
  [TRANS-2080]

## 1.7.0 (18-04-2019)

### Changed

- Card management detail page to act based on the card status

## 1.6.1 (10-04-2019)

### Changed

- Mock data changed to include a cancelled card [TRANS-2000]

## 1.6.0 (28-03-2019)

### Added

- Added `PaymentCardInitiateReplacementComponent` [TRANS-1998]

## 1.5.2 (26-03-2019)

### Fixes

- On replacement success, apply `replacementStatus` from the response instead of a hardcoded one

## 1.5.1 (25-03-2019)

### Changed

- Minor linting fix

## 1.5.0 (22-03-2019)

### Changed

- Added `PaymentCardControlsBase`, containing lock/replace functionality, meant to be extended in 
list/details widgets [TRANS-1968]

## 1.4.0 (18-03-2019)

### Added

- Added `PaymentCardReplacementReasonMapping` to contain the configuration for mapping the
  replacement reason to a http POST value.
- Added `ReplacementReasonMappingConfigToken` for overriding the replacement reason mapping configs.

## 1.3.0 (13-03-2019)

### Added

- Added `PaymentCardStatusMapping`, `PaymentCardReplacementStatusMapping` and
  `PaymentCardLockStatusMapping` to contain the configuration for mapping the status, replacement
  status and lock status backend values to internal model.
- Added `StatusMappingConfigToken` and `ReplacementStatusMappingConfigToken` for overriding the
  status and replacement status mapping configs.

## 1.2.0 (12-03-2019)

### Added

- `PaymentCardStateWrapperComponent` now shows state for locked/deactivated/expired. [TRANS-1856]

## 1.1.0 (04-03-2019)

### Changed

- Package name changed to `cards-common-ang`

## 1.1.0 (04-03-2019)

### Added

- Added `PaymentCardContainerCaseComponent`, meant to be extended in list/detail widgets
- Added `PaymentCardStateWrapperComponent`
- Added `CardsService#initiateReplacement`
- Update mocks to support `/replacement` endpoint

## 1.0.0 (04-03-2019)

### Dependency updates

- Upgrade to `@backbase/data-ang@3.1.5`
- Upgrade to `@backbase/foundation-ang@3.27.0`

### Added

- Scaffold initial `CardsCommon` library and add `CardsService`, `CardsBackendService` and models.
  [TRANS-1829]

[TRANS-1829]: https://backbase.atlassian.net/browse/TRANS-1829
[TRANS-1856]: https://backbase.atlassian.net/browse/TRANS-1856
[TRANS-1968]: https://backbase.atlassian.net/browse/TRANS-1968
[TRANS-1998]: https://backbase.atlassian.net/browse/TRANS-1998
[TRANS-2000]: https://backbase.atlassian.net/browse/TRANS-2000
[TRANS-2024]: https://backbase.atlassian.net/browse/TRANS-2024
[TRANS-2057]: https://backbase.atlassian.net/browse/TRANS-2057
[TRANS-2080]: https://backbase.atlassian.net/browse/TRANS-2000
[TRANS-2057]: https://backbase.atlassian.net/browse/TRANS-2057
[TRANS-2080]: https://backbase.atlassian.net/browse/TRANS-2080
[TRANS-2129]: https://backbase.atlassian.net/browse/TRANS-2129
