import { Component, Directive, Inject, ViewChild } from '@angular/core';
import { Observable, combineLatest, Subscription, BehaviorSubject, of } from 'rxjs';
import { catchError, filter, map, pluck, switchMap, tap } from 'rxjs/operators';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { processErrorMessages, ProductKindNames, WINDOW, setAttribute, hasExternalInfo, } from '@backbase/product-summary-common-ang';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "../account.service";
import * as i3 from "@backbase/ui-ang/notification";
import * as i4 from "@backbase/product-summary-common-ang";
import * as i5 from "@backbase/ui-ang/icon";
import * as i6 from "./product-details-ui/current-account-details/current-account-details.component";
import * as i7 from "./product-details-ui/savings-account-details/savings-account-details.component";
import * as i8 from "./product-details-ui/term-deposit-details/term-deposit-details.component";
import * as i9 from "./product-details-ui/loan-details/loan-details.component";
import * as i10 from "./product-details-ui/credit-card-details/credit-card-details.component";
import * as i11 from "./product-details-ui/debit-card-details/debit-card-details.component";
import * as i12 from "./product-details-ui/investment-account-details/investment-account-details.component";
import * as i13 from "./product-details-ui/other-details/other-details.component";
import * as i14 from "@backbase/ui-ang/empty-state";
import * as i15 from "@backbase/ui-ang/loading-indicator";
import * as i16 from "@angular/common";
import * as i17 from "@backbase/ui-ang/button";
/**
 * Displays details for a product using its ID.
 * The ID is taken from the `selectedAccount` route param.
 *
 * The following extension slots are available in this component:
 *
 * - `ProductSummaryDetailsCustomizableDirective`
 *
 * @see ProductSummaryDetailsCustomizableDirective
 *
 * - `ProductSummaryDetailsHeaderCustomizableDirective`
 *
 * @see ProductSummaryDetailsHeaderCustomizableDirective
 *
 * - `ProductSummaryDetailsViewCustomizableDirective`
 *
 * @see ProductSummaryDetailsViewCustomizableDirective
 *
 * - `ProductSummaryDetailsLoadingCustomizableDirective`
 *
 * @see ProductSummaryDetailsLoadingCustomizableDirective
 *
 * - `ProductSummaryDetailsNoAccountSelectedCustomizableDirective`
 *
 * @see ProductSummaryDetailsNoAccountSelectedCustomizableDirective
 *
 * @usageNotes
 *
 * ### Display details of an account
 *
 * ```html
 * <bb-product-summary-account-details></bb-product-summary-account-details>
 * ```
 *
 * @ngModule ProductSummaryDetailsWidgetModule
 */
export class ProductSummaryDetailsComponent {
    /**
     * Constructor
     *
     * @param route
     * @param service
     * @param notificationService
     * @param localWindow
     * @param productsExternalInfoService
     */
    constructor(route, service, notificationService, localWindow, productsExternalInfoService) {
        this.route = route;
        this.service = service;
        this.notificationService = notificationService;
        this.localWindow = localWindow;
        this.productsExternalInfoService = productsExternalInfoService;
        /**
         * Error notification template reference
         */
        this.errorNotificationTemplate = '';
        /**
         * @internal
         */
        this.hostRef = this;
        this.subscriptions = new Subscription();
        /**
         * The ID of the account for which to show the details
         * If not present, the widget has the `noAccountSelected` error state
         */
        this.productId = this.getRouteParam(this.route, 'selectedAccount').pipe(filter(productId => {
            const isMultiple = productId ? productId.split(',').length > 1 : false;
            this.multiple.next(isMultiple);
            return !isMultiple;
        }), map(productId => productId || ''));
        /**
         * If the fetching of the account details failed, this property
         * holds the errors coming from the server
         */
        this.error = this.service.error;
        /**
         * Defines the loading state during the loading of data.
         */
        this.isLoading = this.service.isLoading;
        /**
         * Event is triggered when an unmask button was clicked in any of the product types
         */
        this.unmaskedProductEvent = new BehaviorSubject(undefined);
        /**
         * List of maskable attributes to store their states
         */
        this.maskableAttributes = [];
        /**
         * The account details fetched from the server
         */
        this.item = new Observable(subscriber => {
            const subscriptions = [];
            subscriptions.push(this._item$.subscribe(product => {
                subscriber.next(product);
                if (product && hasExternalInfo(product)) {
                    subscriptions.push(this.productsExternalInfoService
                        .getProductsWithExternalInfo([product])
                        .pipe(map(([productWithFinancialInstitution]) => productWithFinancialInstitution))
                        .subscribe(subscriber));
                }
            }, subscriber.error));
            return () => subscriptions.forEach(subscription => subscription.unsubscribe());
        });
        this._item$ = combineLatest([
            this.service.productDetailsById.pipe(tap(() => {
                this.maskableAttributes = [];
                this.unmaskedProductEvent.next(undefined);
            })),
            this.unmaskedProductEvent.pipe(switchMap((payload) => {
                if (payload && !payload.attributeValue) {
                    return this.getUnmaskedAttribute(payload).pipe(filter(unmaskedAttribute => !!unmaskedAttribute), tap((unmaskedAttribute) => {
                        const maskableAttribute = this.maskableAttributes.find(attribute => attribute.attributeName === payload.attributeName);
                        if (maskableAttribute) {
                            maskableAttribute.masked = false;
                            maskableAttribute.unmaskedValue = unmaskedAttribute;
                        }
                    }), map((unmaskedValue) => ({
                        attributeName: payload.attributeName,
                        attributeValue: unmaskedValue,
                        product: payload.product,
                    })));
                }
                return of(payload);
            }), map((payload) => {
                if (payload) {
                    const { product, attributeName, attributeValue } = payload;
                    return this.updateUnmaskedAttributes(product, attributeName, attributeValue || '');
                }
                return payload;
            })),
        ]).pipe(map(this.mapProductDetails.bind(this)));
        /**
         * Sets whether the bank customer can see details for multiple accounts at a time.
         */
        this.multiple = new BehaviorSubject(false);
        /**
         * List of supported product kind names
         */
        this.productKindNames = ProductKindNames;
        /**
         * Joins the specified error messages to display on the template
         *
         * @param messages
         */
        this.processErrorMessages = processErrorMessages;
        /**
         * Sets the passed unmasked attribute to the product
         *
         * @param product
         * @param attributeName
         * @param attributeValue
         * @private
         */
        this.updateUnmaskedAttributes = setAttribute;
    }
    /**
     * Event handler for product kind details components like `bb-current-account-details`
     * Emits `UnmaskedProductEventPayload` to `unmaskedProductEvent`
     *
     * @param attributeName
     * @param product
     */
    onMaskAttribute(attributeName, product) {
        const maskableAttribute = this.maskableAttributes.find(attribute => attribute.attributeName === attributeName && attribute.maskedValue);
        if (maskableAttribute) {
            this.unmaskedProductEvent.next({ attributeName, product, attributeValue: maskableAttribute.maskedValue });
            maskableAttribute.masked = true;
        }
    }
    /**
     * Event handler for product kind details components like `bb-current-account-details`
     * Emits `UnmaskedProductEventPayload` to `unmaskedProductEvent`
     *
     * @param attributeName
     * @param product
     */
    onUnmaskAttribute(attributeName, product) {
        const maskableAttribute = this.maskableAttributes.find(attribute => attribute.attributeName === attributeName && attribute.unmaskedValue);
        const payload = { attributeName, product };
        if (maskableAttribute) {
            payload['attributeValue'] = maskableAttribute.unmaskedValue;
            maskableAttribute.masked = false;
        }
        else {
            this.maskableAttributes.push({
                attributeName,
                maskedValue: product[attributeName],
            });
        }
        this.unmaskedProductEvent.next(payload);
    }
    /**
     * Returns unmasked productItem if present otherwise masked one
     *
     * @param details
     * @private
     */
    mapProductDetails(details) {
        const [productDetails, unmaskedProduct] = details;
        return unmaskedProduct ? unmaskedProduct : productDetails;
    }
    getRouteParam(route, param) {
        const paramValue = route.paramMap.pipe(pluck('params', param));
        if (!route.parent) {
            return paramValue;
        }
        // ensure that level that has actual value keeps it from being cleared
        return combineLatest([paramValue, this.getRouteParam(route.parent, param)]).pipe(map(params => params[0] || params[1]));
    }
    /**
     * @internal
     */
    ngOnInit() {
        this.service.loadProductDetailsFrom(this.productId);
    }
    /**
     * Prints out product details
     */
    print() {
        this.localWindow.print();
    }
    /**
     * @internal
     */
    ngOnDestroy() {
        this.subscriptions.unsubscribe();
    }
    /**
     * Fetches unmasked attribute for the given product
     * and returns a new product with the attribute unmasked
     */
    getUnmaskedAttribute(unmaskedProductEventPayload) {
        const { attributeName, product } = unmaskedProductEventPayload;
        const requestParameters = {
            attributeName,
            arrangementId: product.id,
        };
        return this.service.getUnmaskedAttribute(requestParameters).pipe(catchError((error) => {
            this.notificationService.showNotification({
                header: this.errorNotificationTemplate,
                message: this.processErrorMessages(error === null || error === void 0 ? void 0 : error.messages),
                modifier: 'error',
            });
            return of('');
        }));
    }
}
ProductSummaryDetailsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsComponent, deps: [{ token: i1.ActivatedRoute }, { token: i2.AccountService }, { token: i3.NotificationService }, { token: WINDOW }, { token: i4.ProductsExternalInfoService }], target: i0.ɵɵFactoryTarget.Component });
ProductSummaryDetailsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: ProductSummaryDetailsComponent, selector: "bb-product-summary-details", viewQueries: [{ propertyName: "errorNotificationTemplate", first: true, predicate: ["errorNotificationTemplate"], descendants: true, static: true }], ngImport: i0, template: "<ng-container *ngIf=\"((hostRef.multiple | async) === false); else multipleAccounts\">\n  <ng-container *ngIf=\"productId | async as productId; else noAccountSelected\">\n    <ng-container *ngIf=\"((isLoading | async) === false) && !(error | async | bbIsDefined) && (item | async) as item; else loadingTemplate\">\n      <ng-container\n        bbProductSummaryDetailsViewCustomizable\n        [bbHostRef]=\"hostRef\"\n        [bbTemplateContext]=\"item\">\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<!-- Product summary wrapper template -->\n<ng-template\n  bbProductSummaryDetailsViewCustomizable\n  let-hostRef\n  let-item=\"context\">\n\n  <ng-container\n    bbProductSummaryDetailsHeaderCustomizable\n    [bbHostRef]=\"hostRef\"\n    [bbTemplateContext]=\"item\">\n  </ng-container>\n\n  <ng-container\n    bbProductSummaryDetailsCustomizable\n    [bbHostRef]=\"hostRef\"\n    [bbTemplateContext]=\"item\">\n  </ng-container>\n</ng-template>\n\n<!-- Product summary header template -->\n<ng-template\n  bbProductSummaryDetailsHeaderCustomizable\n  let-hostRef\n  let-item=\"context\">\n  <div\n    class=\"bb-stack bb-block bb-block--xl\"\n    data-role=\"product-summary-details-header\"\n  >\n    <h2\n      class=\"bb-stack__item bb-stack__item--fill\"\n      data-role=\"product-summary-details-header-name\"\n    >\n      {{item.displayName}}\n    </h2>\n    <button\n      bbButton\n      type=\"button\"\n      color=\"secondary\"\n      data-role=\"print\"\n      class=\"bb-stack__item\"\n      buttonSize=\"md\"\n      [circle]=\"true\"\n      (click)=\"hostRef.print()\"\n    >\n      <bb-icon-ui name=\"print\"></bb-icon-ui>\n      <span\n        class=\"sr-only\"\n        data-role=\"button-print\"\n        i18n=\"print button@@product.details.button.print\"\n      >Print</span>\n    </button>\n  </div>\n</ng-template>\n\n<!-- Product summary details template -->\n<ng-template\n  bbProductSummaryDetailsCustomizable\n  let-hostRef\n  let-item=\"context\">\n  <ng-container\n    [ngSwitch]=\"item.productKindName\">\n    <!-- Current Account -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.CURRENT_ACCOUNT\">\n      <bb-current-account-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-current-account-details>\n    </ng-container>\n    <!-- Savings Account -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.SAVINGS_ACCOUNT\">\n      <bb-savings-account-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-savings-account-details>\n    </ng-container>\n    <!-- Term Deposit -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.TERM_DEPOSIT\">\n      <bb-term-deposit-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-term-deposit-details>\n    </ng-container>\n    <!-- Loan -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.LOAN\">\n      <bb-loan-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-loan-details>\n    </ng-container>\n    <!-- Credit Card -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.CREDIT_CARD\">\n      <bb-credit-card-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-credit-card-details>\n    </ng-container>\n    <!-- Debit Card -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.DEBIT_CARD\">\n      <bb-debit-card-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-debit-card-details>\n    </ng-container>\n    <!-- Investment Account -->\n    <ng-container *ngSwitchCase=\"hostRef.productKindNames.INVESTMENT_ACCOUNT\">\n      <bb-investment-account-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-investment-account-details>\n    </ng-container>\n    <!--\n      Other (Default):\n      This template can be used to add more custom productKinds.\n      The productKind is passed to the template so a customer can add\n      additional switch/if statements to determine what product template should be displayed\n    -->\n    <ng-container *ngSwitchDefault>\n      <bb-other-account-details\n        [product]=\"item\"\n        [maskableAttributes]=\"hostRef.maskableAttributes\"\n        (unmaskAttribute)=\"hostRef.onUnmaskAttribute($event, item)\"\n        (maskAttribute)=\"hostRef.onMaskAttribute($event, item)\"\n      >\n      </bb-other-account-details>\n    </ng-container>\n  </ng-container>\n</ng-template>\n\n<!-- Product summary details loading template -->\n<ng-template #loadingTemplate>\n  <ng-container bbProductSummaryDetailsLoadingCustomizable\n                [bbHostRef]=\"hostRef\">\n  </ng-container>\n</ng-template>\n\n<ng-template\n  bbProductSummaryDetailsLoadingCustomizable\n  let-hostRef>\n  <ng-container *ngIf=\"hostRef.error | async as error; else loading\">\n    <bb-empty-state-ui\n      iconSize=\"xxl\"\n      iconModifier=\"error-outline\"\n      iconClasses=\"text-muted\"\n      [title]=\"''\"\n      [subtitle]=\"hostRef.processErrorMessages(error.messages)\"\n    ></bb-empty-state-ui>\n  </ng-container>\n  <ng-template #loading>\n    <bb-loading-indicator-ui\n      i18n-text=\"@@product.details.loadingAccounts\"\n      [text]=\"'Loading Accounts...'\"\n    ></bb-loading-indicator-ui>\n  </ng-template>\n</ng-template>\n\n<!-- Product summary details no account selected template -->\n<ng-template #noAccountSelected>\n  <ng-container bbProductSummaryDetailsNoAccountSelectedCustomizable\n                [bbHostRef]=\"hostRef\">\n  </ng-container>\n</ng-template>\n\n<ng-template\n  bbProductSummaryDetailsNoAccountSelectedCustomizable\n  let-hostRef>\n  <bb-empty-state-ui\n    i18n-title=\"No accounts selected tittle|Empty state title label when there are no account details@@product.details.empty.title\"\n    [title]=\"'No account(s) selected.'\"\n    i18n-subtitle=\"No accounts selected subtitle|Empty state subtitle label when there are no account details@@product.details.empty.subtitle\"\n    [subtitle]=\"'Please select an account first.'\"\n  >\n  </bb-empty-state-ui>\n</ng-template>\n\n<ng-template #multipleAccounts>\n  <bb-empty-state-ui\n    data-role=\"product-summary-details-error-multi-selection\"\n    iconSize=\"xxl\"\n    iconModifier=\"error-outline\"\n    iconClasses=\"text-muted\"\n    title=\"You have selected multiple accounts\"\n    i18n-title=\"You have selected multiple accounts|Error title when getting multiple accounts@@product.details.error.multiple.title\"\n    subtitle=\"Please select only one account to display the account information\"\n    i18n-subtitle=\"Please select only one account to display the account information|Error subtitle when getting multiple accounts@@product.details.error.multiple.subtitle\"\n  ></bb-empty-state-ui>\n</ng-template>\n", components: [{ type: i0.forwardRef(function () { return i5.IconComponent; }), selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }, { type: i0.forwardRef(function () { return i6.CurrentAccountDetailsComponent; }), selector: "bb-current-account-details" }, { type: i0.forwardRef(function () { return i7.SavingsAccountDetailsComponent; }), selector: "bb-savings-account-details" }, { type: i0.forwardRef(function () { return i8.TermDepositDetailsComponent; }), selector: "bb-term-deposit-details" }, { type: i0.forwardRef(function () { return i9.LoanDetailsComponent; }), selector: "bb-loan-details" }, { type: i0.forwardRef(function () { return i10.CreditCardDetailsComponent; }), selector: "bb-credit-card-details" }, { type: i0.forwardRef(function () { return i11.DebitCardDetailsComponent; }), selector: "bb-debit-card-details" }, { type: i0.forwardRef(function () { return i12.InvestmentAccountDetailsComponent; }), selector: "bb-investment-account-details" }, { type: i0.forwardRef(function () { return i13.OtherDetailsComponent; }), selector: "bb-other-account-details" }, { type: i0.forwardRef(function () { return i14.EmptyStateComponent; }), selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }, { type: i0.forwardRef(function () { return i15.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }], directives: [{ type: i0.forwardRef(function () { return i16.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return ProductSummaryDetailsViewCustomizableDirective; }), selector: "[bbProductSummaryDetailsViewCustomizable]" }, { type: i0.forwardRef(function () { return ProductSummaryDetailsHeaderCustomizableDirective; }), selector: "[bbProductSummaryDetailsHeaderCustomizable]" }, { type: i0.forwardRef(function () { return ProductSummaryDetailsCustomizableDirective; }), selector: "[bbProductSummaryDetailsCustomizable]" }, { type: i0.forwardRef(function () { return i17.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i0.forwardRef(function () { return i16.NgSwitch; }), selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i0.forwardRef(function () { return i16.NgSwitchCase; }), selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { type: i0.forwardRef(function () { return i16.NgSwitchDefault; }), selector: "[ngSwitchDefault]" }, { type: i0.forwardRef(function () { return ProductSummaryDetailsLoadingCustomizableDirective; }), selector: "[bbProductSummaryDetailsLoadingCustomizable]" }, { type: i0.forwardRef(function () { return ProductSummaryDetailsNoAccountSelectedCustomizableDirective; }), selector: "[bbProductSummaryDetailsNoAccountSelectedCustomizable]" }], pipes: { "async": i0.forwardRef(function () { return i16.AsyncPipe; }), "bbIsDefined": i0.forwardRef(function () { return i4.IsDefinedPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-product-summary-details',
                    templateUrl: './product-summary-details.component.html',
                }]
        }], ctorParameters: function () { return [{ type: i1.ActivatedRoute }, { type: i2.AccountService }, { type: i3.NotificationService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [WINDOW]
                }] }, { type: i4.ProductsExternalInfoService }]; }, propDecorators: { errorNotificationTemplate: [{
                type: ViewChild,
                args: ['errorNotificationTemplate', { static: true }]
            }] } });
/**
 * This is an extension slot to be used for customizing the NoAccountSelected state
 *
 * @usageNotes
 *
 * ### Customize the NoAccountSelected view
 *
 * ```html
 * <ng-template
 *  bbProductSummaryDetailsNoAccountSelectedCustomizable
 *  [bbHostRef]="hostRef">
 *   Your custom template here
 * </ng-template>
 * ```
 *
 * @NgModule ProductSummaryDetailsWidgetModule
 */
export class ProductSummaryDetailsNoAccountSelectedCustomizableDirective extends BbTemplate {
}
ProductSummaryDetailsNoAccountSelectedCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsNoAccountSelectedCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ProductSummaryDetailsNoAccountSelectedCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: ProductSummaryDetailsNoAccountSelectedCustomizableDirective, selector: "[bbProductSummaryDetailsNoAccountSelectedCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsNoAccountSelectedCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbProductSummaryDetailsNoAccountSelectedCustomizable]',
                }]
        }] });
/**
 * This is an extension slot to be used for customizing the loading state
 *
 * @usageNotes
 *
 * ### Customize the loading view
 *
 * ```html
 * <ng-template
 *  bbProductSummaryDetailsLoadingCustomizable
 *  [bbHostRef]="hostRef">
 *   Your custom template here
 * </ng-template>
 * ```
 *
 * @NgModule ProductSummaryDetailsWidgetModule
 */
export class ProductSummaryDetailsLoadingCustomizableDirective extends BbTemplate {
}
ProductSummaryDetailsLoadingCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsLoadingCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ProductSummaryDetailsLoadingCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: ProductSummaryDetailsLoadingCustomizableDirective, selector: "[bbProductSummaryDetailsLoadingCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsLoadingCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbProductSummaryDetailsLoadingCustomizable]',
                }]
        }] });
/**
 * This is an extension slot to be used for customizing the entire view
 *
 * @usageNotes
 *
 * ### Customize the entire view
 *
 * ```html
 * <ng-template
 *  bbProductSummaryDetailsViewCustomizable
 *  let-hostRef
 *  let-item="context">
 *   Your custom template here
 * </ng-template>
 * ```
 *
 * @NgModule ProductSummaryDetailsWidgetModule
 */
export class ProductSummaryDetailsViewCustomizableDirective extends BbTemplate {
}
ProductSummaryDetailsViewCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsViewCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ProductSummaryDetailsViewCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: ProductSummaryDetailsViewCustomizableDirective, selector: "[bbProductSummaryDetailsViewCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsViewCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbProductSummaryDetailsViewCustomizable]',
                }]
        }] });
/**
 * This is an extension slot to be used for customizing the header
 *
 * @usageNotes
 *
 * ### Customize the header
 *
 * ```html
 * <ng-template
 *   bbProductSummaryDetailsHeaderCustomizable
 *   let-hostRef
 *   let-item="context">
 *   Your custom template here
 * </ng-template>
 * ```
 *
 * @NgModule ProductSummaryDetailsWidgetModule
 */
export class ProductSummaryDetailsHeaderCustomizableDirective extends BbTemplate {
}
ProductSummaryDetailsHeaderCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsHeaderCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ProductSummaryDetailsHeaderCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: ProductSummaryDetailsHeaderCustomizableDirective, selector: "[bbProductSummaryDetailsHeaderCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsHeaderCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbProductSummaryDetailsHeaderCustomizable]',
                }]
        }] });
/**
 * This is an extension slot to be used for customizing details
 *
 * @usageNotes
 *
 * ### Customize details
 *
 * ```html
 * <ng-template
 *   bbProductSummaryDetailsCustomizable
 *   let-hostRef
 *   let-item="context">
 *   Your custom template here
 * </ng-template>
 * ```
 *
 * @NgModule ProductSummaryDetailsWidgetModule
 */
export class ProductSummaryDetailsCustomizableDirective extends BbTemplate {
}
ProductSummaryDetailsCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
ProductSummaryDetailsCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: ProductSummaryDetailsCustomizableDirective, selector: "[bbProductSummaryDetailsCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: ProductSummaryDetailsCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbProductSummaryDetailsCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC1zdW1tYXJ5LWRldGFpbHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9wcm9kdWN0LXN1bW1hcnktZGV0YWlscy13aWRnZXQtYW5nL3NyYy9wcm9kdWN0LXN1bW1hcnktZGV0YWlscy9wcm9kdWN0LXN1bW1hcnktZGV0YWlscy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL3Byb2R1Y3Qtc3VtbWFyeS1kZXRhaWxzLXdpZGdldC1hbmcvc3JjL3Byb2R1Y3Qtc3VtbWFyeS1kZXRhaWxzL3Byb2R1Y3Qtc3VtbWFyeS1kZXRhaWxzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFxQixNQUFNLEVBQUUsU0FBUyxFQUFlLE1BQU0sZUFBZSxDQUFDO0FBRXhHLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2hGLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUMzRCxPQUFPLEVBQ0wsb0JBQW9CLEVBQ3BCLGdCQUFnQixFQUNoQixNQUFNLEVBR04sWUFBWSxFQUdaLGVBQWUsR0FDaEIsTUFBTSxzQ0FBc0MsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVU5Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQ0c7QUFLSCxNQUFNLE9BQU8sOEJBQThCO0lBNkt6Qzs7Ozs7Ozs7T0FRRztJQUNILFlBQ21CLEtBQXFCLEVBQ3JCLE9BQXVCLEVBQ3ZCLG1CQUF3QyxFQUN4QixXQUF3QixF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dGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIERpcmVjdGl2ZSwgT25Jbml0LCBPbkRlc3Ryb3ksIEluamVjdCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIFBhcmFtTWFwIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE9ic2VydmFibGUsIGNvbWJpbmVMYXRlc3QsIFN1YnNjcmlwdGlvbiwgQmVoYXZpb3JTdWJqZWN0LCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgZmlsdGVyLCBtYXAsIHBsdWNrLCBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEJiVGVtcGxhdGUgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvY29yZSc7XG5pbXBvcnQge1xuICBwcm9jZXNzRXJyb3JNZXNzYWdlcyxcbiAgUHJvZHVjdEtpbmROYW1lcyxcbiAgV0lORE9XLFxuICBMb2NhbFdpbmRvdyxcbiAgVW5tYXNrZWRQcm9kdWN0RXZlbnRQYXlsb2FkLFxuICBzZXRBdHRyaWJ1dGUsXG4gIFByb2R1Y3RNYXNrYWJsZUF0dHJpYnV0ZSxcbiAgUHJvZHVjdHNFeHRlcm5hbEluZm9TZXJ2aWNlLFxuICBoYXNFeHRlcm5hbEluZm8sXG59IGZyb20gJ0BiYWNrYmFzZS9wcm9kdWN0LXN1bW1hcnktY29tbW9uLWFuZyc7XG5pbXBvcnQgeyBBY2NvdW50U2VydmljZSB9IGZyb20gJy4uL2FjY291bnQuc2VydmljZSc7XG5pbXBvcnQge1xuICBBY2NvdW50QXJyYW5nZW1lbnRJdGVtIGFzIFByb2R1Y3RUeXBlLFxuICBNYXNrYWJsZUF0dHJpYnV0ZSxcbiAgVW5tYXNrZWRBdHRyaWJ1dGVSZXF1ZXN0UGFyYW1zLFxufSBmcm9tICdAYmFja2Jhc2UvZGF0YS1hbmcvYXJyYW5nZW1lbnRzJztcbmltcG9ydCB7IEFjY291bnRFcnJvciB9IGZyb20gJy4uL2FjY291bnQtZXJyb3InO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJ0BiYWNrYmFzZS91aS1hbmcvbm90aWZpY2F0aW9uJztcblxuLyoqXG4gKiBEaXNwbGF5cyBkZXRhaWxzIGZvciBhIHByb2R1Y3QgdXNpbmcgaXRzIElELlxuICogVGhlIElEIGlzIHRha2VuIGZyb20gdGhlIGBzZWxlY3RlZEFjY291bnRgIHJvdXRlIHBhcmFtLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXh0ZW5zaW9uIHNsb3RzIGFyZSBhdmFpbGFibGUgaW4gdGhpcyBjb21wb25lbnQ6XG4gKlxuICogLSBgUHJvZHVjdFN1bW1hcnlEZXRhaWxzQ3VzdG9taXphYmxlRGlyZWN0aXZlYFxuICpcbiAqIEBzZWUgUHJvZHVjdFN1bW1hcnlEZXRhaWxzQ3VzdG9taXphYmxlRGlyZWN0aXZlXG4gKlxuICogLSBgUHJvZHVjdFN1bW1hcnlEZXRhaWxzSGVhZGVyQ3VzdG9taXphYmxlRGlyZWN0aXZlYFxuICpcbiAqIEBzZWUgUHJvZHVjdFN1bW1hcnlEZXRhaWxzSGVhZGVyQ3VzdG9taXphYmxlRGlyZWN0aXZlXG4gKlxuICogLSBgUHJvZHVjdFN1bW1hcnlEZXRhaWxzVmlld0N1c3RvbWl6YWJsZURpcmVjdGl2ZWBcbiAqXG4gKiBAc2VlIFByb2R1Y3RTdW1tYXJ5RGV0YWlsc1ZpZXdDdXN0b21pemFibGVEaXJlY3RpdmVcbiAqXG4gKiAtIGBQcm9kdWN0U3VtbWFyeURldGFpbHNMb2FkaW5nQ3VzdG9taXphYmxlRGlyZWN0aXZlYFxuICpcbiAqIEBzZWUgUHJvZHVjdFN1bW1hcnlEZXRhaWxzTG9hZGluZ0N1c3RvbWl6YWJsZURpcmVjdGl2ZVxuICpcbiAqIC0gYFByb2R1Y3RTdW1tYXJ5RGV0YWlsc05vQWNjb3VudFNlbGVjdGVkQ3VzdG9taXphYmxlRGlyZWN0aXZlYFxuICpcbiAqIEBzZWUgUHJvZHVjdFN1bW1hcnlEZXRhaWxzTm9BY2NvdW50U2VsZWN0ZWRDdXN0b21pemFibGVEaXJlY3RpdmVcbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICpcbiAqICMjIyBEaXNwbGF5IGRldGFpbHMgb2YgYW4gYWNjb3VudFxuICpcbiAqIGBgYGh0bWxcbiAqIDxiYi1wcm9kdWN0LXN1bW1hcnktYWNjb3VudC1kZXRhaWxzPjwvYmItcHJvZHVjdC1zdW1tYXJ5LWFjY291bnQtZGV0YWlscz5cbiAqIGBgYFxuICpcbiAqIEBuZ01vZHVsZSBQcm9kdWN0U3VtbWFyeURldGFpbHNXaWRnZXRNb2R1bGVcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItcHJvZHVjdC1zdW1tYXJ5LWRldGFpbHMnLFxuICB0ZW1wbGF0ZVVybDogJy4vcHJvZHVjdC1zdW1tYXJ5LWRldGFpbHMuY29tcG9uZW50Lmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBQcm9kdWN0U3VtbWFyeURldGFpbHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIC8qKlxuICAgKiBFcnJvciBub3RpZmljYXRpb24gdGVtcGxhdGUgcmVmZXJlbmNlXG4gICAqL1xuICBAVmlld0NoaWxkKCdlcnJvck5vdGlmaWNhdGlvblRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSkgZXJyb3JOb3RpZmljYXRpb25UZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiB8IHN0cmluZyA9ICcnO1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICByZWFkb25seSBob3N0UmVmOiBQcm9kdWN0U3VtbWFyeURldGFpbHNDb21wb25lbnQgPSB0aGlzO1xuICBwcml2YXRlIHJlYWRvbmx5IHN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgdGhlIGFjY291bnQgZm9yIHdoaWNoIHRvIHNob3cgdGhlIGRldGFpbHNcbiAgICogSWYgbm90IHByZXNlbnQsIHRoZSB3aWRnZXQgaGFzIHRoZSBgbm9BY2NvdW50U2VsZWN0ZWRgIGVycm9yIHN0YXRlXG4gICAqL1xuICByZWFkb25seSBwcm9kdWN0SWQ6IE9ic2VydmFibGU8c3RyaW5nPiA9IHRoaXMuZ2V0Um91dGVQYXJhbSh0aGlzLnJvdXRlLCAnc2VsZWN0ZWRBY2NvdW50JykucGlwZShcbiAgICBmaWx0ZXIocHJvZHVjdElkID0+IHtcbiAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBwcm9kdWN0SWQgPyBwcm9kdWN0SWQuc3BsaXQoJywnKS5sZW5ndGggPiAxIDogZmFsc2U7XG4gICAgICB0aGlzLm11bHRpcGxlLm5leHQoaXNNdWx0aXBsZSk7XG4gICAgICByZXR1cm4gIWlzTXVsdGlwbGU7XG4gICAgfSksXG4gICAgbWFwKHByb2R1Y3RJZCA9PiBwcm9kdWN0SWQgfHwgJycpLFxuICApO1xuICAvKipcbiAgICogSWYgdGhlIGZldGNoaW5nIG9mIHRoZSBhY2NvdW50IGRldGFpbHMgZmFpbGVkLCB0aGlzIHByb3BlcnR5XG4gICAqIGhvbGRzIHRoZSBlcnJvcnMgY29taW5nIGZyb20gdGhlIHNlcnZlclxuICAgKi9cbiAgcmVhZG9ubHkgZXJyb3I6IE9ic2VydmFibGU8QWNjb3VudEVycm9yIHwgdW5kZWZpbmVkPiA9IHRoaXMuc2VydmljZS5lcnJvcjtcbiAgLyoqXG4gICAqIERlZmluZXMgdGhlIGxvYWRpbmcgc3RhdGUgZHVyaW5nIHRoZSBsb2FkaW5nIG9mIGRhdGEuXG4gICAqL1xuICByZWFkb25seSBpc0xvYWRpbmc6IE9ic2VydmFibGU8Ym9vbGVhbj4gPSB0aGlzLnNlcnZpY2UuaXNMb2FkaW5nO1xuICAvKipcbiAgICogRXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gYW4gdW5tYXNrIGJ1dHRvbiB3YXMgY2xpY2tlZCBpbiBhbnkgb2YgdGhlIHByb2R1Y3QgdHlwZXNcbiAgICovXG4gIHByaXZhdGUgdW5tYXNrZWRQcm9kdWN0RXZlbnQ6IEJlaGF2aW9yU3ViamVjdDxVbm1hc2tlZFByb2R1Y3RFdmVudFBheWxvYWQgfCB1bmRlZmluZWQ+ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxcbiAgICBVbm1hc2tlZFByb2R1Y3RFdmVudFBheWxvYWQgfCB1bmRlZmluZWRcbiAgPih1bmRlZmluZWQpO1xuICAvKipcbiAgICogTGlzdCBvZiBtYXNrYWJsZSBhdHRyaWJ1dGVzIHRvIHN0b3JlIHRoZWlyIHN0YXRlc1xuICAgKi9cbiAgbWFza2FibGVBdHRyaWJ1dGVzOiBQcm9kdWN0TWFza2FibGVBdHRyaWJ1dGVbXSA9IFtdO1xuICAvKipcbiAgICogVGhlIGFjY291bnQgZGV0YWlscyBmZXRjaGVkIGZyb20gdGhlIHNlcnZlclxuICAgKi9cbiAgcmVhZG9ubHkgaXRlbTogT2JzZXJ2YWJsZTxQcm9kdWN0VHlwZSB8IHVuZGVmaW5lZD4gPSBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmVyID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuICAgIHN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgIHRoaXMuX2l0ZW0kLnN1YnNjcmliZShwcm9kdWN0ID0+IHtcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHByb2R1Y3QpO1xuXG4gICAgICAgIGlmIChwcm9kdWN0ICYmIGhhc0V4dGVybmFsSW5mbyhwcm9kdWN0KSkge1xuICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdHNFeHRlcm5hbEluZm9TZXJ2aWNlXG4gICAgICAgICAgICAgIC5nZXRQcm9kdWN0c1dpdGhFeHRlcm5hbEluZm8oW3Byb2R1Y3RdKVxuICAgICAgICAgICAgICAucGlwZShtYXAoKFtwcm9kdWN0V2l0aEZpbmFuY2lhbEluc3RpdHV0aW9uXSkgPT4gcHJvZHVjdFdpdGhGaW5hbmNpYWxJbnN0aXR1dGlvbikpXG4gICAgICAgICAgICAgIC5zdWJzY3JpYmUoc3Vic2NyaWJlciksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSwgc3Vic2NyaWJlci5lcnJvciksXG4gICAgKTtcbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHN1YnNjcmlwdGlvbiA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKSk7XG4gIH0pO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX2l0ZW0kOiBPYnNlcnZhYmxlPFByb2R1Y3RUeXBlIHwgdW5kZWZpbmVkPiA9IGNvbWJpbmVMYXRlc3QoW1xuICAgIHRoaXMuc2VydmljZS5wcm9kdWN0RGV0YWlsc0J5SWQucGlwZShcbiAgICAgIHRhcCgoKSA9PiB7XG4gICAgICAgIHRoaXMubWFza2FibGVBdHRyaWJ1dGVzID0gW107XG4gICAgICAgIHRoaXMudW5tYXNrZWRQcm9kdWN0RXZlbnQubmV4dCh1bmRlZmluZWQpO1xuICAgICAgfSksXG4gICAgKSxcbiAgICB0aGlzLnVubWFza2VkUHJvZHVjdEV2ZW50LnBpcGUoXG4gICAgICBzd2l0Y2hNYXAoKHBheWxvYWQ6IFVubWFza2VkUHJvZHVjdEV2ZW50UGF5bG9hZCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZCAmJiAhcGF5bG9hZC5hdHRyaWJ1dGVWYWx1ZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmdldFVubWFza2VkQXR0cmlidXRlKHBheWxvYWQpLnBpcGUoXG4gICAgICAgICAgICBmaWx0ZXIodW5tYXNrZWRBdHRyaWJ1dGUgPT4gISF1bm1hc2tlZEF0dHJpYnV0ZSksXG4gICAgICAgICAgICB0YXAoKHVubWFza2VkQXR0cmlidXRlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbWFza2FibGVBdHRyaWJ1dGUgPSB0aGlzLm1hc2thYmxlQXR0cmlidXRlcy5maW5kKFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9PiBhdHRyaWJ1dGUuYXR0cmlidXRlTmFtZSA9PT0gcGF5bG9hZC5hdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAobWFza2FibGVBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBtYXNrYWJsZUF0dHJpYnV0ZS5tYXNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBtYXNrYWJsZUF0dHJpYnV0ZS51bm1hc2tlZFZhbHVlID0gdW5tYXNrZWRBdHRyaWJ1dGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbWFwKFxuICAgICAgICAgICAgICAodW5tYXNrZWRWYWx1ZTogc3RyaW5nKTogVW5tYXNrZWRQcm9kdWN0RXZlbnRQYXlsb2FkID0+ICh7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogcGF5bG9hZC5hdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZVZhbHVlOiB1bm1hc2tlZFZhbHVlLFxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHBheWxvYWQucHJvZHVjdCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mKHBheWxvYWQpO1xuICAgICAgfSksXG4gICAgICBtYXAoKHBheWxvYWQ6IFVubWFza2VkUHJvZHVjdEV2ZW50UGF5bG9hZCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZCkge1xuICAgICAgICAgIGNvbnN0IHsgcHJvZHVjdCwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUgfSA9IHBheWxvYWQ7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVW5tYXNrZWRBdHRyaWJ1dGVzKHByb2R1Y3QsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlIHx8ICcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgIH0pLFxuICAgICksXG4gIF0pLnBpcGUobWFwKHRoaXMubWFwUHJvZHVjdERldGFpbHMuYmluZCh0aGlzKSkpO1xuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIHRoZSBiYW5rIGN1c3RvbWVyIGNhbiBzZWUgZGV0YWlscyBmb3IgbXVsdGlwbGUgYWNjb3VudHMgYXQgYSB0aW1lLlxuICAgKi9cbiAgcmVhZG9ubHkgbXVsdGlwbGUgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcbiAgLyoqXG4gICAqIExpc3Qgb2Ygc3VwcG9ydGVkIHByb2R1Y3Qga2luZCBuYW1lc1xuICAgKi9cbiAgcmVhZG9ubHkgcHJvZHVjdEtpbmROYW1lcyA9IFByb2R1Y3RLaW5kTmFtZXM7XG4gIC8qKlxuICAgKiBKb2lucyB0aGUgc3BlY2lmaWVkIGVycm9yIG1lc3NhZ2VzIHRvIGRpc3BsYXkgb24gdGhlIHRlbXBsYXRlXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlc1xuICAgKi9cbiAgcHJvY2Vzc0Vycm9yTWVzc2FnZXM6IChtZXNzYWdlczogc3RyaW5nW10gfCB1bmRlZmluZWQpID0+IHN0cmluZyB8IHVuZGVmaW5lZCA9IHByb2Nlc3NFcnJvck1lc3NhZ2VzO1xuICAvKipcbiAgICogU2V0cyB0aGUgcGFzc2VkIHVubWFza2VkIGF0dHJpYnV0ZSB0byB0aGUgcHJvZHVjdFxuICAgKlxuICAgKiBAcGFyYW0gcHJvZHVjdFxuICAgKiBAcGFyYW0gYXR0cmlidXRlTmFtZVxuICAgKiBAcGFyYW0gYXR0cmlidXRlVmFsdWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlVW5tYXNrZWRBdHRyaWJ1dGVzOiAoXG4gICAgcHJvZHVjdDogUHJvZHVjdFR5cGUsXG4gICAgYXR0cmlidXRlTmFtZTogc3RyaW5nLFxuICAgIGF0dHJpYnV0ZVZhbHVlOiBzdHJpbmcsXG4gICkgPT4gUHJvZHVjdFR5cGUgPSBzZXRBdHRyaWJ1dGU7XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHByb2R1Y3Qga2luZCBkZXRhaWxzIGNvbXBvbmVudHMgbGlrZSBgYmItY3VycmVudC1hY2NvdW50LWRldGFpbHNgXG4gICAqIEVtaXRzIGBVbm1hc2tlZFByb2R1Y3RFdmVudFBheWxvYWRgIHRvIGB1bm1hc2tlZFByb2R1Y3RFdmVudGBcbiAgICpcbiAgICogQHBhcmFtIGF0dHJpYnV0ZU5hbWVcbiAgICogQHBhcmFtIHByb2R1Y3RcbiAgICovXG4gIG9uTWFza0F0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lOiBNYXNrYWJsZUF0dHJpYnV0ZSwgcHJvZHVjdDogUHJvZHVjdFR5cGUpIHtcbiAgICBjb25zdCBtYXNrYWJsZUF0dHJpYnV0ZSA9IHRoaXMubWFza2FibGVBdHRyaWJ1dGVzLmZpbmQoXG4gICAgICBhdHRyaWJ1dGUgPT4gYXR0cmlidXRlLmF0dHJpYnV0ZU5hbWUgPT09IGF0dHJpYnV0ZU5hbWUgJiYgYXR0cmlidXRlLm1hc2tlZFZhbHVlLFxuICAgICk7XG4gICAgaWYgKG1hc2thYmxlQXR0cmlidXRlKSB7XG4gICAgICB0aGlzLnVubWFza2VkUHJvZHVjdEV2ZW50Lm5leHQoeyBhdHRyaWJ1dGVOYW1lLCBwcm9kdWN0LCBhdHRyaWJ1dGVWYWx1ZTogbWFza2FibGVBdHRyaWJ1dGUubWFza2VkVmFsdWUgfSk7XG4gICAgICBtYXNrYWJsZUF0dHJpYnV0ZS5tYXNrZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBwcm9kdWN0IGtpbmQgZGV0YWlscyBjb21wb25lbnRzIGxpa2UgYGJiLWN1cnJlbnQtYWNjb3VudC1kZXRhaWxzYFxuICAgKiBFbWl0cyBgVW5tYXNrZWRQcm9kdWN0RXZlbnRQYXlsb2FkYCB0byBgdW5tYXNrZWRQcm9kdWN0RXZlbnRgXG4gICAqXG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVOYW1lXG4gICAqIEBwYXJhbSBwcm9kdWN0XG4gICAqL1xuICBvblVubWFza0F0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lOiBNYXNrYWJsZUF0dHJpYnV0ZSwgcHJvZHVjdDogUHJvZHVjdFR5cGUpIHtcbiAgICBjb25zdCBtYXNrYWJsZUF0dHJpYnV0ZSA9IHRoaXMubWFza2FibGVBdHRyaWJ1dGVzLmZpbmQoXG4gICAgICBhdHRyaWJ1dGUgPT4gYXR0cmlidXRlLmF0dHJpYnV0ZU5hbWUgPT09IGF0dHJpYnV0ZU5hbWUgJiYgYXR0cmlidXRlLnVubWFza2VkVmFsdWUsXG4gICAgKTtcbiAgICBjb25zdCBwYXlsb2FkOiBVbm1hc2tlZFByb2R1Y3RFdmVudFBheWxvYWQgPSB7IGF0dHJpYnV0ZU5hbWUsIHByb2R1Y3QgfTtcbiAgICBpZiAobWFza2FibGVBdHRyaWJ1dGUpIHtcbiAgICAgIHBheWxvYWRbJ2F0dHJpYnV0ZVZhbHVlJ10gPSBtYXNrYWJsZUF0dHJpYnV0ZS51bm1hc2tlZFZhbHVlO1xuICAgICAgbWFza2FibGVBdHRyaWJ1dGUubWFza2VkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFza2FibGVBdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgICBhdHRyaWJ1dGVOYW1lLFxuICAgICAgICBtYXNrZWRWYWx1ZTogcHJvZHVjdFthdHRyaWJ1dGVOYW1lXSBhcyBzdHJpbmcsXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy51bm1hc2tlZFByb2R1Y3RFdmVudC5uZXh0KHBheWxvYWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSByb3V0ZVxuICAgKiBAcGFyYW0gc2VydmljZVxuICAgKiBAcGFyYW0gbm90aWZpY2F0aW9uU2VydmljZVxuICAgKiBAcGFyYW0gbG9jYWxXaW5kb3dcbiAgICogQHBhcmFtIHByb2R1Y3RzRXh0ZXJuYWxJbmZvU2VydmljZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgcHJpdmF0ZSByZWFkb25seSBzZXJ2aWNlOiBBY2NvdW50U2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5vdGlmaWNhdGlvblNlcnZpY2U6IE5vdGlmaWNhdGlvblNlcnZpY2UsXG4gICAgQEluamVjdChXSU5ET1cpIHByaXZhdGUgcmVhZG9ubHkgbG9jYWxXaW5kb3c6IExvY2FsV2luZG93LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcHJvZHVjdHNFeHRlcm5hbEluZm9TZXJ2aWNlOiBQcm9kdWN0c0V4dGVybmFsSW5mb1NlcnZpY2UsXG4gICkge31cblxuICAvKipcbiAgICogUmV0dXJucyB1bm1hc2tlZCBwcm9kdWN0SXRlbSBpZiBwcmVzZW50IG90aGVyd2lzZSBtYXNrZWQgb25lXG4gICAqXG4gICAqIEBwYXJhbSBkZXRhaWxzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIG1hcFByb2R1Y3REZXRhaWxzKGRldGFpbHM6IEFycmF5PFByb2R1Y3RUeXBlIHwgdW5kZWZpbmVkPik6IFByb2R1Y3RUeXBlIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBbcHJvZHVjdERldGFpbHMsIHVubWFza2VkUHJvZHVjdF0gPSBkZXRhaWxzO1xuICAgIHJldHVybiB1bm1hc2tlZFByb2R1Y3QgPyB1bm1hc2tlZFByb2R1Y3QgOiBwcm9kdWN0RGV0YWlscztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Um91dGVQYXJhbShyb3V0ZTogQWN0aXZhdGVkUm91dGUsIHBhcmFtOiBzdHJpbmcpOiBPYnNlcnZhYmxlPHN0cmluZyB8IG51bGw+IHtcbiAgICBjb25zdCBwYXJhbVZhbHVlID0gcm91dGUucGFyYW1NYXAucGlwZShwbHVjazxQYXJhbU1hcCwgc3RyaW5nIHwgbnVsbD4oJ3BhcmFtcycsIHBhcmFtKSk7XG5cbiAgICBpZiAoIXJvdXRlLnBhcmVudCkge1xuICAgICAgcmV0dXJuIHBhcmFtVmFsdWU7XG4gICAgfVxuICAgIC8vIGVuc3VyZSB0aGF0IGxldmVsIHRoYXQgaGFzIGFjdHVhbCB2YWx1ZSBrZWVwcyBpdCBmcm9tIGJlaW5nIGNsZWFyZWRcbiAgICByZXR1cm4gY29tYmluZUxhdGVzdChbcGFyYW1WYWx1ZSwgdGhpcy5nZXRSb3V0ZVBhcmFtKHJvdXRlLnBhcmVudCwgcGFyYW0pXSkucGlwZShcbiAgICAgIG1hcChwYXJhbXMgPT4gcGFyYW1zWzBdIHx8IHBhcmFtc1sxXSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc2VydmljZS5sb2FkUHJvZHVjdERldGFpbHNGcm9tKHRoaXMucHJvZHVjdElkKTtcbiAgfVxuICAvKipcbiAgICogUHJpbnRzIG91dCBwcm9kdWN0IGRldGFpbHNcbiAgICovXG4gIHByaW50KCkge1xuICAgIHRoaXMubG9jYWxXaW5kb3cucHJpbnQoKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2hlcyB1bm1hc2tlZCBhdHRyaWJ1dGUgZm9yIHRoZSBnaXZlbiBwcm9kdWN0XG4gICAqIGFuZCByZXR1cm5zIGEgbmV3IHByb2R1Y3Qgd2l0aCB0aGUgYXR0cmlidXRlIHVubWFza2VkXG4gICAqL1xuICBwcml2YXRlIGdldFVubWFza2VkQXR0cmlidXRlKHVubWFza2VkUHJvZHVjdEV2ZW50UGF5bG9hZDogVW5tYXNrZWRQcm9kdWN0RXZlbnRQYXlsb2FkKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgICBjb25zdCB7IGF0dHJpYnV0ZU5hbWUsIHByb2R1Y3QgfSA9IHVubWFza2VkUHJvZHVjdEV2ZW50UGF5bG9hZDtcbiAgICBjb25zdCByZXF1ZXN0UGFyYW1ldGVyczogVW5tYXNrZWRBdHRyaWJ1dGVSZXF1ZXN0UGFyYW1zID0ge1xuICAgICAgYXR0cmlidXRlTmFtZSxcbiAgICAgIGFycmFuZ2VtZW50SWQ6IHByb2R1Y3QuaWQsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldFVubWFza2VkQXR0cmlidXRlKHJlcXVlc3RQYXJhbWV0ZXJzKS5waXBlKFxuICAgICAgY2F0Y2hFcnJvcigoZXJyb3I6IEFjY291bnRFcnJvcikgPT4ge1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvblNlcnZpY2Uuc2hvd05vdGlmaWNhdGlvbih7XG4gICAgICAgICAgaGVhZGVyOiB0aGlzLmVycm9yTm90aWZpY2F0aW9uVGVtcGxhdGUsXG4gICAgICAgICAgbWVzc2FnZTogdGhpcy5wcm9jZXNzRXJyb3JNZXNzYWdlcyhlcnJvcj8ubWVzc2FnZXMpIGFzIHN0cmluZyxcbiAgICAgICAgICBtb2RpZmllcjogJ2Vycm9yJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvZignJyk7XG4gICAgICB9KSxcbiAgICApO1xuICB9XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gZXh0ZW5zaW9uIHNsb3QgdG8gYmUgdXNlZCBmb3IgY3VzdG9taXppbmcgdGhlIE5vQWNjb3VudFNlbGVjdGVkIHN0YXRlXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqXG4gKiAjIyMgQ3VzdG9taXplIHRoZSBOb0FjY291bnRTZWxlY3RlZCB2aWV3XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXRlbXBsYXRlXG4gKiAgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNOb0FjY291bnRTZWxlY3RlZEN1c3RvbWl6YWJsZVxuICogIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiPlxuICogICBZb3VyIGN1c3RvbSB0ZW1wbGF0ZSBoZXJlXG4gKiA8L25nLXRlbXBsYXRlPlxuICogYGBgXG4gKlxuICogQE5nTW9kdWxlIFByb2R1Y3RTdW1tYXJ5RGV0YWlsc1dpZGdldE1vZHVsZVxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJQcm9kdWN0U3VtbWFyeURldGFpbHNOb0FjY291bnRTZWxlY3RlZEN1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBQcm9kdWN0U3VtbWFyeURldGFpbHNOb0FjY291bnRTZWxlY3RlZEN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8XG4gIFByb2R1Y3RTdW1tYXJ5RGV0YWlsc0NvbXBvbmVudCxcbiAgUHJvZHVjdFR5cGVcbj4ge31cbi8qKlxuICogVGhpcyBpcyBhbiBleHRlbnNpb24gc2xvdCB0byBiZSB1c2VkIGZvciBjdXN0b21pemluZyB0aGUgbG9hZGluZyBzdGF0ZVxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogIyMjIEN1c3RvbWl6ZSB0aGUgbG9hZGluZyB2aWV3XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXRlbXBsYXRlXG4gKiAgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNMb2FkaW5nQ3VzdG9taXphYmxlXG4gKiAgW2JiSG9zdFJlZl09XCJob3N0UmVmXCI+XG4gKiAgIFlvdXIgY3VzdG9tIHRlbXBsYXRlIGhlcmVcbiAqIDwvbmctdGVtcGxhdGU+XG4gKiBgYGBcbiAqXG4gKiBATmdNb2R1bGUgUHJvZHVjdFN1bW1hcnlEZXRhaWxzV2lkZ2V0TW9kdWxlXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc0xvYWRpbmdDdXN0b21pemFibGVdJyxcbn0pXG5leHBvcnQgY2xhc3MgUHJvZHVjdFN1bW1hcnlEZXRhaWxzTG9hZGluZ0N1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8XG4gIFByb2R1Y3RTdW1tYXJ5RGV0YWlsc0NvbXBvbmVudCxcbiAgUHJvZHVjdFR5cGVcbj4ge31cbi8qKlxuICogVGhpcyBpcyBhbiBleHRlbnNpb24gc2xvdCB0byBiZSB1c2VkIGZvciBjdXN0b21pemluZyB0aGUgZW50aXJlIHZpZXdcbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICpcbiAqICMjIyBDdXN0b21pemUgdGhlIGVudGlyZSB2aWV3XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXRlbXBsYXRlXG4gKiAgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNWaWV3Q3VzdG9taXphYmxlXG4gKiAgbGV0LWhvc3RSZWZcbiAqICBsZXQtaXRlbT1cImNvbnRleHRcIj5cbiAqICAgWW91ciBjdXN0b20gdGVtcGxhdGUgaGVyZVxuICogPC9uZy10ZW1wbGF0ZT5cbiAqIGBgYFxuICpcbiAqIEBOZ01vZHVsZSBQcm9kdWN0U3VtbWFyeURldGFpbHNXaWRnZXRNb2R1bGVcbiAqL1xuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiUHJvZHVjdFN1bW1hcnlEZXRhaWxzVmlld0N1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBQcm9kdWN0U3VtbWFyeURldGFpbHNWaWV3Q3VzdG9taXphYmxlRGlyZWN0aXZlIGV4dGVuZHMgQmJUZW1wbGF0ZTxcbiAgUHJvZHVjdFN1bW1hcnlEZXRhaWxzQ29tcG9uZW50LFxuICBQcm9kdWN0VHlwZVxuPiB7fVxuLyoqXG4gKiBUaGlzIGlzIGFuIGV4dGVuc2lvbiBzbG90IHRvIGJlIHVzZWQgZm9yIGN1c3RvbWl6aW5nIHRoZSBoZWFkZXJcbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICpcbiAqICMjIyBDdXN0b21pemUgdGhlIGhlYWRlclxuICpcbiAqIGBgYGh0bWxcbiAqIDxuZy10ZW1wbGF0ZVxuICogICBiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc0hlYWRlckN1c3RvbWl6YWJsZVxuICogICBsZXQtaG9zdFJlZlxuICogICBsZXQtaXRlbT1cImNvbnRleHRcIj5cbiAqICAgWW91ciBjdXN0b20gdGVtcGxhdGUgaGVyZVxuICogPC9uZy10ZW1wbGF0ZT5cbiAqIGBgYFxuICpcbiAqIEBOZ01vZHVsZSBQcm9kdWN0U3VtbWFyeURldGFpbHNXaWRnZXRNb2R1bGVcbiAqL1xuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiUHJvZHVjdFN1bW1hcnlEZXRhaWxzSGVhZGVyQ3VzdG9taXphYmxlXScsXG59KVxuZXhwb3J0IGNsYXNzIFByb2R1Y3RTdW1tYXJ5RGV0YWlsc0hlYWRlckN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8XG4gIFByb2R1Y3RTdW1tYXJ5RGV0YWlsc0NvbXBvbmVudCxcbiAgUHJvZHVjdFR5cGVcbj4ge31cbi8qKlxuICogVGhpcyBpcyBhbiBleHRlbnNpb24gc2xvdCB0byBiZSB1c2VkIGZvciBjdXN0b21pemluZyBkZXRhaWxzXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqXG4gKiAjIyMgQ3VzdG9taXplIGRldGFpbHNcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmctdGVtcGxhdGVcbiAqICAgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNDdXN0b21pemFibGVcbiAqICAgbGV0LWhvc3RSZWZcbiAqICAgbGV0LWl0ZW09XCJjb250ZXh0XCI+XG4gKiAgIFlvdXIgY3VzdG9tIHRlbXBsYXRlIGhlcmVcbiAqIDwvbmctdGVtcGxhdGU+XG4gKiBgYGBcbiAqXG4gKiBATmdNb2R1bGUgUHJvZHVjdFN1bW1hcnlEZXRhaWxzV2lkZ2V0TW9kdWxlXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc0N1c3RvbWl6YWJsZV0nLFxufSlcbmV4cG9ydCBjbGFzcyBQcm9kdWN0U3VtbWFyeURldGFpbHNDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFByb2R1Y3RTdW1tYXJ5RGV0YWlsc0NvbXBvbmVudCwgdW5kZWZpbmVkPiB7fVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cIigoaG9zdFJlZi5tdWx0aXBsZSB8IGFzeW5jKSA9PT0gZmFsc2UpOyBlbHNlIG11bHRpcGxlQWNjb3VudHNcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInByb2R1Y3RJZCB8IGFzeW5jIGFzIHByb2R1Y3RJZDsgZWxzZSBub0FjY291bnRTZWxlY3RlZFwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIoKGlzTG9hZGluZyB8IGFzeW5jKSA9PT0gZmFsc2UpICYmICEoZXJyb3IgfCBhc3luYyB8IGJiSXNEZWZpbmVkKSAmJiAoaXRlbSB8IGFzeW5jKSBhcyBpdGVtOyBlbHNlIGxvYWRpbmdUZW1wbGF0ZVwiPlxuICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICBiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc1ZpZXdDdXN0b21pemFibGVcbiAgICAgICAgW2JiSG9zdFJlZl09XCJob3N0UmVmXCJcbiAgICAgICAgW2JiVGVtcGxhdGVDb250ZXh0XT1cIml0ZW1cIj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuXG48IS0tIFByb2R1Y3Qgc3VtbWFyeSB3cmFwcGVyIHRlbXBsYXRlIC0tPlxuPG5nLXRlbXBsYXRlXG4gIGJiUHJvZHVjdFN1bW1hcnlEZXRhaWxzVmlld0N1c3RvbWl6YWJsZVxuICBsZXQtaG9zdFJlZlxuICBsZXQtaXRlbT1cImNvbnRleHRcIj5cblxuICA8bmctY29udGFpbmVyXG4gICAgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNIZWFkZXJDdXN0b21pemFibGVcbiAgICBbYmJIb3N0UmVmXT1cImhvc3RSZWZcIlxuICAgIFtiYlRlbXBsYXRlQ29udGV4dF09XCJpdGVtXCI+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy1jb250YWluZXJcbiAgICBiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc0N1c3RvbWl6YWJsZVxuICAgIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiXG4gICAgW2JiVGVtcGxhdGVDb250ZXh0XT1cIml0ZW1cIj5cbiAgPC9uZy1jb250YWluZXI+XG48L25nLXRlbXBsYXRlPlxuXG48IS0tIFByb2R1Y3Qgc3VtbWFyeSBoZWFkZXIgdGVtcGxhdGUgLS0+XG48bmctdGVtcGxhdGVcbiAgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNIZWFkZXJDdXN0b21pemFibGVcbiAgbGV0LWhvc3RSZWZcbiAgbGV0LWl0ZW09XCJjb250ZXh0XCI+XG4gIDxkaXZcbiAgICBjbGFzcz1cImJiLXN0YWNrIGJiLWJsb2NrIGJiLWJsb2NrLS14bFwiXG4gICAgZGF0YS1yb2xlPVwicHJvZHVjdC1zdW1tYXJ5LWRldGFpbHMtaGVhZGVyXCJcbiAgPlxuICAgIDxoMlxuICAgICAgY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tZmlsbFwiXG4gICAgICBkYXRhLXJvbGU9XCJwcm9kdWN0LXN1bW1hcnktZGV0YWlscy1oZWFkZXItbmFtZVwiXG4gICAgPlxuICAgICAge3tpdGVtLmRpc3BsYXlOYW1lfX1cbiAgICA8L2gyPlxuICAgIDxidXR0b25cbiAgICAgIGJiQnV0dG9uXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIGNvbG9yPVwic2Vjb25kYXJ5XCJcbiAgICAgIGRhdGEtcm9sZT1cInByaW50XCJcbiAgICAgIGNsYXNzPVwiYmItc3RhY2tfX2l0ZW1cIlxuICAgICAgYnV0dG9uU2l6ZT1cIm1kXCJcbiAgICAgIFtjaXJjbGVdPVwidHJ1ZVwiXG4gICAgICAoY2xpY2spPVwiaG9zdFJlZi5wcmludCgpXCJcbiAgICA+XG4gICAgICA8YmItaWNvbi11aSBuYW1lPVwicHJpbnRcIj48L2JiLWljb24tdWk+XG4gICAgICA8c3BhblxuICAgICAgICBjbGFzcz1cInNyLW9ubHlcIlxuICAgICAgICBkYXRhLXJvbGU9XCJidXR0b24tcHJpbnRcIlxuICAgICAgICBpMThuPVwicHJpbnQgYnV0dG9uQEBwcm9kdWN0LmRldGFpbHMuYnV0dG9uLnByaW50XCJcbiAgICAgID5QcmludDwvc3Bhbj5cbiAgICA8L2J1dHRvbj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuXG48IS0tIFByb2R1Y3Qgc3VtbWFyeSBkZXRhaWxzIHRlbXBsYXRlIC0tPlxuPG5nLXRlbXBsYXRlXG4gIGJiUHJvZHVjdFN1bW1hcnlEZXRhaWxzQ3VzdG9taXphYmxlXG4gIGxldC1ob3N0UmVmXG4gIGxldC1pdGVtPVwiY29udGV4dFwiPlxuICA8bmctY29udGFpbmVyXG4gICAgW25nU3dpdGNoXT1cIml0ZW0ucHJvZHVjdEtpbmROYW1lXCI+XG4gICAgPCEtLSBDdXJyZW50IEFjY291bnQgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiaG9zdFJlZi5wcm9kdWN0S2luZE5hbWVzLkNVUlJFTlRfQUNDT1VOVFwiPlxuICAgICAgPGJiLWN1cnJlbnQtYWNjb3VudC1kZXRhaWxzXG4gICAgICAgIFtwcm9kdWN0XT1cIml0ZW1cIlxuICAgICAgICBbbWFza2FibGVBdHRyaWJ1dGVzXT1cImhvc3RSZWYubWFza2FibGVBdHRyaWJ1dGVzXCJcbiAgICAgICAgKHVubWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uVW5tYXNrQXR0cmlidXRlKCRldmVudCwgaXRlbSlcIlxuICAgICAgICAobWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uTWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgID5cbiAgICAgIDwvYmItY3VycmVudC1hY2NvdW50LWRldGFpbHM+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPCEtLSBTYXZpbmdzIEFjY291bnQgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiaG9zdFJlZi5wcm9kdWN0S2luZE5hbWVzLlNBVklOR1NfQUNDT1VOVFwiPlxuICAgICAgPGJiLXNhdmluZ3MtYWNjb3VudC1kZXRhaWxzXG4gICAgICAgIFtwcm9kdWN0XT1cIml0ZW1cIlxuICAgICAgICBbbWFza2FibGVBdHRyaWJ1dGVzXT1cImhvc3RSZWYubWFza2FibGVBdHRyaWJ1dGVzXCJcbiAgICAgICAgKHVubWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uVW5tYXNrQXR0cmlidXRlKCRldmVudCwgaXRlbSlcIlxuICAgICAgICAobWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uTWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgID5cbiAgICAgIDwvYmItc2F2aW5ncy1hY2NvdW50LWRldGFpbHM+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPCEtLSBUZXJtIERlcG9zaXQgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiaG9zdFJlZi5wcm9kdWN0S2luZE5hbWVzLlRFUk1fREVQT1NJVFwiPlxuICAgICAgPGJiLXRlcm0tZGVwb3NpdC1kZXRhaWxzXG4gICAgICAgIFtwcm9kdWN0XT1cIml0ZW1cIlxuICAgICAgICBbbWFza2FibGVBdHRyaWJ1dGVzXT1cImhvc3RSZWYubWFza2FibGVBdHRyaWJ1dGVzXCJcbiAgICAgICAgKHVubWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uVW5tYXNrQXR0cmlidXRlKCRldmVudCwgaXRlbSlcIlxuICAgICAgICAobWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uTWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgID5cbiAgICAgIDwvYmItdGVybS1kZXBvc2l0LWRldGFpbHM+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPCEtLSBMb2FuIC0tPlxuICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImhvc3RSZWYucHJvZHVjdEtpbmROYW1lcy5MT0FOXCI+XG4gICAgICA8YmItbG9hbi1kZXRhaWxzXG4gICAgICAgIFtwcm9kdWN0XT1cIml0ZW1cIlxuICAgICAgICBbbWFza2FibGVBdHRyaWJ1dGVzXT1cImhvc3RSZWYubWFza2FibGVBdHRyaWJ1dGVzXCJcbiAgICAgICAgKHVubWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uVW5tYXNrQXR0cmlidXRlKCRldmVudCwgaXRlbSlcIlxuICAgICAgICAobWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uTWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgID5cbiAgICAgIDwvYmItbG9hbi1kZXRhaWxzPlxuICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwhLS0gQ3JlZGl0IENhcmQgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiaG9zdFJlZi5wcm9kdWN0S2luZE5hbWVzLkNSRURJVF9DQVJEXCI+XG4gICAgICA8YmItY3JlZGl0LWNhcmQtZGV0YWlsc1xuICAgICAgICBbcHJvZHVjdF09XCJpdGVtXCJcbiAgICAgICAgW21hc2thYmxlQXR0cmlidXRlc109XCJob3N0UmVmLm1hc2thYmxlQXR0cmlidXRlc1wiXG4gICAgICAgICh1bm1hc2tBdHRyaWJ1dGUpPVwiaG9zdFJlZi5vblVubWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgICAgKG1hc2tBdHRyaWJ1dGUpPVwiaG9zdFJlZi5vbk1hc2tBdHRyaWJ1dGUoJGV2ZW50LCBpdGVtKVwiXG4gICAgICA+XG4gICAgICA8L2JiLWNyZWRpdC1jYXJkLWRldGFpbHM+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPCEtLSBEZWJpdCBDYXJkIC0tPlxuICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImhvc3RSZWYucHJvZHVjdEtpbmROYW1lcy5ERUJJVF9DQVJEXCI+XG4gICAgICA8YmItZGViaXQtY2FyZC1kZXRhaWxzXG4gICAgICAgIFtwcm9kdWN0XT1cIml0ZW1cIlxuICAgICAgICBbbWFza2FibGVBdHRyaWJ1dGVzXT1cImhvc3RSZWYubWFza2FibGVBdHRyaWJ1dGVzXCJcbiAgICAgICAgKHVubWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uVW5tYXNrQXR0cmlidXRlKCRldmVudCwgaXRlbSlcIlxuICAgICAgICAobWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uTWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgID5cbiAgICAgIDwvYmItZGViaXQtY2FyZC1kZXRhaWxzPlxuICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwhLS0gSW52ZXN0bWVudCBBY2NvdW50IC0tPlxuICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cImhvc3RSZWYucHJvZHVjdEtpbmROYW1lcy5JTlZFU1RNRU5UX0FDQ09VTlRcIj5cbiAgICAgIDxiYi1pbnZlc3RtZW50LWFjY291bnQtZGV0YWlsc1xuICAgICAgICBbcHJvZHVjdF09XCJpdGVtXCJcbiAgICAgICAgW21hc2thYmxlQXR0cmlidXRlc109XCJob3N0UmVmLm1hc2thYmxlQXR0cmlidXRlc1wiXG4gICAgICAgICh1bm1hc2tBdHRyaWJ1dGUpPVwiaG9zdFJlZi5vblVubWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgICAgKG1hc2tBdHRyaWJ1dGUpPVwiaG9zdFJlZi5vbk1hc2tBdHRyaWJ1dGUoJGV2ZW50LCBpdGVtKVwiXG4gICAgICA+XG4gICAgICA8L2JiLWludmVzdG1lbnQtYWNjb3VudC1kZXRhaWxzPlxuICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwhLS1cbiAgICAgIE90aGVyIChEZWZhdWx0KTpcbiAgICAgIFRoaXMgdGVtcGxhdGUgY2FuIGJlIHVzZWQgdG8gYWRkIG1vcmUgY3VzdG9tIHByb2R1Y3RLaW5kcy5cbiAgICAgIFRoZSBwcm9kdWN0S2luZCBpcyBwYXNzZWQgdG8gdGhlIHRlbXBsYXRlIHNvIGEgY3VzdG9tZXIgY2FuIGFkZFxuICAgICAgYWRkaXRpb25hbCBzd2l0Y2gvaWYgc3RhdGVtZW50cyB0byBkZXRlcm1pbmUgd2hhdCBwcm9kdWN0IHRlbXBsYXRlIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICAtLT5cbiAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaERlZmF1bHQ+XG4gICAgICA8YmItb3RoZXItYWNjb3VudC1kZXRhaWxzXG4gICAgICAgIFtwcm9kdWN0XT1cIml0ZW1cIlxuICAgICAgICBbbWFza2FibGVBdHRyaWJ1dGVzXT1cImhvc3RSZWYubWFza2FibGVBdHRyaWJ1dGVzXCJcbiAgICAgICAgKHVubWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uVW5tYXNrQXR0cmlidXRlKCRldmVudCwgaXRlbSlcIlxuICAgICAgICAobWFza0F0dHJpYnV0ZSk9XCJob3N0UmVmLm9uTWFza0F0dHJpYnV0ZSgkZXZlbnQsIGl0ZW0pXCJcbiAgICAgID5cbiAgICAgIDwvYmItb3RoZXItYWNjb3VudC1kZXRhaWxzPlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjwhLS0gUHJvZHVjdCBzdW1tYXJ5IGRldGFpbHMgbG9hZGluZyB0ZW1wbGF0ZSAtLT5cbjxuZy10ZW1wbGF0ZSAjbG9hZGluZ1RlbXBsYXRlPlxuICA8bmctY29udGFpbmVyIGJiUHJvZHVjdFN1bW1hcnlEZXRhaWxzTG9hZGluZ0N1c3RvbWl6YWJsZVxuICAgICAgICAgICAgICAgIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZVxuICBiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc0xvYWRpbmdDdXN0b21pemFibGVcbiAgbGV0LWhvc3RSZWY+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJob3N0UmVmLmVycm9yIHwgYXN5bmMgYXMgZXJyb3I7IGVsc2UgbG9hZGluZ1wiPlxuICAgIDxiYi1lbXB0eS1zdGF0ZS11aVxuICAgICAgaWNvblNpemU9XCJ4eGxcIlxuICAgICAgaWNvbk1vZGlmaWVyPVwiZXJyb3Itb3V0bGluZVwiXG4gICAgICBpY29uQ2xhc3Nlcz1cInRleHQtbXV0ZWRcIlxuICAgICAgW3RpdGxlXT1cIicnXCJcbiAgICAgIFtzdWJ0aXRsZV09XCJob3N0UmVmLnByb2Nlc3NFcnJvck1lc3NhZ2VzKGVycm9yLm1lc3NhZ2VzKVwiXG4gICAgPjwvYmItZW1wdHktc3RhdGUtdWk+XG4gIDwvbmctY29udGFpbmVyPlxuICA8bmctdGVtcGxhdGUgI2xvYWRpbmc+XG4gICAgPGJiLWxvYWRpbmctaW5kaWNhdG9yLXVpXG4gICAgICBpMThuLXRleHQ9XCJAQHByb2R1Y3QuZGV0YWlscy5sb2FkaW5nQWNjb3VudHNcIlxuICAgICAgW3RleHRdPVwiJ0xvYWRpbmcgQWNjb3VudHMuLi4nXCJcbiAgICA+PC9iYi1sb2FkaW5nLWluZGljYXRvci11aT5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctdGVtcGxhdGU+XG5cbjwhLS0gUHJvZHVjdCBzdW1tYXJ5IGRldGFpbHMgbm8gYWNjb3VudCBzZWxlY3RlZCB0ZW1wbGF0ZSAtLT5cbjxuZy10ZW1wbGF0ZSAjbm9BY2NvdW50U2VsZWN0ZWQ+XG4gIDxuZy1jb250YWluZXIgYmJQcm9kdWN0U3VtbWFyeURldGFpbHNOb0FjY291bnRTZWxlY3RlZEN1c3RvbWl6YWJsZVxuICAgICAgICAgICAgICAgIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZVxuICBiYlByb2R1Y3RTdW1tYXJ5RGV0YWlsc05vQWNjb3VudFNlbGVjdGVkQ3VzdG9taXphYmxlXG4gIGxldC1ob3N0UmVmPlxuICA8YmItZW1wdHktc3RhdGUtdWlcbiAgICBpMThuLXRpdGxlPVwiTm8gYWNjb3VudHMgc2VsZWN0ZWQgdGl0dGxlfEVtcHR5IHN0YXRlIHRpdGxlIGxhYmVsIHdoZW4gdGhlcmUgYXJlIG5vIGFjY291bnQgZGV0YWlsc0BAcHJvZHVjdC5kZXRhaWxzLmVtcHR5LnRpdGxlXCJcbiAgICBbdGl0bGVdPVwiJ05vIGFjY291bnQocykgc2VsZWN0ZWQuJ1wiXG4gICAgaTE4bi1zdWJ0aXRsZT1cIk5vIGFjY291bnRzIHNlbGVjdGVkIHN1YnRpdGxlfEVtcHR5IHN0YXRlIHN1YnRpdGxlIGxhYmVsIHdoZW4gdGhlcmUgYXJlIG5vIGFjY291bnQgZGV0YWlsc0BAcHJvZHVjdC5kZXRhaWxzLmVtcHR5LnN1YnRpdGxlXCJcbiAgICBbc3VidGl0bGVdPVwiJ1BsZWFzZSBzZWxlY3QgYW4gYWNjb3VudCBmaXJzdC4nXCJcbiAgPlxuICA8L2JiLWVtcHR5LXN0YXRlLXVpPlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNtdWx0aXBsZUFjY291bnRzPlxuICA8YmItZW1wdHktc3RhdGUtdWlcbiAgICBkYXRhLXJvbGU9XCJwcm9kdWN0LXN1bW1hcnktZGV0YWlscy1lcnJvci1tdWx0aS1zZWxlY3Rpb25cIlxuICAgIGljb25TaXplPVwieHhsXCJcbiAgICBpY29uTW9kaWZpZXI9XCJlcnJvci1vdXRsaW5lXCJcbiAgICBpY29uQ2xhc3Nlcz1cInRleHQtbXV0ZWRcIlxuICAgIHRpdGxlPVwiWW91IGhhdmUgc2VsZWN0ZWQgbXVsdGlwbGUgYWNjb3VudHNcIlxuICAgIGkxOG4tdGl0bGU9XCJZb3UgaGF2ZSBzZWxlY3RlZCBtdWx0aXBsZSBhY2NvdW50c3xFcnJvciB0aXRsZSB3aGVuIGdldHRpbmcgbXVsdGlwbGUgYWNjb3VudHNAQHByb2R1Y3QuZGV0YWlscy5lcnJvci5tdWx0aXBsZS50aXRsZVwiXG4gICAgc3VidGl0bGU9XCJQbGVhc2Ugc2VsZWN0IG9ubHkgb25lIGFjY291bnQgdG8gZGlzcGxheSB0aGUgYWNjb3VudCBpbmZvcm1hdGlvblwiXG4gICAgaTE4bi1zdWJ0aXRsZT1cIlBsZWFzZSBzZWxlY3Qgb25seSBvbmUgYWNjb3VudCB0byBkaXNwbGF5IHRoZSBhY2NvdW50IGluZm9ybWF0aW9ufEVycm9yIHN1YnRpdGxlIHdoZW4gZ2V0dGluZyBtdWx0aXBsZSBhY2NvdW50c0BAcHJvZHVjdC5kZXRhaWxzLmVycm9yLm11bHRpcGxlLnN1YnRpdGxlXCJcbiAgPjwvYmItZW1wdHktc3RhdGUtdWk+XG48L25nLXRlbXBsYXRlPlxuIl19