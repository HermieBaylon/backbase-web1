import { DatePipe } from '@angular/common';
import { Component, Directive, Input, ViewChild } from '@angular/core';
import { BbTemplate } from '@backbase/foundation-ang/core';
import { BehaviorSubject, combineLatest, of } from 'rxjs';
import { catchError, filter, map, pluck, switchMap, tap } from 'rxjs/operators';
import { DEFAULT_INTERVAL, DEFAULT_START_DAY, PERIODS } from '../constants';
import { parseError, } from '../model/turnovers';
import { TurnoversWidgetHelpersService } from '../turnovers-widget-helpers.service';
import { TurnoversService } from '../turnovers.service';
import * as i0 from "@angular/core";
import * as i1 from "../turnovers.service";
import * as i2 from "@angular/router";
import * as i3 from "../turnovers-widget-helpers.service";
import * as i4 from "../turnovers-bar-chart/turnovers-bar-chart.component";
import * as i5 from "@backbase/ui-ang/loading-indicator";
import * as i6 from "@backbase/ui-ang/empty-state";
import * as i7 from "@angular/common";
import * as i8 from "@backbase/ui-ang/button";
export class TurnoversComponent {
    constructor(service, route, helpers) {
        this.service = service;
        this.route = route;
        this.helpers = helpers;
        /**
         * Disable/enable the forecast option on the chart.
         */
        this.forecast = false;
        this.hostRef = this;
        this.selectedTab = PERIODS[Math.max(PERIODS.map((item) => item.default).indexOf(true), 0)];
        this.isLoading = new BehaviorSubject(false);
        this.initialDateParams = {
            periodStartDate: this.helpers.periodToDate(PERIODS[0]),
            periodEndDate: new Date().toISOString().slice(0, 10),
            intervalDuration: DEFAULT_INTERVAL,
            intervalStartDay: DEFAULT_START_DAY,
        };
        this.arrangementIds = this.getRouteParam(this.route, 'selectedAccount').pipe(map((selectedAccount) => (selectedAccount ? [selectedAccount] : [])));
        this.dateParams = new BehaviorSubject(this.initialDateParams);
        this.chartSeriesData = combineLatest(this.arrangementIds, this.dateParams.asObservable()).pipe(tap(() => (this.error = undefined)), filter(([selectedAccounts]) => !!selectedAccounts.length), map(([selectedAccounts, dateParams]) => (Object.assign(Object.assign({ arrangementIds: selectedAccounts }, dateParams), { forecast: this.forecast ? 'AVG' : undefined }))), switchMap((params) => {
            this.isLoading.next(true);
            const data = this.service.loadAnalysisData(params);
            data.subscribe({ complete: () => this.isLoading.next(false) });
            return data;
        }), map((items) => items.map(this.helpers.extendTurnoverItem)), map((items) => this.helpers.getChartData(items, this.labels)), catchError((error) => {
            this.handleError(error);
            return of([]);
        }));
        this.handleError = (error) => {
            this.error = parseError(error);
            return of([]);
        };
    }
    get labels() {
        return {
            income: this.incomeRef.nativeElement.textContent,
            spending: this.spendingRef.nativeElement.textContent,
            forecast: this.forecastRef.nativeElement.textContent,
        };
    }
    getRouteParam(route, param) {
        const paramValue = route.paramMap.pipe(pluck('params', param));
        if (!route.parent) {
            return paramValue;
        }
        // ensure that level that has actual value keeps it from being cleared
        return combineLatest(paramValue, this.getRouteParam(route.parent, param)).pipe(map((params) => params[0] || params[1]));
    }
    onTabChange(num) {
        this.selectedTab = PERIODS[Math.max(PERIODS.map((item) => item.duration).indexOf(num), 0)];
        this.dateParams.next(Object.assign(Object.assign({}, this.initialDateParams), { periodStartDate: this.helpers.periodToDate(this.selectedTab), periodEndDate: new Date().toISOString().slice(0, 10) }));
    }
}
TurnoversComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversComponent, deps: [{ token: i1.TurnoversService }, { token: i2.ActivatedRoute }, { token: i3.TurnoversWidgetHelpersService }], target: i0.ɵɵFactoryTarget.Component });
TurnoversComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: TurnoversComponent, selector: "bb-turnovers", inputs: { forecast: "forecast" }, providers: [TurnoversService, DatePipe, TurnoversWidgetHelpersService], viewQueries: [{ propertyName: "incomeRef", first: true, predicate: ["incomeLabel"], descendants: true, static: true }, { propertyName: "spendingRef", first: true, predicate: ["spendingLabel"], descendants: true, static: true }, { propertyName: "forecastRef", first: true, predicate: ["forecastLabel"], descendants: true, static: true }], ngImport: i0, template: "<ng-container *ngIf=\"(arrangementIds | async)?.length; else emptyState\">\n  <ng-container *ngIf=\"chartSeriesData | async; let data; else loadingState\">\n    <div *ngIf=\"!error; else errorState\">\n      <div *ngIf=\"data.length; else emptyState\">\n        <ng-container \n          bbTurnoversItemCustomizable \n          [bbHostRef]=\"hostRef\" \n          [bbTemplateContext]=\"data\"\n        ></ng-container>\n      </div>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template bbTurnoversItemCustomizable let-hostRef let-chartSeriesData=\"context\">\n  <ng-container bbTurnoversControlsCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n  <bb-turnovers-bar-chart\n    *ngIf=\"(isLoading | async) === false; else loadingState\"\n    class=\"bb-turnovers-bar-chart bb-chart\"\n    [chartSeriesData]=\"chartSeriesData\"\n    [forecast]=\"forecast\">\n  </bb-turnovers-bar-chart>\n</ng-template>\n<ng-template bbTurnoversControlsCustomizable let-hostRef>\n  <div class=\"bb-turnovers-controls\">\n    <div class=\"btn-group btn-group-sm\">\n      <button\n        bbButton\n        data-role=\"6-month-btn\"\n        [value]='6'\n        (click)=\"hostRef.onTabChange(6)\"\n        [color]=\"hostRef.selectedTab.duration === 6 ? 'primary' : 'secondary'\"\n        i18n=\"Data period|Six month label@@turnovers.label.duration.month.six\"\n      >\n        6 Months\n      </button>\n      <button\n        bbButton \n        data-role=\"12-month-btn\"\n        [value]='12'\n        (click)=\"hostRef.onTabChange(12)\"\n        [color]=\"hostRef.selectedTab.duration === 12 ? 'primary' : 'secondary'\"\n        i18n=\"Data period|Twelve month label@@turnovers.label.duration.month.twelve\"\n      >\n        12 Months\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #loadingState>\n  <bb-loading-indicator-ui\n    i18n-text=\"Loading turnovers data|Text to display while loading turnovers@@turnovers.state.loadingTurnovers\"\n    text=\"Loading transactions data...\"\n  ></bb-loading-indicator-ui>\n</ng-template>\n\n<ng-template #emptyState>\n  <ng-container bbTurnoversEmptyStateCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n</ng-template>\n\n<ng-template bbTurnoversEmptyStateCustomizable let-hostRef>\n  <ng-container bbTurnoversControlsCustomizable [bbHostRef]=\"hostRef\"></ng-container>\n    <bb-empty-state-ui\n      i18n-title=\"No data title|Title of a message that is shown when there are no turnovers@@turnovers.state.noResultsFound.title\"\n      title=\"No data found\"\n      i18n-subtitle=\"No data subtitle|Subtitle of a message that is shown when there are no turnovers@@turnovers.state.noResultsFound.subtitle\"\n      subtitle=\"You don't have any data to be displayed. Please try selecting a different period.\"\n      iconSize=\"xxl\"\n      iconModifier=\"bar-chart\"\n    ></bb-empty-state-ui>\n</ng-template>\n\n<ng-template #errorState>\n  <bb-empty-state-ui\n    data-role=\"errorState\"\n    title=\"\"\n    [subtitle]=\"error?.message\"\n    iconModifier=\"error\"\n    iconSize=\"xxl\"\n    iconColor=\"gray\"\n    iconClasses=\"text-muted\"\n  ></bb-empty-state-ui>\n</ng-template>\n\n<span #incomeLabel class=\"ng-cloak\" i18n=\"Incoming|Label for income dataset on the chart@@turnovers.chart.income\">Incoming</span>\n<span #spendingLabel class=\"ng-cloak\" i18n=\"Outgoing|Label for spending dataset on the chart@@turnovers.chart.spending\">Outgoing</span>\n<span #forecastLabel class=\"ng-cloak\" i18n=\"forecast|Label for forecast data on the chart@@turnovers.chart.forecast\">Forecast</span>\n", components: [{ type: i0.forwardRef(function () { return i4.TurnoversBarChartComponent; }), selector: "bb-turnovers-bar-chart", inputs: ["chartSeriesData", "forecast"] }, { type: i0.forwardRef(function () { return i5.LoadingIndicatorComponent; }), selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }, { type: i0.forwardRef(function () { return i6.EmptyStateComponent; }), selector: "bb-empty-state-ui", inputs: ["title", "subtitle", "showIcon", "iconClasses", "iconModifier", "iconSize", "iconColor"] }], directives: [{ type: i0.forwardRef(function () { return i7.NgIf; }), selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i0.forwardRef(function () { return TurnoversItemCustomizableDirective; }), selector: "[bbTurnoversItemCustomizable]" }, { type: i0.forwardRef(function () { return TurnoversControlsCustomizableDirective; }), selector: "[bbTurnoversControlsCustomizable]" }, { type: i0.forwardRef(function () { return i8.ButtonDirective; }), selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i0.forwardRef(function () { return TurnoversEmptyStateCustomizableDirective; }), selector: "[bbTurnoversEmptyStateCustomizable]" }], pipes: { "async": i0.forwardRef(function () { return i7.AsyncPipe; }) } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-turnovers',
                    templateUrl: './turnovers.component.html',
                    providers: [TurnoversService, DatePipe, TurnoversWidgetHelpersService],
                }]
        }], ctorParameters: function () { return [{ type: i1.TurnoversService }, { type: i2.ActivatedRoute }, { type: i3.TurnoversWidgetHelpersService }]; }, propDecorators: { forecast: [{
                type: Input
            }], incomeRef: [{
                type: ViewChild,
                args: ['incomeLabel', { static: true }]
            }], spendingRef: [{
                type: ViewChild,
                args: ['spendingLabel', { static: true }]
            }], forecastRef: [{
                type: ViewChild,
                args: ['forecastLabel', { static: true }]
            }] } });
export class TurnoversItemCustomizableDirective extends BbTemplate {
}
TurnoversItemCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversItemCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
TurnoversItemCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: TurnoversItemCustomizableDirective, selector: "[bbTurnoversItemCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversItemCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbTurnoversItemCustomizable]',
                }]
        }] });
export class TurnoversControlsCustomizableDirective extends BbTemplate {
}
TurnoversControlsCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversControlsCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
TurnoversControlsCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: TurnoversControlsCustomizableDirective, selector: "[bbTurnoversControlsCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversControlsCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbTurnoversControlsCustomizable]',
                }]
        }] });
export class TurnoversEmptyStateCustomizableDirective extends BbTemplate {
}
TurnoversEmptyStateCustomizableDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversEmptyStateCustomizableDirective, deps: null, target: i0.ɵɵFactoryTarget.Directive });
TurnoversEmptyStateCustomizableDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: TurnoversEmptyStateCustomizableDirective, selector: "[bbTurnoversEmptyStateCustomizable]", usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: TurnoversEmptyStateCustomizableDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[bbTurnoversEmptyStateCustomizable]',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHVybm92ZXJzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvdHVybm92ZXJzLXdpZGdldC9zcmMvdHVybm92ZXJzL3R1cm5vdmVycy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL3R1cm5vdmVycy13aWRnZXQvc3JjL3R1cm5vdmVycy90dXJub3ZlcnMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTNDLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFjLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFbkYsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzNELE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQVUsT0FBTyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3BGLE9BQU8sRUFHTCxVQUFVLEdBSVgsTUFBTSxvQkFBb0IsQ0FBQztBQUM1QixPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUNwRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7Ozs7Ozs7OztBQU94RCxNQUFNLE9BQU8sa0JBQWtCO0lBa0I3QixZQUNtQixPQUF5QixFQUN6QixLQUFxQixFQUNyQixPQUFzQztRQUZ0QyxZQUFPLEdBQVAsT0FBTyxDQUFrQjtRQUN6QixVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQUNyQixZQUFPLEdBQVAsT0FBTyxDQUErQjtRQXBCekQ7O1dBRUc7UUFDTSxhQUFRLEdBQUksS0FBSyxDQUFDO1FBUWxCLFlBQU8sR0FBRyxJQUFJLENBQUM7UUFFeEIsZ0JBQVcsR0FBVyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFOUYsY0FBUyxHQUE2QixJQUFJLGVBQWUsQ0FBVSxLQUFLLENBQUMsQ0FBQztRQVF6RCxzQkFBaUIsR0FBd0I7WUFDeEQsZUFBZSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RCxhQUFhLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNwRCxnQkFBZ0IsRUFBRSxnQkFBZ0I7WUFDbEMsZ0JBQWdCLEVBQUUsaUJBQWlCO1NBQ3BDLENBQUM7UUFFTyxtQkFBYyxHQUF5QixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQ3BHLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQ3JFLENBQUM7UUFFTyxlQUFVLEdBQXlDLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBRS9GLG9CQUFlLEdBQTRCLGFBQWEsQ0FDL0QsSUFBSSxDQUFDLGNBQWMsRUFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FDL0IsQ0FBQyxJQUFJLENBQ0osR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsQ0FBQyxFQUNuQyxNQUFNLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsRUFDekQsR0FBRyxDQUNELENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFVLENBQUMsRUFBc0IsRUFBRSxDQUFDLCtCQUN0RCxjQUFjLEVBQUUsZ0JBQWdCLElBQzdCLFVBQVUsS0FDYixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLElBQzNDLENBQ0gsRUFDRCxTQUFTLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUNuQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ25ELElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQy9ELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQyxDQUFDLEVBQ0YsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxFQUMxRCxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFDN0QsVUFBVSxDQUFDLENBQUMsS0FBd0IsRUFBRSxFQUFFO1lBQ3RDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEIsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQ0gsQ0FBQztRQXVCRixnQkFBVyxHQUFHLENBQUMsS0FBd0IsRUFBRSxFQUFFO1lBQ3pDLElBQUksQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQy9CLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLENBQUMsQ0FBQztJQWxFQyxDQUFDO0lBMENKLElBQUksTUFBTTtRQUNSLE9BQU87WUFDTCxNQUFNLEVBQWUsSUFBSSxDQUFDLFNBQVUsQ0FBQyxhQUFhLENBQUMsV0FBVztZQUM5RCxRQUFRLEVBQWUsSUFBSSxDQUFDLFdBQVksQ0FBQyxhQUFhLENBQUMsV0FBVztZQUNsRSxRQUFRLEVBQWUsSUFBSSxDQUFDLFdBQVksQ0FBQyxhQUFhLENBQUMsV0FBVztTQUNuRSxDQUFDO0lBQ0osQ0FBQztJQUVPLGFBQWEsQ0FBQyxLQUFxQixFQUFFLEtBQWE7UUFDeEQsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUEwQixRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUV4RixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtZQUNqQixPQUFPLFVBQVUsQ0FBQztTQUNuQjtRQUVELHNFQUFzRTtRQUN0RSxPQUFPLGFBQWEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUM1RSxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDeEMsQ0FBQztJQUNKLENBQUM7SUFPRCxXQUFXLENBQUMsR0FBVztRQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksaUNBQ2YsSUFBSSxDQUFDLGlCQUFpQixLQUN6QixlQUFlLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUM1RCxhQUFhLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUNwRCxDQUFDO0lBQ0wsQ0FBQzs7Z0hBakdVLGtCQUFrQjtvR0FBbEIsa0JBQWtCLHlFQUZsQixDQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBRSw2QkFBNkIsQ0FBQyw0V0N0QnhFLDgvR0F3RkEsb3VCRHVDYSxrQ0FBa0MsOEZBS2xDLHNDQUFzQyxpUUFLdEMsd0NBQXdDOzRGQWpIeEMsa0JBQWtCO2tCQUw5QixTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxjQUFjO29CQUN4QixXQUFXLEVBQUUsNEJBQTRCO29CQUN6QyxTQUFTLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsNkJBQTZCLENBQUM7aUJBQ3ZFO2dMQUtVLFFBQVE7c0JBQWhCLEtBQUs7Z0JBRU4sU0FBUztzQkFEUixTQUFTO3VCQUFDLGFBQWEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7Z0JBRzFDLFdBQVc7c0JBRFYsU0FBUzt1QkFBQyxlQUFlLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUc1QyxXQUFXO3NCQURWLFNBQVM7dUJBQUMsZUFBZSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7QUE4RjlDLE1BQU0sT0FBTyxrQ0FBbUMsU0FBUSxVQUF1RDs7Z0lBQWxHLGtDQUFrQztvSEFBbEMsa0NBQWtDOzRGQUFsQyxrQ0FBa0M7a0JBSDlDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLCtCQUErQjtpQkFDMUM7O0FBTUQsTUFBTSxPQUFPLHNDQUF1QyxTQUFRLFVBQXlDOztvSUFBeEYsc0NBQXNDO3dIQUF0QyxzQ0FBc0M7NEZBQXRDLHNDQUFzQztrQkFIbEQsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsbUNBQW1DO2lCQUM5Qzs7QUFNRCxNQUFNLE9BQU8sd0NBQXlDLFNBQVEsVUFBeUM7O3NJQUExRix3Q0FBd0M7MEhBQXhDLHdDQUF3Qzs0RkFBeEMsd0NBQXdDO2tCQUhwRCxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxxQ0FBcUM7aUJBQ2hEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0ZVBpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSHR0cEVycm9yUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDb21wb25lbnQsIERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgSW5wdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIFBhcmFtTWFwIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEJiVGVtcGxhdGUgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvY29yZSc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yLCBmaWx0ZXIsIG1hcCwgcGx1Y2ssIHN3aXRjaE1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgREVGQVVMVF9JTlRFUlZBTCwgREVGQVVMVF9TVEFSVF9EQVksIFBlcmlvZCwgUEVSSU9EUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBDaGFydERhdGEsXG4gIENoYXJ0TGFiZWxzLFxuICBwYXJzZUVycm9yLFxuICBUdXJub3ZlcnNEYXRlUGFyYW1zLFxuICBUdXJub3ZlcnNFcnJvcixcbiAgVHVybm92ZXJzR2V0UGFyYW1zLFxufSBmcm9tICcuLi9tb2RlbC90dXJub3ZlcnMnO1xuaW1wb3J0IHsgVHVybm92ZXJzV2lkZ2V0SGVscGVyc1NlcnZpY2UgfSBmcm9tICcuLi90dXJub3ZlcnMtd2lkZ2V0LWhlbHBlcnMuc2VydmljZSc7XG5pbXBvcnQgeyBUdXJub3ZlcnNTZXJ2aWNlIH0gZnJvbSAnLi4vdHVybm92ZXJzLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi10dXJub3ZlcnMnLFxuICB0ZW1wbGF0ZVVybDogJy4vdHVybm92ZXJzLmNvbXBvbmVudC5odG1sJyxcbiAgcHJvdmlkZXJzOiBbVHVybm92ZXJzU2VydmljZSwgRGF0ZVBpcGUsIFR1cm5vdmVyc1dpZGdldEhlbHBlcnNTZXJ2aWNlXSxcbn0pXG5leHBvcnQgY2xhc3MgVHVybm92ZXJzQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIERpc2FibGUvZW5hYmxlIHRoZSBmb3JlY2FzdCBvcHRpb24gb24gdGhlIGNoYXJ0LlxuICAgKi9cbiAgQElucHV0KCkgZm9yZWNhc3Q/ID0gZmFsc2U7XG4gIEBWaWV3Q2hpbGQoJ2luY29tZUxhYmVsJywgeyBzdGF0aWM6IHRydWUgfSlcbiAgaW5jb21lUmVmOiBFbGVtZW50UmVmPGFueT4gfCB1bmRlZmluZWQ7XG4gIEBWaWV3Q2hpbGQoJ3NwZW5kaW5nTGFiZWwnLCB7IHN0YXRpYzogdHJ1ZSB9KVxuICBzcGVuZGluZ1JlZjogRWxlbWVudFJlZjxhbnk+IHwgdW5kZWZpbmVkO1xuICBAVmlld0NoaWxkKCdmb3JlY2FzdExhYmVsJywgeyBzdGF0aWM6IHRydWUgfSlcbiAgZm9yZWNhc3RSZWY6IEVsZW1lbnRSZWY8YW55PiB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBob3N0UmVmID0gdGhpcztcblxuICBzZWxlY3RlZFRhYjogUGVyaW9kID0gUEVSSU9EU1tNYXRoLm1heChQRVJJT0RTLm1hcCgoaXRlbSkgPT4gaXRlbS5kZWZhdWx0KS5pbmRleE9mKHRydWUpLCAwKV07XG4gIGVycm9yOiBUdXJub3ZlcnNFcnJvciB8IHVuZGVmaW5lZDtcbiAgaXNMb2FkaW5nOiBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlcnZpY2U6IFR1cm5vdmVyc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgcHJpdmF0ZSByZWFkb25seSBoZWxwZXJzOiBUdXJub3ZlcnNXaWRnZXRIZWxwZXJzU2VydmljZSxcbiAgKSB7fVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgaW5pdGlhbERhdGVQYXJhbXM6IFR1cm5vdmVyc0RhdGVQYXJhbXMgPSB7XG4gICAgcGVyaW9kU3RhcnREYXRlOiB0aGlzLmhlbHBlcnMucGVyaW9kVG9EYXRlKFBFUklPRFNbMF0pLFxuICAgIHBlcmlvZEVuZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCksXG4gICAgaW50ZXJ2YWxEdXJhdGlvbjogREVGQVVMVF9JTlRFUlZBTCxcbiAgICBpbnRlcnZhbFN0YXJ0RGF5OiBERUZBVUxUX1NUQVJUX0RBWSxcbiAgfTtcblxuICByZWFkb25seSBhcnJhbmdlbWVudElkczogT2JzZXJ2YWJsZTxzdHJpbmdbXT4gPSB0aGlzLmdldFJvdXRlUGFyYW0odGhpcy5yb3V0ZSwgJ3NlbGVjdGVkQWNjb3VudCcpLnBpcGUoXG4gICAgbWFwKChzZWxlY3RlZEFjY291bnQpID0+IChzZWxlY3RlZEFjY291bnQgPyBbc2VsZWN0ZWRBY2NvdW50XSA6IFtdKSksIC8vIFRPRE86IHJlbW92ZSBvbmNlIGFycmFuZ2VtZW50IGlkcyBhcmUgcGFzc2VkIGFzIGFuIGFycmF5XG4gICk7XG5cbiAgcmVhZG9ubHkgZGF0ZVBhcmFtczogQmVoYXZpb3JTdWJqZWN0PFR1cm5vdmVyc0RhdGVQYXJhbXM+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCh0aGlzLmluaXRpYWxEYXRlUGFyYW1zKTtcblxuICByZWFkb25seSBjaGFydFNlcmllc0RhdGE6IE9ic2VydmFibGU8Q2hhcnREYXRhW10+ID0gY29tYmluZUxhdGVzdChcbiAgICB0aGlzLmFycmFuZ2VtZW50SWRzLFxuICAgIHRoaXMuZGF0ZVBhcmFtcy5hc09ic2VydmFibGUoKSxcbiAgKS5waXBlKFxuICAgIHRhcCgoKSA9PiAodGhpcy5lcnJvciA9IHVuZGVmaW5lZCkpLFxuICAgIGZpbHRlcigoW3NlbGVjdGVkQWNjb3VudHNdKSA9PiAhIXNlbGVjdGVkQWNjb3VudHMubGVuZ3RoKSxcbiAgICBtYXAoXG4gICAgICAoW3NlbGVjdGVkQWNjb3VudHMsIGRhdGVQYXJhbXNdKTogVHVybm92ZXJzR2V0UGFyYW1zID0+ICh7XG4gICAgICAgIGFycmFuZ2VtZW50SWRzOiBzZWxlY3RlZEFjY291bnRzLFxuICAgICAgICAuLi5kYXRlUGFyYW1zLFxuICAgICAgICBmb3JlY2FzdDogdGhpcy5mb3JlY2FzdCA/ICdBVkcnIDogdW5kZWZpbmVkLFxuICAgICAgfSksXG4gICAgKSxcbiAgICBzd2l0Y2hNYXAoKHBhcmFtcykgPT4ge1xuICAgICAgdGhpcy5pc0xvYWRpbmcubmV4dCh0cnVlKTtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnNlcnZpY2UubG9hZEFuYWx5c2lzRGF0YShwYXJhbXMpO1xuICAgICAgZGF0YS5zdWJzY3JpYmUoeyBjb21wbGV0ZTogKCkgPT4gdGhpcy5pc0xvYWRpbmcubmV4dChmYWxzZSkgfSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KSxcbiAgICBtYXAoKGl0ZW1zKSA9PiBpdGVtcy5tYXAodGhpcy5oZWxwZXJzLmV4dGVuZFR1cm5vdmVySXRlbSkpLFxuICAgIG1hcCgoaXRlbXMpID0+IHRoaXMuaGVscGVycy5nZXRDaGFydERhdGEoaXRlbXMsIHRoaXMubGFiZWxzKSksXG4gICAgY2F0Y2hFcnJvcigoZXJyb3I6IEh0dHBFcnJvclJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiBvZihbXSk7XG4gICAgfSksXG4gICk7XG5cbiAgZ2V0IGxhYmVscygpOiBDaGFydExhYmVscyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluY29tZTogKDxFbGVtZW50UmVmPnRoaXMuaW5jb21lUmVmKS5uYXRpdmVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgc3BlbmRpbmc6ICg8RWxlbWVudFJlZj50aGlzLnNwZW5kaW5nUmVmKS5uYXRpdmVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgZm9yZWNhc3Q6ICg8RWxlbWVudFJlZj50aGlzLmZvcmVjYXN0UmVmKS5uYXRpdmVFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldFJvdXRlUGFyYW0ocm91dGU6IEFjdGl2YXRlZFJvdXRlLCBwYXJhbTogc3RyaW5nKTogT2JzZXJ2YWJsZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgY29uc3QgcGFyYW1WYWx1ZSA9IHJvdXRlLnBhcmFtTWFwLnBpcGUocGx1Y2s8UGFyYW1NYXAsIHN0cmluZyB8IG51bGw+KCdwYXJhbXMnLCBwYXJhbSkpO1xuXG4gICAgaWYgKCFyb3V0ZS5wYXJlbnQpIHtcbiAgICAgIHJldHVybiBwYXJhbVZhbHVlO1xuICAgIH1cblxuICAgIC8vIGVuc3VyZSB0aGF0IGxldmVsIHRoYXQgaGFzIGFjdHVhbCB2YWx1ZSBrZWVwcyBpdCBmcm9tIGJlaW5nIGNsZWFyZWRcbiAgICByZXR1cm4gY29tYmluZUxhdGVzdChwYXJhbVZhbHVlLCB0aGlzLmdldFJvdXRlUGFyYW0ocm91dGUucGFyZW50LCBwYXJhbSkpLnBpcGUoXG4gICAgICBtYXAoKHBhcmFtcykgPT4gcGFyYW1zWzBdIHx8IHBhcmFtc1sxXSksXG4gICAgKTtcbiAgfVxuXG4gIGhhbmRsZUVycm9yID0gKGVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkgPT4ge1xuICAgIHRoaXMuZXJyb3IgPSBwYXJzZUVycm9yKGVycm9yKTtcbiAgICByZXR1cm4gb2YoW10pO1xuICB9O1xuXG4gIG9uVGFiQ2hhbmdlKG51bTogbnVtYmVyKSB7XG4gICAgdGhpcy5zZWxlY3RlZFRhYiA9IFBFUklPRFNbTWF0aC5tYXgoUEVSSU9EUy5tYXAoKGl0ZW0pID0+IGl0ZW0uZHVyYXRpb24pLmluZGV4T2YobnVtKSwgMCldO1xuICAgIHRoaXMuZGF0ZVBhcmFtcy5uZXh0KHtcbiAgICAgIC4uLnRoaXMuaW5pdGlhbERhdGVQYXJhbXMsXG4gICAgICBwZXJpb2RTdGFydERhdGU6IHRoaXMuaGVscGVycy5wZXJpb2RUb0RhdGUodGhpcy5zZWxlY3RlZFRhYiksXG4gICAgICBwZXJpb2RFbmREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApLFxuICAgIH0pO1xuICB9XG59XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tiYlR1cm5vdmVyc0l0ZW1DdXN0b21pemFibGVdJyxcbn0pXG5leHBvcnQgY2xhc3MgVHVybm92ZXJzSXRlbUN1c3RvbWl6YWJsZURpcmVjdGl2ZSBleHRlbmRzIEJiVGVtcGxhdGU8VHVybm92ZXJzQ29tcG9uZW50LCBDaGFydERhdGFbXSB8IHVuZGVmaW5lZD4ge31cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2JiVHVybm92ZXJzQ29udHJvbHNDdXN0b21pemFibGVdJyxcbn0pXG5leHBvcnQgY2xhc3MgVHVybm92ZXJzQ29udHJvbHNDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFR1cm5vdmVyc0NvbXBvbmVudCwgdW5kZWZpbmVkPiB7fVxuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbYmJUdXJub3ZlcnNFbXB0eVN0YXRlQ3VzdG9taXphYmxlXScsXG59KVxuZXhwb3J0IGNsYXNzIFR1cm5vdmVyc0VtcHR5U3RhdGVDdXN0b21pemFibGVEaXJlY3RpdmUgZXh0ZW5kcyBCYlRlbXBsYXRlPFR1cm5vdmVyc0NvbXBvbmVudCwgdW5kZWZpbmVkPiB7fVxuIiwiPG5nLWNvbnRhaW5lciAqbmdJZj1cIihhcnJhbmdlbWVudElkcyB8IGFzeW5jKT8ubGVuZ3RoOyBlbHNlIGVtcHR5U3RhdGVcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNoYXJ0U2VyaWVzRGF0YSB8IGFzeW5jOyBsZXQgZGF0YTsgZWxzZSBsb2FkaW5nU3RhdGVcIj5cbiAgICA8ZGl2ICpuZ0lmPVwiIWVycm9yOyBlbHNlIGVycm9yU3RhdGVcIj5cbiAgICAgIDxkaXYgKm5nSWY9XCJkYXRhLmxlbmd0aDsgZWxzZSBlbXB0eVN0YXRlXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgXG4gICAgICAgICAgYmJUdXJub3ZlcnNJdGVtQ3VzdG9taXphYmxlIFxuICAgICAgICAgIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiIFxuICAgICAgICAgIFtiYlRlbXBsYXRlQ29udGV4dF09XCJkYXRhXCJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuPC9uZy1jb250YWluZXI+XG5cbjxuZy10ZW1wbGF0ZSBiYlR1cm5vdmVyc0l0ZW1DdXN0b21pemFibGUgbGV0LWhvc3RSZWYgbGV0LWNoYXJ0U2VyaWVzRGF0YT1cImNvbnRleHRcIj5cbiAgPG5nLWNvbnRhaW5lciBiYlR1cm5vdmVyc0NvbnRyb2xzQ3VzdG9taXphYmxlIFtiYkhvc3RSZWZdPVwiaG9zdFJlZlwiPjwvbmctY29udGFpbmVyPlxuICA8YmItdHVybm92ZXJzLWJhci1jaGFydFxuICAgICpuZ0lmPVwiKGlzTG9hZGluZyB8IGFzeW5jKSA9PT0gZmFsc2U7IGVsc2UgbG9hZGluZ1N0YXRlXCJcbiAgICBjbGFzcz1cImJiLXR1cm5vdmVycy1iYXItY2hhcnQgYmItY2hhcnRcIlxuICAgIFtjaGFydFNlcmllc0RhdGFdPVwiY2hhcnRTZXJpZXNEYXRhXCJcbiAgICBbZm9yZWNhc3RdPVwiZm9yZWNhc3RcIj5cbiAgPC9iYi10dXJub3ZlcnMtYmFyLWNoYXJ0PlxuPC9uZy10ZW1wbGF0ZT5cbjxuZy10ZW1wbGF0ZSBiYlR1cm5vdmVyc0NvbnRyb2xzQ3VzdG9taXphYmxlIGxldC1ob3N0UmVmPlxuICA8ZGl2IGNsYXNzPVwiYmItdHVybm92ZXJzLWNvbnRyb2xzXCI+XG4gICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBidG4tZ3JvdXAtc21cIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgYmJCdXR0b25cbiAgICAgICAgZGF0YS1yb2xlPVwiNi1tb250aC1idG5cIlxuICAgICAgICBbdmFsdWVdPSc2J1xuICAgICAgICAoY2xpY2spPVwiaG9zdFJlZi5vblRhYkNoYW5nZSg2KVwiXG4gICAgICAgIFtjb2xvcl09XCJob3N0UmVmLnNlbGVjdGVkVGFiLmR1cmF0aW9uID09PSA2ID8gJ3ByaW1hcnknIDogJ3NlY29uZGFyeSdcIlxuICAgICAgICBpMThuPVwiRGF0YSBwZXJpb2R8U2l4IG1vbnRoIGxhYmVsQEB0dXJub3ZlcnMubGFiZWwuZHVyYXRpb24ubW9udGguc2l4XCJcbiAgICAgID5cbiAgICAgICAgNiBNb250aHNcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBiYkJ1dHRvbiBcbiAgICAgICAgZGF0YS1yb2xlPVwiMTItbW9udGgtYnRuXCJcbiAgICAgICAgW3ZhbHVlXT0nMTInXG4gICAgICAgIChjbGljayk9XCJob3N0UmVmLm9uVGFiQ2hhbmdlKDEyKVwiXG4gICAgICAgIFtjb2xvcl09XCJob3N0UmVmLnNlbGVjdGVkVGFiLmR1cmF0aW9uID09PSAxMiA/ICdwcmltYXJ5JyA6ICdzZWNvbmRhcnknXCJcbiAgICAgICAgaTE4bj1cIkRhdGEgcGVyaW9kfFR3ZWx2ZSBtb250aCBsYWJlbEBAdHVybm92ZXJzLmxhYmVsLmR1cmF0aW9uLm1vbnRoLnR3ZWx2ZVwiXG4gICAgICA+XG4gICAgICAgIDEyIE1vbnRoc1xuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNsb2FkaW5nU3RhdGU+XG4gIDxiYi1sb2FkaW5nLWluZGljYXRvci11aVxuICAgIGkxOG4tdGV4dD1cIkxvYWRpbmcgdHVybm92ZXJzIGRhdGF8VGV4dCB0byBkaXNwbGF5IHdoaWxlIGxvYWRpbmcgdHVybm92ZXJzQEB0dXJub3ZlcnMuc3RhdGUubG9hZGluZ1R1cm5vdmVyc1wiXG4gICAgdGV4dD1cIkxvYWRpbmcgdHJhbnNhY3Rpb25zIGRhdGEuLi5cIlxuICA+PC9iYi1sb2FkaW5nLWluZGljYXRvci11aT5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjZW1wdHlTdGF0ZT5cbiAgPG5nLWNvbnRhaW5lciBiYlR1cm5vdmVyc0VtcHR5U3RhdGVDdXN0b21pemFibGUgW2JiSG9zdFJlZl09XCJob3N0UmVmXCI+PC9uZy1jb250YWluZXI+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgYmJUdXJub3ZlcnNFbXB0eVN0YXRlQ3VzdG9taXphYmxlIGxldC1ob3N0UmVmPlxuICA8bmctY29udGFpbmVyIGJiVHVybm92ZXJzQ29udHJvbHNDdXN0b21pemFibGUgW2JiSG9zdFJlZl09XCJob3N0UmVmXCI+PC9uZy1jb250YWluZXI+XG4gICAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgICBpMThuLXRpdGxlPVwiTm8gZGF0YSB0aXRsZXxUaXRsZSBvZiBhIG1lc3NhZ2UgdGhhdCBpcyBzaG93biB3aGVuIHRoZXJlIGFyZSBubyB0dXJub3ZlcnNAQHR1cm5vdmVycy5zdGF0ZS5ub1Jlc3VsdHNGb3VuZC50aXRsZVwiXG4gICAgICB0aXRsZT1cIk5vIGRhdGEgZm91bmRcIlxuICAgICAgaTE4bi1zdWJ0aXRsZT1cIk5vIGRhdGEgc3VidGl0bGV8U3VidGl0bGUgb2YgYSBtZXNzYWdlIHRoYXQgaXMgc2hvd24gd2hlbiB0aGVyZSBhcmUgbm8gdHVybm92ZXJzQEB0dXJub3ZlcnMuc3RhdGUubm9SZXN1bHRzRm91bmQuc3VidGl0bGVcIlxuICAgICAgc3VidGl0bGU9XCJZb3UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSB0byBiZSBkaXNwbGF5ZWQuIFBsZWFzZSB0cnkgc2VsZWN0aW5nIGEgZGlmZmVyZW50IHBlcmlvZC5cIlxuICAgICAgaWNvblNpemU9XCJ4eGxcIlxuICAgICAgaWNvbk1vZGlmaWVyPVwiYmFyLWNoYXJ0XCJcbiAgICA+PC9iYi1lbXB0eS1zdGF0ZS11aT5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjZXJyb3JTdGF0ZT5cbiAgPGJiLWVtcHR5LXN0YXRlLXVpXG4gICAgZGF0YS1yb2xlPVwiZXJyb3JTdGF0ZVwiXG4gICAgdGl0bGU9XCJcIlxuICAgIFtzdWJ0aXRsZV09XCJlcnJvcj8ubWVzc2FnZVwiXG4gICAgaWNvbk1vZGlmaWVyPVwiZXJyb3JcIlxuICAgIGljb25TaXplPVwieHhsXCJcbiAgICBpY29uQ29sb3I9XCJncmF5XCJcbiAgICBpY29uQ2xhc3Nlcz1cInRleHQtbXV0ZWRcIlxuICA+PC9iYi1lbXB0eS1zdGF0ZS11aT5cbjwvbmctdGVtcGxhdGU+XG5cbjxzcGFuICNpbmNvbWVMYWJlbCBjbGFzcz1cIm5nLWNsb2FrXCIgaTE4bj1cIkluY29taW5nfExhYmVsIGZvciBpbmNvbWUgZGF0YXNldCBvbiB0aGUgY2hhcnRAQHR1cm5vdmVycy5jaGFydC5pbmNvbWVcIj5JbmNvbWluZzwvc3Bhbj5cbjxzcGFuICNzcGVuZGluZ0xhYmVsIGNsYXNzPVwibmctY2xvYWtcIiBpMThuPVwiT3V0Z29pbmd8TGFiZWwgZm9yIHNwZW5kaW5nIGRhdGFzZXQgb24gdGhlIGNoYXJ0QEB0dXJub3ZlcnMuY2hhcnQuc3BlbmRpbmdcIj5PdXRnb2luZzwvc3Bhbj5cbjxzcGFuICNmb3JlY2FzdExhYmVsIGNsYXNzPVwibmctY2xvYWtcIiBpMThuPVwiZm9yZWNhc3R8TGFiZWwgZm9yIGZvcmVjYXN0IGRhdGEgb24gdGhlIGNoYXJ0QEB0dXJub3ZlcnMuY2hhcnQuZm9yZWNhc3RcIj5Gb3JlY2FzdDwvc3Bhbj5cbiJdfQ==