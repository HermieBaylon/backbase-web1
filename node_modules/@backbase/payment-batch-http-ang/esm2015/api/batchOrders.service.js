import { Inject, Injectable, Optional } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import { CustomHttpParameterCodec } from '../encoder';
import { PAYMENT_BATCH_BASE_PATH } from '../variables';
import { PaymentBatchConfiguration } from '../configuration';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../configuration";
export class BatchOrdersHttpService {
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = '';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new PaymentBatchConfiguration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                value.forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, value.toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    deleteBatchOrderIdByBatchOrderId(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling deleteBatchOrderIdByBatchOrderId.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    deleteBatchOrderIdByBatchOrderIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling deleteBatchOrderIdByBatchOrderId.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}`;
    }
    deleteBatchPaymentById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling deleteBatchPaymentById.');
        }
        const _batchPaymentId = requestParameters["batchPaymentId"];
        if (_batchPaymentId === null || _batchPaymentId === undefined) {
            throw new Error('Required parameter batchPaymentId was null or undefined when calling deleteBatchPaymentById.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments/${encodeURIComponent(String(_batchPaymentId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    deleteBatchPaymentByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling deleteBatchPaymentById.');
        }
        const _batchPaymentId = requestParameters["batchPaymentId"];
        if (_batchPaymentId === null || _batchPaymentId === undefined) {
            throw new Error('Required parameter batchPaymentId was null or undefined when calling deleteBatchPaymentById.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments/${encodeURIComponent(String(_batchPaymentId))}`;
    }
    getBatchOrders(requestParameters, observe = 'body', reportProgress = false, options) {
        const _query = requestParameters["query"];
        const _amountFrom = requestParameters["amountFrom"];
        const _amountTo = requestParameters["amountTo"];
        const _executionDate = requestParameters["executionDate"];
        const _executionDateFrom = requestParameters["executionDateFrom"];
        const _executionDateTo = requestParameters["executionDateTo"];
        const _status = requestParameters["status"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        const _dynamicCreditDebitMixedIndicator = requestParameters["dynamicCreditDebitMixedIndicator"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_amountFrom !== undefined && _amountFrom !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _amountFrom, 'amountFrom');
        }
        if (_amountTo !== undefined && _amountTo !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _amountTo, 'amountTo');
        }
        if (_executionDate !== undefined && _executionDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _executionDate, 'executionDate');
        }
        if (_executionDateFrom !== undefined && _executionDateFrom !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _executionDateFrom, 'executionDateFrom');
        }
        if (_executionDateTo !== undefined && _executionDateTo !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _executionDateTo, 'executionDateTo');
        }
        if (_status) {
            _status.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'status');
            });
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_dynamicCreditDebitMixedIndicator !== undefined && _dynamicCreditDebitMixedIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dynamicCreditDebitMixedIndicator, 'dynamicCreditDebitMixedIndicator');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/batch-orders`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getBatchOrdersUrl(requestParameters) {
        const _query = requestParameters["query"];
        const _amountFrom = requestParameters["amountFrom"];
        const _amountTo = requestParameters["amountTo"];
        const _executionDate = requestParameters["executionDate"];
        const _executionDateFrom = requestParameters["executionDateFrom"];
        const _executionDateTo = requestParameters["executionDateTo"];
        const _status = requestParameters["status"];
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        const _dynamicCreditDebitMixedIndicator = requestParameters["dynamicCreditDebitMixedIndicator"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_query !== undefined && _query !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _query, 'query');
        }
        if (_amountFrom !== undefined && _amountFrom !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _amountFrom, 'amountFrom');
        }
        if (_amountTo !== undefined && _amountTo !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _amountTo, 'amountTo');
        }
        if (_executionDate !== undefined && _executionDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _executionDate, 'executionDate');
        }
        if (_executionDateFrom !== undefined && _executionDateFrom !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _executionDateFrom, 'executionDateFrom');
        }
        if (_executionDateTo !== undefined && _executionDateTo !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _executionDateTo, 'executionDateTo');
        }
        if (_status) {
            _status.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, element, 'status');
            });
        }
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        if (_dynamicCreditDebitMixedIndicator !== undefined && _dynamicCreditDebitMixedIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dynamicCreditDebitMixedIndicator, 'dynamicCreditDebitMixedIndicator');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/batch-orders${queryString ? `?${queryString}` : ''}`;
    }
    getBatchOrdersById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling getBatchOrdersById.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getBatchOrdersByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling getBatchOrdersById.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}`;
    }
    getBatchPaymentById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling getBatchPaymentById.');
        }
        const _batchPaymentId = requestParameters["batchPaymentId"];
        if (_batchPaymentId === null || _batchPaymentId === undefined) {
            throw new Error('Required parameter batchPaymentId was null or undefined when calling getBatchPaymentById.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments/${encodeURIComponent(String(_batchPaymentId))}`, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getBatchPaymentByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling getBatchPaymentById.');
        }
        const _batchPaymentId = requestParameters["batchPaymentId"];
        if (_batchPaymentId === null || _batchPaymentId === undefined) {
            throw new Error('Required parameter batchPaymentId was null or undefined when calling getBatchPaymentById.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments/${encodeURIComponent(String(_batchPaymentId))}`;
    }
    getBatchPaymentsById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling getBatchPaymentsById.');
        }
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments`, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    getBatchPaymentsByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling getBatchPaymentsById.');
        }
        const _from = requestParameters["from"];
        const _cursor = requestParameters["cursor"];
        const _size = requestParameters["size"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_from !== undefined && _from !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _from, 'from');
        }
        if (_cursor !== undefined && _cursor !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _cursor, 'cursor');
        }
        if (_size !== undefined && _size !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _size, 'size');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments${queryString ? `?${queryString}` : ''}`;
    }
    postBatchOrders(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrdersPostRequest = requestParameters["batchOrdersPostRequest"];
        if (_batchOrdersPostRequest === null || _batchOrdersPostRequest === undefined) {
            throw new Error('Required parameter batchOrdersPostRequest was null or undefined when calling postBatchOrders.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/batch-orders`, _batchOrdersPostRequest, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postBatchOrdersUrl(requestParameters) {
        const _batchOrdersPostRequest = requestParameters["batchOrdersPostRequest"];
        if (_batchOrdersPostRequest === null || _batchOrdersPostRequest === undefined) {
            throw new Error('Required parameter batchOrdersPostRequest was null or undefined when calling postBatchOrders.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders`;
    }
    postBatchPayments(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling postBatchPayments.');
        }
        const _batchPaymentsPostRequest = requestParameters["batchPaymentsPostRequest"];
        if (_batchPaymentsPostRequest === null || _batchPaymentsPostRequest === undefined) {
            throw new Error('Required parameter batchPaymentsPostRequest was null or undefined when calling postBatchPayments.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments`, _batchPaymentsPostRequest, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    postBatchPaymentsUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling postBatchPayments.');
        }
        const _batchPaymentsPostRequest = requestParameters["batchPaymentsPostRequest"];
        if (_batchPaymentsPostRequest === null || _batchPaymentsPostRequest === undefined) {
            throw new Error('Required parameter batchPaymentsPostRequest was null or undefined when calling postBatchPayments.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments`;
    }
    putApprovalsById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling putApprovalsById.');
        }
        const _batchOrderApprovalPutRequest = requestParameters["batchOrderApprovalPutRequest"];
        if (_batchOrderApprovalPutRequest === null || _batchOrderApprovalPutRequest === undefined) {
            throw new Error('Required parameter batchOrderApprovalPutRequest was null or undefined when calling putApprovalsById.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/approvals`, _batchOrderApprovalPutRequest, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putApprovalsByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling putApprovalsById.');
        }
        const _batchOrderApprovalPutRequest = requestParameters["batchOrderApprovalPutRequest"];
        if (_batchOrderApprovalPutRequest === null || _batchOrderApprovalPutRequest === undefined) {
            throw new Error('Required parameter batchOrderApprovalPutRequest was null or undefined when calling putApprovalsById.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/approvals`;
    }
    putBatchPaymentById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling putBatchPaymentById.');
        }
        const _batchPaymentId = requestParameters["batchPaymentId"];
        if (_batchPaymentId === null || _batchPaymentId === undefined) {
            throw new Error('Required parameter batchPaymentId was null or undefined when calling putBatchPaymentById.');
        }
        const _batchPaymentsPutRequest = requestParameters["batchPaymentsPutRequest"];
        if (_batchPaymentsPutRequest === null || _batchPaymentsPutRequest === undefined) {
            throw new Error('Required parameter batchPaymentsPutRequest was null or undefined when calling putBatchPaymentById.');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments/${encodeURIComponent(String(_batchPaymentId))}`, _batchPaymentsPutRequest, {
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    putBatchPaymentByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling putBatchPaymentById.');
        }
        const _batchPaymentId = requestParameters["batchPaymentId"];
        if (_batchPaymentId === null || _batchPaymentId === undefined) {
            throw new Error('Required parameter batchPaymentId was null or undefined when calling putBatchPaymentById.');
        }
        const _batchPaymentsPutRequest = requestParameters["batchPaymentsPutRequest"];
        if (_batchPaymentsPutRequest === null || _batchPaymentsPutRequest === undefined) {
            throw new Error('Required parameter batchPaymentsPutRequest was null or undefined when calling putBatchPaymentById.');
        }
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}/batch-payments/${encodeURIComponent(String(_batchPaymentId))}`;
    }
    updateBatchOrderById(requestParameters, observe = 'body', reportProgress = false, options) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling updateBatchOrderById.');
        }
        const _batchOrderPutRequest = requestParameters["batchOrderPutRequest"];
        if (_batchOrderPutRequest === null || _batchOrderPutRequest === undefined) {
            throw new Error('Required parameter batchOrderPutRequest was null or undefined when calling updateBatchOrderById.');
        }
        const _dryRun = requestParameters["dryRun"];
        const _intendedCreditTransactionsCount = requestParameters["intendedCreditTransactionsCount"];
        const _intendedDebitTransactionsCount = requestParameters["intendedDebitTransactionsCount"];
        const _intendedCreditAmount = requestParameters["intendedCreditAmount"];
        const _intendedDebitAmount = requestParameters["intendedDebitAmount"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_dryRun !== undefined && _dryRun !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dryRun, 'dryRun');
        }
        if (_intendedCreditTransactionsCount !== undefined && _intendedCreditTransactionsCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedCreditTransactionsCount, 'intendedCreditTransactionsCount');
        }
        if (_intendedDebitTransactionsCount !== undefined && _intendedDebitTransactionsCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedDebitTransactionsCount, 'intendedDebitTransactionsCount');
        }
        if (_intendedCreditAmount !== undefined && _intendedCreditAmount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedCreditAmount, 'intendedCreditAmount');
        }
        if (_intendedDebitAmount !== undefined && _intendedDebitAmount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedDebitAmount, 'intendedDebitAmount');
        }
        let headers = this.defaultHeaders;
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            const httpHeaderAccepts = [
                'application/json'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        const consumes = [
            'application/json'
        ];
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}`, _batchOrderPutRequest, {
            params: queryParameters,
            responseType: responseType,
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    updateBatchOrderByIdUrl(requestParameters) {
        const _batchOrderId = requestParameters["batchOrderId"];
        if (_batchOrderId === null || _batchOrderId === undefined) {
            throw new Error('Required parameter batchOrderId was null or undefined when calling updateBatchOrderById.');
        }
        const _batchOrderPutRequest = requestParameters["batchOrderPutRequest"];
        if (_batchOrderPutRequest === null || _batchOrderPutRequest === undefined) {
            throw new Error('Required parameter batchOrderPutRequest was null or undefined when calling updateBatchOrderById.');
        }
        const _dryRun = requestParameters["dryRun"];
        const _intendedCreditTransactionsCount = requestParameters["intendedCreditTransactionsCount"];
        const _intendedDebitTransactionsCount = requestParameters["intendedDebitTransactionsCount"];
        const _intendedCreditAmount = requestParameters["intendedCreditAmount"];
        const _intendedDebitAmount = requestParameters["intendedDebitAmount"];
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (_dryRun !== undefined && _dryRun !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _dryRun, 'dryRun');
        }
        if (_intendedCreditTransactionsCount !== undefined && _intendedCreditTransactionsCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedCreditTransactionsCount, 'intendedCreditTransactionsCount');
        }
        if (_intendedDebitTransactionsCount !== undefined && _intendedDebitTransactionsCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedDebitTransactionsCount, 'intendedDebitTransactionsCount');
        }
        if (_intendedCreditAmount !== undefined && _intendedCreditAmount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedCreditAmount, 'intendedCreditAmount');
        }
        if (_intendedDebitAmount !== undefined && _intendedDebitAmount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, _intendedDebitAmount, 'intendedDebitAmount');
        }
        const queryString = queryParameters.toString();
        return `${this.configuration.basePath}/client-api/v2/batch-orders/${encodeURIComponent(String(_batchOrderId))}${queryString ? `?${queryString}` : ''}`;
    }
}
BatchOrdersHttpService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BatchOrdersHttpService, deps: [{ token: i1.HttpClient }, { token: PAYMENT_BATCH_BASE_PATH, optional: true }, { token: i2.PaymentBatchConfiguration, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
BatchOrdersHttpService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BatchOrdersHttpService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.15", ngImport: i0, type: BatchOrdersHttpService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [PAYMENT_BATCH_BASE_PATH]
                }] }, { type: i2.PaymentBatchConfiguration, decorators: [{
                    type: Optional
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmF0Y2hPcmRlcnMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2FwaS9iYXRjaE9yZGVycy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUEyQixlQUFlLENBQUM7QUFDbEYsT0FBTyxFQUFjLFdBQVcsRUFBRSxVQUFVLEVBQ1UsTUFBWSxzQkFBc0IsQ0FBQztBQUN6RixPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBK0IsWUFBWSxDQUFDO0FBdUIvRSxPQUFPLEVBQUUsdUJBQXVCLEVBQXNCLE1BQTBCLGNBQWMsQ0FBQztBQUMvRixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBMEMsa0JBQWtCLENBQUM7Ozs7QUFnSGpHLE1BQU0sT0FBTyxzQkFBc0I7SUFPL0IsWUFBc0IsVUFBc0IsRUFBK0MsUUFBZ0IsRUFBYyxhQUF3QztRQUEzSSxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBTGxDLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDakIsbUJBQWMsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO1FBQ25DLGtCQUFhLEdBQUcsSUFBSSx5QkFBeUIsRUFBRSxDQUFDO1FBSW5ELElBQUksYUFBYSxFQUFFO1lBQ2YsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7U0FDdEM7UUFDRCxJQUFJLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEtBQUssUUFBUSxFQUFFO1lBQ2pELElBQUksT0FBTyxRQUFRLEtBQUssUUFBUSxFQUFFO2dCQUM5QixRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQzthQUM1QjtZQUNELElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztTQUMxQztRQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLElBQUksSUFBSSx3QkFBd0IsRUFBRSxD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QztTQUM3RTtRQUNELElBQUksK0JBQStCLEtBQUssU0FBUyxJQUFJLCtCQUErQixLQUFLLElBQUksRUFBRTtZQUM3RixlQUFlLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLEVBQy9DLCtCQUErQixFQUFFLGdDQUFnQyxDQUFDLENBQUM7U0FDM0U7UUFDRCxJQUFJLHFCQUFxQixLQUFLLFNBQVMsSUFBSSxxQkFBcUIsS0FBSyxJQUFJLEVBQUU7WUFDekUsZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxFQUMvQyxxQkFBcUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3ZEO1FBQ0QsSUFBSSxvQkFBb0IsS0FBSyxTQUFTLElBQUksb0JBQW9CLEtBQUssSUFBSSxFQUFFO1lBQ3ZFLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsRUFDL0Msb0JBQW9CLEVBQUUscUJBQXFCLENBQUMsQ0FBQztTQUNyRDtRQUNELE1BQU0sV0FBVyxHQUFHLGVBQWUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMvQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLCtCQUErQixrQkFBa0IsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0lBQzNKLENBQUM7O29IQTlxQ1Esc0JBQXNCLDRDQU9tQyx1QkFBdUI7d0hBUGhGLHNCQUFzQixjQUZyQixNQUFNOzRGQUVQLHNCQUFzQjtrQkFIbEMsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7OzBCQVFrRCxRQUFROzswQkFBSSxNQUFNOzJCQUFDLHVCQUF1Qjs7MEJBQXFCLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhdGNoZXMgY2xpZW50XG4gKiBVcGxvYWQgYmF0Y2ggZmlsZXMgYW5kIG1hbmFnZSBiYXRjaCBvcmRlcnMuXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDIuNy4wXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL2dpdGh1Yi5jb20vQmFja2Jhc2UvYmFja2Jhc2Utb3BlbmFwaS10b29scykuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vQmFja2Jhc2UvYmFja2Jhc2Utb3BlbmFwaS10b29sc1xuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG5cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXJyb3IgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hPcmRlckFwcHJvdmFsUHV0UmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaE9yZGVyQXBwcm92YWxQdXRSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaE9yZGVyR2V0UmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hPcmRlclB1dFJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hPcmRlclB1dFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEJhdGNoT3JkZXJzR2V0UmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hPcmRlcnNQb3N0UmVxdWVzdCB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaE9yZGVyc1Bvc3RSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaFBheW1lbnRHZXRSZXNwb25zZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBCYXRjaFBheW1lbnRzR2V0UmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hQYXltZW50c1Bvc3RSZXF1ZXN0IH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEJhdGNoUGF5bWVudHNQb3N0UmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hQYXltZW50c1B1dFJlcXVlc3QgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQmF0Y2hQYXltZW50c1B1dFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEJyZWFjaFJlcG9ydEVycm9yIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IENvbmZsaWN0RXJyb3IgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgRm9yYmlkZGVuRXJyb3IgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5cbmltcG9ydCB7IFBBWU1FTlRfQkFUQ0hfQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBQYXltZW50QmF0Y2hDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVCYXRjaE9yZGVySWRCeUJhdGNoT3JkZXJJZFJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUgKi9cbiAgICBbXCJiYXRjaE9yZGVySWRcIl06IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVCYXRjaFBheW1lbnRCeUlkUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIE5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZSAqL1xuICAgIFtcImJhdGNoT3JkZXJJZFwiXTogc3RyaW5nO1xuICAgIC8qKiBObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUgKi9cbiAgICBbXCJiYXRjaFBheW1lbnRJZFwiXTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdldEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIE1pbmltdW0gbGVuZ3RoIGlzIDMuIFRoZSBzZWFyY2ggdGVybSB1c2VkIHRvIG1ha2UgcGFydGlhbCBzZWFyY2ggb24gcHJvcGVydGllcyBhY2NvdW50IG5hbWUgYW5kIGliYW4vYmJhbi4gQWRkaXRpb25zIGZvciBiYXRjaC1vcmRlcnMgb25seTogZnVsbCBzZWFyY2ggb24gY3VycmVuY3ksIHBhcnRpYWwgb24gYmF0Y2ggbmFtZS4gICovXG4gICAgW1wicXVlcnlcIl0/OiBzdHJpbmc7XG4gICAgLyoqIExvd2VyIHZhbHVlIG9mIHRoZSByYW5nZSBzZWFyY2guIFRoZSB2YWx1ZSBpcyBpbmNsdXNpdmUgc28gdGhpcyBpcyBhY3RpbmcgYXMgJmd0OyYjeDNEOy4gKi9cbiAgICBbXCJhbW91bnRGcm9tXCJdPzogbnVtYmVyO1xuICAgIC8qKiBVcHBlciB2YWx1ZSBvZiB0aGUgcmFuZ2Ugc2VhcmNoLiBUaGUgdmFsdWUgaXMgaW5jbHVzaXZlIHNvIHRoaXMgaXMgYWN0aW5nIGFzICZsdDsmI3gzRDsuICovXG4gICAgW1wiYW1vdW50VG9cIl0/OiBudW1iZXI7XG4gICAgLyoqIEV4YWN0IHZhbHVlIHRvIG1hdGNoIGFnYWluc3QgdGhlIHJlcXVlc3RlZCBleGVjdXRpb24gZGF0ZS4gKi9cbiAgICBbXCJleGVjdXRpb25EYXRlXCJdPzogc3RyaW5nO1xuICAgIC8qKiBMb3dlciB2YWx1ZSBvZiB0aGUgcmFuZ2Ugc2VhcmNoLiBUaGUgdmFsdWUgaXMgaW5jbHVzaXZlIHNvIHRoaXMgaXMgYWN0aW5nIGFzICZndDsmI3gzRDsuICovXG4gICAgW1wiZXhlY3V0aW9uRGF0ZUZyb21cIl0/OiBzdHJpbmc7XG4gICAgLyoqIFVwcGVyIHZhbHVlIG9mIHRoZSByYW5nZSBzZWFyY2guIFRoZSB2YWx1ZSBpcyBpbmNsdXNpdmUgc28gdGhpcyBpcyBhY3RpbmcgYXMgJmx0OyYjeDNEOy4gKi9cbiAgICBbXCJleGVjdXRpb25EYXRlVG9cIl0/OiBzdHJpbmc7XG4gICAgLyoqIE5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZSAqL1xuICAgIFtcInN0YXR1c1wiXT86IEFycmF5PCdFTlRFUkVEJyB8ICdSRUFEWScgfCAnQUNDRVBURUQnIHwgJ1BST0NFU1NFRCcgfCAnUkVKRUNURUQnIHwgJ0NBTkNFTExFRCcgfCAnQUNLTk9XTEVER0VEJyB8ICdET1dOTE9BRElORyc+O1xuICAgIC8qKiBQYWdlIE51bWJlci4gU2tpcCBvdmVyIHBhZ2VzIG9mIGVsZW1lbnRzIGJ5IHNwZWNpZnlpbmcgYSBzdGFydCB2YWx1ZSBmb3IgdGhlIHF1ZXJ5ICovXG4gICAgW1wiZnJvbVwiXT86IG51bWJlcjtcbiAgICAvKiogUmVjb3JkIFVVSUQuIEFzIGFuIGFsdGVybmF0aXZlIGZvciBzcGVjaWZ5aW5nIFxcJiMzOTtmcm9tXFwmIzM5OyB0aGlzIGFsbG93cyB0byBwb2ludCB0byB0aGUgcmVjb3JkIHRvIHN0YXJ0IHRoZSBzZWxlY3Rpb24gZnJvbS4gICovXG4gICAgW1wiY3Vyc29yXCJdPzogc3RyaW5nO1xuICAgIC8qKiBMaW1pdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIG9uIHRoZSByZXNwb25zZS4gV2hlbiB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggY3Vyc29yLCB0aGUgdmFsdWUgaXMgYWxsb3dlZCB0byBiZSBhIG5lZ2F0aXZlIG51bWJlciB0byBpbmRpY2F0ZSByZXF1ZXN0aW5nIHJlY29yZHMgdXB3YXJkcyBmcm9tIHRoZSBzdGFydGluZyBwb2ludCBpbmRpY2F0ZWQgYnkgdGhlIGN1cnNvci4gICovXG4gICAgW1wic2l6ZVwiXT86IG51bWJlcjtcbiAgICAvKiogSWYgdHJ1ZTogVGhlIGNyZWRpdERlYml0TWl4ZWRJbmRpY2F0b3IgdmFsdWUgd2lsbCBiZSBkeW5hbWljYWxseSBjYWxjdWxhdGVkIGJhc2VkIG9uIGVudGlyZSBhdmFpbGFibGUgYmF0Y2ggbGlzdC4gSWYgZmFsc2U6IFRoZSBjcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yIHZhbHVlIHdpbGwgYmUgdGFrZW4gZnJvbSBjb25maWd1cmVkIHN1cHBvcnRlZC1iYXRjaC1kaXJlY3Rpb25zICAqL1xuICAgIFtcImR5bmFtaWNDcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yXCJdPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRCYXRjaE9yZGVyc0J5SWRSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlICovXG4gICAgW1wiYmF0Y2hPcmRlcklkXCJdOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0QmF0Y2hQYXltZW50QnlJZFJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUgKi9cbiAgICBbXCJiYXRjaE9yZGVySWRcIl06IHN0cmluZztcbiAgICAvKiogTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlICovXG4gICAgW1wiYmF0Y2hQYXltZW50SWRcIl06IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZXRCYXRjaFBheW1lbnRzQnlJZFJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUgKi9cbiAgICBbXCJiYXRjaE9yZGVySWRcIl06IHN0cmluZztcbiAgICAvKiogUGFnZSBOdW1iZXIuIFNraXAgb3ZlciBwYWdlcyBvZiBlbGVtZW50cyBieSBzcGVjaWZ5aW5nIGEgc3RhcnQgdmFsdWUgZm9yIHRoZSBxdWVyeSAqL1xuICAgIFtcImZyb21cIl0/OiBudW1iZXI7XG4gICAgLyoqIFJlY29yZCBVVUlELiBBcyBhbiBhbHRlcm5hdGl2ZSBmb3Igc3BlY2lmeWluZyBcXCYjMzk7ZnJvbVxcJiMzOTsgdGhpcyBhbGxvd3MgdG8gcG9pbnQgdG8gdGhlIHJlY29yZCB0byBzdGFydCB0aGUgc2VsZWN0aW9uIGZyb20uICAqL1xuICAgIFtcImN1cnNvclwiXT86IHN0cmluZztcbiAgICAvKiogTGltaXQgdGhlIG51bWJlciBvZiBlbGVtZW50cyBvbiB0aGUgcmVzcG9uc2UuIFdoZW4gdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoIGN1cnNvciwgdGhlIHZhbHVlIGlzIGFsbG93ZWQgdG8gYmUgYSBuZWdhdGl2ZSBudW1iZXIgdG8gaW5kaWNhdGUgcmVxdWVzdGluZyByZWNvcmRzIHVwd2FyZHMgZnJvbSB0aGUgc3RhcnRpbmcgcG9pbnQgaW5kaWNhdGVkIGJ5IHRoZSBjdXJzb3IuICAqL1xuICAgIFtcInNpemVcIl0/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIFJlcXVlc3QgZm9yIG5ldyBiYXRjaCBvcmRlci4gKi9cbiAgICBbXCJiYXRjaE9yZGVyc1Bvc3RSZXF1ZXN0XCJdOiBCYXRjaE9yZGVyc1Bvc3RSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RCYXRjaFBheW1lbnRzUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIE5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZSAqL1xuICAgIFtcImJhdGNoT3JkZXJJZFwiXTogc3RyaW5nO1xuICAgIC8qKiBSZXF1ZXN0IGZvciBuZXcgYmF0Y2ggcGF5bWVudC4gKi9cbiAgICBbXCJiYXRjaFBheW1lbnRzUG9zdFJlcXVlc3RcIl06IEJhdGNoUGF5bWVudHNQb3N0UmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQdXRBcHByb3ZhbHNCeUlkUmVxdWVzdFBhcmFtcyB7XG4gICAgLyoqIE5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZSAqL1xuICAgIFtcImJhdGNoT3JkZXJJZFwiXTogc3RyaW5nO1xuICAgIC8qKiBBcHByb3ZlcyBvciByZWplY3RzIGEgZ2l2ZW4gYmF0Y2ggb3JkZXIgKi9cbiAgICBbXCJiYXRjaE9yZGVyQXBwcm92YWxQdXRSZXF1ZXN0XCJdOiBCYXRjaE9yZGVyQXBwcm92YWxQdXRSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFB1dEJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zIHtcbiAgICAvKiogTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlICovXG4gICAgW1wiYmF0Y2hPcmRlcklkXCJdOiBzdHJpbmc7XG4gICAgLyoqIE5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZSAqL1xuICAgIFtcImJhdGNoUGF5bWVudElkXCJdOiBzdHJpbmc7XG4gICAgLyoqIEJhdGNoIHBheW1lbnQgdXBkYXRlLiAqL1xuICAgIFtcImJhdGNoUGF5bWVudHNQdXRSZXF1ZXN0XCJdOiBCYXRjaFBheW1lbnRzUHV0UmVxdWVzdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVCYXRjaE9yZGVyQnlJZFJlcXVlc3RQYXJhbXMge1xuICAgIC8qKiBObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUgKi9cbiAgICBbXCJiYXRjaE9yZGVySWRcIl06IHN0cmluZztcbiAgICAvKiogVXBkYXRlcyBiYXRjaCBvcmRlci4gKi9cbiAgICBbXCJiYXRjaE9yZGVyUHV0UmVxdWVzdFwiXTogQmF0Y2hPcmRlclB1dFJlcXVlc3Q7XG4gICAgLyoqIFNldCB0aGlzIHBhcmFtZXRlciB0byB0cnVlIHRvIHJ1biB0aGUgdXBkYXRlIHdpdGhvdXQgY2hhbmdlcyBvbiB0aGUgc2VydmVyIChlLmcuIHdoZW4gdHJhbnNpdGlvbmluZyBiYXRjaCBvcmRlciB0byBWQUxJRCBzdGF0dXMsIHRoZSB2YWxpZGF0aW9ucyBhcmUgcnVuLCBidXQgdGhlIHByb2Nlc3NpbmcgZmxvdyBpcyBub3QgdHJpZ2dlcmVkIGFuZCB0aGUgYmF0Y2ggb3JkZXIgaXMgbm90IHBlcnNpc3RlZCkuICAqL1xuICAgIFtcImRyeVJ1blwiXT86IGJvb2xlYW47XG4gICAgLyoqIFNldCB0aGlzIHBhcmFtZXRlciB0byB2YWxpZGF0ZSB0aGUgdG90YWwgcGVyc2lzdGVkIGNyZWRpdCB0cmFuc2FjdGlvbnMgY291bnQgYWdhaW5zdCB0aGUgaW50ZW5kZWQgY3JlZGl0IHRyYW5zYWN0aW9ucyBjb3VudC4gICovXG4gICAgW1wiaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudFwiXT86IG51bWJlcjtcbiAgICAvKiogU2V0IHRoaXMgcGFyYW1ldGVyIHRvIHZhbGlkYXRlIHRoZSB0b3RhbCBwZXJzaXN0ZWQgZGViaXQgdHJhbnNhY3Rpb25zIGNvdW50IGFnYWluc3QgdGhlIGludGVuZGVkIGRlYml0IHRyYW5zYWN0aW9ucyBjb3VudC4gICovXG4gICAgW1wiaW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50XCJdPzogbnVtYmVyO1xuICAgIC8qKiBTZXQgdGhpcyBwYXJhbWV0ZXIgdG8gdmFsaWRhdGUgdGhlIHRvdGFsIHBlcnNpc3RlZCBjcmVkaXQgYW1vdW50IGFnYWluc3QgdGhlIGludGVuZGVkIGNyZWRpdCBhbW91bnQuICAqL1xuICAgIFtcImludGVuZGVkQ3JlZGl0QW1vdW50XCJdPzogbnVtYmVyO1xuICAgIC8qKiBTZXQgdGhpcyBwYXJhbWV0ZXIgdG8gdmFsaWRhdGUgdGhlIHRvdGFsIHBlcnNpc3RlZCBkZWJpdCBhbW91bnQgYWdhaW5zdCB0aGUgaW50ZW5kZWQgZGViaXQgYW1vdW50LiAgKi9cbiAgICBbXCJpbnRlbmRlZERlYml0QW1vdW50XCJdPzogbnVtYmVyO1xufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEJhdGNoT3JkZXJzSHR0cFNlcnZpY2Uge1xuXG4gICAgcHJvdGVjdGVkIGJhc2VQYXRoID0gJyc7XG4gICAgcHVibGljIGRlZmF1bHRIZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCk7XG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgUGF5bWVudEJhdGNoQ29uZmlndXJhdGlvbigpO1xuICAgIHB1YmxpYyBlbmNvZGVyOiBIdHRwUGFyYW1ldGVyQ29kZWM7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKCkgQEluamVjdChQQVlNRU5UX0JBVENIX0JBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZywgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbjogUGF5bWVudEJhdGNoQ29uZmlndXJhdGlvbikge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPSB0aGlzLmJhc2VQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmNvZGVyID0gdGhpcy5jb25maWd1cmF0aW9uLmVuY29kZXIgfHwgbmV3IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYygpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBhZGRUb0h0dHBQYXJhbXMoaHR0cFBhcmFtczogSHR0cFBhcmFtcywgdmFsdWU6IGFueSwga2V5Pzogc3RyaW5nKTogSHR0cFBhcmFtcyB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBEYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zOiBIdHRwUGFyYW1zLCB2YWx1ZT86IGFueSwga2V5Pzogc3RyaW5nKTogSHR0cFBhcmFtcyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICh2YWx1ZSBhcyBhbnlbXSkuZm9yRWFjaCggZWxlbSA9PiBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgZWxlbSwga2V5KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZhbHVlIGFzIERhdGUpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcImtleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgRGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKCBrID0+IGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShcbiAgICAgICAgICAgICAgICAgICAgaHR0cFBhcmFtcywgdmFsdWVba10sIGtleSAhPSBudWxsID8gYCR7a2V5fS4ke2t9YCA6IGspKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IGh0dHBQYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIG5vdCBvYmplY3Qgb3IgYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIGJhdGNoIG9yZGVyLlxuICAgICAqIERlbGV0ZXMgYSBiYXRjaCBvcmRlci4gT25seSB0aGUgaW5pdGlhdG9yIG9mIHRoZSBiYXRjaCBjYW4gZGVsZXRlIGl0LiBPbmx5IGJhdGNoIG9yZGVycyBpbiBzdGF0dXMgRU5URVJFRCAod2l0aCB6ZXJvIGdpdmVuIGFwcHJvdmFscykgYW5kIERSQUZUIGFyZSBlbGlnaWJsZSBmb3IgZGVsZXRpb24uXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUJhdGNoT3JkZXJJZEJ5QmF0Y2hPcmRlcklkKHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVCYXRjaE9yZGVySWRCeUJhdGNoT3JkZXJJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgYmF0Y2ggb3JkZXIuXG4gICAgICogRGVsZXRlcyBhIGJhdGNoIG9yZGVyLiBPbmx5IHRoZSBpbml0aWF0b3Igb2YgdGhlIGJhdGNoIGNhbiBkZWxldGUgaXQuIE9ubHkgYmF0Y2ggb3JkZXJzIGluIHN0YXR1cyBFTlRFUkVEICh3aXRoIHplcm8gZ2l2ZW4gYXBwcm92YWxzKSBhbmQgRFJBRlQgYXJlIGVsaWdpYmxlIGZvciBkZWxldGlvbi5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlQmF0Y2hPcmRlcklkQnlCYXRjaE9yZGVySWQocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUJhdGNoT3JkZXJJZEJ5QmF0Y2hPcmRlcklkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSBiYXRjaCBvcmRlci5cbiAgICAgKiBEZWxldGVzIGEgYmF0Y2ggb3JkZXIuIE9ubHkgdGhlIGluaXRpYXRvciBvZiB0aGUgYmF0Y2ggY2FuIGRlbGV0ZSBpdC4gT25seSBiYXRjaCBvcmRlcnMgaW4gc3RhdHVzIEVOVEVSRUQgKHdpdGggemVybyBnaXZlbiBhcHByb3ZhbHMpIGFuZCBEUkFGVCBhcmUgZWxpZ2libGUgZm9yIGRlbGV0aW9uLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVCYXRjaE9yZGVySWRCeUJhdGNoT3JkZXJJZChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQmF0Y2hPcmRlcklkQnlCYXRjaE9yZGVySWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSBiYXRjaCBvcmRlci5cbiAgICAgKiBEZWxldGVzIGEgYmF0Y2ggb3JkZXIuIE9ubHkgdGhlIGluaXRpYXRvciBvZiB0aGUgYmF0Y2ggY2FuIGRlbGV0ZSBpdC4gT25seSBiYXRjaCBvcmRlcnMgaW4gc3RhdHVzIEVOVEVSRUQgKHdpdGggemVybyBnaXZlbiBhcHByb3ZhbHMpIGFuZCBEUkFGVCBhcmUgZWxpZ2libGUgZm9yIGRlbGV0aW9uLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVCYXRjaE9yZGVySWRCeUJhdGNoT3JkZXJJZChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQmF0Y2hPcmRlcklkQnlCYXRjaE9yZGVySWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBfYmF0Y2hPcmRlcklkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaE9yZGVySWRcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlcklkID09PSBudWxsIHx8IF9iYXRjaE9yZGVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hPcmRlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQmF0Y2hPcmRlcklkQnlCYXRjaE9yZGVySWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWxldGVCYXRjaE9yZGVySWRCeUJhdGNoT3JkZXJJZFVybChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQmF0Y2hPcmRlcklkQnlCYXRjaE9yZGVySWRSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUJhdGNoT3JkZXJJZEJ5QmF0Y2hPcmRlcklkLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgYmF0Y2ggcGF5bWVudC5cbiAgICAgKiBEZWxldGVzIGEgYmF0Y2ggcGF5bWVudC4gT25seSB0aGUgY3JlYXRvciBvZiB0aGUgYmF0Y2ggb3JkZXIgY2FuIGRlbGV0ZSBpdC4gT25seSBiYXRjaCBvcmRlcnMgaW4gc3RhdHVzIERSQUZUIHBheW1lbnRzIGNhbiBiZSBkZWxldGVkLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVCYXRjaFBheW1lbnRCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBEZWxldGVCYXRjaFBheW1lbnRCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSBiYXRjaCBwYXltZW50LlxuICAgICAqIERlbGV0ZXMgYSBiYXRjaCBwYXltZW50LiBPbmx5IHRoZSBjcmVhdG9yIG9mIHRoZSBiYXRjaCBvcmRlciBjYW4gZGVsZXRlIGl0LiBPbmx5IGJhdGNoIG9yZGVycyBpbiBzdGF0dXMgRFJBRlQgcGF5bWVudHMgY2FuIGJlIGRlbGV0ZWQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUJhdGNoUGF5bWVudEJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IERlbGV0ZUJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIGJhdGNoIHBheW1lbnQuXG4gICAgICogRGVsZXRlcyBhIGJhdGNoIHBheW1lbnQuIE9ubHkgdGhlIGNyZWF0b3Igb2YgdGhlIGJhdGNoIG9yZGVyIGNhbiBkZWxldGUgaXQuIE9ubHkgYmF0Y2ggb3JkZXJzIGluIHN0YXR1cyBEUkFGVCBwYXltZW50cyBjYW4gYmUgZGVsZXRlZC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlQmF0Y2hQYXltZW50QnlJZChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQmF0Y2hQYXltZW50QnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIGJhdGNoIHBheW1lbnQuXG4gICAgICogRGVsZXRlcyBhIGJhdGNoIHBheW1lbnQuIE9ubHkgdGhlIGNyZWF0b3Igb2YgdGhlIGJhdGNoIG9yZGVyIGNhbiBkZWxldGUgaXQuIE9ubHkgYmF0Y2ggb3JkZXJzIGluIHN0YXR1cyBEUkFGVCBwYXltZW50cyBjYW4gYmUgZGVsZXRlZC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlQmF0Y2hQYXltZW50QnlJZChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQmF0Y2hQYXltZW50QnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaE9yZGVySWQgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVCYXRjaFBheW1lbnRCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9iYXRjaFBheW1lbnRJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hQYXltZW50SWRcIl07XG4gICAgICAgIGlmIChfYmF0Y2hQYXltZW50SWQgPT09IG51bGwgfHwgX2JhdGNoUGF5bWVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoUGF5bWVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQmF0Y2hQYXltZW50QnlJZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9L2JhdGNoLXBheW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hQYXltZW50SWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVsZXRlQmF0Y2hQYXltZW50QnlJZFVybChyZXF1ZXN0UGFyYW1ldGVyczogRGVsZXRlQmF0Y2hQYXltZW50QnlJZFJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfYmF0Y2hPcmRlcklkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaE9yZGVySWRcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlcklkID09PSBudWxsIHx8IF9iYXRjaE9yZGVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hPcmRlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQmF0Y2hQYXltZW50QnlJZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfYmF0Y2hQYXltZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoUGF5bWVudElkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoUGF5bWVudElkID09PSBudWxsIHx8IF9iYXRjaFBheW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaFBheW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUJhdGNoUGF5bWVudEJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9iYXRjaC1vcmRlcnMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9iYXRjaE9yZGVySWQpKX0vYmF0Y2gtcGF5bWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9iYXRjaFBheW1lbnRJZCkpfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgbGlzdCBvZiBiYXRjaCBvcmRlcnMuXG4gICAgICogUmV0cmlldmUgbGlzdCBvZiBiYXRjaCBvcmRlcnNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QmF0Y2hPcmRlcnMocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxCYXRjaE9yZGVyc0dldFJlc3BvbnNlPjtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBsaXN0IG9mIGJhdGNoIG9yZGVycy5cbiAgICAgKiBSZXRyaWV2ZSBsaXN0IG9mIGJhdGNoIG9yZGVyc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCYXRjaE9yZGVycyhyZXF1ZXN0UGFyYW1ldGVyczogR2V0QmF0Y2hPcmRlcnNSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QmF0Y2hPcmRlcnNHZXRSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgYmF0Y2ggb3JkZXJzLlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgYmF0Y2ggb3JkZXJzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoT3JkZXJzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCYXRjaE9yZGVyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QmF0Y2hPcmRlcnNHZXRSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgYmF0Y2ggb3JkZXJzLlxuICAgICAqIFJldHJpZXZlIGxpc3Qgb2YgYmF0Y2ggb3JkZXJzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoT3JkZXJzKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCYXRjaE9yZGVyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9xdWVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicXVlcnlcIl07XG4gICAgICAgIGNvbnN0IF9hbW91bnRGcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhbW91bnRGcm9tXCJdO1xuICAgICAgICBjb25zdCBfYW1vdW50VG8gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImFtb3VudFRvXCJdO1xuICAgICAgICBjb25zdCBfZXhlY3V0aW9uRGF0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZXhlY3V0aW9uRGF0ZVwiXTtcbiAgICAgICAgY29uc3QgX2V4ZWN1dGlvbkRhdGVGcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJleGVjdXRpb25EYXRlRnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2V4ZWN1dGlvbkRhdGVUbyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZXhlY3V0aW9uRGF0ZVRvXCJdO1xuICAgICAgICBjb25zdCBfc3RhdHVzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzdGF0dXNcIl07XG4gICAgICAgIGNvbnN0IF9mcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJmcm9tXCJdO1xuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9zaXplID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzaXplXCJdO1xuICAgICAgICBjb25zdCBfZHluYW1pY0NyZWRpdERlYml0TWl4ZWRJbmRpY2F0b3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImR5bmFtaWNDcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yXCJdO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChfcXVlcnkgIT09IHVuZGVmaW5lZCAmJiBfcXVlcnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9xdWVyeSwgJ3F1ZXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9hbW91bnRGcm9tICE9PSB1bmRlZmluZWQgJiYgX2Ftb3VudEZyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9hbW91bnRGcm9tLCAnYW1vdW50RnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfYW1vdW50VG8gIT09IHVuZGVmaW5lZCAmJiBfYW1vdW50VG8gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9hbW91bnRUbywgJ2Ftb3VudFRvJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9leGVjdXRpb25EYXRlICE9PSB1bmRlZmluZWQgJiYgX2V4ZWN1dGlvbkRhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9leGVjdXRpb25EYXRlLCAnZXhlY3V0aW9uRGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZXhlY3V0aW9uRGF0ZUZyb20gIT09IHVuZGVmaW5lZCAmJiBfZXhlY3V0aW9uRGF0ZUZyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9leGVjdXRpb25EYXRlRnJvbSwgJ2V4ZWN1dGlvbkRhdGVGcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9leGVjdXRpb25EYXRlVG8gIT09IHVuZGVmaW5lZCAmJiBfZXhlY3V0aW9uRGF0ZVRvICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZXhlY3V0aW9uRGF0ZVRvLCAnZXhlY3V0aW9uRGF0ZVRvJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zdGF0dXMpIHtcbiAgICAgICAgICAgIF9zdGF0dXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N0YXR1cycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZHluYW1pY0NyZWRpdERlYml0TWl4ZWRJbmRpY2F0b3IgIT09IHVuZGVmaW5lZCAmJiBfZHluYW1pY0NyZWRpdERlYml0TWl4ZWRJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9keW5hbWljQ3JlZGl0RGViaXRNaXhlZEluZGljYXRvciwgJ2R5bmFtaWNDcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEJhdGNoT3JkZXJzR2V0UmVzcG9uc2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9iYXRjaC1vcmRlcnNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QmF0Y2hPcmRlcnNVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9xdWVyeSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wicXVlcnlcIl07XG4gICAgICAgIGNvbnN0IF9hbW91bnRGcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJhbW91bnRGcm9tXCJdO1xuICAgICAgICBjb25zdCBfYW1vdW50VG8gPSByZXF1ZXN0UGFyYW1ldGVyc1tcImFtb3VudFRvXCJdO1xuICAgICAgICBjb25zdCBfZXhlY3V0aW9uRGF0ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZXhlY3V0aW9uRGF0ZVwiXTtcbiAgICAgICAgY29uc3QgX2V4ZWN1dGlvbkRhdGVGcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJleGVjdXRpb25EYXRlRnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2V4ZWN1dGlvbkRhdGVUbyA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZXhlY3V0aW9uRGF0ZVRvXCJdO1xuICAgICAgICBjb25zdCBfc3RhdHVzID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzdGF0dXNcIl07XG4gICAgICAgIGNvbnN0IF9mcm9tID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJmcm9tXCJdO1xuICAgICAgICBjb25zdCBfY3Vyc29yID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJjdXJzb3JcIl07XG4gICAgICAgIGNvbnN0IF9zaXplID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJzaXplXCJdO1xuICAgICAgICBjb25zdCBfZHluYW1pY0NyZWRpdERlYml0TWl4ZWRJbmRpY2F0b3IgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImR5bmFtaWNDcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yXCJdO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX3F1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgX3F1ZXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fcXVlcnksICdxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfYW1vdW50RnJvbSAhPT0gdW5kZWZpbmVkICYmIF9hbW91bnRGcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fYW1vdW50RnJvbSwgJ2Ftb3VudEZyb20nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2Ftb3VudFRvICE9PSB1bmRlZmluZWQgJiYgX2Ftb3VudFRvICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fYW1vdW50VG8sICdhbW91bnRUbycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZXhlY3V0aW9uRGF0ZSAhPT0gdW5kZWZpbmVkICYmIF9leGVjdXRpb25EYXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZXhlY3V0aW9uRGF0ZSwgJ2V4ZWN1dGlvbkRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2V4ZWN1dGlvbkRhdGVGcm9tICE9PSB1bmRlZmluZWQgJiYgX2V4ZWN1dGlvbkRhdGVGcm9tICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZXhlY3V0aW9uRGF0ZUZyb20sICdleGVjdXRpb25EYXRlRnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfZXhlY3V0aW9uRGF0ZVRvICE9PSB1bmRlZmluZWQgJiYgX2V4ZWN1dGlvbkRhdGVUbyAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2V4ZWN1dGlvbkRhdGVUbywgJ2V4ZWN1dGlvbkRhdGVUbycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc3RhdHVzKSB7XG4gICAgICAgICAgICBfc3RhdHVzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdGF0dXMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2R5bmFtaWNDcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yICE9PSB1bmRlZmluZWQgJiYgX2R5bmFtaWNDcmVkaXREZWJpdE1peGVkSW5kaWNhdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZHluYW1pY0NyZWRpdERlYml0TWl4ZWRJbmRpY2F0b3IsICdkeW5hbWljQ3JlZGl0RGViaXRNaXhlZEluZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzJHtxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogJyd9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZGV0YWlscyBvZiBhIGJhdGNoIG9yZGVyLlxuICAgICAqIEdldCBkZXRhaWxzIG9mIGEgYmF0Y2ggb3JkZXIuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoT3JkZXJzQnlJZChyZXF1ZXN0UGFyYW1ldGVyczogR2V0QmF0Y2hPcmRlcnNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxCYXRjaE9yZGVyR2V0UmVzcG9uc2U+O1xuICAgIC8qKlxuICAgICAqIEdldCBkZXRhaWxzIG9mIGEgYmF0Y2ggb3JkZXIuXG4gICAgICogR2V0IGRldGFpbHMgb2YgYSBiYXRjaCBvcmRlci5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QmF0Y2hPcmRlcnNCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCYXRjaE9yZGVyc0J5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QmF0Y2hPcmRlckdldFJlc3BvbnNlPj47XG4gICAgLyoqXG4gICAgICogR2V0IGRldGFpbHMgb2YgYSBiYXRjaCBvcmRlci5cbiAgICAgKiBHZXQgZGV0YWlscyBvZiBhIGJhdGNoIG9yZGVyLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCYXRjaE9yZGVyc0J5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoT3JkZXJzQnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QmF0Y2hPcmRlckdldFJlc3BvbnNlPj47XG4gICAgLyoqXG4gICAgICogR2V0IGRldGFpbHMgb2YgYSBiYXRjaCBvcmRlci5cbiAgICAgKiBHZXQgZGV0YWlscyBvZiBhIGJhdGNoIG9yZGVyLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCYXRjaE9yZGVyc0J5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoT3JkZXJzQnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaE9yZGVySWQgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRCYXRjaE9yZGVyc0J5SWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEJhdGNoT3JkZXJHZXRSZXNwb25zZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRCYXRjaE9yZGVyc0J5SWRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoT3JkZXJzQnlJZFJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfYmF0Y2hPcmRlcklkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaE9yZGVySWRcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlcklkID09PSBudWxsIHx8IF9iYXRjaE9yZGVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hPcmRlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QmF0Y2hPcmRlcnNCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBkZXRhaWxzIG9mIGEgYmF0Y2ggcGF5bWVudFxuICAgICAqIEdldCBiYXRjaCBwYXltZW50cyBkZXRhaWxzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoUGF5bWVudEJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEJhdGNoUGF5bWVudEdldFJlc3BvbnNlPjtcbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBkZXRhaWxzIG9mIGEgYmF0Y2ggcGF5bWVudFxuICAgICAqIEdldCBiYXRjaCBwYXltZW50cyBkZXRhaWxzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoUGF5bWVudEJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QmF0Y2hQYXltZW50R2V0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBkZXRhaWxzIG9mIGEgYmF0Y2ggcGF5bWVudFxuICAgICAqIEdldCBiYXRjaCBwYXltZW50cyBkZXRhaWxzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoUGF5bWVudEJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEJhdGNoUGF5bWVudEdldFJlc3BvbnNlPj47XG4gICAgLyoqXG4gICAgICogRGlzcGxheXMgZGV0YWlscyBvZiBhIGJhdGNoIHBheW1lbnRcbiAgICAgKiBHZXQgYmF0Y2ggcGF5bWVudHMgZGV0YWlsc1xuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRCYXRjaFBheW1lbnRCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCYXRjaFBheW1lbnRCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEJhdGNoUGF5bWVudEJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2JhdGNoUGF5bWVudElkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaFBheW1lbnRJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaFBheW1lbnRJZCA9PT0gbnVsbCB8fCBfYmF0Y2hQYXltZW50SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hQYXltZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRCYXRjaFBheW1lbnRCeUlkLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxCYXRjaFBheW1lbnRHZXRSZXNwb25zZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfS9iYXRjaC1wYXltZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoUGF5bWVudElkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEJhdGNoUGF5bWVudEJ5SWRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEJhdGNoUGF5bWVudEJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2JhdGNoUGF5bWVudElkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaFBheW1lbnRJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaFBheW1lbnRJZCA9PT0gbnVsbCB8fCBfYmF0Y2hQYXltZW50SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hQYXltZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRCYXRjaFBheW1lbnRCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9L2JhdGNoLXBheW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hQYXltZW50SWQpKX1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBiYXRjaCBwYXltZW50cy5cbiAgICAgKiBHZXQgYmF0Y2ggcGF5bWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QmF0Y2hQYXltZW50c0J5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudHNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxCYXRjaFBheW1lbnRzR2V0UmVzcG9uc2U+O1xuICAgIC8qKlxuICAgICAqIEdldCBiYXRjaCBwYXltZW50cy5cbiAgICAgKiBHZXQgYmF0Y2ggcGF5bWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QmF0Y2hQYXltZW50c0J5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudHNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEJhdGNoUGF5bWVudHNHZXRSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIEdldCBiYXRjaCBwYXltZW50cy5cbiAgICAgKiBHZXQgYmF0Y2ggcGF5bWVudHNcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QmF0Y2hQYXltZW50c0J5SWQocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudHNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxCYXRjaFBheW1lbnRzR2V0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBHZXQgYmF0Y2ggcGF5bWVudHMuXG4gICAgICogR2V0IGJhdGNoIHBheW1lbnRzXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEJhdGNoUGF5bWVudHNCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBHZXRCYXRjaFBheW1lbnRzQnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaE9yZGVySWQgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRCYXRjaFBheW1lbnRzQnlJZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2Zyb20gIT09IHVuZGVmaW5lZCAmJiBfZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2Zyb20sICdmcm9tJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9jdXJzb3IgIT09IHVuZGVmaW5lZCAmJiBfY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fY3Vyc29yLCAnY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9zaXplICE9PSB1bmRlZmluZWQgJiYgX3NpemUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9zaXplLCAnc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxCYXRjaFBheW1lbnRzR2V0UmVzcG9uc2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY2xpZW50LWFwaS92Mi9iYXRjaC1vcmRlcnMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKF9iYXRjaE9yZGVySWQpKX0vYmF0Y2gtcGF5bWVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QmF0Y2hQYXltZW50c0J5SWRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IEdldEJhdGNoUGF5bWVudHNCeUlkUmVxdWVzdFBhcmFtcyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaE9yZGVySWQgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRCYXRjaFBheW1lbnRzQnlJZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfZnJvbSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZnJvbVwiXTtcbiAgICAgICAgY29uc3QgX2N1cnNvciA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiY3Vyc29yXCJdO1xuICAgICAgICBjb25zdCBfc2l6ZSA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wic2l6ZVwiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9mcm9tICE9PSB1bmRlZmluZWQgJiYgX2Zyb20gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9mcm9tLCAnZnJvbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgX2N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2N1cnNvciwgJ2N1cnNvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2l6ZSAhPT0gdW5kZWZpbmVkICYmIF9zaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fc2l6ZSwgJ3NpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IHF1ZXJ5UGFyYW1ldGVycy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfS9iYXRjaC1wYXltZW50cyR7cXVlcnlTdHJpbmcgPyBgPyR7cXVlcnlTdHJpbmd9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggb3JkZXIgd2l0aCBzdGF0dXMgRFJBRlQuXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggb3JkZXIgd2l0aCBzdGF0dXMgRFJBRlQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RCYXRjaE9yZGVycyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxCYXRjaE9yZGVyc1Bvc3RSZXNwb25zZT47XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggb3JkZXIgd2l0aCBzdGF0dXMgRFJBRlQuXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggb3JkZXIgd2l0aCBzdGF0dXMgRFJBRlQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RCYXRjaE9yZGVycyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEJhdGNoT3JkZXJzUG9zdFJlc3BvbnNlPj47XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggb3JkZXIgd2l0aCBzdGF0dXMgRFJBRlQuXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggb3JkZXIgd2l0aCBzdGF0dXMgRFJBRlQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RCYXRjaE9yZGVycyhyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEJhdGNoT3JkZXJzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxCYXRjaE9yZGVyc1Bvc3RSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGJhdGNoIG9yZGVyIHdpdGggc3RhdHVzIERSQUZULlxuICAgICAqIENyZWF0ZXMgbmV3IGJhdGNoIG9yZGVyIHdpdGggc3RhdHVzIERSQUZULlxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwb3N0QmF0Y2hPcmRlcnMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RCYXRjaE9yZGVyc1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVyc1Bvc3RSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaE9yZGVyc1Bvc3RSZXF1ZXN0XCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJzUG9zdFJlcXVlc3QgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJzUG9zdFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hPcmRlcnNQb3N0UmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3RCYXRjaE9yZGVycy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEJhdGNoT3JkZXJzUG9zdFJlc3BvbnNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzYCxcbiAgICAgICAgICAgIF9iYXRjaE9yZGVyc1Bvc3RSZXF1ZXN0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcG9zdEJhdGNoT3JkZXJzVXJsKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0QmF0Y2hPcmRlcnNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJzUG9zdFJlcXVlc3QgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJzUG9zdFJlcXVlc3RcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlcnNQb3N0UmVxdWVzdCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcnNQb3N0UmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVyc1Bvc3RSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcG9zdEJhdGNoT3JkZXJzLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBiYXRjaCBwYXltZW50LlxuICAgICAqIEFkZHMgbmV3IGJhdGNoIHBheW1lbnQgdW5kZXIgdGhlIGJhdGNoIG9yZGVyIGluIHN0YXR1cyBEUkFGVC4gT25seSB0aGUgY3JlYXRvciBvZiB0aGUgYmF0Y2ggb3JkZXIgY2FuIGFkZCBwYXltZW50cy4gV2hlbiBjb3VudGVycGFydHkgYXJyYW5nZW1lbnQgaWQgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGFjY291bnQgaW5mb3JtYXRpb24gKElCQU4vQkJBTiwgYmFuayBicmFuY2ggY29kZSBhbmQgYWNjb3VudCBuYW1lKSBpcyBnb2luZyB0byBiZSBwdWxsZWQgZnJvbSBQcm9kdWN0IFN1bW1hcnksIG92ZXJ3cml0aW5nIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uIHRoYXQgd2FzIGRpcmVjdGx5IHByb3ZpZGVkLiBXaGVuIGN1cnJlbnQgdXNlciBoYXMgbm8gYWNjZXNzIHRvIHRoZSByZXF1ZXN0ZWQgYXJyYW5nZW1lbnQgb3IgdGhlIGFycmFuZ2VtZW50IGRvZXMgbm90IGV4aXN0LCB0aGUgY3JlYXRlIGZhaWxzIHdpdGggYmFkIHJlcXVlc3Qgc3RhdHVzLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEJhdGNoUGF5bWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RCYXRjaFBheW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxCYXRjaFBheW1lbnRzUG9zdFJlc3BvbnNlPjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBiYXRjaCBwYXltZW50LlxuICAgICAqIEFkZHMgbmV3IGJhdGNoIHBheW1lbnQgdW5kZXIgdGhlIGJhdGNoIG9yZGVyIGluIHN0YXR1cyBEUkFGVC4gT25seSB0aGUgY3JlYXRvciBvZiB0aGUgYmF0Y2ggb3JkZXIgY2FuIGFkZCBwYXltZW50cy4gV2hlbiBjb3VudGVycGFydHkgYXJyYW5nZW1lbnQgaWQgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGFjY291bnQgaW5mb3JtYXRpb24gKElCQU4vQkJBTiwgYmFuayBicmFuY2ggY29kZSBhbmQgYWNjb3VudCBuYW1lKSBpcyBnb2luZyB0byBiZSBwdWxsZWQgZnJvbSBQcm9kdWN0IFN1bW1hcnksIG92ZXJ3cml0aW5nIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uIHRoYXQgd2FzIGRpcmVjdGx5IHByb3ZpZGVkLiBXaGVuIGN1cnJlbnQgdXNlciBoYXMgbm8gYWNjZXNzIHRvIHRoZSByZXF1ZXN0ZWQgYXJyYW5nZW1lbnQgb3IgdGhlIGFycmFuZ2VtZW50IGRvZXMgbm90IGV4aXN0LCB0aGUgY3JlYXRlIGZhaWxzIHdpdGggYmFkIHJlcXVlc3Qgc3RhdHVzLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEJhdGNoUGF5bWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RCYXRjaFBheW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEJhdGNoUGF5bWVudHNQb3N0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBiYXRjaCBwYXltZW50LlxuICAgICAqIEFkZHMgbmV3IGJhdGNoIHBheW1lbnQgdW5kZXIgdGhlIGJhdGNoIG9yZGVyIGluIHN0YXR1cyBEUkFGVC4gT25seSB0aGUgY3JlYXRvciBvZiB0aGUgYmF0Y2ggb3JkZXIgY2FuIGFkZCBwYXltZW50cy4gV2hlbiBjb3VudGVycGFydHkgYXJyYW5nZW1lbnQgaWQgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGFjY291bnQgaW5mb3JtYXRpb24gKElCQU4vQkJBTiwgYmFuayBicmFuY2ggY29kZSBhbmQgYWNjb3VudCBuYW1lKSBpcyBnb2luZyB0byBiZSBwdWxsZWQgZnJvbSBQcm9kdWN0IFN1bW1hcnksIG92ZXJ3cml0aW5nIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uIHRoYXQgd2FzIGRpcmVjdGx5IHByb3ZpZGVkLiBXaGVuIGN1cnJlbnQgdXNlciBoYXMgbm8gYWNjZXNzIHRvIHRoZSByZXF1ZXN0ZWQgYXJyYW5nZW1lbnQgb3IgdGhlIGFycmFuZ2VtZW50IGRvZXMgbm90IGV4aXN0LCB0aGUgY3JlYXRlIGZhaWxzIHdpdGggYmFkIHJlcXVlc3Qgc3RhdHVzLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdEJhdGNoUGF5bWVudHMocmVxdWVzdFBhcmFtZXRlcnM6IFBvc3RCYXRjaFBheW1lbnRzUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxCYXRjaFBheW1lbnRzUG9zdFJlc3BvbnNlPj47XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgYmF0Y2ggcGF5bWVudC5cbiAgICAgKiBBZGRzIG5ldyBiYXRjaCBwYXltZW50IHVuZGVyIHRoZSBiYXRjaCBvcmRlciBpbiBzdGF0dXMgRFJBRlQuIE9ubHkgdGhlIGNyZWF0b3Igb2YgdGhlIGJhdGNoIG9yZGVyIGNhbiBhZGQgcGF5bWVudHMuIFdoZW4gY291bnRlcnBhcnR5IGFycmFuZ2VtZW50IGlkIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uIChJQkFOL0JCQU4sIGJhbmsgYnJhbmNoIGNvZGUgYW5kIGFjY291bnQgbmFtZSkgaXMgZ29pbmcgdG8gYmUgcHVsbGVkIGZyb20gUHJvZHVjdCBTdW1tYXJ5LCBvdmVyd3JpdGluZyB0aGUgYWNjb3VudCBpbmZvcm1hdGlvbiB0aGF0IHdhcyBkaXJlY3RseSBwcm92aWRlZC4gV2hlbiBjdXJyZW50IHVzZXIgaGFzIG5vIGFjY2VzcyB0byB0aGUgcmVxdWVzdGVkIGFycmFuZ2VtZW50IG9yIHRoZSBhcnJhbmdlbWVudCBkb2VzIG5vdCBleGlzdCwgdGhlIGNyZWF0ZSBmYWlscyB3aXRoIGJhZCByZXF1ZXN0IHN0YXR1cy4gXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHBvc3RCYXRjaFBheW1lbnRzKHJlcXVlc3RQYXJhbWV0ZXJzOiBQb3N0QmF0Y2hQYXltZW50c1JlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaE9yZGVySWQgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwb3N0QmF0Y2hQYXltZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfYmF0Y2hQYXltZW50c1Bvc3RSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaFBheW1lbnRzUG9zdFJlcXVlc3RcIl07XG4gICAgICAgIGlmIChfYmF0Y2hQYXltZW50c1Bvc3RSZXF1ZXN0ID09PSBudWxsIHx8IF9iYXRjaFBheW1lbnRzUG9zdFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hQYXltZW50c1Bvc3RSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcG9zdEJhdGNoUGF5bWVudHMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxCYXRjaFBheW1lbnRzUG9zdFJlc3BvbnNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9L2JhdGNoLXBheW1lbnRzYCxcbiAgICAgICAgICAgIF9iYXRjaFBheW1lbnRzUG9zdFJlcXVlc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBwb3N0QmF0Y2hQYXltZW50c1VybChyZXF1ZXN0UGFyYW1ldGVyczogUG9zdEJhdGNoUGF5bWVudHNSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHBvc3RCYXRjaFBheW1lbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9iYXRjaFBheW1lbnRzUG9zdFJlcXVlc3QgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoUGF5bWVudHNQb3N0UmVxdWVzdFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaFBheW1lbnRzUG9zdFJlcXVlc3QgPT09IG51bGwgfHwgX2JhdGNoUGF5bWVudHNQb3N0UmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaFBheW1lbnRzUG9zdFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwb3N0QmF0Y2hQYXltZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfS9iYXRjaC1wYXltZW50c2A7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgb3IgcmVqZWN0cyBhIGdpdmVuIGJhdGNoIG9yZGVyLlxuICAgICAqIEFwcHJvdmVzIG9yIHJlamVjdHMgYSBnaXZlbiBiYXRjaCBvcmRlclxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRBcHByb3ZhbHNCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBcHByb3ZhbHNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxCYXRjaE9yZGVyQXBwcm92YWxQdXRSZXNwb25zZT47XG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgb3IgcmVqZWN0cyBhIGdpdmVuIGJhdGNoIG9yZGVyLlxuICAgICAqIEFwcHJvdmVzIG9yIHJlamVjdHMgYSBnaXZlbiBiYXRjaCBvcmRlclxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRBcHByb3ZhbHNCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBcHByb3ZhbHNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEJhdGNoT3JkZXJBcHByb3ZhbFB1dFJlc3BvbnNlPj47XG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgb3IgcmVqZWN0cyBhIGdpdmVuIGJhdGNoIG9yZGVyLlxuICAgICAqIEFwcHJvdmVzIG9yIHJlamVjdHMgYSBnaXZlbiBiYXRjaCBvcmRlclxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRBcHByb3ZhbHNCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRBcHByb3ZhbHNCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxCYXRjaE9yZGVyQXBwcm92YWxQdXRSZXNwb25zZT4+O1xuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIG9yIHJlamVjdHMgYSBnaXZlbiBiYXRjaCBvcmRlci5cbiAgICAgKiBBcHByb3ZlcyBvciByZWplY3RzIGEgZ2l2ZW4gYmF0Y2ggb3JkZXJcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QXBwcm92YWxzQnlJZChyZXF1ZXN0UGFyYW1ldGVyczogUHV0QXBwcm92YWxzQnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVySWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaE9yZGVySWQgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwdXRBcHByb3ZhbHNCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVyQXBwcm92YWxQdXRSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaE9yZGVyQXBwcm92YWxQdXRSZXF1ZXN0XCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJBcHByb3ZhbFB1dFJlcXVlc3QgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJBcHByb3ZhbFB1dFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hPcmRlckFwcHJvdmFsUHV0UmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEFwcHJvdmFsc0J5SWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PEJhdGNoT3JkZXJBcHByb3ZhbFB1dFJlc3BvbnNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9L2FwcHJvdmFsc2AsXG4gICAgICAgICAgICBfYmF0Y2hPcmRlckFwcHJvdmFsUHV0UmVxdWVzdCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHB1dEFwcHJvdmFsc0J5SWRVcmwocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEFwcHJvdmFsc0J5SWRSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEFwcHJvdmFsc0J5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJBcHByb3ZhbFB1dFJlcXVlc3QgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoT3JkZXJBcHByb3ZhbFB1dFJlcXVlc3RcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlckFwcHJvdmFsUHV0UmVxdWVzdCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlckFwcHJvdmFsUHV0UmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaE9yZGVyQXBwcm92YWxQdXRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QXBwcm92YWxzQnlJZC4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfS9hcHByb3ZhbHNgO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYSBnaXZlbiBiYXRjaCBwYXltZW50LlxuICAgICAqIFVwZGF0ZXMgYSBiYXRjaCBwYXltZW50IGlkZW50aWZpZWQgYnkgYmF0Y2ggb3JkZXIgaWQgYW5kIGJhdGNoIHBheW1lbnQgaWQgcGFpci4gT25seSBiYXRjaCBvcmRlcnMgaW4gc3RhdHVzIERSQUZUIHBheW1lbnRzIGNhbiBiZSB1cGRhdGVkLiBUaGUgdXBkYXRlIGlzIG5vdCBwYXJ0aWFsLCBtZWFuaW5nIHRoZSBuZXcgc3RhdGUgd2lsbCBvdmVycml0ZSB0aGUgZXhpc2l0bmcgc3RhdGUgYnkgcmVwbGFjaW5nIGl0IGNvbXBsZXRlbHkuIE9ubHkgdGhlIGNyZWF0b3Igb2YgdGhlIGJhdGNoIG9yZGVyIGNhbiB1cGRhdGUgcGF5bWVudHMuIFdoZW4gY291bnRlcnBhcnR5IGFycmFuZ2VtZW50IGlkIGlzIHByb3ZpZGVkLCB0aGVuIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uIChJQkFOL0JCQU4sIGJhbmsgYnJhbmNoIGNvZGUgYW5kIGFjY291bnQgbmFtZSkgaXMgZ29pbmcgdG8gYmUgcHVsbGVkIGZyb20gUHJvZHVjdCBTdW1tYXJ5LCBvdmVyd3JpdGluZyB0aGUgYWNjb3VudCBpbmZvcm1hdGlvbiB0aGF0IHdhcyBkaXJlY3RseSBwcm92aWRlZC4gV2hlbiBjdXJyZW50IHVzZXIgaGFzIG5vIGFjY2VzcyB0byB0aGUgcmVxdWVzdGVkIGFycmFuZ2VtZW50IG9yIHRoZSBhcnJhbmdlbWVudCBkb2VzIG5vdCBleGlzdCwgdGhlIHVwZGF0ZSBmYWlscyB3aXRoIGJhZCByZXF1ZXN0IHN0YXR1cy4gXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHB1dEJhdGNoUGF5bWVudEJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IFB1dEJhdGNoUGF5bWVudEJ5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEJhdGNoUGF5bWVudHNQdXRSZXNwb25zZT47XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIGdpdmVuIGJhdGNoIHBheW1lbnQuXG4gICAgICogVXBkYXRlcyBhIGJhdGNoIHBheW1lbnQgaWRlbnRpZmllZCBieSBiYXRjaCBvcmRlciBpZCBhbmQgYmF0Y2ggcGF5bWVudCBpZCBwYWlyLiBPbmx5IGJhdGNoIG9yZGVycyBpbiBzdGF0dXMgRFJBRlQgcGF5bWVudHMgY2FuIGJlIHVwZGF0ZWQuIFRoZSB1cGRhdGUgaXMgbm90IHBhcnRpYWwsIG1lYW5pbmcgdGhlIG5ldyBzdGF0ZSB3aWxsIG92ZXJyaXRlIHRoZSBleGlzaXRuZyBzdGF0ZSBieSByZXBsYWNpbmcgaXQgY29tcGxldGVseS4gT25seSB0aGUgY3JlYXRvciBvZiB0aGUgYmF0Y2ggb3JkZXIgY2FuIHVwZGF0ZSBwYXltZW50cy4gV2hlbiBjb3VudGVycGFydHkgYXJyYW5nZW1lbnQgaWQgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGFjY291bnQgaW5mb3JtYXRpb24gKElCQU4vQkJBTiwgYmFuayBicmFuY2ggY29kZSBhbmQgYWNjb3VudCBuYW1lKSBpcyBnb2luZyB0byBiZSBwdWxsZWQgZnJvbSBQcm9kdWN0IFN1bW1hcnksIG92ZXJ3cml0aW5nIHRoZSBhY2NvdW50IGluZm9ybWF0aW9uIHRoYXQgd2FzIGRpcmVjdGx5IHByb3ZpZGVkLiBXaGVuIGN1cnJlbnQgdXNlciBoYXMgbm8gYWNjZXNzIHRvIHRoZSByZXF1ZXN0ZWQgYXJyYW5nZW1lbnQgb3IgdGhlIGFycmFuZ2VtZW50IGRvZXMgbm90IGV4aXN0LCB0aGUgdXBkYXRlIGZhaWxzIHdpdGggYmFkIHJlcXVlc3Qgc3RhdHVzLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHV0QmF0Y2hQYXltZW50QnlJZChyZXF1ZXN0UGFyYW1ldGVyczogUHV0QmF0Y2hQYXltZW50QnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxCYXRjaFBheW1lbnRzUHV0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGEgZ2l2ZW4gYmF0Y2ggcGF5bWVudC5cbiAgICAgKiBVcGRhdGVzIGEgYmF0Y2ggcGF5bWVudCBpZGVudGlmaWVkIGJ5IGJhdGNoIG9yZGVyIGlkIGFuZCBiYXRjaCBwYXltZW50IGlkIHBhaXIuIE9ubHkgYmF0Y2ggb3JkZXJzIGluIHN0YXR1cyBEUkFGVCBwYXltZW50cyBjYW4gYmUgdXBkYXRlZC4gVGhlIHVwZGF0ZSBpcyBub3QgcGFydGlhbCwgbWVhbmluZyB0aGUgbmV3IHN0YXRlIHdpbGwgb3ZlcnJpdGUgdGhlIGV4aXNpdG5nIHN0YXRlIGJ5IHJlcGxhY2luZyBpdCBjb21wbGV0ZWx5LiBPbmx5IHRoZSBjcmVhdG9yIG9mIHRoZSBiYXRjaCBvcmRlciBjYW4gdXBkYXRlIHBheW1lbnRzLiBXaGVuIGNvdW50ZXJwYXJ0eSBhcnJhbmdlbWVudCBpZCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgYWNjb3VudCBpbmZvcm1hdGlvbiAoSUJBTi9CQkFOLCBiYW5rIGJyYW5jaCBjb2RlIGFuZCBhY2NvdW50IG5hbWUpIGlzIGdvaW5nIHRvIGJlIHB1bGxlZCBmcm9tIFByb2R1Y3QgU3VtbWFyeSwgb3ZlcndyaXRpbmcgdGhlIGFjY291bnQgaW5mb3JtYXRpb24gdGhhdCB3YXMgZGlyZWN0bHkgcHJvdmlkZWQuIFdoZW4gY3VycmVudCB1c2VyIGhhcyBubyBhY2Nlc3MgdG8gdGhlIHJlcXVlc3RlZCBhcnJhbmdlbWVudCBvciB0aGUgYXJyYW5nZW1lbnQgZG9lcyBub3QgZXhpc3QsIHRoZSB1cGRhdGUgZmFpbHMgd2l0aCBiYWQgcmVxdWVzdCBzdGF0dXMuIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRCYXRjaFBheW1lbnRCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRCYXRjaFBheW1lbnRCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxCYXRjaFBheW1lbnRzUHV0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGEgZ2l2ZW4gYmF0Y2ggcGF5bWVudC5cbiAgICAgKiBVcGRhdGVzIGEgYmF0Y2ggcGF5bWVudCBpZGVudGlmaWVkIGJ5IGJhdGNoIG9yZGVyIGlkIGFuZCBiYXRjaCBwYXltZW50IGlkIHBhaXIuIE9ubHkgYmF0Y2ggb3JkZXJzIGluIHN0YXR1cyBEUkFGVCBwYXltZW50cyBjYW4gYmUgdXBkYXRlZC4gVGhlIHVwZGF0ZSBpcyBub3QgcGFydGlhbCwgbWVhbmluZyB0aGUgbmV3IHN0YXRlIHdpbGwgb3ZlcnJpdGUgdGhlIGV4aXNpdG5nIHN0YXRlIGJ5IHJlcGxhY2luZyBpdCBjb21wbGV0ZWx5LiBPbmx5IHRoZSBjcmVhdG9yIG9mIHRoZSBiYXRjaCBvcmRlciBjYW4gdXBkYXRlIHBheW1lbnRzLiBXaGVuIGNvdW50ZXJwYXJ0eSBhcnJhbmdlbWVudCBpZCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgYWNjb3VudCBpbmZvcm1hdGlvbiAoSUJBTi9CQkFOLCBiYW5rIGJyYW5jaCBjb2RlIGFuZCBhY2NvdW50IG5hbWUpIGlzIGdvaW5nIHRvIGJlIHB1bGxlZCBmcm9tIFByb2R1Y3QgU3VtbWFyeSwgb3ZlcndyaXRpbmcgdGhlIGFjY291bnQgaW5mb3JtYXRpb24gdGhhdCB3YXMgZGlyZWN0bHkgcHJvdmlkZWQuIFdoZW4gY3VycmVudCB1c2VyIGhhcyBubyBhY2Nlc3MgdG8gdGhlIHJlcXVlc3RlZCBhcnJhbmdlbWVudCBvciB0aGUgYXJyYW5nZW1lbnQgZG9lcyBub3QgZXhpc3QsIHRoZSB1cGRhdGUgZmFpbHMgd2l0aCBiYWQgcmVxdWVzdCBzdGF0dXMuIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBwdXRCYXRjaFBheW1lbnRCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBQdXRCYXRjaFBheW1lbnRCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEJhdGNoUGF5bWVudEJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2JhdGNoUGF5bWVudElkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaFBheW1lbnRJZFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaFBheW1lbnRJZCA9PT0gbnVsbCB8fCBfYmF0Y2hQYXltZW50SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hQYXltZW50SWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwdXRCYXRjaFBheW1lbnRCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9iYXRjaFBheW1lbnRzUHV0UmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hQYXltZW50c1B1dFJlcXVlc3RcIl07XG4gICAgICAgIGlmIChfYmF0Y2hQYXltZW50c1B1dFJlcXVlc3QgPT09IG51bGwgfHwgX2JhdGNoUGF5bWVudHNQdXRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoUGF5bWVudHNQdXRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QmF0Y2hQYXltZW50QnlJZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8QmF0Y2hQYXltZW50c1B1dFJlc3BvbnNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9L2JhdGNoLXBheW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hQYXltZW50SWQpKX1gLFxuICAgICAgICAgICAgX2JhdGNoUGF5bWVudHNQdXRSZXF1ZXN0LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHV0QmF0Y2hQYXltZW50QnlJZFVybChyZXF1ZXN0UGFyYW1ldGVyczogUHV0QmF0Y2hQYXltZW50QnlJZFJlcXVlc3RQYXJhbXMpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBfYmF0Y2hPcmRlcklkID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaE9yZGVySWRcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlcklkID09PSBudWxsIHx8IF9iYXRjaE9yZGVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hPcmRlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcHV0QmF0Y2hQYXltZW50QnlJZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfYmF0Y2hQYXltZW50SWQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImJhdGNoUGF5bWVudElkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoUGF5bWVudElkID09PSBudWxsIHx8IF9iYXRjaFBheW1lbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBiYXRjaFBheW1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHB1dEJhdGNoUGF5bWVudEJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2JhdGNoUGF5bWVudHNQdXRSZXF1ZXN0ID0gcmVxdWVzdFBhcmFtZXRlcnNbXCJiYXRjaFBheW1lbnRzUHV0UmVxdWVzdFwiXTtcbiAgICAgICAgaWYgKF9iYXRjaFBheW1lbnRzUHV0UmVxdWVzdCA9PT0gbnVsbCB8fCBfYmF0Y2hQYXltZW50c1B1dFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYmF0Y2hQYXltZW50c1B1dFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBwdXRCYXRjaFBheW1lbnRCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9L2JhdGNoLXBheW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hQYXltZW50SWQpKX1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYmF0Y2ggb3JkZXIuXG4gICAgICogVXBkYXRlcyBiYXRjaCBvcmRlci4gT25seSBiYXRjaCBvcmRlcnMgd2l0aCBzdGF0dXMgRU5URVJFRCBvciBEUkFGVCBjYW4gYmUgdXBkYXRlZC4gVmFsaWQgdHJhbnNpdGlvbiBmcm9tIHN0YXR1cyBFTlRFUkVEIGlzIENBTkNFTExFRC4gT25seSBzdGF0dXMgY2FuIGJlIHVwZGF0ZWQgZm9yIEVOVEVSRUQgYmF0Y2ggb3JkZXIuIFZhbGlkIHRyYW5zaXRpb24gZnJvbSBzdGF0dXMgRFJBRlQgaXMgVkFMSUQuIEFsbCBhdmFpbGFibGUgZmllbGQgY2FuIGJlIHVwZGF0ZWQgZm9yIERSQUZUIGJhdGNoIG9yZGVyLiBUaGUgdXBkYXRlIGlzIHBhcnRpYWwsIG1lYW5pbmcgdGhlIG5ldyBzdGF0ZSBpcyB3cml0dGVuIG92ZXIgdGhlIGV4aXN0aW5nIHN0YXRlIChub3QgcmVwbGFjaW5nIGl0KS4gQnkgc2V0dGluZyBzdGF0dXMgdG8gVkFMSUQgd2l0aCBkcnlSdW4gJiN4M0Q7IGZhbHNlLCB0aGUgYmF0Y2ggb3JkZXIgaXMgdmFsaWRhdGVkIGFuZCBzdWJtaXR0ZWQgZm9yIHByb2Nlc3NpbmcgKGNyZWF0ZSBhcHByb3ZhbHMsIGNvbnN1bWUgbGltaXRzLCBzZW5kIHRvIGNvcmUgYmFuaykgYW5kIHRoZSBmaW5hbCBzdGF0dXMgaW4gdGhlIHJlc3BvbnNlIGNhbiBiZSBkaWZmZXJlbnQgZnJvbSBWQUxJRC4gQnkgc2V0dGluZyBzdGF0dXMgdG8gVkFMSUQgd2l0aCBkcnlSdW4gJiN4M0Q7IHRydWUsIHRoZSBiYXRjaCBvcmRlciBpcyB2YWxpZGF0ZWQgYnV0IG5vdCBzdWJtaXR0ZWQgZm9yIHByb2Nlc3NpbmcuIFxuICAgICAqIEBwYXJhbSByZXF1ZXN0UGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVCYXRjaE9yZGVyQnlJZChyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlQmF0Y2hPcmRlckJ5SWRSZXF1ZXN0UGFyYW1zLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEJhdGNoT3JkZXJQdXRSZXNwb25zZT47XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBiYXRjaCBvcmRlci5cbiAgICAgKiBVcGRhdGVzIGJhdGNoIG9yZGVyLiBPbmx5IGJhdGNoIG9yZGVycyB3aXRoIHN0YXR1cyBFTlRFUkVEIG9yIERSQUZUIGNhbiBiZSB1cGRhdGVkLiBWYWxpZCB0cmFuc2l0aW9uIGZyb20gc3RhdHVzIEVOVEVSRUQgaXMgQ0FOQ0VMTEVELiBPbmx5IHN0YXR1cyBjYW4gYmUgdXBkYXRlZCBmb3IgRU5URVJFRCBiYXRjaCBvcmRlci4gVmFsaWQgdHJhbnNpdGlvbiBmcm9tIHN0YXR1cyBEUkFGVCBpcyBWQUxJRC4gQWxsIGF2YWlsYWJsZSBmaWVsZCBjYW4gYmUgdXBkYXRlZCBmb3IgRFJBRlQgYmF0Y2ggb3JkZXIuIFRoZSB1cGRhdGUgaXMgcGFydGlhbCwgbWVhbmluZyB0aGUgbmV3IHN0YXRlIGlzIHdyaXR0ZW4gb3ZlciB0aGUgZXhpc3Rpbmcgc3RhdGUgKG5vdCByZXBsYWNpbmcgaXQpLiBCeSBzZXR0aW5nIHN0YXR1cyB0byBWQUxJRCB3aXRoIGRyeVJ1biAmI3gzRDsgZmFsc2UsIHRoZSBiYXRjaCBvcmRlciBpcyB2YWxpZGF0ZWQgYW5kIHN1Ym1pdHRlZCBmb3IgcHJvY2Vzc2luZyAoY3JlYXRlIGFwcHJvdmFscywgY29uc3VtZSBsaW1pdHMsIHNlbmQgdG8gY29yZSBiYW5rKSBhbmQgdGhlIGZpbmFsIHN0YXR1cyBpbiB0aGUgcmVzcG9uc2UgY2FuIGJlIGRpZmZlcmVudCBmcm9tIFZBTElELiBCeSBzZXR0aW5nIHN0YXR1cyB0byBWQUxJRCB3aXRoIGRyeVJ1biAmI3gzRDsgdHJ1ZSwgdGhlIGJhdGNoIG9yZGVyIGlzIHZhbGlkYXRlZCBidXQgbm90IHN1Ym1pdHRlZCBmb3IgcHJvY2Vzc2luZy4gXG4gICAgICogQHBhcmFtIHJlcXVlc3RQYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUJhdGNoT3JkZXJCeUlkKHJlcXVlc3RQYXJhbWV0ZXJzOiBVcGRhdGVCYXRjaE9yZGVyQnlJZFJlcXVlc3RQYXJhbXMsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxCYXRjaE9yZGVyUHV0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGJhdGNoIG9yZGVyLlxuICAgICAqIFVwZGF0ZXMgYmF0Y2ggb3JkZXIuIE9ubHkgYmF0Y2ggb3JkZXJzIHdpdGggc3RhdHVzIEVOVEVSRUQgb3IgRFJBRlQgY2FuIGJlIHVwZGF0ZWQuIFZhbGlkIHRyYW5zaXRpb24gZnJvbSBzdGF0dXMgRU5URVJFRCBpcyBDQU5DRUxMRUQuIE9ubHkgc3RhdHVzIGNhbiBiZSB1cGRhdGVkIGZvciBFTlRFUkVEIGJhdGNoIG9yZGVyLiBWYWxpZCB0cmFuc2l0aW9uIGZyb20gc3RhdHVzIERSQUZUIGlzIFZBTElELiBBbGwgYXZhaWxhYmxlIGZpZWxkIGNhbiBiZSB1cGRhdGVkIGZvciBEUkFGVCBiYXRjaCBvcmRlci4gVGhlIHVwZGF0ZSBpcyBwYXJ0aWFsLCBtZWFuaW5nIHRoZSBuZXcgc3RhdGUgaXMgd3JpdHRlbiBvdmVyIHRoZSBleGlzdGluZyBzdGF0ZSAobm90IHJlcGxhY2luZyBpdCkuIEJ5IHNldHRpbmcgc3RhdHVzIHRvIFZBTElEIHdpdGggZHJ5UnVuICYjeDNEOyBmYWxzZSwgdGhlIGJhdGNoIG9yZGVyIGlzIHZhbGlkYXRlZCBhbmQgc3VibWl0dGVkIGZvciBwcm9jZXNzaW5nIChjcmVhdGUgYXBwcm92YWxzLCBjb25zdW1lIGxpbWl0cywgc2VuZCB0byBjb3JlIGJhbmspIGFuZCB0aGUgZmluYWwgc3RhdHVzIGluIHRoZSByZXNwb25zZSBjYW4gYmUgZGlmZmVyZW50IGZyb20gVkFMSUQuIEJ5IHNldHRpbmcgc3RhdHVzIHRvIFZBTElEIHdpdGggZHJ5UnVuICYjeDNEOyB0cnVlLCB0aGUgYmF0Y2ggb3JkZXIgaXMgdmFsaWRhdGVkIGJ1dCBub3Qgc3VibWl0dGVkIGZvciBwcm9jZXNzaW5nLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlQmF0Y2hPcmRlckJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IFVwZGF0ZUJhdGNoT3JkZXJCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxCYXRjaE9yZGVyUHV0UmVzcG9uc2U+PjtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGJhdGNoIG9yZGVyLlxuICAgICAqIFVwZGF0ZXMgYmF0Y2ggb3JkZXIuIE9ubHkgYmF0Y2ggb3JkZXJzIHdpdGggc3RhdHVzIEVOVEVSRUQgb3IgRFJBRlQgY2FuIGJlIHVwZGF0ZWQuIFZhbGlkIHRyYW5zaXRpb24gZnJvbSBzdGF0dXMgRU5URVJFRCBpcyBDQU5DRUxMRUQuIE9ubHkgc3RhdHVzIGNhbiBiZSB1cGRhdGVkIGZvciBFTlRFUkVEIGJhdGNoIG9yZGVyLiBWYWxpZCB0cmFuc2l0aW9uIGZyb20gc3RhdHVzIERSQUZUIGlzIFZBTElELiBBbGwgYXZhaWxhYmxlIGZpZWxkIGNhbiBiZSB1cGRhdGVkIGZvciBEUkFGVCBiYXRjaCBvcmRlci4gVGhlIHVwZGF0ZSBpcyBwYXJ0aWFsLCBtZWFuaW5nIHRoZSBuZXcgc3RhdGUgaXMgd3JpdHRlbiBvdmVyIHRoZSBleGlzdGluZyBzdGF0ZSAobm90IHJlcGxhY2luZyBpdCkuIEJ5IHNldHRpbmcgc3RhdHVzIHRvIFZBTElEIHdpdGggZHJ5UnVuICYjeDNEOyBmYWxzZSwgdGhlIGJhdGNoIG9yZGVyIGlzIHZhbGlkYXRlZCBhbmQgc3VibWl0dGVkIGZvciBwcm9jZXNzaW5nIChjcmVhdGUgYXBwcm92YWxzLCBjb25zdW1lIGxpbWl0cywgc2VuZCB0byBjb3JlIGJhbmspIGFuZCB0aGUgZmluYWwgc3RhdHVzIGluIHRoZSByZXNwb25zZSBjYW4gYmUgZGlmZmVyZW50IGZyb20gVkFMSUQuIEJ5IHNldHRpbmcgc3RhdHVzIHRvIFZBTElEIHdpdGggZHJ5UnVuICYjeDNEOyB0cnVlLCB0aGUgYmF0Y2ggb3JkZXIgaXMgdmFsaWRhdGVkIGJ1dCBub3Qgc3VibWl0dGVkIGZvciBwcm9jZXNzaW5nLiBcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlQmF0Y2hPcmRlckJ5SWQocmVxdWVzdFBhcmFtZXRlcnM6IFVwZGF0ZUJhdGNoT3JkZXJCeUlkUmVxdWVzdFBhcmFtcywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUJhdGNoT3JkZXJCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVyUHV0UmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlclB1dFJlcXVlc3RcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlclB1dFJlcXVlc3QgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJQdXRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJQdXRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQmF0Y2hPcmRlckJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2RyeVJ1biA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZHJ5UnVuXCJdO1xuICAgICAgICBjb25zdCBfaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudFwiXTtcbiAgICAgICAgY29uc3QgX2ludGVuZGVkRGViaXRUcmFuc2FjdGlvbnNDb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50XCJdO1xuICAgICAgICBjb25zdCBfaW50ZW5kZWRDcmVkaXRBbW91bnQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImludGVuZGVkQ3JlZGl0QW1vdW50XCJdO1xuICAgICAgICBjb25zdCBfaW50ZW5kZWREZWJpdEFtb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW50ZW5kZWREZWJpdEFtb3VudFwiXTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoX2RyeVJ1biAhPT0gdW5kZWZpbmVkICYmIF9kcnlSdW4gIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9kcnlSdW4sICdkcnlSdW4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2ludGVuZGVkQ3JlZGl0VHJhbnNhY3Rpb25zQ291bnQgIT09IHVuZGVmaW5lZCAmJiBfaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2ludGVuZGVkQ3JlZGl0VHJhbnNhY3Rpb25zQ291bnQsICdpbnRlbmRlZENyZWRpdFRyYW5zYWN0aW9uc0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pbnRlbmRlZERlYml0VHJhbnNhY3Rpb25zQ291bnQgIT09IHVuZGVmaW5lZCAmJiBfaW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5faW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50LCAnaW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pbnRlbmRlZENyZWRpdEFtb3VudCAhPT0gdW5kZWZpbmVkICYmIF9pbnRlbmRlZENyZWRpdEFtb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2ludGVuZGVkQ3JlZGl0QW1vdW50LCAnaW50ZW5kZWRDcmVkaXRBbW91bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2ludGVuZGVkRGViaXRBbW91bnQgIT09IHVuZGVmaW5lZCAmJiBfaW50ZW5kZWREZWJpdEFtb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2ludGVuZGVkRGViaXRBbW91bnQsICdpbnRlbmRlZERlYml0QW1vdW50Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PEJhdGNoT3JkZXJQdXRSZXNwb25zZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jbGllbnQtYXBpL3YyL2JhdGNoLW9yZGVycy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoX2JhdGNoT3JkZXJJZCkpfWAsXG4gICAgICAgICAgICBfYmF0Y2hPcmRlclB1dFJlcXVlc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVCYXRjaE9yZGVyQnlJZFVybChyZXF1ZXN0UGFyYW1ldGVyczogVXBkYXRlQmF0Y2hPcmRlckJ5SWRSZXF1ZXN0UGFyYW1zKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgX2JhdGNoT3JkZXJJZCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlcklkXCJdO1xuICAgICAgICBpZiAoX2JhdGNoT3JkZXJJZCA9PT0gbnVsbCB8fCBfYmF0Y2hPcmRlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUJhdGNoT3JkZXJCeUlkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9iYXRjaE9yZGVyUHV0UmVxdWVzdCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiYmF0Y2hPcmRlclB1dFJlcXVlc3RcIl07XG4gICAgICAgIGlmIChfYmF0Y2hPcmRlclB1dFJlcXVlc3QgPT09IG51bGwgfHwgX2JhdGNoT3JkZXJQdXRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGJhdGNoT3JkZXJQdXRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQmF0Y2hPcmRlckJ5SWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX2RyeVJ1biA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiZHJ5UnVuXCJdO1xuICAgICAgICBjb25zdCBfaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudFwiXTtcbiAgICAgICAgY29uc3QgX2ludGVuZGVkRGViaXRUcmFuc2FjdGlvbnNDb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50XCJdO1xuICAgICAgICBjb25zdCBfaW50ZW5kZWRDcmVkaXRBbW91bnQgPSByZXF1ZXN0UGFyYW1ldGVyc1tcImludGVuZGVkQ3JlZGl0QW1vdW50XCJdO1xuICAgICAgICBjb25zdCBfaW50ZW5kZWREZWJpdEFtb3VudCA9IHJlcXVlc3RQYXJhbWV0ZXJzW1wiaW50ZW5kZWREZWJpdEFtb3VudFwiXTtcbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKF9kcnlSdW4gIT09IHVuZGVmaW5lZCAmJiBfZHJ5UnVuICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5fZHJ5UnVuLCAnZHJ5UnVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pbnRlbmRlZENyZWRpdFRyYW5zYWN0aW9uc0NvdW50ICE9PSB1bmRlZmluZWQgJiYgX2ludGVuZGVkQ3JlZGl0VHJhbnNhY3Rpb25zQ291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9pbnRlbmRlZENyZWRpdFRyYW5zYWN0aW9uc0NvdW50LCAnaW50ZW5kZWRDcmVkaXRUcmFuc2FjdGlvbnNDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfaW50ZW5kZWREZWJpdFRyYW5zYWN0aW9uc0NvdW50ICE9PSB1bmRlZmluZWQgJiYgX2ludGVuZGVkRGViaXRUcmFuc2FjdGlvbnNDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+X2ludGVuZGVkRGViaXRUcmFuc2FjdGlvbnNDb3VudCwgJ2ludGVuZGVkRGViaXRUcmFuc2FjdGlvbnNDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfaW50ZW5kZWRDcmVkaXRBbW91bnQgIT09IHVuZGVmaW5lZCAmJiBfaW50ZW5kZWRDcmVkaXRBbW91bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9pbnRlbmRlZENyZWRpdEFtb3VudCwgJ2ludGVuZGVkQ3JlZGl0QW1vdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9pbnRlbmRlZERlYml0QW1vdW50ICE9PSB1bmRlZmluZWQgJiYgX2ludGVuZGVkRGViaXRBbW91bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pl9pbnRlbmRlZERlYml0QW1vdW50LCAnaW50ZW5kZWREZWJpdEFtb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbWV0ZXJzLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NsaWVudC1hcGkvdjIvYmF0Y2gtb3JkZXJzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhfYmF0Y2hPcmRlcklkKSl9JHtxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogJyd9YDtcbiAgICB9XG5cbn1cbiJdfQ==