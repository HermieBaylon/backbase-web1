{"version":3,"file":"backbase-income-spending-analysis-widget-ang.js","sources":["../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/constants.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/pie/pie-label.component.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/services/injection-registery.service.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/model/position.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/tooltip/tooltip.component.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/services/injection.service.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/tooltip/tooltip.service.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/tooltip/tooltip.directive.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/pie/pie-series.component.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/pie/pie-chart.component.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/donut-chart.component.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/donut-chart.component.html","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/tooltip/tooltip.module.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/ngx/pie/pie-chart.module.ts","../../../../libs/income-spending-analysis-widget/src/bb-donut-chart-ui/donut-chart.module.ts","../../../../libs/income-spending-analysis-widget/src/constants.ts","../../../../libs/income-spending-analysis-widget/src/bb-month-selector-ui/month-selector.component.ts","../../../../libs/income-spending-analysis-widget/src/bb-month-selector-ui/month-selector.component.html","../../../../libs/income-spending-analysis-widget/src/income-spending-analysis.service.ts","../../../../libs/income-spending-analysis-widget/src/income-spending-analysis.component.ts","../../../../libs/income-spending-analysis-widget/src/income-spending-analysis.component.html","../../../../libs/income-spending-analysis-widget/src/income-spending-analysis.module.ts","../../../../libs/income-spending-analysis-widget/backbase-income-spending-analysis-widget-ang.ts"],"sourcesContent":["export const CARET_SIZE_CSS_VAR = '--chart-tooltip-caret-size';\nexport enum ArrowClasses {\n  LEFT = 'bb-arrow-left',\n  RIGHT = 'bb-arrow-right',\n}\n","import { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\nimport { trimLabel } from '@swimlane/ngx-charts';\nimport { Arc } from '../../model/types';\n\n@Component({\n  // eslint-disable-next-line @angular-eslint/component-selector\n  selector: 'g[bb-charts-pie-label]',\n  template: `\n    <ng-container *ngIf=\"template; else defaultTemplate\">\n      <ng-template\n        [ngTemplateOutlet]=\"template\"\n        [ngTemplateOutletContext]=\"{ data: data, color: color, icon: icon, label: labelText }\"\n      >\n      </ng-template>\n    </ng-container>\n\n    <ng-template #defaultTemplate>\n      <svg:g [attr.transform]=\"attrTransform\" [style.transform]=\"styleTransform\" [style.transition]=\"textTransition\">\n        <svg:text\n          class=\"pie-label\"\n          [class.animation]=\"animations\"\n          dy=\".35em\"\n          [style.textAnchor]=\"'middle'\"\n          [style.shapeRendering]=\"'crispEdges'\"\n        >\n          {{ labelText }}\n        </svg:text>\n      </svg:g>\n    </ng-template>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PieLabelComponent implements OnInit {\n  /**\n   * Information about the chart slice.\n   */\n  @Input() data: Arc | undefined;\n  /**\n   * Radius of the circle.\n   */\n  @Input() radius = 0;\n  /**\n   * Text for the label.\n   */\n  @Input() label: string | undefined;\n  /**\n   * Color hex for the label.\n   */\n  @Input() color: string | undefined;\n  /**\n   * Icon name for the label.\n   */\n  @Input() icon: string | undefined;\n  /**\n   * The maximum number of labels displayed.\n   */\n  @Input() max = 1;\n  /**\n   * Value of the label.\n   */\n  @Input() value = 0;\n  /**\n   * Make the radius of each slice proportional to it's value.\n   */\n  @Input() explodeSlices = false;\n  /**\n   * Enable/Disable animations.\n   */\n  @Input() animations = true;\n  /**\n   * Enable/Disable label trimming.\n   */\n  @Input() labelTrim = true;\n  /**\n   * Set the label trimming size.\n   */\n  @Input() labelTrimSize = 10;\n  /**\n   * Template for the label.\n   */\n  @Input() template: any;\n\n  trimLabel: (label: string, max?: number) => string;\n\n  private readonly isIE = /(edge|msie|trident)/i.test(navigator.userAgent);\n\n  constructor() {\n    this.trimLabel = trimLabel;\n  }\n\n  get labelText() {\n    return this.labelTrim ? trimLabel(this.label || '', this.labelTrimSize) : this.label;\n  }\n\n  get textX(): number {\n    return this.data ? this.data.pos[0] : 0;\n  }\n\n  get textY(): number {\n    return this.data ? this.data.pos[1] : 0;\n  }\n\n  get textTransition(): string {\n    return this.isIE || !this.animations ? '' : 'transform 0.75s';\n  }\n\n  get styleTransform(): string {\n    return this.isIE ? '' : `translate3d(${this.textX}px, ${this.textY}px, 0)`;\n  }\n\n  get attrTransform(): string {\n    return !this.isIE ? '' : `translate(${this.textX}, ${this.textY})`;\n  }\n\n  ngOnInit() {\n    if (typeof this.data === 'undefined') {\n      throw new Error(`\"data\" input is required in \"${this.constructor.name}\"`);\n    }\n  }\n}\n","import { ComponentRef, Type } from '@angular/core';\nimport { InjectionService } from './injection.service';\n\nexport interface PartialBindings {\n  inputs?: object;\n  outputs?: object;\n}\n\nexport abstract class InjectionRegisteryService<T = any> {\n  protected abstract type: Type<T>;\n\n  protected defaults: PartialBindings = {};\n  protected components: Map<any, Array<ComponentRef<T>>> = new Map();\n\n  constructor(public injectionService: InjectionService) {}\n\n  getByType(type: Type<T> = this.type) {\n    return this.components.get(type);\n  }\n\n  create(bindings: object): ComponentRef<T> {\n    return this.createByType(this.type, bindings);\n  }\n\n  createByType(type: Type<T>, bindings: PartialBindings): ComponentRef<T> {\n    bindings = this.assignDefaults(bindings);\n\n    const component = this.injectComponent(type, bindings);\n    this.register(type, component);\n\n    return component;\n  }\n\n  destroy(instance: ComponentRef<T>): void {\n    const compsByType = this.components.get(instance.componentType);\n\n    if (compsByType && compsByType.length) {\n      const idx = compsByType.indexOf(instance);\n\n      if (idx > -1) {\n        const component = compsByType[idx];\n        component.destroy();\n        compsByType.splice(idx, 1);\n      }\n    }\n  }\n\n  destroyAll(): void {\n    this.destroyByType(this.type);\n  }\n\n  destroyByType(type: Type<T>): void {\n    const comps = this.components.get(type);\n\n    if (comps && comps.length) {\n      let i = comps.length - 1;\n      while (i >= 0) {\n        this.destroy(comps[i--]);\n      }\n    }\n  }\n\n  protected injectComponent(type: Type<T>, bindings: PartialBindings): ComponentRef<T> {\n    return this.injectionService.appendComponent(type, bindings);\n  }\n\n  protected assignDefaults(bindings: PartialBindings): PartialBindings {\n    const inputs = { ...this.defaults.inputs };\n    const outputs = { ...this.defaults.outputs };\n\n    if (!bindings.inputs && !bindings.outputs) {\n      bindings = { inputs: bindings };\n    }\n\n    if (inputs) {\n      bindings.inputs = { ...inputs, ...bindings.inputs };\n    }\n\n    if (outputs) {\n      bindings.outputs = { ...outputs, ...bindings.outputs };\n    }\n\n    return bindings;\n  }\n\n  protected register(type: Type<T>, component: ComponentRef<T>): void {\n    if (!this.components.has(type)) {\n      this.components.set(type, []);\n    }\n\n    const types = this.components.get(type) || [];\n    types.push(component);\n  }\n}\n","import { PlacementTypes } from '@swimlane/ngx-charts';\n\nconst caretOffset = 7;\n\nfunction verticalPosition(elDimensions: any, popoverDimensions: any, alignment: any) {\n  if (alignment === 'top') {\n    return elDimensions.top - caretOffset;\n  }\n\n  if (alignment === 'bottom') {\n    return elDimensions.top + elDimensions.height - popoverDimensions.height + caretOffset;\n  }\n\n  if (alignment === 'center') {\n    return elDimensions.top + elDimensions.height / 2 - popoverDimensions.height / 2;\n  }\n\n  return undefined;\n}\n\nfunction horizontalPosition(elDimensions: any, popoverDimensions: any, alignment: any) {\n  if (alignment === 'left') {\n    return elDimensions.left - caretOffset;\n  }\n\n  if (alignment === 'right') {\n    return elDimensions.left + elDimensions.width - popoverDimensions.width + caretOffset;\n  }\n\n  if (alignment === 'center') {\n    return elDimensions.left + elDimensions.width / 2 - popoverDimensions.width / 2;\n  }\n\n  return undefined;\n}\n\n/**\n * Position helper for the popover directive.\n *\n * @export\n */\nexport class PositionHelper {\n  /**\n   * Calculate vertical alignment position\n   *\n   * @memberOf PositionHelper\n   */\n  static calculateVerticalAlignment(elDimensions: any, popoverDimensions: any, alignment: any): number {\n    let result = verticalPosition(elDimensions, popoverDimensions, alignment);\n\n    if (result + popoverDimensions.height > window.innerHeight) {\n      result = window.innerHeight - popoverDimensions.height;\n    }\n\n    return result || 0;\n  }\n\n  /**\n   * Calculate vertical caret position\n   *\n   * @memberOf PositionHelper\n   */\n  static calculateVerticalCaret(\n    elDimensions: any,\n    popoverDimensions: any,\n    caretDimensions: any,\n    alignment: any,\n  ): number {\n    let result = 0;\n\n    if (alignment === 'top') {\n      result = elDimensions.height / 2 - caretDimensions.height / 2 + caretOffset;\n    }\n\n    if (alignment === 'bottom') {\n      result = popoverDimensions.height - elDimensions.height / 2 - caretDimensions.height / 2 - caretOffset;\n    }\n\n    if (alignment === 'center') {\n      result = popoverDimensions.height / 2 - caretDimensions.height / 2;\n    }\n\n    const popoverPosition = verticalPosition(elDimensions, popoverDimensions, alignment);\n    if (popoverPosition + popoverDimensions.height > window.innerHeight) {\n      result += popoverPosition + popoverDimensions.height - window.innerHeight;\n    }\n\n    return result;\n  }\n\n  /**\n   * Calculate horz alignment position\n   *\n   * @memberOf PositionHelper\n   */\n  static calculateHorizontalAlignment(elDimensions: any, popoverDimensions: any, alignment: any): number {\n    let result = horizontalPosition(elDimensions, popoverDimensions, alignment);\n\n    if (result + popoverDimensions.width > window.innerWidth) {\n      result = window.innerWidth - popoverDimensions.width;\n    }\n\n    return result || 0;\n  }\n\n  /**\n   * Calculate horz caret position\n   *\n   * @memberOf PositionHelper\n   */\n  static calculateHorizontalCaret(\n    elDimensions: any,\n    popoverDimensions: any,\n    caretDimensions: any,\n    alignment: any,\n  ): number {\n    let result = 0;\n\n    if (alignment === 'left') {\n      result = elDimensions.width / 2 - caretDimensions.width / 2 + caretOffset;\n    }\n\n    if (alignment === 'right') {\n      result = popoverDimensions.width - elDimensions.width / 2 - caretDimensions.width / 2 - caretOffset;\n    }\n\n    if (alignment === 'center') {\n      result = popoverDimensions.width / 2 - caretDimensions.width / 2;\n    }\n\n    const popoverPosition = horizontalPosition(elDimensions, popoverDimensions, alignment);\n    if (popoverPosition + popoverDimensions.width > window.innerWidth) {\n      result += popoverPosition + popoverDimensions.width - window.innerWidth;\n    }\n\n    return result;\n  }\n\n  /**\n   * Checks if the element's position should be flipped\n   *\n   * @memberOf PositionHelper\n   */\n  static shouldFlip(elDimensions: any, popoverDimensions: any, placement: any, spacing: any): boolean {\n    let flip = false;\n\n    if (placement === 'right') {\n      if (elDimensions.left + elDimensions.width + popoverDimensions.width + spacing > window.innerWidth) {\n        flip = true;\n      }\n    }\n\n    if (placement === 'left') {\n      if (elDimensions.left - popoverDimensions.width - spacing < 0) {\n        flip = true;\n      }\n    }\n\n    if (placement === 'top') {\n      if (elDimensions.top - popoverDimensions.height - spacing < 0) {\n        flip = true;\n      }\n    }\n\n    if (placement === 'bottom') {\n      if (elDimensions.top + elDimensions.height + popoverDimensions.height + spacing > window.innerHeight) {\n        flip = true;\n      }\n    }\n\n    return flip;\n  }\n\n  /**\n   * Position caret\n   *\n   * @memberOf PositionHelper\n   */\n  static positionCaret(placement: any, elmDim: any, hostDim: any, caretDimensions: any, alignment: any): any {\n    let top = 0;\n    let left = 0;\n\n    if (placement === PlacementTypes.Right) {\n      left = -7;\n      top = PositionHelper.calculateVerticalCaret(hostDim, elmDim, caretDimensions, alignment);\n    } else if (placement === PlacementTypes.Left) {\n      left = elmDim.width;\n      top = PositionHelper.calculateVerticalCaret(hostDim, elmDim, caretDimensions, alignment);\n    } else if (placement === PlacementTypes.Top) {\n      top = elmDim.height;\n      left = PositionHelper.calculateHorizontalCaret(hostDim, elmDim, caretDimensions, alignment);\n    } else if (placement === PlacementTypes.Bottom) {\n      top = -7;\n      left = PositionHelper.calculateHorizontalCaret(hostDim, elmDim, caretDimensions, alignment);\n    }\n\n    return { top, left };\n  }\n\n  /**\n   * Position content\n   *\n   * @memberOf PositionHelper\n   */\n  static positionContent(placement: any, elmDim: any, hostDim: any, spacing: any, alignment: any): any {\n    let top = 0;\n    let left = 0;\n\n    if (placement === PlacementTypes.Right) {\n      left = hostDim.left + hostDim.width + spacing;\n      top = PositionHelper.calculateVerticalAlignment(hostDim, elmDim, alignment);\n    } else if (placement === PlacementTypes.Left) {\n      left = hostDim.left - elmDim.width - spacing;\n      top = PositionHelper.calculateVerticalAlignment(hostDim, elmDim, alignment);\n    } else if (placement === PlacementTypes.Top) {\n      top = hostDim.top - elmDim.height - spacing;\n      left = PositionHelper.calculateHorizontalAlignment(hostDim, elmDim, alignment);\n    } else if (placement === PlacementTypes.Bottom) {\n      top = hostDim.top + hostDim.height + spacing;\n      left = PositionHelper.calculateHorizontalAlignment(hostDim, elmDim, alignment);\n    }\n\n    return { top, left };\n  }\n\n  /**\n   * Determine placement based on flip\n   *\n   * @memberOf PositionHelper\n   */\n  static determinePlacement(placement: any, elmDim: any, hostDim: any, spacing: any): any {\n    const shouldFlip = PositionHelper.shouldFlip(hostDim, elmDim, placement, spacing);\n\n    if (shouldFlip) {\n      if (placement === PlacementTypes.Right) {\n        return PlacementTypes.Left;\n      } else if (placement === PlacementTypes.Left) {\n        return PlacementTypes.Right;\n      } else if (placement === PlacementTypes.Top) {\n        return PlacementTypes.Bottom;\n      } else if (placement === PlacementTypes.Bottom) {\n        return PlacementTypes.Top;\n      }\n    }\n\n    return placement;\n  }\n}\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Input,\n  Renderer2,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { PlacementTypes, StyleTypes, throttleable } from '@swimlane/ngx-charts';\nimport { PositionHelper } from '../../model/position';\n\n@Component({\n  selector: 'bb-tooltip-content',\n  template: `\n    <div class=\"tooltip-content\">\n      <span *ngIf=\"!title\">\n        <ng-template [ngTemplateOutlet]=\"template\" [ngTemplateOutletContext]=\"{ model: context }\"> </ng-template>\n      </span>\n      <span *ngIf=\"title\" [innerHTML]=\"title\"> </span>\n    </div>\n  `,\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./tooltip.component.scss'],\n})\nexport class TooltipContentComponent implements AfterViewInit {\n  @Input() host: any;\n  @Input() type: StyleTypes | undefined;\n  @Input() placement: PlacementTypes | undefined;\n  @Input() alignment: PlacementTypes | undefined;\n  @Input() spacing: number | undefined;\n  @Input() cssClass: string | undefined;\n  @Input() title: string | undefined;\n  @Input() template: any;\n  @Input() context: any;\n  @Input() pos: [number, number] | undefined;\n\n  @HostBinding('class')\n  get cssClasses(): string {\n    let clz = 'ngx-charts-tooltip-content';\n    clz += ` position-${this.placement}`;\n    clz += ` type-${this.type}`;\n    clz += ` ${this.cssClass}`;\n    return clz;\n  }\n\n  constructor(public element: ElementRef, private readonly renderer: Renderer2) {}\n\n  ngAfterViewInit(): void {\n    setTimeout(this.position.bind(this));\n  }\n\n  position(): void {\n    // if host is not there, don't show\n    if (!this.host) {\n      return;\n    }\n\n    const nativeElm = this.element.nativeElement;\n    const hostDim = this.host.nativeElement.getBoundingClientRect();\n\n    // if no dims were found, never show\n    if (!hostDim.height && !hostDim.width) return;\n\n    const elmDim = nativeElm.getBoundingClientRect();\n    this.checkFlip(hostDim, elmDim);\n    this.positionContent(nativeElm, hostDim, elmDim);\n\n    // animate its entry\n    setTimeout(() => this.renderer.addClass(nativeElm, 'animate'), 1);\n  }\n\n  positionContent(nativeElm: HTMLElement, hostDim: any, elmDim: any): void {\n    // if custom position is requested, ignore library's calculations\n    if (this.pos && this.pos.length === 2) {\n      const arrowSize: number = (this.context.arrowSize || 0) * (this.placement === PlacementTypes.Right ? 1 : -1);\n      const l = this.pos[0] + arrowSize + elmDim.width * (this.placement === PlacementTypes.Right ? 0 : -1);\n      const t = this.pos[1] - elmDim.height / 2;\n\n      this.renderer.setStyle(nativeElm, 'top', `${t}px`);\n      this.renderer.setStyle(nativeElm, 'left', `${l}px`);\n      return;\n    }\n\n    const { top, left } = PositionHelper.positionContent(this.placement, elmDim, hostDim, this.spacing, this.alignment);\n\n    this.renderer.setStyle(nativeElm, 'top', `${top}px`);\n    this.renderer.setStyle(nativeElm, 'left', `${left}px`);\n  }\n\n  checkFlip(hostDim: any, elmDim: any): void {\n    this.placement = PositionHelper.determinePlacement(this.placement, elmDim, hostDim, this.spacing);\n  }\n\n  @HostListener('window:resize')\n  @throttleable(100)\n  onWindowResize(): void {\n    this.position();\n  }\n}\n","import { ComponentPortal, DomPortalHost } from '@angular/cdk/portal';\nimport {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  Type,\n  ViewContainerRef,\n} from '@angular/core';\n\nfunction isViewContainerRef(x: any): x is ViewContainerRef {\n  return x.element;\n}\n\n/**\n * Injection service is a helper to append components\n * dynamically to a known location in the DOM, most\n * noteably for dialogs/tooltips appending to body.\n *\n * @export\n */\n@Injectable()\nexport class InjectionService {\n  // eslint-disable-next-line\n  static globalRootViewContainer: ViewContainerRef | null = null;\n\n  /**\n   * Sets a default global root view container. This is useful for\n   * things like ngUpgrade that doesn't have a ApplicationRef root.\n   *\n   * @param container\n   */\n  static setGlobalRootViewContainer(container: ViewContainerRef): void {\n    InjectionService.globalRootViewContainer = container;\n  }\n  // eslint-disable-next-line\n  private _container: ViewContainerRef | undefined;\n\n  constructor(\n    private applicationRef: ApplicationRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private injector: Injector,\n  ) {}\n\n  /**\n   * Gets the root view container to inject the component to.\n   *\n   * @memberOf InjectionService\n   */\n  getRootViewContainer(): ViewContainerRef | ComponentRef<any> {\n    if (this._container) return this._container;\n    if (InjectionService.globalRootViewContainer) return InjectionService.globalRootViewContainer;\n\n    if (this.applicationRef.components.length) return this.applicationRef.components[0];\n\n    throw new Error(\n      'View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.',\n    );\n  }\n\n  /**\n   * Overrides the default root view container. This is useful for\n   * things like ngUpgrade that doesn't have a ApplicationRef root.\n   *\n   * @param container\n   *\n   * @memberOf InjectionService\n   */\n  setRootViewContainer(container: ViewContainerRef): void {\n    this._container = container;\n  }\n\n  /**\n   * Gets the html element for a component ref.\n   *\n   * @param componentRef\n   *\n   * @memberOf InjectionService\n   */\n  getComponentRootNode(component: ViewContainerRef | ComponentRef<any>): HTMLElement {\n    if (isViewContainerRef(component)) {\n      return component.element.nativeElement;\n    }\n    if (component.hostView && (component.hostView as EmbeddedViewRef<any>).rootNodes.length > 0) {\n      return (component.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n    }\n\n    // the top most component root node has no `hostView`\n    return component.location.nativeElement;\n  }\n\n  /**\n   * Gets the root component container html element.\n   *\n   * @memberOf InjectionService\n   */\n  getRootViewContainerNode(component: ViewContainerRef | ComponentRef<any>): HTMLElement {\n    return this.getComponentRootNode(component);\n  }\n\n  /**\n   * Projects the bindings onto the component\n   *\n   * @param component\n   * @param options\n   *\n   * @memberOf InjectionService\n   */\n  projectComponentBindings(component: ComponentRef<any>, bindings: any): ComponentRef<any> {\n    if (bindings) {\n      if (bindings.inputs !== undefined) {\n        const bindingKeys = Object.getOwnPropertyNames(bindings.inputs);\n        for (const bindingName of bindingKeys) {\n          component.instance[bindingName] = bindings.inputs[bindingName];\n        }\n      }\n\n      if (bindings.outputs !== undefined) {\n        const eventKeys = Object.getOwnPropertyNames(bindings.outputs);\n        for (const eventName of eventKeys) {\n          component.instance[eventName] = bindings.outputs[eventName];\n        }\n      }\n    }\n\n    return component;\n  }\n\n  /**\n   * Appends a component to a adjacent location\n   *\n   * @param componentClass\n   * @param [options={}]\n   * @param [location]\n   *\n   * @memberOf InjectionService\n   */\n  appendComponent<T>(componentClass: Type<T>, bindings: any = {}, location?: any): ComponentRef<any> {\n    if (!location) location = this.getRootViewContainer();\n    const appendLocation = this.getComponentRootNode(location);\n\n    const portalHost = new DomPortalHost(\n      appendLocation,\n      this.componentFactoryResolver,\n      this.applicationRef,\n      this.injector,\n    );\n\n    const portal = new ComponentPortal(componentClass);\n\n    const componentRef = portalHost.attach(portal);\n    this.projectComponentBindings(componentRef, bindings);\n    return componentRef;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { InjectionRegisteryService } from '../../services/injection-registery.service';\nimport { InjectionService } from '../../services/injection.service';\nimport { TooltipContentComponent } from './tooltip.component';\n\n@Injectable()\nexport class TooltipService extends InjectionRegisteryService {\n  type: any = TooltipContentComponent;\n\n  constructor(public injectionService: InjectionService) {\n    super(injectionService);\n  }\n}\n","import {\n  Directive,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnDestroy,\n  Output,\n  Renderer2,\n  ViewContainerRef,\n} from '@angular/core';\nimport { PlacementTypes, ShowTypes, StyleTypes } from '@swimlane/ngx-charts';\nimport { TooltipService } from './tooltip.service';\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[bb-tooltip]',\n})\nexport class TooltipDirective implements OnDestroy {\n  @Input() tooltipCssClass = '';\n  @Input() tooltipTitle = '';\n  @Input() tooltipPosition: [number, number] | undefined;\n  @Input() tooltipAppendToBody = true;\n  @Input() tooltipSpacing = 10;\n  @Input() tooltipDisabled = false;\n  @Input() tooltipShowCaret = true;\n  @Input() tooltipPlacement: PlacementTypes = PlacementTypes.Top;\n  @Input() tooltipAlignment: PlacementTypes = PlacementTypes.Center;\n  @Input() tooltipType: StyleTypes = StyleTypes.popover;\n  @Input() tooltipCloseOnClickOutside = true;\n  @Input() tooltipCloseOnMouseLeave = true;\n  @Input() tooltipHideTimeout = 300;\n  @Input() tooltipShowTimeout = 100;\n  @Input() tooltipTemplate: any;\n  @Input() tooltipShowEvent: ShowTypes = ShowTypes.all;\n  @Input() tooltipContext: any;\n  @Input() tooltipImmediateExit = false;\n\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() show = new EventEmitter();\n  @Output() hide = new EventEmitter();\n\n  private get listensForFocus(): boolean {\n    return this.tooltipShowEvent === ShowTypes.all || this.tooltipShowEvent === ShowTypes.focus;\n  }\n\n  private get listensForHover(): boolean {\n    return this.tooltipShowEvent === ShowTypes.all || this.tooltipShowEvent === ShowTypes.mouseover;\n  }\n\n  private component: any;\n  private timeout: any;\n  private mouseLeaveContentEvent: any;\n  private mouseEnterContentEvent: any;\n  private documentClickEvent: any;\n\n  constructor(\n    private readonly tooltipService: TooltipService,\n    private readonly viewContainerRef: ViewContainerRef,\n    private readonly renderer: Renderer2,\n  ) {}\n\n  ngOnDestroy(): void {\n    this.hideTooltip(true);\n  }\n\n  @HostListener('focusin')\n  onFocus(): void {\n    if (this.listensForFocus) {\n      this.showTooltip();\n    }\n  }\n\n  @HostListener('blur')\n  onBlur(): void {\n    if (this.listensForFocus) {\n      this.hideTooltip(true);\n    }\n  }\n\n  @HostListener('mouseenter')\n  onMouseEnter(): void {\n    if (this.listensForHover) {\n      this.showTooltip();\n    }\n  }\n\n  @HostListener('mouseleave', ['$event.target'])\n  onMouseLeave(target: any): void {\n    if (this.listensForHover && this.tooltipCloseOnMouseLeave) {\n      clearTimeout(this.timeout);\n\n      if (this.component) {\n        const contentDom = this.component.instance.element.nativeElement;\n        const contains = contentDom.contains(target);\n        if (contains) return;\n      }\n\n      this.hideTooltip(this.tooltipImmediateExit);\n    }\n  }\n\n  @HostListener('click')\n  onMouseClick() {\n    if (this.listensForHover) {\n      this.hideTooltip(true);\n    }\n  }\n\n  showTooltip(immediate?: boolean): void {\n    if (this.component || this.tooltipDisabled) return;\n\n    const time = immediate ? 0 : this.tooltipShowTimeout;\n\n    clearTimeout(this.timeout);\n    this.timeout = setTimeout(() => {\n      this.tooltipService.destroyAll();\n\n      const options = this.createBoundOptions();\n      this.component = this.tooltipService.create(options);\n\n      // add a tiny timeout to avoid event re-triggers\n      setTimeout(() => {\n        if (this.component) {\n          this.addHideListeners(this.component.instance.element.nativeElement);\n        }\n      }, 10);\n\n      this.show.emit(true);\n    }, time);\n  }\n\n  addHideListeners(tooltip: any): void {\n    // on mouse enter, cancel the hide triggered by the leave\n    this.mouseEnterContentEvent = this.renderer.listen(tooltip, 'mouseenter', () => {\n      clearTimeout(this.timeout);\n    });\n\n    // content mouse leave listener\n    if (this.tooltipCloseOnMouseLeave) {\n      this.mouseLeaveContentEvent = this.renderer.listen(tooltip, 'mouseleave', () => {\n        this.hideTooltip(this.tooltipImmediateExit);\n      });\n    }\n\n    // content close on click outside\n    if (this.tooltipCloseOnClickOutside) {\n      this.documentClickEvent = this.renderer.listen(document, 'click', (event: any) => {\n        const contains = tooltip.contains(event.target);\n        if (!contains) this.hideTooltip();\n      });\n    }\n  }\n\n  hideTooltip(immediate: boolean = false): void {\n    if (!this.component) return;\n\n    const destroyFn = () => {\n      // remove events\n      if (this.mouseLeaveContentEvent) this.mouseLeaveContentEvent();\n      if (this.mouseEnterContentEvent) this.mouseEnterContentEvent();\n      if (this.documentClickEvent) this.documentClickEvent();\n\n      // emit events\n      this.hide.emit(true);\n\n      // destroy component\n      this.tooltipService.destroy(this.component);\n      this.component = undefined;\n    };\n\n    clearTimeout(this.timeout);\n    if (!immediate) {\n      this.timeout = setTimeout(destroyFn, this.tooltipHideTimeout);\n    } else {\n      destroyFn();\n    }\n  }\n\n  private createBoundOptions(): any {\n    return {\n      title: this.tooltipTitle,\n      template: this.tooltipTemplate,\n      host: this.viewContainerRef.element,\n      placement: this.tooltipPlacement,\n      alignment: this.tooltipAlignment,\n      type: this.tooltipType,\n      showCaret: this.tooltipShowCaret,\n      cssClass: this.tooltipCssClass,\n      spacing: this.tooltipSpacing,\n      context: this.tooltipContext,\n      pos: this.tooltipPosition,\n    };\n  }\n}\n","import { CurrencyPipe } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  TemplateRef,\n} from '@angular/core';\nimport { ColorHelper, formatLabel, PlacementTypes, ViewDimensions } from '@swimlane/ngx-charts';\nimport { max } from 'd3-array';\nimport { arc, pie } from 'd3-shape';\nimport { Arc, ChartColorItem, ChartDataItemExtended } from '../../model/types';\n\n@Component({\n  // eslint-disable-next-line @angular-eslint/component-selector\n  selector: 'g[bb-charts-pie-series]',\n  template: `\n    <svg:g\n      *ngFor=\"let arc of data; trackBy: trackBy\"\n      data-role=\"analysis-donut-chart-segment\"\n      bb-tooltip\n      [tooltipDisabled]=\"tooltipDisabled\"\n      [tooltipPlacement]=\"getTooltipPlacement(arc)\"\n      [tooltipType]=\"'tooltip'\"\n      [tooltipShowCaret]=\"false\"\n      [tooltipSpacing]=\"0\"\n      [tooltipTitle]=\"getTooltipTitle(arc)\"\n      [tooltipPosition]=\"getTooltipPosition(arc)\"\n      [tooltipTemplate]=\"tooltipTemplate\"\n      [tooltipContext]=\"arc.data\"\n    >\n      <svg:g\n        bb-charts-pie-label\n        *ngIf=\"labelVisible(arc)\"\n        [data]=\"arc\"\n        [radius]=\"outerRadius\"\n        [color]=\"color(arc)\"\n        [icon]=\"icon(arc)\"\n        [label]=\"labelText(arc)\"\n        [labelTrim]=\"trimLabels\"\n        [labelTrimSize]=\"maxLabelLength\"\n        [template]=\"labelTemplate\"\n        [max]=\"max\"\n        [value]=\"arc.value\"\n        [explodeSlices]=\"explodeSlices\"\n        [animations]=\"animations\"\n      ></svg:g>\n      <svg:g\n        ngx-charts-pie-arc\n        [startAngle]=\"arc.startAngle\"\n        [endAngle]=\"arc.endAngle\"\n        [innerRadius]=\"innerRadius\"\n        [outerRadius]=\"outerRadius\"\n        [fill]=\"color(arc)\"\n        [value]=\"arc.data.value\"\n        [gradient]=\"gradient\"\n        [data]=\"arc.data\"\n        [max]=\"max\"\n        [explodeSlices]=\"explodeSlices\"\n        [isActive]=\"isActive(arc.data)\"\n        [animate]=\"animations\"\n        (select)=\"onClick($event)\"\n        (activate)=\"activate.emit($event)\"\n        (deactivate)=\"deactivate.emit($event)\"\n        (dblclick)=\"dblclick.emit($event)\"\n      ></svg:g>\n    </svg:g>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PieSeriesComponent implements OnChanges {\n  /**\n   * Custom color palette for the chart.\n   */\n  @Input() colors: ColorHelper | undefined;\n  /**\n   * Array of Chart data objects needed for the chart to be rendered.\n   */\n  @Input() series: ChartDataItemExtended[] = [];\n  /**\n   * Dimensions of the chart slice.\n   */\n  @Input() dims: ViewDimensions | undefined;\n  /**\n   * Reference to the chart element.\n   */\n  @Input() chartElement: ElementRef | undefined;\n  /**\n   * Inner slice radius.\n   */\n  @Input() innerRadius = 60;\n  /**\n   * Outer slice radius.\n   */\n  @Input() outerRadius = 80;\n  /**\n   * Slice offsets.\n   */\n  @Input() margins = [0, 0, 0, 0];\n  /**\n   * Make the radius of each slice proportional to it's value.\n   */\n  @Input() explodeSlices: boolean | undefined;\n  /**\n   * Flag to show/hide labels.\n   */\n  @Input() showLabels = false;\n  /**\n   * If enabled adds gradient to the chart.\n   */\n  @Input() gradient: boolean | undefined;\n  /**\n   * Preselects an active slice of the chart.\n   */\n  @Input() activeEntries: ChartDataItemExtended[] = [];\n  /**\n   * Sets the threshold in which the label of each section is visible.\n   */\n  @Input() labelThreshold = 0;\n  /**\n   * Pass custom formating if needed for the chart labels.\n   */\n  @Input() labelFormatting: any;\n  /**\n   * The template for the label.\n   */\n  @Input() labelTemplate: TemplateRef<any> | undefined;\n  /**\n   * Enable/disable label trimming.\n   */\n  @Input() trimLabels = true;\n  /**\n   * Set the max length of the label characters.\n   */\n  @Input() maxLabelLength = 10;\n  /**\n   * Text for the tooltip.\n   */\n  @Input() tooltipText: ((o: any) => any) | undefined;\n  /**\n   * Disable/enable the tooltip.\n   */\n  @Input() tooltipDisabled = false;\n  /**\n   * Template for the tooltip.\n   */\n  @Input() tooltipTemplate: TemplateRef<any> | undefined;\n  /**\n   * Enable/Disable animations.\n   */\n  @Input() animations = true;\n\n  /**\n   * EventEmitter for triggering a select event.\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() select = new EventEmitter();\n  /**\n   * EventEmitter for triggering a activate event.\n   */\n  @Output() activate = new EventEmitter();\n  /**\n   * EventEmitter for triggering a deactivate event.\n   */\n  @Output() deactivate = new EventEmitter();\n  /**\n   * EventEmitter for triggering a dblclick event.\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() dblclick = new EventEmitter();\n\n  max: number | undefined;\n  data: Arc[] = [];\n\n  constructor(private readonly currencyPipe: CurrencyPipe) {}\n\n  ngOnChanges(): void {\n    this.update();\n  }\n\n  update(): void {\n    const pieGenerator = pie<any, any>()\n      .value((d) => d.value)\n      // eslint-disable-next-line no-null/no-null\n      .sort(null);\n\n    const arcData = pieGenerator(this.series);\n\n    this.max = max(arcData, (d) => {\n      return d.value;\n    });\n\n    this.data = this.calculateLabelPositions(arcData as Arc[]);\n    this.tooltipText = this.tooltipText || this.defaultTooltipText;\n  }\n\n  midAngle(d: Arc): number {\n    return d.startAngle + (d.endAngle - d.startAngle) / 2;\n  }\n\n  outerArc(padding: number): any {\n    const r = this.outerRadius + padding;\n    return arc().innerRadius(r).outerRadius(r);\n  }\n\n  calculateLabelPositions(pieData: Arc[]): Arc[] {\n    const labelPositions = pieData;\n    labelPositions.forEach((d) => {\n      d.pos = this.outerArc(30).centroid(d);\n      d.edge = this.outerArc(0).centroid(d);\n    });\n\n    return labelPositions;\n  }\n\n  labelVisible(myArc: Arc): boolean {\n    return this.showLabels && myArc.data.portion > this.labelThreshold;\n  }\n\n  getTooltipTitle(a: Arc) {\n    if (this.tooltipTemplate || typeof this.tooltipText !== 'function') {\n      return undefined;\n    }\n\n    return this.tooltipText(a);\n  }\n\n  getTooltipPlacement(a: Arc) {\n    return this.midAngle(a) > Math.PI ? PlacementTypes.Left : PlacementTypes.Right;\n  }\n\n  labelText(myArc: Arc): string {\n    if (this.labelFormatting) {\n      return this.labelFormatting(myArc.data.value);\n    }\n\n    return (\n      this.currencyPipe.transform(myArc.data.value, myArc.data.totalAmount.currencyCode, undefined, '1.0-0') ||\n      myArc.data.value.toString()\n    );\n  }\n\n  label(myArc: Arc): string {\n    return formatLabel(myArc.data.name);\n  }\n\n  defaultTooltipText(myArc: Arc): string {\n    const label = this.label(myArc);\n    const val = formatLabel(myArc.data.value);\n\n    return `\n      <span class=\"tooltip-label\">${label}</span>\n      <span class=\"tooltip-val\">${val}</span>\n    `;\n  }\n\n  getTooltipPosition(myArc: Arc): [number, number] {\n    const halfWidth = this.outerRadius + this.margins[0];\n    let position = [0, 0];\n    if (this.chartElement) {\n      const chartDims = this.chartElement.nativeElement.getBoundingClientRect();\n      position = [chartDims.left + halfWidth, chartDims.top + halfWidth];\n    }\n\n    return [position[0] + myArc.edge[0], position[1] + myArc.edge[1]];\n  }\n\n  color(myArc: Arc): string {\n    return this.colors ? this.colors.getColor(this.label(myArc)) : '';\n  }\n\n  icon(myArc: Arc): string {\n    if (!this.colors || !this.colors.customColors) {\n      return '';\n    }\n    const label = this.label(myArc);\n    const found = this.colors.customColors.find((item: ChartColorItem) => item.name === label);\n    return found ? found.icon : '';\n  }\n\n  trackBy(index: number, item: Arc): string {\n    return <string>item.data.name;\n  }\n\n  onClick(data: ChartDataItemExtended): void {\n    this.select.emit(data);\n  }\n\n  isActive(entry: ChartDataItemExtended): boolean {\n    if (!this.activeEntries) return false;\n    const item = this.activeEntries.find((d) => {\n      return entry.name === d.name && entry.series === d.series;\n    });\n    return item !== undefined;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  NgZone,\n  Output,\n  PLATFORM_ID,\n  TemplateRef,\n  ViewEncapsulation,\n} from '@angular/core';\nimport {\n  BaseChartComponent,\n  calculateViewDimensions,\n  ColorHelper,\n  ScaleType,\n  ViewDimensions,\n} from '@swimlane/ngx-charts';\nimport { ChartDataItem, ChartDataItemExtended, LegendOptions } from '../../model/types';\n\n@Component({\n  selector: 'bb-charts-pie-chart',\n  template: `\n    <ngx-charts-chart\n      [view]=\"[width, height]\"\n      [showLegend]=\"legend\"\n      [legendOptions]=\"legendOptions\"\n      [activeEntries]=\"activeEntries\"\n      [animations]=\"animations\"\n      (legendLabelActivate)=\"onActivate($event)\"\n      (legendLabelDeactivate)=\"onDeactivate($event)\"\n      (legendLabelClick)=\"onClick($event)\"\n    >\n      <svg:g [attr.transform]=\"translation\" class=\"pie-chart chart\">\n        <svg:g\n          bb-charts-pie-series\n          [colors]=\"colors\"\n          [series]=\"series\"\n          [chartElement]=\"chartEl\"\n          [showLabels]=\"labels\"\n          [labelThreshold]=\"labelThreshold\"\n          [labelFormatting]=\"labelFormatting\"\n          [labelTemplate]=\"labelTemplate\"\n          [trimLabels]=\"trimLabels\"\n          [maxLabelLength]=\"maxLabelLength\"\n          [activeEntries]=\"activeEntries\"\n          [innerRadius]=\"innerRadius\"\n          [outerRadius]=\"outerRadius\"\n          [margins]=\"margins\"\n          [explodeSlices]=\"explodeSlices\"\n          [gradient]=\"gradient\"\n          [animations]=\"animations\"\n          [tooltipDisabled]=\"tooltipDisabled\"\n          [tooltipTemplate]=\"tooltipTemplate\"\n          [tooltipText]=\"tooltipText\"\n          (dblclick)=\"dblclick.emit($event)\"\n          (select)=\"onClick($event)\"\n          (activate)=\"onActivate($event)\"\n          (deactivate)=\"onDeactivate($event)\"\n        />\n      </svg:g>\n    </ngx-charts-chart>\n  `,\n  styleUrls: ['./pie-chart.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PieChartComponent extends BaseChartComponent {\n  /**\n   * Array of Chart data objects needed for the chart to be rendered.\n   */\n  @Input() series: ChartDataItemExtended[] = [];\n  /**\n   * Flag to show/hide the chart labels.\n   */\n  @Input() labels = false;\n  /**\n   * Flag to show/hide the chart legend.\n   */\n  @Input() legend = false;\n  /**\n   * Title for the chart legend.\n   */\n  @Input() legendTitle = 'Legend';\n  /**\n   * Make the radius of each slice proportional to it's value.\n   */\n  @Input() explodeSlices = false;\n  /**\n   * Sets the type of the chart.\n   */\n  @Input() doughnut = false;\n  /**\n   * The width of the charts arc.\n   */\n  @Input() arcWidth = 0.25;\n  /**\n   * If enabled adds gradient to the chart.\n   */\n  @Input() gradient: boolean | undefined;\n  /**\n   * Preselects an active slice of the chart.\n   */\n  @Input() activeEntries: ChartDataItemExtended[] = [];\n  /**\n   * Disable/enable the tooltip.\n   */\n  @Input() tooltipDisabled = false;\n  /**\n   * Pass custom formating if needed for the chart labels.\n   */\n  @Input() labelFormatting: any;\n  /**\n   * The template for the label.\n   */\n  @Input() labelTemplate: TemplateRef<any> | undefined;\n  /**\n   * Sets the threshold in which the label of each section is visible.\n   */\n  @Input() labelThreshold = 0;\n  /**\n   * Enable/disable label trimming.\n   */\n  @Input() trimLabels = true;\n  /**\n   * Set the max length of the label characters.\n   */\n  @Input() maxLabelLength = 10;\n  /**\n   * Text for the tooltip.\n   */\n  @Input() tooltipText: string | undefined;\n\n  /**\n   * EventEmitter for triggering a dblclick event.\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() dblclick = new EventEmitter();\n  /**\n   * EventEmitter for triggering a select event.\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() select = new EventEmitter<{}>();\n  /**\n   * EventEmitter for triggering a activate event.\n   */\n  @Output() activate = new EventEmitter();\n  /**\n   * EventEmitter for triggering a deactivate event.\n   */\n  @Output() deactivate = new EventEmitter();\n\n  @ContentChild('tooltipTemplate', { static: true }) tooltipTemplate: TemplateRef<any> | undefined;\n\n  translation: string | undefined;\n  outerRadius: number | undefined;\n  innerRadius: number | undefined;\n  data: ChartDataItemExtended[] | undefined;\n  colors: ColorHelper | undefined;\n  domain: string[] = [];\n  dims: ViewDimensions | undefined;\n  margins = [50, 50, 50, 50];\n  legendOptions: LegendOptions | undefined;\n\n  constructor(\n    protected chartElement: ElementRef,\n    protected zone: NgZone,\n    protected cd: ChangeDetectorRef,\n    @Inject(PLATFORM_ID) platformId: string,\n  ) {\n    super(chartElement, zone, cd, platformId);\n  }\n\n  get chartEl() {\n    return this.chartElement;\n  }\n\n  update(): void {\n    super.update();\n\n    this.dims = calculateViewDimensions({\n      width: this.width,\n      height: this.height,\n      margins: this.margins,\n      showLegend: this.legend,\n    });\n\n    const xOffset = this.margins[3] + this.dims.width / 2;\n    const yOffset = this.margins[0] + this.dims.height / 2;\n    this.translation = `translate(${xOffset}, ${yOffset})`;\n    this.outerRadius = Math.min(this.dims.width, this.dims.height) / 2;\n    this.innerRadius = 0;\n    if (this.doughnut) {\n      this.innerRadius = this.outerRadius * (1 - this.arcWidth);\n    }\n\n    this.domain = this.getDomain();\n\n    // sort data according to domain\n    this.series.sort((a: ChartDataItemExtended, b: ChartDataItemExtended) => {\n      return this.domain.indexOf(<string>a.name) - this.domain.indexOf(<string>b.name);\n    });\n    this.data = this.series;\n\n    this.setColors();\n    this.legendOptions = this.getLegendOptions();\n  }\n\n  getDomain(): string[] {\n    const items: string[] = [];\n\n    this.results.map((d: ChartDataItem) => {\n      let label = d.name;\n      if (label.constructor.name === 'Date') {\n        label = (<Date>label).toLocaleDateString();\n      } else {\n        label = label.toLocaleString();\n      }\n\n      if (items.indexOf(label) === -1) {\n        items.push(label);\n      }\n    });\n\n    return items;\n  }\n\n  onClick(data: ChartDataItemExtended): void {\n    this.select.emit(data);\n  }\n\n  setColors(): void {\n    this.colors = new ColorHelper(this.scheme, ScaleType.Ordinal, this.domain, this.customColors);\n  }\n\n  getLegendOptions() {\n    return {\n      scaleType: ScaleType.Ordinal,\n      domain: this.domain,\n      colors: this.colors,\n      title: this.legendTitle,\n    };\n  }\n\n  onActivate(item: ChartDataItemExtended) {\n    const idx = this.activeEntries.findIndex((d) => {\n      return d.name === item.name && d.value === item.value;\n    });\n    if (idx > -1) {\n      return;\n    }\n\n    this.activeEntries = [item, ...this.activeEntries];\n    this.activate.emit({ value: item, entries: this.activeEntries });\n  }\n\n  onDeactivate(item: ChartDataItemExtended) {\n    const idx = this.activeEntries.findIndex((d) => {\n      return d.name === item.name && d.value === item.value;\n    });\n\n    this.activeEntries.splice(idx, 1);\n    this.activeEntries = [...this.activeEntries]; // NOSONAR false positive - https://github.com/SonarSource/SonarTS/issues/760\n\n    this.deactivate.emit({ value: item, entries: this.activeEntries });\n  }\n}\n","import { ChangeDetectionStrategy, Component, HostBinding, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { CssVariablesService } from '@backbase/ui-ang/css-variables-lib';\nimport { ColorHelper } from '@swimlane/ngx-charts';\nimport { ArrowClasses, CARET_SIZE_CSS_VAR } from './constants';\nimport { ChartDataItem, ChartDataItemExtended } from './model/types';\n\n@Component({\n  selector: 'bb-donut-chart-ui',\n  templateUrl: './donut-chart.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DonutChartComponent implements OnInit {\n  /**\n   * Array of chart data objects used to render the sections of the donut chart.\n   */\n  @Input() data: ChartDataItemExtended[] | undefined;\n  /**\n   * Custom color palette for the chart.\n   */\n  @Input() colors: ColorHelper | undefined;\n  /**\n   * Sets the threshold in which the label of each section is visible.\n   */\n  @Input() relevancePercentage = 0;\n  /**\n   * The template for the tooltip.\n   */\n  @Input() tooltipTmpl: TemplateRef<any> | undefined;\n  /**\n   * The template for the label.\n   */\n  @Input() labelTmpl: TemplateRef<any> | undefined;\n  @ViewChild('defaultTooltipTemplate', { static: true }) defaultTooltipTemplate: TemplateRef<any> | undefined;\n  @HostBinding('class') classes = 'absolute-center w-100 h-100';\n\n  constructor(private readonly cssVariableService: CssVariablesService) {}\n\n  private arrowSize: number | undefined;\n\n  get template(): TemplateRef<any> | undefined {\n    return this.tooltipTmpl || this.defaultTooltipTemplate;\n  }\n\n  expandModel(model: ChartDataItem): ChartDataItemExtended {\n    if (!this.data) {\n      return model;\n    }\n\n    const data: ChartDataItemExtended = this.data.find((item) => item.name === model.name) || model;\n    return Object.assign(data, {\n      arrowClass: data.totalPortion - data.portion / 2 >= 50 ? ArrowClasses.RIGHT : ArrowClasses.LEFT,\n      arrowSize: this.arrowSize,\n    });\n  }\n\n  ngOnInit() {\n    this.cssVariableService\n      .getCssVariable(CARET_SIZE_CSS_VAR)\n      .then((value) => (this.arrowSize = parseInt(value || '', 10) || 0));\n  }\n}\n","<bb-charts-pie-chart\n  [results]=\"data\"\n  [series]=\"data\"\n  [customColors]=\"colors\"\n  [doughnut]=\"true\"\n  [arcWidth]=\"0.4\"\n  [labels]=\"true\"\n  [labelThreshold]=\"relevancePercentage\"\n  [labelTemplate]=\"labelTmpl\"\n>\n  <ng-template #tooltipTemplate let-model=\"model\">\n    <ng-container *ngTemplateOutlet=\"template; context: expandModel(model)\"></ng-container>\n  </ng-template>\n</bb-charts-pie-chart>\n\n<ng-template\n  #defaultTooltipTemplate\n  let-name=\"name\"\n  let-totalAmount=\"totalAmount\"\n>\n  <h3 class=\"chart-tooltip-analysis-category\">\n    {{ name }}\n  </h3>\n  <h4 class=\"chart-tooltip-analysis-amount\">\n    <bb-amount-ui\n      [amount]=\"totalAmount.amount\"\n      [currency]=\"totalAmount.currencyCode\"\n    ></bb-amount-ui>\n  </h4>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { InjectionService } from '../../services/injection.service';\nimport { TooltipContentComponent } from './tooltip.component';\nimport { TooltipDirective } from './tooltip.directive';\nimport { TooltipService } from './tooltip.service';\n\n@NgModule({\n  declarations: [TooltipContentComponent, TooltipDirective],\n  providers: [InjectionService, TooltipService],\n  exports: [TooltipContentComponent, TooltipDirective],\n  imports: [CommonModule],\n  entryComponents: [TooltipContentComponent],\n})\nexport class TooltipModule {}\n","import { CommonModule, CurrencyPipe } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgxChartsModule } from '@swimlane/ngx-charts';\nimport { TooltipModule } from '../tooltip/tooltip.module';\nimport { PieChartComponent } from './pie-chart.component';\nimport { PieLabelComponent } from './pie-label.component';\nimport { PieSeriesComponent } from './pie-series.component';\n\n@NgModule({\n  imports: [CommonModule, NgxChartsModule, TooltipModule],\n  declarations: [PieChartComponent, PieSeriesComponent, PieLabelComponent],\n  exports: [PieChartComponent, NgxChartsModule],\n  providers: [CurrencyPipe],\n  entryComponents: [PieChartComponent],\n})\nexport class PieChartModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { AmountModule } from '@backbase/ui-ang/amount';\nimport { CssVariablesService } from '@backbase/ui-ang/css-variables-lib';\nimport { DonutChartComponent } from './donut-chart.component';\nimport { PieChartModule } from './ngx/pie/pie-chart.module';\n\nexport { Arc, ChartColorItem } from './model/types';\n\n@NgModule({\n  imports: [CommonModule, AmountModule, PieChartModule],\n  declarations: [DonutChartComponent],\n  exports: [DonutChartComponent, PieChartModule, AmountModule],\n  providers: [CssVariablesService],\n})\nexport class DonutChartModule {}\n","import { Period } from '@backbase/ui-ang/period-selector';\n\nexport interface Properties {\n  name: string;\n  value: string;\n}\n\nexport enum AnalysisTypes {\n  INCOME = 'CRDT',\n  SPENDING = 'DBIT',\n}\n\nexport const PROPERTIES = {\n  analysisType: {\n    name: 'analysisIndicator',\n    value: AnalysisTypes.SPENDING,\n  },\n};\n\nexport enum Interval {\n  DAY = 'DAY',\n  WEEK = 'WEEK',\n  MONTH = 'MONTH',\n  YEAR = 'YEAR',\n}\nexport const DEFAULT_INTERVAL = Interval.MONTH;\n\nexport const RELEVANCE_PERCENTAGE = 2;\nexport const CATEGORY_COLORS_CSS_VAR = '--chart-categories-colors';\nexport const BAR_COLORS_CSS_VAR = '--chart-group-bar-color';\nexport enum TrendTextClasses {\n  POSITIVE = 'text-danger',\n  NEGATIVE = 'text-success',\n}\nexport enum TrendArrowClasses {\n  POSITIVE = 'arrow-upward',\n  NEGATIVE = 'arrow-downward',\n}\n\nexport interface IncomeSpendingPeriod {\n  interval: string;\n  duration: number;\n  default?: boolean;\n}\n\nexport interface MonthSelectorData {\n  period: Period;\n  tabIndex: number;\n}\n\nexport const PERIODS: IncomeSpendingPeriod[] = [\n  {\n    interval: 'MONTH',\n    duration: 1,\n    default: true,\n  },\n  {\n    interval: 'MONTH',\n    duration: 6,\n  },\n  {\n    interval: 'MONTH',\n    duration: 12,\n  },\n];\n\nexport const DB_DATE_FORMAT = 'yyyy-MM-dd';\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { MonthSelectorData, PERIODS } from '../constants';\n\n@Component({\n  selector: 'bb-month-selector-ui',\n  templateUrl: './month-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MonthSelectorComponent {\n  hostRef = this;\n  /**\n   * Event emitter for selecting a tab.\n   */\n  // eslint-disable-next-line @angular-eslint/no-output-native\n  @Output() change = new EventEmitter<MonthSelectorData>();\n  /**\n   * Default selected tab\n   */\n  @Input() selectedTab: number = PERIODS[Math.max(PERIODS.map((item) => item.default).indexOf(true), 0)].duration;\n\n  /**\n   * Change selected tab and triggers the change event after\n   * creating start, end dates based on selected tab\n   */\n  onPeriodRangeChange(num: number) {\n    this.selectedTab = num;\n    // (monthsRange - 1) to get data starting from this month and 5 months before it,\n    // which will end up to 6 months in total (the same of 12 months)\n    const startDate = new Date();\n    startDate.setMonth(startDate.getMonth() - (num - 1), 1);\n\n    this.change.emit({\n      tabIndex: num,\n      period: {\n        start: startDate,\n        end: new Date(),\n      },\n    });\n  }\n}\n","<div class=\"bb-block bb-block--lg bb-income-spending-analysis-periods bb-button-bar\">\n  <div class=\"btn-group btn-group-toggle\">\n      <button\n        data-role=\"1-month-btn\"\n        class=\"btn btn-secondary\"\n        [ngClass]=\"{active: selectedTab === 1}\"\n        value=\"1\"\n        (click)=\"onPeriodRangeChange(1)\"\n      >\n        <span\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.one\"\n        >1</span>\n        <span\n          class=\"d-none d-md-inline\"\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.one.largescreen\"\n        >&nbsp;month</span>\n        <span\n          class=\"d-md-none\"\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.one.mobilescreen\"\n        >m</span>\n      </button>\n      <button\n        data-role=\"6-month-btn\"\n        class=\"btn btn-secondary\"\n        [ngClass]=\"{active: selectedTab === 6}\"\n        value=\"6\"\n        (click)=\"onPeriodRangeChange(6)\"\n      >\n        <span\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.six\"\n        >6</span>\n        <span\n          class=\"d-none d-md-inline\"\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.six.largescreen\"\n        >&nbsp;months</span>\n        <span\n          class=\"d-md-none\"\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.six.mobilescreen\"\n        >m</span>\n      </button>\n      <button\n        data-role=\"12-month-btn\"\n        class=\"btn btn-secondary\"\n        [ngClass]=\"{active: selectedTab === 12}\"\n        value=\"12\"\n        (click)=\"onPeriodRangeChange(12)\"\n      >\n        <span\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.twelve\"\n        >12</span>\n        <span\n          class=\"d-none d-md-inline\"\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.twelve.largescreen\"\n        >&nbsp;months</span>\n        <span\n          class=\"d-md-none\"\n          i18n=\"Data period|One month label@@incomeSpendingAnalysis.label.duration.month.twelve.mobilescreen\"\n        >m</span>\n      </button>\n    </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport {\n  CategoryTotalsHttpService,\n  CategoryPeriodTotalsHttpService,\n  CategoryPeriodTotalsGetResponseBody,\n} from '@backbase/data-ang/transactions';\n\nimport { CategoryTotalsGetParams, CategoryTotalsGet, CategoryPeriodTotalsGetParams } from './model/analysis';\n\n@Injectable()\nexport class IncomeSpendingAnalysisWidgetService {\n  constructor(\n    private readonly categoryTotalsHttpService: CategoryTotalsHttpService,\n    private readonly categoryPeriodTotalsHttpService: CategoryPeriodTotalsHttpService,\n  ) {}\n\n  loadAnalysisData(params: CategoryTotalsGetParams): Observable<CategoryTotalsGet> {\n    return this.categoryTotalsHttpService.getCategorytotals(params);\n  }\n\n  loadAnalysisPeriodData(params: CategoryPeriodTotalsGetParams): Observable<CategoryPeriodTotalsGetResponseBody> {\n    return this.categoryPeriodTotalsHttpService.getCategoryPeriodTotals(params);\n  }\n}\n","import { DatePipe, getCurrencySymbol } from '@angular/common';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport {\n  AfterViewChecked,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Directive,\n  ElementRef,\n  Inject,\n  Input,\n  LOCALE_ID,\n  Optional,\n  ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { BbTemplate, ItemModel } from '@backbase/foundation-ang/core';\nimport { Property } from '@backbase/foundation-ang/web-sdk';\nimport { CssVariablesService } from '@backbase/ui-ang/css-variables-lib';\nimport { Period, PeriodFormatters } from '@backbase/ui-ang/period-selector';\nimport { BehaviorSubject, combineLatest, from, Observable, of, zip } from 'rxjs';\nimport { catchError, filter, map, mergeMap, pluck, share, shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { Arc, ChartColorItem } from './bb-donut-chart-ui/donut-chart.module';\nimport {\n  AnalysisTypes,\n  BAR_COLORS_CSS_VAR,\n  CATEGORY_COLORS_CSS_VAR,\n  DB_DATE_FORMAT,\n  DEFAULT_INTERVAL,\n  MonthSelectorData,\n  PERIODS,\n  PROPERTIES,\n  Properties,\n  RELEVANCE_PERCENTAGE,\n  TrendArrowClasses,\n  TrendTextClasses,\n} from './constants';\nimport { IncomeSpendingAnalysisWidgetService } from './income-spending-analysis.service';\nimport {\n  AnalysisType,\n  BarChartDataItem,\n  BarChartOptions,\n  CategoryIdentity,\n  CategoryPeriodTotalsGet,\n  CategoryTotalsDateParams,\n  CategoryTotalsGetParams,\n  CategoryTotalsPeriod,\n  CategoryTotalsPeriodSeries,\n  CategoryTotalsSeries,\n  ChartDataItem,\n} from './model/analysis';\n\nconst filterInputParameters = <T>(input: Observable<T | undefined>, prop: Observable<T>): Observable<T> =>\n  combineLatest([input, prop]).pipe(map(([inputVal, propVal]) => (inputVal !== undefined ? inputVal : propVal)));\n\n@Component({\n  selector: 'bb-income-spending-analysis-widget',\n  templateUrl: './income-spending-analysis.component.html',\n  providers: [DatePipe],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IncomeSpendingAnalysisWidgetComponent implements AfterViewChecked {\n  @Input('analysisType') set analysisTypeValue(value: AnalysisType) {\n    this.analysisTypeSubject.next(value);\n  }\n\n  @ViewChild('bbChartLabelIcon') chartIcon: ElementRef | undefined;\n  @ViewChild('bbChartLabelText') chartLabel: ElementRef | undefined;\n  @ViewChild('transNow', { static: true }) translationNow: ElementRef | undefined;\n  constructor(\n    private readonly service: IncomeSpendingAnalysisWidgetService,\n    private readonly cssVariableService: CssVariablesService,\n    @Optional() private readonly model: ItemModel,\n    private readonly route: ActivatedRoute,\n    private readonly datePipe: DatePipe,\n    private readonly cd: ChangeDetectorRef,\n    @Inject(LOCALE_ID) private readonly locale: string,\n  ) {\n    this.formatPeriodData = this.formatPeriodData.bind(this);\n  }\n\n  hostRef = this;\n  private readonly isIE = /(edge|msie|trident)/i.test(navigator.userAgent);\n  private readonly analysisTypeSubject = new BehaviorSubject<AnalysisType | undefined>(undefined);\n\n  private endDateValue = new Date();\n  private startDateValue = new Date(this.endDateValue.getFullYear(), this.endDateValue.getMonth(), 1);\n\n  private readonly initialDateParams: CategoryTotalsDateParams = {\n    periodStartDate: this.datePipe.transform(this.startDateValue, DB_DATE_FORMAT) || '',\n    periodEndDate: this.datePipe.transform(this.endDateValue, DB_DATE_FORMAT) || '',\n    intervalDuration: DEFAULT_INTERVAL,\n  };\n\n  private labelPositioned = false;\n  private iconHeight = 0;\n  private labelHeight = 0;\n  iconWidth = 0;\n  selectedTab: number = PERIODS[Math.max(PERIODS.map((item) => item.default).indexOf(true), 0)].duration;\n\n  // BarChart Options\n  readonly chartOptions: Observable<BarChartOptions> = from(\n    this.cssVariableService.getCssVariable(BAR_COLORS_CSS_VAR),\n  ).pipe(\n    map((cssVar) => {\n      return {\n        colors: cssVar ? [cssVar.slice(0, cssVar.indexOf(','))] : [''],\n        showXAxis: true,\n        showYAxis: true,\n        gradient: false,\n        showLegend: false,\n        showXAxisLabel: true,\n        showYAxisLabel: true,\n        roundEdges: false,\n      };\n    }),\n  );\n\n  isLoading = false;\n\n  readonly analysisType: Observable<AnalysisType> = filterInputParameters(\n    this.analysisTypeSubject.asObservable(),\n    this.getProperty(PROPERTIES.analysisType).pipe(map((val) => <AnalysisType>val)),\n  );\n\n  readonly arrangementIds: Observable<string[]> = this.getRouteParam(this.route, 'selectedAccount').pipe(\n    map((selectedAccount) => (selectedAccount ? [selectedAccount] : [])), // TODO: remove once arrangement ids are passed as an array\n  );\n\n  readonly dateParams: BehaviorSubject<CategoryTotalsDateParams> = new BehaviorSubject(this.initialDateParams);\n\n  readonly dataParams: Observable<CategoryTotalsGetParams> = combineLatest(\n    this.arrangementIds,\n    this.dateParams.asObservable(),\n    this.analysisType,\n  ).pipe(\n    map(([arrangementIds, dateParams, creditDebitIndicator]): CategoryTotalsGetParams => {\n      this.error = undefined;\n\n      return {\n        arrangementIds: arrangementIds || [],\n        ...dateParams,\n        creditDebitIndicator,\n      };\n    }),\n    shareReplay(1),\n  );\n\n  readonly analysisData: Observable<CategoryTotalsSeries> = this.dataParams.pipe(\n    filter((data) => !!data.arrangementIds.length),\n    switchMap((params) => this.service.loadAnalysisData(params)),\n    map((data): CategoryTotalsSeries => {\n      if (!data || !data.items) {\n        return data;\n      }\n      this.labelPositioned = false;\n      let totalPortion = 0;\n\n      return {\n        ...data,\n        series: data.items\n          .sort((a, b) => (parseFloat(b.totalAmount.amount) > parseFloat(a.totalAmount.amount) ? 1 : -1))\n          .map(\n            (item): ChartDataItem => ({\n              ...item,\n              name: item.category,\n              value: parseFloat(item.totalAmount.amount),\n              cssClass: this.transformCategoryToIconName(item.category),\n              totalPortion: (totalPortion += item.portion),\n            }),\n          ),\n      };\n    }),\n    catchError((err) => this.handleError(err)),\n    share(),\n  );\n\n  readonly analysisPeriodData: Observable<CategoryTotalsPeriodSeries> = zip(this.analysisData, this.dataParams).pipe(\n    mergeMap(([data, params]) => {\n      const categories = (data.items || []).map((item) => item.category);\n      const newParams = { ...params, categories: categories.length ? categories : [''] };\n\n      return this.service.loadAnalysisPeriodData(newParams).pipe(\n        map(this.formatPeriodData),\n        map((series: BarChartDataItem[]): CategoryTotalsPeriodSeries => ({ series, categoryData: data, items: [] })),\n      );\n    }),\n    tap(() => {\n      this.isLoading = false;\n      this.cd.markForCheck();\n    }),\n    catchError((err) => this.handleError(err)),\n  );\n\n  readonly colors: Observable<ChartColorItem[]> = combineLatest([\n    this.analysisData,\n    from(this.cssVariableService.getCssVariable(CATEGORY_COLORS_CSS_VAR)),\n  ]).pipe(\n    map(([data, cssVar]) => {\n      if (!cssVar || !data || !data.series || !data.series.length) {\n        return [];\n      }\n\n      const identities: { [key: string]: CategoryIdentity } = cssVar.split(',').reduce((accumulator, definition) => {\n        const [category, color, icon] = definition.trim().split(' ');\n        return {\n          ...accumulator,\n          [category]: {\n            color,\n            icon,\n          },\n        };\n      }, {});\n\n      return data.series.map(\n        (item): ChartColorItem => ({\n          name: item.name || '',\n          value: identities[item.cssClass]?.color || '',\n          icon: identities[item.cssClass]?.icon || '',\n        }),\n      );\n    }),\n  );\n\n  error: string | undefined;\n\n  private getRouteParam(route: ActivatedRoute, param: string): Observable<string | null> {\n    const paramValue = route.paramMap.pipe(pluck<ParamMap, string | null>('params', param));\n\n    if (!route.parent) {\n      return paramValue;\n    }\n\n    // ensure that level that has actual value keeps it from being cleared\n    return combineLatest(paramValue, this.getRouteParam(route.parent, param)).pipe(\n      map((params) => params[0] || params[1]),\n    );\n  }\n\n  private getProperty(property: Properties): Observable<Property> {\n    return this.model ? this.model.property(property.name, property.value) : of(property.value);\n  }\n\n  get startDate(): Date {\n    return this.startDateValue;\n  }\n\n  get endDate(): Date {\n    return this.endDateValue;\n  }\n\n  get formatters(): PeriodFormatters {\n    return {\n      end: (date) => {\n        const now = new Date();\n        if (\n          now.getFullYear() === date.getFullYear() &&\n          now.getMonth() === date.getMonth() &&\n          now.getDate() === date.getDate()\n        ) {\n          return (<ElementRef>this.translationNow).nativeElement.textContent;\n        }\n        return this.datePipe.transform(date, 'mediumDate') || '';\n      },\n    };\n  }\n\n  get isSpending(): Observable<boolean> {\n    return this.analysisType.pipe(map((property) => property === AnalysisTypes.SPENDING));\n  }\n\n  get relevance() {\n    return RELEVANCE_PERCENTAGE;\n  }\n\n  selectTab(num: number) {\n    this.selectedTab = PERIODS[Math.max(PERIODS.map((item) => item.duration).indexOf(num), 0)].duration;\n  }\n\n  private handleError(error: HttpErrorResponse) {\n    this.error = error.statusText;\n    return of({ items: [] });\n  }\n\n  private formatPeriodData(res: CategoryPeriodTotalsGet): BarChartDataItem[] {\n    if (!res || !res.periods || !res.total) {\n      return [];\n    }\n\n    return parseFloat(res.total.amount) !== 0\n      ? res.periods.map(\n          (period: CategoryTotalsPeriod): BarChartDataItem => ({\n            name: this.datePipe.transform(period.intervalStartDate, 'MMM') || '',\n            value: period.total ? parseFloat(period.total.amount) : 0,\n            currencyCode: period.total?.currencyCode,\n          }),\n        )\n      : [];\n  }\n\n  private transformCategoryToIconName(transactionCategory: string): string {\n    return `${transactionCategory.toLowerCase().replace(/\\W/g, '-').replace(/-{2,}/g, '-')}`;\n  }\n\n  private textX(data: Arc): number {\n    return data ? data.pos[0] : 0;\n  }\n\n  private textY(data: Arc): number {\n    return data ? data.pos[1] : 0;\n  }\n\n  getCategoryClass(cssClass: string): string {\n    return `bb-transaction-category-${cssClass}`;\n  }\n\n  getTextTransition(): string {\n    return this.isIE ? '' : 'transform 0.75s';\n  }\n\n  getTransformOffsetY(data: Arc): number {\n    const percetage = data.data.totalPortion - data.data.portion / 2;\n    return percetage > 25 && percetage < 75 ? this.iconHeight + this.labelHeight : -this.labelHeight;\n  }\n\n  getStyleTransform(data: Arc, offsetX: number, offsetY: number): string {\n    return this.isIE ? '' : `translate3d(${this.textX(data) + offsetX}px, ${this.textY(data) + offsetY}px, 0)`;\n  }\n\n  getAttrTransform(data: Arc, offsetX: number, offsetY: number): string {\n    return !this.isIE ? '' : `translate(${this.textX(data) + offsetX}, ${this.textY(data) + offsetY})`;\n  }\n\n  textClass(value: number, isSpending = true): string {\n    // positive trend has different meaning for income and for spending\n    const multiplier = isSpending ? 1 : -1;\n    return value * multiplier > 0 ? TrendTextClasses.POSITIVE : TrendTextClasses.NEGATIVE;\n  }\n\n  iconClass(value: number): string {\n    if (value < -1) {\n      return TrendArrowClasses.NEGATIVE;\n    } else if (value > 1) {\n      return TrendArrowClasses.POSITIVE;\n    }\n\n    return '';\n  }\n\n  abs(value: number) {\n    return Math.abs(value);\n  }\n\n  onPeriodRangeChange(monthSelectorData: MonthSelectorData) {\n    this.selectTab((<MonthSelectorData>monthSelectorData).tabIndex);\n    this.onPeriodChange((<MonthSelectorData>monthSelectorData).period);\n  }\n\n  onPeriodChange(period: Period) {\n    this.isLoading = true;\n    this.startDateValue = period.start;\n    this.endDateValue = period.end;\n\n    this.dateParams.next({\n      ...this.initialDateParams,\n      periodStartDate: this.datePipe.transform(period.start, DB_DATE_FORMAT) || '',\n      periodEndDate: this.datePipe.transform(period.end, DB_DATE_FORMAT) || '',\n    });\n  }\n\n  customYAxisTickFormatting(totalPeriodSeries: CategoryTotalsPeriodSeries) {\n    const currencyCode = totalPeriodSeries.categoryData?.total?.currencyCode;\n    const currencySymbol = currencyCode ? getCurrencySymbol(currencyCode, 'wide', this.locale) : currencyCode;\n\n    return (amount: string) => `${currencySymbol} ${amount}`;\n  }\n\n  ngAfterViewChecked() {\n    if (this.labelPositioned || !this.chartIcon || !this.chartLabel) {\n      return;\n    }\n\n    this.labelHeight = this.chartLabel.nativeElement.getBoundingClientRect().height / 2;\n    this.iconHeight = this.chartIcon.nativeElement.getBoundingClientRect().height;\n    this.iconWidth = (this.chartIcon.nativeElement.getBoundingClientRect().width - 2) / 2;\n\n    this.labelPositioned = true;\n    this.cd.detectChanges();\n  }\n}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisCustomizable]',\n})\nexport class IncomeSpendingAnalysisCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisPeriodSelectorCustomizable]',\n})\nexport class IncomeSpendingAnalysisPeriodSelectorCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisChartWrapperCustomizable]',\n})\nexport class IncomeSpendingAnalysisChartWrapperCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisCategoriesListCustomizable]',\n})\nexport class IncomeSpendingAnalysisCategoriesListCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  any | undefined\n> {}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisChartCustomizable]',\n})\nexport class IncomeSpendingAnalysisChartCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisBarChartWrapperCustomizable]',\n})\nexport class IncomeSpendingAnalysisBarChartWrapperCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  undefined\n> {}\n\n@Directive({\n  selector: '[bbIncomeSpendingAnalysisMonthSelectorCustomizable]',\n})\nexport class IncomeSpendingAnalysisMonthSelectorCustomizableDirective extends BbTemplate<\n  IncomeSpendingAnalysisWidgetComponent,\n  undefined\n> {}\n","<ng-container\n  bbIncomeSpendingAnalysisCustomizable\n  [bbHostRef]=\"hostRef\"\n  [bbTemplateContext]=\"{ isLoading: hostRef.isLoading, analysisData: hostRef.analysisData, analysisPeriodData: hostRef.analysisPeriodData, colors: hostRef.colors | async, isSpending: hostRef.isSpending | async, chartOptions: hostRef.chartOptions | async }\"\n></ng-container>\n\n<ng-template\n  bbIncomeSpendingAnalysisCustomizable\n  let-hostRef\n  let-analysisData=\"context.analysisData\"\n  let-analysisPeriodData=\"context.analysisPeriodData\"\n  let-colors=\"context.colors\"\n  let-isSpending=\"context.isSpending\"\n  let-chartOptions=\"context.chartOptions\"\n>\n  <ng-container *ngIf=\"!hostRef.error; else errorState\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <ng-container\n          bbIncomeSpendingAnalysisMonthSelectorCustomizable\n          [bbHostRef]=\"hostRef\"\n        ></ng-container>\n\n        <ng-container\n          *ngIf=\"hostRef.selectedTab === 1\"\n          bbIncomeSpendingAnalysisPeriodSelectorCustomizable\n          [bbHostRef]=\"hostRef\"\n        ></ng-container>\n        <ng-container *ngIf=\"(arrangementIds | async)?.length; else emptyState\">\n          <ng-container *ngIf=\"hostRef.selectedTab === 1\">\n            <ng-container *ngIf=\"analysisData | async as data ; else loadingState\">\n              <ng-container *ngIf=\"data?.items?.length; else emptyState\">\n                <ng-container\n                  bbIncomeSpendingAnalysisChartWrapperCustomizable\n                  [bbHostRef]=\"hostRef\"\n                  [bbTemplateContext]=\"{ data: data, colors: colors, isSpending: isSpending }\"\n                ></ng-container>\n              </ng-container>\n            </ng-container>\n          </ng-container>\n          <ng-container *ngIf=\"hostRef.selectedTab !== 1\">\n            <ng-container *ngIf=\"analysisPeriodData | async as data; else loadingState\">\n              <ng-container *ngIf=\"!hostRef.isLoading else loadingState\">\n                <ng-container *ngIf=\"data.series && data.series.length; else emptyState\">\n                  <ng-container\n                    bbIncomeSpendingAnalysisBarChartWrapperCustomizable\n                    [bbHostRef]=\"hostRef\"\n                    [bbTemplateContext]=\"{ data: data, chartOptions: chartOptions }\"\n                  ></ng-container>\n                </ng-container>\n\n                <ng-container *ngIf=\"data.categoryData?.items?.length else emptyState\">\n                  <ng-container\n                    bbIncomeSpendingAnalysisCategoriesListCustomizable\n                    [bbHostRef]=\"hostRef\"\n                    [bbTemplateContext]=\"{ data: data.categoryData, isSpending: isSpending }\"\n                  ></ng-container>\n                </ng-container>\n              </ng-container>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-template bbIncomeSpendingAnalysisMonthSelectorCustomizable let-hostRef>\n    <bb-month-selector-ui\n      [selectedTab]=\"hostRef.selectedTab\"\n      (change)=\"hostRef.onPeriodRangeChange($event)\"\n    ></bb-month-selector-ui>\n  </ng-template>\n\n  <ng-template bbIncomeSpendingAnalysisPeriodSelectorCustomizable let-hostRef>\n    <div class=\"bb-stack bb-stack--center bb-block bb-block--lg\">\n      <bb-period-selector-ui\n        [periodStart]=\"hostRef.startDate\"\n        [periodEnd]=\"hostRef.endDate\"\n        [periodFormatters]=\"hostRef.formatters\"\n        (periodChange)=\"hostRef.onPeriodChange($event)\"\n      ></bb-period-selector-ui>\n    </div>\n  </ng-template>\n \n  <ng-template\n    bbIncomeSpendingAnalysisChartWrapperCustomizable\n    let-hostRef\n    let-data=\"context.data\"\n    let-colors=\"context.colors\"\n    let-isSpending=\"context.isSpending\"\n  >\n    <div class=\"bb-stack bb-stack--center position-relative chart-donut chart-donut-large chart-donut-container-inflated\">\n      <div class=\"absolute-center\">\n        <div class=\"text-center text-muted font-weight-bold chart-donut-center-word\" data-role=\"donut-chart-label\">\n          <span\n            *ngIf=\"isSpending\"\n            i18n=\"Total spending|Label for total spending amount@@incomeSpendingAnalysis.label.total.spending\"\n          >\n            Total spending\n          </span>\n          <span\n            *ngIf=\"!isSpending\"\n            i18n=\"Total income|Label for total income amount@@incomeSpendingAnalysis.label.total.income\"\n          >\n            Total income\n          </span>\n        </div>\n        <div class=\"h6 text-center\">\n          <bb-amount-ui\n            [amount]=\"data.total.amount\"\n            [currency]=\"data.total.currencyCode\"\n          ></bb-amount-ui>\n        </div>\n      </div>\n      <ng-container\n        bbIncomeSpendingAnalysisChartCustomizable\n        [bbHostRef]=\"hostRef\"\n        [bbTemplateContext]=\"{ data: data, colors: colors, isSpending: isSpending }\"\n      ></ng-container>\n    </div>\n  </ng-template>\n\n  <ng-template\n    bbIncomeSpendingAnalysisChartCustomizable\n    let-hostRef\n    let-data=\"context.data\"\n    let-colors=\"context.colors\"\n  >\n    <bb-donut-chart-ui\n      [data]=\"data.series\"\n      [colors]=\"colors\"\n      [relevancePercentage]=\"hostRef.relevance\"\n      [tooltipTmpl]=\"donutChartTooltip\"\n      [labelTmpl]=\"donutChartLabel\"\n    ></bb-donut-chart-ui>\n  </ng-template>\n\n  <ng-template #errorState>\n    <bb-empty-state-ui\n      title=\"\"\n      [subtitle]=\"error\"\n      iconModifier=\"error\"\n      iconSize=\"xxl\"\n      iconColor=\"gray\"\n      iconClasses=\"text-muted\"\n    ></bb-empty-state-ui>\n  </ng-template>\n\n  <ng-template #loadingState>\n    <bb-loading-indicator-ui\n      i18n-text=\"Loading analysis data|Text to display while loading income/spending analysis data@@incomeSpendingAnalysis.state.loadingData\"\n      text=\"Loading analysis data...\">\n    </bb-loading-indicator-ui>\n  </ng-template>\n\n  <ng-template #emptyState>\n    <div class=\"bb-stack bb-stack--center\">\n      <bb-empty-state-ui\n      i18n-title=\"No data title|Title of a message that is shown when there is no data to display@@incomeSpendingAnalysis.state.noResults.title\"\n      title=\"No Data Found\"\n      i18n-subtitle=\"No data subtitle|Subtitle of a message that is shown when there is no data to display@@incomeSpendingAnalysis.state.noResults.subtitle\"\n      subtitle=\"You don't have any data to be displayed. Please try selecting a different period.\"\n      iconSize=\"xxl\"\n      iconModifier=\"donut-small\"\n      class=\"bb-text-align-center\"\n    ></bb-empty-state-ui>\n    </div>\n  </ng-template>\n\n  <ng-template bbIncomeSpendingAnalysisCategoriesListCustomizable let-hostRef let-data=\"context.data\" let-isSpending=\"context.isSpending\">\n    <div class=\"list-group-item rounded-0 border-left-0 border-right-0 border-top-0 list-item-transaction-accordion pt-3\" data-role=\"category-list-header\">\n      <div class=\"transaction-item row align-items-center\" role=\"row\">\n        <div class=\"col-6\">\n          <span *ngIf=\"isSpending\" class=\"h5\" i18n=\"Spending per category|Categories list spending label@@categories.list.spending.label\">\n            Spending per category\n          </span>\n          <span *ngIf=\"!isSpending\" class=\"h5\" i18n=\"Income per category|Categories list income label@@categories.list.income.label\">\n            Income per category\n          </span>\n        </div>\n        <div class=\"col-6\">\n          <div class=\"transaction-amount text-right h5 m-0\">\n            <span i18n=\"Total amount|Total amount label@@categories.list.total.label\">\n              Total amount\n            </span>\n            <bb-amount-ui [amount]=\"data.total.amount\" [currency]=\"data.total.currencyCode\"></bb-amount-ui>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"list-group-item rounded-0 border-left-0 border-right-0 list-item-transaction-accordion py-3\" *ngFor=\"let item of data?.items\" data-role=\"category-list-item\">\n      <div class=\"transaction-item row d-flex align-items-center\" role=\"row\">\n        <div class=\"transaction-category-icon col-6 d-flex align-items-center\">\n          <bb-icon-ui \n            size=\"sm\" \n            backgroundType=\"circle\" \n            name=\"category-{{ hostRef.transformCategoryToIconName(item.category) }}\"\n          ></bb-icon-ui>\n          <strong>\n            <span class=\"bb-transaction-category-name px-3\">{{item.category}}</span>\n          </strong>\n        </div>\n        <div class=\"col-6\">\n          <div class=\"transaction-amount text-right\">\n            <bb-amount-ui [amount]=\"item.totalAmount.amount\" [currency]=\"item.totalAmount.currencyCode\"></bb-amount-ui>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template bbIncomeSpendingAnalysisBarChartWrapperCustomizable let-chartOptions=\"context.chartOptions\" let-data=\"context.data\">\n    <div class=\"d-block chart-bar\">\n      <ngx-charts-bar-vertical\n        [scheme]=\"{domain: chartOptions.colors}\"\n        [results]=\"data.series\"\n        [gradient]=\"chartOptions.gradient\"\n        [xAxis]=\"chartOptions.showXAxis\"\n        [yAxis]=\"chartOptions.showYAxis\"\n        [legend]=\"chartOptions.showLegend\"\n        [showXAxisLabel]=\"chartOptions.showXAxisLabel\"\n        [showYAxisLabel]=\"chartOptions.showYAxisLabel\"\n        [yAxisTickFormatting]=\"customYAxisTickFormatting(data)\"\n        [showGridLines]=\"true\"\n        [roundEdges]=\"chartOptions.roundEdges\"\n      >\n        <ng-template #tooltipTemplate let-model=\"model\">\n          <div class=\"my-2\">\n            <span class=\"mr-2\">{{model.name}}</span>\n            <bb-amount-ui class=\"ml-2\" [amount]=\"model.value\" [currency]=\"data.categoryData.total.currencyCode\"></bb-amount-ui>\n          </div>\n        </ng-template>\n      </ngx-charts-bar-vertical>\n    </div>\n  </ng-template>\n\n  <ng-template\n    #donutChartLabel\n    let-data=\"data\"\n    let-color=\"color\"\n    let-label=\"label\"\n    let-icon=\"icon\"\n  >\n    <svg:g\n      [attr.transform]=\"hostRef.getAttrTransform(data, -hostRef.iconWidth, hostRef.getTransformOffsetY(data))\"\n      [style.transform]=\"hostRef.getStyleTransform(data, -hostRef.iconWidth, hostRef.getTransformOffsetY(data))\"\n      [style.fill]=\"color\"\n    >\n      <svg:text\n        #bbChartLabelIcon\n        class=\"bb-transaction-category bb-transaction-category-icon\"\n        [ngClass]=\"hostRef.getCategoryClass(data?.data?.cssClass)\"\n        data-role=\"donut-chart-segment-icon\"\n        aria-hidden=\"true\"\n      >\n        {{ icon }}\n      </svg:text>\n    </svg:g>\n    <svg:g\n      [attr.transform]=\"hostRef.getAttrTransform(data, 0, 0)\"\n      [style.transform]=\"hostRef.getStyleTransform(data, 0, 0)\"\n      [style.transition]=\"hostRef.getTextTransition()\"\n    >\n      <svg:text\n        #bbChartLabelText\n        class=\"font-weight-bold\"\n        [class.animation]=\"true\"\n        dy=\".35em\"\n        [style.fill]=\"color\"\n        [style.textAnchor]=\"'middle'\"\n        [style.shapeRendering]=\"'crispEdges'\"\n        data-role=\"donut-chart-segment-label\"\n        aria-hidden=\"true\"\n      >\n        {{ label }}\n      </svg:text>\n    </svg:g>\n    <span class=\"sr-only\" i18n=\"Chart section, interpolation category, interpolation amount|Label for chart displaying category, amount, and introduction@@incomeSpendingAnalysis.donutChart.label\">\n      Chart section, {{data?.data?.cssClass}}, {{label}}\n    </span>\n  </ng-template>\n\n  <ng-template\n    #donutChartTooltip\n    let-name=\"name\"\n    let-cssClass=\"cssClass\"\n    let-totalAmount=\"totalAmount\"\n    let-portion=\"portion\"\n    let-trend=\"trend\"\n    let-arrowClass=\"arrowClass\"\n  >\n    <div\n      bbDynamicId\n      #tooltipElement\n      class=\"row pb-3 position-relative chart-tooltip chart-tooltip-default text-left\"\n      [ngClass]=\"arrowClass\"\n      aria-live=\"polite\"\n    >\n      <span class=\"d-flex chart-tooltip-analysis-category text-muted\">\n        <span\n          *ngIf=\"hostRef.relevance >= portion\"\n          class=\"d-inline-block mr-1\"\n        >\n          <bb-icon-ui \n            size=\"md\"\n            backgroundType=\"circle\"\n            name=\"category-{{ hostRef.transformCategoryToIconName(cssClass) }}\"\n          ></bb-icon-ui>\n        </span>\n        {{ name }}\n      </span>\n      <div>\n        <div class=\"row\">\n          <strong>\n            <bb-amount-ui \n              class=\"h5 my-1 col-12 chart-tooltip-analysis-amount\" \n              [amount]=\"totalAmount.amount\"\n              [currency]=\"totalAmount.currencyCode\"\n            ></bb-amount-ui>\n          </strong>\n        </div>\n        <p \n          *ngIf=\"totalAmount.amount !== undefined\" \n          class=\"chart-tooltip-analysis-portion text-muted\"\n          i18n=\"Slice portion|Active slice portion of total amount@@donut-chart.tooltip.portion\"\n        >\n          {{ portion }}% of total\n        </p>\n        <ng-container *ngIf=\"trend !== undefined\">\n          <hr class=\"chart-tooltip-divider p-0\">\n          <p \n            class=\"chart-tooltip-analysis-trend\" \n            [ngClass]=\"hostRef.textClass(trend, isSpending)\"\n          >\n            <span class=\"d-flex align-items-center d-block mt-1\">\n              <bb-icon-ui \n                class=\"mr-1\" \n                [name]=\"hostRef.iconClass(trend)\"\n              ></bb-icon-ui>\n              <span class=\"h5 m-0 d-block\">\n                <ng-container *ngIf=\"hostRef.abs(trend) >= 1\">\n                  {{ hostRef.abs(trend) }}%\n                </ng-container>\n              </span>\n            </span>\n            <span class=\"chart-tooltip-info-text text-muted w-100\">\n              <ng-container \n                *ngIf=\"trend <= -1\"\n                i18n=\"Less than previous month|Text to describe that trend is negative@@donut-chart.tooltip.trend.less\"\n              >\n                less than previous month\n              </ng-container>\n              <ng-container \n                *ngIf=\"trend >= 1\"\n                i18n=\"More than previous month|Text to describe that trend is positive@@donut-chart.tooltip.trend.more\"\n              >\n                more than previous month\n              </ng-container>\n              <ng-container \n                *ngIf=\"trend > -1 && trend < 1\"\n                i18n=\"Same as previous month|Text to describe that trend is around zero@@donut-chart.tooltip.trend.same\"\n              >\n                Same as previous month\n              </ng-container>\n            </span>\n          </p>\n        </ng-container>\n      </div>\n    </div>\n  </ng-template>\n</ng-template>\n\n<span #transNow class=\"ng-cloak\" i18n=\"Now|Label for current day in period selector@@incomeSpendingAnalysis.period.now\">Now</span>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BackbaseCoreModule } from '@backbase/foundation-ang/core';\nimport { AmountModule } from '@backbase/ui-ang/amount';\nimport { EmptyStateModule } from '@backbase/ui-ang/empty-state';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { LoadingIndicatorModule } from '@backbase/ui-ang/loading-indicator';\nimport { PeriodSelectorModule } from '@backbase/ui-ang/period-selector';\nimport { DonutChartModule } from './bb-donut-chart-ui/donut-chart.module';\nimport { MonthSelectorComponent } from './bb-month-selector-ui/month-selector.component';\nimport {\n  IncomeSpendingAnalysisBarChartWrapperCustomizableDirective,\n  IncomeSpendingAnalysisCategoriesListCustomizableDirective,\n  IncomeSpendingAnalysisChartCustomizableDirective,\n  IncomeSpendingAnalysisChartWrapperCustomizableDirective,\n  IncomeSpendingAnalysisCustomizableDirective,\n  IncomeSpendingAnalysisMonthSelectorCustomizableDirective,\n  IncomeSpendingAnalysisPeriodSelectorCustomizableDirective,\n  IncomeSpendingAnalysisWidgetComponent,\n} from './income-spending-analysis.component';\nimport { IncomeSpendingAnalysisWidgetService } from './income-spending-analysis.service';\n\nconst components = [IncomeSpendingAnalysisWidgetComponent, MonthSelectorComponent];\n\nconst customizables = [\n  IncomeSpendingAnalysisCustomizableDirective,\n  IncomeSpendingAnalysisPeriodSelectorCustomizableDirective,\n  IncomeSpendingAnalysisMonthSelectorCustomizableDirective,\n  IncomeSpendingAnalysisChartWrapperCustomizableDirective,\n  IncomeSpendingAnalysisCategoriesListCustomizableDirective,\n  IncomeSpendingAnalysisChartCustomizableDirective,\n  IncomeSpendingAnalysisBarChartWrapperCustomizableDirective,\n];\nconst modules = [\n  AmountModule,\n  DonutChartModule,\n  EmptyStateModule,\n  IconModule,\n  LoadingIndicatorModule,\n  PeriodSelectorModule,\n];\n@NgModule({\n  imports: [\n    CommonModule,\n    BackbaseCoreModule.withConfig({\n      classMap: { IncomeSpendingAnalysisWidgetComponent },\n    }),\n    ...modules,\n  ],\n  declarations: [...components, ...customizables],\n  providers: [IncomeSpendingAnalysisWidgetService],\n  exports: [...components, ...customizables, ...modules],\n})\nexport class IncomeSpendingAnalysisWidgetModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}