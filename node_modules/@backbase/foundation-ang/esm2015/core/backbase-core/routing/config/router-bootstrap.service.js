import { Injectable } from '@angular/core';
import { Router } from '@angular/router';
import { skip, take, withLatestFrom, startWith } from 'rxjs/operators';
import { ӨItemNavigationService } from '../../communication/item-navigation.service';
import { isInsert, isPropertyUpdate, ӨRootContainerService, isRemovalUpdate, } from '../../models/root-container.service';
import { isContainer } from '../../models/item-model-utils';
import { RouterConfigService } from './router-config.service';
const noop = undefined;
export function createRouteConfigBootstrap(routerBootstrap) {
    return routerBootstrap.bootstrap.bind(routerBootstrap);
}
const notEmpty = (a) => a.length > 0;
const ɵ0 = notEmpty;
const itemToNavigate = (update) => {
    if (isInsert(update)) {
        // navigate to the first child of inserted item (if exists) or to the item itself
        return {
            name: update.item.name,
            nthChild: isContainer(update.item) && notEmpty(update.item.children) ? 0 : undefined,
        };
    }
    else if (isPropertyUpdate(update)) {
        // navigate to the updated item (@todo: if this item is currently active)
        return { name: update.name };
    }
    else if (isRemovalUpdate(update)) {
        // navigate to the nth child of the parent
        return { name: update.parentName, nthChild: update.index };
    }
    else {
        throw Error('not handled model update');
    }
};
const ɵ1 = itemToNavigate;
export class RouterBootstrapService {
    constructor(routerConfig, router, rootModel, itemNavigation) {
        this.routerConfig = routerConfig;
        this.router = router;
        this.rootModel = rootModel;
        this.itemNavigation = itemNavigation;
        this.bootstrapRoutes = this.routerConfig.routes.pipe(take(1));
        this.updateRoutes = this.routerConfig.routes.pipe(skip(1), withLatestFrom(this.rootModel.modelUpdates.pipe(startWith(noop))));
    }
    bootstrap() {
        const initialRoutes = this.router.config;
        this.bootstrapRoutes.subscribe(routes => {
            this.router.resetConfig([...routes, ...initialRoutes]);
            this.router.initialNavigation();
        });
        let lastUpdate;
        this.updateRoutes.subscribe(([routes, update]) => {
            this.router.resetConfig([...routes, ...initialRoutes]);
            if (update && lastUpdate !== update) {
                lastUpdate = update;
                this.navigateOnUpdates(update);
            }
            else {
                this.router.navigateByUrl(this.router.url, { skipLocationChange: true });
            }
        });
    }
    navigateOnUpdates(update) {
        const itemNavigation = itemToNavigate(update);
        const navigation = itemNavigation.nthChild !== undefined
            ? this.itemNavigation.navigateToChild(itemNavigation.name, itemNavigation.nthChild, {})
            : this.itemNavigation.navigateToItem(itemNavigation.name, {});
        navigation.then((result) => {
            if (!result) {
                // If the navigation failed, it might be because the item
                // was not within a routable item, so it can't be navigated to.
                // In this case, we trigger a navigation to '/' to trigger
                // and new redirects (this use-case is when a "deck-container" is
                // dropped onto the root of the page, we need to trigger the
                // redirect to the first route).
                // @todo: is there a better way to trigger redirects?
                // @todo: is there a better way to know that the navigation
                //   failure was because it was to a non-routable item? maybe
                //   it should throw instead of resolve false?
                this.router.navigateByUrl('/');
            }
        });
    }
}
RouterBootstrapService.decorators = [
    { type: Injectable }
];
RouterBootstrapService.ctorParameters = () => [
    { type: RouterConfigService },
    { type: Router },
    { type: ӨRootContainerService },
    { type: ӨItemNavigationService }
];
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLWJvb3RzdHJhcC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvY29yZS9zcmMvYmFja2Jhc2UtY29yZS9yb3V0aW5nL2NvbmZpZy9yb3V0ZXItYm9vdHN0cmFwLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsTUFBTSxFQUFVLE1BQU0saUJBQWlCLENBQUM7QUFFakQsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBQ3JGLE9BQU8sRUFDTCxRQUFRLEVBQ1IsZ0JBQWdCLEVBRWhCLHFCQUFxQixFQUNyQixlQUFlLEdBQ2hCLE1BQU0scUNBQXFDLENBQUM7QUFDN0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzVELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRTlELE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQztBQU12QixNQUFNLFVBQVUsMEJBQTBCLENBQUMsZUFBaUM7SUFDMUUsT0FBTyxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN6RCxDQUFDO0FBT0QsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFhLEVBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDOztBQUUxRCxNQUFNLGNBQWMsR0FBRyxDQUFDLE1BQW1CLEVBQWtCLEVBQUU7SUFDN0QsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUU7UUFDcEIsaUZBQWlGO1FBQ2pG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QyxlQUFlLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQztZQUN2RixDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsRSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBZSxFQUFFLEVBQUU7WUFDbEMsSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDWCx5REFBeUQ7Z0JBQ3pELCtEQUErRDtnQkFDL0QsMERBQTBEO2dCQUMxRCxpRUFBaUU7Z0JBQ2pFLDREQUE0RDtnQkFDNUQsZ0NBQWdDO2dCQUNoQyxxREFBcUQ7Z0JBQ3JELDJEQUEyRDtnQkFDM0QsNkRBQTZEO2dCQUM3RCw4Q0FBOEM7Z0JBQzlDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2hDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDOzs7WUF4REYsVUFBVTs7O1lBckNGLG1CQUFtQjtZQVpuQixNQUFNO1lBUWIscUJBQXFCO1lBTGQsc0JBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyLCBSb3V0ZXMgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc2tpcCwgdGFrZSwgd2l0aExhdGVzdEZyb20sIHN0YXJ0V2l0aCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7INOoSXRlbU5hdmlnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbXVuaWNhdGlvbi9pdGVtLW5hdmlnYXRpb24uc2VydmljZSc7XG5pbXBvcnQge1xuICBpc0luc2VydCxcbiAgaXNQcm9wZXJ0eVVwZGF0ZSxcbiAgTW9kZWxVcGRhdGUsXG4gINOoUm9vdENvbnRhaW5lclNlcnZpY2UsXG4gIGlzUmVtb3ZhbFVwZGF0ZSxcbn0gZnJvbSAnLi4vLi4vbW9kZWxzL3Jvb3QtY29udGFpbmVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgaXNDb250YWluZXIgfSBmcm9tICcuLi8uLi9tb2RlbHMvaXRlbS1tb2RlbC11dGlscyc7XG5pbXBvcnQgeyBSb3V0ZXJDb25maWdTZXJ2aWNlIH0gZnJvbSAnLi9yb3V0ZXItY29uZmlnLnNlcnZpY2UnO1xuXG5jb25zdCBub29wID0gdW5kZWZpbmVkO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJvb3RzdHJhcFNlcnZpY2Uge1xuICBib290c3RyYXA6IEZ1bmN0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUm91dGVDb25maWdCb290c3RyYXAocm91dGVyQm9vdHN0cmFwOiBCb290c3RyYXBTZXJ2aWNlKSB7XG4gIHJldHVybiByb3V0ZXJCb290c3RyYXAuYm9vdHN0cmFwLmJpbmQocm91dGVyQm9vdHN0cmFwKTtcbn1cblxuaW50ZXJmYWNlIEl0ZW1OYXZpZ2F0aW9uIHtcbiAgbmFtZTogc3RyaW5nO1xuICBudGhDaGlsZD86IG51bWJlcjtcbn1cblxuY29uc3Qgbm90RW1wdHkgPSAoYTogQXJyYXk8YW55Pik6IGJvb2xlYW4gPT4gYS5sZW5ndGggPiAwO1xuXG5jb25zdCBpdGVtVG9OYXZpZ2F0ZSA9ICh1cGRhdGU6IE1vZGVsVXBkYXRlKTogSXRlbU5hdmlnYXRpb24gPT4ge1xuICBpZiAoaXNJbnNlcnQodXBkYXRlKSkge1xuICAgIC8vIG5hdmlnYXRlIHRvIHRoZSBmaXJzdCBjaGlsZCBvZiBpbnNlcnRlZCBpdGVtIChpZiBleGlzdHMpIG9yIHRvIHRoZSBpdGVtIGl0c2VsZlxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB1cGRhdGUuaXRlbS5uYW1lLFxuICAgICAgbnRoQ2hpbGQ6IGlzQ29udGFpbmVyKHVwZGF0ZS5pdGVtKSAmJiBub3RFbXB0eSh1cGRhdGUuaXRlbS5jaGlsZHJlbikgPyAwIDogdW5kZWZpbmVkLFxuICAgIH07XG4gIH0gZWxzZSBpZiAoaXNQcm9wZXJ0eVVwZGF0ZSh1cGRhdGUpKSB7XG4gICAgLy8gbmF2aWdhdGUgdG8gdGhlIHVwZGF0ZWQgaXRlbSAoQHRvZG86IGlmIHRoaXMgaXRlbSBpcyBjdXJyZW50bHkgYWN0aXZlKVxuICAgIHJldHVybiB7IG5hbWU6IHVwZGF0ZS5uYW1lIH07XG4gIH0gZWxzZSBpZiAoaXNSZW1vdmFsVXBkYXRlKHVwZGF0ZSkpIHtcbiAgICAvLyBuYXZpZ2F0ZSB0byB0aGUgbnRoIGNoaWxkIG9mIHRoZSBwYXJlbnRcbiAgICByZXR1cm4geyBuYW1lOiB1cGRhdGUucGFyZW50TmFtZSwgbnRoQ2hpbGQ6IHVwZGF0ZS5pbmRleCB9O1xuICB9IGVsc2Uge1xuICAgIHRocm93IEVycm9yKCdub3QgaGFuZGxlZCBtb2RlbCB1cGRhdGUnKTtcbiAgfVxufTtcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFJvdXRlckJvb3RzdHJhcFNlcnZpY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IGJvb3RzdHJhcFJvdXRlczogT2JzZXJ2YWJsZTxSb3V0ZXM+ID0gdGhpcy5yb3V0ZXJDb25maWcucm91dGVzLnBpcGUodGFrZSgxKSk7XG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlUm91dGVzOiBPYnNlcnZhYmxlPFtSb3V0ZXMsIE1vZGVsVXBkYXRlIHwgdW5kZWZpbmVkXT4gPSB0aGlzLnJvdXRlckNvbmZpZy5yb3V0ZXMucGlwZShcbiAgICBza2lwKDEpLFxuICAgIHdpdGhMYXRlc3RGcm9tKHRoaXMucm9vdE1vZGVsLm1vZGVsVXBkYXRlcy5waXBlKHN0YXJ0V2l0aChub29wKSkpLFxuICApO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcm91dGVyQ29uZmlnOiBSb3V0ZXJDb25maWdTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSByb290TW9kZWw6INOoUm9vdENvbnRhaW5lclNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBpdGVtTmF2aWdhdGlvbjog06hJdGVtTmF2aWdhdGlvblNlcnZpY2UsXG4gICkge31cblxuICBib290c3RyYXAoKSB7XG4gICAgY29uc3QgaW5pdGlhbFJvdXRlczogUm91dGVzID0gdGhpcy5yb3V0ZXIuY29uZmlnO1xuXG4gICAgdGhpcy5ib290c3RyYXBSb3V0ZXMuc3Vic2NyaWJlKHJvdXRlcyA9PiB7XG4gICAgICB0aGlzLnJvdXRlci5yZXNldENvbmZpZyhbLi4ucm91dGVzLCAuLi5pbml0aWFsUm91dGVzXSk7XG4gICAgICB0aGlzLnJvdXRlci5pbml0aWFsTmF2aWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgbGV0IGxhc3RVcGRhdGU6IE1vZGVsVXBkYXRlIHwgdW5kZWZpbmVkO1xuICAgIHRoaXMudXBkYXRlUm91dGVzLnN1YnNjcmliZSgoW3JvdXRlcywgdXBkYXRlXSkgPT4ge1xuICAgICAgdGhpcy5yb3V0ZXIucmVzZXRDb25maWcoWy4uLnJvdXRlcywgLi4uaW5pdGlhbFJvdXRlc10pO1xuICAgICAgaWYgKHVwZGF0ZSAmJiBsYXN0VXBkYXRlICE9PSB1cGRhdGUpIHtcbiAgICAgICAgbGFzdFVwZGF0ZSA9IHVwZGF0ZTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZU9uVXBkYXRlcyh1cGRhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGVCeVVybCh0aGlzLnJvdXRlci51cmwsIHsgc2tpcExvY2F0aW9uQ2hhbmdlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBuYXZpZ2F0ZU9uVXBkYXRlcyh1cGRhdGU6IE1vZGVsVXBkYXRlKSB7XG4gICAgY29uc3QgaXRlbU5hdmlnYXRpb24gPSBpdGVtVG9OYXZpZ2F0ZSh1cGRhdGUpO1xuICAgIGNvbnN0IG5hdmlnYXRpb24gPVxuICAgICAgaXRlbU5hdmlnYXRpb24ubnRoQ2hpbGQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IHRoaXMuaXRlbU5hdmlnYXRpb24ubmF2aWdhdGVUb0NoaWxkKGl0ZW1OYXZpZ2F0aW9uLm5hbWUsIGl0ZW1OYXZpZ2F0aW9uLm50aENoaWxkLCB7fSlcbiAgICAgICAgOiB0aGlzLml0ZW1OYXZpZ2F0aW9uLm5hdmlnYXRlVG9JdGVtKGl0ZW1OYXZpZ2F0aW9uLm5hbWUsIHt9KTtcbiAgICBuYXZpZ2F0aW9uLnRoZW4oKHJlc3VsdDogYm9vbGVhbikgPT4ge1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIG5hdmlnYXRpb24gZmFpbGVkLCBpdCBtaWdodCBiZSBiZWNhdXNlIHRoZSBpdGVtXG4gICAgICAgIC8vIHdhcyBub3Qgd2l0aGluIGEgcm91dGFibGUgaXRlbSwgc28gaXQgY2FuJ3QgYmUgbmF2aWdhdGVkIHRvLlxuICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIHRyaWdnZXIgYSBuYXZpZ2F0aW9uIHRvICcvJyB0byB0cmlnZ2VyXG4gICAgICAgIC8vIGFuZCBuZXcgcmVkaXJlY3RzICh0aGlzIHVzZS1jYXNlIGlzIHdoZW4gYSBcImRlY2stY29udGFpbmVyXCIgaXNcbiAgICAgICAgLy8gZHJvcHBlZCBvbnRvIHRoZSByb290IG9mIHRoZSBwYWdlLCB3ZSBuZWVkIHRvIHRyaWdnZXIgdGhlXG4gICAgICAgIC8vIHJlZGlyZWN0IHRvIHRoZSBmaXJzdCByb3V0ZSkuXG4gICAgICAgIC8vIEB0b2RvOiBpcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gdHJpZ2dlciByZWRpcmVjdHM/XG4gICAgICAgIC8vIEB0b2RvOiBpcyB0aGVyZSBhIGJldHRlciB3YXkgdG8ga25vdyB0aGF0IHRoZSBuYXZpZ2F0aW9uXG4gICAgICAgIC8vICAgZmFpbHVyZSB3YXMgYmVjYXVzZSBpdCB3YXMgdG8gYSBub24tcm91dGFibGUgaXRlbT8gbWF5YmVcbiAgICAgICAgLy8gICBpdCBzaG91bGQgdGhyb3cgaW5zdGVhZCBvZiByZXNvbHZlIGZhbHNlP1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKCcvJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==