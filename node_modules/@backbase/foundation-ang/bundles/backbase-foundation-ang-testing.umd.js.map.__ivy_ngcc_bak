{"version":3,"file":"backbase-foundation-ang-testing.umd.js","sources":["../../../../projects/backbase/foundation-ang/testing/src/content-mock.ts","../../../../projects/backbase/foundation-ang/testing/src/backbase-foundation-ang-testing.ts"],"sourcesContent":["import {\n  ContentType,\n  StructuredContentType,\n  ContentUpdateUnsubscribe,\n  PortalContent,\n  ContentTypes,\n  ContentItem,\n  ImageItem,\n  DocumentItem,\n  StructuredContentItem,\n  ImageContentItem,\n} from '@backbase/lib-bb-page-bootstrap-cdn';\n\ninterface ContentMock {\n  [contentRef: string]: any;\n}\n\ninterface ContentItemMock {\n  [contentRef: string]: ContentItem<any>;\n}\n\n/**\n * PortalContentMock class which functions as a mock content store\n *\n * @usageNotes\n * ```typescript\n * // Store content in mock content store and get contentRef back\n * const contentRef = PortalContentMock.addImageContent({ url: '/image.png' });\n *\n * // use PortalContentMock to get content from the mock content store\n * const portalContent = new PortalContentMock();\n * portalContent.getContent(contentRef);\n * ```\n */\nexport class PortalContentMock implements PortalContent {\n  private static id = 0;\n\n  private static readonly contentMockMap: ContentMock = {};\n\n  private static readonly contentItemMockMap: ContentItemMock = {};\n\n  /**\n   * Add image item to mock content store\n   * @param content image item\n   * @return content ref\n   */\n  public static addImageContent(content: Partial<ImageItem>, contentRef?: string) {\n    return PortalContentMock.addContentItem(ContentTypes.IMAGE, content, undefined, contentRef);\n  }\n\n  /**\n   * Add document item to mock content store\n   * @param content document item\n   * @return content ref\n   */\n  public static addDocumentContent(content: Partial<DocumentItem>, contentRef?: string) {\n    return PortalContentMock.addContentItem(ContentTypes.DOCUMENT, content, undefined, contentRef);\n  }\n\n  /**\n   * Add structured content item to mock content store\n   * @param typeDefinitionName type definition name of the strucutred content item\n   * @param content structured content (JSON)\n   * @return content ref\n   */\n  public static addStructuredContent<T = { [key: string]: any }>(\n    typeDefinitionName: string,\n    content: T,\n    contentRef?: string,\n  ) {\n    return PortalContentMock.addContentItem(ContentTypes.STRUCTURED_CONTENT, content, typeDefinitionName, contentRef);\n  }\n\n  /**\n   * Add plain text content item to mock content store\n   * @param content plain text\n   * @return content ref\n   */\n  public static addPlainTextContent(content: string, contentRef?: string) {\n    return PortalContentMock.addStructuredContent(StructuredContentType.PLAIN_TEXT, { content }, contentRef);\n  }\n\n  /**\n   * Add rich text content item to mock content store\n   * @param content rich text (HTML)\n   * @return content ref\n   */\n  public static addRichTextContent(content: string, contentRef?: string) {\n    return PortalContentMock.addStructuredContent(StructuredContentType.RICH_TEXT, { content }, contentRef);\n  }\n\n  private static addContentItem(\n    type: ContentTypes,\n    content: any,\n    typeDefinitionName?: string,\n    contentRef = PortalContentMock.getContentRef(),\n  ) {\n    const contentItem: ContentItem<any> = {\n      type,\n      content,\n      properties: {},\n    };\n\n    if (typeDefinitionName) {\n      contentItem.typeDefinitionName = typeDefinitionName;\n    }\n\n    PortalContentMock.contentMockMap[contentRef] = content;\n    PortalContentMock.contentItemMockMap[contentRef] = contentItem;\n\n    return contentRef;\n  }\n\n  private static getContentRef() {\n    PortalContentMock.id += 1;\n\n    return `cs:mockRepository:${PortalContentMock.id}`;\n  }\n\n  public get(contentRef: string): Promise<ImageContentItem | StructuredContentItem> {\n    const contentItem = PortalContentMock.contentItemMockMap[contentRef];\n\n    if (!contentItem) {\n      // Return empty text so deprecated content widget logic doesn't break\n      return Promise.resolve({\n        id: contentRef,\n        type: ContentType.STRUCTURED_CONTENT,\n        content: '',\n      });\n    }\n\n    if (contentItem.type === ContentTypes.IMAGE) {\n      const content: ImageItem = contentItem.content;\n\n      const imageContentItem: ImageContentItem = {\n        id: contentRef,\n        type: ContentType.IMAGE,\n        contentRef: content.url,\n      };\n\n      return Promise.resolve(imageContentItem);\n    }\n\n    if (contentItem.type === ContentTypes.STRUCTURED_CONTENT) {\n      const content: { content: string } = contentItem.content;\n\n      const structuredContentItem: StructuredContentItem = {\n        id: contentRef,\n        type: ContentType.STRUCTURED_CONTENT,\n        content: content.content,\n      };\n\n      return Promise.resolve(structuredContentItem);\n    }\n\n    return Promise.reject(`Couldn't map a content item of type ${contentItem.type}`);\n  }\n\n  public getContent<T>(contentRef: string): Promise<T> {\n    return Promise.resolve(PortalContentMock.contentMockMap[contentRef]);\n  }\n\n  public getContentItem<T extends ContentItem<any>>(contentRef: string): Promise<T> {\n    return Promise.resolve(PortalContentMock.contentItemMockMap[contentRef] as T);\n  }\n\n  public subscribeContentUpdate(): ContentUpdateUnsubscribe {\n    return () => {};\n  }\n\n  public subscribeContentItemUpdate(): ContentUpdateUnsubscribe {\n    return () => {};\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["ContentTypes","StructuredContentType","ContentType"],"mappings":"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"}