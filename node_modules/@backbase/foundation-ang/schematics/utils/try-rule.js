"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.tryRule = void 0;
const schematics_1 = require("@angular-devkit/schematics");
const core_1 = require("@angular-devkit/core");
const operators_1 = require("rxjs/operators");
const tryRule = (rule, manualProcess) => (tree, context) => {
    const currentSchematic = context.schematic.description.name;
    const manualProcessFormatted = core_1.tags.indentBy(6) `${manualProcess}`.trim();
    const wrapErr = (error) => new schematics_1.SchematicsException(core_1.tags.stripIndent `
      An error occurred while automatically migrating the project. You will need to perform this stage of the migration manually.

      # Manual Process

      ${manualProcessFormatted}

      # Continue Migration

      Once this stage of the manual migration is complete, you can continue automatic migration by running

        ng update --migrate-only --from=${currentSchematic} @backbase/foundation-ang

      All of the manual steps can be found in the changelog at http://wa3.backbase.com/foundation/latest/changelogs/schematics

      ${error}
    `);
    return schematics_1.callRule(rule, tree, context).pipe(operators_1.catchError(err => {
        throw wrapErr(err);
    })); // The `Observable` object expected by `@angular-devkit` is from a different package version to the one installed in the project
};
exports.tryRule = tryRule;
//# sourceMappingURL=try-rule.js.map