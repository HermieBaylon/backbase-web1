{"version":3,"file":"backbase-ui-ang-product-selector.umd.js","sources":["../../../../libs/ui-ang/product-selector/product-selector.component.ts","../../../../libs/ui-ang/product-selector/product-selector.component.html","../../../../libs/ui-ang/product-selector/product-selector.module.ts","../../../../libs/ui-ang/product-selector/backbase-ui-ang-product-selector.ts"],"sourcesContent":["import { Component, ContentChildren, ElementRef, HostListener, Input, ViewChild } from '@angular/core';\nimport { DeprecationsService } from '@backbase/foundation-ang/core';\nimport { NgbDropdown } from '@ng-bootstrap/ng-bootstrap';\n\nexport interface ProductItem {\n  id: string;\n  name?: string;\n  currency?: string;\n  amount?: string;\n  productNumber?: string;\n  [key: string]: any;\n}\n\n/**\n * @name ProductSelectorComponent\n *\n * @description\n * A dropdown component that displays items in a pre-defined format.\n *\n * @a11y\n * Every items from list in custom templates need have\n * role=\"option\" attribute, for detection by Screen Reader like option.\n *\n * Every items from list in custom templates need have  #listItem,\n * for keyBoard accessibility(navigate with keyUp/keyDown)\n */\n@Component({\n  selector: 'bb-product-selector-ui',\n  templateUrl: './product-selector.component.html',\n})\nexport class ProductSelectorComponent {\n  constructor(private readonly deprecationsService: DeprecationsService) {}\n  /**\n   * Focused item index from product selector list\n   */\n  focusedItemIndex = -1;\n  /**\n   * State of focus on product selector element\n   */\n  focusState = '';\n  /**\n   * Open/close state of dropDown menu\n   */\n  isOpen = false;\n  /**\n   * Whether the dropdown should be closed when clicking one of dropdown items or pressing ESC\n   */\n  @Input() autoClose = true;\n\n  /**\n   * The relative position where the dropdown menu will be open\n   */\n  @Input() position = 'bottom';\n\n  /**\n   * Specifies which element the dropdown should be appended to.\n   */\n  @Input() container: '' | 'body' = '';\n  isIE = navigator.userAgent.indexOf('MSIE ') > -1 || navigator.userAgent.indexOf('Trident/') > -1;\n  @ViewChild('bbDropdown', { static: true }) bbDropdown: NgbDropdown | undefined;\n  @ViewChild('dropdownToggle') dropdownToggle!: ElementRef;\n  @ContentChildren('listItem') listItems!: Array<ElementRef>;\n\n  @HostListener('window:keydown', ['$event'])\n  onKeyEvent(event: KeyboardEvent) {\n    if (this.isOpen) {\n      switch (this.isIE ? event.keyCode : event.key) {\n        case 40:\n        case 'ArrowDown':\n          this.focusedItemIndex = Math.min(this.focusedItemIndex + 1, this.listItems.length - 1);\n          this.focusItem();\n          break;\n        case 38:\n        case 'ArrowUp':\n          this.focusedItemIndex = Math.max(this.focusedItemIndex - 1, 0);\n          this.focusItem();\n          break;\n        default:\n          return;\n      }\n      event.preventDefault();\n    }\n  }\n\n  close() {\n    if (this.bbDropdown && this.autoClose && this.bbDropdown.isOpen()) {\n      this.bbDropdown.close();\n    }\n  }\n\n  open() {\n    if (this.bbDropdown && !this.bbDropdown.isOpen()) {\n      this.bbDropdown.open();\n    }\n  }\n\n  onClose() {\n    if (this.autoClose) {\n      this.close();\n      this.dropdownToggle.nativeElement.focus();\n    }\n  }\n\n  focusItem() {\n    this.listItems.forEach((el, index) => {\n      if (index === this.focusedItemIndex) {\n        el.nativeElement.tabIndex = 0;\n        el.nativeElement.focus();\n      }\n    });\n  }\n\n  /**\n   * Event handler for change open/close state in dropdown menu\n   */\n  onOpenChange($event: boolean) {\n    this.isOpen = $event;\n    if (!this.isOpen) {\n      this.focusedItemIndex = -1;\n    }\n  }\n\n  /**\n   * Event handler for blur dropdown menu\n   */\n  onBlur() {\n    if (this.bbDropdown && this.bbDropdown.isOpen()) {\n      this.bbDropdown.close();\n    }\n  }\n}\n","<div class=\"bb-product-selector\">\n  <div\n    ngbDropdown\n    #bbDropdown=\"ngbDropdown\"\n    [autoClose]=\"autoClose\"\n    [container]=\"container\"\n    (blur)=\"onBlur()\"\n    (openChange)=\"onOpenChange($event)\"\n    [placement]=\"position\"\n    class=\"bb-product-selector__dropdown\"\n  >\n    <button\n      ngbDropdownToggle\n      #dropdownToggle\n      bbButton\n      color=\"unstyled\"\n      class=\"bb-product-selector__item\"\n      [attr.data-role]=\"'product-selector-expand-button'\"\n      type=\"button\"\n    >\n      <div class=\"bb-product-selector__item-content\" [attr.data-role]=\"'product-selector-selected-content'\">\n        <ng-content select=\"[bbDropdownToggle]\"></ng-content>\n      </div>\n      <bb-icon-ui cropped class=\"bb-product-selector__icon\" [name]=\"isOpen ? 'toggle-up' : 'toggle-down'\"></bb-icon-ui>\n    </button>\n    <div\n      ngbDropdownMenu\n      class=\"bb-product-selector__dropdown-menu-panel\"\n      role=\"menu\"\n      (click)=\"onClose()\"\n      [attr.data-role]=\"'product-selector-dropdown-menu'\"\n    >\n      <div class=\"bb-product-selector__dropdown-menu\">\n        <ng-content select=\"[bbDropdownMenu]\"></ng-content>\n      </div>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgbDropdownModule } from '@ng-bootstrap/ng-bootstrap';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { ProductSelectorComponent } from './product-selector.component';\nimport { ButtonModule } from '@backbase/ui-ang/button';\n\n@NgModule({\n  imports: [CommonModule, NgbDropdownModule, IconModule, ButtonModule],\n  declarations: [ProductSelectorComponent],\n  exports: [ProductSelectorComponent],\n})\nexport class ProductSelectorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1","i0","i2","i3","i4","Component","Input","ViewChild","ContentChildren","HostListener","CommonModule","NgbDropdownModule","IconModule","ButtonModule","NgModule"],"mappings":"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"}