{"version":3,"file":"backbase-ui-ang-period-selector.umd.js","sources":["../../../../libs/ui-ang/period-selector/period-selector.component.ts","../../../../libs/ui-ang/period-selector/period-selector.component.html","../../../../libs/ui-ang/period-selector/period-selector.module.ts","../../../../libs/ui-ang/period-selector/backbase-ui-ang-period-selector.ts"],"sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { DatePipe } from '@angular/common';\n\nexport type FormatFn = (date: Date) => string;\n// @TODO: should be extended with week, year, etc. once we get requirement for it\nexport type PeriodSize = 'month';\nexport interface Period {\n  start: Date;\n  end: Date;\n}\nexport interface PeriodFormatters {\n  title?: FormatFn;\n  start?: FormatFn;\n  end?: FormatFn;\n}\n\ninterface CombinedFormatters {\n  title: FormatFn;\n  start: FormatFn;\n  end: FormatFn;\n}\n\n/**\n * @name PeriodSelectorComponent\n *\n * @description\n * Component that selects a period.\n */\n@Component({\n  selector: 'bb-period-selector-ui',\n  templateUrl: './period-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PeriodSelectorComponent implements OnInit {\n  private combinedFormatters: CombinedFormatters = {\n    title: (date) => this.datePipe.transform(date, 'MMMM') || '',\n    start: (date) => this.datePipe.transform(date, 'mediumDate') || '',\n    end: (date) => this.datePipe.transform(date, 'mediumDate') || '',\n  };\n\n  /**\n   * Start date of the period.\n   */\n  @Input() periodStart: Date | undefined;\n  /**\n   * End date of the period.\n   */\n  @Input() periodEnd: Date | undefined;\n  /**\n   * Custom date period formatter.\n   */\n  @Input()\n  set periodFormatters(formatters: PeriodFormatters) {\n    this.combinedFormatters = Object.assign(this.combinedFormatters, formatters);\n  }\n  /**\n   * Period step\n   */\n  @Input() period: PeriodSize = 'month';\n\n  /**\n   * EventEmitter for triggering a periodChange event.\n   */\n  @Output() periodChange = new EventEmitter<Period>();\n\n  constructor(private readonly datePipe: DatePipe) {}\n\n  formattedTitle: string | undefined;\n  formattedStart: string | undefined;\n  formattedEnd: string | undefined;\n\n  get isLastPeriod(): boolean {\n    if (!this.periodStart) {\n      return true;\n    }\n\n    const now = new Date();\n\n    return now.getFullYear() === this.periodStart.getFullYear() && now.getMonth() === this.periodStart.getMonth();\n  }\n\n  ngOnInit() {\n    if (typeof this.periodStart === 'undefined' || typeof this.periodEnd === 'undefined') {\n      throw new Error('`periodStart`, and `periodEnd` inputs are required in `bb-period-selector-ui` component');\n    }\n\n    this.setFormattedValues();\n  }\n\n  private setFormattedValues() {\n    this.formattedTitle = this.combinedFormatters.title(this.periodStart as Date);\n    this.formattedStart = this.combinedFormatters.start(this.periodStart as Date);\n    this.formattedEnd = this.combinedFormatters.end(this.periodEnd as Date);\n  }\n\n  changePeriod(next: boolean) {\n    if (!this.periodStart || (next && this.isLastPeriod)) {\n      return;\n    }\n\n    this.periodStart.setMonth(this.periodStart.getMonth() + (next ? 1 : -1));\n    this.periodEnd = this.isLastPeriod\n      ? new Date(this.periodStart.getFullYear(), this.periodStart.getMonth(), new Date().getDate(), 23, 59, 59, 999)\n      : new Date(this.periodStart.getFullYear(), this.periodStart.getMonth() + 1, 0, 23, 59, 59, 999);\n\n    this.setFormattedValues();\n    this.periodChange.emit({\n      start: this.periodStart,\n      end: this.periodEnd,\n    });\n  }\n}\n","<div class=\"bb-period-selector\">\n  <div>\n    <button bbButton circle=\"“true”\" (click)=\"changePeriod(false)\" color=\"link-dark\" size=\"sm\">\n      <bb-icon-ui size=\"md\" name=\"chevron-left\"></bb-icon-ui>\n    </button>\n  </div>\n  <div class=\"bb-period-selector__date\">\n    <div class=\"bb-period-selector__month\">{{ formattedTitle }}</div>\n    <div class=\"bb-period-selector__period\">\n      <time>{{ formattedStart }}</time> - <time>{{ formattedEnd }}</time>\n    </div>\n  </div>\n  <div>\n    <button\n      bbButton\n      [circle]=\"true\"\n      (click)=\"changePeriod(true)\"\n      [ngClass]=\"{ disabled: isLastPeriod }\"\n      color=\"link-dark\"\n      size=\"sm\"\n    >\n      <bb-icon-ui size=\"md\" name=\"chevron-right\"></bb-icon-ui>\n    </button>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\n\nimport { PeriodSelectorComponent } from './period-selector.component';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { ButtonModule } from '@backbase/ui-ang/button';\n\n@NgModule({\n  imports: [CommonModule, IconModule, ButtonModule],\n  declarations: [PeriodSelectorComponent],\n  exports: [PeriodSelectorComponent],\n  providers: [DatePipe],\n})\nexport class PeriodSelectorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["EventEmitter","i1","i0","i2","i3","Component","ChangeDetectionStrategy","Input","Output","CommonModule","IconModule","ButtonModule","DatePipe","NgModule"],"mappings":"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"}