import { Injectable } from '@angular/core';
import { NotificationComponent } from './notification.component';
import { Subject } from 'rxjs';
import { first } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "./append-to-dom.service";
export class NotificationService {
    constructor(appendtoDomService) {
        this.appendtoDomService = appendtoDomService;
    }
    showNotification({ header, message, dismissible = true, ttl = 3000, modifier = 'info', headerContext = {}, messageContext = {}, primaryActionText, primaryAction, secondaryActionText, secondaryAction, closeAction, hostAction, primaryActionTemplate, secondaryActionTemplate, autofocus = true, }) {
        const res = this.appendtoDomService.appendComponentToRoot(NotificationComponent, autofocus);
        const componentInstance = res.componentInstance;
        componentInstance.message = message;
        componentInstance.modifier = modifier;
        componentInstance.dismissible = dismissible;
        componentInstance.header = header;
        componentInstance.primaryActionText = primaryActionText;
        componentInstance.primaryAction = primaryAction;
        componentInstance.secondaryActionText = secondaryActionText;
        componentInstance.secondaryAction = secondaryAction;
        componentInstance.closeAction = closeAction;
        componentInstance.hostAction = hostAction;
        componentInstance.headerContext = headerContext;
        componentInstance.messageContext = messageContext;
        componentInstance.primaryActionTemplate = primaryActionTemplate;
        componentInstance.secondaryActionTemplate = secondaryActionTemplate;
        return this.createHideNotificationFunction(res.unmountComponent, ttl, componentInstance.close);
    }
    createHideNotificationFunction(hideFn, ttl = 0, closeStream) {
        const hideSubject = new Subject();
        const hideNotification = () => {
            hideSubject.next();
        };
        const closeSubscription = closeStream.subscribe(hideNotification);
        const hideSubscription = hideSubject.pipe(first()).subscribe(() => {
            hideFn();
            hideSubscription.unsubscribe();
            closeSubscription.unsubscribe();
        });
        if (ttl > 0) {
            setTimeout(hideNotification, ttl);
        }
        return hideNotification;
    }
}
NotificationService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: NotificationService, deps: [{ token: i1.AppendToDomService }], target: i0.ɵɵFactoryTarget.Injectable });
NotificationService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: NotificationService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: NotificationService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return [{ type: i1.AppendToDomService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL3VpLWFuZy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUUscUJBQXFCLEVBQW9CLE1BQU0sMEJBQTBCLENBQUM7QUFFbkYsT0FBTyxFQUFFLE9BQU8sRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7OztBQTZFdkMsTUFBTSxPQUFPLG1CQUFtQjtJQUM5QixZQUE2QixrQkFBc0M7UUFBdEMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFvQjtJQUFHLENBQUM7SUFFdkUsZ0JBQWdCLENBQUMsRUFDZixNQUFNLEVBQ04sT0FBTyxFQUNQLFdBQVcsR0FBRyxJQUFJLEVBQ2xCLEdBQUcsR0FBRyxJQUFJLEVBQ1YsUUFBUSxHQUFHLE1BQU0sRUFDakIsYUFBYSxHQUFHLEVBQUUsRUFDbEIsY0FBYyxHQUFHLEVBQUUsRUFDbkIsaUJBQWlCLEVBQ2pCLGFBQWEsRUFDYixtQkFBbUIsRUFDbkIsZUFBZSxFQUNmLFdBQVcsRUFDWCxVQUFVLEVBQ1YscUJBQXFCLEVBQ3JCLHVCQUF1QixFQUN2QixTQUFTLEdBQUcsSUFBSSxHQUNIO1FBQ2IsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLHFCQUFxQixDQUFDLHFCQUFxQixFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRTVGLE1BQU0saUJBQWlCLEdBQUcsR0FBRyxDQUFDLGlCQUEwQyxDQUFDO1FBQ3pFLGlCQUFpQixDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDcEMsaUJBQWlCLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN0QyxpQkFBaUIsQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQzVDLGlCQUFpQixDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDbEMsaUJBQWlCLENBQUMsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUM7UUFDeEQsaUJBQWlCLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztRQUNoRCxpQkFBaUIsQ0FBQyxtQkFBbUIsR0FBRyxtQkFBbUIsQ0FBQztRQUM1RCxpQkFBaUIsQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO1FBQ3BELGlCQUFpQixDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDNUMsaUJBQWlCLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUMxQyxpQkFBaUIsQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ2hELGlCQUFpQixDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7UUFDbEQsaUJBQWlCLENBQUMscUJBQXFCLEdBQUcscUJBQXFCLENBQUM7UUFDaEUsaUJBQWlCLENBQUMsdUJBQXVCLEdBQUcsdUJBQXVCLENBQUM7UUFFcEUsT0FBTyxJQUFJLENBQUMsOEJBQThCLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNqRyxDQUFDO0lBRU8sOEJBQThCLENBQ3BDLE1BQWtCLEVBQ2xCLE1BQWMsQ0FBQyxFQUNmLFdBQTRCO1FBRTVCLE1BQU0sV0FBVyxHQUFHLElBQUksT0FBTyxFQUFPLENBQUM7UUFDdkMsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLEVBQUU7WUFDNUIsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQztRQUNGLE1BQU0saUJBQWlCLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBRWxFLE1BQU0sZ0JBQWdCLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDaEUsTUFBTSxFQUFFLENBQUM7WUFDVCxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUMvQixpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksR0FBRyxHQUFHLENBQUMsRUFBRTtZQUNYLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNuQztRQUVELE9BQU8sZ0JBQWdCLENBQUM7SUFDMUIsQ0FBQzs7aUhBaEVVLG1CQUFtQjtxSEFBbkIsbUJBQW1CLGNBRmxCLE1BQU07NEZBRVAsbUJBQW1CO2tCQUgvQixVQUFVO21CQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25Db21wb25lbnQsIE5vdGlmaWNhdGlvblR5cGUgfSBmcm9tICcuL25vdGlmaWNhdGlvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQXBwZW5kVG9Eb21TZXJ2aWNlIH0gZnJvbSAnLi9hcHBlbmQtdG8tZG9tLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3ViamVjdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlyc3QgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uIHtcbiAgLyoqXG4gICAqIFRoZSBoZWFkZXIgZm9yIHRoZSBub3RpZmljYXRpb24uXG4gICAqL1xuICBoZWFkZXI/OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxhbnk+O1xuICAvKipcbiAgICogVGhlIG1lc3NhZ2UgdGVtcGxhdGUgZm9yIHRoZSBub3RpZmljYXRpb24uIERlZmF1bHRzIHRvIGFuIGVtcHR5IHN0cmluZ1xuICAgKi9cbiAgbWVzc2FnZTogc3RyaW5nIHwgVGVtcGxhdGVSZWY8YW55PjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG1vZGlmaWVyIGZvciB0aGUgbm90aWZpY2F0aW9uLiBEZWZhdWx0cyB0byAnaW5mbydcbiAgICovXG4gIG1vZGlmaWVyPzogTm90aWZpY2F0aW9uVHlwZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIG5vdGlmaWNhdGlvbiBpcyBkaXNtaXNzaWJsZS4gRGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cbiAgZGlzbWlzc2libGU/OiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIHRpbWUgdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGFwcGVhciBmb3IgaW4gbXMuXG4gICAqIDAgd2lsbCByZXN1bHQgaW4gdGhlIG5vdGlmYWN0aW9uIHJlbWFpbmluZyBvcGVuLlxuICAgKi9cbiAgdHRsPzogbnVtYmVyO1xuICAvKipcbiAgICogVGhlIHRleHQgZm9yIHRoZSBwcmltYXJ5IGFjdGlvbiBidXR0b24uXG4gICAqIFdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdW5zZXQgYW5kIHByaW1hcnkgYWN0aW9uIHNldC5cbiAgICovXG4gIHByaW1hcnlBY3Rpb25UZXh0Pzogc3RyaW5nO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgdGhlIHByaW1hcnkgYWN0aW9uLlxuICAgKiBSZXF1aXJlZCB0byBzaG93IHRoZSBidXR0b24uXG4gICAqL1xuICBwcmltYXJ5QWN0aW9uPzogRnVuY3Rpb247XG4gIC8qKlxuICAgKiBUaGUgdGV4dCBmb3IgdGhlIHNlY29uZGFyeSBhY3Rpb24gYnV0dG9uLlxuICAgKiBXaWxsIHRocm93IGFuIGVycm9yIGlmIHVuc2V0IGFuZCBzZWNvbmRhcnkgYWN0aW9uIHNldC5cbiAgICovXG4gIHNlY29uZGFyeUFjdGlvblRleHQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgc2Vjb25kYXJ5IGFjdGlvbi5cbiAgICogUmVxdWlyZWQgdG8gc2hvdyB0aGUgYnV0dG9uLlxuICAgKi9cbiAgc2Vjb25kYXJ5QWN0aW9uPzogRnVuY3Rpb247XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgbWFudWFsbHkgY2xvc2UgYWN0aW9uLlxuICAgKi9cbiAgY2xvc2VBY3Rpb24/OiBGdW5jdGlvbjtcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIHRoZSBob3N0IGNsaWNrIGFjdGlvbi5cbiAgICovXG4gIGhvc3RBY3Rpb24/OiBGdW5jdGlvbjtcbiAgLyoqXG4gICAqIFRoZSBjb250ZXh0IGZvciBub3RpZmljYXRpb24gaGVhZGVyIHRlbXBsYXRlLlxuICAgKi9cbiAgaGVhZGVyQ29udGV4dD86IGFueTtcbiAgLyoqXG4gICAqIFRoZSBjb250ZXh0IGZvciBub3RpZmljYXRpb24gbWVzc2FnZSB0ZW1wbGF0ZS5cbiAgICovXG4gIG1lc3NhZ2VDb250ZXh0PzogYW55O1xuICAvKipcbiAgICogVGhlIHByaW1hcnkgYWN0aW9uIHRlbXBsYXRlIGZvciB0aGUgbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgcHJpbWFyeUFjdGlvblRlbXBsYXRlPzogVGVtcGxhdGVSZWY8YW55PjtcbiAgLyoqXG4gICAqIFRoZSBzZWNvbmRhcnkgYWN0aW9uIHRlbXBsYXRlIGZvciB0aGUgbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgc2Vjb25kYXJ5QWN0aW9uVGVtcGxhdGU/OiBUZW1wbGF0ZVJlZjxhbnk+O1xuICAvKipcbiAgICogQXV0b2ZvY3VzIHdpbGwgY2F1c2UgdGhlIGNvbXBvbmVudCB0byBiZSBmb2N1c2VkIG9uIHRoZSBmaXJzdCByZW5kZXJpbmcuXG4gICAqL1xuICBhdXRvZm9jdXM/OiBib29sZWFuO1xufVxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgYXBwZW5kdG9Eb21TZXJ2aWNlOiBBcHBlbmRUb0RvbVNlcnZpY2UpIHt9XG5cbiAgc2hvd05vdGlmaWNhdGlvbih7XG4gICAgaGVhZGVyLFxuICAgIG1lc3NhZ2UsXG4gICAgZGlzbWlzc2libGUgPSB0cnVlLFxuICAgIHR0bCA9IDMwMDAsXG4gICAgbW9kaWZpZXIgPSAnaW5mbycsXG4gICAgaGVhZGVyQ29udGV4dCA9IHt9LFxuICAgIG1lc3NhZ2VDb250ZXh0ID0ge30sXG4gICAgcHJpbWFyeUFjdGlvblRleHQsXG4gICAgcHJpbWFyeUFjdGlvbixcbiAgICBzZWNvbmRhcnlBY3Rpb25UZXh0LFxuICAgIHNlY29uZGFyeUFjdGlvbixcbiAgICBjbG9zZUFjdGlvbixcbiAgICBob3N0QWN0aW9uLFxuICAgIHByaW1hcnlBY3Rpb25UZW1wbGF0ZSxcbiAgICBzZWNvbmRhcnlBY3Rpb25UZW1wbGF0ZSxcbiAgICBhdXRvZm9jdXMgPSB0cnVlLFxuICB9OiBOb3RpZmljYXRpb24pOiAoKSA9PiB2b2lkIHtcbiAgICBjb25zdCByZXMgPSB0aGlzLmFwcGVuZHRvRG9tU2VydmljZS5hcHBlbmRDb21wb25lbnRUb1Jvb3QoTm90aWZpY2F0aW9uQ29tcG9uZW50LCBhdXRvZm9jdXMpO1xuXG4gICAgY29uc3QgY29tcG9uZW50SW5zdGFuY2UgPSByZXMuY29tcG9uZW50SW5zdGFuY2UgYXMgTm90aWZpY2F0aW9uQ29tcG9uZW50O1xuICAgIGNvbXBvbmVudEluc3RhbmNlLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGNvbXBvbmVudEluc3RhbmNlLm1vZGlmaWVyID0gbW9kaWZpZXI7XG4gICAgY29tcG9uZW50SW5zdGFuY2UuZGlzbWlzc2libGUgPSBkaXNtaXNzaWJsZTtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5oZWFkZXIgPSBoZWFkZXI7XG4gICAgY29tcG9uZW50SW5zdGFuY2UucHJpbWFyeUFjdGlvblRleHQgPSBwcmltYXJ5QWN0aW9uVGV4dDtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5wcmltYXJ5QWN0aW9uID0gcHJpbWFyeUFjdGlvbjtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb25UZXh0ID0gc2Vjb25kYXJ5QWN0aW9uVGV4dDtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb24gPSBzZWNvbmRhcnlBY3Rpb247XG4gICAgY29tcG9uZW50SW5zdGFuY2UuY2xvc2VBY3Rpb24gPSBjbG9zZUFjdGlvbjtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5ob3N0QWN0aW9uID0gaG9zdEFjdGlvbjtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5oZWFkZXJDb250ZXh0ID0gaGVhZGVyQ29udGV4dDtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5tZXNzYWdlQ29udGV4dCA9IG1lc3NhZ2VDb250ZXh0O1xuICAgIGNvbXBvbmVudEluc3RhbmNlLnByaW1hcnlBY3Rpb25UZW1wbGF0ZSA9IHByaW1hcnlBY3Rpb25UZW1wbGF0ZTtcbiAgICBjb21wb25lbnRJbnN0YW5jZS5zZWNvbmRhcnlBY3Rpb25UZW1wbGF0ZSA9IHNlY29uZGFyeUFjdGlvblRlbXBsYXRlO1xuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSGlkZU5vdGlmaWNhdGlvbkZ1bmN0aW9uKHJlcy51bm1vdW50Q29tcG9uZW50LCB0dGwsIGNvbXBvbmVudEluc3RhbmNlLmNsb3NlKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlSGlkZU5vdGlmaWNhdGlvbkZ1bmN0aW9uKFxuICAgIGhpZGVGbjogKCkgPT4gdm9pZCxcbiAgICB0dGw6IG51bWJlciA9IDAsXG4gICAgY2xvc2VTdHJlYW06IE9ic2VydmFibGU8YW55PixcbiAgKTogKCkgPT4gdm9pZCB7XG4gICAgY29uc3QgaGlkZVN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XG4gICAgY29uc3QgaGlkZU5vdGlmaWNhdGlvbiA9ICgpID0+IHtcbiAgICAgIGhpZGVTdWJqZWN0Lm5leHQoKTtcbiAgICB9O1xuICAgIGNvbnN0IGNsb3NlU3Vic2NyaXB0aW9uID0gY2xvc2VTdHJlYW0uc3Vic2NyaWJlKGhpZGVOb3RpZmljYXRpb24pO1xuXG4gICAgY29uc3QgaGlkZVN1YnNjcmlwdGlvbiA9IGhpZGVTdWJqZWN0LnBpcGUoZmlyc3QoKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGhpZGVGbigpO1xuICAgICAgaGlkZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgY2xvc2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcblxuICAgIGlmICh0dGwgPiAwKSB7XG4gICAgICBzZXRUaW1lb3V0KGhpZGVOb3RpZmljYXRpb24sIHR0bCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhpZGVOb3RpZmljYXRpb247XG4gIH1cbn1cbiJdfQ==