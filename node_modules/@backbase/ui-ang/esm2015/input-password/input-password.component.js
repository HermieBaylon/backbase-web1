import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewChild, Self, Optional, } from '@angular/core';
import { InputBaseComponent } from '@backbase/ui-ang/base-classes';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/ui-ang/services";
import * as i2 from "@backbase/foundation-ang/future";
import * as i3 from "@angular/forms";
import * as i4 from "@backbase/ui-ang/icon";
import * as i5 from "@angular/common";
import * as i6 from "@backbase/ui-ang/focus";
import * as i7 from "@backbase/ui-ang/button";
/**
 * @name InputPasswordComponent
 *
 * @description
 * Component that displays a password input
 *
 * @a11y Current component provide option to pass needed accessibility
 * attributes. You need to take care of properties that are required in your case :
 *  - role
 *  - aria-activedescendant
 *  - aria-describedby
 *  - aria-expanded
 *  - aria-invalid
 *  - aria-label
 *  - aria-labelledby
 *  - aria-owns
 *
 * visibilityControlLabel is discernible text for show/hide password button.
 * ariaLabel is discernible text for password input
 */
export class InputPasswordComponent extends InputBaseComponent {
    constructor(domAttrService, elem, renderer2, cd, deprecationsService, parentFormControl) {
        super(cd, deprecationsService);
        this.domAttrService = domAttrService;
        this.elem = elem;
        this.renderer2 = renderer2;
        this.cd = cd;
        this.deprecationsService = deprecationsService;
        this.parentFormControl = parentFormControl;
        /**
         * The placeholder for the password input. Defaults to an empty string;
         */
        this.placeholder = '';
        /**
         * Whether the password input is readonly.
         */
        this.readonly = false;
        /**
         * Whether to show the visibility button icon after the text.
         */
        this.showVisibilityControl = false;
        /**
         * Whether to show password in plain text.
         */
        this.showPassword = false;
        /**
         * The aria label used when the visibility button is in focus.
         */
        this.visibilityControlLabel = 'Show/Hide password button';
        /**
         * Aria label for the password input
         */
        this.ariaLabel = 'Password Input';
        /**
         * The event emitter called when the visibility button is clicked.
         */
        this.toggleVisibility = new EventEmitter();
        if (this.parentFormControl) {
            this.parentFormControl.valueAccessor = this;
        }
    }
    ngAfterViewInit() {
        if (!this.ariaLabel) {
            this.domAttrService.moveAriaAttributes(this.elem.nativeElement, this.inputEl && this.inputEl.nativeElement, this.renderer2);
        }
    }
    onVisibilityChange() {
        this.showPassword = !this.showPassword;
        this.toggleVisibility.emit(this.showPassword);
    }
}
InputPasswordComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: InputPasswordComponent, deps: [{ token: i1.DomAttributesService }, { token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.ChangeDetectorRef }, { token: i2.DeprecationsService }, { token: i3.NgControl, optional: true, self: true }], target: i0.ɵɵFactoryTarget.Component });
InputPasswordComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: InputPasswordComponent, selector: "bb-input-password-ui", inputs: { placeholder: "placeholder", maxLength: "maxLength", minLength: "minLength", readonly: "readonly", autocomplete: "autocomplete", showVisibilityControl: "showVisibilityControl", showPassword: "showPassword", visibilityControlLabel: "visibilityControlLabel", ariaLabel: "ariaLabel" }, outputs: { toggleVisibility: "toggleVisibility" }, viewQueries: [{ propertyName: "inputEl", first: true, predicate: ["inputPassword"], descendants: true }], usesInheritance: true, ngImport: i0, template: "<div\n  class=\"bb-input-password\"\n  [ngClass]=\"{ 'ng-invalid': parentFormControl?.invalid, 'ng-touched': parentFormControl?.touched }\"\n>\n  <label *ngIf=\"label\" for=\"{{ id }}\">{{ label }}</label>\n  <div class=\"input-group\">\n    <input\n      id=\"{{ id }}\"\n      #inputPassword\n      [attr.aria-autocomplete]=\"ariaAutocomplete\"\n      [attr.aria-controls]=\"ariaControls\"\n      [attr.aria-labelledby]=\"ariaLabelledby\"\n      [attr.aria-describedby]=\"ariaDescribedby\"\n      [attr.aria-expanded]=\"ariaExpanded\"\n      [attr.aria-activedescendant]=\"ariaActivedescendant\"\n      [attr.role]=\"role\"\n      [attr.aria-invalid]=\"ariaInvalid\"\n      [attr.aria-owns]=\"ariaOwns\"\n      [attr.aria-label]=\"(!label && ariaLabel) || null\"\n      [ngModel]=\"value\"\n      (ngModelChange)=\"onValueChange($event)\"\n      (blur)=\"onBlur()\"\n      [type]=\"showPassword ? 'text' : 'password'\"\n      class=\"form-control bb-input-password__input\"\n      (focus)=\"onFocus()\"\n      [disabled]=\"disabled\"\n      [readonly]=\"readonly\"\n      [placeholder]=\"placeholder\"\n      [required]=\"required\"\n      [bbFocus]=\"autofocus\"\n      [attr.autocomplete]=\"autocomplete\"\n      [attr.maxlength]=\"maxLength\"\n      [attr.minlength]=\"minLength\"\n    />\n    <div *ngIf=\"showVisibilityControl\" class=\"input-group-append\">\n      <button\n        bbButton\n        (click)=\"onVisibilityChange()\"\n        color=\"link\"\n        [attr.aria-label]=\"visibilityControlLabel\"\n        class=\"bb-input-password__visibility-toggle-button\"\n        data-role=\"bb-input-password-visibility-toggle-button\"\n      >\n        <bb-icon-ui [name]=\"showPassword ? 'visibility-off' : 'visibility'\" size=\"md\"></bb-icon-ui>\n      </button>\n    </div>\n  </div>\n</div>\n", components: [{ type: i4.IconComponent, selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }], directives: [{ type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i3.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i6.FocusDirective, selector: "[bbFocus]", inputs: ["bbFocus"], exportAs: ["bbFocus"] }, { type: i3.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { type: i3.MinLengthValidator, selector: "[minlength][formControlName],[minlength][formControl],[minlength][ngModel]", inputs: ["minlength"] }, { type: i7.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: InputPasswordComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-input-password-ui',
                    templateUrl: './input-password.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i1.DomAttributesService }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.ChangeDetectorRef }, { type: i2.DeprecationsService }, { type: i3.NgControl, decorators: [{
                    type: Self
                }, {
                    type: Optional
                }] }]; }, propDecorators: { placeholder: [{
                type: Input
            }], maxLength: [{
                type: Input
            }], minLength: [{
                type: Input
            }], readonly: [{
                type: Input
            }], autocomplete: [{
                type: Input
            }], showVisibilityControl: [{
                type: Input
            }], showPassword: [{
                type: Input
            }], visibilityControlLabel: [{
                type: Input
            }], ariaLabel: [{
                type: Input
            }], toggleVisibility: [{
                type: Output
            }], inputEl: [{
                type: ViewChild,
                args: ['inputPassword']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtcGFzc3dvcmQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvaW5wdXQtcGFzc3dvcmQvaW5wdXQtcGFzc3dvcmQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvaW5wdXQtcGFzc3dvcmQvaW5wdXQtcGFzc3dvcmQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFDTCxNQUFNLEVBRU4sU0FBUyxFQUNULElBQUksRUFDSixRQUFRLEdBQ1QsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sK0JBQStCLENBQUM7Ozs7Ozs7OztBQUluRTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW1CRztBQU1ILE1BQU0sT0FBTyxzQkFBdUIsU0FBUSxrQkFBa0I7SUFnRDVELFlBQ21CLGNBQW9DLEVBQ3BDLElBQWdCLEVBQ2hCLFNBQW9CLEVBQ2xCLEVBQXFCLEVBQ3JCLG1CQUF3QyxFQUNoQyxpQkFBNEI7UUFFdkQsS0FBSyxDQUFDLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1FBUGQsbUJBQWMsR0FBZCxjQUFjLENBQXNCO1FBQ3BDLFNBQUksR0FBSixJQUFJLENBQVk7UUFDaEIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQUNsQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUNyQix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBQ2hDLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBVztRQXJEekQ7O1dBRUc7UUFDTSxnQkFBVyxHQUFHLEVBQUUsQ0FBQztRQVMxQjs7V0FFRztRQUNNLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFRMUI7O1dBRUc7UUFDTSwwQkFBcUIsR0FBRyxLQUFLLENBQUM7UUFDdkM7O1dBRUc7UUFDTSxpQkFBWSxHQUFHLEtBQUssQ0FBQztRQUM5Qjs7V0FFRztRQUNNLDJCQUFzQixHQUFHLDJCQUEyQixDQUFDO1FBQzlEOztXQUVHO1FBRUgsY0FBUyxHQUFHLGdCQUFnQixDQUFDO1FBQzdCOztXQUVHO1FBQ08scUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQWN2RCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztTQUM3QztJQUNILENBQUM7SUFFRCxlQUFlO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQ3ZCLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQzFDLElBQUksQ0FBQyxTQUFTLENBQ2YsQ0FBQztTQUNIO0lBQ0gsQ0FBQztJQUVELGtCQUFrQjtRQUNoQixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUN2QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNoRCxDQUFDOztvSEE1RVUsc0JBQXNCO3dHQUF0QixzQkFBc0Isb2hCQzVDbkMsb3hEQWdEQTs0RkRKYSxzQkFBc0I7a0JBTGxDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHNCQUFzQjtvQkFDaEMsV0FBVyxFQUFFLGlDQUFpQztvQkFDOUMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2hEOzswQkF1REksSUFBSTs7MEJBQUksUUFBUTs0Q0FsRFYsV0FBVztzQkFBbkIsS0FBSztnQkFJRyxTQUFTO3NCQUFqQixLQUFLO2dCQUlHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBSUcsUUFBUTtzQkFBaEIsS0FBSztnQkFNRyxZQUFZO3NCQUFwQixLQUFLO2dCQUtHLHFCQUFxQjtzQkFBN0IsS0FBSztnQkFJRyxZQUFZO3NCQUFwQixLQUFLO2dCQUlHLHNCQUFzQjtzQkFBOUIsS0FBSztnQkFLTixTQUFTO3NCQURSLEtBQUs7Z0JBS0ksZ0JBQWdCO3NCQUF6QixNQUFNO2dCQUVxQixPQUFPO3NCQUFsQyxTQUFTO3VCQUFDLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBSZW5kZXJlcjIsXG4gIFZpZXdDaGlsZCxcbiAgU2VsZixcbiAgT3B0aW9uYWwsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmdDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSW5wdXRCYXNlQ29tcG9uZW50IH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9iYXNlLWNsYXNzZXMnO1xuaW1wb3J0IHsgRG9tQXR0cmlidXRlc1NlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvdWktYW5nL3NlcnZpY2VzJztcbmltcG9ydCB7IERlcHJlY2F0aW9uc1NlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvZnV0dXJlJztcblxuLyoqXG4gKiBAbmFtZSBJbnB1dFBhc3N3b3JkQ29tcG9uZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb21wb25lbnQgdGhhdCBkaXNwbGF5cyBhIHBhc3N3b3JkIGlucHV0XG4gKlxuICogQGExMXkgQ3VycmVudCBjb21wb25lbnQgcHJvdmlkZSBvcHRpb24gdG8gcGFzcyBuZWVkZWQgYWNjZXNzaWJpbGl0eVxuICogYXR0cmlidXRlcy4gWW91IG5lZWQgdG8gdGFrZSBjYXJlIG9mIHByb3BlcnRpZXMgdGhhdCBhcmUgcmVxdWlyZWQgaW4geW91ciBjYXNlIDpcbiAqICAtIHJvbGVcbiAqICAtIGFyaWEtYWN0aXZlZGVzY2VuZGFudFxuICogIC0gYXJpYS1kZXNjcmliZWRieVxuICogIC0gYXJpYS1leHBhbmRlZFxuICogIC0gYXJpYS1pbnZhbGlkXG4gKiAgLSBhcmlhLWxhYmVsXG4gKiAgLSBhcmlhLWxhYmVsbGVkYnlcbiAqICAtIGFyaWEtb3duc1xuICpcbiAqIHZpc2liaWxpdHlDb250cm9sTGFiZWwgaXMgZGlzY2VybmlibGUgdGV4dCBmb3Igc2hvdy9oaWRlIHBhc3N3b3JkIGJ1dHRvbi5cbiAqIGFyaWFMYWJlbCBpcyBkaXNjZXJuaWJsZSB0ZXh0IGZvciBwYXNzd29yZCBpbnB1dFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1pbnB1dC1wYXNzd29yZC11aScsXG4gIHRlbXBsYXRlVXJsOiAnLi9pbnB1dC1wYXNzd29yZC5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBJbnB1dFBhc3N3b3JkQ29tcG9uZW50IGV4dGVuZHMgSW5wdXRCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG4gIC8qKlxuICAgKiBUaGUgcGxhY2Vob2xkZXIgZm9yIHRoZSBwYXNzd29yZCBpbnB1dC4gRGVmYXVsdHMgdG8gYW4gZW1wdHkgc3RyaW5nO1xuICAgKi9cbiAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAnJztcbiAgLyoqXG4gICAqIFRoZSBtYXhMZW5ndGggZm9yIHRoZSBwYXNzd29yZCBpbnB1dC5cbiAgICovXG4gIEBJbnB1dCgpIG1heExlbmd0aDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAvKipcbiAgICogVGhlIG1pbkxlbmd0aCBmb3IgdGhlIHBhc3N3b3JkIGlucHV0LlxuICAgKi9cbiAgQElucHV0KCkgbWluTGVuZ3RoOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBwYXNzd29yZCBpbnB1dCBpcyByZWFkb25seS5cbiAgICovXG4gIEBJbnB1dCgpIHJlYWRvbmx5ID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBhdXRvY29tcGxldGUgdHlwZSBmb3IgdGV4dCBpbnB1dC5cbiAgICovXG5cbiAgQElucHV0KCkgYXV0b2NvbXBsZXRlOiAnbmV3LXBhc3N3b3JkJyB8ICdjdXJyZW50LXBhc3N3b3JkJyB8ICdvbicgfCAnb2ZmJyB8ICdvbmUtdGltZS1jb2RlJyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciB0byBzaG93IHRoZSB2aXNpYmlsaXR5IGJ1dHRvbiBpY29uIGFmdGVyIHRoZSB0ZXh0LlxuICAgKi9cbiAgQElucHV0KCkgc2hvd1Zpc2liaWxpdHlDb250cm9sID0gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHNob3cgcGFzc3dvcmQgaW4gcGxhaW4gdGV4dC5cbiAgICovXG4gIEBJbnB1dCgpIHNob3dQYXNzd29yZCA9IGZhbHNlO1xuICAvKipcbiAgICogVGhlIGFyaWEgbGFiZWwgdXNlZCB3aGVuIHRoZSB2aXNpYmlsaXR5IGJ1dHRvbiBpcyBpbiBmb2N1cy5cbiAgICovXG4gIEBJbnB1dCgpIHZpc2liaWxpdHlDb250cm9sTGFiZWwgPSAnU2hvdy9IaWRlIHBhc3N3b3JkIGJ1dHRvbic7XG4gIC8qKlxuICAgKiBBcmlhIGxhYmVsIGZvciB0aGUgcGFzc3dvcmQgaW5wdXRcbiAgICovXG4gIEBJbnB1dCgpXG4gIGFyaWFMYWJlbCA9ICdQYXNzd29yZCBJbnB1dCc7XG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgZW1pdHRlciBjYWxsZWQgd2hlbiB0aGUgdmlzaWJpbGl0eSBidXR0b24gaXMgY2xpY2tlZC5cbiAgICovXG4gIEBPdXRwdXQoKSB0b2dnbGVWaXNpYmlsaXR5ID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gIEBWaWV3Q2hpbGQoJ2lucHV0UGFzc3dvcmQnKSBpbnB1dEVsOiBFbGVtZW50UmVmIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZG9tQXR0clNlcnZpY2U6IERvbUF0dHJpYnV0ZXNTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbTogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHJlYWRvbmx5IHJlbmRlcmVyMjogUmVuZGVyZXIyLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlcHJlY2F0aW9uc1NlcnZpY2U6IERlcHJlY2F0aW9uc1NlcnZpY2UsXG4gICAgQFNlbGYoKSBAT3B0aW9uYWwoKSBwdWJsaWMgcGFyZW50Rm9ybUNvbnRyb2w6IE5nQ29udHJvbCxcbiAgKSB7XG4gICAgc3VwZXIoY2QsIGRlcHJlY2F0aW9uc1NlcnZpY2UpO1xuXG4gICAgaWYgKHRoaXMucGFyZW50Rm9ybUNvbnRyb2wpIHtcbiAgICAgIHRoaXMucGFyZW50Rm9ybUNvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5hcmlhTGFiZWwpIHtcbiAgICAgIHRoaXMuZG9tQXR0clNlcnZpY2UubW92ZUFyaWFBdHRyaWJ1dGVzKFxuICAgICAgICB0aGlzLmVsZW0ubmF0aXZlRWxlbWVudCxcbiAgICAgICAgdGhpcy5pbnB1dEVsICYmIHRoaXMuaW5wdXRFbC5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLnJlbmRlcmVyMixcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgb25WaXNpYmlsaXR5Q2hhbmdlKCkge1xuICAgIHRoaXMuc2hvd1Bhc3N3b3JkID0gIXRoaXMuc2hvd1Bhc3N3b3JkO1xuICAgIHRoaXMudG9nZ2xlVmlzaWJpbGl0eS5lbWl0KHRoaXMuc2hvd1Bhc3N3b3JkKTtcbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cImJiLWlucHV0LXBhc3N3b3JkXCJcbiAgW25nQ2xhc3NdPVwieyAnbmctaW52YWxpZCc6IHBhcmVudEZvcm1Db250cm9sPy5pbnZhbGlkLCAnbmctdG91Y2hlZCc6IHBhcmVudEZvcm1Db250cm9sPy50b3VjaGVkIH1cIlxuPlxuICA8bGFiZWwgKm5nSWY9XCJsYWJlbFwiIGZvcj1cInt7IGlkIH19XCI+e3sgbGFiZWwgfX08L2xhYmVsPlxuICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cbiAgICA8aW5wdXRcbiAgICAgIGlkPVwie3sgaWQgfX1cIlxuICAgICAgI2lucHV0UGFzc3dvcmRcbiAgICAgIFthdHRyLmFyaWEtYXV0b2NvbXBsZXRlXT1cImFyaWFBdXRvY29tcGxldGVcIlxuICAgICAgW2F0dHIuYXJpYS1jb250cm9sc109XCJhcmlhQ29udHJvbHNcIlxuICAgICAgW2F0dHIuYXJpYS1sYWJlbGxlZGJ5XT1cImFyaWFMYWJlbGxlZGJ5XCJcbiAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwiYXJpYURlc2NyaWJlZGJ5XCJcbiAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiYXJpYUV4cGFuZGVkXCJcbiAgICAgIFthdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudF09XCJhcmlhQWN0aXZlZGVzY2VuZGFudFwiXG4gICAgICBbYXR0ci5yb2xlXT1cInJvbGVcIlxuICAgICAgW2F0dHIuYXJpYS1pbnZhbGlkXT1cImFyaWFJbnZhbGlkXCJcbiAgICAgIFthdHRyLmFyaWEtb3duc109XCJhcmlhT3duc1wiXG4gICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIighbGFiZWwgJiYgYXJpYUxhYmVsKSB8fCBudWxsXCJcbiAgICAgIFtuZ01vZGVsXT1cInZhbHVlXCJcbiAgICAgIChuZ01vZGVsQ2hhbmdlKT1cIm9uVmFsdWVDaGFuZ2UoJGV2ZW50KVwiXG4gICAgICAoYmx1cik9XCJvbkJsdXIoKVwiXG4gICAgICBbdHlwZV09XCJzaG93UGFzc3dvcmQgPyAndGV4dCcgOiAncGFzc3dvcmQnXCJcbiAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIGJiLWlucHV0LXBhc3N3b3JkX19pbnB1dFwiXG4gICAgICAoZm9jdXMpPVwib25Gb2N1cygpXCJcbiAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgIFtyZXF1aXJlZF09XCJyZXF1aXJlZFwiXG4gICAgICBbYmJGb2N1c109XCJhdXRvZm9jdXNcIlxuICAgICAgW2F0dHIuYXV0b2NvbXBsZXRlXT1cImF1dG9jb21wbGV0ZVwiXG4gICAgICBbYXR0ci5tYXhsZW5ndGhdPVwibWF4TGVuZ3RoXCJcbiAgICAgIFthdHRyLm1pbmxlbmd0aF09XCJtaW5MZW5ndGhcIlxuICAgIC8+XG4gICAgPGRpdiAqbmdJZj1cInNob3dWaXNpYmlsaXR5Q29udHJvbFwiIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYXBwZW5kXCI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGJiQnV0dG9uXG4gICAgICAgIChjbGljayk9XCJvblZpc2liaWxpdHlDaGFuZ2UoKVwiXG4gICAgICAgIGNvbG9yPVwibGlua1wiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwidmlzaWJpbGl0eUNvbnRyb2xMYWJlbFwiXG4gICAgICAgIGNsYXNzPVwiYmItaW5wdXQtcGFzc3dvcmRfX3Zpc2liaWxpdHktdG9nZ2xlLWJ1dHRvblwiXG4gICAgICAgIGRhdGEtcm9sZT1cImJiLWlucHV0LXBhc3N3b3JkLXZpc2liaWxpdHktdG9nZ2xlLWJ1dHRvblwiXG4gICAgICA+XG4gICAgICAgIDxiYi1pY29uLXVpIFtuYW1lXT1cInNob3dQYXNzd29yZCA/ICd2aXNpYmlsaXR5LW9mZicgOiAndmlzaWJpbGl0eSdcIiBzaXplPVwibWRcIj48L2JiLWljb24tdWk+XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==