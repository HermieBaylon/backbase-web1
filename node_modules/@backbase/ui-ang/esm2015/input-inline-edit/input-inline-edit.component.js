import { ChangeDetectionStrategy, Component, EventEmitter, forwardRef, HostListener, Input, Output, } from '@angular/core';
import { FormControl, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';
import { InputBaseComponent } from '@backbase/ui-ang/base-classes';
import { defaultAriaLabels, defaultTooltips } from './input-inline-edit.model';
import { idListAttr } from '@backbase/ui-ang/util';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/foundation-ang/future";
import * as i2 from "@backbase/ui-ang/services";
import * as i3 from "@backbase/ui-ang/icon";
import * as i4 from "@backbase/ui-ang/input-text";
import * as i5 from "@backbase/ui-ang/input-validation-message";
import * as i6 from "@backbase/ui-ang/loading-indicator";
import * as i7 from "@angular/common";
import * as i8 from "@backbase/ui-ang/button";
import * as i9 from "@backbase/ui-ang/tooltip-directive";
import * as i10 from "@angular/forms";
export var InputInlineEditState;
(function (InputInlineEditState) {
    InputInlineEditState[InputInlineEditState["IDLE"] = 0] = "IDLE";
    InputInlineEditState[InputInlineEditState["LOADING"] = 1] = "LOADING";
    InputInlineEditState[InputInlineEditState["EDITING"] = 2] = "EDITING";
})(InputInlineEditState || (InputInlineEditState = {}));
/**
 * @name InputInlineEditComponent
 *
 * @a11y Current component provide option to pass needed accessibility
 * attributes. You need to take care of properties that are required in your case :
 *  - role
 *  - aria-activedescendant
 *  - aria-describedby
 *  - aria-expanded
 *  - aria-invalid
 *  - aria-label
 *  - aria-labelledby
 *  - aria-owns
 *
 * @description
 * Component that enables inline input editing.
 */
export class InputInlineEditComponent extends InputBaseComponent {
    constructor(cd, deprecationsService, domAttributesService) {
        super(cd, deprecationsService);
        this.domAttributesService = domAttributesService;
        this._state = InputInlineEditState.IDLE;
        /**
         * Emit on edit state changes
         */
        this.stateChange = new EventEmitter();
        /**
         * Flag represents visibility of edit button
         *
         * @default: true
         */
        this.canEdit = true;
        /**
         * Applies additional loading state for edit flow
         *
         * @default: false
         */
        this.hasLoadingState = false;
        /**
         * The maxLength for the text input.
         */
        this.maxLength = Infinity;
        /**
         * The minLength for the text input.
         */
        this.minLength = 0;
        /**
         * Whether the text input should be auto-focused when shown.
         */
        this.autofocus = false;
        /**
         * The event that's fired after on Cancel.
         */
        this.cancel = new EventEmitter();
        /**
         * The event that's fired after on Accept.
         */
        this.accept = new EventEmitter();
        /**
         * string for aria label on Accept button
         */
        this.ariaLabelAccept = defaultAriaLabels.accept;
        /**
         * string for aria label on Cancel button
         */
        this.ariaLabelCancel = defaultAriaLabels.cancel;
        /**
         * string for aria label on Edit button
         */
        this.ariaLabelEdit = defaultAriaLabels.edit;
        /**
         * string for tooltip on Accept button
         */
        this.tooltipAccept = defaultTooltips.accept;
        /**
         * string for tooltip on Cancel button
         */
        this.tooltipCancel = defaultTooltips.cancel;
        /**
         * string for tooltip on Edit button
         */
        this.tooltipEdit = defaultTooltips.edit;
        /**
         * Utility function for use in template
         */
        this.idListAttr = idListAttr;
        this.validationMessagesId = this.domAttributesService.generateId();
    }
    /**
     * State for inline edit
     */
    set state(value) {
        this._state = value;
        if (this.vForm && value === InputInlineEditState.IDLE) {
            this.vForm.controls.inputInline.setValue(this._inputText);
        }
    }
    /**
     * string for editing
     */
    set inputText(value) {
        var _a;
        this._inputText = value;
        (_a = this.vForm) === null || _a === void 0 ? void 0 : _a.controls.inputInline.setValue(this._inputText);
    }
    get inputText() {
        return this._inputText;
    }
    ngAfterContentInit() {
        const validators = [Validators.maxLength(this.maxLength), Validators.minLength(this.minLength)];
        if (this.required) {
            validators.push(Validators.required);
        }
        if (this.pattern) {
            validators.push(Validators.pattern(this.pattern));
        }
        if (this.minValue) {
            validators.push(Validators.min(this.minValue));
        }
        if (this.maxValue) {
            validators.push(Validators.max(this.maxValue));
        }
        this.vForm = new FormGroup({
            inputInline: new FormControl(this._inputText, Validators.compose(validators)),
        });
    }
    writeValue(inputValue) {
        if (typeof inputValue === 'string') {
            this._inputText = inputValue;
        }
        super.writeValue(inputValue);
    }
    onEdit(event) {
        event.stopPropagation();
        this.updateState(InputInlineEditState.EDITING);
    }
    onCancel(event) {
        var _a;
        if (event) {
            event.stopPropagation();
        }
        (_a = this.vForm) === null || _a === void 0 ? void 0 : _a.controls.inputInline.setValue(this._inputText);
        this.updateState(InputInlineEditState.IDLE);
        this.cancel.emit();
    }
    get isLoading() {
        return this._state === InputInlineEditState.LOADING;
    }
    get editMode() {
        return this._state === InputInlineEditState.EDITING;
    }
    get isIdleMode() {
        return this._state === InputInlineEditState.IDLE;
    }
    /**
     * Emits the updated value from input
     *
     * If the {@link InputInlineEditComponent.hasLoadingState } set to true -> the state is not changed,
     * as component state should be updated from outside, otherwise the value will be updated with the
     * new one and state will be switched to `IDLE`
     *
     */
    onAccept() {
        const newString = this.vForm ? this.vForm.controls.inputInline.value : '';
        if (!this.hasLoadingState) {
            this.updateState(InputInlineEditState.IDLE);
            this._inputText = newString;
            this.onValueChange(newString);
        }
        this.accept.emit(newString);
    }
    hasError(type) {
        const fieldControl = this.vForm ? this.vForm.controls.inputInline : null;
        if (!fieldControl || !fieldControl.errors) {
            return undefined;
        }
        return type ? fieldControl.errors[type] : fieldControl.errors;
    }
    onKeydownHandler(evt) {
        if (this.editMode) {
            this.onCancel();
        }
    }
    updateState(value) {
        this._state = value;
        this.stateChange.emit(value);
    }
}
InputInlineEditComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: InputInlineEditComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.DeprecationsService }, { token: i2.DomAttributesService }], target: i0.ɵɵFactoryTarget.Component });
InputInlineEditComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: InputInlineEditComponent, selector: "bb-input-inline-edit-ui", inputs: { state: "state", canEdit: "canEdit", hasLoadingState: "hasLoadingState", inputInlineTemplate: "inputInlineTemplate", inputText: "inputText", maxLength: "maxLength", minLength: "minLength", maxValue: "maxValue", minValue: "minValue", autofocus: "autofocus", ariaLabelAccept: "ariaLabelAccept", ariaLabelCancel: "ariaLabelCancel", ariaLabelEdit: "ariaLabelEdit", tooltipAccept: "tooltipAccept", tooltipCancel: "tooltipCancel", tooltipEdit: "tooltipEdit", autocomplete: "autocomplete", pattern: "pattern", hint: "hint" }, outputs: { stateChange: "stateChange", cancel: "cancel", accept: "accept" }, host: { listeners: { "document:keydown.escape": "onKeydownHandler($event)" } }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => InputInlineEditComponent),
            multi: true,
        },
    ], usesInheritance: true, ngImport: i0, template: "<div class=\"bb-input-inline-edit-ui\">\n  <ng-container *ngIf=\"isIdleMode; else editingState\">\n    <div class=\"bb-stack bb-input-inline-edit-ui__idle-wrapper\">\n      <ng-container\n        *ngTemplateOutlet=\"inputInlineTemplate ? inputInlineTemplate : defaultInlineTemplate; context: this\"\n      >\n      </ng-container>\n      <ng-template #defaultInlineTemplate>\n        <span class=\"bb-stack__item bb-stack__item--spacing-none\" data-role=\"inline-edit-text\">\n          {{ inputText }}\n        </span>\n      </ng-template>\n\n      <button\n        *ngIf=\"canEdit\"\n        bbButton\n        class=\"bb-stack__item bb-stack__item--no-shrink\"\n        (click)=\"onEdit($event)\"\n        [attr.aria-describedby]=\"ariaDescribedby\"\n        [attr.aria-label]=\"ariaLabelEdit\"\n        [attr.aria-labelledby]=\"ariaLabelledby\"\n        color=\"link-dark\"\n        [attr.data-role]=\"'inline-edit-btn'\"\n        [circle]=\"true\"\n        type=\"button\"\n        buttonSize=\"sm\"\n        [bbTooltip]=\"tooltipEdit\"\n        container=\"body\"\n        triggers=\"hover focus\"\n        placement=\"auto\"\n      >\n        <bb-icon-ui class=\"bb-text-support\" name=\"edit\"></bb-icon-ui>\n      </button>\n    </div>\n  </ng-container>\n  <ng-template #editingState>\n    <div class=\"form-group\">\n      <form [formGroup]=\"vForm\" (ngSubmit)=\"!hasError() && onAccept()\">\n        <bb-input-text-ui\n          [attr.data-role]=\"'inline-edit-input'\"\n          label=\"{{ label }}\"\n          formControlName=\"inputInline\"\n          [attr.aria-autocomplete]=\"ariaAutocomplete\"\n          [attr.aria-controls]=\"ariaControls\"\n          [attr.aria-labelledby]=\"ariaLabelledby\"\n          [attr.aria-describedby]=\"idListAttr(ariaDescribedby, validationMessagesId)\"\n          [attr.aria-expanded]=\"ariaExpanded\"\n          [attr.aria-activedescendant]=\"ariaActivedescendant\"\n          [attr.role]=\"role\"\n          [attr.aria-invalid]=\"ariaInvalid\"\n          [attr.aria-owns]=\"ariaOwns\"\n          [required]=\"required\"\n          [readonly]=\"readonly\"\n          [maxLength]=\"maxLength\"\n          [minLength]=\"minLength\"\n          [autofocus]=\"true\"\n          [ngClass]=\"inputClassName\"\n          [attr.size]=\"size\"\n          (click)=\"$event.stopPropagation()\"\n          (blur)=\"onBlur($event)\"\n          id=\"{{ id }}\"\n          [autocomplete]=\"autocomplete\"\n        >\n        </bb-input-text-ui>\n        <div class=\"bb-stack bb-stack--align-top bb-stack--density-md\">\n          <div class=\"bb-stack__item bb-stack__item--fill\">\n            <div class=\"bb-subtitle bb-text-support\" data-role=\"inline-edit-hint\" *ngIf=\"hint && !hasError()\">\n              {{ hint }}\n            </div>\n            <bb-input-validation-message-ui [showErrors]=\"hasError()\" [id]=\"validationMessagesId\">\n              <div\n                *ngIf=\"hasError('maxlength')\"\n                i18n=\"Max Length Error|String is more than 'maxLength' characters @@input-inline-edit-ui.maxLengthError\"\n              >\n                Insert max {{ maxLength }} characters\n              </div>\n              <div\n                *ngIf=\"hasError('minlength')\"\n                i18n=\"Min Length Error|String is less than 'minLength' characters @@input-inline-edit-ui.minLengthError\"\n              >\n                Insert min {{ minLength }} characters\n              </div>\n              <div\n                *ngIf=\"hasError('min')\"\n                i18n=\"Min value Error|Number is less than 'minValue' @@input-inline-edit-ui.minValueError\"\n              >\n                Insert min {{ minValue }}\n              </div>\n              <div\n                *ngIf=\"hasError('max')\"\n                i18n=\"Max value Error|Number is more than 'maxValue' @@input-inline-edit-ui.maxValueError\"\n              >\n                Insert max {{ maxValue }}\n              </div>\n              <div\n                *ngIf=\"hasError('pattern')\"\n                i18n=\"Format value error|Format value is invalid @@input-inline-edit-ui.formatValueError\"\n              >\n                Input value provided is invalid\n              </div>\n              <div\n                *ngIf=\"hasError('required')\"\n                i18n=\"Required error|String is required @@input-inline-edit-ui.requiredError\"\n              >\n                Field is required\n              </div>\n            </bb-input-validation-message-ui>\n          </div>\n          <div class=\"bb-stack__item bb-stack__item--push-right flex-shrink-0\">\n            <button\n              bbButton\n              type=\"reset\"\n              (click)=\"onCancel($event)\"\n              class=\"bb-stack__item bb-stack__item--push-right\"\n              color=\"danger\"\n              [attr.data-role]=\"'inline-edit-cancel'\"\n              [circle]=\"true\"\n              [attr.aria-label]=\"ariaLabelCancel\"\n              buttonSize=\"sm\"\n              [bbTooltip]=\"tooltipCancel\"\n              container=\"body\"\n              triggers=\"hover focus\"\n              placement=\"auto\"\n            >\n              <bb-icon-ui name=\"times\"></bb-icon-ui>\n            </button>\n            <button\n              bbButton\n              (click)=\"$event.stopPropagation()\"\n              color=\"success\"\n              [attr.data-role]=\"'inline-edit-accept'\"\n              type=\"submit\"\n              [circle]=\"true\"\n              [attr.aria-label]=\"ariaLabelAccept\"\n              buttonSize=\"sm\"\n              class=\"bb-load-button\"\n              [bbTooltip]=\"tooltipAccept\"\n              container=\"body\"\n              triggers=\"hover focus\"\n              placement=\"auto\"\n            >\n              <bb-loading-indicator-ui\n                *ngIf=\"isLoading; else checkIcon\"\n                class=\"bb-load-button__loading-indicator\"\n                loaderSize=\"sm\"\n              ></bb-loading-indicator-ui>\n              <ng-template #checkIcon>\n                <bb-icon-ui name=\"check\"></bb-icon-ui>\n              </ng-template>\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </ng-template>\n</div>\n", components: [{ type: i3.IconComponent, selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }, { type: i4.InputTextComponent, selector: "bb-input-text-ui", inputs: ["placeholder", "maxLength", "minLength", "autocomplete", "readonly", "mask", "maskValidator", "showCharCounter"], outputs: ["valueChange"] }, { type: i5.InputValidationMessageComponent, selector: "bb-input-validation-message-ui", inputs: ["showErrors", "messageId"] }, { type: i6.LoadingIndicatorComponent, selector: "bb-loading-indicator-ui", inputs: ["text", "loaderSize", "showDelay", "hasBackground", "inline"] }], directives: [{ type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i8.ButtonDirective, selector: "button[bbButton]", inputs: ["type", "color", "buttonSize", "block", "circle"] }, { type: i9.TooltipDirective, selector: "[bbTooltip]", inputs: ["bbTooltip", "triggers"] }, { type: i10.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i10.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i10.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i10.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i10.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i10.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i7.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: InputInlineEditComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-input-inline-edit-ui',
                    templateUrl: './input-inline-edit.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => InputInlineEditComponent),
                            multi: true,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.DeprecationsService }, { type: i2.DomAttributesService }]; }, propDecorators: { state: [{
                type: Input
            }], stateChange: [{
                type: Output
            }], canEdit: [{
                type: Input
            }], hasLoadingState: [{
                type: Input
            }], inputInlineTemplate: [{
                type: Input
            }], inputText: [{
                type: Input
            }], maxLength: [{
                type: Input
            }], minLength: [{
                type: Input
            }], maxValue: [{
                type: Input
            }], minValue: [{
                type: Input
            }], autofocus: [{
                type: Input
            }], cancel: [{
                type: Output
            }], accept: [{
                type: Output
            }], ariaLabelAccept: [{
                type: Input
            }], ariaLabelCancel: [{
                type: Input
            }], ariaLabelEdit: [{
                type: Input
            }], tooltipAccept: [{
                type: Input
            }], tooltipCancel: [{
                type: Input
            }], tooltipEdit: [{
                type: Input
            }], autocomplete: [{
                type: Input
            }], pattern: [{
                type: Input
            }], hint: [{
                type: Input
            }], onKeydownHandler: [{
                type: HostListener,
                args: ['document:keydown.escape', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtaW5saW5lLWVkaXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvaW5wdXQtaW5saW5lLWVkaXQvaW5wdXQtaW5saW5lLWVkaXQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvaW5wdXQtaW5saW5lLWVkaXQvaW5wdXQtaW5saW5lLWVkaXQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUV2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixZQUFZLEVBQ1osS0FBSyxFQUNMLE1BQU0sR0FFUCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUl2RixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUVuRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsZUFBZSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDL0UsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7Ozs7Ozs7Ozs7QUFFbkQsTUFBTSxDQUFOLElBQVksb0JBSVg7QUFKRCxXQUFZLG9CQUFvQjtJQUM5QiwrREFBSSxDQUFBO0lBQ0oscUVBQU8sQ0FBQTtJQUNQLHFFQUFPLENBQUE7QUFDVCxDQUFDLEVBSlcsb0JBQW9CLEtBQXBCLG9CQUFvQixRQUkvQjtBQUVEOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBYUgsTUFBTSxPQUFPLHdCQUF5QixTQUFRLGtCQUFrQjtJQXFJOUQsWUFDRSxFQUFxQixFQUNyQixtQkFBd0MsRUFDdkIsb0JBQTBDO1FBRTNELEtBQUssQ0FBQyxFQUFFLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztRQUZkLHlCQUFvQixHQUFwQixvQkFBb0Is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QVk7c0JBQXBCLEtBQUs7Z0JBS0csT0FBTztzQkFBZixLQUFLO2dCQUtHLElBQUk7c0JBQVosS0FBSztnQkEyRytDLGdCQUFnQjtzQkFBcEUsWUFBWTt1QkFBQyx5QkFBeUIsRUFBRSxDQUFDLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyQ29udGVudEluaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgVGVtcGxhdGVSZWYsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgTkdfVkFMVUVfQUNDRVNTT1IsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IERlcHJlY2F0aW9uc1NlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvZm91bmRhdGlvbi1hbmcvZnV0dXJlJztcblxuaW1wb3J0IHsgSW5wdXRCYXNlQ29tcG9uZW50IH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9iYXNlLWNsYXNzZXMnO1xuaW1wb3J0IHsgRG9tQXR0cmlidXRlc1NlcnZpY2UgfSBmcm9tICdAYmFja2Jhc2UvdWktYW5nL3NlcnZpY2VzJztcbmltcG9ydCB7IGRlZmF1bHRBcmlhTGFiZWxzLCBkZWZhdWx0VG9vbHRpcHMgfSBmcm9tICcuL2lucHV0LWlubGluZS1lZGl0Lm1vZGVsJztcbmltcG9ydCB7IGlkTGlzdEF0dHIgfSBmcm9tICdAYmFja2Jhc2UvdWktYW5nL3V0aWwnO1xuXG5leHBvcnQgZW51bSBJbnB1dElubGluZUVkaXRTdGF0ZSB7XG4gIElETEUsXG4gIExPQURJTkcsXG4gIEVESVRJTkcsXG59XG5cbi8qKlxuICogQG5hbWUgSW5wdXRJbmxpbmVFZGl0Q29tcG9uZW50XG4gKlxuICogQGExMXkgQ3VycmVudCBjb21wb25lbnQgcHJvdmlkZSBvcHRpb24gdG8gcGFzcyBuZWVkZWQgYWNjZXNzaWJpbGl0eVxuICogYXR0cmlidXRlcy4gWW91IG5lZWQgdG8gdGFrZSBjYXJlIG9mIHByb3BlcnRpZXMgdGhhdCBhcmUgcmVxdWlyZWQgaW4geW91ciBjYXNlIDpcbiAqICAtIHJvbGVcbiAqICAtIGFyaWEtYWN0aXZlZGVzY2VuZGFudFxuICogIC0gYXJpYS1kZXNjcmliZWRieVxuICogIC0gYXJpYS1leHBhbmRlZFxuICogIC0gYXJpYS1pbnZhbGlkXG4gKiAgLSBhcmlhLWxhYmVsXG4gKiAgLSBhcmlhLWxhYmVsbGVkYnlcbiAqICAtIGFyaWEtb3duc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29tcG9uZW50IHRoYXQgZW5hYmxlcyBpbmxpbmUgaW5wdXQgZWRpdGluZy5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItaW5wdXQtaW5saW5lLWVkaXQtdWknLFxuICB0ZW1wbGF0ZVVybDogJy4vaW5wdXQtaW5saW5lLWVkaXQuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBJbnB1dElubGluZUVkaXRDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgSW5wdXRJbmxpbmVFZGl0Q29tcG9uZW50IGV4dGVuZHMgSW5wdXRCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJDb250ZW50SW5pdCB7XG4gIHByaXZhdGUgX3N0YXRlID0gSW5wdXRJbmxpbmVFZGl0U3RhdGUuSURMRTtcbiAgcHJpdmF0ZSBfaW5wdXRUZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFN0YXRlIGZvciBpbmxpbmUgZWRpdFxuICAgKi9cbiAgQElucHV0KCkgc2V0IHN0YXRlKHZhbHVlOiBJbnB1dElubGluZUVkaXRTdGF0ZSkge1xuICAgIHRoaXMuX3N0YXRlID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy52Rm9ybSAmJiB2YWx1ZSA9PT0gSW5wdXRJbmxpbmVFZGl0U3RhdGUuSURMRSkge1xuICAgICAgdGhpcy52Rm9ybS5jb250cm9scy5pbnB1dElubGluZS5zZXRWYWx1ZSh0aGlzLl9pbnB1dFRleHQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRW1pdCBvbiBlZGl0IHN0YXRlIGNoYW5nZXNcbiAgICovXG4gIEBPdXRwdXQoKSBzdGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8SW5wdXRJbmxpbmVFZGl0U3RhdGU+KCk7XG4gIC8qKlxuICAgKiBGbGFnIHJlcHJlc2VudHMgdmlzaWJpbGl0eSBvZiBlZGl0IGJ1dHRvblxuICAgKlxuICAgKiBAZGVmYXVsdDogdHJ1ZVxuICAgKi9cbiAgQElucHV0KCkgY2FuRWRpdCA9IHRydWU7XG4gIC8qKlxuICAgKiBBcHBsaWVzIGFkZGl0aW9uYWwgbG9hZGluZyBzdGF0ZSBmb3IgZWRpdCBmbG93XG4gICAqXG4gICAqIEBkZWZhdWx0OiBmYWxzZVxuICAgKi9cbiAgQElucHV0KCkgaGFzTG9hZGluZ1N0YXRlID0gZmFsc2U7XG4gIC8qKlxuICAgKiBUZW1wbGF0ZSBmb3IgY3VzdG9tIGFuZCBzdHlsaW5nIHRleHRcbiAgICovXG4gIEBJbnB1dCgpIGlucHV0SW5saW5lVGVtcGxhdGU6IFRlbXBsYXRlUmVmPElucHV0SW5saW5lRWRpdENvbXBvbmVudD4gfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBzdHJpbmcgZm9yIGVkaXRpbmdcbiAgICovXG4gIEBJbnB1dCgpIHNldCBpbnB1dFRleHQodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2lucHV0VGV4dCA9IHZhbHVlO1xuXG4gICAgdGhpcy52Rm9ybT8uY29udHJvbHMuaW5wdXRJbmxpbmUuc2V0VmFsdWUodGhpcy5faW5wdXRUZXh0KTtcbiAgfVxuICBnZXQgaW5wdXRUZXh0KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VGV4dDtcbiAgfVxuICAvKipcbiAgICogVGhlIG1heExlbmd0aCBmb3IgdGhlIHRleHQgaW5wdXQuXG4gICAqL1xuICBASW5wdXQoKSBtYXhMZW5ndGggPSBJbmZpbml0eTtcblxuICAvKipcbiAgICogVGhlIG1pbkxlbmd0aCBmb3IgdGhlIHRleHQgaW5wdXQuXG4gICAqL1xuICBASW5wdXQoKSBtaW5MZW5ndGggPSAwO1xuXG4gIC8qKlxuICAgKiAgVGhlIG1heCBudW1iZXIgdmFsdWUgb2YgdGhlIHRleHQgaW5wdXRcbiAgICovXG4gIEBJbnB1dCgpIG1heFZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqICBUaGUgbWluIG51bWJlciB2YWx1ZSBvZiB0aGUgdGV4dCBpbnB1dFxuICAgKi9cbiAgQElucHV0KCkgbWluVmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgdGV4dCBpbnB1dCBzaG91bGQgYmUgYXV0by1mb2N1c2VkIHdoZW4gc2hvd24uXG4gICAqL1xuICBASW5wdXQoKSBhdXRvZm9jdXMgPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIGV2ZW50IHRoYXQncyBmaXJlZCBhZnRlciBvbiBDYW5jZWwuXG4gICAqL1xuICBAT3V0cHV0KCkgY2FuY2VsID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICAvKipcbiAgICogVGhlIGV2ZW50IHRoYXQncyBmaXJlZCBhZnRlciBvbiBBY2NlcHQuXG4gICAqL1xuICBAT3V0cHV0KCkgYWNjZXB0ID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG5cbiAgLyoqXG4gICAqIHN0cmluZyBmb3IgYXJpYSBsYWJlbCBvbiBBY2NlcHQgYnV0dG9uXG4gICAqL1xuICBASW5wdXQoKSBhcmlhTGFiZWxBY2NlcHQgPSBkZWZhdWx0QXJpYUxhYmVscy5hY2NlcHQ7XG5cbiAgLyoqXG4gICAqIHN0cmluZyBmb3IgYXJpYSBsYWJlbCBvbiBDYW5jZWwgYnV0dG9uXG4gICAqL1xuICBASW5wdXQoKSBhcmlhTGFiZWxDYW5jZWwgPSBkZWZhdWx0QXJpYUxhYmVscy5jYW5jZWw7XG5cbiAgLyoqXG4gICAqIHN0cmluZyBmb3IgYXJpYSBsYWJlbCBvbiBFZGl0IGJ1dHRvblxuICAgKi9cbiAgQElucHV0KCkgYXJpYUxhYmVsRWRpdCA9IGRlZmF1bHRBcmlhTGFiZWxzLmVkaXQ7XG5cbiAgLyoqXG4gICAqIHN0cmluZyBmb3IgdG9vbHRpcCBvbiBBY2NlcHQgYnV0dG9uXG4gICAqL1xuICBASW5wdXQoKSB0b29sdGlwQWNjZXB0ID0gZGVmYXVsdFRvb2x0aXBzLmFjY2VwdDtcblxuICAvKipcbiAgICogc3RyaW5nIGZvciB0b29sdGlwIG9uIENhbmNlbCBidXR0b25cbiAgICovXG4gIEBJbnB1dCgpIHRvb2x0aXBDYW5jZWwgPSBkZWZhdWx0VG9vbHRpcHMuY2FuY2VsO1xuXG4gIC8qKlxuICAgKiBzdHJpbmcgZm9yIHRvb2x0aXAgb24gRWRpdCBidXR0b25cbiAgICovXG4gIEBJbnB1dCgpIHRvb2x0aXBFZGl0ID0gZGVmYXVsdFRvb2x0aXBzLmVkaXQ7XG5cbiAgLyoqXG4gICAqIFRoZSBhdXRvY29tcGxldGUgdmFsdWUgb2YgdGhlIGVuY2xvc2VkIGlucHV0IGNvbnRyb2wuXG4gICAqL1xuICBASW5wdXQoKSBhdXRvY29tcGxldGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgdGV4dCBpbnB1dCBzaG91bGQgZm9sbG93IGEgcGF0dGVybi5cbiAgICovXG4gIEBJbnB1dCgpIHBhdHRlcm46IFJlZ0V4cCB8IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogSGludCB0byBiZSBkaXNwbGF5ZWQgaW4gZWRpdCBtb2RlXG4gICAqL1xuICBASW5wdXQoKSBoaW50OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgdkZvcm06IEZvcm1Hcm91cCB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSB2YWxpZGF0aW9uTWVzc2FnZXNJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciB1c2UgaW4gdGVtcGxhdGVcbiAgICovXG4gIHB1YmxpYyBpZExpc3RBdHRyID0gaWRMaXN0QXR0cjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgZGVwcmVjYXRpb25zU2VydmljZTogRGVwcmVjYXRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRvbUF0dHJpYnV0ZXNTZXJ2aWNlOiBEb21BdHRyaWJ1dGVzU2VydmljZSxcbiAgKSB7XG4gICAgc3VwZXIoY2QsIGRlcHJlY2F0aW9uc1NlcnZpY2UpO1xuICAgIHRoaXMudmFsaWRhdGlvbk1lc3NhZ2VzSWQgPSB0aGlzLmRvbUF0dHJpYnV0ZXNTZXJ2aWNlLmdlbmVyYXRlSWQoKTtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICBjb25zdCB2YWxpZGF0b3JzID0gW1ZhbGlkYXRvcnMubWF4TGVuZ3RoKHRoaXMubWF4TGVuZ3RoKSwgVmFsaWRhdG9ycy5taW5MZW5ndGgodGhpcy5taW5MZW5ndGgpXTtcbiAgICBpZiAodGhpcy5yZXF1aXJlZCkge1xuICAgICAgdmFsaWRhdG9ycy5wdXNoKFZhbGlkYXRvcnMucmVxdWlyZWQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhdHRlcm4pIHtcbiAgICAgIHZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JzLnBhdHRlcm4odGhpcy5wYXR0ZXJuKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWluVmFsdWUpIHtcbiAgICAgIHZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JzLm1pbih0aGlzLm1pblZhbHVlKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWF4VmFsdWUpIHtcbiAgICAgIHZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JzLm1heCh0aGlzLm1heFZhbHVlKSk7XG4gICAgfVxuXG4gICAgdGhpcy52Rm9ybSA9IG5ldyBGb3JtR3JvdXAoe1xuICAgICAgaW5wdXRJbmxpbmU6IG5ldyBGb3JtQ29udHJvbCh0aGlzLl9pbnB1dFRleHQsIFZhbGlkYXRvcnMuY29tcG9zZSh2YWxpZGF0b3JzKSksXG4gICAgfSk7XG4gIH1cblxuICB3cml0ZVZhbHVlKGlucHV0VmFsdWU6IE9iamVjdCB8IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIGlucHV0VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLl9pbnB1dFRleHQgPSBpbnB1dFZhbHVlO1xuICAgIH1cbiAgICBzdXBlci53cml0ZVZhbHVlKGlucHV0VmFsdWUpO1xuICB9XG5cbiAgb25FZGl0KGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB0aGlzLnVwZGF0ZVN0YXRlKElucHV0SW5saW5lRWRpdFN0YXRlLkVESVRJTkcpO1xuICB9XG5cbiAgb25DYW5jZWwoZXZlbnQ/OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICB0aGlzLnZGb3JtPy5jb250cm9scy5pbnB1dElubGluZS5zZXRWYWx1ZSh0aGlzLl9pbnB1dFRleHQpO1xuICAgIHRoaXMudXBkYXRlU3RhdGUoSW5wdXRJbmxpbmVFZGl0U3RhdGUuSURMRSk7XG4gICAgdGhpcy5jYW5jZWwuZW1pdCgpO1xuICB9XG5cbiAgZ2V0IGlzTG9hZGluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGUgPT09IElucHV0SW5saW5lRWRpdFN0YXRlLkxPQURJTkc7XG4gIH1cblxuICBnZXQgZWRpdE1vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXRlID09PSBJbnB1dElubGluZUVkaXRTdGF0ZS5FRElUSU5HO1xuICB9XG5cbiAgZ2V0IGlzSWRsZU1vZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXRlID09PSBJbnB1dElubGluZUVkaXRTdGF0ZS5JRExFO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXRzIHRoZSB1cGRhdGVkIHZhbHVlIGZyb20gaW5wdXRcbiAgICpcbiAgICogSWYgdGhlIHtAbGluayBJbnB1dElubGluZUVkaXRDb21wb25lbnQuaGFzTG9hZGluZ1N0YXRlIH0gc2V0IHRvIHRydWUgLT4gdGhlIHN0YXRlIGlzIG5vdCBjaGFuZ2VkLFxuICAgKiBhcyBjb21wb25lbnQgc3RhdGUgc2hvdWxkIGJlIHVwZGF0ZWQgZnJvbSBvdXRzaWRlLCBvdGhlcndpc2UgdGhlIHZhbHVlIHdpbGwgYmUgdXBkYXRlZCB3aXRoIHRoZVxuICAgKiBuZXcgb25lIGFuZCBzdGF0ZSB3aWxsIGJlIHN3aXRjaGVkIHRvIGBJRExFYFxuICAgKlxuICAgKi9cbiAgb25BY2NlcHQoKTogdm9pZCB7XG4gICAgY29uc3QgbmV3U3RyaW5nID0gdGhpcy52Rm9ybSA/IHRoaXMudkZvcm0uY29udHJvbHMuaW5wdXRJbmxpbmUudmFsdWUgOiAnJztcblxuICAgIGlmICghdGhpcy5oYXNMb2FkaW5nU3RhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdGUoSW5wdXRJbmxpbmVFZGl0U3RhdGUuSURMRSk7XG4gICAgICB0aGlzLl9pbnB1dFRleHQgPSBuZXdTdHJpbmc7XG4gICAgICB0aGlzLm9uVmFsdWVDaGFuZ2UobmV3U3RyaW5nKTtcbiAgICB9XG5cbiAgICB0aGlzLmFjY2VwdC5lbWl0KG5ld1N0cmluZyk7XG4gIH1cblxuICBoYXNFcnJvcih0eXBlPzogc3RyaW5nKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZmllbGRDb250cm9sID0gdGhpcy52Rm9ybSA/IHRoaXMudkZvcm0uY29udHJvbHMuaW5wdXRJbmxpbmUgOiBudWxsO1xuICAgIGlmICghZmllbGRDb250cm9sIHx8ICFmaWVsZENvbnRyb2wuZXJyb3JzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlID8gZmllbGRDb250cm9sLmVycm9yc1t0eXBlXSA6IGZpZWxkQ29udHJvbC5lcnJvcnM7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDprZXlkb3duLmVzY2FwZScsIFsnJGV2ZW50J10pIG9uS2V5ZG93bkhhbmRsZXIoZXZ0OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZWRpdE1vZGUpIHtcbiAgICAgIHRoaXMub25DYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXRlKHZhbHVlOiBJbnB1dElubGluZUVkaXRTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMuX3N0YXRlID0gdmFsdWU7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZS5lbWl0KHZhbHVlKTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cImJiLWlucHV0LWlubGluZS1lZGl0LXVpXCI+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc0lkbGVNb2RlOyBlbHNlIGVkaXRpbmdTdGF0ZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJiYi1zdGFjayBiYi1pbnB1dC1pbmxpbmUtZWRpdC11aV9faWRsZS13cmFwcGVyXCI+XG4gICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiaW5wdXRJbmxpbmVUZW1wbGF0ZSA/IGlucHV0SW5saW5lVGVtcGxhdGUgOiBkZWZhdWx0SW5saW5lVGVtcGxhdGU7IGNvbnRleHQ6IHRoaXNcIlxuICAgICAgPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8bmctdGVtcGxhdGUgI2RlZmF1bHRJbmxpbmVUZW1wbGF0ZT5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJiYi1zdGFja19faXRlbSBiYi1zdGFja19faXRlbS0tc3BhY2luZy1ub25lXCIgZGF0YS1yb2xlPVwiaW5saW5lLWVkaXQtdGV4dFwiPlxuICAgICAgICAgIHt7IGlucHV0VGV4dCB9fVxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgICA8YnV0dG9uXG4gICAgICAgICpuZ0lmPVwiY2FuRWRpdFwiXG4gICAgICAgIGJiQnV0dG9uXG4gICAgICAgIGNsYXNzPVwiYmItc3RhY2tfX2l0ZW0gYmItc3RhY2tfX2l0ZW0tLW5vLXNocmlua1wiXG4gICAgICAgIChjbGljayk9XCJvbkVkaXQoJGV2ZW50KVwiXG4gICAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwiYXJpYURlc2NyaWJlZGJ5XCJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJhcmlhTGFiZWxFZGl0XCJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbGxlZGJ5XT1cImFyaWFMYWJlbGxlZGJ5XCJcbiAgICAgICAgY29sb3I9XCJsaW5rLWRhcmtcIlxuICAgICAgICBbYXR0ci5kYXRhLXJvbGVdPVwiJ2lubGluZS1lZGl0LWJ0bidcIlxuICAgICAgICBbY2lyY2xlXT1cInRydWVcIlxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgYnV0dG9uU2l6ZT1cInNtXCJcbiAgICAgICAgW2JiVG9vbHRpcF09XCJ0b29sdGlwRWRpdFwiXG4gICAgICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICAgICB0cmlnZ2Vycz1cImhvdmVyIGZvY3VzXCJcbiAgICAgICAgcGxhY2VtZW50PVwiYXV0b1wiXG4gICAgICA+XG4gICAgICAgIDxiYi1pY29uLXVpIGNsYXNzPVwiYmItdGV4dC1zdXBwb3J0XCIgbmFtZT1cImVkaXRcIj48L2JiLWljb24tdWk+XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9uZy1jb250YWluZXI+XG4gIDxuZy10ZW1wbGF0ZSAjZWRpdGluZ1N0YXRlPlxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cInZGb3JtXCIgKG5nU3VibWl0KT1cIiFoYXNFcnJvcigpICYmIG9uQWNjZXB0KClcIj5cbiAgICAgICAgPGJiLWlucHV0LXRleHQtdWlcbiAgICAgICAgICBbYXR0ci5kYXRhLXJvbGVdPVwiJ2lubGluZS1lZGl0LWlucHV0J1wiXG4gICAgICAgICAgbGFiZWw9XCJ7eyBsYWJlbCB9fVwiXG4gICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiaW5wdXRJbmxpbmVcIlxuICAgICAgICAgIFthdHRyLmFyaWEtYXV0b2NvbXBsZXRlXT1cImFyaWFBdXRvY29tcGxldGVcIlxuICAgICAgICAgIFthdHRyLmFyaWEtY29udHJvbHNdPVwiYXJpYUNvbnRyb2xzXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsbGVkYnldPVwiYXJpYUxhYmVsbGVkYnlcIlxuICAgICAgICAgIFthdHRyLmFyaWEtZGVzY3JpYmVkYnldPVwiaWRMaXN0QXR0cihhcmlhRGVzY3JpYmVkYnksIHZhbGlkYXRpb25NZXNzYWdlc0lkKVwiXG4gICAgICAgICAgW2F0dHIuYXJpYS1leHBhbmRlZF09XCJhcmlhRXhwYW5kZWRcIlxuICAgICAgICAgIFthdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudF09XCJhcmlhQWN0aXZlZGVzY2VuZGFudFwiXG4gICAgICAgICAgW2F0dHIucm9sZV09XCJyb2xlXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWludmFsaWRdPVwiYXJpYUludmFsaWRcIlxuICAgICAgICAgIFthdHRyLmFyaWEtb3duc109XCJhcmlhT3duc1wiXG4gICAgICAgICAgW3JlcXVpcmVkXT1cInJlcXVpcmVkXCJcbiAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHlcIlxuICAgICAgICAgIFttYXhMZW5ndGhdPVwibWF4TGVuZ3RoXCJcbiAgICAgICAgICBbbWluTGVuZ3RoXT1cIm1pbkxlbmd0aFwiXG4gICAgICAgICAgW2F1dG9mb2N1c109XCJ0cnVlXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJpbnB1dENsYXNzTmFtZVwiXG4gICAgICAgICAgW2F0dHIuc2l6ZV09XCJzaXplXCJcbiAgICAgICAgICAoY2xpY2spPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCJcbiAgICAgICAgICAoYmx1cik9XCJvbkJsdXIoJGV2ZW50KVwiXG4gICAgICAgICAgaWQ9XCJ7eyBpZCB9fVwiXG4gICAgICAgICAgW2F1dG9jb21wbGV0ZV09XCJhdXRvY29tcGxldGVcIlxuICAgICAgICA+XG4gICAgICAgIDwvYmItaW5wdXQtdGV4dC11aT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJiLXN0YWNrIGJiLXN0YWNrLS1hbGlnbi10b3AgYmItc3RhY2stLWRlbnNpdHktbWRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tfX2l0ZW0gYmItc3RhY2tfX2l0ZW0tLWZpbGxcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYi1zdWJ0aXRsZSBiYi10ZXh0LXN1cHBvcnRcIiBkYXRhLXJvbGU9XCJpbmxpbmUtZWRpdC1oaW50XCIgKm5nSWY9XCJoaW50ICYmICFoYXNFcnJvcigpXCI+XG4gICAgICAgICAgICAgIHt7IGhpbnQgfX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aSBbc2hvd0Vycm9yc109XCJoYXNFcnJvcigpXCIgW2lkXT1cInZhbGlkYXRpb25NZXNzYWdlc0lkXCI+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAqbmdJZj1cImhhc0Vycm9yKCdtYXhsZW5ndGgnKVwiXG4gICAgICAgICAgICAgICAgaTE4bj1cIk1heCBMZW5ndGggRXJyb3J8U3RyaW5nIGlzIG1vcmUgdGhhbiAnbWF4TGVuZ3RoJyBjaGFyYWN0ZXJzIEBAaW5wdXQtaW5saW5lLWVkaXQtdWkubWF4TGVuZ3RoRXJyb3JcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgSW5zZXJ0IG1heCB7eyBtYXhMZW5ndGggfX0gY2hhcmFjdGVyc1xuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICpuZ0lmPVwiaGFzRXJyb3IoJ21pbmxlbmd0aCcpXCJcbiAgICAgICAgICAgICAgICBpMThuPVwiTWluIExlbmd0aCBFcnJvcnxTdHJpbmcgaXMgbGVzcyB0aGFuICdtaW5MZW5ndGgnIGNoYXJhY3RlcnMgQEBpbnB1dC1pbmxpbmUtZWRpdC11aS5taW5MZW5ndGhFcnJvclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBJbnNlcnQgbWluIHt7IG1pbkxlbmd0aCB9fSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgKm5nSWY9XCJoYXNFcnJvcignbWluJylcIlxuICAgICAgICAgICAgICAgIGkxOG49XCJNaW4gdmFsdWUgRXJyb3J8TnVtYmVyIGlzIGxlc3MgdGhhbiAnbWluVmFsdWUnIEBAaW5wdXQtaW5saW5lLWVkaXQtdWkubWluVmFsdWVFcnJvclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBJbnNlcnQgbWluIHt7IG1pblZhbHVlIH19XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgKm5nSWY9XCJoYXNFcnJvcignbWF4JylcIlxuICAgICAgICAgICAgICAgIGkxOG49XCJNYXggdmFsdWUgRXJyb3J8TnVtYmVyIGlzIG1vcmUgdGhhbiAnbWF4VmFsdWUnIEBAaW5wdXQtaW5saW5lLWVkaXQtdWkubWF4VmFsdWVFcnJvclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBJbnNlcnQgbWF4IHt7IG1heFZhbHVlIH19XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgKm5nSWY9XCJoYXNFcnJvcigncGF0dGVybicpXCJcbiAgICAgICAgICAgICAgICBpMThuPVwiRm9ybWF0IHZhbHVlIGVycm9yfEZvcm1hdCB2YWx1ZSBpcyBpbnZhbGlkIEBAaW5wdXQtaW5saW5lLWVkaXQtdWkuZm9ybWF0VmFsdWVFcnJvclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBJbnB1dCB2YWx1ZSBwcm92aWRlZCBpcyBpbnZhbGlkXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgKm5nSWY9XCJoYXNFcnJvcigncmVxdWlyZWQnKVwiXG4gICAgICAgICAgICAgICAgaTE4bj1cIlJlcXVpcmVkIGVycm9yfFN0cmluZyBpcyByZXF1aXJlZCBAQGlucHV0LWlubGluZS1lZGl0LXVpLnJlcXVpcmVkRXJyb3JcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRmllbGQgaXMgcmVxdWlyZWRcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2JiLWlucHV0LXZhbGlkYXRpb24tbWVzc2FnZS11aT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmItc3RhY2tfX2l0ZW0gYmItc3RhY2tfX2l0ZW0tLXB1c2gtcmlnaHQgZmxleC1zaHJpbmstMFwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBiYkJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwicmVzZXRcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwib25DYW5jZWwoJGV2ZW50KVwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiYmItc3RhY2tfX2l0ZW0gYmItc3RhY2tfX2l0ZW0tLXB1c2gtcmlnaHRcIlxuICAgICAgICAgICAgICBjb2xvcj1cImRhbmdlclwiXG4gICAgICAgICAgICAgIFthdHRyLmRhdGEtcm9sZV09XCInaW5saW5lLWVkaXQtY2FuY2VsJ1wiXG4gICAgICAgICAgICAgIFtjaXJjbGVdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiYXJpYUxhYmVsQ2FuY2VsXCJcbiAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgW2JiVG9vbHRpcF09XCJ0b29sdGlwQ2FuY2VsXCJcbiAgICAgICAgICAgICAgY29udGFpbmVyPVwiYm9keVwiXG4gICAgICAgICAgICAgIHRyaWdnZXJzPVwiaG92ZXIgZm9jdXNcIlxuICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJhdXRvXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGJiLWljb24tdWkgbmFtZT1cInRpbWVzXCI+PC9iYi1pY29uLXVpPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGJiQnV0dG9uXG4gICAgICAgICAgICAgIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxuICAgICAgICAgICAgICBjb2xvcj1cInN1Y2Nlc3NcIlxuICAgICAgICAgICAgICBbYXR0ci5kYXRhLXJvbGVdPVwiJ2lubGluZS1lZGl0LWFjY2VwdCdcIlxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgW2NpcmNsZV09XCJ0cnVlXCJcbiAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJhcmlhTGFiZWxBY2NlcHRcIlxuICAgICAgICAgICAgICBidXR0b25TaXplPVwic21cIlxuICAgICAgICAgICAgICBjbGFzcz1cImJiLWxvYWQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgW2JiVG9vbHRpcF09XCJ0b29sdGlwQWNjZXB0XCJcbiAgICAgICAgICAgICAgY29udGFpbmVyPVwiYm9keVwiXG4gICAgICAgICAgICAgIHRyaWdnZXJzPVwiaG92ZXIgZm9jdXNcIlxuICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJhdXRvXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGJiLWxvYWRpbmctaW5kaWNhdG9yLXVpXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJpc0xvYWRpbmc7IGVsc2UgY2hlY2tJY29uXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImJiLWxvYWQtYnV0dG9uX19sb2FkaW5nLWluZGljYXRvclwiXG4gICAgICAgICAgICAgICAgbG9hZGVyU2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgPjwvYmItbG9hZGluZy1pbmRpY2F0b3ItdWk+XG4gICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjY2hlY2tJY29uPlxuICAgICAgICAgICAgICAgIDxiYi1pY29uLXVpIG5hbWU9XCJjaGVja1wiPjwvYmItaWNvbi11aT5cbiAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZm9ybT5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvZGl2PlxuIl19