import { ChangeDetectionStrategy, Component, forwardRef, Input, ViewChild, } from '@angular/core';
import { InputBaseComponent } from '@backbase/ui-ang/base-classes';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { NgSelectComponent } from '@ng-select/ng-select';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/ui-ang/services";
import * as i2 from "@backbase/foundation-ang/future";
import * as i3 from "@ng-select/ng-select";
import * as i4 from "@backbase/ui-ang/search-box";
import * as i5 from "@backbase/ui-ang/icon";
import * as i6 from "@angular/common";
import * as i7 from "@angular/forms";
import * as i8 from "@backbase/ui-ang/focus";
import * as i9 from "./country-flag-pipe";
export class InputPhoneComponent extends InputBaseComponent {
    constructor(domAttrService, elem, renderer2, cd, deprecationsService) {
        super(cd, deprecationsService);
        this.domAttrService = domAttrService;
        this.elem = elem;
        this.renderer2 = renderer2;
        this.cd = cd;
        this.deprecationsService = deprecationsService;
        /**
         * The placeholder for the phone input. Defaults to an empty string;
         */
        this.placeholder = '';
        /**
         * Whether the phone input is readonly.
         */
        this.readonly = false;
        /**
         * Aria label for the phone input
         */
        this.ariaLabel = 'Phone Input';
        /**
         * Allow to clear selected value.
         */
        this.clearable = false;
        /**
         * Allow to search for value.
         */
        this.searchable = false;
        /**
         * Enable/Disable Country code dropdown
         */
        this.enableCountryCode = false;
        this.resultCount = 0;
        this._statusId = this.domAttrService.generateId();
    }
    get statusId() {
        return this._statusId;
    }
    constructCountryData() {
        if (this.enableCountryCode && this.countryList) {
            this.countryDropdowndisabled = this.countryList.length === 1;
            if (!this.countryDropdowndisabled) {
                const defaultCountry = this.countryList.find((city) => city.isoCode === this.defaultCountryIsoCode);
                this.defaultCountryCode = defaultCountry === null || defaultCountry === void 0 ? void 0 : defaultCountry.countryCode;
                this.defaultCountryName = defaultCountry === null || defaultCountry === void 0 ? void 0 : defaultCountry.countryName;
            }
            else {
                this.defaultCountryCode = this.countryList[0].countryCode;
                this.defaultCountryName = this.countryList[0].countryName;
            }
        }
    }
    ngAfterViewInit() {
        if (!this.ariaLabel) {
            this.domAttrService.moveAriaAttributes(this.elem.nativeElement, this.inputEl && this.inputEl.nativeElement, this.renderer2);
        }
        this.constructCountryData();
    }
    onChanges(event) {
        this.defaultCountryName = event.countryName;
    }
    onClose() {
        if (this.ngSelect && !this.ngSelect.isOpen) {
            this.ngSelect.constructor.prototype.focus.call(this.ngSelect);
        }
    }
    onClear() {
        this.onFilterChange(undefined);
    }
    onFilterChange(query) {
        if (this.ngSelect) {
            this.ngSelect.filter(query || '');
        }
        this.updateResultCount();
    }
    updateResultCount() {
        var _a;
        this.resultCount = ((_a = this.ngSelect) === null || _a === void 0 ? void 0 : _a.itemsList.filteredItems.filter(({ children }) => !children).length) || 0;
    }
    searchFunc(term, item) {
        term = term.toLocaleLowerCase();
        return (item.countryCode.toLocaleLowerCase().indexOf(term) > -1 ||
            item.countryName.toLocaleLowerCase().indexOf(term) > -1 ||
            item.isoCode.toLocaleLowerCase().indexOf(term) > -1);
    }
}
InputPhoneComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: InputPhoneComponent, deps: [{ token: i1.DomAttributesService }, { token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i0.ChangeDetectorRef }, { token: i2.DeprecationsService }], target: i0.ɵɵFactoryTarget.Component });
InputPhoneComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: InputPhoneComponent, selector: "bb-input-phone-ui", inputs: { placeholder: "placeholder", maxLength: "maxLength", minLength: "minLength", readonly: "readonly", ariaLabel: "ariaLabel", autocomplete: "autocomplete", countryList: "countryList", dropdownPosition: "dropdownPosition", clearable: "clearable", searchable: "searchable", defaultCountryIsoCode: "defaultCountryIsoCode", enableCountryCode: "enableCountryCode" }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => InputPhoneComponent),
            multi: true,
        },
    ], viewQueries: [{ propertyName: "inputEl", first: true, predicate: ["inputPhone"], descendants: true }, { propertyName: "ngSelect", first: true, predicate: NgSelectComponent, descendants: true }], usesInheritance: true, ngImport: i0, template: "<label *ngIf=\"label\" for=\"{{ id }}\">{{ label }}</label>\n<div class=\"bb-phone\">\n  <ng-select\n    #countryCodeSelector\n    *ngIf=\"enableCountryCode\"\n    (change)=\"onChanges($event)\"\n    (close)=\"onClose()\"\n    [dropdownPosition]=\"dropdownPosition\"\n    [clearable]=\"clearable\"\n    [searchable]=\"searchable\"\n    [items]=\"countryList\"\n    [(ngModel)]=\"defaultCountryCode\"\n    bindLabel=\"countryCode\"\n    bindValue=\"countryCode\"\n    [searchFn]=\"searchFunc\"\n    [readonly]=\"countryDropdowndisabled\"\n    class=\"bb-phone-country-code\"\n    [attr.aria-label]=\"defaultCountryCode + ' ' + defaultCountryName\"\n  >\n    <ng-template ng-label-tmp let-item=\"item\">\n      <i class=\"flag-icon\" [ngClass]=\"item.isoCode | countryFlag\" aria-hidden=\"true\"> </i>\n      {{ item.countryCode }}\n    </ng-template>\n    <ng-template ng-header-tmp>\n      <bb-search-box-ui\n        (clear)=\"onClear()\"\n        (valueChange)=\"onFilterChange($event)\"\n        [showSearch]=\"true\"\n        [showClear]=\"true\"\n        [autofocus]=\"true\"\n        placeholder=\"Search\"\n        i18n-placeholder=\"Search|Search placeholder@@bb-input-phone-ui.search.placeholder\"\n        [aria-controls]=\"statusId\"\n        [aria-expanded]=\"ngSelect?.isOpen\"\n        [aria-owns]=\"ngSelect?.isOpen ? ngSelect?.dropdownId : null\"\n        [aria-activedescendant]=\"ngSelect?.isOpen ? ngSelect?.itemsList?.markedItem?.htmlId : null\"\n      ></bb-search-box-ui>\n      <div\n        [id]=\"statusId\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n        class=\"sr-only\"\n        role=\"status\"\n        i18n=\"\n          Number of options|Screen reader description of the number of options after filtering the\n          combobox@@bb-input-phone-ui.options.count\"\n      >\n        {{ resultCount }} options\n      </div>\n    </ng-template>\n    <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\" let-search=\"searchTerm\">\n      <div class=\"dropdown-option-item\">\n        <i class=\"flag-icon col-md-1\" [ngClass]=\"item.isoCode | countryFlag\" aria-hidden=\"true\"> </i>\n        <span class=\"col-md-3 pr-0\">{{ item.countryCode }}</span\n        >&nbsp;\n        <span class=\"col-md-6 px-0 dropdown-option-item__country-name\">{{ item.countryName }}</span>\n        <bb-icon-ui\n          class=\"col-md-2 px-0\"\n          *ngIf=\"this.ngSelect?.itemsList.items[index].selected\"\n          name=\"check\"\n          color=\"color-neutral-dark\"\n        >\n        </bb-icon-ui>\n      </div>\n    </ng-template>\n  </ng-select>\n\n  <input\n    id=\"{{ id }}\"\n    #inputPhone\n    [attr.aria-autocomplete]=\"ariaAutocomplete\"\n    [attr.aria-controls]=\"ariaControls\"\n    [attr.aria-describedby]=\"ariaDescribedby ? ariaDescribedby : id + '-country-code'\"\n    [attr.aria-labelledby]=\"ariaLabelledby\"\n    [attr.aria-expanded]=\"ariaExpanded\"\n    [attr.aria-activedescendant]=\"ariaActivedescendant\"\n    [attr.role]=\"role\"\n    [attr.aria-invalid]=\"ariaInvalid\"\n    [attr.aria-owns]=\"ariaOwns\"\n    [attr.aria-label]=\"(!label && ariaLabel) || null\"\n    [ngModel]=\"value\"\n    (ngModelChange)=\"onValueChange($event)\"\n    (blur)=\"onBlur()\"\n    type=\"tel\"\n    class=\"form-control\"\n    (focus)=\"onFocus()\"\n    [disabled]=\"disabled\"\n    [readOnly]=\"readonly\"\n    [placeholder]=\"placeholder\"\n    [required]=\"required\"\n    [attr.maxlength]=\"maxLength\"\n    [attr.minlength]=\"minLength\"\n    [attr.size]=\"size\"\n    [bbFocus]=\"autofocus\"\n    [ngClass]=\"inputClassName\"\n    [attr.autocomplete]=\"autocomplete\"\n  />\n  <div id=\"{{ id }}-country-code\" class=\"sr-only\" *ngIf=\"!ariaDescribedby && countryDropdowndisabled\">\n    <span\n      i18n=\"\n        Selected Country is|Selected Country is group By label\n        @@bb-account-selector-ui.groupBy.selected-country-is.label\"\n      >Selected Country is </span\n    >{{ defaultCountryName }}\n    <span i18n=\"and code is|and code is group By label @@bb-account-selector-ui.groupBy.and-code-is.label\"\n      >and code is </span\n    >{{ defaultCountryCode }}\n  </div>\n</div>\n", components: [{ type: i3.NgSelectComponent, selector: "ng-select", inputs: ["markFirst", "dropdownPosition", "loading", "closeOnSelect", "hideSelected", "selectOnTab", "bufferAmount", "selectableGroup", "selectableGroupAsModel", "searchFn", "trackByFn", "clearOnBackspace", "labelForId", "inputAttrs", "readonly", "searchWhileComposing", "minTermLength", "editableSearchTerm", "keyDownFn", "multiple", "addTag", "searchable", "clearable", "isOpen", "items", "compareWith", "clearSearchOnAdd", "bindLabel", "placeholder", "notFoundText", "typeToSearchText", "addTagText", "loadingText", "clearAllText", "virtualScroll", "openOnEnter", "appendTo", "bindValue", "appearance", "maxSelectedItems", "groupBy", "groupValue", "tabIndex", "typeahead"], outputs: ["blur", "focus", "change", "open", "close", "search", "clear", "add", "remove", "scroll", "scrollToEnd"] }, { type: i4.SearchBoxComponent, selector: "bb-search-box-ui", inputs: ["placeholder", "maxLength", "squareBorder", "typeaheadOptions", "showSearch", "showClear", "searchLabel", "clearLabel", "autocomplete"], outputs: ["submit", "clear", "valueChange"] }, { type: i5.IconComponent, selector: "bb-icon-ui", inputs: ["name", "inverse", "size", "color", "animate", "aria-label", "cropped", "backgroundType"] }], directives: [{ type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i3.ɵh, selector: "[ng-label-tmp]" }, { type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i3.ɵj, selector: "[ng-header-tmp]" }, { type: i3.ɵf, selector: "[ng-option-tmp]" }, { type: i7.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i7.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i7.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { type: i7.MinLengthValidator, selector: "[minlength][formControlName],[minlength][formControl],[minlength][ngModel]", inputs: ["minlength"] }, { type: i8.FocusDirective, selector: "[bbFocus]", inputs: ["bbFocus"], exportAs: ["bbFocus"] }], pipes: { "countryFlag": i9.CountryFlagPipe }, changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: InputPhoneComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-input-phone-ui',
                    templateUrl: './input-phone.component.html',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => InputPhoneComponent),
                            multi: true,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i1.DomAttributesService }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i0.ChangeDetectorRef }, { type: i2.DeprecationsService }]; }, propDecorators: { placeholder: [{
                type: Input
            }], maxLength: [{
                type: Input
            }], minLength: [{
                type: Input
            }], readonly: [{
                type: Input
            }], ariaLabel: [{
                type: Input
            }], autocomplete: [{
                type: Input
            }], countryList: [{
                type: Input
            }], dropdownPosition: [{
                type: Input
            }], clearable: [{
                type: Input
            }], searchable: [{
                type: Input
            }], defaultCountryIsoCode: [{
                type: Input
            }], enableCountryCode: [{
                type: Input
            }], inputEl: [{
                type: ViewChild,
                args: ['inputPhone']
            }], ngSelect: [{
                type: ViewChild,
                args: [NgSelectComponent]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtcGhvbmUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvaW5wdXQtcGhvbmUvaW5wdXQtcGhvbmUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvaW5wdXQtcGhvbmUvaW5wdXQtcGhvbmUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUV2QixTQUFTLEVBRVQsVUFBVSxFQUNWLEtBQUssRUFFTCxTQUFTLEdBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDbkUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHbkQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7Ozs7Ozs7Ozs7O0FBd0N6RCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsa0JBQWtCO0lBd0V6RCxZQUNtQixjQUFvQyxFQUNwQyxJQUFnQixFQUNoQixTQUFvQixFQUNsQixFQUFxQixFQUNyQixtQkFBd0M7UUFFM0QsS0FBSyxDQUFDLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1FBTmQsbUJBQWMsR0FBZCxjQUFjLENBQXNCO1FBQ3BDLFNBQUksR0FBSixJQUFJLENBQVk7UUFDaEIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQUNsQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUNyQix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBNUU3RDs7V0FFRztRQUNNLGdCQUFXLEdBQUcsRUFBRSxDQUFDO1FBWTFCOztXQUVHO1FBQ00sYUFBUSxHQUFHLEtBQUssQ0FBQztRQUUxQjs7V0FFRztRQUVILGNBQVMsR0FBRyxhQUFhLENBQUM7UUFjMUI7O1dBRUc7UUFDTSxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBQzNC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QixLQUFLO2dCQUlHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBSUcscUJBQXFCO3NCQUE3QixLQUFLO2dCQUlHLGlCQUFpQjtzQkFBekIsS0FBSztnQkFFbUIsT0FBTztzQkFBL0IsU0FBUzt1QkFBQyxZQUFZO2dCQUlPLFFBQVE7c0JBQXJDLFNBQVM7dUJBQUMsaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIGZvcndhcmRSZWYsXG4gIElucHV0LFxuICBSZW5kZXJlcjIsXG4gIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJbnB1dEJhc2VDb21wb25lbnQgfSBmcm9tICdAYmFja2Jhc2UvdWktYW5nL2Jhc2UtY2xhc3Nlcyc7XG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IERvbUF0dHJpYnV0ZXNTZXJ2aWNlIH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBEZXByZWNhdGlvbnNTZXJ2aWNlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2Z1dHVyZSc7XG5pbXBvcnQgeyBOZ1NlbGVjdENvbXBvbmVudCB9IGZyb20gJ0BuZy1zZWxlY3Qvbmctc2VsZWN0JztcblxuLyoqXG4gKiBAbmFtZSBJbnB1dFBob25lQ29tcG9uZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb21wb25lbnQgdGhhdCBkaXNwbGF5cyBhIHBob25lIGlucHV0LlxuICpcbiAqIEBhMTF5IEN1cnJlbnQgY29tcG9uZW50IHByb3ZpZGUgb3B0aW9uIHRvIHBhc3MgbmVlZGVkIGFjY2Vzc2liaWxpdHlcbiAqIGF0dHJpYnV0ZXMuIFlvdSBuZWVkIHRvIHRha2UgY2FyZSBvZiBwcm9wZXJ0aWVzIHRoYXQgYXJlIHJlcXVpcmVkIGluIHlvdXIgY2FzZSA6XG4gKiAgLSByb2xlXG4gKiAgLSBhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcbiAqICAtIGFyaWEtZGVzY3JpYmVkYnlcbiAqICAtIGFyaWEtZXhwYW5kZWRcbiAqICAtIGFyaWEtaW52YWxpZFxuICogIC0gYXJpYS1sYWJlbFxuICogIC0gYXJpYS1sYWJlbGxlZGJ5XG4gKiAgLSBhcmlhLW93bnNcbiAqXG4gKiBhcmlhTGFiZWwgaXMgZGlzY2VybmlibGUgdGV4dCBmb3IgcGhvbmUgaW5wdXRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb3VudHJ5RGF0YSB7XG4gIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gIGlzb0NvZGU6IHN0cmluZztcbiAgY291bnRyeU5hbWU6IHN0cmluZztcbn1cbmV4cG9ydCB0eXBlIENvdW50cnlMaXN0ID0gQXJyYXk8Q291bnRyeURhdGE+O1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiYi1pbnB1dC1waG9uZS11aScsXG4gIHRlbXBsYXRlVXJsOiAnLi9pbnB1dC1waG9uZS5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IElucHV0UGhvbmVDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgSW5wdXRQaG9uZUNvbXBvbmVudCBleHRlbmRzIElucHV0QmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuICAvKipcbiAgICogVGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgcGhvbmUgaW5wdXQuIERlZmF1bHRzIHRvIGFuIGVtcHR5IHN0cmluZztcbiAgICovXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhMZW5ndGggZm9yIHRoZSBwaG9uZSBpbnB1dC5cbiAgICovXG4gIEBJbnB1dCgpIG1heExlbmd0aDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgbWluTGVuZ3RoIGZvciB0aGUgcGhvbmUgaW5wdXQuXG4gICAqL1xuICBASW5wdXQoKSBtaW5MZW5ndGg6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgcGhvbmUgaW5wdXQgaXMgcmVhZG9ubHkuXG4gICAqL1xuICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBBcmlhIGxhYmVsIGZvciB0aGUgcGhvbmUgaW5wdXRcbiAgICovXG4gIEBJbnB1dCgpXG4gIGFyaWFMYWJlbCA9ICdQaG9uZSBJbnB1dCc7XG5cbiAgLyoqXG4gICAqIFRoZSBhdXRvY29tcGxldGUgdmFsdWUgb2YgdGhlIGVuY2xvc2VkIGlucHV0IGNvbnRyb2wuXG4gICAqL1xuICBASW5wdXQoKSBhdXRvY29tcGxldGU6ICd0ZWwnIHwgJ29uJyB8ICdvZmYnIHwgdW5kZWZpbmVkO1xuICAvKipcbiAgICogTGlzdCBvZiBjb3VudHJpZXMgd2l0aCBpdHMgY29kZSAsaXNvIGNvZGUgYW5kIGZsYWdcbiAgICovXG4gIEBJbnB1dCgpIGNvdW50cnlMaXN0OiBDb3VudHJ5TGlzdCB8IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIERyb3Bkb3duIFBvc2l0aW9uIChib3R0b20gfCB0b3AgfCBhdXRvKVxuICAgKi9cbiAgQElucHV0KCkgZHJvcGRvd25Qb3NpdGlvbjogJ2JvdHRvbScgfCAndG9wJyB8ICdhdXRvJyB8IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIEFsbG93IHRvIGNsZWFyIHNlbGVjdGVkIHZhbHVlLlxuICAgKi9cbiAgQElucHV0KCkgY2xlYXJhYmxlID0gZmFsc2U7XG4gIC8qKlxuICAgKiBBbGxvdyB0byBzZWFyY2ggZm9yIHZhbHVlLlxuICAgKi9cbiAgQElucHV0KCkgc2VhcmNoYWJsZSA9IGZhbHNlO1xuICAvKipcbiAgICogRGVmYXVsdCBjb3VudHJ5IHNlbGVjdGVkIGZvciBjb3VudHJ5IGRyb3Bkb3duLlxuICAgKi9cbiAgQElucHV0KCkgZGVmYXVsdENvdW50cnlJc29Db2RlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBFbmFibGUvRGlzYWJsZSBDb3VudHJ5IGNvZGUgZHJvcGRvd25cbiAgICovXG4gIEBJbnB1dCgpIGVuYWJsZUNvdW50cnlDb2RlID0gZmFsc2U7XG5cbiAgQFZpZXdDaGlsZCgnaW5wdXRQaG9uZScpIGlucHV0RWw6IEVsZW1lbnRSZWYgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBuZy1zZWxlY3RcbiAgICovXG4gIEBWaWV3Q2hpbGQoTmdTZWxlY3RDb21wb25lbnQpIG5nU2VsZWN0OiBOZ1NlbGVjdENvbXBvbmVudCB8IHVuZGVmaW5lZDtcblxuICBkZWZhdWx0Q291bnRyeUNvZGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgZGVmYXVsdENvdW50cnlOYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGNvdW50cnlEcm9wZG93bmRpc2FibGVkOiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICByZXN1bHRDb3VudCA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgX3N0YXR1c0lkID0gdGhpcy5kb21BdHRyU2VydmljZS5nZW5lcmF0ZUlkKCk7XG5cbiAgZ2V0IHN0YXR1c0lkKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0dXNJZDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZG9tQXR0clNlcnZpY2U6IERvbUF0dHJpYnV0ZXNTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbTogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHJlYWRvbmx5IHJlbmRlcmVyMjogUmVuZGVyZXIyLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlcHJlY2F0aW9uc1NlcnZpY2U6IERlcHJlY2F0aW9uc1NlcnZpY2UsXG4gICkge1xuICAgIHN1cGVyKGNkLCBkZXByZWNhdGlvbnNTZXJ2aWNlKTtcbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0Q291bnRyeURhdGEoKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlQ291bnRyeUNvZGUgJiYgdGhpcy5jb3VudHJ5TGlzdCkge1xuICAgICAgdGhpcy5jb3VudHJ5RHJvcGRvd25kaXNhYmxlZCA9IHRoaXMuY291bnRyeUxpc3QubGVuZ3RoID09PSAxO1xuICAgICAgaWYgKCF0aGlzLmNvdW50cnlEcm9wZG93bmRpc2FibGVkKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb3VudHJ5ID0gdGhpcy5jb3VudHJ5TGlzdC5maW5kKChjaXR5KSA9PiBjaXR5Lmlzb0NvZGUgPT09IHRoaXMuZGVmYXVsdENvdW50cnlJc29Db2RlKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0Q291bnRyeUNvZGUgPSBkZWZhdWx0Q291bnRyeT8uY291bnRyeUNvZGU7XG4gICAgICAgIHRoaXMuZGVmYXVsdENvdW50cnlOYW1lID0gZGVmYXVsdENvdW50cnk/LmNvdW50cnlOYW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0Q291bnRyeUNvZGUgPSB0aGlzLmNvdW50cnlMaXN0WzBdLmNvdW50cnlDb2RlO1xuICAgICAgICB0aGlzLmRlZmF1bHRDb3VudHJ5TmFtZSA9IHRoaXMuY291bnRyeUxpc3RbMF0uY291bnRyeU5hbWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5hcmlhTGFiZWwpIHtcbiAgICAgIHRoaXMuZG9tQXR0clNlcnZpY2UubW92ZUFyaWFBdHRyaWJ1dGVzKFxuICAgICAgICB0aGlzLmVsZW0ubmF0aXZlRWxlbWVudCxcbiAgICAgICAgdGhpcy5pbnB1dEVsICYmIHRoaXMuaW5wdXRFbC5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLnJlbmRlcmVyMixcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuY29uc3RydWN0Q291bnRyeURhdGEoKTtcbiAgfVxuXG4gIG9uQ2hhbmdlcyhldmVudDogQ291bnRyeURhdGEpIHtcbiAgICB0aGlzLmRlZmF1bHRDb3VudHJ5TmFtZSA9IGV2ZW50LmNvdW50cnlOYW1lO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBpZiAodGhpcy5uZ1NlbGVjdCAmJiAhdGhpcy5uZ1NlbGVjdC5pc09wZW4pIHtcbiAgICAgIHRoaXMubmdTZWxlY3QuY29uc3RydWN0b3IucHJvdG90eXBlLmZvY3VzLmNhbGwodGhpcy5uZ1NlbGVjdCk7XG4gICAgfVxuICB9XG5cbiAgb25DbGVhcigpIHtcbiAgICB0aGlzLm9uRmlsdGVyQ2hhbmdlKHVuZGVmaW5lZCk7XG4gIH1cblxuICBvbkZpbHRlckNoYW5nZShxdWVyeTogc3RyaW5nIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubmdTZWxlY3QpIHtcbiAgICAgIHRoaXMubmdTZWxlY3QuZmlsdGVyKHF1ZXJ5IHx8ICcnKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVSZXN1bHRDb3VudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVSZXN1bHRDb3VudCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3VsdENvdW50ID0gdGhpcy5uZ1NlbGVjdD8uaXRlbXNMaXN0LmZpbHRlcmVkSXRlbXMuZmlsdGVyKCh7IGNoaWxkcmVuIH0pID0+ICFjaGlsZHJlbikubGVuZ3RoIHx8IDA7XG4gIH1cblxuICBzZWFyY2hGdW5jKHRlcm06IHN0cmluZywgaXRlbTogQ291bnRyeURhdGEpOiBib29sZWFuIHtcbiAgICB0ZXJtID0gdGVybS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIGl0ZW0uY291bnRyeUNvZGUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKHRlcm0pID4gLTEgfHxcbiAgICAgIGl0ZW0uY291bnRyeU5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKHRlcm0pID4gLTEgfHxcbiAgICAgIGl0ZW0uaXNvQ29kZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YodGVybSkgPiAtMVxuICAgICk7XG4gIH1cbn1cbiIsIjxsYWJlbCAqbmdJZj1cImxhYmVsXCIgZm9yPVwie3sgaWQgfX1cIj57eyBsYWJlbCB9fTwvbGFiZWw+XG48ZGl2IGNsYXNzPVwiYmItcGhvbmVcIj5cbiAgPG5nLXNlbGVjdFxuICAgICNjb3VudHJ5Q29kZVNlbGVjdG9yXG4gICAgKm5nSWY9XCJlbmFibGVDb3VudHJ5Q29kZVwiXG4gICAgKGNoYW5nZSk9XCJvbkNoYW5nZXMoJGV2ZW50KVwiXG4gICAgKGNsb3NlKT1cIm9uQ2xvc2UoKVwiXG4gICAgW2Ryb3Bkb3duUG9zaXRpb25dPVwiZHJvcGRvd25Qb3NpdGlvblwiXG4gICAgW2NsZWFyYWJsZV09XCJjbGVhcmFibGVcIlxuICAgIFtzZWFyY2hhYmxlXT1cInNlYXJjaGFibGVcIlxuICAgIFtpdGVtc109XCJjb3VudHJ5TGlzdFwiXG4gICAgWyhuZ01vZGVsKV09XCJkZWZhdWx0Q291bnRyeUNvZGVcIlxuICAgIGJpbmRMYWJlbD1cImNvdW50cnlDb2RlXCJcbiAgICBiaW5kVmFsdWU9XCJjb3VudHJ5Q29kZVwiXG4gICAgW3NlYXJjaEZuXT1cInNlYXJjaEZ1bmNcIlxuICAgIFtyZWFkb25seV09XCJjb3VudHJ5RHJvcGRvd25kaXNhYmxlZFwiXG4gICAgY2xhc3M9XCJiYi1waG9uZS1jb3VudHJ5LWNvZGVcIlxuICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiZGVmYXVsdENvdW50cnlDb2RlICsgJyAnICsgZGVmYXVsdENvdW50cnlOYW1lXCJcbiAgPlxuICAgIDxuZy10ZW1wbGF0ZSBuZy1sYWJlbC10bXAgbGV0LWl0ZW09XCJpdGVtXCI+XG4gICAgICA8aSBjbGFzcz1cImZsYWctaWNvblwiIFtuZ0NsYXNzXT1cIml0ZW0uaXNvQ29kZSB8IGNvdW50cnlGbGFnXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+IDwvaT5cbiAgICAgIHt7IGl0ZW0uY291bnRyeUNvZGUgfX1cbiAgICA8L25nLXRlbXBsYXRlPlxuICAgIDxuZy10ZW1wbGF0ZSBuZy1oZWFkZXItdG1wPlxuICAgICAgPGJiLXNlYXJjaC1ib3gtdWlcbiAgICAgICAgKGNsZWFyKT1cIm9uQ2xlYXIoKVwiXG4gICAgICAgICh2YWx1ZUNoYW5nZSk9XCJvbkZpbHRlckNoYW5nZSgkZXZlbnQpXCJcbiAgICAgICAgW3Nob3dTZWFyY2hdPVwidHJ1ZVwiXG4gICAgICAgIFtzaG93Q2xlYXJdPVwidHJ1ZVwiXG4gICAgICAgIFthdXRvZm9jdXNdPVwidHJ1ZVwiXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCJcbiAgICAgICAgaTE4bi1wbGFjZWhvbGRlcj1cIlNlYXJjaHxTZWFyY2ggcGxhY2Vob2xkZXJAQGJiLWlucHV0LXBob25lLXVpLnNlYXJjaC5wbGFjZWhvbGRlclwiXG4gICAgICAgIFthcmlhLWNvbnRyb2xzXT1cInN0YXR1c0lkXCJcbiAgICAgICAgW2FyaWEtZXhwYW5kZWRdPVwibmdTZWxlY3Q/LmlzT3BlblwiXG4gICAgICAgIFthcmlhLW93bnNdPVwibmdTZWxlY3Q/LmlzT3BlbiA/IG5nU2VsZWN0Py5kcm9wZG93bklkIDogbnVsbFwiXG4gICAgICAgIFthcmlhLWFjdGl2ZWRlc2NlbmRhbnRdPVwibmdTZWxlY3Q/LmlzT3BlbiA/IG5nU2VsZWN0Py5pdGVtc0xpc3Q/Lm1hcmtlZEl0ZW0/Lmh0bWxJZCA6IG51bGxcIlxuICAgICAgPjwvYmItc2VhcmNoLWJveC11aT5cbiAgICAgIDxkaXZcbiAgICAgICAgW2lkXT1cInN0YXR1c0lkXCJcbiAgICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgICAgYXJpYS1hdG9taWM9XCJ0cnVlXCJcbiAgICAgICAgY2xhc3M9XCJzci1vbmx5XCJcbiAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgIGkxOG49XCJcbiAgICAgICAgICBOdW1iZXIgb2Ygb3B0aW9uc3xTY3JlZW4gcmVhZGVyIGRlc2NyaXB0aW9uIG9mIHRoZSBudW1iZXIgb2Ygb3B0aW9ucyBhZnRlciBmaWx0ZXJpbmcgdGhlXG4gICAgICAgICAgY29tYm9ib3hAQGJiLWlucHV0LXBob25lLXVpLm9wdGlvbnMuY291bnRcIlxuICAgICAgPlxuICAgICAgICB7eyByZXN1bHRDb3VudCB9fSBvcHRpb25zXG4gICAgICA8L2Rpdj5cbiAgICA8L25nLXRlbXBsYXRlPlxuICAgIDxuZy10ZW1wbGF0ZSBuZy1vcHRpb24tdG1wIGxldC1pdGVtPVwiaXRlbVwiIGxldC1pbmRleD1cImluZGV4XCIgbGV0LXNlYXJjaD1cInNlYXJjaFRlcm1cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi1vcHRpb24taXRlbVwiPlxuICAgICAgICA8aSBjbGFzcz1cImZsYWctaWNvbiBjb2wtbWQtMVwiIFtuZ0NsYXNzXT1cIml0ZW0uaXNvQ29kZSB8IGNvdW50cnlGbGFnXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+IDwvaT5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb2wtbWQtMyBwci0wXCI+e3sgaXRlbS5jb3VudHJ5Q29kZSB9fTwvc3BhblxuICAgICAgICA+Jm5ic3A7XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY29sLW1kLTYgcHgtMCBkcm9wZG93bi1vcHRpb24taXRlbV9fY291bnRyeS1uYW1lXCI+e3sgaXRlbS5jb3VudHJ5TmFtZSB9fTwvc3Bhbj5cbiAgICAgICAgPGJiLWljb24tdWlcbiAgICAgICAgICBjbGFzcz1cImNvbC1tZC0yIHB4LTBcIlxuICAgICAgICAgICpuZ0lmPVwidGhpcy5uZ1NlbGVjdD8uaXRlbXNMaXN0Lml0ZW1zW2luZGV4XS5zZWxlY3RlZFwiXG4gICAgICAgICAgbmFtZT1cImNoZWNrXCJcbiAgICAgICAgICBjb2xvcj1cImNvbG9yLW5ldXRyYWwtZGFya1wiXG4gICAgICAgID5cbiAgICAgICAgPC9iYi1pY29uLXVpPlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9uZy1zZWxlY3Q+XG5cbiAgPGlucHV0XG4gICAgaWQ9XCJ7eyBpZCB9fVwiXG4gICAgI2lucHV0UGhvbmVcbiAgICBbYXR0ci5hcmlhLWF1dG9jb21wbGV0ZV09XCJhcmlhQXV0b2NvbXBsZXRlXCJcbiAgICBbYXR0ci5hcmlhLWNvbnRyb2xzXT1cImFyaWFDb250cm9sc1wiXG4gICAgW2F0dHIuYXJpYS1kZXNjcmliZWRieV09XCJhcmlhRGVzY3JpYmVkYnkgPyBhcmlhRGVzY3JpYmVkYnkgOiBpZCArICctY291bnRyeS1jb2RlJ1wiXG4gICAgW2F0dHIuYXJpYS1sYWJlbGxlZGJ5XT1cImFyaWFMYWJlbGxlZGJ5XCJcbiAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cImFyaWFFeHBhbmRlZFwiXG4gICAgW2F0dHIuYXJpYS1hY3RpdmVkZXNjZW5kYW50XT1cImFyaWFBY3RpdmVkZXNjZW5kYW50XCJcbiAgICBbYXR0ci5yb2xlXT1cInJvbGVcIlxuICAgIFthdHRyLmFyaWEtaW52YWxpZF09XCJhcmlhSW52YWxpZFwiXG4gICAgW2F0dHIuYXJpYS1vd25zXT1cImFyaWFPd25zXCJcbiAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIighbGFiZWwgJiYgYXJpYUxhYmVsKSB8fCBudWxsXCJcbiAgICBbbmdNb2RlbF09XCJ2YWx1ZVwiXG4gICAgKG5nTW9kZWxDaGFuZ2UpPVwib25WYWx1ZUNoYW5nZSgkZXZlbnQpXCJcbiAgICAoYmx1cik9XCJvbkJsdXIoKVwiXG4gICAgdHlwZT1cInRlbFwiXG4gICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgIChmb2N1cyk9XCJvbkZvY3VzKClcIlxuICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgW3JlYWRPbmx5XT1cInJlYWRvbmx5XCJcbiAgICBbcGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgIFtyZXF1aXJlZF09XCJyZXF1aXJlZFwiXG4gICAgW2F0dHIubWF4bGVuZ3RoXT1cIm1heExlbmd0aFwiXG4gICAgW2F0dHIubWlubGVuZ3RoXT1cIm1pbkxlbmd0aFwiXG4gICAgW2F0dHIuc2l6ZV09XCJzaXplXCJcbiAgICBbYmJGb2N1c109XCJhdXRvZm9jdXNcIlxuICAgIFtuZ0NsYXNzXT1cImlucHV0Q2xhc3NOYW1lXCJcbiAgICBbYXR0ci5hdXRvY29tcGxldGVdPVwiYXV0b2NvbXBsZXRlXCJcbiAgLz5cbiAgPGRpdiBpZD1cInt7IGlkIH19LWNvdW50cnktY29kZVwiIGNsYXNzPVwic3Itb25seVwiICpuZ0lmPVwiIWFyaWFEZXNjcmliZWRieSAmJiBjb3VudHJ5RHJvcGRvd25kaXNhYmxlZFwiPlxuICAgIDxzcGFuXG4gICAgICBpMThuPVwiXG4gICAgICAgIFNlbGVjdGVkIENvdW50cnkgaXN8U2VsZWN0ZWQgQ291bnRyeSBpcyBncm91cCBCeSBsYWJlbFxuICAgICAgICBAQGJiLWFjY291bnQtc2VsZWN0b3ItdWkuZ3JvdXBCeS5zZWxlY3RlZC1jb3VudHJ5LWlzLmxhYmVsXCJcbiAgICAgID5TZWxlY3RlZCBDb3VudHJ5IGlzIDwvc3BhblxuICAgID57eyBkZWZhdWx0Q291bnRyeU5hbWUgfX1cbiAgICA8c3BhbiBpMThuPVwiYW5kIGNvZGUgaXN8YW5kIGNvZGUgaXMgZ3JvdXAgQnkgbGFiZWwgQEBiYi1hY2NvdW50LXNlbGVjdG9yLXVpLmdyb3VwQnkuYW5kLWNvZGUtaXMubGFiZWxcIlxuICAgICAgPmFuZCBjb2RlIGlzIDwvc3BhblxuICAgID57eyBkZWZhdWx0Q291bnRyeUNvZGUgfX1cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==