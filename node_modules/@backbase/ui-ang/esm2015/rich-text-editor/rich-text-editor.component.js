import { Component, ContentChild, Directive, forwardRef, HostBinding, HostListener, Inject, Input, SecurityContext, ViewChild, } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR, Validators, } from '@angular/forms';
import { InputBaseComponent } from '@backbase/ui-ang/base-classes';
import { browserIsMsie, getKeyCode, KEY_CODES } from '@backbase/ui-ang/util';
import { DOCUMENT } from '@angular/common';
import * as i0 from "@angular/core";
import * as i1 from "@backbase/ui-ang/services";
import * as i2 from "@backbase/foundation-ang/future";
import * as i3 from "@angular/platform-browser";
import * as i4 from "./bb-rich-text-editor-actions/rich-text-editor-bold-action/rich-text-editor-bold-action.component";
import * as i5 from "./bb-rich-text-editor-actions/rich-text-editor-italic-action/rich-text-editor-italic-action.component";
import * as i6 from "./bb-rich-text-editor-actions/rich-text-editor-underline-action/rich-text-editor-underline-action.component";
import * as i7 from "./bb-rich-text-editor-actions/rich-text-editor-strikethrough-action/rich-text-editor-strikethrough-action.component";
import * as i8 from "./bb-rich-text-editor-actions/rich-text-editor-olist-action/rich-text-editor-olist-action.component";
import * as i9 from "./bb-rich-text-editor-actions/rich-text-editor-ulist-action/rich-text-editor-ulist-action.component";
import * as i10 from "./bb-rich-text-editor-actions/rich-text-editor-paragraph-action/rich-text-editor-paragraph-action.component";
import * as i11 from "./bb-rich-text-editor-actions/rich-text-editor-code-action/rich-text-editor-code-action.component";
import * as i12 from "./bb-rich-text-editor-actions/rich-text-editor-link-action/rich-text-editor-link-action.component";
import * as i13 from "@angular/common";
export class RichTextEditorActionsDirective {
    constructor(templateRef) {
        this.templateRef = templateRef;
    }
}
RichTextEditorActionsDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: RichTextEditorActionsDirective, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });
RichTextEditorActionsDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "12.2.16", type: RichTextEditorActionsDirective, selector: "ng-template[bbRichTextEditorActions]", ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: RichTextEditorActionsDirective, decorators: [{
            type: Directive,
            args: [{ selector: 'ng-template[bbRichTextEditorActions]' }]
        }], ctorParameters: function () { return [{ type: i0.TemplateRef }]; } });
/**
 * @name RichTextEditorComponent
 *
 * @description
 * Component that provides you input text with editing.
 *
 * @dynamic (to suppress error with resolving Document type during compilation)
 */
export class RichTextEditorComponent extends InputBaseComponent {
    constructor(cd, domAttributesService, deprecationsService, sanitizer, renderer, document) {
        super(cd, deprecationsService);
        this.cd = cd;
        this.domAttributesService = domAttributesService;
        this.deprecationsService = deprecationsService;
        this.sanitizer = sanitizer;
        this.renderer = renderer;
        this.document = document;
        /**
         * The maxLength for the rich-text-editor component.
         */
        this.maxLength = Infinity;
        /**
         * The minLength for the rich-text-editor component.
         */
        this.minLength = 0;
        /**
         * The placeholder for the rich-text-editor component. Defaults to an empty string;
         */
        this.placeholder = '';
        /**
         * Show/hide message length. Defaults to true;
         */
        this.counter = true;
        /**
         * Whether the rich-text-editor component is readonly.
         */
        this.readonly = false;
        /**
         * Placement of the action tooltip relative to the action button: auto | top | bottom | left | right.
         */
        this.actionsTooltipPlacement = 'auto';
        this.focused = false;
        this.hostRef = this;
        this.contentClassName = 'bb-rich-text-editor__content';
        this.mainAreaClassName = 'bb-rich-text-editor__mainarea';
        this.value = '';
        this.replaceSpaces = (value) => value.replace(/&nbsp;|&#160;/g, ' ');
        this.labelId = this.domAttributesService.generateId();
    }
    onKeyEvent($event) {
        if (this.contentEditable && browserIsMsie()) {
            const action = getKeyCode($event);
            if (($event.ctrlKey || $event.metaKey) && action === KEY_CODES.X) {
                this.callOnChange();
            }
            if (action === KEY_CODES.BACKSPACE || action === KEY_CODES.DELETE) {
                this.callOnChange();
            }
        }
    }
    onPaste() {
        if (this.contentEditable && browserIsMsie()) {
            this.callOnChange();
        }
    }
    onClickEvent($event) {
        var _a, _b, _c, _d;
        if ((_a = this.document.getSelection()) === null || _a === void 0 ? void 0 : _a.rangeCount) {
            this.range = (_b = this.document.getSelection()) === null || _b === void 0 ? void 0 : _b.getRangeAt(0);
        }
        if (($event === null || $event === void 0 ? void 0 : $event.target).closest('button') && ((_c = this.range) === null || _c === void 0 ? void 0 : _c.endOffset) === ((_d = this.range) === null || _d === void 0 ? void 0 : _d.startOffset)) {
            this.restoreCaretPosition(this.contentEditableElement);
            this.callOnChange();
        }
    }
    writeValue(inputValue) {
        if (this.contentEditable) {
            const finalValue = this.parseValue(inputValue || '');
            this.renderer.setProperty(this.contentEditable.nativeElement, 'innerHTML', finalValue);
            super.onValueChange(finalValue);
        }
        this.cd.markForCheck();
    }
    callOnChange() {
        const finalValue = (this.contentEditable && this.parseValue(this.contentEditable.nativeElement.innerHTML)) || '';
        super.onValueChange(finalValue);
    }
    validate(control) {
        if (control) {
            console.warn('[bb-rich-text-editor-ui]: "control" argument in "validate" method is deprecated and will be removed ' +
                'in the next major release');
        }
        const value = this.getMessageText() || null;
        const validators = [Validators.maxLength(this.maxLength), Validators.minLength(this.minLength)];
        if (this.required) {
            validators.push(this.customRequiredValidation.bind(this));
        }
        const compose = Validators.compose(validators);
        return compose && compose({ value });
    }
    labelClick() {
        if (this.contentEditable) {
            this.contentEditable.nativeElement.focus();
        }
    }
    callOnFocus() {
        super.onFocus();
        this.focused = true;
    }
    callOnBlur() {
        setTimeout(() => {
            super.onBlur();
            this.focused = false;
            this.cd.markForCheck();
        });
    }
    getMessageText(content) {
        if (content) {
            console.warn('[bb-rich-text-editor-ui]: "content" argument in "getMessageText" method is deprecated and will ' +
                'be removed in the next major release');
        }
        return this.contentEditableElement.textContent || '';
    }
    showCounter() {
        return this.counter && !!this.maxLength && Number.isFinite(this.maxLength);
    }
    linkAdded() {
        this.callOnChange();
        this.restoreCaretPosition(this.contentEditableElement);
    }
    get contentEditableElement() {
        var _a;
        return (_a = this.contentEditable) === null || _a === void 0 ? void 0 : _a.nativeElement;
    }
    parseValue(value) {
        const isHtml = /<\/?[a-z][\s\S]*>/i.test(value);
        return this.replaceSpaces(isHtml ? this.sanitizer.sanitize(SecurityContext.HTML, value) || '' : value);
    }
    customRequiredValidation() {
        const value = this.getMessageText();
        if (!value || (typeof value === 'string' && !value.trim())) {
            return {
                required: true,
            };
        }
        return null;
    }
    restoreCaretPosition(el) {
        var _a, _b;
        const emptyRange = document.createRange();
        const selection = window.getSelection();
        const isEditorSelection = !!((_b = (_a = this.range) === null || _a === void 0 ? void 0 : _a.endContainer.parentElement) === null || _b === void 0 ? void 0 : _b.closest(`.${this.contentClassName}`));
        emptyRange.selectNodeContents(el);
        emptyRange.collapse(false);
        selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();
        if (isEditorSelection) {
            selection === null || selection === void 0 ? void 0 : selection.addRange(this.range);
        }
        else {
            selection === null || selection === void 0 ? void 0 : selection.addRange(emptyRange);
        }
    }
}
RichTextEditorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: RichTextEditorComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.DomAttributesService }, { token: i2.DeprecationsService }, { token: i3.DomSanitizer }, { token: i0.Renderer2 }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });
RichTextEditorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: RichTextEditorComponent, selector: "bb-rich-text-editor-ui", inputs: { maxLength: "maxLength", minLength: "minLength", placeholder: "placeholder", counter: "counter", readonly: "readonly", actionsTooltipPlacement: "actionsTooltipPlacement" }, host: { listeners: { "keydown": "onKeyEvent($event)", "keyup": "onKeyEvent($event)", "paste": "onPaste()", "mouseup": "onClickEvent($event)" }, properties: { "class.is-focused": "this.focused" } }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => RichTextEditorComponent),
            multi: true,
        },
        {
            provide: NG_VALIDATORS,
            useExisting: forwardRef(() => RichTextEditorComponent),
            multi: true,
        },
    ], queries: [{ propertyName: "actions", first: true, predicate: RichTextEditorActionsDirective, descendants: true, static: true }], viewQueries: [{ propertyName: "contentEditable", first: true, predicate: ["contenteditable"], descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: "<div class=\"bb-rich-text-editor\">\n  <label class=\"bb-rich-text-editor__label\" [attr.id]=\"labelId\" for=\"{{ id }}\" *ngIf=\"label\" (click)=\"labelClick()\">{{\n    label\n  }}</label>\n  <div\n    tabindex=\"0\"\n    role=\"textbox\"\n    aria-label=\"bb-rich-text-editor-textbox\"\n    aria-labelledby=\"bb-rich-text-editor-textbox\"\n    class=\"form-control bb-rich-text-editor__actionbar\"\n    [ngClass]=\"{ 'bb-rich-text-editor--disabled': readonly || disabled }\"\n  >\n    <div [ngClass]=\"mainAreaClassName\">\n      <div\n        #contenteditable\n        [ngClass]=\"contentClassName\"\n        [attr.contenteditable]=\"!readonly && !disabled\"\n        [attr.placeholder]=\"placeholder\"\n        [attr.readonly]=\"readonly\"\n        [attr.aria-label]=\"ariaLabel || label\"\n        [attr.aria-labelledby]=\"ariaLabelledby ? ariaLabelledby : label ? labelId : null\"\n        [attr.aria-describedby]=\"ariaDescribedby ? ariaDescribedby : null\"\n        (input)=\"callOnChange()\"\n        (blur)=\"callOnBlur()\"\n        (focus)=\"callOnFocus()\"\n      ></div>\n      <div aria-live=\"assertive\" class=\"sr-only\">\n        <span\n          aria-atomic=\"true\"\n          role=\"log\"\n          [attr.aria-hidden]=\"getMessageText().length <= maxLength - 5\"\n          i18n=\"\n            Char counter Length Warning|String above to reached 'maxLength' characters.\n            @@bb-rich-text-editor-ui.length-warning\"\n          >You typed {{ getMessageText().length }} of {{ maxLength }} allowed characters in this field.</span\n        >\n      </div>\n\n      <ng-container *ngIf=\"actions; else defaultActions\">\n        <div class=\"bb-rich-text-editor-buttons\">\n          <ng-container *ngTemplateOutlet=\"actions.templateRef; context: hostRef\"></ng-container>\n        </div>\n      </ng-container>\n\n      <textarea id=\"{{ id }}\" class=\"bb-rich-text-editor__textarea bb-rich-text-editor__textarea--hidden\"></textarea>\n    </div>\n  </div>\n  <p\n    *ngIf=\"showCounter()\"\n    class=\"bb-rich-text-editor__char-counter\"\n    data-role=\"char-counter\"\n    [ngClass]=\"{ 'text-danger': getMessageText().length > maxLength }\"\n  >\n    <span>{{ getMessageText().length }} / {{ maxLength }}</span>\n    <span\n      *ngIf=\"getMessageText().length > maxLength\"\n      i18n=\"Limit exceeded text error@@bb-rich-text-editor-ui.limitExceeded\"\n      >, limit exceeded</span\n    >\n  </p>\n</div>\n\n<ng-template #defaultActions bbRichTextEditorActions>\n  <bb-rich-text-editor-bold-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  ></bb-rich-text-editor-bold-action>\n  <bb-rich-text-editor-italic-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  ></bb-rich-text-editor-italic-action>\n  <bb-rich-text-editor-underline-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  ></bb-rich-text-editor-underline-action>\n  <bb-rich-text-editor-strikethrough-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  >\n  </bb-rich-text-editor-strikethrough-action>\n  <span role=\"separator\" class=\"bb-rich-text-editor__toolbar-separator\"></span>\n  <bb-rich-text-editor-olist-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  ></bb-rich-text-editor-olist-action>\n  <bb-rich-text-editor-ulist-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  >\n  </bb-rich-text-editor-ulist-action>\n  <span role=\"separator\" class=\"bb-rich-text-editor__toolbar-separator\"></span>\n  <bb-rich-text-editor-paragraph-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  ></bb-rich-text-editor-paragraph-action>\n  <bb-rich-text-editor-code-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [disabled]=\"disabled || readonly\"\n  ></bb-rich-text-editor-code-action>\n  <bb-rich-text-editor-link-action\n    [actionsTooltipPlacement]=\"actionsTooltipPlacement\"\n    [contentClassNames]=\"[contentClassName, mainAreaClassName]\"\n    [disabled]=\"disabled || readonly\"\n    (linkAdded)=\"linkAdded()\"\n  ></bb-rich-text-editor-link-action>\n</ng-template>\n", components: [{ type: i4.RichTextEditorBoldActionComponent, selector: "bb-rich-text-editor-bold-action" }, { type: i5.RichTextEditorItalicActionComponent, selector: "bb-rich-text-editor-italic-action" }, { type: i6.RichTextEditorUnderlineActionComponent, selector: "bb-rich-text-editor-underline-action" }, { type: i7.RichTextEditorStrikethroughActionComponent, selector: "bb-rich-text-editor-strikethrough-action" }, { type: i8.RichTextEditorOlistActionComponent, selector: "bb-rich-text-editor-olist-action" }, { type: i9.RichTextEditorUlistActionComponent, selector: "bb-rich-text-editor-ulist-action" }, { type: i10.RichTextEditorParagraphActionComponent, selector: "bb-rich-text-editor-paragraph-action" }, { type: i11.RichTextEditorCodeActionComponent, selector: "bb-rich-text-editor-code-action" }, { type: i12.RichTextEditorLinkActionComponent, selector: "bb-rich-text-editor-link-action", inputs: ["contentClassNames"], outputs: ["linkAdded"] }], directives: [{ type: i13.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i13.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i13.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: RichTextEditorActionsDirective, selector: "ng-template[bbRichTextEditorActions]" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: RichTextEditorComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'bb-rich-text-editor-ui',
                    templateUrl: './rich-text-editor.component.html',
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => RichTextEditorComponent),
                            multi: true,
                        },
                        {
                            provide: NG_VALIDATORS,
                            useExisting: forwardRef(() => RichTextEditorComponent),
                            multi: true,
                        },
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.DomAttributesService }, { type: i2.DeprecationsService }, { type: i3.DomSanitizer }, { type: i0.Renderer2 }, { type: Document, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; }, propDecorators: { maxLength: [{
                type: Input
            }], minLength: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], counter: [{
                type: Input
            }], readonly: [{
                type: Input
            }], actionsTooltipPlacement: [{
                type: Input
            }], actions: [{
                type: ContentChild,
                args: [RichTextEditorActionsDirective, { static: true }]
            }], contentEditable: [{
                type: ViewChild,
                args: ['contenteditable', { static: true }]
            }], focused: [{
                type: HostBinding,
                args: ['class.is-focused']
            }], onKeyEvent: [{
                type: HostListener,
                args: ['keydown', ['$event']]
            }, {
                type: HostListener,
                args: ['keyup', ['$event']]
            }], onPaste: [{
                type: HostListener,
                args: ['paste']
            }], onClickEvent: [{
                type: HostListener,
                args: ['mouseup', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmljaC10ZXh0LWVkaXRvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL3VpLWFuZy9yaWNoLXRleHQtZWRpdG9yL3JpY2gtdGV4dC1lZGl0b3IuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vbGlicy91aS1hbmcvcmljaC10ZXh0LWVkaXRvci9yaWNoLXRleHQtZWRpdG9yLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLFNBQVMsRUFFVCxVQUFVLEVBQ1YsV0FBVyxFQUNYLFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxFQUVMLGVBQWUsRUFFZixTQUFTLEdBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUdMLGFBQWEsRUFDYixpQkFBaUIsRUFHakIsVUFBVSxHQUNYLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDbkUsT0FBTyxFQUFFLGFBQWEsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFJN0UsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7QUFHM0MsTUFBTSxPQUFPLDhCQUE4QjtJQUN6QyxZQUFtQixXQUE2QjtRQUE3QixnQkFBVyxHQUFYLFdBQVcsQ0FBa0I7SUFBRyxDQUFDOzs0SEFEekMsOEJBQThCO2dIQUE5Qiw4QkFBOEI7NEZBQTlCLDhCQUE4QjtrQkFEMUMsU0FBUzttQkFBQyxFQUFFLFFBQVEsRUFBRSxzQ0FBc0MsRUFBRTs7QUFLL0Q7Ozs7Ozs7R0FPRztBQWlCSCxNQUFNLE9BQU8sdUJBQXdCLFNBQVEsa0JBQWtCO0lBc0M3RCxZQUNxQixFQUFxQixFQUNoQyxvQkFBMEMsRUFDL0IsbUJBQXdDLEVBQzFDLFNBQXVCLEVBQ3ZC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dUJBQUMsOEJBQThCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUNkLGVBQWU7c0JBQTlELFNBQVM7dUJBQUMsaUJBQWlCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUNiLE9BQU87c0JBQXZDLFdBQVc7dUJBQUMsa0JBQWtCO2dCQXlCL0IsVUFBVTtzQkFGVCxZQUFZO3VCQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQzs7c0JBQ2xDLFlBQVk7dUJBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDO2dCQWdCakMsT0FBTztzQkFETixZQUFZO3VCQUFDLE9BQU87Z0JBUXJCLFlBQVk7c0JBRFgsWUFBWTt1QkFBQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGQsXG4gIERpcmVjdGl2ZSxcbiAgRWxlbWVudFJlZixcbiAgZm9yd2FyZFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgUmVuZGVyZXIyLFxuICBTZWN1cml0eUNvbnRleHQsXG4gIFRlbXBsYXRlUmVmLFxuICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQWJzdHJhY3RDb250cm9sLFxuICBDb250cm9sVmFsdWVBY2Nlc3NvcixcbiAgTkdfVkFMSURBVE9SUyxcbiAgTkdfVkFMVUVfQUNDRVNTT1IsXG4gIFZhbGlkYXRpb25FcnJvcnMsXG4gIFZhbGlkYXRvcixcbiAgVmFsaWRhdG9ycyxcbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSW5wdXRCYXNlQ29tcG9uZW50IH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9iYXNlLWNsYXNzZXMnO1xuaW1wb3J0IHsgYnJvd3NlcklzTXNpZSwgZ2V0S2V5Q29kZSwgS0VZX0NPREVTIH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy91dGlsJztcbmltcG9ydCB7IERvbUF0dHJpYnV0ZXNTZXJ2aWNlIH0gZnJvbSAnQGJhY2tiYXNlL3VpLWFuZy9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBEZXByZWNhdGlvbnNTZXJ2aWNlIH0gZnJvbSAnQGJhY2tiYXNlL2ZvdW5kYXRpb24tYW5nL2Z1dHVyZSc7XG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQERpcmVjdGl2ZSh7IHNlbGVjdG9yOiAnbmctdGVtcGxhdGVbYmJSaWNoVGV4dEVkaXRvckFjdGlvbnNdJyB9KVxuZXhwb3J0IGNsYXNzIFJpY2hUZXh0RWRpdG9yQWN0aW9uc0RpcmVjdGl2ZSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB0ZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55Pikge31cbn1cblxuLyoqXG4gKiBAbmFtZSBSaWNoVGV4dEVkaXRvckNvbXBvbmVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29tcG9uZW50IHRoYXQgcHJvdmlkZXMgeW91IGlucHV0IHRleHQgd2l0aCBlZGl0aW5nLlxuICpcbiAqIEBkeW5hbWljICh0byBzdXBwcmVzcyBlcnJvciB3aXRoIHJlc29sdmluZyBEb2N1bWVudCB0eXBlIGR1cmluZyBjb21waWxhdGlvbilcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYmItcmljaC10ZXh0LWVkaXRvci11aScsXG4gIHRlbXBsYXRlVXJsOiAnLi9yaWNoLXRleHQtZWRpdG9yLmNvbXBvbmVudC5odG1sJyxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBSaWNoVGV4dEVkaXRvckNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBSaWNoVGV4dEVkaXRvckNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBSaWNoVGV4dEVkaXRvckNvbXBvbmVudCBleHRlbmRzIElucHV0QmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBWYWxpZGF0b3Ige1xuICAvKipcbiAgICogVGhlIG1heExlbmd0aCBmb3IgdGhlIHJpY2gtdGV4dC1lZGl0b3IgY29tcG9uZW50LlxuICAgKi9cbiAgQElucHV0KCkgbWF4TGVuZ3RoID0gSW5maW5pdHk7XG4gIC8qKlxuICAgKiBUaGUgbWluTGVuZ3RoIGZvciB0aGUgcmljaC10ZXh0LWVkaXRvciBjb21wb25lbnQuXG4gICAqL1xuICBASW5wdXQoKSBtaW5MZW5ndGggPSAwO1xuICAvKipcbiAgICogVGhlIHBsYWNlaG9sZGVyIGZvciB0aGUgcmljaC10ZXh0LWVkaXRvciBjb21wb25lbnQuIERlZmF1bHRzIHRvIGFuIGVtcHR5IHN0cmluZztcbiAgICovXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XG4gIC8qKlxuICAgKiBTaG93L2hpZGUgbWVzc2FnZSBsZW5ndGguIERlZmF1bHRzIHRvIHRydWU7XG4gICAqL1xuICBASW5wdXQoKSBjb3VudGVyID0gdHJ1ZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHJpY2gtdGV4dC1lZGl0b3IgY29tcG9uZW50IGlzIHJlYWRvbmx5LlxuICAgKi9cbiAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcbiAgLyoqXG4gICAqIFBsYWNlbWVudCBvZiB0aGUgYWN0aW9uIHRvb2x0aXAgcmVsYXRpdmUgdG8gdGhlIGFjdGlvbiBidXR0b246IGF1dG8gfCB0b3AgfCBib3R0b20gfCBsZWZ0IHwgcmlnaHQuXG4gICAqL1xuICBASW5wdXQoKSBhY3Rpb25zVG9vbHRpcFBsYWNlbWVudCA9ICdhdXRvJztcbiAgQENvbnRlbnRDaGlsZChSaWNoVGV4dEVkaXRvckFjdGlvbnNEaXJlY3RpdmUsIHsgc3RhdGljOiB0cnVlIH0pIGFjdGlvbnM6IFJpY2hUZXh0RWRpdG9yQWN0aW9uc0RpcmVjdGl2ZSB8IHVuZGVmaW5lZDtcbiAgQFZpZXdDaGlsZCgnY29udGVudGVkaXRhYmxlJywgeyBzdGF0aWM6IHRydWUgfSkgY29udGVudEVkaXRhYmxlOiBFbGVtZW50UmVmIHwgdW5kZWZpbmVkO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlzLWZvY3VzZWQnKSBmb2N1c2VkID0gZmFsc2U7XG5cbiAgcmVhZG9ubHkgaG9zdFJlZjogUmljaFRleHRFZGl0b3JDb21wb25lbnQgPSB0aGlzO1xuXG4gIHB1YmxpYyByZWFkb25seSBsYWJlbElkOiBzdHJpbmc7XG4gIHB1YmxpYyByZWFkb25seSBjb250ZW50Q2xhc3NOYW1lID0gJ2JiLXJpY2gtdGV4dC1lZGl0b3JfX2NvbnRlbnQnO1xuICBwdWJsaWMgcmVhZG9ubHkgbWFpbkFyZWFDbGFzc05hbWUgPSAnYmItcmljaC10ZXh0LWVkaXRvcl9fbWFpbmFyZWEnO1xuICBwcml2YXRlIHJhbmdlPzogUmFuZ2U7XG5cbiAgdmFsdWUgPSAnJztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgZG9tQXR0cmlidXRlc1NlcnZpY2U6IERvbUF0dHJpYnV0ZXNTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBkZXByZWNhdGlvbnNTZXJ2aWNlOiBEZXByZWNhdGlvbnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2FuaXRpemVyOiBEb21TYW5pdGl6ZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgcmVhZG9ubHkgZG9jdW1lbnQ6IERvY3VtZW50LFxuICApIHtcbiAgICBzdXBlcihjZCwgZGVwcmVjYXRpb25zU2VydmljZSk7XG4gICAgdGhpcy5sYWJlbElkID0gdGhpcy5kb21BdHRyaWJ1dGVzU2VydmljZS5nZW5lcmF0ZUlkKCk7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdrZXlkb3duJywgWyckZXZlbnQnXSlcbiAgQEhvc3RMaXN0ZW5lcigna2V5dXAnLCBbJyRldmVudCddKVxuICBvbktleUV2ZW50KCRldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmICh0aGlzLmNvbnRlbnRFZGl0YWJsZSAmJiBicm93c2VySXNNc2llKCkpIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IGdldEtleUNvZGUoJGV2ZW50KTtcblxuICAgICAgaWYgKCgkZXZlbnQuY3RybEtleSB8fCAkZXZlbnQubWV0YUtleSkgJiYgYWN0aW9uID09PSBLRVlfQ09ERVMuWCkge1xuICAgICAgICB0aGlzLmNhbGxPbkNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aW9uID09PSBLRVlfQ09ERVMuQkFDS1NQQUNFIHx8IGFjdGlvbiA9PT0gS0VZX0NPREVTLkRFTEVURSkge1xuICAgICAgICB0aGlzLmNhbGxPbkNoYW5nZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ3Bhc3RlJylcbiAgb25QYXN0ZSgpIHtcbiAgICBpZiAodGhpcy5jb250ZW50RWRpdGFibGUgJiYgYnJvd3NlcklzTXNpZSgpKSB7XG4gICAgICB0aGlzLmNhbGxPbkNoYW5nZSgpO1xuICAgIH1cbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNldXAnLCBbJyRldmVudCddKVxuICBvbkNsaWNrRXZlbnQoJGV2ZW50OiBFdmVudCkge1xuICAgIGlmICh0aGlzLmRvY3VtZW50LmdldFNlbGVjdGlvbigpPy5yYW5nZUNvdW50KSB7XG4gICAgICB0aGlzLnJhbmdlID0gdGhpcy5kb2N1bWVudC5nZXRTZWxlY3Rpb24oKT8uZ2V0UmFuZ2VBdCgwKTtcbiAgICB9XG5cbiAgICBpZiAoKCRldmVudD8udGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdidXR0b24nKSAmJiB0aGlzLnJhbmdlPy5lbmRPZmZzZXQgPT09IHRoaXMucmFuZ2U/LnN0YXJ0T2Zmc2V0KSB7XG4gICAgICB0aGlzLnJlc3RvcmVDYXJldFBvc2l0aW9uKHRoaXMuY29udGVudEVkaXRhYmxlRWxlbWVudCk7XG4gICAgICB0aGlzLmNhbGxPbkNoYW5nZSgpO1xuICAgIH1cbiAgfVxuXG4gIHdyaXRlVmFsdWUoaW5wdXRWYWx1ZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmICh0aGlzLmNvbnRlbnRFZGl0YWJsZSkge1xuICAgICAgY29uc3QgZmluYWxWYWx1ZSA9IHRoaXMucGFyc2VWYWx1ZShpbnB1dFZhbHVlIHx8ICcnKTtcblxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmNvbnRlbnRFZGl0YWJsZS5uYXRpdmVFbGVtZW50LCAnaW5uZXJIVE1MJywgZmluYWxWYWx1ZSk7XG4gICAgICBzdXBlci5vblZhbHVlQ2hhbmdlKGZpbmFsVmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgY2FsbE9uQ2hhbmdlKCkge1xuICAgIGNvbnN0IGZpbmFsVmFsdWUgPSAodGhpcy5jb250ZW50RWRpdGFibGUgJiYgdGhpcy5wYXJzZVZhbHVlKHRoaXMuY29udGVudEVkaXRhYmxlLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MKSkgfHwgJyc7XG5cbiAgICBzdXBlci5vblZhbHVlQ2hhbmdlKGZpbmFsVmFsdWUpO1xuICB9XG5cbiAgdmFsaWRhdGUoY29udHJvbD86IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsIHtcbiAgICBpZiAoY29udHJvbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW2JiLXJpY2gtdGV4dC1lZGl0b3ItdWldOiBcImNvbnRyb2xcIiBhcmd1bWVudCBpbiBcInZhbGlkYXRlXCIgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCAnICtcbiAgICAgICAgICAnaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZScsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0TWVzc2FnZVRleHQoKSB8fCBudWxsO1xuICAgIGNvbnN0IHZhbGlkYXRvcnMgPSBbVmFsaWRhdG9ycy5tYXhMZW5ndGgodGhpcy5tYXhMZW5ndGgpLCBWYWxpZGF0b3JzLm1pbkxlbmd0aCh0aGlzLm1pbkxlbmd0aCldO1xuXG4gICAgaWYgKHRoaXMucmVxdWlyZWQpIHtcbiAgICAgIHZhbGlkYXRvcnMucHVzaCh0aGlzLmN1c3RvbVJlcXVpcmVkVmFsaWRhdGlvbi5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb21wb3NlID0gVmFsaWRhdG9ycy5jb21wb3NlKHZhbGlkYXRvcnMpO1xuXG4gICAgcmV0dXJuIGNvbXBvc2UgJiYgY29tcG9zZSh7IHZhbHVlIH0gYXMgQWJzdHJhY3RDb250cm9sKTtcbiAgfVxuXG4gIGxhYmVsQ2xpY2soKSB7XG4gICAgaWYgKHRoaXMuY29udGVudEVkaXRhYmxlKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFZGl0YWJsZS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgY2FsbE9uRm9jdXMoKSB7XG4gICAgc3VwZXIub25Gb2N1cygpO1xuICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7XG4gIH1cblxuICBjYWxsT25CbHVyKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc3VwZXIub25CbHVyKCk7XG4gICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRNZXNzYWdlVGV4dChjb250ZW50Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnW2JiLXJpY2gtdGV4dC1lZGl0b3ItdWldOiBcImNvbnRlbnRcIiBhcmd1bWVudCBpbiBcImdldE1lc3NhZ2VUZXh0XCIgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgJyArXG4gICAgICAgICAgJ2JlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZScsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnRlbnRFZGl0YWJsZUVsZW1lbnQudGV4dENvbnRlbnQgfHwgJyc7XG4gIH1cblxuICBzaG93Q291bnRlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudGVyICYmICEhdGhpcy5tYXhMZW5ndGggJiYgTnVtYmVyLmlzRmluaXRlKHRoaXMubWF4TGVuZ3RoKTtcbiAgfVxuXG4gIGxpbmtBZGRlZCgpIHtcbiAgICB0aGlzLmNhbGxPbkNoYW5nZSgpO1xuICAgIHRoaXMucmVzdG9yZUNhcmV0UG9zaXRpb24odGhpcy5jb250ZW50RWRpdGFibGVFbGVtZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNvbnRlbnRFZGl0YWJsZUVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRFZGl0YWJsZT8ubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VWYWx1ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpc0h0bWwgPSAvPFxcLz9bYS16XVtcXHNcXFNdKj4vaS50ZXN0KHZhbHVlKTtcblxuICAgIHJldHVybiB0aGlzLnJlcGxhY2VTcGFjZXMoaXNIdG1sID8gdGhpcy5zYW5pdGl6ZXIuc2FuaXRpemUoU2VjdXJpdHlDb250ZXh0LkhUTUwsIHZhbHVlKSB8fCAnJyA6IHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVwbGFjZVNwYWNlcyA9ICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHZhbHVlLnJlcGxhY2UoLyZuYnNwO3wmIzE2MDsvZywgJyAnKTtcblxuICBwcml2YXRlIGN1c3RvbVJlcXVpcmVkVmFsaWRhdGlvbigpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldE1lc3NhZ2VUZXh0KCk7XG5cbiAgICBpZiAoIXZhbHVlIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICF2YWx1ZS50cmltKCkpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIHJlc3RvcmVDYXJldFBvc2l0aW9uKGVsOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGVtcHR5UmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICBjb25zdCBpc0VkaXRvclNlbGVjdGlvbiA9ICEhdGhpcy5yYW5nZT8uZW5kQ29udGFpbmVyLnBhcmVudEVsZW1lbnQ/LmNsb3Nlc3QoYC4ke3RoaXMuY29udGVudENsYXNzTmFtZX1gKTtcbiAgICBlbXB0eVJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbCk7XG4gICAgZW1wdHlSYW5nZS5jb2xsYXBzZShmYWxzZSk7XG4gICAgc2VsZWN0aW9uPy5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICBpZiAoaXNFZGl0b3JTZWxlY3Rpb24pIHtcbiAgICAgIHNlbGVjdGlvbj8uYWRkUmFuZ2UodGhpcy5yYW5nZSBhcyBSYW5nZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGVjdGlvbj8uYWRkUmFuZ2UoZW1wdHlSYW5nZSk7XG4gICAgfVxuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwiYmItcmljaC10ZXh0LWVkaXRvclwiPlxuICA8bGFiZWwgY2xhc3M9XCJiYi1yaWNoLXRleHQtZWRpdG9yX19sYWJlbFwiIFthdHRyLmlkXT1cImxhYmVsSWRcIiBmb3I9XCJ7eyBpZCB9fVwiICpuZ0lmPVwibGFiZWxcIiAoY2xpY2spPVwibGFiZWxDbGljaygpXCI+e3tcbiAgICBsYWJlbFxuICB9fTwvbGFiZWw+XG4gIDxkaXZcbiAgICB0YWJpbmRleD1cIjBcIlxuICAgIHJvbGU9XCJ0ZXh0Ym94XCJcbiAgICBhcmlhLWxhYmVsPVwiYmItcmljaC10ZXh0LWVkaXRvci10ZXh0Ym94XCJcbiAgICBhcmlhLWxhYmVsbGVkYnk9XCJiYi1yaWNoLXRleHQtZWRpdG9yLXRleHRib3hcIlxuICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIGJiLXJpY2gtdGV4dC1lZGl0b3JfX2FjdGlvbmJhclwiXG4gICAgW25nQ2xhc3NdPVwieyAnYmItcmljaC10ZXh0LWVkaXRvci0tZGlzYWJsZWQnOiByZWFkb25seSB8fCBkaXNhYmxlZCB9XCJcbiAgPlxuICAgIDxkaXYgW25nQ2xhc3NdPVwibWFpbkFyZWFDbGFzc05hbWVcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgI2NvbnRlbnRlZGl0YWJsZVxuICAgICAgICBbbmdDbGFzc109XCJjb250ZW50Q2xhc3NOYW1lXCJcbiAgICAgICAgW2F0dHIuY29udGVudGVkaXRhYmxlXT1cIiFyZWFkb25seSAmJiAhZGlzYWJsZWRcIlxuICAgICAgICBbYXR0ci5wbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgIFthdHRyLnJlYWRvbmx5XT1cInJlYWRvbmx5XCJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJhcmlhTGFiZWwgfHwgbGFiZWxcIlxuICAgICAgICBbYXR0ci5hcmlhLWxhYmVsbGVkYnldPVwiYXJpYUxhYmVsbGVkYnkgPyBhcmlhTGFiZWxsZWRieSA6IGxhYmVsID8gbGFiZWxJZCA6IG51bGxcIlxuICAgICAgICBbYXR0ci5hcmlhLWRlc2NyaWJlZGJ5XT1cImFyaWFEZXNjcmliZWRieSA/IGFyaWFEZXNjcmliZWRieSA6IG51bGxcIlxuICAgICAgICAoaW5wdXQpPVwiY2FsbE9uQ2hhbmdlKClcIlxuICAgICAgICAoYmx1cik9XCJjYWxsT25CbHVyKClcIlxuICAgICAgICAoZm9jdXMpPVwiY2FsbE9uRm9jdXMoKVwiXG4gICAgICA+PC9kaXY+XG4gICAgICA8ZGl2IGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGNsYXNzPVwic3Itb25seVwiPlxuICAgICAgICA8c3BhblxuICAgICAgICAgIGFyaWEtYXRvbWljPVwidHJ1ZVwiXG4gICAgICAgICAgcm9sZT1cImxvZ1wiXG4gICAgICAgICAgW2F0dHIuYXJpYS1oaWRkZW5dPVwiZ2V0TWVzc2FnZVRleHQoKS5sZW5ndGggPD0gbWF4TGVuZ3RoIC0gNVwiXG4gICAgICAgICAgaTE4bj1cIlxuICAgICAgICAgICAgQ2hhciBjb3VudGVyIExlbmd0aCBXYXJuaW5nfFN0cmluZyBhYm92ZSB0byByZWFjaGVkICdtYXhMZW5ndGgnIGNoYXJhY3RlcnMuXG4gICAgICAgICAgICBAQGJiLXJpY2gtdGV4dC1lZGl0b3ItdWkubGVuZ3RoLXdhcm5pbmdcIlxuICAgICAgICAgID5Zb3UgdHlwZWQge3sgZ2V0TWVzc2FnZVRleHQoKS5sZW5ndGggfX0gb2Yge3sgbWF4TGVuZ3RoIH19IGFsbG93ZWQgY2hhcmFjdGVycyBpbiB0aGlzIGZpZWxkLjwvc3BhblxuICAgICAgICA+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImFjdGlvbnM7IGVsc2UgZGVmYXVsdEFjdGlvbnNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJiLXJpY2gtdGV4dC1lZGl0b3ItYnV0dG9uc1wiPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJhY3Rpb25zLnRlbXBsYXRlUmVmOyBjb250ZXh0OiBob3N0UmVmXCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDx0ZXh0YXJlYSBpZD1cInt7IGlkIH19XCIgY2xhc3M9XCJiYi1yaWNoLXRleHQtZWRpdG9yX190ZXh0YXJlYSBiYi1yaWNoLXRleHQtZWRpdG9yX190ZXh0YXJlYS0taGlkZGVuXCI+PC90ZXh0YXJlYT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxwXG4gICAgKm5nSWY9XCJzaG93Q291bnRlcigpXCJcbiAgICBjbGFzcz1cImJiLXJpY2gtdGV4dC1lZGl0b3JfX2NoYXItY291bnRlclwiXG4gICAgZGF0YS1yb2xlPVwiY2hhci1jb3VudGVyXCJcbiAgICBbbmdDbGFzc109XCJ7ICd0ZXh0LWRhbmdlcic6IGdldE1lc3NhZ2VUZXh0KCkubGVuZ3RoID4gbWF4TGVuZ3RoIH1cIlxuICA+XG4gICAgPHNwYW4+e3sgZ2V0TWVzc2FnZVRleHQoKS5sZW5ndGggfX0gLyB7eyBtYXhMZW5ndGggfX08L3NwYW4+XG4gICAgPHNwYW5cbiAgICAgICpuZ0lmPVwiZ2V0TWVzc2FnZVRleHQoKS5sZW5ndGggPiBtYXhMZW5ndGhcIlxuICAgICAgaTE4bj1cIkxpbWl0IGV4Y2VlZGVkIHRleHQgZXJyb3JAQGJiLXJpY2gtdGV4dC1lZGl0b3ItdWkubGltaXRFeGNlZWRlZFwiXG4gICAgICA+LCBsaW1pdCBleGNlZWRlZDwvc3BhblxuICAgID5cbiAgPC9wPlxuPC9kaXY+XG5cbjxuZy10ZW1wbGF0ZSAjZGVmYXVsdEFjdGlvbnMgYmJSaWNoVGV4dEVkaXRvckFjdGlvbnM+XG4gIDxiYi1yaWNoLXRleHQtZWRpdG9yLWJvbGQtYWN0aW9uXG4gICAgW2FjdGlvbnNUb29sdGlwUGxhY2VtZW50XT1cImFjdGlvbnNUb29sdGlwUGxhY2VtZW50XCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxuICA+PC9iYi1yaWNoLXRleHQtZWRpdG9yLWJvbGQtYWN0aW9uPlxuICA8YmItcmljaC10ZXh0LWVkaXRvci1pdGFsaWMtYWN0aW9uXG4gICAgW2FjdGlvbnNUb29sdGlwUGxhY2VtZW50XT1cImFjdGlvbnNUb29sdGlwUGxhY2VtZW50XCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxuICA+PC9iYi1yaWNoLXRleHQtZWRpdG9yLWl0YWxpYy1hY3Rpb24+XG4gIDxiYi1yaWNoLXRleHQtZWRpdG9yLXVuZGVybGluZS1hY3Rpb25cbiAgICBbYWN0aW9uc1Rvb2x0aXBQbGFjZW1lbnRdPVwiYWN0aW9uc1Rvb2x0aXBQbGFjZW1lbnRcIlxuICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZCB8fCByZWFkb25seVwiXG4gID48L2JiLXJpY2gtdGV4dC1lZGl0b3ItdW5kZXJsaW5lLWFjdGlvbj5cbiAgPGJiLXJpY2gtdGV4dC1lZGl0b3Itc3RyaWtldGhyb3VnaC1hY3Rpb25cbiAgICBbYWN0aW9uc1Rvb2x0aXBQbGFjZW1lbnRdPVwiYWN0aW9uc1Rvb2x0aXBQbGFjZW1lbnRcIlxuICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZCB8fCByZWFkb25seVwiXG4gID5cbiAgPC9iYi1yaWNoLXRleHQtZWRpdG9yLXN0cmlrZXRocm91Z2gtYWN0aW9uPlxuICA8c3BhbiByb2xlPVwic2VwYXJhdG9yXCIgY2xhc3M9XCJiYi1yaWNoLXRleHQtZWRpdG9yX190b29sYmFyLXNlcGFyYXRvclwiPjwvc3Bhbj5cbiAgPGJiLXJpY2gtdGV4dC1lZGl0b3Itb2xpc3QtYWN0aW9uXG4gICAgW2FjdGlvbnNUb29sdGlwUGxhY2VtZW50XT1cImFjdGlvbnNUb29sdGlwUGxhY2VtZW50XCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxuICA+PC9iYi1yaWNoLXRleHQtZWRpdG9yLW9saXN0LWFjdGlvbj5cbiAgPGJiLXJpY2gtdGV4dC1lZGl0b3ItdWxpc3QtYWN0aW9uXG4gICAgW2FjdGlvbnNUb29sdGlwUGxhY2VtZW50XT1cImFjdGlvbnNUb29sdGlwUGxhY2VtZW50XCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxuICA+XG4gIDwvYmItcmljaC10ZXh0LWVkaXRvci11bGlzdC1hY3Rpb24+XG4gIDxzcGFuIHJvbGU9XCJzZXBhcmF0b3JcIiBjbGFzcz1cImJiLXJpY2gtdGV4dC1lZGl0b3JfX3Rvb2xiYXItc2VwYXJhdG9yXCI+PC9zcGFuPlxuICA8YmItcmljaC10ZXh0LWVkaXRvci1wYXJhZ3JhcGgtYWN0aW9uXG4gICAgW2FjdGlvbnNUb29sdGlwUGxhY2VtZW50XT1cImFjdGlvbnNUb29sdGlwUGxhY2VtZW50XCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxuICA+PC9iYi1yaWNoLXRleHQtZWRpdG9yLXBhcmFncmFwaC1hY3Rpb24+XG4gIDxiYi1yaWNoLXRleHQtZWRpdG9yLWNvZGUtYWN0aW9uXG4gICAgW2FjdGlvbnNUb29sdGlwUGxhY2VtZW50XT1cImFjdGlvbnNUb29sdGlwUGxhY2VtZW50XCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxuICA+PC9iYi1yaWNoLXRleHQtZWRpdG9yLWNvZGUtYWN0aW9uPlxuICA8YmItcmljaC10ZXh0LWVkaXRvci1saW5rLWFjdGlvblxuICAgIFthY3Rpb25zVG9vbHRpcFBsYWNlbWVudF09XCJhY3Rpb25zVG9vbHRpcFBsYWNlbWVudFwiXG4gICAgW2NvbnRlbnRDbGFzc05hbWVzXT1cIltjb250ZW50Q2xhc3NOYW1lLCBtYWluQXJlYUNsYXNzTmFtZV1cIlxuICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZCB8fCByZWFkb25seVwiXG4gICAgKGxpbmtBZGRlZCk9XCJsaW5rQWRkZWQoKVwiXG4gID48L2JiLXJpY2gtdGV4dC1lZGl0b3ItbGluay1hY3Rpb24+XG48L25nLXRlbXBsYXRlPlxuIl19