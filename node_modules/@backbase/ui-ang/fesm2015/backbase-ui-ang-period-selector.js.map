{"version":3,"file":"backbase-ui-ang-period-selector.js","sources":["../../../../libs/ui-ang/period-selector/period-selector.component.ts","../../../../libs/ui-ang/period-selector/period-selector.component.html","../../../../libs/ui-ang/period-selector/period-selector.module.ts","../../../../libs/ui-ang/period-selector/backbase-ui-ang-period-selector.ts"],"sourcesContent":["import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { DatePipe } from '@angular/common';\n\nexport type FormatFn = (date: Date) => string;\n// @TODO: should be extended with week, year, etc. once we get requirement for it\nexport type PeriodSize = 'month';\nexport interface Period {\n  start: Date;\n  end: Date;\n}\nexport interface PeriodFormatters {\n  title?: FormatFn;\n  start?: FormatFn;\n  end?: FormatFn;\n}\n\ninterface CombinedFormatters {\n  title: FormatFn;\n  start: FormatFn;\n  end: FormatFn;\n}\n\n/**\n * @name PeriodSelectorComponent\n *\n * @description\n * Component that selects a period.\n */\n@Component({\n  selector: 'bb-period-selector-ui',\n  templateUrl: './period-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PeriodSelectorComponent implements OnInit {\n  private combinedFormatters: CombinedFormatters = {\n    title: (date) => this.datePipe.transform(date, 'MMMM') || '',\n    start: (date) => this.datePipe.transform(date, 'mediumDate') || '',\n    end: (date) => this.datePipe.transform(date, 'mediumDate') || '',\n  };\n\n  /**\n   * Start date of the period.\n   */\n  @Input() periodStart: Date | undefined;\n  /**\n   * End date of the period.\n   */\n  @Input() periodEnd: Date | undefined;\n  /**\n   * Custom date period formatter.\n   */\n  @Input()\n  set periodFormatters(formatters: PeriodFormatters) {\n    this.combinedFormatters = Object.assign(this.combinedFormatters, formatters);\n  }\n  /**\n   * Period step\n   */\n  @Input() period: PeriodSize = 'month';\n\n  /**\n   * EventEmitter for triggering a periodChange event.\n   */\n  @Output() periodChange = new EventEmitter<Period>();\n\n  constructor(private readonly datePipe: DatePipe) {}\n\n  formattedTitle: string | undefined;\n  formattedStart: string | undefined;\n  formattedEnd: string | undefined;\n\n  get isLastPeriod(): boolean {\n    if (!this.periodStart) {\n      return true;\n    }\n\n    const now = new Date();\n\n    return now.getFullYear() === this.periodStart.getFullYear() && now.getMonth() === this.periodStart.getMonth();\n  }\n\n  ngOnInit() {\n    if (typeof this.periodStart === 'undefined' || typeof this.periodEnd === 'undefined') {\n      throw new Error('`periodStart`, and `periodEnd` inputs are required in `bb-period-selector-ui` component');\n    }\n\n    this.setFormattedValues();\n  }\n\n  private setFormattedValues() {\n    this.formattedTitle = this.combinedFormatters.title(this.periodStart as Date);\n    this.formattedStart = this.combinedFormatters.start(this.periodStart as Date);\n    this.formattedEnd = this.combinedFormatters.end(this.periodEnd as Date);\n  }\n\n  changePeriod(next: boolean) {\n    if (!this.periodStart || (next && this.isLastPeriod)) {\n      return;\n    }\n\n    this.periodStart.setMonth(this.periodStart.getMonth() + (next ? 1 : -1));\n    this.periodEnd = this.isLastPeriod\n      ? new Date(this.periodStart.getFullYear(), this.periodStart.getMonth(), new Date().getDate(), 23, 59, 59, 999)\n      : new Date(this.periodStart.getFullYear(), this.periodStart.getMonth() + 1, 0, 23, 59, 59, 999);\n\n    this.setFormattedValues();\n    this.periodChange.emit({\n      start: this.periodStart,\n      end: this.periodEnd,\n    });\n  }\n}\n","<div class=\"bb-period-selector\">\n  <div>\n    <button bbButton circle=\"“true”\" (click)=\"changePeriod(false)\" color=\"link-dark\" size=\"sm\">\n      <bb-icon-ui size=\"md\" name=\"chevron-left\"></bb-icon-ui>\n    </button>\n  </div>\n  <div class=\"bb-period-selector__date\">\n    <div class=\"bb-period-selector__month\">{{ formattedTitle }}</div>\n    <div class=\"bb-period-selector__period\">\n      <time>{{ formattedStart }}</time> - <time>{{ formattedEnd }}</time>\n    </div>\n  </div>\n  <div>\n    <button\n      bbButton\n      [circle]=\"true\"\n      (click)=\"changePeriod(true)\"\n      [ngClass]=\"{ disabled: isLastPeriod }\"\n      color=\"link-dark\"\n      size=\"sm\"\n    >\n      <bb-icon-ui size=\"md\" name=\"chevron-right\"></bb-icon-ui>\n    </button>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\n\nimport { PeriodSelectorComponent } from './period-selector.component';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { ButtonModule } from '@backbase/ui-ang/button';\n\n@NgModule({\n  imports: [CommonModule, IconModule, ButtonModule],\n  declarations: [PeriodSelectorComponent],\n  exports: [PeriodSelectorComponent],\n  providers: [DatePipe],\n})\nexport class PeriodSelectorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;;;AAsBA;;;;;AAKG;MAMU,uBAAuB,CAAA;AAgClC,IAAA,WAAA,CAA6B,QAAkB,EAAA;QAAlB,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAU;AA/BvC,QAAA,IAAA,CAAA,kBAAkB,GAAuB;AAC/C,YAAA,KAAK,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE;AAC5D,YAAA,KAAK,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,EAAE;AAClE,YAAA,GAAG,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,EAAE;SACjE,CAAC;AAiBF;;AAEG;QACM,IAAM,CAAA,MAAA,GAAe,OAAO,CAAC;AAEtC;;AAEG;AACO,QAAA,IAAA,CAAA,YAAY,GAAG,IAAI,YAAY,EAAU,CAAC;KAED;AAjBnD;;AAEG;IACH,IACI,gBAAgB,CAAC,UAA4B,EAAA;AAC/C,QAAA,IAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;KAC9E;AAiBD,IAAA,IAAI,YAAY,GAAA;AACd,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AACrB,YAAA,OAAO,IAAI,CAAC;AACb,SAAA;AAED,QAAA,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;QAEvB,OAAO,GAAG,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,IAAI,GAAG,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;KAC/G;IAED,QAAQ,GAAA;AACN,QAAA,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,WAAW,IAAI,OAAO,IAAI,CAAC,SAAS,KAAK,WAAW,EAAE;AACpF,YAAA,MAAM,IAAI,KAAK,CAAC,yFAAyF,CAAC,CAAC;AAC5G,SAAA;QAED,IAAI,CAAC,kBAAkB,EAAE,CAAC;KAC3B;IAEO,kBAAkB,GAAA;AACxB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,WAAmB,CAAC,CAAC;AAC9E,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,WAAmB,CAAC,CAAC;AAC9E,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,SAAiB,CAAC,CAAC;KACzE;AAED,IAAA,YAAY,CAAC,IAAa,EAAA;AACxB,QAAA,IAAI,CAAC,IAAI,CAAC,WAAW,KAAK,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE;YACpD,OAAO;AACR,SAAA;QAED,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACzE,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY;AAChC,cAAE,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC;AAC9G,cAAE,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QAElG,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;YACrB,KAAK,EAAE,IAAI,CAAC,WAAW;YACvB,GAAG,EAAE,IAAI,CAAC,SAAS;AACpB,SAAA,CAAC,CAAC;KACJ;;qHA7EU,uBAAuB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,QAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAvB,uBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,uBAAuB,gOCjCpC,mzBAyBA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA,CAAA,aAAA,EAAA,QAAA,EAAA,YAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,EAAA,YAAA,EAAA,SAAA,EAAA,gBAAA,CAAA,EAAA,CAAA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA,CAAA,eAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,OAAA,EAAA,YAAA,EAAA,OAAA,EAAA,QAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,WAAA,EAAA,MAAA,EAAA,CAAA,OAAA,EAAA,SAAA,CAAA,EAAA,CAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA;4FDQa,uBAAuB,EAAA,UAAA,EAAA,CAAA;kBALnC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,uBAAuB;AACjC,oBAAA,WAAW,EAAE,kCAAkC;oBAC/C,eAAe,EAAE,uBAAuB,CAAC,MAAM;AAChD,iBAAA,CAAA;+FAWU,WAAW,EAAA,CAAA;sBAAnB,KAAK;gBAIG,SAAS,EAAA,CAAA;sBAAjB,KAAK;gBAKF,gBAAgB,EAAA,CAAA;sBADnB,KAAK;gBAOG,MAAM,EAAA,CAAA;sBAAd,KAAK;gBAKI,YAAY,EAAA,CAAA;sBAArB,MAAM;;;MElDI,oBAAoB,CAAA;;kHAApB,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;mHAApB,oBAAoB,EAAA,YAAA,EAAA,CAJhB,uBAAuB,CAD5B,EAAA,OAAA,EAAA,CAAA,YAAY,EAAE,UAAU,EAAE,YAAY,CAAA,EAAA,OAAA,EAAA,CAEtC,uBAAuB,CAAA,EAAA,CAAA,CAAA;mHAGtB,oBAAoB,EAAA,SAAA,EAFpB,CAAC,QAAQ,CAAC,EAAA,OAAA,EAAA,CAHZ,CAAC,YAAY,EAAE,UAAU,EAAE,YAAY,CAAC,CAAA,EAAA,CAAA,CAAA;4FAKtC,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBANhC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,OAAO,EAAE,CAAC,YAAY,EAAE,UAAU,EAAE,YAAY,CAAC;oBACjD,YAAY,EAAE,CAAC,uBAAuB,CAAC;oBACvC,OAAO,EAAE,CAAC,uBAAuB,CAAC;oBAClC,SAAS,EAAE,CAAC,QAAQ,CAAC;AACtB,iBAAA,CAAA;;;ACZD;;AAEG;;;;"}