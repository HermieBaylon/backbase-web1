{"version":3,"file":"backbase-ui-ang-layout.js","sources":["../../../../libs/ui-ang/layout/bb-layout-lib/layout.model.ts","../../../../libs/ui-ang/layout/bb-layout-nav-dropdown-directive/layout-nav-dropdown.directive.ts","../../../../libs/ui-ang/layout/layout.module.ts","../../../../libs/ui-ang/layout/bb-layout-lib/layout.service.ts","../../../../libs/ui-ang/layout/backbase-ui-ang-layout.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\nimport { MediaBreakpoints } from '@backbase/ui-ang/media-query-lib';\n\nexport interface LayoutConfig {\n  collapseBreakpoint: MediaBreakpoints;\n}\n\nexport const LAYOUT_CONFIG_TOKEN = new InjectionToken<LayoutConfig>('injectable token for LayoutService');\n","import { Directive, ContentChildren, AfterContentInit, QueryList, NgZone, ChangeDetectorRef } from '@angular/core';\nimport { RouterLinkActive, Router, NavigationEnd } from '@angular/router';\nimport { filter, first, switchMap } from 'rxjs/operators';\n\n@Directive({ selector: '[bbLayoutNavDropdown]', exportAs: 'bbLayoutNavDropdown' })\nexport class LayoutNavDropdownDirective implements AfterContentInit {\n  isActive = false;\n\n  @ContentChildren(RouterLinkActive, { descendants: true }) routerLinks?: QueryList<RouterLinkActive>;\n\n  constructor(private readonly router: Router, private readonly ngZone: NgZone) {}\n\n  ngAfterContentInit(): void {\n    this.router.events\n      .pipe(\n        filter((event): event is NavigationEnd => event instanceof NavigationEnd),\n        switchMap((_: NavigationEnd) => this.ngZone.onStable.pipe(first())),\n      )\n      .subscribe(() => {\n        this.ngZone.run(() => {\n          if (this.routerLinks) {\n            this.isActive = this.routerLinks.toArray().some((navLink) => navLink.isActive);\n          }\n        });\n      });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, ModuleWithProviders } from '@angular/core';\n\nimport { MediaQueryModule } from '@backbase/ui-ang/media-query-lib';\nimport { LayoutConfig, LAYOUT_CONFIG_TOKEN } from './bb-layout-lib/layout.model';\nimport { LayoutNavDropdownDirective } from './bb-layout-nav-dropdown-directive/layout-nav-dropdown.directive';\n\n@NgModule({\n  imports: [CommonModule, MediaQueryModule],\n  declarations: [LayoutNavDropdownDirective],\n  exports: [LayoutNavDropdownDirective],\n})\nexport class LayoutModule {\n  static forRoot(config: LayoutConfig): ModuleWithProviders<LayoutModule> {\n    return { ngModule: LayoutModule, providers: [{ provide: LAYOUT_CONFIG_TOKEN, useValue: config }] };\n  }\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport { merge, Subject, of, EMPTY, Observable } from 'rxjs';\nimport { distinctUntilChanged, map, shareReplay, filter, withLatestFrom, switchMap, tap } from 'rxjs/operators';\nimport { MediaQueryService } from '@backbase/ui-ang/media-query-lib';\nimport { LayoutConfig, LAYOUT_CONFIG_TOKEN } from './layout.model';\nimport { Router, NavigationEnd } from '@angular/router';\n\n/**\n * ## Navigation Type Horizontal\n * - On large desktop show the menu in the topbar. On mobile show a side menu\n *\n * ## Navigation Type Vertical\n * - On large desktop, show the sidebar. Toggling collapses the nav items into icons.\n * - On tablet and small desktop, collapse the nav items into icons. Toggling shows the full nav items.\n * - On mobile, don't collapse the sidebar, but hide it. Toggling shows the sidebar.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LayoutService {\n  private readonly isHighResolutionViewSubject: Subject<boolean> = new Subject<boolean>();\n  readonly isHighResolutionView$: Observable<boolean> = this.isHighResolutionViewSubject.asObservable();\n  readonly navigationExpanded$: Observable<boolean>;\n  private readonly manuallyExpanded$ = new Subject<boolean>();\n  private isNavExpanded = false;\n\n  constructor(\n    private readonly mediaQueryService: MediaQueryService,\n    private readonly router: Router,\n    @Optional() @Inject(LAYOUT_CONFIG_TOKEN) private readonly config: LayoutConfig,\n  ) {\n    /**\n     * Default breakpoint used by business\n     */\n    if (!this.config) {\n      this.config = { collapseBreakpoint: 'xl' };\n    }\n\n    /**\n     * Observing the changes for screen resize\n     */\n    const isLowResolutionView$ = this.mediaQueryService.isMediaBreakpointMatches(\n      'max-width',\n      this.config.collapseBreakpoint,\n    );\n\n    /**\n     * In mobile view after navigation to another route the sidebar should collapse\n     */\n    const collapseOnRouterNav$ = this.router.events.pipe(\n      filter((event) => event instanceof NavigationEnd),\n      withLatestFrom(isLowResolutionView$),\n      switchMap(([, isLowResolutionView]) => (isLowResolutionView ? of(false) : EMPTY)),\n    );\n\n    this.navigationExpanded$ = merge(\n      isLowResolutionView$.pipe(\n        map((isLowResolutionView) => {\n          this.isHighResolutionViewSubject.next(!isLowResolutionView);\n\n          return !isLowResolutionView;\n        }),\n      ),\n      collapseOnRouterNav$,\n      this.manuallyExpanded$,\n    ).pipe(\n      distinctUntilChanged(),\n      shareReplay({ bufferSize: 1, refCount: true }),\n      tap((isExpanded: boolean) => {\n        this.isNavExpanded = isExpanded;\n      }),\n    );\n  }\n\n  /**\n   * Toggling navigation visibility\n   */\n  toggleNav() {\n    this.isNavExpanded = !this.isNavExpanded;\n    this.manuallyExpanded$.next(this.isNavExpanded);\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}