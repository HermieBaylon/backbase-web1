{"version":3,"file":"backbase-ui-ang-keyboard-click-directive.js","sources":["../../../../libs/ui-ang/keyboard-click-directive/keyboard-click.directive.ts","../../../../libs/ui-ang/keyboard-click-directive/keyboard-click.module.ts","../../../../libs/ui-ang/keyboard-click-directive/backbase-ui-ang-keyboard-click-directive.ts"],"sourcesContent":["import { Directive, ElementRef, EventEmitter, HostListener, OnDestroy, Output } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { throttleTime, takeUntil } from 'rxjs/operators';\n\n/**\n * @name KeyboardClickDirective\n *\n * @description\n * Directive that add click/keydown.enter/keydown.space events on element\n * Used for adding accessibility(tab navigation events) for element\n */\n@Directive({\n  selector: '[bbKeyboardClick]',\n})\nexport class KeyboardClickDirective implements OnDestroy {\n  /**\n   * Stream that should be fired on click/keydown.enter/keydown.space\n   */\n  @Output() bbKeyboardClick = new EventEmitter<Event>();\n\n  private readonly emit$ = new Subject<Event>();\n  private readonly gc$ = new Subject<void>();\n  constructor(private readonly elem: ElementRef<HTMLElement>) {\n    // Fix for frequent keydown event generation for spacebar in FF and IE\n    this.emit$.pipe(throttleTime(100), takeUntil(this.gc$)).subscribe(this.bbKeyboardClick);\n  }\n\n  @HostListener('keydown.enter', ['$event'])\n  @HostListener('keydown.space', ['$event'])\n  onActionKeyPressed($event: KeyboardEvent) {\n    // Check if the selected element is the current element itself and not its nested selectable children\n    if (this.elem.nativeElement !== $event.target) {\n      return;\n    }\n    this.emit$.next($event);\n  }\n\n  @HostListener('click', ['$event'])\n  onClicked($event: MouseEvent) {\n    this.emit$.next($event);\n  }\n\n  ngOnDestroy() {\n    this.gc$.next();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { KeyboardClickDirective } from './keyboard-click.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [KeyboardClickDirective],\n  exports: [KeyboardClickDirective],\n})\nexport class KeyboardClickModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}