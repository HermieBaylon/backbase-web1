{"version":3,"file":"backbase-ui-ang-product-selector.js","sources":["../../../../libs/ui-ang/product-selector/product-selector.component.ts","../../../../libs/ui-ang/product-selector/product-selector.component.html","../../../../libs/ui-ang/product-selector/product-selector.module.ts","../../../../libs/ui-ang/product-selector/backbase-ui-ang-product-selector.ts"],"sourcesContent":["import { Component, ContentChildren, ElementRef, HostListener, Input, ViewChild } from '@angular/core';\nimport { DeprecationsService } from '@backbase/foundation-ang/core';\nimport { NgbDropdown } from '@ng-bootstrap/ng-bootstrap';\n\nexport interface ProductItem {\n  id: string;\n  name?: string;\n  currency?: string;\n  amount?: string;\n  productNumber?: string;\n  [key: string]: any;\n}\n\n/**\n * @name ProductSelectorComponent\n *\n * @description\n * A dropdown component that displays items in a pre-defined format.\n *\n * @a11y\n * Every items from list in custom templates need have\n * role=\"option\" attribute, for detection by Screen Reader like option.\n *\n * Every items from list in custom templates need have  #listItem,\n * for keyBoard accessibility(navigate with keyUp/keyDown)\n */\n@Component({\n  selector: 'bb-product-selector-ui',\n  templateUrl: './product-selector.component.html',\n})\nexport class ProductSelectorComponent {\n  constructor(private readonly deprecationsService: DeprecationsService) {}\n  /**\n   * Focused item index from product selector list\n   */\n  focusedItemIndex = -1;\n  /**\n   * State of focus on product selector element\n   */\n  focusState = '';\n  /**\n   * Open/close state of dropDown menu\n   */\n  isOpen = false;\n  /**\n   * Whether the dropdown should be closed when clicking one of dropdown items or pressing ESC\n   */\n  @Input() autoClose = true;\n\n  /**\n   * The relative position where the dropdown menu will be open\n   */\n  @Input() position = 'bottom';\n\n  /**\n   * Specifies which element the dropdown should be appended to.\n   */\n  @Input() container: '' | 'body' = '';\n  isIE = navigator.userAgent.indexOf('MSIE ') > -1 || navigator.userAgent.indexOf('Trident/') > -1;\n  @ViewChild('bbDropdown', { static: true }) bbDropdown: NgbDropdown | undefined;\n  @ViewChild('dropdownToggle') dropdownToggle!: ElementRef;\n  @ContentChildren('listItem') listItems!: Array<ElementRef>;\n\n  @HostListener('window:keydown', ['$event'])\n  onKeyEvent(event: KeyboardEvent) {\n    if (this.isOpen) {\n      switch (this.isIE ? event.keyCode : event.key) {\n        case 40:\n        case 'ArrowDown':\n          this.focusedItemIndex = Math.min(this.focusedItemIndex + 1, this.listItems.length - 1);\n          this.focusItem();\n          break;\n        case 38:\n        case 'ArrowUp':\n          this.focusedItemIndex = Math.max(this.focusedItemIndex - 1, 0);\n          this.focusItem();\n          break;\n        default:\n          return;\n      }\n      event.preventDefault();\n    }\n  }\n\n  close() {\n    if (this.bbDropdown && this.autoClose && this.bbDropdown.isOpen()) {\n      this.bbDropdown.close();\n    }\n  }\n\n  open() {\n    if (this.bbDropdown && !this.bbDropdown.isOpen()) {\n      this.bbDropdown.open();\n    }\n  }\n\n  onClose() {\n    if (this.autoClose) {\n      this.close();\n      this.dropdownToggle.nativeElement.focus();\n    }\n  }\n\n  focusItem() {\n    this.listItems.forEach((el, index) => {\n      if (index === this.focusedItemIndex) {\n        el.nativeElement.tabIndex = 0;\n        el.nativeElement.focus();\n      }\n    });\n  }\n\n  /**\n   * Event handler for change open/close state in dropdown menu\n   */\n  onOpenChange($event: boolean) {\n    this.isOpen = $event;\n    if (!this.isOpen) {\n      this.focusedItemIndex = -1;\n    }\n  }\n\n  /**\n   * Event handler for blur dropdown menu\n   */\n  onBlur() {\n    if (this.bbDropdown && this.bbDropdown.isOpen()) {\n      this.bbDropdown.close();\n    }\n  }\n}\n","<div class=\"bb-product-selector\">\n  <div\n    ngbDropdown\n    #bbDropdown=\"ngbDropdown\"\n    [autoClose]=\"autoClose\"\n    [container]=\"container\"\n    (blur)=\"onBlur()\"\n    (openChange)=\"onOpenChange($event)\"\n    [placement]=\"position\"\n    class=\"bb-product-selector__dropdown\"\n  >\n    <button\n      ngbDropdownToggle\n      #dropdownToggle\n      bbButton\n      color=\"unstyled\"\n      class=\"bb-product-selector__item\"\n      [attr.data-role]=\"'product-selector-expand-button'\"\n      type=\"button\"\n    >\n      <div class=\"bb-product-selector__item-content\" [attr.data-role]=\"'product-selector-selected-content'\">\n        <ng-content select=\"[bbDropdownToggle]\"></ng-content>\n      </div>\n      <bb-icon-ui cropped class=\"bb-product-selector__icon\" [name]=\"isOpen ? 'toggle-up' : 'toggle-down'\"></bb-icon-ui>\n    </button>\n    <div\n      ngbDropdownMenu\n      class=\"bb-product-selector__dropdown-menu-panel\"\n      role=\"menu\"\n      (click)=\"onClose()\"\n      [attr.data-role]=\"'product-selector-dropdown-menu'\"\n    >\n      <div class=\"bb-product-selector__dropdown-menu\">\n        <ng-content select=\"[bbDropdownMenu]\"></ng-content>\n      </div>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgbDropdownModule } from '@ng-bootstrap/ng-bootstrap';\nimport { IconModule } from '@backbase/ui-ang/icon';\nimport { ProductSelectorComponent } from './product-selector.component';\nimport { ButtonModule } from '@backbase/ui-ang/button';\n\n@NgModule({\n  imports: [CommonModule, NgbDropdownModule, IconModule, ButtonModule],\n  declarations: [ProductSelectorComponent],\n  exports: [ProductSelectorComponent],\n})\nexport class ProductSelectorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;;;;;;;;;AAaA;;;;;;;;;;;;AAYG;MAKU,wBAAwB,CAAA;AACnC,IAAA,WAAA,CAA6B,mBAAwC,EAAA;QAAxC,IAAmB,CAAA,mBAAA,GAAnB,mBAAmB,CAAqB;AACrE;;AAEG;QACH,IAAgB,CAAA,gBAAA,GAAG,CAAC,CAAC,CAAC;AACtB;;AAEG;QACH,IAAU,CAAA,UAAA,GAAG,EAAE,CAAC;AAChB;;AAEG;QACH,IAAM,CAAA,MAAA,GAAG,KAAK,CAAC;AACf;;AAEG;QACM,IAAS,CAAA,SAAA,GAAG,IAAI,CAAC;AAE1B;;AAEG;QACM,IAAQ,CAAA,QAAA,GAAG,QAAQ,CAAC;AAE7B;;AAEG;QACM,IAAS,CAAA,SAAA,GAAgB,EAAE,CAAC;QACrC,IAAI,CAAA,IAAA,GAAG,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;KA3BxB;AAiCzE,IAAA,UAAU,CAAC,KAAoB,EAAA;QAC7B,IAAI,IAAI,CAAC,MAAM,EAAE;AACf,YAAA,QAAQ,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,GAAG;AAC3C,gBAAA,KAAK,EAAE,CAAC;AACR,gBAAA,KAAK,WAAW;oBACd,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,GAAG,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBACvF,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,MAAM;AACR,gBAAA,KAAK,EAAE,CAAC;AACR,gBAAA,KAAK,SAAS;AACZ,oBAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC/D,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,MAAM;AACR,gBAAA;oBACE,OAAO;AACV,aAAA;YACD,KAAK,CAAC,cAAc,EAAE,CAAC;AACxB,SAAA;KACF;IAED,KAAK,GAAA;AACH,QAAA,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE;AACjE,YAAA,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;AACzB,SAAA;KACF;IAED,IAAI,GAAA;QACF,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;AACxB,SAAA;KACF;IAED,OAAO,GAAA;QACL,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAA,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;AAC3C,SAAA;KACF;IAED,SAAS,GAAA;QACP,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,KAAK,KAAI;AACnC,YAAA,IAAI,KAAK,KAAK,IAAI,CAAC,gBAAgB,EAAE;AACnC,gBAAA,EAAE,CAAC,aAAa,CAAC,QAAQ,GAAG,CAAC,CAAC;AAC9B,gBAAA,EAAE,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;AAC1B,aAAA;AACH,SAAC,CAAC,CAAC;KACJ;AAED;;AAEG;AACH,IAAA,YAAY,CAAC,MAAe,EAAA;AAC1B,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAChB,YAAA,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;AAC5B,SAAA;KACF;AAED;;AAEG;IACH,MAAM,GAAA;QACJ,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE;AAC/C,YAAA,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;AACzB,SAAA;KACF;;sHAnGU,wBAAwB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,mBAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAxB,wBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,wBAAwB,+eC9BrC,muCAsCA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA,CAAA,aAAA,EAAA,QAAA,EAAA,YAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,SAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,EAAA,YAAA,EAAA,SAAA,EAAA,gBAAA,CAAA,EAAA,CAAA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA,CAAA,WAAA,EAAA,QAAA,EAAA,eAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,WAAA,EAAA,WAAA,EAAA,WAAA,EAAA,SAAA,EAAA,eAAA,CAAA,EAAA,OAAA,EAAA,CAAA,YAAA,CAAA,EAAA,QAAA,EAAA,CAAA,aAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,EAAA,CAAA,eAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,OAAA,EAAA,YAAA,EAAA,OAAA,EAAA,QAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,EAAA,CAAA,iBAAA,EAAA,QAAA,EAAA,qBAAA,EAAA,EAAA,EAAA,IAAA,EAAA,EAAA,CAAA,eAAA,EAAA,QAAA,EAAA,mBAAA,EAAA,CAAA,EAAA,CAAA,CAAA;4FDRa,wBAAwB,EAAA,UAAA,EAAA,CAAA;kBAJpC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,wBAAwB;AAClC,oBAAA,WAAW,EAAE,mCAAmC;AACjD,iBAAA,CAAA;0GAkBU,SAAS,EAAA,CAAA;sBAAjB,KAAK;gBAKG,QAAQ,EAAA,CAAA;sBAAhB,KAAK;gBAKG,SAAS,EAAA,CAAA;sBAAjB,KAAK;gBAEqC,UAAU,EAAA,CAAA;sBAApD,SAAS;AAAC,gBAAA,IAAA,EAAA,CAAA,YAAY,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAA;gBACZ,cAAc,EAAA,CAAA;sBAA1C,SAAS;uBAAC,gBAAgB,CAAA;gBACE,SAAS,EAAA,CAAA;sBAArC,eAAe;uBAAC,UAAU,CAAA;gBAG3B,UAAU,EAAA,CAAA;sBADT,YAAY;uBAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAA;;;MEnD/B,qBAAqB,CAAA;;mHAArB,qBAAqB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;oHAArB,qBAAqB,EAAA,YAAA,EAAA,CAHjB,wBAAwB,CAAA,EAAA,OAAA,EAAA,CAD7B,YAAY,EAAE,iBAAiB,EAAE,UAAU,EAAE,YAAY,CAAA,EAAA,OAAA,EAAA,CAEzD,wBAAwB,CAAA,EAAA,CAAA,CAAA;oHAEvB,qBAAqB,EAAA,OAAA,EAAA,CAJvB,CAAC,YAAY,EAAE,iBAAiB,EAAE,UAAU,EAAE,YAAY,CAAC,CAAA,EAAA,CAAA,CAAA;4FAIzD,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBALjC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;oBACR,OAAO,EAAE,CAAC,YAAY,EAAE,iBAAiB,EAAE,UAAU,EAAE,YAAY,CAAC;oBACpE,YAAY,EAAE,CAAC,wBAAwB,CAAC;oBACxC,OAAO,EAAE,CAAC,wBAAwB,CAAC;AACpC,iBAAA,CAAA;;;ACXD;;AAEG;;;;"}