{"version":3,"file":"backbase-ui-ang-account-number-pipe.js","sources":["../../../../libs/ui-ang/account-number-pipe/constants.ts","../../../../libs/ui-ang/account-number-pipe/accounts-displaying-format.service.ts","../../../../libs/ui-ang/account-number-pipe/account-number.pipe.ts","../../../../libs/ui-ang/account-number-pipe/account-number.module.ts","../../../../libs/ui-ang/account-number-pipe/backbase-ui-ang-account-number-pipe.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\n/**\n * Product number types\n */\nexport type AccountNumberType = 'cardNumber' | 'iban' | 'bban';\n\n/**\n * Account numbers displaying format\n */\nexport const DefaultAccountsDisplayingFormat: AccountsDisplayingFormat = {\n  segments: 4,\n};\n\n/**\n * Account numbers displaying format\n */\nexport interface AccountsDisplayingFormat {\n  /**\n   * The size (or array of sizes) the segments should have.\n   */\n  segments: number | Array<number>;\n}\n\n/**\n * Accounts displaying format configuration per attribute type\n */\nexport type AccountsDisplayingFormatConfiguration = {\n  /**\n   * Account displaying formats for iban, bban values\n   */\n  [key in AccountNumberType]?: AccountsDisplayingFormat;\n} & {\n  /**\n   * Account displaying format for card numbers\n   */\n  cardNumber?: AccountsDisplayingFormat & {\n    cardProviders?: Record<string, AccountsDisplayingFormat>;\n  };\n};\n\n/**\n * Accounts displaying format Token\n */\nexport const ACCOUNTS_DISPLAYING_FORMAT = new InjectionToken<AccountsDisplayingFormatConfiguration>(\n  'ACCOUNTS_DISPLAYING_FORMAT_TOKEN',\n);\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport {\n  ACCOUNTS_DISPLAYING_FORMAT,\n  DefaultAccountsDisplayingFormat,\n  AccountNumberType,\n  AccountsDisplayingFormat,\n  AccountsDisplayingFormatConfiguration,\n} from './constants';\n\n/**\n * A configuration service for account numbers displaying format\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class AccountsDisplayingFormatService {\n  /**\n   * @name AccountsDisplayingFormatService#constructor\n   * @param accountsDisplayingFormat - (Optional) AccountsDisplayingFormatConfiguration\n   *\n   * @internal\n   */\n  constructor(\n    @Optional()\n    @Inject(ACCOUNTS_DISPLAYING_FORMAT)\n    private readonly accountsDisplayingFormat: AccountsDisplayingFormatConfiguration,\n  ) {}\n\n  /**\n   * @name AccountsDisplayingFormatService#getDefaultFormat\n   * @param attributeType - numbers format attributeType\n   * @param cardProviderName - card provider name\n   *\n   * @description\n   * Gets default account numbers format per attribute type\n   */\n  getDefaultFormat(attributeType: AccountNumberType, cardProviderName?: string): AccountsDisplayingFormat {\n    if (attributeType === 'cardNumber') {\n      return this.getCardNumberFormat(cardProviderName);\n    }\n\n    return this.accountsDisplayingFormat?.[attributeType] ?? DefaultAccountsDisplayingFormat;\n  }\n\n  private getCardNumberFormat(cardProviderName?: string): AccountsDisplayingFormat {\n    const cardNumber = this.accountsDisplayingFormat?.cardNumber;\n    const providersConfiguration = Object.entries(cardNumber?.cardProviders || {}).reduce(\n      (configuration, entry) => ({ ...configuration, [entry[0].toLowerCase()]: entry[1] }),\n      {} as Record<string, AccountsDisplayingFormat>,\n    );\n\n    if (cardProviderName && providersConfiguration[cardProviderName.toLowerCase()]) {\n      return providersConfiguration[cardProviderName.toLowerCase()];\n    }\n\n    return cardNumber ?? DefaultAccountsDisplayingFormat;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { AccountNumberType, AccountsDisplayingFormat } from './constants';\nimport { AccountsDisplayingFormatService } from './accounts-displaying-format.service';\nimport { segment } from '@backbase/ui-ang/util';\n\n/**\n * Formats account numbers, applies different format configurations per number type\n */\n@Pipe({\n  name: 'bbAccountNumber',\n})\nexport class AccountNumberPipe implements PipeTransform {\n  /**\n   * @name AccountNumberPipe#constructor\n   * @param accountsDisplayingFormatService - AccountsDisplayingFormatService\n   *\n   * @internal\n   */\n  constructor(private readonly accountsDisplayingFormatService: AccountsDisplayingFormatService) {}\n\n  /**\n   * @name AccountNumberPipe#transform\n   * @param value - the string to transform\n   * @param configuration - type of the value (iban, bban or number) or a custom numbers format\n   * @param cardProviderName - card provider name\n   *\n   * @description\n   * Formats account numbers\n   *\n   * to use with a global accountsFormat configuration\n   * - '12345678' | bbAccountNumber:'iban'\n   * to apply a custom configuration\n   * - '12345678' | bbAccountNumber:{ segments: [2, 4, 2] }\n   * to apply a 'visa' card number configuration\n   * - '12345678' | bbAccountNumber:'cardNumber':'visa'\n   */\n  transform(\n    value: string | number,\n    configuration: AccountNumberType | AccountsDisplayingFormat,\n    cardProviderName?: string,\n  ): string {\n    const accountNumber = value.toString();\n    const displayingFormat =\n      typeof configuration === 'object'\n        ? (configuration as AccountsDisplayingFormat)\n        : this.accountsDisplayingFormatService.getDefaultFormat(configuration, cardProviderName);\n\n    return segment(accountNumber, displayingFormat.segments);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { AccountNumberPipe } from './account-number.pipe';\n\n@NgModule({\n  declarations: [AccountNumberPipe],\n  exports: [AccountNumberPipe],\n})\nexport class AccountNumberPipeModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.AccountsDisplayingFormatService"],"mappings":"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"}