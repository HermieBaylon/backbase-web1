{"version":3,"file":"backbase-ui-ang-base-classes.js","sources":["../../../../libs/ui-ang/base-classes/input-base/input-base.component.ts","../../../../libs/ui-ang/base-classes/input-base/input-base.module.ts","../../../../libs/ui-ang/base-classes/base-classes.module.ts","../../../../libs/ui-ang/base-classes/backbase-ui-ang-base-classes.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { ControlValueAccessor } from '@angular/forms';\nimport { DeprecationsService } from '@backbase/foundation-ang/future';\nimport { noop } from 'rxjs';\n\nlet _nextId = 0;\n\nexport function getInputNextId() {\n  return `bb_input_${_nextId++}`;\n}\n\nexport const defaultSize = 20;\n\n/**\n * Widget roles specified in ARIA 1.1\n */\nconst VALID_WIDGET_ROLES = [\n  'button',\n  'checkbox',\n  'combobox',\n  'grid',\n  'gridcell',\n  'link',\n  'listbox',\n  'menu',\n  'menubar',\n  'menuitem',\n  'menuitemcheckbox',\n  'menuitemradio',\n  'option',\n  'progressbar',\n  'radio',\n  'radiogroup',\n  'scrollbar',\n  'searchbox',\n  'separator',\n  'slider',\n  'spinbutton',\n  'switch',\n  'tab',\n  'tablist',\n  'tabpanel',\n  'textbox',\n  'tree',\n  'treegrid',\n  'treeitem',\n];\n\n/**\n * @name InputBaseComponent\n *\n * @description\n * Base component for input fields.\n *\n * @a11y Current component provide option to pass needed accessibility\n * attributes to custom components\n */\n@Component({\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class InputBaseComponent implements OnInit, ControlValueAccessor {\n  private _id = getInputNextId();\n  private _labelClasses: string | undefined;\n\n  onTouched: () => void = noop;\n  /**\n   * The id for the input. Defaults to unique string.\n   * Used to map the label to the input.\n   */\n  @Input()\n  set id(value: string) {\n    this._id = value;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  /**\n   * The label for the input. Defaults to an empty string.\n   */\n  @Input() label = '';\n\n  private _role: string | undefined;\n\n  /**\n   * Customize the ARIA role for the HTML input/select/textarea element inside this component.\n   *\n   * This can be used to improve accessibility for components, for example by configuring `[role]=\"'combobox'\"`\n   * for a component that provides an autocomplete list.\n   *\n   * Values that are valid for the native HTML form elements are allowed.\n   */\n  @Input()\n  set role(value: string | undefined) {\n    if (typeof value === 'string' && VALID_WIDGET_ROLES.indexOf(value) === -1) {\n      // Prevent setting invalid roles\n      // TODO: Log a warning about the invalid role\n      value = undefined;\n    }\n\n    this._role = value;\n  }\n\n  get role(): string | undefined {\n    return this._role;\n  }\n\n  protected _size: number = defaultSize;\n\n  /**\n   * Configure the minimum width to fit the specified number of characters that should fit for HTML `<input>`\n   */\n  @Input() get size(): number | string {\n    return this._size;\n  }\n\n  set size(arg: number | string) {\n    const size = this.getSizeByKeyword(arg);\n\n    // Optionally convert a `size` keyword to an integer value.\n    // This can be supported by subclasses of `InputBaseComponent`\n    arg = typeof size !== 'undefined' ? size : arg;\n\n    const int = parseInt(String(arg), 10);\n\n    if (int >= 1 && !isNaN(int)) {\n      this._size = int;\n    }\n  }\n\n  /**\n   * Class names that must be included on the `<input>` form control\n   */\n  @Input() inputClassName: string | undefined;\n  /**\n   * It indicates whether inputting text could trigger display of one or more\n   * predictions of the user's intended value for a combobox, searchbox, or textbox.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-autocomplete') ariaAutocomplete: string | undefined;\n\n  /**\n   * It identifies the currently active element when focus is on a\n   * composite widget, combobox, textbox, group, or application.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-activedescendant') ariaActivedescendant: string | undefined;\n\n  /**\n   * When an interactive or input control has an impact on another element in a document or application,\n   * the aria-control indicates which element or elements the user interface widget controls.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-controls') ariaControls: string | undefined;\n\n  /**\n   * Set aria-describedby  with an element id that contains a detailed decription of the widget.\n   * It is used to establish a relationship between widgets or groups and the text that describes them.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-describedby') ariaDescribedby: string | undefined;\n\n  /**\n   * The aria-expanded attribute is set on an element to indicate if a control is expanded or collapsed,\n   * and whether or not its child elements are displayed or hidden.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-expanded') ariaExpanded: string | undefined;\n\n  /**\n   * The aria-invalid state indicates the entered value is not in a format expected by the application.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-invalid') ariaInvalid: string | undefined;\n\n  /**\n   * Accessible label when control does not need to render label tag.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-label') ariaLabel: string | undefined;\n\n  /**\n   * The aria-labelledby property enables authors to reference other elements on the page to define an\n   * accessible name. This is useful when using elements that don't have native support for associating\n   * elements to provide an accessible name.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-labelledby') ariaLabelledby: string | undefined;\n\n  /**\n   * The aria-owns attribute identifies an element (or elements) in order to define a visual, functional, or\n   * contextual relationship between a parent and its child elements when the DOM hierarchy cannot be used\n   * to represent the relationship.\n   */\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('aria-owns') ariaOwns: string | undefined;\n\n  // `aria-readonly` is not needed, use `readonly` instead\n  // `aria-required` is not needed, use `required` instead\n\n  /**\n   * Whether the input is required. Defaults to false.\n   */\n  @Input() required = false;\n  /**\n   * Whether the input is read only. Defaults to false.\n   */\n  @Input() readonly = false;\n  /**\n   * An event emitter for on blur actions.\n   */\n  @Output() blur = new EventEmitter<FocusEvent | void>();\n  /**\n   * An event emitter for on focus actions.\n   */\n  @Output() focus = new EventEmitter<FocusEvent | void>();\n  /**\n   * Whether the text input should be auto-focused when shown.\n   */\n  @Input() autofocus = false;\n\n  protected readonly _valueChange = new EventEmitter<any>();\n\n  @Input() disabled = false;\n  value: Object | string | boolean | null = '';\n\n  constructor(protected readonly cd: ChangeDetectorRef, protected readonly deprecationsService: DeprecationsService) {}\n\n  ngOnInit() {\n    if (!(this.label || this.ariaLabel || this.ariaLabelledby)) {\n      console.warn(`Found an input from '${this.constructor.name}' without label, please provide it.`);\n    }\n  }\n\n  onBlur($event?: FocusEvent) {\n    this.blur.emit($event);\n    this.onTouched();\n  }\n\n  onChange: (newValue: Object | string | undefined | null) => void = () => {};\n\n  onValueChange(newValue?: Object | string) {\n    if (newValue === undefined) {\n      this.onChange(this.value);\n    } else {\n      this.onChange(newValue);\n      this.value = newValue;\n      this._valueChange.emit(this.value);\n    }\n  }\n\n  onFocus($event?: FocusEvent) {\n    this.focus.emit($event);\n  }\n\n  writeValue(inputValue: Object | string | null): void {\n    this.value = inputValue === null ? '' : inputValue;\n    this.cd.markForCheck();\n  }\n\n  registerOnChange(fn: () => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this.cd.markForCheck();\n  }\n\n  /**\n   * Returns the `input` `size` value for a keyword, such as \"xxl\".\n   * Subclasses can choose to implement a custom mapping, which will be used to configure `size`.\n   */\n  protected getSizeByKeyword(arg: any): number | undefined {\n    return undefined;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { InputBaseComponent } from './input-base.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [InputBaseComponent],\n  exports: [InputBaseComponent],\n})\nexport class InputBaseModule {}\n","import { NgModule } from '@angular/core';\nimport { InputBaseModule } from './input-base/input-base.module';\n\n@NgModule({\n  imports: [InputBaseModule],\n  exports: [InputBaseModule],\n})\nexport class BaseClassesModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}